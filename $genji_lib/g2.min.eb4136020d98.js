!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).G2={})}(this,function(I){"use strict";var j="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function R(){throw new Error("setTimeout has not been defined")}function F(){throw new Error("clearTimeout has not been defined")}var z=R,G=F;function W(e){if(z===setTimeout)return setTimeout(e,0);if((z===R||!z)&&setTimeout)return(z=setTimeout)(e,0);try{return z(e,0)}catch(t){try{return z.call(null,e,0)}catch(t){return z.call(this,e,0)}}}"function"==typeof j.setTimeout&&(z=setTimeout),"function"==typeof j.clearTimeout&&(G=clearTimeout);var H,V=[],Y=!1,U=-1;function q(){Y&&H&&(Y=!1,H.length?V=H.concat(V):U=-1,V.length&&X())}function X(){if(!Y){for(var t=W(q),e=(Y=!0,V.length);e;){for(H=V,V=[];++U<e;)H&&H[U].run();U=-1,e=V.length}H=null,Y=!1,!function(e){if(G===clearTimeout)return clearTimeout(e);if((G===F||!G)&&clearTimeout)return(G=clearTimeout)(e);try{G(e)}catch(t){try{return G.call(null,e)}catch(t){return G.call(this,e)}}}(t)}}function $(t,e){this.fun=t,this.array=e}$.prototype.run=function(){this.fun.apply(null,this.array)};function Z(){}var t=Z,K=Z,e=Z,J=Z,n=Z,Q=Z,r=Z;var tt=j.performance||{},et=tt.now||tt.mozNow||tt.msNow||tt.oNow||tt.webkitNow||function(){return(new Date).getTime()};var nt=new Date;var rt,it={nextTick:function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];V.push(new $(t,e)),1!==V.length||Y||W(X)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:t,addListener:K,once:e,off:J,removeListener:n,removeAllListeners:Q,emit:r,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*et.call(tt),n=Math.floor(e),e=Math.floor(e%1*1e9);return t&&(n-=t[0],(e-=t[1])<0&&(n--,e+=1e9)),[n,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-nt)/1e3}},t=(rt={},function(){var s,c,l,u,r,t,i,h,o,e="object"==typeof j?j:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=O(rt);function f(t,e,n){var r=o.get(t);if(v(r)){if(!n)return;r=new i,o.set(t,r)}t=r.get(e);if(v(t)){if(!n)return;t=new i,r.set(e,t)}return t}function a(t,e,n){e=f(e,n,!1);return!v(e)&&!!e.has(t)}function d(t,e,n){e=f(e,n,!1);if(!v(e))return e.get(t)}function p(t,e,n,r){f(n,r,!0).set(t,e)}function y(t,e){var n=[],t=f(t,e,!1);if(v(t))return n;for(var r,i,o=function(t){var e=M(t,l);if(E(e)){e=e.call(t);if(b(e))return e}throw new TypeError}(t.keys()),a=0;;){var s=function(t){t=t.next();return!t.done&&t}(o);if(!s)return n.length=a,n;s=s.value;try{n[a]=s}catch(t){try{i=void 0,(i=(r=o).return)&&i.call(r)}finally{throw t}}a++}}function g(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function v(t){return void 0===t}function m(t){return null===t}function b(t){return"object"==typeof t?null!==t:"function"==typeof t}function x(t,e){switch(g(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===e?"string":5===e?"number":"default",n=M(t,c);if(void 0===n){var r=t;if("string"===(a="default"==e?"number":e)){a=r.toString;if(E(a))if(!b(o=a.call(r)))return o;var i=r.valueOf;if(E(i))if(!b(o=i.call(r)))return o}else{i=r.valueOf;if(E(i))if(!b(o=i.call(r)))return o;var o,a=r.toString;if(E(a))if(!b(o=a.call(r)))return o}throw new TypeError}i=n.call(t,e);if(b(i))throw new TypeError;return i}function w(t){t=x(t,3);return"symbol"==typeof t?t:""+t}function k(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"function"==typeof t}function _(t){return"function"==typeof t}function M(t,e){t=t[e];if(null!=t){if(E(t))return t;throw new TypeError}}function S(t){var e,n=Object.getPrototypeOf(t);return"function"!=typeof t||t===r||n!==r||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?n:e}function T(t){return t.__=void 0,delete t.__,t}function O(n,r){return function(t,e){"function"!=typeof n[t]&&Object.defineProperty(n,t,{configurable:!0,writable:!0,value:e}),r&&r(t,e)}}void 0===e.Reflect?e.Reflect=rt:n=O(e.Reflect,n),e=n,s=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,c=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",l=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",n="function"==typeof Object.create,t={__proto__:[]}instanceof Array,u={create:n?function(){return T(Object.create(null))}:t?function(){return T({__proto__:null})}:function(){return T({})},has:(n=!n&&!t)?function(t,e){return s.call(t,e)}:function(t,e){return e in t},get:n?function(t,e){return s.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},r=Object.getPrototypeOf(Function),t="object"==typeof it&&it.env&&"true"===it.env.REFLECT_METADATA_USE_MAP_POLYFILL,i=t||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var i={},n=[],t=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[l]=function(){return this},t.prototype.next=function(){var t,e=this._index;return 0<=e&&e<this._keys.length?(t=this._selector(this._keys[e],this._values[e]),e+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:t,done:!1}):{value:void 0,done:!0}},t.prototype.throw=function(t){throw 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),t},t.prototype.return=function(t){return 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),{value:t,done:!0}},t}();function e(){this._keys=[],this._values=[],this._cacheKey=i,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return 0<=this._find(t,!1)},e.prototype.get=function(t){t=this._find(t,!1);return 0<=t?this._values[t]:void 0},e.prototype.set=function(t,e){t=this._find(t,!0);return this._values[t]=e,this},e.prototype.delete=function(t){var e=this._find(t,!1);if(0<=e){for(var n=this._keys.length,r=e+1;r<n;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=i,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=i,this._cacheIndex=-2},e.prototype.keys=function(){return new t(this._keys,this._values,r)},e.prototype.values=function(){return new t(this._keys,this._values,o)},e.prototype.entries=function(){return new t(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[l]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e;function r(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}():Map,h=t||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new i}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[l]=function(){return this.keys()},t}():Set,o=new(t||"function"!=typeof WeakMap?function(){var i=16,e=u.create(),n=r();function t(){this._key=r()}return t.prototype.has=function(t){t=o(t,!1);return void 0!==t&&u.has(t,this._key)},t.prototype.get=function(t){t=o(t,!1);return void 0!==t?u.get(t,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){t=o(t,!1);return void 0!==t&&delete t[this._key]},t.prototype.clear=function(){this._key=r()},t;function r(){for(var t;t="@@WeakMap@@"+function(){for(var t=function(t){return"function"!=typeof Uint8Array?a(new Array(t),t):"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t)}(i),e=(t[6]=79&t[6]|64,t[8]=191&t[8]|128,""),n=0;n<i;++n){var r=t[n];4!==n&&6!==n&&8!==n||(e+="-"),r<16&&(e+="0"),e+=r.toString(16).toLowerCase()}return e}(),u.has(e,t););return e[t]=!0,t}function o(t,e){if(!s.call(t,n)){if(!e)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}}():WeakMap),e("decorate",function(t,e,n,r){{if(v(n)){if(k(t)&&_(e))return function(t,e){for(var n=t.length-1;0<=n;--n){var r=(0,t[n])(e);if(!v(r)&&!m(r)){if(!_(r))throw new TypeError;e=r}}return e}(t,e)}else if(k(t)&&b(e)&&(b(r)||v(r)||m(r)))return m(r)&&(r=void 0),n=w(n),function(t,e,n,r){for(var i=t.length-1;0<=i;--i){var o=(0,t[i])(e,n,r);if(!v(o)&&!m(o)){if(!b(o))throw new TypeError;r=o}}return r}(t,e,n,r);throw new TypeError}}),e("metadata",function(n,r){return function(t,e){if(!b(t))throw new TypeError;if(!v(e)&&!function(t){switch(g(t)){case 3:case 4:return 1;default:return}}(e))throw new TypeError;p(n,r,t,e)}}),e("defineMetadata",function(t,e,n,r){if(!b(n))throw new TypeError;v(r)||(r=w(r));return p(t,e,n,r)}),e("hasMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return function t(e,n,r){var i=a(e,n,r);if(i)return!0;i=S(n);if(!m(i))return t(e,i,r);return!1}(t,e,n)}),e("hasOwnMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return a(t,e,n)}),e("getMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return function t(e,n,r){var i=a(e,n,r);if(i)return d(e,n,r);i=S(n);if(!m(i))return t(e,i,r);return}(t,e,n)}),e("getOwnMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return d(t,e,n)}),e("getMetadataKeys",function(t,e){if(!b(t))throw new TypeError;v(e)||(e=w(e));return function t(e,n){var r=y(e,n);e=S(e);if(null===e)return r;e=t(e,n);if(e.length<=0)return r;if(r.length<=0)return e;var i=new h;var o=[];for(var a=0,s=r;a<s.length;a++){var c=s[a];i.has(c)||(i.add(c),o.push(c))}for(var l=0,u=e;l<u.length;l++){c=u[l];i.has(c)||(i.add(c),o.push(c))}return o}(t,e)}),e("getOwnMetadataKeys",function(t,e){if(!b(t))throw new TypeError;v(e)||(e=w(e));return y(t,e)}),e("deleteMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));var r=f(e,n,!1);return!v(r)&&(!!r.delete(t)&&(0<r.size||((t=o.get(e)).delete(n),0<t.size||o.delete(e)),!0))})}(),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}),ot={},K={},J=(e=K,Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG],{}),n={},Q={},r=(Object.defineProperty(Q,"__esModule",{value:!0}),Q.TargetTypeEnum=Q.BindingTypeEnum=Q.BindingScopeEnum=void 0,Q.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Q.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Q.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},{}),at=(Object.defineProperty(r,"__esModule",{value:!0}),r.id=void 0,0);r.id=function(){return at++},Object.defineProperty(n,"__esModule",{value:!0}),n.Binding=void 0;var st=Q,ct=r;function lt(t,e){this.id=ct.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=st.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}lt.prototype.clone=function(){var t=new lt(this.serviceIdentifier,this.scope);return t.activated=t.scope===st.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},n.Binding=lt;var e={},ut=(Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded",{}),ht=(Object.defineProperty(ut,"__esModule",{value:!0}),ut.MetadataReader=void 0,K);function ft(){}ft.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(ht.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(ht.TAGGED,t)||{}}},ft.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(ht.TAGGED_PROP,t)||[]},ut.MetadataReader=ft;var dt={},pt={},i=(Object.defineProperty(pt,"__esModule",{value:!0}),pt.BindingCount=void 0,pt.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1},{}),yt=(Object.defineProperty(i,"__esModule",{value:!0}),i.isStackOverflowExeption=void 0,e);i.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===yt.STACK_OVERFLOW};var o={},gt=(Object.defineProperty(o,"__esModule",{value:!0}),o.circularDependencyToException=o.listMetadataForTarget=o.listRegisteredBindingsForServiceIdentifier=o.getServiceIdentifierAsString=o.getFunctionName=void 0,e);function vt(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function mt(t){return function t(e,n){void 0===n&&(n=[]);var r=vt(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}function bt(t){var e;return t.name||((e=(t=t.toString()).match(/^function\s*([^\s(]+)/))?e[1]:"Anonymous function: "+t)}o.getServiceIdentifierAsString=vt,o.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="";return 0!==(n=n(t,e)).length&&(r="\nRegistered bindings:",n.forEach(function(t){var e="Object";null!==t.implementationType&&(e=bt(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r},o.circularDependencyToException=function n(t){t.childRequests.forEach(function(t){var e;if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(t,t.serviceIdentifier))throw e=mt(t),new Error(gt.CIRCULAR_DEPENDENCY+" "+e);n(t)})},o.listMetadataForTarget=function(t,e){var n,r;return e.isTagged()||e.isNamed()?(n="",r=e.getNamedTag(),e=e.getCustomTags(),null!==r&&(n+=r.toString()+"\n"),null!==e&&e.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n):" "+t},o.getFunctionName=bt;var a={},xt=(Object.defineProperty(a,"__esModule",{value:!0}),a.Context=void 0,r);function wt(t){this.id=xt.id(),this.container=t}wt.prototype.addPlan=function(t){this.plan=t},wt.prototype.setCurrentRequest=function(t){this.currentRequest=t},a.Context=wt;var s={},kt=(Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0,K);function Et(t,e){this.key=t,this.value=e}Et.prototype.toString=function(){return this.key===kt.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},s.Metadata=Et;function _t(t,e){this.parentContext=t,this.rootRequest=e}var c={},Mt=(Object.defineProperty(c,"__esModule",{value:!0}),c.Plan=void 0,c.Plan=_t,{}),l={},u={},St=(Object.defineProperty(u,"__esModule",{value:!0}),u.tagProperty=u.tagParameter=u.decorate=void 0,e),Tt=K;function Ot(t,e,n,r,i){var o={},a="number"==typeof i,i=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(St.INVALID_DECORATOR_OPERATION);a=(o=Reflect.hasOwnMetadata(t,e)?Reflect.getMetadata(t,e):o)[i];if(Array.isArray(a))for(var s=0,c=a;s<c.length;s++){var l=c[s];if(l.key===r.key)throw new Error(St.DUPLICATED_METADATA+" "+l.key.toString())}else a=[];a.push(r),o[i]=a,Reflect.defineMetadata(t,o,e)}function At(t,e){Reflect.decorate(t,e)}u.tagParameter=function(t,e,n,r){Ot(Tt.TAGGED,t,e,r,n)},u.tagProperty=function(t,e,n){Ot(Tt.TAGGED_PROP,t.constructor,e,n)},u.decorate=function(t,e,n){var r,i;"number"==typeof n?At([(r=n,i=t,function(t,e){i(t,e,r)})],e):"string"==typeof n?Reflect.decorate([t],e,n):At([t],e)},Object.defineProperty(l,"__esModule",{value:!0}),l.inject=l.LazyServiceIdentifer=void 0;var Pt=e,Nt=K,Ct=s,Lt=u;function It(t){this._cb=t}It.prototype.unwrap=function(){return this._cb()},l.LazyServiceIdentifer=It,l.inject=function(i){return function(t,e,n){if(void 0===i)throw new Error(Pt.UNDEFINED_INJECT_ANNOTATION(t.name));var r=new Ct.Metadata(Nt.INJECT_TAG,i);"number"==typeof n?Lt.tagParameter(t,e,n,r):Lt.tagProperty(t,e,r)}};var h={},f={},jt=(Object.defineProperty(f,"__esModule",{value:!0}),f.QueryableString=void 0,Rt.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},Rt.prototype.endsWith=function(t){var t=t.split("").reverse().join(""),e=this.str.split("").reverse().join("");return this.startsWith.call({str:e},t)},Rt.prototype.contains=function(t){return-1!==this.str.indexOf(t)},Rt.prototype.equals=function(t){return this.str===t},Rt.prototype.value=function(){return this.str},Rt);function Rt(t){this.str=t}f.QueryableString=jt,Object.defineProperty(h,"__esModule",{value:!0}),h.Target=void 0;var Dt,Bt,Ft,zt,Gt,Wt,Ht,Vt=K,Yt=r,Ut=s,qt=f;function Xt(t,e,n,r){this.id=Yt.id(),this.type=t,this.serviceIdentifier=n,this.name=new qt.QueryableString(e||""),this.metadata=new Array;t=null;"string"==typeof r?t=new Ut.Metadata(Vt.NAMED_TAG,r):r instanceof Ut.Metadata&&(t=r),null!==t&&this.metadata.push(t)}function $t(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw a=Ft.MISSING_INJECTABLE_ANNOTATION+" "+e+".",new Error(a);var a=i.userGeneratedMetadata,i=Object.keys(a),s=0===n.length&&0<i.length,c=i.length>n.length,r=function(t,e,n,r,i){for(var o=[],a=0;a<i;a++){var s=function(t,e,n,r,i){var i=i[t.toString()]||[],o=Zt(i),a=!0!==o.unmanaged,r=r[t],s=o.inject||o.multiInject;(r=s||r)instanceof Bt.LazyServiceIdentifer&&(r=r.unwrap());if(a){var s=r===Object,a=r===Function,c=void 0===r,s=s||a||c;if(!e&&s)throw a=Ft.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".",new Error(a);c=new Ht.Target(zt.TargetTypeEnum.ConstructorArgument,o.targetName,r);return c.metadata=i,c}return null}(a,t,e,n,r);null!==s&&o.push(s)}return o}(r,e,o,a,(s||c?i:n).length),e=function t(e,n){var r=e.getPropertiesMetadata(n);var i=[];var o=Object.keys(r);for(var a=0,s=o;a<s.length;a++){var c=s[a],l=r[c],u=Zt(r[c]),c=u.targetName||c,u=u.inject||u.multiInject,c=new Ht.Target(zt.TargetTypeEnum.ClassProperty,c,u);c.metadata=l,i.push(c)}o=Object.getPrototypeOf(n.prototype).constructor;o!==Object&&(n=t(e,o),i=Dt(Dt([],i),n));return i}(t,n);return Dt(Dt([],r),e)}function Zt(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[Gt.INJECT_TAG],multiInject:e[Gt.MULTI_INJECT_TAG],targetName:e[Gt.NAME_TAG],unmanaged:e[Gt.UNMANAGED_TAG]}}Xt.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++)if(n[e].key===t)return!0;return!1},Xt.prototype.isArray=function(){return this.hasTag(Vt.MULTI_INJECT_TAG)},Xt.prototype.matchesArray=function(t){return this.matchesTag(Vt.MULTI_INJECT_TAG)(t)},Xt.prototype.isNamed=function(){return this.hasTag(Vt.NAMED_TAG)},Xt.prototype.isTagged=function(){return this.metadata.some(function(e){return Vt.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})})},Xt.prototype.isOptional=function(){return this.matchesTag(Vt.OPTIONAL_TAG)(!0)},Xt.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===Vt.NAMED_TAG})[0]:null},Xt.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return Vt.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})}):null},Xt.prototype.matchesNamedTag=function(t){return this.matchesTag(Vt.NAMED_TAG)(t)},Xt.prototype.matchesTag=function(i){var o=this;return function(t){for(var e=0,n=o.metadata;e<n.length;e++){var r=n[e];if(r.key===i&&r.value===t)return!0}return!1}},h.Target=Xt,jt=Mt,Dt=t&&t.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Object.defineProperty(jt,"__esModule",{value:!0}),jt.getFunctionName=jt.getBaseClassDependencyCount=jt.getDependencies=void 0,Bt=l,Ft=e,zt=Q,Gt=K,Wt=o,Object.defineProperty(jt,"getFunctionName",{enumerable:!0,get:function(){return Wt.getFunctionName}}),Ht=h,jt.getDependencies=function(t,e){return $t(t,Wt.getFunctionName(e),e,!1)},jt.getBaseClassDependencyCount=function t(e,n){var r,i,n=Object.getPrototypeOf(n.prototype).constructor;return n!==Object?(r=(i=$t(e,Wt.getFunctionName(n),n,!0)).map(function(t){return t.metadata.filter(function(t){return t.key===Gt.UNMANAGED_TAG})}),r=[].concat.apply([],r).length,0<(i=i.length-r)?i:t(e,n)):0};var f={},Kt=(Object.defineProperty(f,"__esModule",{value:!0}),f.Request=void 0,r);function Jt(t,e,n,r,i){this.id=Kt.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}Jt.prototype.addChildRequest=function(t,e,n){t=new Jt(t,this.parentContext,this,e,n);return this.childRequests.push(t),t},f.Request=Jt,Object.defineProperty(dt,"__esModule",{value:!0}),dt.getBindingDictionary=dt.createMockRequest=dt.plan=void 0;var Qt=pt,te=e,ee=Q,ne=K,re=i,ie=o,oe=a,ae=s,se=c,ce=Mt,le=f,ue=h;function he(t){return t._bindingDictionary}function fe(t,e,n,r,i){var o=de(n.container,i.serviceIdentifier),a=[];return o.length===Qt.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=de(n.container,i.serviceIdentifier)),a=e?o:o.filter(function(t){var e=new le.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)}),function(t,e,n,r){switch(e.length){case Qt.BindingCount.NoBindingsAvailable:if(n.isOptional())return;throw i=ie.getServiceIdentifierAsString(t),o=te.NOT_REGISTERED,o=(o+=ie.listMetadataForTarget(i,n))+ie.listRegisteredBindingsForServiceIdentifier(r,i,de),new Error(o);case Qt.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return;case Qt.BindingCount.MultipleBindingsAvailable:default:var i,o;if(n.isArray())return;throw i=ie.getServiceIdentifierAsString(t),o=te.AMBIGUOUS_MATCH+" "+i,o+=ie.listRegisteredBindingsForServiceIdentifier(r,i,de),new Error(o)}}(i.serviceIdentifier,a,i,n.container),a}function de(t,e){var n=[],r=he(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=de(t.parent,e)),n}dt.getBindingDictionary=he,dt.plan=function(t,e,n,r,i,o,a,s){void 0===s&&(s=!1);var c,e=new oe.Context(e),l=(r=r,l=i,c="",o=o,a=a,n=(n=n)?ne.MULTI_INJECT_TAG:ne.INJECT_TAG,n=new ae.Metadata(n,l),r=new ue.Target(r,c,l,n),void 0!==o&&(c=new ae.Metadata(o,a),r.metadata.push(c)),r);try{return function i(o,t,e,a,n,s){var r,c;null===n?(r=fe(o,t,a,null,s),c=new le.Request(e,a,null,r,s),e=new se.Plan(a,c),a.addPlan(e)):(r=fe(o,t,a,n,s),c=n.addChildRequest(s.serviceIdentifier,r,s)),r.forEach(function(t){var e=null;if(s.isArray())e=c.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;e=c}if(t.type===ee.BindingTypeEnum.Instance&&null!==t.implementationType){var n=ce.getDependencies(o,t.implementationType);if(!a.container.options.skipBaseClassChecks){var r=ce.getBaseClassDependencyCount(o,t.implementationType);if(n.length<r)throw r=te.ARGUMENTS_LENGTH_MISMATCH(ce.getFunctionName(t.implementationType)),new Error(r)}n.forEach(function(t){i(o,!1,t.serviceIdentifier,a,e,t)})}})}(t,s,i,e,null,l),e}catch(t){throw re.isStackOverflowExeption(t)&&e.plan&&ie.circularDependencyToException(e.plan.rootRequest),t}},dt.createMockRequest=function(t,e,n,r){return n=new ue.Target(ee.TargetTypeEnum.Variable,"",e,new ae.Metadata(n,r)),r=new oe.Context(t),new le.Request(e,r,null,[],n)};var jt={},pt={},pe=t&&t.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},ye=(Object.defineProperty(pt,"__esModule",{value:!0}),pt.resolveInstance=void 0,e),ge=Q,ve=K;pt.resolveInstance=function(t,e,n){var r,i,o=null,e=(o=0<e.length?(a=e.filter(function(t){return null!==t.target&&t.target.type===ge.TargetTypeEnum.ConstructorArgument}).map(n),o=new(t.bind.apply(t,pe([void 0],a))),r=o,a=n,i=(n=(n=e).filter(function(t){return null!==t.target&&t.target.type===ge.TargetTypeEnum.ClassProperty})).map(a),n.forEach(function(t,e){t=t.target.name.value(),e=i[e];r[t]=e}),r):new t,t),a=o;if(Reflect.hasMetadata(ve.POST_CONSTRUCT,e)){n=Reflect.getMetadata(ve.POST_CONSTRUCT,e);try{a[n.value]()}catch(t){throw new Error(ye.POST_CONSTRUCT_ERROR(e.name,t.message))}}return o},Object.defineProperty(jt,"__esModule",{value:!0}),jt.resolve=void 0;var me=e,be=Q,xe=i,we=o,ke=pt,Ee=function(e,n,t){try{return t()}catch(t){throw xe.isStackOverflowExeption(t)?new Error(me.CIRCULAR_DEPENDENCY_IN_FACTORY(e,n.toString())):t}},_e=function(s){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,n=t.childRequests,r=t.target&&t.target.isArray(),i=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(r&&i)return n.map(function(t){return _e(s)(t)});r=null;if(!t.target.isOptional()||0!==e.length){var o,a=e[0],i=a.scope===be.BindingScopeEnum.Singleton,e=a.scope===be.BindingScopeEnum.Request;if(i&&a.activated)return a.cache;if(e&&null!==s&&s.has(a.id))return s.get(a.id);if(a.type===be.BindingTypeEnum.ConstantValue)r=a.cache,a.activated=!0;else if(a.type===be.BindingTypeEnum.Function)r=a.cache,a.activated=!0;else if(a.type===be.BindingTypeEnum.Constructor)r=a.implementationType;else if(a.type===be.BindingTypeEnum.DynamicValue&&null!==a.dynamicValue)r=Ee("toDynamicValue",a.serviceIdentifier,function(){return a.dynamicValue(t.parentContext)});else if(a.type===be.BindingTypeEnum.Factory&&null!==a.factory)r=Ee("toFactory",a.serviceIdentifier,function(){return a.factory(t.parentContext)});else if(a.type===be.BindingTypeEnum.Provider&&null!==a.provider)r=Ee("toProvider",a.serviceIdentifier,function(){return a.provider(t.parentContext)});else{if(a.type!==be.BindingTypeEnum.Instance||null===a.implementationType)throw o=we.getServiceIdentifierAsString(t.serviceIdentifier),new Error(me.INVALID_BINDING_TYPE+" "+o);r=ke.resolveInstance(a.implementationType,n,_e(s))}return"function"==typeof a.onActivation&&(r=a.onActivation(t.parentContext,r)),i&&(a.cache=r,a.activated=!0),e&&null!==s&&!s.has(a.id)&&s.set(a.id,r),r}}};jt.resolve=function(t){return _e(t.plan.rootRequest.requestScope)(t.plan.rootRequest)};function Me(t,e){return null!==(t=t.parentRequest)&&(!!e(t)||Me(t,e))}function Se(n){return function(e){function t(t){return null!==t&&null!==t.target&&t.target.matchesTag(n)(e)}return t.metaData=new Oe.Metadata(n,e),t}}var a={},c={},Mt={},f={},h={},i={},pt={},Te=(Object.defineProperty(pt,"__esModule",{value:!0}),pt.typeConstraint=pt.namedConstraint=pt.taggedConstraint=pt.traverseAncerstors=void 0,K),Oe=s,Te=(pt.traverseAncerstors=Me,(pt.taggedConstraint=Se)(Te.NAMED_TAG)),Ae=(pt.namedConstraint=Te,pt.typeConstraint=function(n){return function(t){var e=null;return null!==t&&(e=t.bindings[0],"string"==typeof n?e.serviceIdentifier===n:(e=t.bindings[0].implementationType,n===e))}},Object.defineProperty(i,"__esModule",{value:!0}),i.BindingWhenSyntax=void 0,h),Pe=pt;function Ne(t){this._binding=t}Ne.prototype.when=function(t){return this._binding.constraint=t,new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenTargetNamed=function(t){return this._binding.constraint=Pe.namedConstraint(t),new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Pe.taggedConstraint(t)(e),new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return Pe.typeConstraint(e)(t.parentRequest)},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return Pe.namedConstraint(e)(t.parentRequest)},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenParentTagged=function(e,n){return this._binding.constraint=function(t){return Pe.taggedConstraint(e)(n)(t.parentRequest)},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return Pe.traverseAncerstors(t,Pe.typeConstraint(e))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!Pe.traverseAncerstors(t,Pe.typeConstraint(e))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return Pe.traverseAncerstors(t,Pe.namedConstraint(e))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!Pe.traverseAncerstors(t,Pe.namedConstraint(e))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenAnyAncestorTagged=function(e,n){return this._binding.constraint=function(t){return Pe.traverseAncerstors(t,Pe.taggedConstraint(e)(n))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenNoAncestorTagged=function(e,n){return this._binding.constraint=function(t){return!Pe.traverseAncerstors(t,Pe.taggedConstraint(e)(n))},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return Pe.traverseAncerstors(t,e)},new Ae.BindingOnSyntax(this._binding)},Ne.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!Pe.traverseAncerstors(t,e)},new Ae.BindingOnSyntax(this._binding)},i.BindingWhenSyntax=Ne,Object.defineProperty(h,"__esModule",{value:!0}),h.BindingOnSyntax=void 0;var Ce=i;function Le(t){this._binding=t}Le.prototype.onActivation=function(t){return this._binding.onActivation=t,new Ce.BindingWhenSyntax(this._binding)},h.BindingOnSyntax=Le,Object.defineProperty(f,"__esModule",{value:!0}),f.BindingWhenOnSyntax=void 0;var Ie=h,je=i;function Re(t){this._binding=t,this._bindingWhenSyntax=new je.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Ie.BindingOnSyntax(this._binding)}Re.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},Re.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},Re.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Re.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},Re.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},Re.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},Re.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},Re.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},Re.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},Re.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},Re.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},Re.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},Re.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},Re.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},Re.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},Re.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},f.BindingWhenOnSyntax=Re,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.BindingInSyntax=void 0;var De=Q,Be=f;function Fe(t){this._binding=t}Fe.prototype.inRequestScope=function(){return this._binding.scope=De.BindingScopeEnum.Request,new Be.BindingWhenOnSyntax(this._binding)},Fe.prototype.inSingletonScope=function(){return this._binding.scope=De.BindingScopeEnum.Singleton,new Be.BindingWhenOnSyntax(this._binding)},Fe.prototype.inTransientScope=function(){return this._binding.scope=De.BindingScopeEnum.Transient,new Be.BindingWhenOnSyntax(this._binding)},Mt.BindingInSyntax=Fe,Object.defineProperty(c,"__esModule",{value:!0}),c.BindingInWhenOnSyntax=void 0;var ze=Mt,Ge=h,We=i;function He(t){this._binding=t,this._bindingWhenSyntax=new We.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Ge.BindingOnSyntax(this._binding),this._bindingInSyntax=new ze.BindingInSyntax(t)}He.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},He.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},He.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},He.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},He.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},He.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},He.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},He.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},He.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},He.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},He.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},He.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},He.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},He.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},He.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},He.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},He.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},He.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},He.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},c.BindingInWhenOnSyntax=He,Object.defineProperty(a,"__esModule",{value:!0}),a.BindingToSyntax=void 0;var Ve=e,Ye=Q,Ue=c,qe=f;function Xe(t){this._binding=t}Xe.prototype.to=function(t){return this._binding.type=Ye.BindingTypeEnum.Instance,this._binding.implementationType=t,new Ue.BindingInWhenOnSyntax(this._binding)},Xe.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+Ve.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},Xe.prototype.toConstantValue=function(t){return this._binding.type=Ye.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Ye.BindingScopeEnum.Singleton,new qe.BindingWhenOnSyntax(this._binding)},Xe.prototype.toDynamicValue=function(t){return this._binding.type=Ye.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Ue.BindingInWhenOnSyntax(this._binding)},Xe.prototype.toConstructor=function(t){return this._binding.type=Ye.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=Ye.BindingScopeEnum.Singleton,new qe.BindingWhenOnSyntax(this._binding)},Xe.prototype.toFactory=function(t){return this._binding.type=Ye.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=Ye.BindingScopeEnum.Singleton,new qe.BindingWhenOnSyntax(this._binding)},Xe.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(Ve.INVALID_FUNCTION_BINDING);t=this.toConstantValue(t);return this._binding.type=Ye.BindingTypeEnum.Function,this._binding.scope=Ye.BindingScopeEnum.Singleton,t},Xe.prototype.toAutoFactory=function(e){return this._binding.type=Ye.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Ye.BindingScopeEnum.Singleton,new qe.BindingWhenOnSyntax(this._binding)},Xe.prototype.toProvider=function(t){return this._binding.type=Ye.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=Ye.BindingScopeEnum.Singleton,new qe.BindingWhenOnSyntax(this._binding)},Xe.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},a.BindingToSyntax=Xe;Te={},Object.defineProperty(Te,"__esModule",{value:!0}),Te.ContainerSnapshot=void 0,$e.of=function(t,e){var n=new $e;return n.bindings=t,n.middleware=e,n},Mt=$e;function $e(){}Te.ContainerSnapshot=Mt;var h={},Ze=(Object.defineProperty(h,"__esModule",{value:!0}),h.Lookup=void 0,e);function Ke(){this._map=new Map}Ke.prototype.getMap=function(){return this._map},Ke.prototype.add=function(t,e){if(null==t)throw new Error(Ze.NULL_ARGUMENT);if(null==e)throw new Error(Ze.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},Ke.prototype.get=function(t){if(null==t)throw new Error(Ze.NULL_ARGUMENT);t=this._map.get(t);if(void 0!==t)return t;throw new Error(Ze.KEY_NOT_FOUND)},Ke.prototype.remove=function(t){if(null==t)throw new Error(Ze.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(Ze.KEY_NOT_FOUND)},Ke.prototype.removeByCondition=function(n){var r=this;this._map.forEach(function(t,e){t=t.filter(function(t){return!n(t)});0<t.length?r._map.set(e,t):r._map.delete(e)})},Ke.prototype.hasKey=function(t){if(null==t)throw new Error(Ze.NULL_ARGUMENT);return this._map.has(t)},Ke.prototype.clone=function(){var n=new Ke;return this._map.forEach(function(t,e){t.forEach(function(t){return n.add(e,t.clone())})}),n},Ke.prototype.traverse=function(n){this._map.forEach(function(t,e){n(e,t)})},h.Lookup=Ke;var Je=t&&t.__awaiter||function(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})},Qe=t&&t.__generator||function(r,i){var o,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=i.call(r,c)}catch(t){e=[6,t],a=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},tn=t&&t.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},en=(Object.defineProperty(J,"__esModule",{value:!0}),J.Container=void 0,n),nn=e,rn=Q,on=K,an=ut,sn=dt,cn=jt,ln=a,un=r,hn=o,fn=Te,dn=h;function pn(t){this._appliedMiddleware=[];t=t||{};if("object"!=typeof t)throw new Error(""+nn.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=rn.BindingScopeEnum.Transient;else if(t.defaultScope!==rn.BindingScopeEnum.Singleton&&t.defaultScope!==rn.BindingScopeEnum.Transient&&t.defaultScope!==rn.BindingScopeEnum.Request)throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+nn.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=un.id(),this._bindingDictionary=new dn.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new an.MetadataReader}pn.merge=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=new pn,t=tn([t,e],n).map(function(t){return sn.getBindingDictionary(t)}),o=sn.getBindingDictionary(i);return t.forEach(function(t){var n;n=o,t.traverse(function(t,e){e.forEach(function(t){n.add(t.serviceIdentifier,t.clone())})})}),i},pn.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},pn.prototype.loadAsync=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return Je(this,void 0,void 0,function(){var e,n,r,i,o;return Qe(this,function(t){switch(t.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=a,t.label=1;case 1:return n<r.length?(i=r[n],o=e(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)]):[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},pn.prototype.unload=function(){for(var r=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){function e(t){return t.moduleId===n}var n;n=t.id;r._bindingDictionary.removeByCondition(e)})},pn.prototype.bind=function(t){var e=this.options.defaultScope||rn.BindingScopeEnum.Transient,e=new en.Binding(t,e);return this._bindingDictionary.add(t,e),new ln.BindingToSyntax(e)},pn.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},pn.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(nn.CANNOT_UNBIND+" "+hn.getServiceIdentifierAsString(e))}},pn.prototype.unbindAll=function(){this._bindingDictionary=new dn.Lookup},pn.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return e=!e&&this.parent?this.parent.isBound(t):e},pn.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,on.NAMED_TAG,e)},pn.prototype.isBoundTagged=function(t,e,n){var r,i,o=!1;return this._bindingDictionary.hasKey(t)&&(r=this._bindingDictionary.get(t),i=sn.createMockRequest(this,t,e,n),o=r.some(function(t){return t.constraint(i)})),o=!o&&this.parent?this.parent.isBoundTagged(t,e,n):o},pn.prototype.snapshot=function(){this._snapshots.push(fn.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},pn.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(nn.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},pn.prototype.createChild=function(t){t=new pn(t||this.options);return t.parent=this,t},pn.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware||this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},pn.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},pn.prototype.get=function(t){return this._get(!1,!1,rn.TargetTypeEnum.Variable,t)},pn.prototype.getTagged=function(t,e,n){return this._get(!1,!1,rn.TargetTypeEnum.Variable,t,e,n)},pn.prototype.getNamed=function(t,e){return this.getTagged(t,on.NAMED_TAG,e)},pn.prototype.getAll=function(t){return this._get(!0,!0,rn.TargetTypeEnum.Variable,t)},pn.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,rn.TargetTypeEnum.Variable,t,e,n)},pn.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,on.NAMED_TAG,e)},pn.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach(function(t){e.applyMiddleware(t)}),e.get(t)},pn.prototype._getContainerModuleHelpersFactory=function(){function r(t,e){t._binding.moduleId=e}var i=this;return function(t){return{bindFunction:function(t){t=i.bind.bind(i)(t);return r(t,n),t},isboundFunction:function(t){return i.isBound.bind(i)(t)},rebindFunction:(e=n=t,function(t){t=i.rebind.bind(i)(t);return r(t,e),t}),unbindFunction:function(t){i.unbind.bind(i)(t)}};var e,n}},pn.prototype._get=function(t,e,n,r,i,o){var a=null,t={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(t)))throw new Error(nn.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(t);return a},pn.prototype._planAndResolve=function(){var n=this;return function(t){var e=sn.plan(n._metadataReader,n,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints),e=t.contextInterceptor(e);return cn.resolve(e)}},J.Container=pn;function yn(t){this.id=gn.id(),this.registry=t}var i={},gn=(Object.defineProperty(i,"__esModule",{value:!0}),i.AsyncContainerModule=i.ContainerModule=void 0,r),c=(i.ContainerModule=function(t){this.id=gn.id(),this.registry=t},i.AsyncContainerModule=yn,{}),vn=(Object.defineProperty(c,"__esModule",{value:!0}),c.injectable=void 0,e),mn=K;c.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(mn.PARAM_TYPES,t))throw new Error(vn.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(mn.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(mn.PARAM_TYPES,e,t),t}};var f={},bn=(Object.defineProperty(f,"__esModule",{value:!0}),f.tagged=void 0,s),xn=u;f.tagged=function(i,o){return function(t,e,n){var r=new bn.Metadata(i,o);"number"==typeof n?xn.tagParameter(t,e,n,r):xn.tagProperty(t,e,r)}};var Mt={},wn=(Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.named=void 0,K),kn=s,En=u;Mt.named=function(i){return function(t,e,n){var r=new kn.Metadata(wn.NAMED_TAG,i);"number"==typeof n?En.tagParameter(t,e,n,r):En.tagProperty(t,e,r)}};var t={},_n=(Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0,K),Mn=s,Sn=u;t.optional=function(){return function(t,e,n){var r=new Mn.Metadata(_n.OPTIONAL_TAG,!0);"number"==typeof n?Sn.tagParameter(t,e,n,r):Sn.tagProperty(t,e,r)}};var n={},Tn=(Object.defineProperty(n,"__esModule",{value:!0}),n.unmanaged=void 0,K),On=s,An=u;n.unmanaged=function(){return function(t,e,n){var r=new On.Metadata(Tn.UNMANAGED_TAG,!0);An.tagParameter(t,e,n,r)}};var dt={},Pn=(Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiInject=void 0,K),Nn=s,Cn=u;dt.multiInject=function(i){return function(t,e,n){var r=new Nn.Metadata(Pn.MULTI_INJECT_TAG,i);"number"==typeof n?Cn.tagParameter(t,e,n,r):Cn.tagProperty(t,e,r)}};var jt={},Ln=(Object.defineProperty(jt,"__esModule",{value:!0}),jt.targetName=void 0,K),In=s,jn=u;jt.targetName=function(i){return function(t,e,n){var r=new In.Metadata(Ln.NAME_TAG,i);jn.tagParameter(t,e,n,r)}};var a={},Rn=(Object.defineProperty(a,"__esModule",{value:!0}),a.postConstruct=void 0,e),Dn=K,Bn=s;a.postConstruct=function(){return function(t,e,n){e=new Bn.Metadata(Dn.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(Dn.POST_CONSTRUCT,t.constructor))throw new Error(Rn.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(Dn.POST_CONSTRUCT,e,t.constructor)}};var d,Fn,zn,Gn,Te={},h=(Object.defineProperty(Te,"__esModule",{value:!0}),Te.multiBindToService=void 0,Te.multiBindToService=function(r){return function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.forEach(function(t){return r.bind(t).toService(n)})}}},ot),Wn=(Object.defineProperty(h,"__esModule",{value:!0}),h.multiBindToService=h.getServiceIdentifierAsString=h.typeConstraint=h.namedConstraint=h.taggedConstraint=h.traverseAncerstors=h.decorate=h.id=h.MetadataReader=h.postConstruct=h.targetName=h.multiInject=h.unmanaged=h.optional=h.LazyServiceIdentifer=h.inject=h.named=h.tagged=h.injectable=h.ContainerModule=h.AsyncContainerModule=h.TargetTypeEnum=h.BindingTypeEnum=h.BindingScopeEnum=h.Container=h.METADATA_KEY=void 0,h.METADATA_KEY=K,J),Hn=(Object.defineProperty(h,"Container",{enumerable:!0,get:function(){return Wn.Container}}),Q),Vn=(Object.defineProperty(h,"BindingScopeEnum",{enumerable:!0,get:function(){return Hn.BindingScopeEnum}}),Object.defineProperty(h,"BindingTypeEnum",{enumerable:!0,get:function(){return Hn.BindingTypeEnum}}),Object.defineProperty(h,"TargetTypeEnum",{enumerable:!0,get:function(){return Hn.TargetTypeEnum}}),i),Yn=(Object.defineProperty(h,"AsyncContainerModule",{enumerable:!0,get:function(){return Vn.AsyncContainerModule}}),Object.defineProperty(h,"ContainerModule",{enumerable:!0,get:function(){return Vn.ContainerModule}}),c),Un=(Object.defineProperty(h,"injectable",{enumerable:!0,get:function(){return Yn.injectable}}),f),qn=(Object.defineProperty(h,"tagged",{enumerable:!0,get:function(){return Un.tagged}}),Mt),Xn=(Object.defineProperty(h,"named",{enumerable:!0,get:function(){return qn.named}}),l),$n=(Object.defineProperty(h,"inject",{enumerable:!0,get:function(){return Xn.inject}}),Object.defineProperty(h,"LazyServiceIdentifer",{enumerable:!0,get:function(){return Xn.LazyServiceIdentifer}}),t),Zn=(Object.defineProperty(h,"optional",{enumerable:!0,get:function(){return $n.optional}}),n),Kn=(Object.defineProperty(h,"unmanaged",{enumerable:!0,get:function(){return Zn.unmanaged}}),dt),Jn=(Object.defineProperty(h,"multiInject",{enumerable:!0,get:function(){return Kn.multiInject}}),jt),Qn=(Object.defineProperty(h,"targetName",{enumerable:!0,get:function(){return Jn.targetName}}),a),tr=(Object.defineProperty(h,"postConstruct",{enumerable:!0,get:function(){return Qn.postConstruct}}),ut),er=(Object.defineProperty(h,"MetadataReader",{enumerable:!0,get:function(){return tr.MetadataReader}}),r),nr=(Object.defineProperty(h,"id",{enumerable:!0,get:function(){return er.id}}),u),rr=(Object.defineProperty(h,"decorate",{enumerable:!0,get:function(){return nr.decorate}}),pt),ir=(Object.defineProperty(h,"traverseAncerstors",{enumerable:!0,get:function(){return rr.traverseAncerstors}}),Object.defineProperty(h,"taggedConstraint",{enumerable:!0,get:function(){return rr.taggedConstraint}}),Object.defineProperty(h,"namedConstraint",{enumerable:!0,get:function(){return rr.namedConstraint}}),Object.defineProperty(h,"typeConstraint",{enumerable:!0,get:function(){return rr.typeConstraint}}),o),or=(Object.defineProperty(h,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return ir.getServiceIdentifierAsString}}),Te);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return e&&sr(t.prototype,e),n&&sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){return e.lifecycle===d.Lifecycle.singleton?t.inSingletonScope():t.inTransientScope()}function hr(t,e){t.whenTargetNamed(pr(e))}function fr(t,e){return e.bind(yr(t))}function dr(t,e){if(e.isBound(yr(t)))try{return e.rebind(yr(t))}catch(t){}return e.bind(yr(t))}function pr(t){return zn.isDefinedToken(t)?t.symbol:t}function yr(t){return zn.isDefinedToken(t)?t.symbol:t}Object.defineProperty(h,"multiBindToService",{enumerable:!0,get:function(){return or.multiBindToService}}),(Fn=d=d||{}).defineToken=function(t){return new Fn.DefinedToken(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{multiple:!0})},e=cr(function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,i=t;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;r=n.multiple,i=void 0!==r&&r;this.name=e,this.symbol=Symbol(this.name),this.multiple=i}),Fn.DefinedToken=e,Fn.isModule=function(t){return!!t&&"object"===ar(t)&&"id"in t},(s=e=Fn.Lifecycle||(Fn.Lifecycle={})).singleton="singleton",s.transient="transient",Fn.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),Fn.DefaultOption={lifecycle:e.transient},(Gn=zn=zn||{}).toArray=function(t){return Array.isArray(t)?t:void 0===t?[]:[t]},Gn.isClass=function(t){return!!(t&&"function"==typeof t&&"prototype"in t)},Gn.isDefinedToken=function(t){return!!(t&&"object"===ar(t)&&"symbol"in t&&"multiple"in t)},Gn.isInjectOption=function(t){return!!(t&&"object"===ar(t)&&"token"in t)},Gn.isNamedToken=function(t){return!!(t&&"object"===ar(t)&&"token"in t&&"named"in t)},Gn.isMultipleEnabled=function(t){return Gn.isDefinedToken(t)&&t.multiple};K=new ot.Container;function gr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function vr(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):gr(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function mr(t){var e=0<arguments.length&&void 0!==t?t:{},n=ot.injectable();return function(t){Reflect.defineMetadata(d.ClassOptionSymbol,vr(vr({},e),{},{target:t}),t),n(t)}}function p(t){return mr(vr(vr({},0<arguments.length&&void 0!==t?t:{}),{},{lifecycle:d.Lifecycle.singleton}))}function y(t){return ot.inject(yr(t))}var br=Symbol("SyringeOptionSymbol");function xr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function wr(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):xr(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Er=function(){function l(t,e,n){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.register=void 0,this.mutiple=void 0,this.register=t,this.token=e,this.option=n,this.rawToken=zn.isNamedToken(e)?e.token:e,this.named=zn.isNamedToken(e)?e.named:void 0,this.mutiple=!!this.named||zn.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}var t,e,n;return t=l,n=[{key:"resolveTarget",value:function(t,e){var n,r,i,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{try{var a=Reflect.getMetadata(br,e);a&&l.resolveOption(t,a)}catch(t){}zn.isClass(e)&&(o.useClass?((n=zn.toArray(o.useClass)).unshift(e),o.useClass=n):o.useClass=[e]);try{r=Reflect.getMetadata(d.ClassOptionSymbol,e)}catch(t){}(r=wr(wr({},r||{}),o)).token?((i=zn.toArray(r.token)).unshift(e),r.token=i):r.token=[e],l.resolveOption(t,r)}catch(t){}}},{key:"resolveOption",value:function(e,t){t=wr(wr({},l.globalConfig),t),n=zn.toArray(t.token),r=zn.toArray(t.useClass),i=zn.toArray(t.useDynamic),o=zn.toArray(t.useFactory),a=zn.toArray(t.contrib),s=t.lifecycle||d.Lifecycle.transient,n={token:n,useClass:r,lifecycle:0<a.length?d.Lifecycle.singleton:s,contrib:a,useDynamic:i,useFactory:o},"useValue"in t&&(n.useValue=t.useValue);var n,r,i,o,a,s,c=n;(0!==c.useClass.length||0!==c.useDynamic.length||0!==c.useFactory.length||"useValue"in c)&&c.token.forEach(function(t){new l(e,t,wr({},c)).resolve()})}}],(e=[{key:"resolve",value:function(){var t,e=this,n=this.register;(t=n)&&"object"===lr(t)&&"bind"in t&&"unbind"in t&&"rebind"in t&&"isBound"in t&&(this.mutiple?this.resolveMutilple(n):(this.resolveMono(n),!this.named&&0<this.option.contrib.length&&this.option.contrib.forEach(function(t){(zn.isMultipleEnabled(t)?fr:dr)(t,n).toService(e.generalToken)})))}},{key:"resolveMono",value:function(t){var e,n,r;return"useValue"in this.option?dr(this.generalToken,t).toConstantValue(this.option.useValue):0<this.option.useDynamic.length?(e=this.option.useDynamic[this.option.useDynamic.length-1],ur(dr(this.generalToken,t).toDynamicValue(function(t){t=zr.getContainer(t.container);return e({container:t})}),this.option)):0<this.option.useFactory.length?(n=this.option.useFactory[this.option.useFactory.length-1],dr(this.generalToken,t).toFactory(function(t){t=zr.getContainer(t.container);return n({container:t})})):0<this.option.useClass.length?(r=this.option.useClass[this.option.useClass.length-1],ur(dr(this.generalToken,t).to(r),this.option)):void 0}},{key:"resolveMutilple",value:function(n){var r=this,t=this.option.useClass.map(function(t){return ur(fr(r.generalToken,n).to(t),r.option)}),e=this.option.useDynamic.map(function(e){return ur(fr(r.generalToken,n).toDynamicValue(function(t){t=zr.getContainer(t.container);return e({container:t})}),r.option)}),i=this.option.useFactory.map(function(e){return fr(r.generalToken,n).toFactory(function(t){t=zr.getContainer(t.container);return e({container:t})})}),o="useValue"in this.option?fr(this.generalToken,n).toConstantValue(this.option.useValue):void 0;this.named&&(t.forEach(function(t){return r.named&&hr(t,r.named)}),e.forEach(function(t){return r.named&&hr(t,r.named)}),i.forEach(function(t){return r.named&&hr(t,r.named)}),o&&hr(o,this.named))}}])&&kr(t.prototype,e),n&&kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(),_r=(Er.globalConfig=d.DefaultOption,d.defineToken("ContributionProvider"));function Mr(t){return function(t){if(Array.isArray(t))return Sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?Sr(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sr(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Or(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Tr(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Pr=function(){function r(t,e,n){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=e,this.serviceIdentifier=t,n&&(this.option=Or(Or({},this.option),n))}var t,e,n;return t=r,(e=[{key:"setServices",value:function(t){for(var e,n=[],r=this.container;r;)r.isBound(this.serviceIdentifier)&&(e=r.getAll(this.serviceIdentifier),n.push.apply(n,Mr(e))),r=t?r.parent:void 0;return n}},{key:"getContributions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Or(Or({},this.option),t),e=t.cache,t=t.recursive;return e&&void 0!==this.services||(this.services=this.setServices(!!t)),this.services}}])&&Ar(t.prototype,e),n&&Ar(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Nr(t,e,n){t({token:{token:_r,named:e},useDynamic:function(t){return new Pr(e,t.container,n)},lifecycle:d.Lifecycle.singleton})}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Lr=function(){function e(t){var a=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=void 0,this.inversifyModule=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,this.inversifyRegister=function(t,e,n,r){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};zn.isInjectOption(t)?Er.resolveOption(o,t):Er.resolveTarget(o,t,e)}var o={bind:t,unbind:e,isBound:n,rebind:r};a.baseRegistry&&a.baseRegistry(i),a.optionCollection&&a.optionCollection.forEach(function(t){return i(t)})},this.baseRegistry=t,this.inversifyModule=new ot.ContainerModule(this.inversifyRegister),this.id=this.inversifyModule.id}var t,n,r;return t=e,(n=[{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){return e.options.push(t)}),this}},{key:"contribution",value:function(){for(var r=this,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){return r.options.push({token:{token:_r,named:e=t},useDynamic:function(t){return new Pr(e,t.container,n)},lifecycle:d.Lifecycle.singleton});var e,n}),this}}])&&Cr(t.prototype,n),r&&Cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ir(t){return t&&"inversifyModule"in t}function jr(t){return new Lr(t)}function Rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dr(r){return function(t,e,n){ot.named(pr(r))(t,e,n),y(_r)(t,e,n)}}var Br,Fr=new Map,zr=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,this.container=t||new ot.Container,n.setContainer(this.container,this)}var t,e,r;return t=n,r=[{key:"setContainer",value:function(t,e){return Fr.set(t.id,e)}},{key:"getContainer",value:function(t){var e=Fr.get(t.id);return e||(e=new n(t),n.setContainer(t,e),e)}},{key:"config",value:function(t){Er.globalConfig=t}}],(e=[{key:"load",value:function(t,e){var n=this;return e||!this.loadedModules.includes(t.id)?(Ir(t)?this.container.load(t.inversifyModule):console.warn("Unsupported module.",t),this.loadedModules.push(t.id),{dispose:function(){n.unload(t)}}):{dispose:function(){}}}},{key:"unload",value:function(e){Ir(e)&&(this.container.unload(e.inversifyModule),this.loadedModules=this.loadedModules.filter(function(t){return t!==e.id}))}},{key:"remove",value:function(t){return this.container.unbind(yr(t))}},{key:"get",value:function(t){return this.container.get(yr(t))}},{key:"getNamed",value:function(t,e){return this.container.getNamed(yr(t),pr(e))}},{key:"getAll",value:function(t){return this.container.getAll(yr(t))}},{key:"getAllNamed",value:function(t,e){return this.container.getAllNamed(yr(t),pr(e))}},{key:"isBound",value:function(t){return this.container.isBound(yr(t))}},{key:"isBoundNamed",value:function(t,e){return this.container.isBoundNamed(yr(t),pr(e))}},{key:"createChild",value:function(){var t=new n(this.container.createChild());return t.parent=this,t}},{key:"register",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};zn.isInjectOption(t)?Er.resolveOption(this.container,t):Er.resolveTarget(this.container,t,e)}}])&&Rr(t.prototype,e),r&&Rr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}(),Gr=new zr(K);Gr.register.bind(Gr);function Wr(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){600<i-r&&(a=i-r+1,u=n-r+1,c=Math.log(a),s=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*s*(a-s)/a)*(u-a/2<0?-1:1),l=Math.max(r,Math.floor(n-u*s/a+c)),u=Math.min(i,Math.floor(n+(a-u)*s/a+c)),t(e,n,l,u,o));var a,s,c,l,u,h=e[n],f=r,d=i;for(Hr(e,r,n),0<o(e[i],h)&&Hr(e,r,i);f<d;){for(Hr(e,f,d),f++,d--;o(e[f],h)<0;)f++;for(;0<o(e[d],h);)d--}0===o(e[r],h)?Hr(e,r,d):Hr(e,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(t,e,n||0,r||t.length-1,i||Vr)}function Hr(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Vr(t,e){return t<e?-1:e<t?1:0}(J=Br=Br||{}).Provider=_r,J.register=Nr;class Yr{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;var r=[];if(ti(e,n))for(var i=this.toBBox,o=[];n;){for(let t=0;t<n.children.length;t++){var a=n.children[t],s=n.leaf?i(a):a;ti(e,s)&&(n.leaf?r.push(a):Qr(e,s)?this._all(a,r):o.push(a))}n=o.pop()}return r}collides(e){let n=this.data;if(ti(e,n))for(var r=[];n;){for(let t=0;t<n.children.length;t++){var i=n.children[t],o=n.leaf?this.toBBox(i):i;if(ti(e,o)){if(n.leaf||Qr(e,o))return!0;r.push(i)}}n=r.pop()}return!1}load(e){if(e&&e.length)if(e.length<this._minEntries)for(let t=0;t<e.length;t++)this.insert(e[t]);else{let t=this._build(e.slice(),0,e.length-1,0);var n;this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(n=this.data,this.data=t,t=n),this._insert(t,this.data.height-t.height-1,!0)):this.data=t}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=ei([]),this}remove(i,o){if(i){let t=this.data;var a=this.toBBox(i),s=[],c=[];let e,n,r;for(;t||s.length;){if(t||(t=s.pop(),n=s[s.length-1],e=c.pop(),r=!0),t.leaf){var l=function(e,n,r){if(!r)return n.indexOf(e);for(let t=0;t<n.length;t++)if(r(e,n[t]))return t;return-1}(i,t.children,o);if(-1!==l)return t.children.splice(l,1),s.push(t),this._condense(s),this}r||t.leaf||!Qr(t,a)?n?(e++,t=n.children[e],r=!1):t=null:(s.push(t),c.push(e),e=0,t=(n=t).children[0])}}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){for(var n=[];t;)(t.leaf?e:n).push(...t.children),t=n.pop();return e}_build(n,t,r,i){var e=r-t+1;let o=this._maxEntries,a;if(e<=o)Ur(a=ei(n.slice(t,r+1)),this.toBBox);else{i||(i=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,i-1))),(a=ei([])).leaf=!1,a.height=i;var s=Math.ceil(e/o),c=s*Math.ceil(Math.sqrt(o));ni(n,t,r,c,this.compareMinX);for(let e=t;e<=r;e+=c){var l=Math.min(e+c-1,r);ni(n,e,l,s,this.compareMinY);for(let t=e;t<=l;t+=s){var u=Math.min(t+s-1,l);a.children.push(this._build(n,t,u,i-1))}}Ur(a,this.toBBox)}return a}_chooseSubtree(i,o,t,a){for(;;){if(a.push(o),o.leaf||a.length-1===t)break;let e=1/0,n=1/0,r;for(let t=0;t<o.children.length;t++){var s=o.children[t],c=Kr(s),l=(u=i,l=s,(Math.max(l.maxX,u.maxX)-Math.min(l.minX,u.minX))*(Math.max(l.maxY,u.maxY)-Math.min(l.minY,u.minY))-c);l<n?(n=l,e=c<e?c:e,r=s):l===n&&c<e&&(e=c,r=s)}o=r||o.children[0]}var u,l;return o}_insert(t,e,n){var n=n?t:this.toBBox(t),r=[],i=this._chooseSubtree(n,this.data,e,r);for(i.children.push(t),Xr(i,n);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)}_split(t,e){var n=t[e],r=n.children.length,i=this._minEntries,i=(this._chooseSplitAxis(n,i,r),this._chooseSplitIndex(n,i,r)),r=ei(n.children.splice(i,n.children.length-i));r.height=n.height,r.leaf=n.leaf,Ur(n,this.toBBox),Ur(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(n,r)}_splitRoot(t,e){this.data=ei([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ur(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,o=1/0,a=1/0;for(let t=n;t<=r-n;t++){var s=qr(e,0,t,this.toBBox),c=qr(e,t,r,this.toBBox),l=(h=s,l=c,u=d=f=void 0,f=Math.max(h.minX,l.minX),d=Math.max(h.minY,l.minY),u=Math.min(h.maxX,l.maxX),h=Math.min(h.maxY,l.maxY),Math.max(0,u-f)*Math.max(0,h-d)),u=Kr(s)+Kr(c);l<o?(o=l,i=t,a=u<a?u:a):l===o&&u<a&&(a=u,i=t)}var h,l,f,d,u;return i||r-n}_chooseSplitAxis(t,e,n){var r=t.leaf?this.compareMinX:$r,i=t.leaf?this.compareMinY:Zr;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}_allDistMargin(e,n,r,t){e.children.sort(t);var i=this.toBBox,o=qr(e,0,n,i),a=qr(e,r-n,r,i);let s=Jr(o)+Jr(a);for(let t=n;t<r-n;t++){var c=e.children[t];Xr(o,e.leaf?i(c):c),s+=Jr(o)}for(let t=r-n-1;t>=n;t--){var l=e.children[t];Xr(a,e.leaf?i(l):l),s+=Jr(a)}return s}_adjustParentBBoxes(e,n,r){for(let t=r;0<=t;t--)Xr(n[t],e)}_condense(n){for(let t=n.length-1,e;0<=t;t--)0===n[t].children.length?0<t?(e=n[t-1].children).splice(e.indexOf(n[t]),1):this.clear():Ur(n[t],this.toBBox)}}function Ur(t,e){qr(t,0,t.children.length,e,t)}function qr(e,n,r,i,o){(o=o||ei(null)).minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let t=n;t<r;t++){var a=e.children[t];Xr(o,e.leaf?i(a):a)}return o}function Xr(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function $r(t,e){return t.minX-e.minX}function Zr(t,e){return t.minY-e.minY}function Kr(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Jr(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Qr(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ti(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ei(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ni(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(Wr(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}var ri=1e-6,ii="undefined"!=typeof Float32Array?Float32Array:Array;function oi(){var t=new ii(9);return ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ai=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],e=e[8],h=n[0],f=n[1],d=n[2],p=n[3],y=n[4],g=n[5],v=n[6],m=n[7],n=n[8];return t[0]=h*r+f*a+d*l,t[1]=h*i+f*s+d*u,t[2]=h*o+f*c+d*e,t[3]=p*r+y*a+g*l,t[4]=p*i+y*s+g*u,t[5]=p*o+y*c+g*e,t[6]=v*r+m*a+n*l,t[7]=v*i+m*s+n*u,t[8]=v*o+m*c+n*e,t};function si(){var t=new ii(16);return ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ci(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function li(t,e,n,r,i,o,a,s,c,l,u,h,f,d,p,y,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=y,t[15]=g,t}function ui(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hi(t,e){var n,r,i,o,a,s;return t===e?(n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t}function fi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],y=e[13],g=e[14],e=e[15],v=n*s-r*a,m=n*c-i*a,b=n*l-o*a,x=r*c-i*s,w=r*l-o*s,k=i*l-o*c,E=u*y-h*p,_=u*g-f*p,M=u*e-d*p,S=h*g-f*y,T=h*e-d*y,O=f*e-d*g,A=v*O-m*T+b*S+x*M-w*_+k*E;return A?(t[0]=(s*O-c*T+l*S)*(A=1/A),t[1]=(i*T-r*O-o*S)*A,t[2]=(y*k-g*w+e*x)*A,t[3]=(f*w-h*k-d*x)*A,t[4]=(c*M-a*O-l*_)*A,t[5]=(n*O-i*M+o*_)*A,t[6]=(g*b-p*k-e*m)*A,t[7]=(u*k-f*b+d*m)*A,t[8]=(a*T-s*M+l*E)*A,t[9]=(r*M-n*T-o*E)*A,t[10]=(p*w-y*b+e*v)*A,t[11]=(h*b-u*w-d*v)*A,t[12]=(s*_-a*S-c*E)*A,t[13]=(n*S-r*_+i*E)*A,t[14]=(y*m-p*x-g*v)*A,t[15]=(u*x-h*m+f*v)*A,t):null}function di(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],f=t[11],d=t[12],p=t[13],y=t[14],t=t[15];return(e*a-n*o)*(h*t-f*y)-(e*s-r*o)*(u*t-f*p)+(e*c-i*o)*(u*y-h*p)+(n*s-r*a)*(l*t-f*d)-(n*c-i*a)*(l*y-h*d)+(r*c-i*s)*(l*p-u*d)}function pi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],y=e[12],g=e[13],v=e[14],e=e[15],m=n[0],b=n[1],x=n[2],w=n[3];return t[0]=m*r+b*s+x*h+w*y,t[1]=m*i+b*c+x*f+w*g,t[2]=m*o+b*l+x*d+w*v,t[3]=m*a+b*u+x*p+w*e,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*r+b*s+x*h+w*y,t[5]=m*i+b*c+x*f+w*g,t[6]=m*o+b*l+x*d+w*v,t[7]=m*a+b*u+x*p+w*e,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*r+b*s+x*h+w*y,t[9]=m*i+b*c+x*f+w*g,t[10]=m*o+b*l+x*d+w*v,t[11]=m*a+b*u+x*p+w*e,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*r+b*s+x*h+w*y,t[13]=m*i+b*c+x*f+w*g,t[14]=m*o+b*l+x*d+w*v,t[15]=m*a+b*u+x*p+w*e,t}function yi(t,e,n){var r,i,o,a,s,c,l,u,h,f,d,p,y=n[0],g=n[1],n=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*n+e[12],t[13]=e[1]*y+e[5]*g+e[9]*n+e[13],t[14]=e[2]*y+e[6]*g+e[10]*n+e[14],t[15]=e[3]*y+e[7]*g+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*y+s*g+h*n+e[12],t[13]=i*y+c*g+f*n+e[13],t[14]=o*y+l*g+d*n+e[14],t[15]=a*y+u*g+p*n+e[15]),t}function gi(t,e,n){var r=n[0],i=n[1],n=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vi(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[4],o=e[5],a=e[6],s=e[7],c=e[8],l=e[9],u=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+c*r,t[5]=o*n+l*r,t[6]=a*n+u*r,t[7]=s*n+h*r,t[8]=c*n-i*r,t[9]=l*n-o*r,t[10]=u*n-a*r,t[11]=h*n-s*r,t}function mi(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[0],o=e[1],a=e[2],s=e[3],c=e[8],l=e[9],u=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-c*r,t[1]=o*n-l*r,t[2]=a*n-u*r,t[3]=s*n-h*r,t[8]=i*r+c*n,t[9]=o*r+l*n,t[10]=a*r+u*n,t[11]=s*r+h*n,t}function bi(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function xi(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3],a=r+r,s=i+i,c=o+o,l=r*a,u=r*s,r=r*c,h=i*s,i=i*c,o=o*c,a=e*a,s=e*s,e=e*c;return t[0]=1-(h+o),t[1]=u+e,t[2]=r-s,t[3]=0,t[4]=u-e,t[5]=1-(l+o),t[6]=i+a,t[7]=0,t[8]=r+s,t[9]=i-a,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function wi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ki(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],c=e[8],l=e[9],e=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(c,l,e),t}function Ei(t,e){var n=new ii(3),r=(ki(n,e),1/n[0]),i=1/n[1],n=1/n[2],o=e[0]*r,a=e[1]*i,s=e[2]*n,c=e[4]*r,l=e[5]*i,u=e[6]*n,r=e[8]*r,i=e[9]*i,e=e[10]*n,n=o+l+e,h=0;return 0<n?(h=2*Math.sqrt(1+n),t[3]=.25*h,t[0]=(u-i)/h,t[1]=(r-s)/h,t[2]=(a-c)/h):l<o&&e<o?(h=2*Math.sqrt(1+o-l-e),t[3]=(u-i)/h,t[0]=.25*h,t[1]=(a+c)/h,t[2]=(r+s)/h):e<l?(h=2*Math.sqrt(1+l-o-e),t[3]=(r-s)/h,t[0]=(a+c)/h,t[1]=.25*h,t[2]=(u+i)/h):(h=2*Math.sqrt(1+e-o-l),t[3]=(a-c)/h,t[0]=(r+s)/h,t[1]=(u+i)/h,t[2]=.25*h),t}function _i(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],e=e[3],c=o+o,l=a+a,u=s+s,h=o*c,f=o*l,o=o*u,d=a*l,a=a*u,s=s*u,c=e*c,l=e*l,e=e*u,u=r[0],p=r[1],r=r[2],y=i[0],g=i[1],i=i[2],v=(1-(d+s))*u,m=(f+e)*u,u=(o-l)*u,f=(f-e)*p,e=(1-(h+s))*p,s=(a+c)*p,p=(o+l)*r,o=(a-c)*r,l=(1-(h+d))*r;return t[0]=v,t[1]=m,t[2]=u,t[3]=0,t[4]=f,t[5]=e,t[6]=s,t[7]=0,t[8]=p,t[9]=o,t[10]=l,t[11]=0,t[12]=n[0]+y-(v*y+f*g+p*i),t[13]=n[1]+g-(m*y+e*g+o*i),t[14]=n[2]+i-(u*y+s*g+l*i),t[15]=1,t}function Mi(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n+n,a=r+r,s=i+i,n=n*o,c=r*o,r=r*a,l=i*o,u=i*a,i=i*s,o=e*o,a=e*a,e=e*s;return t[0]=1-r-i,t[1]=c+e,t[2]=l-a,t[3]=0,t[4]=c-e,t[5]=1-n-i,t[6]=u+o,t[7]=0,t[8]=l+a,t[9]=u-o,t[10]=1-n-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Si(t,e,n,r,i){e=1/Math.tan(e/2);return t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(n=1/(r-i)),t[14]=2*i*r*n):(t[10]=-1,t[14]=-2*r),t}function Ti(t,e,n,r,i,o,a){var s=1/(e-n),c=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*c,t[14]=(a+o)*l,t[15]=1,t}var Oi=Ti;function Ai(t,e,n,r){var i,o,a,s,c=e[0],l=e[1],e=e[2],u=r[0],h=r[1],r=r[2],f=n[0],d=n[1],n=n[2];return Math.abs(c-f)<ri&&Math.abs(l-d)<ri&&Math.abs(e-n)<ri?ui(t):(f=c-f,d=l-d,n=e-n,i=h*(n*=s=1/Math.hypot(f,d,n))-r*(d*=s),r=r*(f*=s)-u*n,u=u*d-h*f,(s=Math.hypot(i,r,u))?(i*=s=1/s,r*=s,u*=s):u=r=i=0,h=d*u-n*r,o=n*i-f*u,a=f*r-d*i,(s=Math.hypot(h,o,a))?(h*=s=1/s,o*=s,a*=s):a=o=h=0,t[0]=i,t[1]=h,t[2]=f,t[3]=0,t[4]=r,t[5]=o,t[6]=d,t[7]=0,t[8]=u,t[9]=a,t[10]=n,t[11]=0,t[12]=-(i*c+r*l+u*e),t[13]=-(h*c+o*l+a*e),t[14]=-(f*c+d*l+n*e),t[15]=1,t)}function Pi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var Ni=Object.freeze({__proto__:null,create:si,clone:function(t){var e=new ii(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:ci,fromValues:function(t,e,n,r,i,o,a,s,c,l,u,h,f,d,p,y){var g=new ii(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=c,g[9]=l,g[10]=u,g[11]=h,g[12]=f,g[13]=d,g[14]=p,g[15]=y,g},set:li,identity:ui,transpose:hi,invert:fi,adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],y=e[13],g=e[14],e=e[15];return t[0]=s*(f*e-d*g)-h*(c*e-l*g)+y*(c*d-l*f),t[1]=-(r*(f*e-d*g)-h*(i*e-o*g)+y*(i*d-o*f)),t[2]=r*(c*e-l*g)-s*(i*e-o*g)+y*(i*l-o*c),t[3]=-(r*(c*d-l*f)-s*(i*d-o*f)+h*(i*l-o*c)),t[4]=-(a*(f*e-d*g)-u*(c*e-l*g)+p*(c*d-l*f)),t[5]=n*(f*e-d*g)-u*(i*e-o*g)+p*(i*d-o*f),t[6]=-(n*(c*e-l*g)-a*(i*e-o*g)+p*(i*l-o*c)),t[7]=n*(c*d-l*f)-a*(i*d-o*f)+u*(i*l-o*c),t[8]=a*(h*e-d*y)-u*(s*e-l*y)+p*(s*d-l*h),t[9]=-(n*(h*e-d*y)-u*(r*e-o*y)+p*(r*d-o*h)),t[10]=n*(s*e-l*y)-a*(r*e-o*y)+p*(r*l-o*s),t[11]=-(n*(s*d-l*h)-a*(r*d-o*h)+u*(r*l-o*s)),t[12]=-(a*(h*g-f*y)-u*(s*g-c*y)+p*(s*f-c*h)),t[13]=n*(h*g-f*y)-u*(r*g-i*y)+p*(r*f-i*h),t[14]=-(n*(s*g-c*y)-a*(r*g-i*y)+p*(r*c-i*s)),t[15]=n*(s*f-c*h)-a*(r*f-i*h)+u*(r*c-i*s),t},determinant:di,multiply:pi,translate:yi,scale:gi,rotate:function(t,e,n,r){var i,o,a,s,c,l,u,h,f,d,p,y,g,v,m,b,x,w,k,E,_=r[0],M=r[1],r=r[2],S=Math.hypot(_,M,r);return S<ri?null:(_*=S=1/S,M*=S,r*=S,S=Math.sin(n),n=Math.cos(n),o=e[0],a=e[1],s=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7],d=e[8],p=e[9],y=e[10],g=e[11],m=_*M*(i=1-n)-r*S,b=M*M*i+n,x=r*M*i+_*S,w=_*r*i+M*S,k=M*r*i-_*S,E=r*r*i+n,t[0]=o*(n=_*_*i+n)+l*(v=M*_*i+r*S)+d*(r=r*_*i-M*S),t[1]=a*n+u*v+p*r,t[2]=s*n+h*v+y*r,t[3]=c*n+f*v+g*r,t[4]=o*m+l*b+d*x,t[5]=a*m+u*b+p*x,t[6]=s*m+h*b+y*x,t[7]=c*m+f*b+g*x,t[8]=o*w+l*k+d*E,t[9]=a*w+u*k+p*E,t[10]=s*w+h*k+y*E,t[11]=c*w+f*k+g*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:vi,rotateY:mi,rotateZ:function(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[0],o=e[1],a=e[2],s=e[3],c=e[4],l=e[5],u=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+c*r,t[1]=o*n+l*r,t[2]=a*n+u*r,t[3]=s*n+h*r,t[4]=c*n-i*r,t[5]=l*n-o*r,t[6]=u*n-a*r,t[7]=h*n-s*r,t},fromTranslation:bi,fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,n){var r,i=n[0],o=n[1],n=n[2],a=Math.hypot(i,o,n);return a<ri?null:(i*=a=1/a,o*=a,n*=a,a=Math.sin(e),e=Math.cos(e),t[0]=i*i*(r=1-e)+e,t[1]=o*i*r+n*a,t[2]=n*i*r-o*a,t[3]=0,t[4]=i*o*r-n*a,t[5]=o*o*r+e,t[6]=n*o*r+i*a,t[7]=0,t[8]=i*n*r+o*a,t[9]=o*n*r-i*a,t[10]=n*n*r+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:xi,fromQuat2:function(t,e){var n=new ii(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=r*r+i*i+o*o+a*a;return 0<h?(n[0]=2*(s*a+u*r+c*o-l*i)/h,n[1]=2*(c*a+u*i+l*r-s*o)/h,n[2]=2*(l*a+u*o+s*i-c*r)/h):(n[0]=2*(s*a+u*r+c*o-l*i),n[1]=2*(c*a+u*i+l*r-s*o),n[2]=2*(l*a+u*o+s*i-c*r)),xi(t,e,n),t},getTranslation:wi,getScaling:ki,getRotation:Ei,fromRotationTranslationScale:function(t,e,n,r){var i=e[0],o=e[1],a=e[2],e=e[3],s=i*(u=i+i),c=i*(h=o+o),i=i*(f=a+a),l=o*h,o=o*f,a=a*f,u=e*u,h=e*h,e=e*f,f=r[0],d=r[1],r=r[2];return t[0]=(1-(l+a))*f,t[1]=(c+e)*f,t[2]=(i-h)*f,t[3]=0,t[4]=(c-e)*d,t[5]=(1-(s+a))*d,t[6]=(o+u)*d,t[7]=0,t[8]=(i+h)*r,t[9]=(o-u)*r,t[10]=(1-(s+l))*r,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:_i,fromQuat:Mi,frustum:function(t,e,n,r,i,o,a){var s=1/(n-e),c=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*c,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t},perspectiveNO:Si,perspective:Si,perspectiveZO:function(t,e,n,r,i){return e=1/Math.tan(e/2),t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=i*(n=1/(r-i)),t[14]=i*r*n):(t[10]=-1,t[14]=-r),t},perspectiveFromFieldOfView:function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),e=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+e),c=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-e)*s*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},orthoNO:Ti,ortho:Oi,orthoZO:function(t,e,n,r,i,o,a){var s=1/(e-n),c=1/(r-i),a=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*c,t[14]=o*a,t[15]=1,t},lookAt:Ai,targetTo:function(t,e,n,r){var i=e[0],o=e[1],e=e[2],a=r[0],s=r[1],r=r[2],c=i-n[0],l=o-n[1],n=e-n[2],u=c*c+l*l+n*n,h=(0<u&&(c*=u=1/Math.sqrt(u),l*=u,n*=u),s*n-r*l);return 0<(u=h*h+(r=r*c-a*n)*r+(a=a*l-s*c)*a)&&(h*=u=1/Math.sqrt(u),r*=u,a*=u),t[0]=h,t[1]=r,t[2]=a,t[3]=0,t[4]=l*a-n*r,t[5]=n*h-c*a,t[6]=c*r-l*h,t[7]=0,t[8]=c,t[9]=l,t[10]=n,t[11]=0,t[12]=i,t[13]=o,t[14]=e,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:Pi,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],h=t[9],f=t[10],d=t[11],p=t[12],y=t[13],g=t[14],t=t[15],v=e[0],m=e[1],b=e[2],x=e[3],w=e[4],k=e[5],E=e[6],_=e[7],M=e[8],S=e[9],T=e[10],O=e[11],A=e[12],P=e[13],N=e[14],e=e[15];return Math.abs(n-v)<=ri*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-m)<=ri*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-b)<=ri*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=ri*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=ri*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-k)<=ri*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(c-E)<=ri*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-_)<=ri*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-M)<=ri*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-S)<=ri*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-T)<=ri*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-O)<=ri*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-A)<=ri*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(y-P)<=ri*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-N)<=ri*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(t-e)<=ri*Math.max(1,Math.abs(t),Math.abs(e))},mul:pi,sub:Pi});function Ci(){var t=new ii(3);return ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Li(t){var e=t[0],n=t[1],t=t[2];return Math.hypot(e,n,t)}function E(t,e,n){var r=new ii(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ii(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ji(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ri(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Di(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Bi(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function Fi(t,e){var n=e[0],r=e[1],i=e[2],n=n*n+r*r+i*i;0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function zi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gi(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[0],a=n[1],n=n[2];t[0]=i*n-e*a,t[1]=e*o-r*n,t[2]=r*a-i*o}function Wi(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[3]*r+n[7]*i+n[11]*e+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*e+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*e+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*e+n[14])/o,t}function Hi(t,e,n){var r=e[0],i=e[1],e=e[2];t[0]=r*n[0]+i*n[3]+e*n[6],t[1]=r*n[1]+i*n[4]+e*n[7],t[2]=r*n[2]+i*n[5]+e*n[8]}function Vi(t,e){var n=t[0],r=t[1],t=t[2],i=e[0],o=e[1],e=e[2];return Math.abs(n-i)<=ri*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=ri*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=ri*Math.max(1,Math.abs(t),Math.abs(e))}var Yi=Di,Ui=Li;function qi(){var t=new ii(4);return ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Xi(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*e,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*e,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*e,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*e,t}function $i(){var t=new ii(4);return ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Zi(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ki(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3],a=n[0],s=n[1],c=n[2],n=n[3];return t[0]=r*n+e*a+i*c-o*s,t[1]=i*n+e*s+o*a-r*c,t[2]=o*n+e*c+r*s-i*a,t[3]=e*n-r*a-i*s-o*c,t}function Ji(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n*n+r*r+i*i+e*e,o=o?1/o:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=e*o,t}function Qi(t,e,n,r){var i=.5*Math.PI/180,i=(e*=i,n*=i,r*=i,Math.sin(e)),e=Math.cos(e),o=Math.sin(n),n=Math.cos(n),a=Math.sin(r),r=Math.cos(r);t[0]=i*n*r-e*o*a,t[1]=e*o*r+i*n*a,t[2]=e*n*a-i*o*r,t[3]=e*n*r+i*o*a}Ci(),qi();var to=function(t,e,n,r){var i=new ii(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},eo=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},no=Ki,ro=function(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n*n+r*r+i*i+e*e;return 0<o&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=e*o,t};function io(t,e){var n=new ii(2);return n[0]=t,n[1]=e,n}function oo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ao(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function so(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function co(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function lo(t,e){var n=e[0]-t[0],e=e[1]-t[1];return Math.hypot(n,e)}function uo(t,e){var n=e[0],r=e[1],n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}Ci(),E(1,0,0),E(0,1,0),$i(),$i(),oi();var ho=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};function fo(t){return t.map(function(t){return Array.isArray(t)?[].concat(t):t})}Q=new ii(2),ii!=Float32Array&&(Q[0]=0,Q[1]=0);var po=function(t,e){return(po=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function yo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}po(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var M=function(){return(M=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function N(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function g(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function v(n,r){return function(t,e){r(t,e,n)}}function go(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})}function D(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function vo(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var mo={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};var bo={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function xo(t){return Array.isArray(t)&&t.every(function(t){var e=t[0].toLowerCase();return bo[e]===t.length-1&&"achlmqstvz".includes(e)})}function wo(t){return xo(t)&&t.every(function(t){t=t[0];return t===t.toUpperCase()})}function ko(t){return wo(t)&&t.every(function(t){t=t[0];return"ACLMQZ".includes(t)})}function Eo(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=bo[n]&&("m"===n&&2<r.length?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,bo[n]))),bo[n]););}function _o(t){return 48<=t&&t<=57}function Mo(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function So(t){var e,n,r,i,o,a=t.max,s=t.pathValue,c=t.index,l=s.charCodeAt(c),u=bo[s[c].toLowerCase()];if(t.segmentStart=c,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return 1;default:return}}(l)){if(t.index+=1,Mo(t),t.data=[],u)for(;;){for(var h=u;0<h;--h){if(97!=(32|l)||3!==h&&4!==h?function(t){var e,n,r=t.max,i=t.pathValue,o=t.index,a=o,s=!1,c=!1,l=!1;if(r<=a)t.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';else if(_o(n=43!==(n=i.charCodeAt(a))&&45!==n?n:i.charCodeAt(a+=1))||46===n){if(46!==n){if(e=48===n,n=i.charCodeAt(a+=1),e&&a<r&&n&&_o(n))return t.err="[path-util]: Invalid path value at index "+o+', "'+i[o]+'" illegal number';for(;a<r&&_o(i.charCodeAt(a));)a+=1,s=!0;n=i.charCodeAt(a)}if(46===n){for(l=!0,a+=1;_o(i.charCodeAt(a));)a+=1,c=!0;n=i.charCodeAt(a)}if(101===n||69===n){if(l&&!s&&!c)return t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" invalid float exponent';if(43!==(n=i.charCodeAt(a+=1))&&45!==n||(a+=1),!(a<r&&_o(i.charCodeAt(a))))return t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" invalid integer exponent';for(;a<r&&_o(i.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(o,a)}else t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" is not a number'}(t):(o=i=r=void 0,r=(n=t).index,i=n.pathValue,48===(o=i.charCodeAt(r))?(n.param=0,n.index+=1):49===o?(n.param=1,n.index+=1):n.err='[path-util]: invalid Arc flag "'+i[r]+'", expecting 0 or 1 at index '+r),t.err.length)return;t.data.push(t.param),Mo(t),t.index<a&&44===s.charCodeAt(t.index)&&(t.index+=1,Mo(t))}if(t.index>=t.max)break;if(!(48<=(e=s.charCodeAt(t.index))&&e<=57||43===e||45===e||46===e))break}Eo(t)}else t.err='[path-util]: Invalid path value "'+s[c]+'" is not a path command'}var To=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function Oo(t){var a,s,c,l;return wo(t)?fo(t):(t=function(t){if(xo(t))return fo(t);var e=new To(t);for(Mo(e);e.index<e.max&&!e.err.length;)So(e);return e.err||e.segments}(t),l=c=s=a=0,t.map(function(t){var e=t.slice(1).map(Number),t=t[0],n=t.toUpperCase();if("M"===t)return a=e[0],s=e[1],["M",c=a,l=s];if(t!==n)switch(n){case"A":i=[n,e[0],e[1],e[2],e[3],e[4],e[5]+a,e[6]+s];break;case"V":i=[n,e[0]+s];break;case"H":i=[n,e[0]+a];break;default:var r=e.map(function(t,e){return t+(e%2?s:a)}),i=[n].concat(r)}else i=[n].concat(e);var o=i.length;switch(n){case"Z":a=c,s=l;break;case"H":a=i[1];break;case"V":s=i[1];break;default:a=i[o-2],s=i[o-1],"M"===n&&(c=a,l=s)}return i}))}function Ao(t){if(ko(t))return fo(t);for(var e,n,r,i,o,a,s,c=Oo(t),l=M({},mo),u=0;u<c.length;u+=1){c[u]=(e=c[u],n=l,s=a=f=o=h=i=r=void 0,r=e[0],i=n.x1,h=n.y1,o=n.x2,f=n.y2,a=e.slice(1).map(Number),s=e,"TQ".includes(r)||(n.qx=null,n.qy=null),"H"===r?s=["L",e[1],h]:"V"===r?s=["L",i,e[1]]:"S"===r?(e=2*h-f,s=["C",n.x1=2*i-o,n.y1=e].concat(a)):"T"===r?(f=2*i-n.qx,o=2*h-n.qy,s=["Q",n.qx=f,n.qy=o].concat(a)):"Q"===r&&(e=a[0],i=a[1],n.qx=e,n.qy=i),s);var h=c[u],f=h.length;l.x1=+h[f-2],l.y1=+h[f-1],l.x2=+h[f-4]||l.x1,l.y2=+h[f-3]||l.y1}return c}function Po(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function No(t,e,n){var r=t[0],t=t[1];return[r+(e[0]-r)*n,t+(e[1]-t)*n]}function Co(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Lo(t,e,n,r,i){var o=Co([t,e],[n,r]),a={x:0,y:0};return{length:o,point:a="number"==typeof i?i<=0?{x:t,y:e}:o<=i?{x:n,y:r}:{x:(i=No([t,e],[n,r],i/o))[0],y:i[1]}:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function Io(t,e,n,r){var t=[t,e],e=[n,r],i=No(t,e,.5),e=No(e,i,.5),o=No(i,e,.5),a=No(e,o,.5),s=No(o,a,.5),t=Lo(t[0],t[1],i[0],i[1],o[0]).point,i=Lo(s[0],s[1],a[0],a[1],e[0]).point;return[t.x,t.y,i.x,i.y,n,r]}function jo(t,e){var n,r,i,o,a,s,c=t[0],l=t.slice(1).map(Number),u=l[0],h=l[1],f=e.x1,d=e.y1,p=e.x,y=e.y;switch("TQ".includes(c)||(e.qx=null,e.qy=null),c){case"M":return e.x=u,e.y=h,t;case"A":return s=[f,d].concat(l),["C"].concat(function t(e,n,r,i,o,a,s,c,l,u){var h=120*Math.PI/180,f=Math.PI/180*(+o||0),d=[],p=(u?(x=u[0],w=u[1],m=u[2],b=u[3]):(e=(g=Po(e,n,-f)).x,n=g.y,1<(p=(y=(e-(c=(g=Po(c,l,-f)).x))/2)*y/(r*r)+(g=(n-(l=g.y))/2)*g/(i*i))&&(r*=p=Math.sqrt(p),i*=p),p=r*r,v=i*i,m=(a=(a===s?-1:1)*Math.sqrt(Math.abs((p*v-p*g*g-v*y*y)/(p*g*g+v*y*y))))*r*g/i+(e+c)/2,b=a*-i*y/r+(n+l)/2,x=Math.asin(((n-b)/i*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((l-b)/i*Math.pow(10,9)>>0)/Math.pow(10,9)),x=e<m?Math.PI-x:x,w=c<m?Math.PI-w:w,x<0&&(x=2*Math.PI+x),w<0&&(w=2*Math.PI+w),s&&w<x&&(x-=2*Math.PI),!s&&x<w&&(w-=2*Math.PI)),w-x),y=(Math.abs(p)>h&&(v=w,g=c,a=l,w=x+h*(s&&x<w?1:-1),d=t(c=m+r*Math.cos(w),l=b+i*Math.sin(w),r,i,o,0,s,g,a,[w,v,m,b])),p=w-x,Math.cos(x)),h=Math.sin(x),o=Math.cos(w),s=Math.sin(w),g=Math.tan(p/4),a=4/3*r*g,v=4/3*i*g,m=[e,n],b=[e+a*h,n-v*y],x=[c+a*s,l-v*o],w=[c,l];if(b[0]=2*m[0]-b[0],b[1]=2*m[1]-b[1],u)return b.concat(x,w,d);for(var k=[],E=0,_=(d=b.concat(x,w,d)).length;E<_;E+=1)k[E]=E%2?Po(d[E-1],d[E],f).y:Po(d[E],d[E+1],f).x;return k}(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return e.qx=u,e.qy=h,s=[f,d].concat(l),["C"].concat((n=s[0],r=s[1],i=s[2],o=s[3],a=s[4],s=s[5],[1/3*n+2/3*i,1/3*r+2/3*o,1/3*a+2/3*i,1/3*s+2/3*o,a,s]));case"L":return["C"].concat(Io(f,d,u,h));case"Z":return f===p&&d===y?["C",f,d,p,y,p,y]:["C"].concat(Io(f,d,p,y))}return t}function Ro(t,e){var n;if(void 0===e&&(e=!1),ko(n=t)&&n.every(function(t){t=t[0];return"MC".includes(t)}))return n=fo(t),e?[n,[]]:n;for(var r,i=Ao(t),o=M({},mo),a=[],s="",c=i.length,l=[],u=0;u<c;u+=1){i[u]&&(s=i[u][0]),a[u]=s;var h=jo(i[u],o),f=(i[u]=h,g=y=p=d=f=void 0,i),d=a,p=u;if(7<f[p].length){f[p].shift();for(var y=f[p],g=p;y.length;)d[p]="A",f.splice(g+=1,0,["C"].concat(y.splice(0,6)));f.splice(p,1)}c=i.length,"Z"===s&&l.push(u),r=(h=i[u]).length,o.x1=+h[r-2],o.y1=+h[r-1],o.x2=+h[r-4]||o.x1,o.y2=+h[r-3]||o.y1}return e?[i,l]:i}function Do(t,e){var n=t.x,t=t.y,r=e.x,e=e.y,i=n*r+t*e,o=Math.sqrt((Math.pow(n,2)+Math.pow(t,2))*(Math.pow(r,2)+Math.pow(e,2)));return(n*e-t*r<0?-1:1)*Math.acos(i/o)}function Bo(t,e,n,r,i,R,D,o,a,s,c){var l=c.bbox,B=void 0===l||l,l=c.length,F=void 0===l||l,l=c.sampleSize,u=void 0===l?30:l,h="number"==typeof s,f=t,d=e,p=0,y=[f,d,p],g=[f,d],v={x:0,y:0},m=[{x:f,y:d}];h&&s<=0&&(v={x:f,y:d});for(var b,x,w,k,E,_,M,S,T,O,A,P,N,C,L,I,j=0;j<=u;j+=1)b=t,x=e,w=n,k=r,E=i,_=R,M=D,S=o,T=a,O=j/u,P=I=L=C=N=P=A=void 0,P=Math.abs,N=Math.sin,C=Math.cos,L=Math.sqrt,I=Math.PI,w=P(w),P=P(k),k=I/180*((E%360+360)%360),f=(A=b===S&&x===T?{x:b,y:x}:0===w||0===P?Lo(b,x,S,T,O).point:(E=(b-S)/2,A=(x-T)/2,E={x:C(k)*E+N(k)*A,y:-N(k)*E+C(k)*A},1<(A=Math.pow(E.x,2)/Math.pow(w,2)+Math.pow(E.y,2)/Math.pow(P,2))&&(w*=L(A),P*=L(A)),A=(Math.pow(w,2)*Math.pow(P,2)-Math.pow(w,2)*Math.pow(E.y,2)-Math.pow(P,2)*Math.pow(E.x,2))/(Math.pow(w,2)*Math.pow(E.y,2)+Math.pow(P,2)*Math.pow(E.x,2)),_=(_!==M?1:-1)*L(A<0?0:A),L=w*E.y/P*_,A=-P*E.x/w*_,_=C(k)*L-N(k)*A+(b+S)/2,b=N(k)*L+C(k)*A+(x+T)/2,x=Do({x:1,y:0},S={x:(E.x-L)/w,y:(E.y-A)/P}),T=Do(S,{x:(-E.x-L)/w,y:(-E.y-A)/P}),!M&&0<T?T-=2*I:M&&T<0&&(T+=2*I),S=x+(T%=2*I)*O,L=w*C(S),E=P*N(S),{x:C(k)*L-N(k)*E+_,y:N(k)*L+C(k)*E+b})).x,d=A.y,B&&m.push({x:f,y:d}),F&&(p+=Co(g,[f,d])),g=[f,d],h&&s<=p&&s>y[2]&&(M=(p-s)/(p-y[2]),v={x:g[0]*(1-M)+y[0]*M,y:g[1]*(1-M)+y[1]*M}),y=[f,d,p];return{length:p,point:v=h&&p<=s?{x:o,y:a}:v,min:{x:Math.min.apply(null,m.map(function(t){return t.x})),y:Math.min.apply(null,m.map(function(t){return t.y}))},max:{x:Math.max.apply(null,m.map(function(t){return t.x})),y:Math.max.apply(null,m.map(function(t){return t.y}))}}}function Fo(t,e,n,r,i,o,a,s,c,l){var u=l.bbox,h=void 0===u||u,u=l.length,f=void 0===u||u,u=l.sampleSize,d=void 0===u?10:u,p="number"==typeof c,y=t,g=e,v=0,m=[y,g,v],b=[y,g],x={x:0,y:0},w=[{x:y,y:g}];p&&c<=0&&(x={x:y,y:g});for(var k,E,_,M,S,T,O,A,P,N,C=0;C<=d;C+=1)k=t,E=e,_=n,M=r,S=i,T=o,O=a,A=s,N=void 0,N=1-(P=C/d),y=(k={x:Math.pow(N,3)*k+3*Math.pow(N,2)*P*_+3*N*Math.pow(P,2)*S+Math.pow(P,3)*O,y:Math.pow(N,3)*E+3*Math.pow(N,2)*P*M+3*N*Math.pow(P,2)*T+Math.pow(P,3)*A}).x,g=k.y,h&&w.push({x:y,y:g}),f&&(v+=Co(b,[y,g])),b=[y,g],p&&c<=v&&c>m[2]&&(_=(v-c)/(v-m[2]),x={x:b[0]*(1-_)+m[0]*_,y:b[1]*(1-_)+m[1]*_}),m=[y,g,v];return{length:v,point:x=p&&v<=c?{x:a,y:s}:x,min:{x:Math.min.apply(null,w.map(function(t){return t.x})),y:Math.min.apply(null,w.map(function(t){return t.y}))},max:{x:Math.max.apply(null,w.map(function(t){return t.x})),y:Math.max.apply(null,w.map(function(t){return t.y}))}}}function zo(t,e,n,r,i,o,a,s){var c=s.bbox,l=void 0===c||c,c=s.length,u=void 0===c||c,c=s.sampleSize,h=void 0===c?10:c,f="number"==typeof a,d=t,p=e,y=0,g=[d,p,y],v=[d,p],m={x:0,y:0},b=[{x:d,y:p}];f&&a<=0&&(m={x:d,y:p});for(var x,w,k,E,_,M,S,T,O=0;O<=h;O+=1)x=t,w=e,k=n,E=r,_=i,M=o,T=void 0,T=1-(S=O/h),d=(x={x:Math.pow(T,2)*x+2*T*S*k+Math.pow(S,2)*_,y:Math.pow(T,2)*w+2*T*S*E+Math.pow(S,2)*M}).x,p=x.y,l&&b.push({x:d,y:p}),u&&(y+=Co(v,[d,p])),v=[d,p],f&&a<=y&&a>g[2]&&(k=(y-a)/(y-g[2]),m={x:v[0]*(1-k)+g[0]*k,y:v[1]*(1-k)+g[1]*k}),g=[d,p,y];return{length:y,point:m=f&&y<=a?{x:i,y:o}:m,min:{x:Math.min.apply(null,b.map(function(t){return t.x})),y:Math.min.apply(null,b.map(function(t){return t.y}))},max:{x:Math.max.apply(null,b.map(function(t){return t.x})),y:Math.max.apply(null,b.map(function(t){return t.y}))}}}function Go(t,e,n){for(var r,i,o,a=Ao(t),s="number"==typeof e,c=[],l=0,u=0,h=0,f=0,d=[],p=[],y=0,g={x:0,y:0},v=g,m=g,b=g,x=0,w=0,k=a.length;w<k;w+=1)c=(r="M"===(i=(o=a[w])[0]))?c:[l,u].concat(o.slice(1)),r?(v=g={x:h=o[1],y:f=o[2]},y=0,s&&e<.001&&(b=g)):"L"===i?(y=(r=Lo(c[0],c[1],c[2],c[3],(e||0)-x)).length,g=r.min,v=r.max,m=r.point):"A"===i?(y=(r=Bo(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],(e||0)-x,n||{})).length,g=r.min,v=r.max,m=r.point):"C"===i?(y=(r=Fo(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],(e||0)-x,n||{})).length,g=r.min,v=r.max,m=r.point):"Q"===i?(y=(r=zo(c[0],c[1],c[2],c[3],c[4],c[5],(e||0)-x,n||{})).length,g=r.min,v=r.max,m=r.point):"Z"===i&&(y=(r=Lo((c=[l,u,h,f])[0],c[1],c[2],c[3],(e||0)-x)).length,g=r.min,v=r.max,m=r.point),s&&x<e&&e<=x+y&&(b=m),p.push(v),d.push(g),x+=y,l=(r="Z"!==i?o.slice(-2):[h,f])[0],u=r[1];return{length:x,point:b=s&&x<=e?{x:l,y:u}:b,min:{x:Math.min.apply(null,d.map(function(t){return t.x})),y:Math.min.apply(null,d.map(function(t){return t.y}))},max:{x:Math.max.apply(null,p.map(function(t){return t.x})),y:Math.max.apply(null,p.map(function(t){return t.y}))}}}function Wo(t){return(l=c=s=0)<=Ro(t).map(function(t){var e,n,r,i,o,a;return"M"===t[0]?(s=t[1],c=t[2],0):(a=t.slice(1),e=a[0],n=a[1],r=a[2],i=a[3],o=a[4],a=a[5],l=3*((a-c)*(e+r)-(o-s)*(n+i)+n*(s-r)-e*(c-i)+a*(r+s/3)-o*(i+c/3))/20,n=t.slice(-2),s=n[0],c=n[1],l)}).reduce(function(t,e){return t+e},0);var s,c,l}function Ho(t){return t.map(function(t,e,n){var r,i,o,a,n=e&&n[e-1].slice(-2).concat(t.slice(1)),s=e?Fo(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],{bbox:!1}).length:0,n=e?s?(void 0===r&&(r=.5),n=(e=n).slice(0,2),i=e.slice(2,4),o=e.slice(4,6),e=e.slice(6,8),n=No(n,i,r),i=No(i,o,r),o=No(o,e,r),a=No(n,i,r),i=No(i,o,r),r=No(a,i,r),[["C"].concat(n,a,r),["C"].concat(i,o,e)]):[t,t]:[t];return{s:t,ss:n,l:s}})}function Vo(t){var e=typeof t;return null!==t&&"object"==e||"function"==e}function Yo(o,a){if("function"!=typeof o)throw new TypeError("Expected a function");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=a?a.apply(this,t):t[0],i=s.cache;return i.has(r)?i.get(r):(n=o.apply(this,t),i.set(r,n),n)}return s.cache=new Map,s}var T=function(t){return null==t},Uo={}.toString,qo=function(t,e){return Uo.call(t)==="[object "+e+"]"},Xo=function(t){return qo(t,"String")},$o=function(t,e,n){return t<e?e:n<t?n:t},Zo=function(t){return qo(t,"Number")},Ko=function(t){return qo(t,"Boolean")},Jo=function(t){return void 0===t};function Qo(t,e,n){(t.prototype=e.prototype=n).constructor=t}function ta(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function ea(){}var i="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",f="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",na=/^#([0-9a-f]{3,8})$/,ra=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),ia=new RegExp("^rgb\\("+[f,f,f]+"\\)$"),oa=new RegExp("^rgba\\("+[i,i,i,c]+"\\)$"),aa=new RegExp("^rgba\\("+[f,f,f,c]+"\\)$"),sa=new RegExp("^hsl\\("+[c,f,f]+"\\)$"),ca=new RegExp("^hsla\\("+[c,f,f,c]+"\\)$"),la={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ua(){return this.rgb().formatHex()}function ha(){return this.rgb().formatRgb()}function fa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=na.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?da(e):3===n?new ya(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pa(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ra.exec(t))?new ya(e[1],e[2],e[3],1):(e=ia.exec(t))?new ya(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=oa.exec(t))?pa(e[1],e[2],e[3],e[4]):(e=aa.exec(t))?pa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sa.exec(t))?ba(e[1],e[2]/100,e[3]/100,1):(e=ca.exec(t))?ba(e[1],e[2]/100,e[3]/100,e[4]):la.hasOwnProperty(t)?da(la[t]):"transparent"===t?new ya(NaN,NaN,NaN,0):null}function da(t){return new ya(t>>16&255,t>>8&255,255&t,1)}function pa(t,e,n,r){return new ya(t=r<=0?e=n=NaN:t,e,n,r)}function ya(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ga(){return"#"+ma(this.r)+ma(this.g)+ma(this.b)}function va(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ma(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ba(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new wa(t,e,n,r)}function xa(t){var e,n,r,i,o,a,s,c;return t instanceof wa?new wa(t.h,t.s,t.l,t.opacity):(t=t instanceof ea?t:fa(t))?t instanceof wa?t:(e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=NaN,c=((o=Math.max(e,n,r))+i)/2,(s=o-i)?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=0<c&&c<1?0:a,new wa(a,s,c,t.opacity)):new wa}function wa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ka(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ea(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function _a(t,e){var n=Math.min.apply(Math,t),r=Math.min.apply(Math,e);return{x:n,y:r,width:Math.max.apply(Math,t)-n,height:Math.max.apply(Math,e)-r}}Qo(ea,fa,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ua,formatHex:ua,formatHsl:function(){return xa(this).formatHsl()},formatRgb:ha,toString:ha}),Qo(ya,function(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof ea?i:fa(i))?new ya((i=i.rgb()).r,i.g,i.b,i.opacity):new ya:new ya(t,e,n,null==r?1:r);var i},ta(ea,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ya(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ya(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ga,formatHex:ga,formatRgb:va,toString:va})),Qo(wa,function(t,e,n,r){return 1===arguments.length?xa(t):new wa(t,e,n,null==r?1:r)},ta(ea,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new wa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new wa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new ya(ka(240<=t?t-240:120+t,n,e),ka(t,n,e),ka(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ma={box:function(t,e,n,r){return _a([t,n],[e,r])},length:Ea,pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?Ea(t,e,i,o):(n-t)*(n-t)+(r-e)*(r-e)<a?Ea(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a,n=[n-t,r-e];return(r=n)[0]===(a=[0,0])[0]&&r[1]===a[1]?Math.sqrt((i-t)*(i-t)+(o-e)*(o-e)):(uo(r=[-n[1],n[0]],r),a=[i-t,o-e],Math.abs(a[0]*r[0]+a[1]*r[1]))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function Sa(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],a=Ea(i[0],i[1],o[0],o[1]);n.push({from:i,to:o,length:a}),e+=a}return{segments:n,totalLength:e}}var Ta,Oa,m,Aa,Pa,Na,Ca={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return _a(e,n)},length:function(t){var e=t;if(e.length<2)return 0;for(var n=0,r=0;r<e.length-1;r++){var i=e[r],o=e[r+1];n+=Ea(i[0],i[1],o[0],o[1])}return n},pointAt:function(t,e){var n=e;if(1<n||n<0||t.length<2)return null;var e=Sa(t),r=e.segments,i=e.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,c=c.length/i;if(o<=n&&n<=o+c){a=Ma.pointAt(l[0],l[1],u[0],u[1],(n-o)/c);break}o+=c}return a},pointDistance:function(t,e,n){for(var r=t,i=e,o=n,a=1/0,s=0;s<r.length-1;s++){var c=r[s],l=r[s+1],c=Ma.pointDistance(c[0],c[1],l[0],l[1],i,o);c<a&&(a=c)}return a},tangentAngle:function(t,e){var n=e;if(1<n||n<0||t.length<2)return 0;for(var r=(t=Sa(t)).segments,i=t.totalLength,o=0,a=0,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,c=c.length/i;if(o<=n&&n<=o+c){a=Math.atan2(u[1]-l[1],u[0]-l[0]);break}o+=c}return a}},La={exports:{}};function Ia(){}function ja(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Ra(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new ja(n,r||t,i),r=Oa?Oa+e:e;return t._events[r]?t._events[r].fn?t._events[r]=[t._events[r],n]:t._events[r].push(n):(t._events[r]=n,t._eventsCount++),t}function Da(t,e){0==--t._eventsCount?t._events=new Ia:delete t._events[e]}function Ba(){this._events=new Ia,this._eventsCount=0}Mt=La,Ta=Object.prototype.hasOwnProperty,Oa="~",Object.create&&(Ia.prototype=Object.create(null),(new Ia).__proto__||(Oa=!1)),Ba.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)Ta.call(t,e)&&n.push(Oa?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},Ba.prototype.listeners=function(t){var t=Oa?Oa+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,i=new Array(r);n<r;n++)i[n]=e[n].fn;return i},Ba.prototype.listenerCount=function(t){t=Oa?Oa+t:t,t=this._events[t];return t?t.fn?1:t.length:0},Ba.prototype.emit=function(t,e,n,r,i,o){var a=Oa?Oa+t:t;if(!this._events[a])return!1;var s,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,o),!0}for(f=1,s=new Array(l-1);f<l;f++)s[f-1]=arguments[f];c.fn.apply(c.context,s)}else for(var u,h=c.length,f=0;f<h;f++)switch(c[f].once&&this.removeListener(t,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,e);break;case 3:c[f].fn.call(c[f].context,e,n);break;case 4:c[f].fn.call(c[f].context,e,n,r);break;default:if(!s)for(u=1,s=new Array(l-1);u<l;u++)s[u-1]=arguments[u];c[f].fn.apply(c[f].context,s)}return!0},Ba.prototype.on=function(t,e,n){return Ra(this,t,e,n,!1)},Ba.prototype.once=function(t,e,n){return Ra(this,t,e,n,!0)},Ba.prototype.removeListener=function(t,e,n,r){t=Oa?Oa+t:t;if(this._events[t])if(e){var i=this._events[t];if(i.fn)i.fn!==e||r&&!i.once||n&&i.context!==n||Da(this,t);else{for(var o=0,a=[],s=i.length;o<s;o++)(i[o].fn!==e||r&&!i[o].once||n&&i[o].context!==n)&&a.push(i[o]);a.length?this._events[t]=1===a.length?a[0]:a:Da(this,t)}}else Da(this,t);return this},Ba.prototype.removeAllListeners=function(t){return t?(t=Oa?Oa+t:t,this._events[t]&&Da(this,t)):(this._events=new Ia,this._eventsCount=0),this},Ba.prototype.off=Ba.prototype.removeListener,Ba.prototype.addListener=Ba.prototype.on,Ba.prefixed=Oa,Mt.exports=Ba.EventEmitter=Ba;let Fa=1;const za="object"==typeof self&&self.self==self?self:"object"==typeof j&&j.global==j?j:{},Ga=Date.now();let Wa={},Ha=Date.now();const Va=t=>"string"!=typeof t?t=>{if("function"!=typeof t)throw new TypeError(t+" is not a function");const n=Date.now(),e=n-Ha,r=16<e?0:16-e,i=Fa++;return Wa[i]=t,1<Object.keys(Wa).length||setTimeout(()=>{Ha=n;const e=Wa;Wa={},Object.keys(e).forEach(t=>e[t](za.performance&&"function"==typeof za.performance.now?za.performance.now():Date.now()-Ga))},r),i}:""===t?za.requestAnimationFrame:za[t+"RequestAnimationFrame"],Ya=((t,e)=>{let n=0;for(;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}})(["","webkit","moz","ms","o"],t=>!!Va(t)),Ua=Va(Ya),qa="string"!=typeof(l=Ya)?t=>{delete Wa[t]}:""===l?za.cancelAnimationFrame:za[l+"CancelAnimationFrame"]||za[l+"CancelRequestAnimationFrame"];function Xa(){Xa=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function $a(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function Za(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){$a(r,e,n,i,o,"next",t)}function o(t){$a(r,e,n,i,o,"throw",t)}i(void 0)})}}function Ka(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ja(t,e,n){e&&Ka(t.prototype,e),n&&Ka(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function Qa(){return(Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function b(t,e){t.prototype=Object.create(e.prototype),ts(t.prototype.constructor=t,e)}function ts(t,e){return(ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function es(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}function ns(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function is(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){var n;if(t)return"string"==typeof t?rs(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rs(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}za.requestAnimationFrame=Ua,za.cancelAnimationFrame=qa,"undefined"!=typeof module&&module.exports&&(module.exports={requestAnimationFrame:Ua,cancelAnimationFrame:qa}),(t=m=m||{})[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",(n=Aa=Aa||{})[n.kUNumber=0]="kUNumber",n[n.kUPercent=1]="kUPercent",n[n.kULength=2]="kULength",n[n.kUAngle=3]="kUAngle",n[n.kUTime=4]="kUTime",n[n.kUOther=5]="kUOther",(dt=Pa=Pa||{})[dt.kYes=0]="kYes",dt[dt.kNo=1]="kNo",(jt=Na=Na||{})[jt.kYes=0]="kYes",jt[jt.kNo=1]="kNo";function os(t){return t?"number"===t?m.kNumber:"percent"===t||"%"===t?m.kPercentage:(e=t,us.find(function(t){return t.name===e}).unit_type):m.kUnknown;var e}function as(t){var e=1;switch(t){case m.kPixels:case m.kDegrees:case m.kSeconds:break;case m.kMilliseconds:e=.001;break;case m.kRadians:e=180/Math.PI;break;case m.kGradians:e=.9;break;case m.kTurns:e=360}return e}function ss(t){switch(t){case m.kNumber:case m.kInteger:return"";case m.kPercentage:return"%";case m.kEms:return"em";case m.kRems:return"rem";case m.kPixels:return"px";case m.kDegrees:return"deg";case m.kRadians:return"rad";case m.kGradians:return"grad";case m.kMilliseconds:return"ms";case m.kSeconds:return"s";case m.kTurns:return"turn"}return""}var cs,ls,us=[{name:"em",unit_type:m.kEms},{name:"px",unit_type:m.kPixels},{name:"deg",unit_type:m.kDegrees},{name:"rad",unit_type:m.kRadians},{name:"grad",unit_type:m.kGradians},{name:"ms",unit_type:m.kMilliseconds},{name:"s",unit_type:m.kSeconds},{name:"rem",unit_type:m.kRems},{name:"turn",unit_type:m.kTurns}],ut=((a=cs=cs||{})[a.kUnknownType=0]="kUnknownType",a[a.kUnparsedType=1]="kUnparsedType",a[a.kKeywordType=2]="kKeywordType",a[a.kUnitType=3]="kUnitType",a[a.kSumType=4]="kSumType",a[a.kProductType=5]="kProductType",a[a.kNegateType=6]="kNegateType",a[a.kInvertType=7]="kInvertType",a[a.kMinType=8]="kMinType",a[a.kMaxType=9]="kMaxType",a[a.kClampType=10]="kClampType",a[a.kTransformType=11]="kTransformType",a[a.kPositionType=12]="kPositionType",a[a.kURLImageType=13]="kURLImageType",a[a.kColorType=14]="kColorType",a[a.kUnsupportedColorType=15]="kUnsupportedColorType",function(){function t(){}t.isAngle=function(t){return t===m.kDegrees||t===m.kRadians||t===m.kGradians||t===m.kTurns},t.isLength=function(t){return t>=m.kEms&&t<m.kDegrees},t.isRelativeUnit=function(t){return t===m.kPercentage||t===m.kEms||t===m.kRems},t.isTime=function(t){return t===m.kSeconds||t===m.kMilliseconds};var e=t.prototype;return e.toString=function(){return this.buildCSSText(Pa.kNo,Na.kNo,"")},e.isNumericValue=function(){return this.getType()>=cs.kUnitType&&this.getType()<=cs.kClampType},t}()),r=function(n){function t(t){var e=n.call(this)||this;return e.colorSpace=void 0,e.colorSpace=t,e}b(t,n);var e=t.prototype;return e.getType=function(){return cs.kColorType},e.to=function(t){return this},t}(ut),hs=((u=ls=ls||{})[u.Constant=0]="Constant",u[u.LinearGradient=1]="LinearGradient",u[u.RadialGradient=2]="RadialGradient",function(r){function t(t,e){var n=r.call(this)||this;return n.type=void 0,n.value=void 0,n.type=t,n.value=e,n}b(t,r);var e=t.prototype;return e.clone=function(){return new t(this.type,this.value)},e.buildCSSText=function(t,e,n){return n},e.getType=function(){return cs.kColorType},t}(ut)),fs=function(n){function t(t){var e=n.call(this)||this;return e.value=void 0,e.value=t,e}b(t,n);var e=t.prototype;return e.clone=function(){return new t(this.value)},e.getType=function(){return cs.kKeywordType},e.buildCSSText=function(t,e,n){return n+this.value},t}(ut),ds=Yo(function(t){return(t=void 0===t?"":t).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})});function ps(t){if(!t)throw new Error}function ys(t,e){if(t===e)throw new Error}function gs(t){return"function"==typeof t}var vs,ms,bs={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign",values:{middle:"center"}},src:{alias:"img"}},xs=Yo(function(t){var t=ds(t),e=bs[t];return[(null==e?void 0:e.alias)||t,e]});function ws(t,e){var t=xs(t),n=t[0],t=t[1];return[n,Xo(e)&&(null==t||null==(n=t.values)?void 0:n[e])||e]}(pt=vs=vs||{}).kAdd="+",pt.kSubtract="-",pt.kMultiply="*",pt.kDivide="/",pt.kMin="min",pt.kMax="max",pt.kClamp="clamp",pt.kInvalid="",(o=ms=ms||{})[o.kLength=0]="kLength",o[o.kAngle=1]="kAngle",o[o.kTime=2]="kTime",o[o.kFrequency=3]="kFrequency",o[o.kResolution=4]="kResolution",o[o.kFlex=5]="kFlex",o[o.kPercent=6]="kPercent",o[o.kNumBaseTypes=7]="kNumBaseTypes";function ks(t){return"number"==typeof t?new Ps(t,m.kNumber):t}var Es=function(){function t(t,e){void 0===t&&(t=m.kNumber),void 0===e&&(e=1),this.exponents=[],this.numNonZeroEntries=0,this.percentHint=ms.kPercent,this.hasPercentHint=!1,this.exponents=new Array(ms.kNumBaseTypes).fill(0),t!==m.kNumber&&this.setExponent(function(t){switch(ys(t,m.kNumber),t){case m.kEms:case m.kPixels:case m.kRems:return ms.kLength;case m.kMilliseconds:case m.kSeconds:return ms.kTime;case m.kDegrees:case m.kRadians:case m.kGradians:case m.kTurns:return ms.kAngle;case m.kPercentage:return ms.kPercent;default:return ms.kLength}}(t),e)}var e=t.prototype;return e.applyPercentHint=function(t){ys(t,ms.kPercent),this.setExponent(t,this.exponent(t)+this.exponent(ms.kPercent)),this.setExponent(ms.kPercent,0),this.percentHint=t,this.hasPercentHint=!0},e.hasNonZeroEntries=function(){return 0<this.numNonZeroEntries},e.isOnlyNonZeroEntry=function(t,e){return ys(e,0),1===this.numNonZeroEntries&&this.exponent(t)===e},e.exponent=function(t){return this.exponents[t]},e.setExponent=function(t,e){var n=this.exponents[t];0==n&&0!==e?this.numNonZeroEntries++:0!==n&&0==e&&this.numNonZeroEntries--,this.exponents[t]=e},t.negateExponents=function(t){return t.exponents.forEach(function(t){return-1*t}),t},e.matchesBaseType=function(t){return ys(t,ms.kPercent),this.isOnlyNonZeroEntry(t,1)&&!this.hasPercentHint},e.matchesPercentage=function(){return this.isOnlyNonZeroEntry(ms.kPercent,1)},e.matchesBaseTypePercentage=function(t){return ys(t,ms.kPercent),this.isOnlyNonZeroEntry(t,1)||this.isOnlyNonZeroEntry(ms.kPercent,1)},e.matchesNumber=function(){return!this.hasNonZeroEntries()&&!this.hasPercentHint},e.matchesNumberPercentage=function(){return!this.hasNonZeroEntries()||this.isOnlyNonZeroEntry(ms.kPercent,1)},t.add=function(t,e,n){if(!t.hasPercentHint||!e.hasPercentHint||t.percentHint==e.percentHint){t.hasPercentHint?e.applyPercentHint(t.percentHint):e.hasPercentHint&&t.applyPercentHint(e.percentHint);var r=t.percentHint,i=e.percentHint;if(r!==i)throw new Error;for(var o=0;o<ms.kNumBaseTypes;++o){var a=o;if(t.exponents[o]!==e.exponents[o]&&(a!==ms.kPercent&&(t.applyPercentHint(a),e.applyPercentHint(a)),t.exponents[o]!==e.exponents[o]))return t}}return t},t.multiply=function(t,e,n){if(!t.hasPercentHint||!e.hasPercentHint||t.percentHint==e.percentHint){t.hasPercentHint?e.applyPercentHint(t.percentHint):e.hasPercentHint&&t.applyPercentHint(e.percentHint);for(var r=0;r<ms.kNumBaseTypes;++r){var i=r;t.setExponent(i,t.exponent(i)+e.exponent(i))}}return t},t}(),Te=function(n){function d(t){var e=n.call(this)||this;return e.type_=void 0,e.type_=t,e}b(d,n);var t=d.prototype;return t.getType=function(){return cs.kUnknownType},t.equals=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _s(n).every(function(t){return e.equals(t)})},t.add=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=_s(e),i=(Ms(cs.kSumType,r,this),Ts(r,vs.kAdd));return i||Ds.create(r)},t.sub=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(r=_s(e)).map(function(t){return t.negate()}),i=(Ms(cs.kSumType,r,this),Ts(r,vs.kAdd));return i||Ds.create(r)},t.mul=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=_s(e),i=(Ms(cs.kProductType,r,this),Os(r));return i||Bs.create(r)},t.div=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(r=_s(e)).map(function(t){return t.invert()}),i=(Ms(cs.kProductType,r,this),Os(r));return i||Bs.create(r)},t.min=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=_s(e),i=(Ms(cs.kMinType,r,this),Ts(r,vs.kMin));return i||js.create(r)},t.max=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=_s(e),i=(Ms(cs.kMaxType,r,this),Ts(r,vs.kMax));return i||Rs.create(r)},t.to=function(t){var e=this.sumValue();return 0!==e.length&&1===e.length&&(e=Ss(e[0]))?(t="string"==typeof t?os(t):t,e.convertTo(t)):null},t.toSum=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(!d.isValidUnit(os(o)))return null}var a=this.sumValue();if(!a.length)return null;for(var s=[],c=is(a);!(l=c()).done;){var l=Ss(l.value);if(!l)return null;s.push(l)}if(0===e.length)return s.sort(function(t,e){return t.unit-e.unit}),ps(!!(a=Ds.create(s))),a;for(var u=[],h=0,f=e;h<f.length;h++)!function(){var t=f[h],r=os(t),t=(ps(d.isValidUnit(r)),s.reduce(function(t,e,n){return e&&(e=e.convertTo(r))&&(t+=e.value,s[n]=null),t},0));u.push(new Ps(t,r))}();if(s.some(function(t){return!!t}))throw new Error("There were leftover terms that were not converted");return Ds.create(u)},t.type=function(){var t={length:0,angle:0,time:0,frequency:0,resolution:0,flex:0,percent:0,percentHint:"length"},e=this.type_.exponent(ms.kLength);return e&&(t.length=e),(e=this.type_.exponent(ms.kAngle))&&(t.angle=e),(e=this.type_.exponent(ms.kTime))&&(t.time=e),(e=this.type_.exponent(ms.kFrequency))&&(t.frequency=e),(e=this.type_.exponent(ms.kResolution))&&(t.resolution=e),(e=this.type_.exponent(ms.kFlex))&&(t.flex=e),(e=this.type_.exponent(ms.kPercent))&&(t.percent=e),this.type_.hasPercentHint&&(t.percentHint=function(t){switch(t){case ms.kLength:return"length";case ms.kAngle:return"angle";case ms.kTime:return"time";case ms.kFrequency:return"frequency";case ms.kResolution:return"resolution";case ms.kFlex:return"flex";case ms.kPercent:return"percent"}return""}(this.type_.percentHint)),t},d.isValidUnit=function(t){return!!(t===m.kNumber||t==m.kPercentage||this.isLength(t)||this.isAngle(t)||this.isTime(t))},t.negate=function(){return Cs.create(this)},t.invert=function(){return Ns.create(this)},d}(ut);function _s(t){return t.map(ks)}function Ms(t,e,n){ps(!!n),n.getType()===t?e.unshift.apply(e,n.numericValues()):e.unshift(n)}function Ss(t){return 0===Object.keys(t.units).length?new Ps(t.value):1===Object.keys(t.units).length&&1===t.units[Object.keys(t.units)[0]]?new Ps(t.value,Number(Object.keys(t.units)[0])):null}function Ts(t,e){ps(!!t.length);var n=t[0]instanceof Ps?t[0]:null;if(!n)return null;for(var r=n.value,i=1;i<t.length;i++){var o=t[i]instanceof Ps?t[i]:null;if(!o||o.unit!==n.unit)return null;e===vs.kAdd?r+=o.value:e===vs.kMax?r=Math.max(r,o.value):e===vs.kMin&&(r=Math.min(r,o.value))}return new Ps(r,n.unit)}function Os(t){ps(!!t.length);for(var e=m.kNumber,n=1,r=0;r<t.length;r++){var i=t[r]instanceof Ps?t[r]:null;if(!i)return null;if(i.unit!==m.kNumber){if(e!==m.kNumber)return null;e=i.unit}n*=i.value}return new Ps(n,e)}function As(t){switch(function(t){switch(t){case m.kNumber:case m.kInteger:return Aa.kUNumber;case m.kPercentage:return Aa.kUPercent;case m.kPixels:return Aa.kULength;case m.kMilliseconds:case m.kSeconds:return Aa.kUTime;case m.kDegrees:case m.kRadians:case m.kGradians:case m.kTurns:return Aa.kUAngle;default:return Aa.kUOther}}(t)){case Aa.kUNumber:return m.kNumber;case Aa.kULength:return m.kPixels;case Aa.kUPercent:return m.kPercentage;case Aa.kUTime:return m.kSeconds;case Aa.kUAngle:return m.kDegrees;default:return m.kUnknown}}var Ps=function(r){function n(t,e){var n,e="string"==typeof(e=void 0===e?m.kNumber:e)?os(e):e;return(n=r.call(this,new Es(e))||this).unit=void 0,n.value=void 0,n.unit=e,n.value=t,n}b(n,r);var t=n.prototype;return t.clone=function(){return new n(this.value,this.unit)},t.convertTo=function(t){var e;return this.unit===t?new n(this.value,this.unit):(e=As(this.unit))!==As(t)||e===m.kUnknown?null:(e=as(this.unit)/as(t),new n(this.value*e,t))},t.equals=function(t){return this.value===t.value&&this.unit===t.unit},t.getType=function(){return cs.kUnitType},t.sumValue=function(){var t,e,n=[],r={};return this.unit!==m.kNumber&&(r[t=this.unit,(e=As(t))===m.kUnknown?t:e]=1),n.push({value:this.value*as(this.unit),units:r}),n},t.negate=function(){return new n(-this.value,this.unit)},t.invert=function(){return this.unit===m.kNumber?0===this.value?null:new n(1/this.value,this.unit):Ns.create(this)},t.buildCSSText=function(t,e,n){switch(this.unit){case m.kUnknown:break;case m.kInteger:i=Number(this.value).toFixed(0);break;case m.kNumber:case m.kPercentage:case m.kEms:case m.kRems:case m.kPixels:case m.kDegrees:case m.kRadians:case m.kGradians:case m.kMilliseconds:case m.kSeconds:case m.kTurns:var r,i,o=this.value,a=ss(this.unit);i=o<-999999||999999<o?(r=ss(this.unit),!Number.isFinite(o)||Number.isNaN(o)?function(t,e){void 0===e&&(e="");return(Number.isFinite(t)?(ps(Number.isNaN(t)),"NaN"):0<t?"infinity":"-infinity")+e}(o,r):o+(r||"")):""+o+a}return n+=i},n}(Te),h=function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.isUnitValue=function(){return!1},e}(Te),Ns=function(n){function e(t,e){e=n.call(this,e)||this;return e.value=void 0,e.operator="invert",e.value=t,e}b(e,n),e.create=function(t){return new e(t,Es.negateExponents(t.type_))};var t=e.prototype;return t.clone=function(){return new e(this.value,this.type_)},t.getType=function(){return cs.kInvertType},t.equals=function(t){return t.getType()===cs.kInvertType&&this.value.equals(t.value)},t.sumValue=function(){var e=this.value.sumValue();return 0===e.length||1!==e.length||0===e[0].value?null:(Object.keys(e[0].units).forEach(function(t){e[0].units[t]*=-1}),e[0].value=1/e[0].value,e)},t.buildCSSText=function(t,e,n){return e==Na.kNo&&(n+=t===Pa.kYes?"(":"calc("),n=this.value.buildCSSText(Pa.kYes,Na.kNo,n+="1 / "),e===Na.kNo&&(n+=")"),n},e}(h),Cs=function(n){function e(t,e){e=n.call(this,e)||this;return e.value=void 0,e.operator="negate",e.value=t,e}b(e,n),e.create=function(t){return new e(t,t.type_)};var t=e.prototype;return t.clone=function(){return new e(this.value,this.type_)},t.getType=function(){return cs.kNegateType},t.equals=function(t){return t.getType()===cs.kNegateType&&this.value.equals(t.value)},t.sumValue=function(){var t=this.value.sumValue();return 0===t.length?null:(t.forEach(function(t){t.value*=-1}),t)},t.buildCSSText=function(t,e,n){return e==Na.kNo&&(n+=t===Pa.kYes?"(":"calc("),n=this.value.buildCSSText(Pa.kYes,Na.kNo,n+="-"),e===Na.kNo&&(n+=")"),n},e}(h);function Ls(t,e){for(var n=t[0].type_,r=1;r<t.length;r++)n=e(n,t[r].type_,!1);return n}function Is(t){return qs[t]||(qs[t]=new fs(t)),qs[t]}var x,s=function(n){function t(t,e){e=n.call(this,e)||this;return e.values=void 0,e.values=t,e}b(t,n);var e=t.prototype;return e.numericValues=function(){return this.values},e.equals=function(n){return this.getType()===n.getType()&&this.values.every(function(t,e){return t.equals(n.values[e])})},t}(h),js=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="min",t}b(e,i),e.create=function(t){return new e(t,Ls(t,Es.add))};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return cs.kMinType},t.sumValue=function(){var t=this.numericValues()[0].sumValue();if(!t.length)return null;for(var e=is(this.numericValues());!(n=e()).done;){var n=n.value.sumValue();if(!n.length||JSON.stringify(n[0].units)!==JSON.stringify(t[0].units))return null;n[0].value<t[0].value&&(t=n)}return t},t.buildCSSText=function(t,e,n){n+="min(";for(var r,i=!0,o=is(this.numericValues());!(r=o()).done;)i||(n+=", "),i=!1,n=r.value.buildCSSText(Pa.kYes,Na.kYes,n);return n+=")"},e}(s),Rs=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="max",t}b(e,i),e.create=function(t){return new e(t,Ls(t,Es.add))};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return cs.kMaxType},t.sumValue=function(){var t=this.numericValues()[0].sumValue();if(!t.length)return null;for(var e=is(this.numericValues());!(n=e()).done;){var n=n.value.sumValue();if(!n.length||JSON.stringify(n[0].units)!==JSON.stringify(t[0].units))return null;n[0].value<t[0].value&&(t=n)}return t},t.buildCSSText=function(t,e,n){n+="max(";for(var r,i=!0,o=is(this.numericValues());!(r=o()).done;)i||(n+=", "),i=!1,n=r.value.buildCSSText(Pa.kYes,Na.kYes,n);return n+=")"},e}(s),Ds=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="sum",t}b(e,i),e.create=function(t){return new e(t,Ls(t,Es.add))},e.numericTypeFromUnitMap=function(n){var r=new Es;return Object.keys(n).forEach(function(t){var e=n[t];r=Es.multiply(r,new Es(Number(t),e),!1),ps(!0)}),r},e.canCreateNumericTypeFromSumValue=function(t){var e=this,n=(ps(!!t.length),this.numericTypeFromUnitMap(t[0].units));return t.every(function(t){return Es.add(n,e.numericTypeFromUnitMap(t.units),!1),!0})};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return cs.kSumType},t.sumValue=function(){var n=[];return this.numericValues().forEach(function(t){t=t.sumValue();if(!t.length)return null;t.forEach(function(e){var t=n.findIndex(function(t){return JSON.stringify(t.units)===JSON.stringify(e.units)});-1===t?n.push(Qa({},e)):n[t].value+=e.value})}),e.canCreateNumericTypeFromSumValue(n)?n:null},t.buildCSSText=function(t,e,n){e==Na.kNo&&(n+=t===Pa.kYes?"(":"calc(");var r=this.numericValues();n=r[0].buildCSSText(Pa.kYes,Na.kNo,n);for(var i=1;i<r.length;i++){var o=r[i];n=(o.getType()===cs.kNegateType?(n+=" - ",o.value):(n+=" + ",o)).buildCSSText(Pa.kYes,Na.kNo,n)}return e===Na.kNo&&(n+=")"),n},e}(s),Bs=function(i){function o(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="product",t}b(o,i),o.create=function(t){return new o(t,Ls(t,Es.multiply))},o.multiplyUnitMaps=function(n,r){return Object.keys(r).forEach(function(t){ys(r[t].value,0);var e=t in n?n[t].value:0;e+r[t].value===0?delete n[t]:n[t]=e+r[t].value}),n};var t=o.prototype;return t.clone=function(){return new o(this.values,this.type_)},t.getType=function(){return cs.kProductType},t.sumValue=function(){var e=[{value:1,units:{}}];return this.numericValues().forEach(function(t){var n=t.sumValue();if(!n.length)return null;var r=[];e.forEach(function(e){n.forEach(function(t){r.push({value:e.value*t.value,units:o.multiplyUnitMaps(e.units,t.units)})})}),e=r}),e},t.buildCSSText=function(t,e,n){e==Na.kNo&&(n+=t===Pa.kYes?"(":"calc(");var r=this.numericValues();n=r[0].buildCSSText(Pa.kYes,Na.kNo,n);for(var i=1;i<r.length;i++){var o=r[i];n=(o.getType()===cs.kInvertType?(n+=" / ",o.value):(n+=" * ",o)).buildCSSText(Pa.kYes,Na.kNo,n)}return e===Na.kNo&&(n+=")"),n},o}(s),Fs=new Ps(0,"px"),zs=new Ps(0,"deg"),Gs=function(a){function t(t,e,n,r,i){var o;return void 0===r&&(r=1),void 0===i&&(i=!1),(o=a.call(this,"rgb")||this).r=void 0,o.g=void 0,o.b=void 0,o.alpha=void 0,o.isNone=void 0,o.r=t,o.g=e,o.b=n,o.alpha=r,o.isNone=i,o}b(t,a);var e=t.prototype;return e.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},e.buildCSSText=function(t,e,n){return n+("rgba("+this.r+","+this.g+","+this.b+","+this.alpha)+")"},t}(r),Ws=((e=x=x||{}).COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_PATH="<offset-path>",e.OFFSET_DISTANCE="<offset-distance>",e.CLIP_PATH="<clip-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>",d.defineToken("")),K=d.defineToken(""),J=function(t){return new Ps(t)},Hs=function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,t=t.syntax;Gr.get(Ws).registerMetadata({n:e,inh:n,int:r,d:i,syntax:t})},Vs=d.defineToken(""),Ys=d.defineToken(""),Us=new fs("unset"),Q=new fs("initial"),i=new fs("inherit"),qs={"":Us,unset:Us,initial:Q,inherit:i},Xs=new Gs(0,0,0,0,!0),$s=new Gs(0,0,0,0),Zs=Yo(function(t,e,n,r){return new Gs(t,e,n,r)},function(t,e,n,r){return"rgba("+t+","+e+","+n+","+r+")"}),Ks=Yo(function(t,e){return void 0===e&&(e=m.kNumber),new Ps(t,e)},function(t,e){return""+t+(e=void 0===e?m.kNumber:e)}),Js={},Qs=0;var tc="undefined"!=typeof window&&void 0!==window.document;function ec(t,e){var n=Number(t.style.zIndex),r=Number(e.style.zIndex);if(n===r){var i=t.parentNode;if(i)return(i=i.childNodes||[]).indexOf(t)-i.indexOf(e)}return n-r}function nc(t){var e,n=t;do{if(null==(e=n.style)?void 0:e.clipPath)return n}while(null!==(n=n.parentElement));return null}function rc(t,e){if(tc)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var ic="Method not implemented.",oc="Use document.documentElement instead.",ac={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};function sc(t){return void 0===t?0:360<t||t<-360?t%360:t}function cc(t,e,n){var r,i;return void 0===e&&(e=0),void 0===n&&(n=0),Zo(t)?E(t,e,n):Array.isArray(t)&&3===t.length?(r=t,(i=new ii(3))[0]=r[0],i[1]=r[1],i[2]=r[2],i):E(t[0],t[1]||e,t[2]||n)}function lc(t){return t*(Math.PI/180)}function uc(t){return t*(180/Math.PI)}function hc(t,e){return 16===e.length?(n=t,r=e,a=.5*Math.PI,s=(l=ki(Ci(),r))[0],c=l[1],l=l[2],(u=Math.asin(-r[2]/s))<a?-a<u?(i=Math.atan2(r[6]/c,r[10]/l),o=Math.atan2(r[1]/s,r[0]/s)):(o=0,i=-Math.atan2(r[4]/c,r[5]/c)):(o=0,i=Math.atan2(r[4]/c,r[5]/c)),n[0]=i,n[1]=u,n[2]=o,n):(a=t,s=(l=e)[0],r=l[1],c=l[2],l=l[3],.499995*(n=s*s+(i=r*r)+(u=c*c)+(o=l*l))<(t=s*l-r*c)?(a[0]=Math.PI/2,a[1]=2*Math.atan2(r,s),a[2]=0):t<-.499995*n?(a[0]=-Math.PI/2,a[1]=2*Math.atan2(r,s),a[2]=0):(a[0]=Math.asin(2*(s*c-l*r)),a[1]=Math.atan2(2*(s*l+r*c),1-2*(u+o)),a[2]=Math.atan2(2*(s*r+c*l),1-2*(i+u))),a);var n,r,i,o,a,s,c,l,u}function fc(t,e,n,r,i){var o,a,s,c,l=Math.cos(t),t=Math.sin(t);return o=r*l,a=i*t,r=-r*t,t=i*l,l=i=0,e=e,n=n,s=1,(c=new ii(9))[0]=o,c[1]=a,c[2]=i,c[3]=r,c[4]=t,c[5]=l,c[6]=e,c[7]=n,c[8]=s,c}function dc(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i);e*i-n*r<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o);r=uc(Math.atan2(n,e));return[t[6],t[7],o,a,r]}var pc=si(),yc=si(),gc=qi(),w=[Ci(),Ci(),Ci()],vc=Ci();function mc(t,e,n,r,i,o){if(function(t,e){var n=e[15];if(0===n)return;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return 1}(pc,t)&&(ci(yc,pc),yc[3]=0,yc[7]=0,yc[11]=0,yc[15]=1,!(Math.abs(di(yc))<1e-8))){var t=pc[3],a=pc[7],s=pc[11],c=pc[12],l=pc[13],u=pc[14],h=pc[15];if(0!==t||0!==a||0!==s){if(gc[0]=t,gc[1]=a,gc[2]=s,gc[3]=h,!fi(yc,yc))return;hi(yc,yc),Xi(i,gc,yc)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=c,e[1]=l,e[2]=u,t=pc,(a=w)[0][0]=t[0],a[0][1]=t[1],a[0][2]=t[2],a[1][0]=t[4],a[1][1]=t[5],a[1][2]=t[6],a[2][0]=t[8],a[2][1]=t[9],a[2][2]=t[10],n[0]=Li(w[0]),Fi(w[0],w[0]),r[0]=zi(w[0],w[1]),bc(w[1],w[1],w[0],1,-r[0]),n[1]=Li(w[1]),Fi(w[1],w[1]),r[0]/=n[1],r[1]=zi(w[0],w[2]),bc(w[2],w[2],w[0],1,-r[1]),r[2]=zi(w[1],w[2]),bc(w[2],w[2],w[1],1,-r[2]),n[2]=Li(w[2]),Fi(w[2],w[2]),r[1]/=n[2],r[2]/=n[2],Gi(vc,w[1],w[2]),zi(w[0],vc)<0)for(var f=0;f<3;f++)n[f]*=-1,w[f][0]*=-1,w[f][1]*=-1,w[f][2]*=-1;o[0]=.5*Math.sqrt(Math.max(1+w[0][0]-w[1][1]-w[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-w[0][0]+w[1][1]-w[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-w[0][0]-w[1][1]+w[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+w[0][0]+w[1][1]+w[2][2],0)),w[2][1]>w[1][2]&&(o[0]=-o[0]),w[0][2]>w[2][0]&&(o[1]=-o[1]),w[1][0]>w[0][1]&&(o[2]=-o[2])}}function bc(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}xc={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},wc="";var xc,wc,_,kc=function(t){return wc=t,_c()};function Ec(t){throw new Error(wc+": "+t)}function _c(){var t=Ic(Mc);return 0<wc.length&&Ec("Invalid input not EOF"),t}function Mc(){return Sc("linear-gradient",xc.linearGradient,Oc)||Sc("repeating-linear-gradient",xc.repeatingLinearGradient,Oc)||Sc("radial-gradient",xc.radialGradient,Ac)||Sc("repeating-radial-gradient",xc.repeatingRadialGradient,Ac)||Sc("conic-gradient",xc.conicGradient,Ac)}function Sc(n,t,r){return Tc(t,function(t){var e=r();return e&&!zc(xc.comma)&&Ec("Missing comma before color stops"),{type:n,orientation:e,colorStops:Ic(jc)}})}function Tc(t,e){t=zc(t);if(t)return zc(xc.startCall)||Ec("Missing ("),e=e(t),zc(xc.endCall)||Ec("Missing )"),e}function Oc(){return Fc("directional",xc.sideOrCorner,1)||Fc("angular",xc.angleValue,1)}function Ac(){var t,e,n=Pc();return n&&((t=[]).push(n),e=wc,zc(xc.comma)&&((n=Pc())?t.push(n):wc=e)),t}function Pc(){var t,e=function(){var t=Fc("shape",/^(circle)/i,0);t&&(t.style=Bc()||Nc());return t}()||function(){var t=Fc("shape",/^(ellipse)/i,0);t&&(t.style=Dc()||Nc());return t}();return e?e.at=Cc():(t=Nc())?(e=t,(t=Cc())&&(e.at=t)):(t=Lc())&&(e={type:"default-radial",at:t}),e}function Nc(){return Fc("extent-keyword",xc.extentKeywords,1)}function Cc(){var t;if(Fc("position",/^at/,0))return(t=Lc())||Ec("Missing positioning value"),t}function Lc(){var t={x:Dc(),y:Dc()};if(t.x||t.y)return{type:"position",value:t}}function Ic(t){var e=t(),n=[];if(e)for(n.push(e);zc(xc.comma);)(e=t())?n.push(e):Ec("One extra comma");return n}function jc(){var t=Fc("hex",xc.hexColor,1)||Tc(xc.rgbaColor,function(){return{type:"rgba",value:Ic(Rc)}})||Tc(xc.rgbColor,function(){return{type:"rgb",value:Ic(Rc)}})||Fc("literal",xc.literalColor,0);return t||Ec("Expected color definition"),t.length=Dc(),t}function Rc(){return zc(xc.number)[1]}function Dc(){return Fc("%",xc.percentageValue,1)||Fc("position-keyword",xc.positionKeywords,1)||Bc()}function Bc(){return Fc("px",xc.pixelValue,1)||Fc("em",xc.emValue,1)}function Fc(t,e,n){e=zc(e);if(e)return{type:t,value:e[n]}}function zc(t){var e=/^[\n\r\t\s]+/.exec(wc),e=(e&&Gc(e[0].length),t.exec(wc));return e&&Gc(e[0].length),e}function Gc(t){wc=wc.substring(t)}(f=_=_||{}).GROUP="g",f.CIRCLE="circle",f.ELLIPSE="ellipse",f.IMAGE="image",f.RECT="rect",f.LINE="line",f.POLYLINE="polyline",f.POLYGON="polygon",f.TEXT="text",f.PATH="path",f.HTML="html",f.MESH="mesh";var Wc=d.defineToken(""),Hc=d.defineToken(""),Vc=d.defineToken("");function Yc(t){var e;return 0===t.parsedStyle.path.totalLength&&(t.parsedStyle.path.totalLength=Go(t.parsedStyle.path.absolutePath,void 0,M(M({},e),{bbox:!1,length:!0})).length),t.parsedStyle.path.totalLength}function Uc(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,i=e*i,a=n-t,t=n+t,s=r-e,e=r+e;return[["M",a,r],["C",a,r-i,n-o,s,n,s],["C",n+o,s,t,r-i,t,r],["C",t,r+i,n+o,e,n,e],["C",n-o,e,a,r+i,a,r],["Z"]]}function qc(t,e){void 0===e&&(e=!0);var n,r,i,o,a,s,c,l,u,h,f=[];switch(t.nodeName){case _.LINE:var d=t.parsedStyle,f=[["M",d.x1,d.y1],["L",d.x2,d.y2]];break;case _.CIRCLE:var d=t.parsedStyle,p=d.r,y=d.cx,d=d.cy;f=Uc(p,p,y,d);break;case _.ELLIPSE:var p=t.parsedStyle,y=p.rx,d=p.ry,g=p.cx,p=p.cy;f=Uc(y,d,g,p);break;case _.POLYLINE:case _.POLYGON:y=t.parsedStyle.points;d=y.points,g=t.nodeName===_.POLYGON,d=d.map(function(t,e){return[0===e?"M":"L",t[0],t[1]]}),g&&d.push(["Z"]),f=d;break;case _.RECT:var p=t.parsedStyle,v=p.width,m=p.height,y=p.x,b=p.y,p=p.radius,x=p&&p.some(function(t){return 0!==t});n=v,r=m,y=y,b=b,x=x&&p.map(function(t){return $o(t,0,Math.min(Math.abs(v)/2,Math.abs(m)/2))}),f=x?(o=(p=0<n?1:-1)+(k=0<r?1:-1)!=0?1:0,[["M",p*(i=x[0])+y,b],["L",n-p*(w=x[1])+y,b],w?["A",w,w,0,0,o,n+y,k*w+b]:null,["L",n+y,r-k*(w=x[2])+b],w?["A",w,w,0,0,o,n+y-p*w,r+b]:null,["L",y+p*(w=x[3]),r+b],w?["A",w,w,0,0,o,y,r+b-k*w]:null,["L",y,k*i+b],i?["A",i,i,0,0,o,p*i+y,b]:null,["Z"]].filter(function(t){return t})):[["M",y,b],["L",y+n,b],["L",y+n,b+r],["L",y,b+r],["Z"]];break;case _.PATH:var x=t.parsedStyle.path,w=x.curve,k=x.zCommandIndexes;f=[].concat(w),k.forEach(function(t,e){f.splice(t+e+1,0,["Z"])})}if(f.length)return a=f,s=t,(c=void 0===(c=e)?!0:c)&&(l=s.getLocalTransform()),e=(s=s.parsedStyle).defX,u=void 0===e?0:e,h=void 0===(e=s.defY)?0:e,a.reduce(function(t,e){var n,r,i,o="";return"M"===e[0]||"L"===e[0]?(i=E(e[1]-u,e[2]-h,0),c&&Wi(i,i,l),o=""+e[0]+i[0]+","+i[1]):"Z"===e[0]?o=e[0]:"C"===e[0]?(i=E(e[1]-u,e[2]-h,0),n=E(e[3]-u,e[4]-h,0),r=E(e[5]-u,e[6]-h,0),c&&(Wi(i,i,l),Wi(n,n,l),Wi(r,r,l)),o=""+e[0]+i[0]+","+i[1]+","+n[0]+","+n[1]+","+r[0]+","+r[1]):"A"===e[0]&&(i=E(e[6]-u,e[7]-h,0),c&&Wi(i,i,l),o=""+e[0]+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+","+i[0]+","+i[1]),t+o},"")}function Xc(t,e,n){var r=!1,i=!1,e=!!e&&!e.isNone,n=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=e,i=n):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(i=r=!0),[r,i]}function $c(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)}function Zc(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)}function Kc(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)}function Jc(t){return al.setup(this,t),al.create(t)}function Qc(t){return cl.setup(this,t),cl.create(t)}function tl(){throw new Error("tapAsync is not supported on a SyncHook")}function el(){throw new Error("tapPromise is not supported on a SyncHook")}function nl(t){return ul.setup(this,t),ul.create(t)}function rl(){throw new Error("tapAsync is not supported on a SyncWaterfallHook")}function il(){throw new Error("tapPromise is not supported on a SyncWaterfallHook")}function ol(t){return fl.setup(this,t),fl.create(t)}var c=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=void 0),this.name=void 0,this.taps=void 0,this.promise=void 0,this._promise=void 0,this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=$c,this.call=$c,this._callAsync=Zc,this.callAsync=Zc,this._promise=Kc,this.promise=Kc,this._x=void 0}var e=t.prototype;return e.compile=function(t){throw new Error("Abstract: should be overridden")},e._createCall=function(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})},e._tap=function(t,e,n){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)},e.tap=function(t,e){this._tap("sync",t,e)},e.tapAsync=function(t,e){this._tap("async",t,e)},e.tapPromise=function(t,e){this._tap("promise",t,e)},e._runRegisterInterceptors=function(t){for(var e=is(this.interceptors);!(n=e()).done;){var n=n.value;!n.register||void 0!==(n=n.register(t))&&(t=n)}return t},e.withOptions=function(e){function n(t){return Object.assign({},e,"string"==typeof t?{name:t}:t)}var r=this;return{name:this.name,tap:function(t,e){return r.tap(n(t),e)},tapAsync:function(t,e){return r.tapAsync(n(t),e)},tapPromise:function(t,e){return r.tapPromise(n(t),e)},isUsed:function(){return r.isUsed()},withOptions:function(t){return r.withOptions(n(t))}}},e.isUsed=function(){return 0<this.taps.length||0<this.interceptors.length},e._resetCompilation=function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise},e._insert=function(t){this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));for(var e,n=0,r=("number"==typeof t.stage&&(n=t.stage),this.taps.length);0<r;){r--;var i=this.taps[r],o=(this.taps[r+1]=i).stage||0;if(e){if(e.has(i.name)){e.delete(i.name);continue}if(0<e.size)continue}if(!(n<o)){r++;break}}this.taps[r]=t},t}(),Mt=function(){function t(t){this.config=t,this.options=void 0,this._args=void 0}var e=t.prototype;return e.create=function(t){var e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"throw "+t+";\n"},onResult:function(t){return"return "+t+";\n"},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"_callback("+t+");\n"},onResult:function(t){return"_callback(null, "+t+");\n"},onDone:function(){return"_callback();\n"}}));break;case"promise":var n=!1,r=this.contentWithInterceptors({onError:function(t){return n=!0,"_error("+t+");\n"},onResult:function(t){return"_resolve("+t+");\n"},onDone:function(){return"_resolve();\n"}}),i="",i=(i+='"use strict";\n')+this.header()+"return new Promise((function(_resolve, _reject) {\n";n&&(i+="var _sync = true;\nfunction _error(_err) {\nif(_sync)\n_resolve(Promise.resolve().then((function() { throw _err; })));\nelse\n_reject(_err);\n};\n"),i+=r,n&&(i+="_sync = false;\n"),i+="}));\n",e=new Function(this.args(),i)}return this.deinit(),e},e.setup=function(t,e){t._x=e.taps.map(function(t){return t.fn})},e.init=function(t){this.options=t,this._args=t.args.slice()},e.deinit=function(){this.options=void 0,this._args=void 0},e.contentWithInterceptors=function(t){var r=this;if(0<this.options.interceptors.length){for(var i=t.onError,o=t.onResult,n=t.onDone,e="",a=0;a<this.options.interceptors.length;a++){var s=this.options.interceptors[a];s.call&&(e+=this.getInterceptor(a)+".call("+this.args({before:s.context?"_context":void 0})+");\n")}return e+=this.content(Object.assign(t,{onError:i&&function(t){for(var e="",n=0;n<r.options.interceptors.length;n++)r.options.interceptors[n].error&&(e+=r.getInterceptor(n)+".error("+t+");\n");return e+=i(t)},onResult:o&&function(t){for(var e="",n=0;n<r.options.interceptors.length;n++)r.options.interceptors[n].result&&(e+=r.getInterceptor(n)+".result("+t+");\n");return e+=o(t)},onDone:n&&function(){for(var t="",e=0;e<r.options.interceptors.length;e++)r.options.interceptors[e].done&&(t+=r.getInterceptor(e)+".done();\n");return t+=n()}}))}return this.content(t)},e.header=function(){var t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",0<this.options.interceptors.length&&(t+="var _taps = this.taps;\nvar _interceptors = this.interceptors;\n"),t},e.needContext=function(){for(var t,e=is(this.options.taps);!(t=e()).done;)if(t.value.context)return!0;return!1},e.callTap=function(t,e){for(var n=e.onError,r=e.onResult,i=e.onDone,o=e.rethrowIfPossible,a="",s=!1,c=0;c<this.options.interceptors.length;c++){var l=this.options.interceptors[c];l.tap&&(s||(a+="var _tap"+t+" = "+this.getTap(t)+";\n",s=!0),a+=this.getInterceptor(c)+".tap("+(l.context?"_context, ":"")+"_tap"+t+");\n")}a+="var _fn"+t+" = "+this.getTapFn(t)+";\n";var u=this.options.taps[t];switch(u.type){case"sync":o||(a=a+"var _hasError"+t+" = false;\ntry {\n"),a+=r?"var _result"+t+" = _fn"+t+"("+this.args({before:u.context?"_context":void 0})+");\n":"_fn"+t+"("+this.args({before:u.context?"_context":void 0})+");\n",o||(a=(a=(a=a+"} catch(_err) {\n_hasError"+t+" = true;\n")+n("_err"))+"}\nif(!_hasError"+t+") {\n"),r&&(a+=r("_result"+t)),i&&(a+=i()),o||(a+="}\n");break;case"async":var h=(h=(h="")+(r?"(function(_err"+t+", _result"+t+") {\n":"(function(_err"+t+") {\n")+("if(_err"+t+") {\n"))+n("_err"+t)+"} else {\n";r&&(h+=r("_result"+t)),i&&(h+=i()),a+="_fn"+t+"("+this.args({before:u.context?"_context":void 0,after:h=h+"}\n"+"})"})+");\n";break;case"promise":a=(a=(a=(a+="var _hasResult"+t+" = false;\n")+("var _promise"+t+" = _fn"+t+"("+this.args({before:u.context?"_context":void 0})+");\n"))+("if (!_promise"+t+" || !_promise"+t+".then)\n")+("  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise"+t+" + ')');\n"))+("_promise"+t+".then((function(_result"+t+") {\n")+("_hasResult"+t+" = true;\n"),r&&(a+=r("_result"+t)),i&&(a+=i()),a=(a=a+("}), function(_err"+t+") {\n")+("if(_hasResult"+t+") throw _err"+t+";\n"))+n("_err"+t)+"});\n"}return a},e.callTapsSeries=function(t){var o=this,a=t.onError,s=t.onResult,e=t.resultReturns,c=t.onDone,n=t.doneReturns,l=t.rethrowIfPossible;if(0===this.options.taps.length)return c();for(var u=this.options.taps.findIndex(function(t){return"sync"!==t.type}),h=e||n,f="",d=c,p=0,r=function(t){function e(t){return t?"":c()}var n=t,r=(d!==c&&("sync"!==o.options.taps[n].type||20<p++)&&(p=0,f=(f+="function _next"+n+"() {\n")+d()+"}\n",d=function(){return(h?"return ":"")+"_next"+n+"();\n"}),d),i=o.callTap(n,{onError:function(t){return a(n,t,r,e)},onResult:s&&function(t){return s(n,t,r,e)},onDone:!s&&r,rethrowIfPossible:l&&(u<0||n<u)});d=function(){return i}},i=this.options.taps.length-1;0<=i;i--)r(i);return f+=d()},e.callTapsLooping=function(t){var e=t.onError,n=t.onDone,t=t.rethrowIfPossible;if(0===this.options.taps.length)return n();var o=this.options.taps.every(function(t){return"sync"===t.type}),r="";o||(r+="var _looper = (function() {\nvar _loopAsync = false;\n");for(var r=(r+="var _loop;\n")+"do {\n"+"_loop = false;\n",i=0;i<this.options.interceptors.length;i++){var a=this.options.interceptors[i];a.loop&&(r+=this.getInterceptor(i)+".loop("+this.args({before:a.context?"_context":void 0})+");\n")}return r=r+this.callTapsSeries({onError:e,onResult:function(t,e,n,r){var i=(i="")+("if("+e+" !== undefined) {\n")+"_loop = true;\n";return o||(i+="if(_loopAsync) _looper();\n"),i=(i=i+r(!0)+"} else {\n")+n()+"}\n"},onDone:n&&function(){var t="";return(t+="if(!_loop) {\n")+n()+"}\n"},rethrowIfPossible:t&&o})+"} while(_loop);\n",o||(r+="_loopAsync = true;\n});\n_looper();\n"),r},e.callTapsParallel=function(t){var e=this,o=t.onError,a=t.onResult,s=t.onDone,c=t.rethrowIfPossible,t=t.onTap,l=void 0===t?function(t,e){return e()}:t;if(this.options.taps.length<=1)return this.callTapsSeries({onError:o,onResult:a,onDone:s,rethrowIfPossible:c});for(var u="",n=(u=(u+="do {\n")+("var _counter = "+this.options.taps.length+";\n"),s&&(u=(u+="var _done = (function() {\n")+s()+"});\n"),function(n){function r(){return s?"if(--_counter === 0) _done();\n":"--_counter;"}function i(t){return t||!s?"_counter = 0;\n":"_counter = 0;\n_done();\n"}u=(u+="if(_counter <= 0) break;\n")+l(n,function(){return e.callTap(n,{onError:function(t){var e="";return(e+="if(_counter > 0) {\n")+o(n,t,r,i)+"}\n"},onResult:a&&function(t){var e="";return(e+="if(_counter > 0) {\n")+a(n,t,r,i)+"}\n"},onDone:!a&&r,rethrowIfPossible:c})},r,i)}),r=0;r<this.options.taps.length;r++)n(r);return u+="} while(false);\n"},e.args=function(t){var t=void 0===t?{}:t,e=t.before,t=t.after,n=this._args;return e&&(n=[e].concat(n)),0===(n=t?n.concat(t):n).length?"":n.join(", ")},e.getTapFn=function(t){return"_x["+t+"]"},e.getTap=function(t){return"_taps["+t+"]"},e.getInterceptor=function(t){return"_interceptors["+t+"]"},t}(),al=new(function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.content=function(t){var i=t.onError,t=t.onDone;return this.callTapsParallel({onError:function(t,e,n,r){return i(e)+r(!0)},onDone:t})},e}(Mt)),sl=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).compile=Jc,t._call=void 0,t.call=void 0,t}return b(t,n),t}(c),cl=new(function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.content=function(t){var i=this,o=t.onError,e=t.onResult;return t.onDone,this.callTapsSeries({onError:function(t,e,n,r){return o(e)+r(!0)},onResult:function(t,e,n){var r="";return(r+="if("+e+" !== undefined) {\n")+(i._args[0]+" = "+e+";\n")+"}\n"+n()},onDone:function(){return e(i._args[0])}})},e}(Mt)),ll=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).compile=Qc,t._call=void 0,t.call=void 0,t}return b(t,n),t}(c),ul=new(function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.content=function(t){var n=t.onError,e=t.onDone,t=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onDone:e,rethrowIfPossible:t})},e}(Mt)),hl=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).tapAsync=tl,t.tapPromise=el,t.compile=nl,t}return b(t,n),t}(c),fl=new(function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.content=function(t){var i=this,n=t.onError,e=t.onResult,r=t.resultReturns,t=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onResult:function(t,e,n){var r="";return(r+="if("+e+" !== undefined) {\n")+(i._args[0]+" = "+e+";\n")+"}\n"+n()},onDone:function(){return e(i._args[0])},doneReturns:r,rethrowIfPossible:t})},e}(Mt)),dl=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).tapAsync=rl,t.tapPromise=il,t.compile=ol,t}return b(t,n),t}(hl),pl=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];var yl=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,gl=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,vl=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ml=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;var bl={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},xl=Yo(function(t){t="angular"===t.type?Number(t.value):bl[t.value]||0;return Ks(t,"deg")}),wl=Yo(function(t){var e,n=50,r=50,i="%",o="%";return"position"===(null==t?void 0:t.type)&&(e=(t=t.value).x,t=t.y,"position-keyword"===(null==e?void 0:e.type)&&("left"===e.value?n=0:"center"===e.value?n=50:"right"===e.value?n=100:"top"===e.value?r=0:"bottom"===e.value&&(r=100)),"position-keyword"===(null==t?void 0:t.type)&&("left"===t.value?n=0:"center"===t.value?r=50:"right"===t.value?n=100:"top"===t.value?r=0:"bottom"===t.value&&(r=100)),"px"!==(null==e?void 0:e.type)&&"%"!==(null==e?void 0:e.type)&&"em"!==(null==e?void 0:e.type)||(i=null==e?void 0:e.type,n=Number(e.value)),"px"!==(null==t?void 0:t.type)&&"%"!==(null==t?void 0:t.type)&&"em"!==(null==t?void 0:t.type)||(o=null==t?void 0:t.type,r=Number(t.value))),{cx:Ks(n,i),cy:Ks(r,o)}}),kl=Yo(function(t){if(-1<t.indexOf("linear")||-1<t.indexOf("radial"))return kc(t).map(function(t){for(var e=t.type,n=t.orientation,t=t.colorStops,r=t,i=r.length,o=(r[i-1].length=null!=(f=r[i-1].length)?f:{type:"%",value:"100"},1<i&&(r[0].length=null!=(f=r[0].length)?f:{type:"%",value:"0"}),0),a=Number(r[0].length.value),s=1;s<i;s++){var c,l=null==(c=r[s].length)?void 0:c.value;if(!T(l)&&!T(a)){for(var u=1;u<s-o;u++)r[o+u].length={type:"%",value:""+(a+(Number(l)-a)*u/(s-o))};o=s,a=Number(l)}}var h,f=t.map(function(t){return{offset:Ks(t.length.value,"%"),color:(e=(t=t).type,t=t.value,"hex"===e?"#"+t:"literal"===e?t:"rgb"===e?"rgb("+t.join(",")+")":"rgba("+t.join(",")+")")};var e});return"linear-gradient"===e?new hs(ls.LinearGradient,{angle:n?xl(n):zs,steps:f}):"radial-gradient"===e&&"shape"===(n=n||[{type:"shape",value:"circle"}])[0].type&&"circle"===n[0].value?(e=(t=wl(n[0].at)).cx,t=t.cy,n[0].style&&(h=(n=n[0].style).type,n=n.value,h="extent-keyword"===h?Is(n):Ks(n,h)),new hs(ls.RadialGradient,{cx:e,cy:t,size:h,steps:f})):void 0});var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=yl.exec(t);if(n)return r=(null==(r=n[2].match(ml))?void 0:r.map(function(t){return t.split(":")}))||[],[new hs(ls.LinearGradient,{angle:Ks(parseFloat(n[1]),"deg"),steps:r.map(function(t){var e=t[0],t=t[1];return{offset:Ks(100*Number(e),"%"),color:t}})})]}else if("r"===e){n=function(t){var t=gl.exec(t);if(t)return t=(null==(t=t[4].match(ml))?void 0:t.map(function(t){return t.split(":")}))||[],{cx:Ks(50,"%"),cy:Ks(50,"%"),steps:t.map(function(t){var e=t[0],t=t[1];return{offset:Ks(100*Number(e),"%"),color:t}})};return null}(t);if(n&&!Xo(n))return[new hs(ls.RadialGradient,n)]}else if("p"===e){var r=t;if(r=vl.exec(r)){var i=r[1],r=r[2];switch(i){case"a":i="repeat";break;case"x":i="repeat-x";break;case"y":i="repeat-y";break;default:i="no-repeat"}return{image:r,repetition:i}}return null}});function El(t){return Vo(t)&&t.image}var _l=Yo(function(t){var e;return El(t)?Qa({repetition:"repeat"},t):"transparent"===(t=T(t)?"":t)?$s:kl(t="currentColor"===t?"black":t)||(e=[0,0,0,0],null!==(t=fa(t))&&(e[0]=t.r||0,e[1]=t.g||0,e[2]=t.b||0,e[3]=t.opacity),Zs.apply(void 0,e))});function Ml(t,e){if(t instanceof Gs&&e instanceof Gs)return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round($o(e[n],0,255));return e[3]=$o(e[3],0,1),"rgba("+e.join(",")+")"}]}var Sl,Tl=function(){function g(t,e){this.center=Ci(),this.halfExtents=Ci(),this.min=Ci(),this.max=Ci(),this.update(t,e)}g.isEmpty=function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]};var t=g.prototype;return t.update=function(t,e){t&&Ii(this.center,t),e&&Ii(this.halfExtents,e||E(0,0,0)),this.min=Yi(this.min,this.center,this.halfExtents),this.max=Ri(this.max,this.center,this.halfExtents)},t.setMinMax=function(t,e){Ri(this.center,e,t),Bi(this.center,this.center,.5),Yi(this.halfExtents,e,t),Bi(this.halfExtents,this.halfExtents,.5),Ii(this.min,t),Ii(this.max,e)},t.getMin=function(){return this.min},t.getMax=function(){return this.max},t.add=function(t){var e,n,r,i,o,a,s,c,l,u,h,f,d,p,y;g.isEmpty(t)||(g.isEmpty(this)?this.setMinMax(t.getMin(),t.getMax()):(n=(e=this.center)[0],p=e[1],o=e[2],i=(r=this.halfExtents)[0],h=r[1],a=r[2],c=(f=t.center)[0],y=f[1],f=f[2],l=(t=t.halfExtents)[0],(d=y-(u=t[1]))<(s=p-h)&&(s=d),(d=p+h)<(p=y+u)&&(d=p),(y=f-(h=t[2]))<(u=o-a)&&(u=y),(p=o+a)<(t=f+h)&&(p=t),e[0]=.5*((o=(y=c-l)<(o=n-i)?y:o)+(a=(a=n+i)<(f=c+l)?f:a)),e[1]=.5*(s+d),e[2]=.5*(u+p),r[0]=.5*(a-o),r[1]=.5*(d-s),r[2]=.5*(p-u),this.min[0]=o,this.min[1]=s,this.min[2]=u,this.max[0]=a,this.max[1]=d,this.max[2]=p))},t.setFromTransformedAABB=function(t,e){var n=this.center,r=this.halfExtents,i=t.center,t=t.halfExtents,o=e[0],a=e[4],s=e[8],c=e[1],l=e[5],u=e[9],h=e[2],f=e[6],d=e[10],p=Math.abs(o),y=Math.abs(a),g=Math.abs(s),v=Math.abs(c),m=Math.abs(l),b=Math.abs(u),x=Math.abs(h),w=Math.abs(f),k=Math.abs(d);ji(n,e[12]+o*i[0]+a*i[1]+s*i[2],e[13]+c*i[0]+l*i[1]+u*i[2],e[14]+h*i[0]+f*i[1]+d*i[2]),ji(r,p*t[0]+y*t[1]+g*t[2],v*t[0]+m*t[1]+b*t[2],x*t[0]+w*t[1]+k*t[2]),this.min=Yi(this.min,n,r),this.max=Ri(this.max,n,r)},t.intersects=function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),t=t.getMin();return n[0]<=r[0]&&e[0]>=t[0]&&n[1]<=r[1]&&e[1]>=t[1]&&n[2]<=r[2]&&e[2]>=t[2]},t.intersection=function(t){var e,n,r,i;return this.intersects(t)?(e=new g,i=Ci(),n=this.getMin(),r=t.getMin(),i[0]=Math.max(n[0],r[0]),i[1]=Math.max(n[1],r[1]),i[2]=Math.max(n[2],r[2]),n=i,r=Ci(),i=this.getMax(),t=t.getMax(),r[0]=Math.min(i[0],t[0]),r[1]=Math.min(i[1],t[1]),r[2]=Math.min(i[2],t[2]),e.setMinMax(n,r),e):null},t.containsPoint=function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])},t.getNegativeFarPoint=function(t){return 273===t.pnVertexFlag?Ii(Ci(),this.min):272===t.pnVertexFlag?E(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?E(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?E(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?E(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?E(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?E(this.max[0],this.max[1],this.min[2]):E(this.max[0],this.max[1],this.max[2])},t.getPositiveFarPoint=function(t){return 273===t.pnVertexFlag?Ii(Ci(),this.max):272===t.pnVertexFlag?E(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?E(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?E(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?E(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?E(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?E(this.min[0],this.min[1],this.max[2]):E(this.min[0],this.min[1],this.min[2])},g}(),Ol=function(){function t(t,e){this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=e||E(0,1,0),this.updatePNVertexFlag()}var e=t.prototype;return e.updatePNVertexFlag=function(){this.pnVertexFlag=(Number(0<=this.normal[0])<<8)+(Number(0<=this.normal[1])<<4)+Number(0<=this.normal[2])},e.distanceToPoint=function(t){return zi(t,this.normal)-this.distance},e.normalize=function(){var t=1/Ui(this.normal);Bi(this.normal,this.normal,t),this.distance*=t},e.intersectsLine=function(t,e,n){var r,i,o=this.distanceToPoint(t),o=o/(o-this.distanceToPoint(e)),a=0<=o&&o<=1;return a&&n&&(n=n,e=e,o=o,r=(t=t)[0],i=t[1],t=t[2],n[0]=r+o*(e[0]-r),n[1]=i+o*(e[1]-i),n[2]=t+o*(e[2]-t)),a},t}(),Al=((l=Sl=Sl||{})[l.OUTSIDE=4294967295]="OUTSIDE",l[l.INSIDE=0]="INSIDE",l[l.INDETERMINATE=2147483647]="INDETERMINATE",function(){function t(t){if(this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new Ol)}return t.prototype.extractFromVPMatrix=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],h=t[10],f=t[11],d=t[12],p=t[13],y=t[14],t=t[15];ji(this.planes[0].normal,i-e,c-o,f-l),this.planes[0].distance=t-d,ji(this.planes[1].normal,i+e,c+o,f+l),this.planes[1].distance=t+d,ji(this.planes[2].normal,i+n,c+a,f+u),this.planes[2].distance=t+p,ji(this.planes[3].normal,i-n,c-a,f-u),this.planes[3].distance=t-p,ji(this.planes[4].normal,i-r,c-s,f-h),this.planes[4].distance=t-y,ji(this.planes[5].normal,i+r,c+s,f+h),this.planes[5].distance=t+y,this.planes.forEach(function(t){t.normalize(),t.updatePNVertexFlag()})},t}()),Pl=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var e=t.prototype;return e.clone=function(){return new t(this.x,this.y)},e.copyFrom=function(t){this.x=t.x,this.y=t.y},t}(),Nl=function(){function t(t,e,n,r){this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,this.x=t,this.y=e,this.width=n,this.height=r,this.left=t,this.right=t+n,this.top=e,this.bottom=e+r}return t.prototype.toJSON=function(){},t}();function Cl(t,e){if(T(e))return Ks(0,"px");if(e=(""+e).trim().toLowerCase(),isFinite(Number(e))){if(0<="px".search(t))return Ks(Number(e),"px");if(0<="deg".search(t))return Ks(Number(e),"deg")}var n=[],r=(e=e.replace(t,function(t){return n.push(t),"U"+t}),"U("+t.source+")");return n.map(function(t){return Ks(Number(e.replace(new RegExp("U"+t,"g"),"").replace(new RegExp(r,"g"),"*0")),t)})[0]}var Ll=Yo(function(t){return Cl(new RegExp("px","g"),t)}),Il=(Yo(function(t){return Cl(new RegExp("%","g"),t)}),Yo(function(t){return Zo(t)||isFinite(Number(t))?Ks(Number(t),"px"):Cl(new RegExp("px|%|em|rem","g"),t)})),jl=Yo(function(t){return Cl(new RegExp("deg|rad|grad|turn","g"),t)});function Rl(t){var e=0;return t.unit===m.kDegrees?e=t.value:t.unit===m.kRadians?e=uc(Number(t.value)):t.unit===m.kTurns&&(e=360*Number(t.value)),e}function Dl(t){return Xo(t)?t.split(" ").map(function(t){return Il(t)}):t.map(function(t){return Il(t.toString())})}function Bl(t,e,n){var r;return t.unit===m.kPixels?Number(t.value):t.unit===m.kPercentage&&n?(n=n.nodeName===_.GROUP?n.getLocalBounds():n.getGeometryBounds(),r=0,Tl.isEmpty(n)||(r=2*n.halfExtents[e]),Number(t.value)/100*r):0}var Fl=function(t){return Cl(/deg|rad|grad|turn|px|%/g,t)},zl=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Gl(t){if("none"!==(t=(t=void 0===t?"":t).toLowerCase().trim()))for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,-1<zl.indexOf(e[1])&&r.push({name:e[1],params:e[2].split(" ").map(function(t){return Fl(t)||_l(t)})}),n.lastIndex===t.length)return r}return[]}function Wl(t){return t.toString()}var Hl=Yo(function(t){return"number"==typeof t?Ks(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Ks(Number(t)):Ks(0)});function Vl(t,e){return[t,e,Wl]}function Yl(n,r){return function(t,e){return[t,e,function(t){return Wl($o(t,n,r))}]}}function Ul(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}Yo(function(t){return(Xo(t)?t.split(" "):t).map(Hl)});var ql=function(e){if(""===e||Array.isArray(e)&&0===e.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:[],totalLength:0,zCommandIndexes:[],rect:{x:0,y:0,width:0,height:0}};var n;try{n=Ao(e)}catch(t){n=Ao(""),console.error("[g]: Invalid SVG Path definition: "+e)}var t,e=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(n),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];"M"===a?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):"Z"===a?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return 0<r.length&&n.push(r),{polygons:e,polylines:n}}(n),i=r.polygons,r=r.polylines,o=Ro(n,!0),a=o[0],o=o[1],s=function(t){for(var e=[],n=null,r=0,i=t.length,o=0;o<i;o++){var a=t[o],s=t[o+1],c=a[0],l={command:c,prePoint:n,params:a,startTangent:null,endTangent:null},u=("M"===c&&(r=o),a.length),n=[a[u-2],a[u-1]],u=(l.currentPoint=n,e[r]&&(u=n,h=e[r].currentPoint,u[0]===h[0]&&u[1]===h[1]&&(e[r].prePoint=l.prePoint)),s?[s[s.length-2],s[s.length-1]]:null),h=(l.nextPoint=u,l.prePoint);"C"===c&&(s=[a[1],a[2]],u=[a[3],a[4]],l.startTangent=[h[0]-s[0],h[1]-s[1]],l.endTangent=[n[0]-u[0],n[1]-u[1]],0===l.startTangent[0]&&0===l.startTangent[1]&&(l.startTangent=[s[0]-u[0],s[1]-u[1]]),0===l.endTangent[0]&&0===l.endTangent[1]&&(l.endTangent=[u[0]-s[0],u[1]-s[1]])),e.push(l)}return e}(a),c=(l=n)?(u=(h=(l=Go(l,void 0,M(M({},h),{length:!1}))).min).x,h=h.y,{width:f=(c=(l=l.max).x)-u,height:t=(l=l.y)-h,x:u,y:h,x2:c,y2:l,cx:u+f/2,cy:h+t/2,cz:Math.max(f,t)+Math.min(f,t)/2}):{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0},l=c.x,u=c.y,h=c.width,f=c.height;return{absolutePath:n,hasArc:e,segments:s,polygons:i,polylines:r,curve:a,totalLength:0,zCommandIndexes:o,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(h)?h:0,height:Number.isFinite(f)?f:0}}},Xl=Yo(ql);function $l(t,e){t=(Xo(t)?Xl:ql)(t);return e&&(e.parsedStyle.defX=t.rect.x,e.parsedStyle.defY=t.rect.y),t}function Zl(t,e,n){var r,i,o,a,s,c,l,u,h,t=t.curve,e=e.curve,f=[t,e],e=Wo((f=t.length!==e.length?function t(e,n,r){var i,e=Ho(e),n=Ho(n),o=e.length,a=n.length,s=e.filter(function(t){return t.l}).length,c=n.filter(function(t){return t.l}).length,s=e.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/s||0,c=n.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/c||0,l=r||Math.max(o,a),u=[s,c],h=[l-o,l-a],r=[e,n].map(function(t,n){return t.l===l?t.map(function(t){return t.s}):t.map(function(t,e){return i=e&&h[n]&&t.l>=u[n],h[n]-=i?1:0,i?t.ss:[t.s]}).flat()});return r[0].length===r[1].length?r:t(r[0],r[1],l)}(t,e):f)[0])!==Wo(f[1])?(r=f[0],t=r.slice(1).map(function(t,e,n){return(e?n[e-1].slice(-2):r[0].slice(1)).concat(t.slice(1))}).map(function(n){return n.map(function(t,e){return n[n.length-e-2*(1-e%2)]})}).reverse(),[["M"].concat(t[0].slice(0,2))].concat(t.map(function(t){return["C"].concat(t.slice(2))}))):fo(f[0]);return[e,(i=f[1],o=e,l=i.length-1,u=[],h=0,s=(a=i).length,c=s-1,(t=a.map(function(t,r){return a.map(function(t,e){var n=r+e;return 0===e||a[n]&&"M"===a[n][0]?(e=a[n],["M"].concat(e.slice(-2))):(s<=n&&(n-=c),a[n])})})).forEach(function(t,n){i.slice(1).forEach(function(t,e){h+=Co(i[(n+e)%l].slice(-2),o[e%l].slice(-2))}),u[n]=h,h=0}),t[u.indexOf(Math.min.apply(null,u))]),function(t){return t}]}function Kl(t,e){var n,r,i=Xo(t)?t.split(" ").map(function(t){var t=t.split(","),e=t[0],t=t[1];return[Number(e),Number(t)]}):t,o=[],a=0,s=Ca.length(i),t=(i.forEach(function(t,e){i[e+1]&&((n=[0,0])[0]=a/s,r=Ma.length(t[0],t[1],i[e+1][0],i[e+1][1]),a+=r,n[1]=a/s,o.push(n))}),Math.min.apply(Math,i.map(function(t){return t[0]}))),c=Math.min.apply(Math,i.map(function(t){return t[1]}));return e&&(e.parsedStyle.defX=t,e.parsedStyle.defY=c),{points:i,totalLength:s,segments:o}}var Jl=null;function Ql(t){return function(e){var n=0;return t.map(function(t){return t===Jl?e[n++]:t})}}function tu(t){return t}var eu={matrix:["NNNNNN",[Jl,Jl,0,0,Jl,Jl,0,0,0,0,1,0,Jl,Jl,0,1],tu],matrix3d:["NNNNNNNNNNNNNNNN",tu],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Ql([Jl,Jl,J(1)]),tu],scalex:["N",Ql([Jl,J(1),J(1)]),Ql([Jl,J(1)])],scaley:["N",Ql([J(1),Jl,J(1)]),Ql([J(1),Jl])],scalez:["N",Ql([J(1),J(1),Jl])],scale3d:["NNN",tu],skew:["Aa",null,tu],skewx:["A",null,Ql([Jl,zs])],skewy:["A",null,Ql([zs,Jl])],translate:["Tt",Ql([Jl,Jl,Fs]),tu],translatex:["T",Ql([Jl,Fs,Fs]),Ql([Jl,Fs])],translatey:["T",Ql([Fs,Jl,Fs]),Ql([Fs,Jl])],translatez:["L",Ql([Fs,Fs,Jl])],translate3d:["TTL",tu]};function nu(t){if("none"!==(t=(t||"none").toLowerCase().trim()))for(var e,n=/\s*(\w+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];var i=e.index+e[0].length,o=e[1],a=eu[o];if(!a)return[];var s=e[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var h=s[u],f=c[u],d=void 0;if(void 0===(d=h?{A:function(t){return"0"===t.trim()?zs:jl(t)},N:Hl,T:Il,L:Ll}[f.toUpperCase()](h):{a:zs,n:l[0],t:Fs}[f]))return[];l.push(d)}if(r.push({t:o,d:l}),n.lastIndex===t.length)return r}return[]}function ru(t){switch(t.t){case"rotatex":return i=lc(Rl(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=lc(Rl(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=lc(Rl(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=lc(Rl(t.d[3])),o=e*e+n*n+r*r,o=(0==o?(e=1,r=n=0):1!=o&&(e/=o=Math.sqrt(o),n/=o,r/=o),Math.sin(i/2)),a=o*Math.cos(i/2),o=o*o;return[1-2*(n*n+r*r)*o,2*(e*n*o+r*a),2*(e*r*o-n*a),0,2*(e*n*o-r*a),1-2*(e*e+r*r)*o,2*(n*r*o+e*a),0,2*(e*r*o+n*a),2*(n*r*o-e*a),1-2*(e*e+n*n)*o,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":a=lc(Rl(t.d[0])),o=lc(Rl(t.d[1]));return[1,Math.tan(o),0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=lc(Rl(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=lc(Rl(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Bl(t.d[0],0,null)||0,n=Bl(t.d[1],0,null)||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Bl(t.d[0],0,null)||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=Bl(t.d[0],0,null)||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=Bl(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Bl(t.d[0],0,null)||0,n=Bl(t.d[1],0,null)||0,r=Bl(t.d[2],0,null)||0,1];case"perspective":o=Bl(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,o?-1/o:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(t){return t.value})}}function iu(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function ou(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return mc(0===(t=t).length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(ru).reduce(iu),e,n,r,i,o),[[e,n,r,o,i]]}var au=function(t,e,n,r,i){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a=0;a<4;a++)o[a][3]=i[a];for(var s=0;s<3;s++)for(var c=0;c<3;c++)o[3][s]+=t[c]*o[c][s];var l=r[0],u=r[1],h=r[2],r=r[3],f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],h=(f[0][0]=1-2*(u*u+h*h),f[0][1]=2*(l*u-h*r),f[0][2]=2*(l*h+u*r),f[1][0]=2*(l*u+h*r),f[1][1]=1-2*(l*l+h*h),f[1][2]=2*(u*h-l*r),f[2][0]=2*(l*h-u*r),f[2][1]=2*(u*h+l*r),f[2][2]=1-2*(l*l+u*u),o=su(o,f),[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);n[2]&&(h[2][1]=n[2],o=su(o,h)),n[1]&&(h[2][1]=0,h[2][0]=n[0],o=su(o,h)),n[0]&&(h[2][0]=0,h[1][0]=n[0],o=su(o,h));for(var d=0;d<3;d++)for(var p=0;p<3;p++)o[d][p]*=e[d];return 0==(r=o)[0][2]&&0==r[0][3]&&0==r[1][2]&&0==r[1][3]&&0==r[2][0]&&0==r[2][1]&&1==r[2][2]&&0==r[2][3]&&0==r[3][2]&&1==r[3][3]?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])};function su(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)n[r][i]+=e[r][o]*t[o][i];return n}function cu(t){return t.toFixed(6).replace(".000000","")}function lu(e,n){var r,i;return e.decompositionPair!==n&&(e.decompositionPair=n,r=ou(e)),n.decompositionPair!==e&&(n.decompositionPair=e,i=ou(n)),null===r[0]||null===i[0]?[[!1],[!0],function(t){return(t?n:e)[0].d}]:(r[0].push(0),i[0].push(1),[r,i,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e),i=(r=$o(r,-1,1),[]);if(1===r)i=t;else for(var o=Math.acos(r),a=+Math.sin(n*o)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}(r[0][3],i[0][3],t[5]);return au(t[0],t[1],t[2],e,t[4]).map(cu).join(",")}])}function uu(t){return t.replace(/[xy]/,"")}function hu(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var fu=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function du(r,i,t){var e=!1;if(!r.length||!i.length){r.length||(e=!0,r=i,i=[]);for(var n=0;n<r.length;n++)!function(t){var t=r[t],e=t.t,t=t.d,n="scale"===e.substring(0,5)?1:0;i.push({t:e,d:t.map(function(t){return"number"==typeof t?Ks(n):Ks(n,t.unit)})})}(n)}var o=[],a=[],s=[];if(r.length!==i.length)var c=lu(r,i),o=[c[0]],a=[c[1]],s=[["matrix",[c[2]]]];else for(var l=0;l<r.length;l++){var u=r[l].t,h=i[l].t,f=r[l].d,d=i[l].d,p=eu[u],y=eu[h],g=void 0;if(fu(u,h)){var v=lu([r[l]],[i[l]]);o.push(v[0]),a.push(v[1]),s.push(["matrix",[v[2]]])}else{if(u===h)g=u;else if(p[2]&&y[2]&&uu(u)===uu(h))g=uu(u),f=p[2](f),d=y[2](d);else{if(!p[1]||!y[1]||hu(u)!==hu(h)){v=lu(r,i);o=[v[0]],a=[v[1]],s=[["matrix",[v[2]]]];break}g=hu(u),f=p[1](f),d=y[1](d)}for(var m=[],b=[],x=[],w=0;w<f.length;w++){var k=function(t,e,n,r,i){void 0===i&&(i=0);var o="",a=t.value||0,s=e.value||0,c=As(t.unit),l=t.convertTo(c),c=e.convertTo(c);return l&&c?(a=l.value,s=c.value,o=ss(t.unit)):(Ps.isLength(t.unit)||Ps.isLength(e.unit))&&(a=Bl(t,i,n),s=Bl(e,i,n),o="px"),[a,s,function(t){return(t=r?Math.max(t,0):t)+o}]}(f[w],d[w],t,!1,w);m[w]=k[0],b[w]=k[1],x.push(k[2])}o.push(m),a.push(b),s.push([g,x])}}return e&&(c=o,o=a,a=c),[o,a,function(t){return t.map(function(t,n){t=t.map(function(t,e){return s[n][1][e](t)}).join(",");return"matrix"===s[n][0]&&16===t.split(",").length&&(s[n][0]="matrix3d"),"matrix3d"===s[n][0]&&6===t.split(",").length&&(s[n][0]="matrix"),s[n][0]+"("+t+")"}).join(" ")}]}var pu=Yo(function(t){var e;return Xo(t)?"text-anchor"===t?[Ks(0,"px"),Ks(0,"px")]:(1===(e=t.split(" ")).length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[Il(yu(e[0])),Il(yu(e[1]))]):[Ks(t[0]||0,"px"),Ks(t[1]||0,"px")]});function yu(t){return"center"===t?"50%":"left"===t||"top"===t?"0":"right"===t||"bottom"===t?"100%":t}var gu,S,vu,mu,bu,xu,wu,ku=function(){function t(){this.parser=jl,this.mixer=Vl}return t.prototype.calculator=function(t,e,n,r){return Rl(n)},t}(),ku=g([p({token:{token:Ys,named:x.ANGLE}})],ku),Eu=d.defineToken(""),_u=d.defineToken(""),Mu=function(){function t(){}return t.prototype.update=function(t,e){t=t.r;return{width:2*t,height:2*t}},t}(),Mu=g([p({token:{token:_u,named:_.CIRCLE}})],Mu),Su=function(){function t(){}return t.prototype.update=function(t,e){return{width:2*t.rx,height:2*t.ry}},t}(),Su=g([p({token:{token:_u,named:_.ELLIPSE}})],Su),Tu=function(){function t(){}return t.prototype.update=function(t){var e=t.x1,n=t.y1,r=t.x2,t=t.y2,i=Math.min(e,r),e=Math.max(e,r),r=Math.min(n,t);return{width:e-i,height:Math.max(n,t)-r}},t}(),Tu=g([p({token:{token:_u,named:_.LINE}})],Tu),Ou=function(){function t(){}return t.prototype.update=function(t){t=t.path.rect;return{width:t.width,height:t.height}},t}(),Ou=g([p({token:{token:_u,named:_.PATH}})],Ou),Au=function(){function t(){}return t.prototype.update=function(t){var t=t.points.points,e=Math.min.apply(Math,t.map(function(t){return t[0]})),n=Math.max.apply(Math,t.map(function(t){return t[0]})),r=Math.min.apply(Math,t.map(function(t){return t[1]}));return{width:n-e,height:Math.max.apply(Math,t.map(function(t){return t[1]}))-r}},t}(),Au=g([p({token:[{token:_u,named:_.POLYLINE},{token:_u,named:_.POLYGON}]})],Au),Pu=function(){function t(){}return t.prototype.update=function(t,e){var n=t.img,r=t.width,i=t.height,r=void 0===r?0:r,i=void 0===i?0:i;return n&&!Xo(n)&&(r||(r=n.width,t.width=r),i||(i=n.height,t.height=i)),{width:r,height:i}},t}(),Pu=g([p({token:[{token:_u,named:_.RECT},{token:_u,named:_.IMAGE},{token:_u,named:_.GROUP}]})],Pu),Nu=function(){function t(){this.canvas=void 0,this.context=void 0}var e=t.prototype;return e.getOrCreateCanvas=function(t){if(!this.canvas){if(t)this.canvas=t,this.context=this.canvas.getContext("2d");else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d"),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}this.canvas.width=10,this.canvas.height=10}return this.canvas},e.getOrCreateContext=function(t){return this.context||this.getOrCreateCanvas(t),this.context},t}(),Nu=g([p()],Nu),Cu={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Lu=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Iu=new RegExp(/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/.source+"|"+/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/.source+"|"+/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/.source+"|"+/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/.source),ju=new RegExp(/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/.source+"|"+/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/.source+"|"+/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/.source+"|"+/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/.source),Ru=function(){function t(t){var n=this;this.offscreenCanvas=void 0,this.cache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!ju.exec(e)&&!Iu.exec(t))},this.trimByKinsokuShorui=function(t){var e,n=[].concat(t),r=n[n.length-2];return r?(e=r[r.length-1],n[n.length-2]=r.slice(0,-1),n[n.length-1]=e+n[n.length-1],n):t},this.offscreenCanvas=t}var e=t.prototype;return e.measureFont=function(t,e){if(this.cache[t])return this.cache[t];for(var n={ascent:0,descent:0,fontSize:0},r=this.offscreenCanvas.getOrCreateCanvas(e),e=this.offscreenCanvas.getOrCreateContext(e),i=(e.font=t,Cu.MetricsString+Cu.BaselineSymbol),o=Math.ceil(e.measureText(i).width),a=Math.ceil(e.measureText(Cu.BaselineSymbol).width),s=Cu.HeightMultiplier*a,a=a*Cu.BaselineMultiplier|0,c=(r.width=o,r.height=s,e.fillStyle="#f00",e.fillRect(0,0,o,s),e.font=t,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(i,0,a),e.getImageData(0,0,o||1,s||1).data),r=c.length,l=4*o,u=0,h=0,f=!1,u=0;u<a;++u){for(var d=0;d<l;d+=4)if(255!==c[h+d]){f=!0;break}if(f)break;h+=l}for(n.ascent=a-u,h=r-l,f=!1,u=s;a<u;--u){for(var p=0;p<l;p+=4)if(255!==c[h+p]){f=!0;break}if(f)break;h-=l}return n.descent=u-a,n.fontSize=n.ascent+n.descent,this.cache[t]=n},e.measureText=function(t,e,n){var r=e.fontSize,i=e.wordWrap,o=e.lineHeight,a=e.lineWidth,s=e.textBaseline,c=e.textAlign,l=e.letterSpacing,u=e.leading,u=void 0===u?0:u,h=function(t){for(var e=t.fontSize,n=t.fontFamily,r=t.fontStyle,i=t.fontVariant,t=t.fontWeight,e=Zo(e)&&e+"px"||"16px",o=Xo(n)?n.split(","):[n],a=o.length-1;0<=a;a--){var s=o[a].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&pl.indexOf(s)<0&&(s='"'+s+'"'),o[a]=s}return r+" "+i+" "+t+" "+e+" "+o.join(",")}(e),f=this.measureFont(h,n),d=(0===f.fontSize&&(f.fontSize=r,f.ascent=r),this.offscreenCanvas.getOrCreateContext(n));d.font=h,e.isOverflowing=!1;for(var p=(i?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),y=new Array(p.length),g=0,v=0;v<p.length;v++){var m=d.measureText(p[v]).width+(p[v].length-1)*l;y[v]=m,g=Math.max(g,m)}var r=g+a,b=o||f.fontSize+a,i=Math.max(b,f.fontSize+a)+(p.length-1)*(b+u),x=0;return"middle"===s?x=-i/2:"bottom"===s||"alphabetic"===s||"ideographic"===s?x=-i:"top"!==s&&"hanging"!==s||(x=0),{font:h,width:r,height:i,lines:p,lineWidths:y,lineHeight:b+=u,maxLineWidth:g,fontProperties:f,lineMetrics:y.map(function(t,e){var n=0;return"center"===c?n-=t/2:"right"!==c&&"end"!==c||(n-=t),new Nl(n-a/2,x+e*b,t+a,b)})}},e.wordWrap=function(t,e,n){for(var r=this,i=e.wordWrapWidth,i=void 0===i?0:i,o=e.letterSpacing,a=e.maxLines,s=void 0===a?1/0:a,a=e.textOverflow,c=this.offscreenCanvas.getOrCreateContext(n),l=i+o,u="",h=("ellipsis"===a?u="...":a&&"clip"!==a&&(u=a),[]),f=0,d=0,p={},y=function(t){return r.getFromCache(t,o,p,c)},g=Array.from(u).reduce(function(t,e){return t+y(e)},0),v=Array.from(t),m=0;m<v.length;m++){var b=v[m],x=t[m-1],w=t[m+1],k=y(b);if(this.isNewline(b))d=0,h[++f]="";else{if(0<d&&l<d+k){if(s<=f+1){if(e.isOverflowing=!0,0<g&&g<=l){for(var E=0,_=0,M=0;M<h[f].length;M++){var S=y(h[f][M]);if(l<E+S+g){_=M;break}E+=S}h[f]=(h[f]||"").slice(0,_)+u}break}if(d=0,h[++f]="",this.isBreakingSpace(b))continue;this.canBreakInLastChar(b)||(h=this.trimToBreakable(h),d=this.sumTextWidthByCache(h[f]||"",p)),this.shouldBreakByKinsokuShorui(b,w)&&(h=this.trimByKinsokuShorui(h),d+=y(x||""))}d+=k,h[f]=(h[f]||"")+b}}return h.join("\n")},e.isBreakingSpace=function(t){return"string"==typeof t&&0<=Cu.BreakingSpaces.indexOf(t.charCodeAt(0))},e.isNewline=function(t){return"string"==typeof t&&0<=Cu.Newlines.indexOf(t.charCodeAt(0))},e.trimToBreakable=function(t){var e,t=[].concat(t),n=t[t.length-2],r=this.findBreakableIndex(n);return-1!==r&&n&&(e=n.slice(r,r+1),e=r+(this.isBreakingSpace(e)?0:1),t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,e)),t},e.canBreakInLastChar=function(t){return!t||!Lu.test(t)},e.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(t,e){if(n[e])return t+n[e];throw Error("cannot count the word without cache")},0)},e.findBreakableIndex=function(t){for(var e=t.length-1;0<=e;e--)if(!Lu.test(t[e]))return e;return-1},e.getFromCache=function(t,e,n,r){var i=n[t];return"number"!=typeof i&&(e=t.length*e,i=r.measureText(t).width+e,n[t]=i),i},t}(),Ru=g([p(),v(0,y(Nu))],Ru),Du=function(){function t(t){this.textService=void 0,this.textService=t}var e=t.prototype;return e.isReadyToMeasure=function(t,e){var n=t.text,r=t.textAlign,i=t.textBaseline,o=t.fontSize,a=t.fontStyle,s=t.fontWeight,c=t.fontVariant,t=t.lineWidth;return n&&o&&a&&s&&c&&r&&i&&!T(t)},e.update=function(t,e){var n,r,i=t.text,o=t.textAlign,a=t.lineWidth,s=t.textBaseline,c=t.dx,l=t.dy,u=((null==e||null==(u=e.ownerDocument)||null==(u=u.defaultView)?void 0:u.getConfig())||{}).offscreenCanvas;return this.isReadyToMeasure(t,e)?(e=this.textService.measureText(i,t,u),i=(t.metrics=e).width,u=e.height,n=e.lineHeight,e=e.fontProperties,i=[i/2,u/2,0],u=[0,1],r=0,"center"===o?(r=a/2,u=[.5,1]):"right"!==o&&"end"!==o||(r=a,u=[1,1]),o=0,"middle"===s?o=i[1]:"top"===s||"hanging"===s?o=2*i[1]:"alphabetic"===s?o=n-e.ascent:"bottom"!==s&&"ideographic"!==s||(o=0),c&&(r+=c),l&&(o+=l),t.anchor=[u[0],u[1],0],{width:2*i[0],height:2*i[1],offsetX:r,offsetY:o}):(t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0})},t}(),Du=g([p({token:{token:_u,named:_.TEXT}}),v(0,y(Ru))],Du),Bu=d.defineToken("",{multiple:!1}),Fu=function(){function t(){this.registry={},this.define(_.CIRCLE,sh),this.define(_.ELLIPSE,hh),this.define(_.RECT,Th),this.define(_.IMAGE,vh),this.define(_.LINE,bh),this.define(_.GROUP,dh),this.define(_.PATH,wh),this.define(_.POLYGON,Eh),this.define(_.POLYLINE,Mh),this.define(_.TEXT,Ah),this.define(_.HTML,yh)}var e=t.prototype;return e.define=function(t,e){this.registry[t]=e},e.get=function(t){return this.registry[t]},t}(),zu=function(){function e(t){this.type=void 0,this.eventPhase=e.prototype.NONE,this.target=void 0,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.currentTarget=void 0,this.defaultPrevented=!1,this.timeStamp=void 0,this.nativeEvent=void 0,this.originalEvent=void 0,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.manager=void 0,this.detail=void 0,this.layer=new Pl,this.page=new Pl,this.canvas=new Pl,this.viewport=new Pl,this.path=void 0,this.view=void 0,this.which=void 0,this.returnValue=void 0,this.srcElement=void 0,this.composed=!1,this.isTrusted=void 0,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}var t=e.prototype;return t.composedPath=function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},t.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.initEvent=function(){},t.initUIEvent=function(){},t.clone=function(){throw new Error(ic)},Ja(e,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"propagationPath",get:function(){return this.composedPath()}}]),e}(),Gu=function(r){function t(t,e){var n=r.call(this,null)||this;return n.type=t,n.detail=e,Object.assign(ns(n),e),n}return b(t,r),t}(zu),t=function(){function t(){this.emitter=new La.exports.EventEmitter}var e=t.prototype;return e.on=function(t,e,n){return this.addEventListener(t,e,n),this},e.addEventListener=function(t,e,n){var r,i,o,a=Ko(n)&&n||Vo(n)&&n.capture,n=Vo(n)&&n.once,s=gs(e)?void 0:e,c=!1,l="";return-1<t.indexOf(":")&&(i=(r=t.split(":"))[0],t=r[1],l=i,c=!0),t=a?t+"capture":t,e=gs(e)?e:e.handleEvent,c&&(o=e,e=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(null==(t=n[0].target)?void 0:t.name)===l&&o.apply(void 0,n)}),n?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this},e.off=function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this},e.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.removeEventListener=function(t,e,n){var r,n=Ko(n)&&n||Vo(n)&&n.capture,i=gs(e)?void 0:e;return e=gs(e)?e:null==(r=e)?void 0:r.handleEvent,this.emitter.off(t=n?t+"capture":t,e,i),this},e.emit=function(t,e){this.dispatchEvent(new Gu(t,e))},e.dispatchEvent=function(t){if(!(t instanceof zu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var e;if(e=this.document?this:this.defaultView||(null==(e=this.ownerDocument)?void 0:e.defaultView)){if(t.manager=e.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],t.target=this,null!=(e=t.manager)&&e.dispatchEvent(t)}return!t.defaultPrevented},t}(),Wu=function(i){function d(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}b(d,i),d.isNode=function(t){return!!t.childNodes};var t=d.prototype;return t.getRootNode=function(t){return void 0===t&&(t={}),this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this},t.hasChildNodes=function(){return 0<this.childNodes.length},t.isDefaultNamespace=function(t){throw new Error(ic)},t.lookupNamespaceURI=function(t){throw new Error(ic)},t.lookupPrefix=function(t){throw new Error(ic)},t.normalize=function(){throw new Error(ic)},t.isEqualNode=function(t){return this===t},t.isSameNode=function(t){return this.isEqualNode(t)},t.compareDocumentPosition=function(t){if(t===this)return 0;if(!(t instanceof d))throw new TypeError("Node.compareDocumentPosition: Argument 1 does not implement interface Node.");for(var e=[i=t],n=[o=this];null!=(r=i.parentNode)?r:o.parentNode;)var r,i=i.parentNode?(e.push(i.parentNode),i.parentNode):i,o=o.parentNode?(n.push(o.parentNode),o.parentNode):o;if(i!==o)return d.DOCUMENT_POSITION_DISCONNECTED|d.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|d.DOCUMENT_POSITION_PRECEDING;var a=n.length<e.length?e:n,s=a===e?n:e;if(a[a.length-s.length]===s[0])return a===e?d.DOCUMENT_POSITION_CONTAINED_BY|d.DOCUMENT_POSITION_FOLLOWING:d.DOCUMENT_POSITION_CONTAINS|d.DOCUMENT_POSITION_PRECEDING;for(var c=a.length-s.length,l=s.length-1;0<=l;l--){var u,h=s[l],f=a[c+l];if(f!==h)return(u=h.parentNode.childNodes).indexOf(h)<u.indexOf(f)?s===e?d.DOCUMENT_POSITION_PRECEDING:d.DOCUMENT_POSITION_FOLLOWING:a===e?d.DOCUMENT_POSITION_PRECEDING:d.DOCUMENT_POSITION_FOLLOWING}return d.DOCUMENT_POSITION_FOLLOWING},t.contain=function(t){return this.contains(t)},t.contains=function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e},t.getAncestor=function(t){for(var e=this;0<t&&e;)e=e.parentNode,t--;return e},t.forEach=function(e){e(this)||this.childNodes.forEach(function(t){t.forEach(e)})},Ja(d,[{key:"textContent",get:function(){var t="";this.nodeName===_.TEXT&&(t+=this.style.text);for(var e=is(this.childNodes);!(n=e()).done;){var n=n.value;n.nodeName===_.TEXT?t+=n.nodeValue:t+=n.textContent}return t},set:function(t){var e=this;this.childNodes.slice().forEach(function(t){e.removeChild(t)}),this.nodeName===_.TEXT&&(this.style.text=""+t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return 0<this.childNodes.length?this.childNodes[0]:null}},{key:"lastChild",get:function(){return 0<this.childNodes.length?this.childNodes[this.childNodes.length-1]:null}}]),d}(t),Hu=(Wu.DOCUMENT_POSITION_DISCONNECTED=1,Wu.DOCUMENT_POSITION_PRECEDING=2,Wu.DOCUMENT_POSITION_FOLLOWING=4,Wu.DOCUMENT_POSITION_CONTAINS=8,Wu.DOCUMENT_POSITION_CONTAINED_BY=16,Wu.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,function(e){function t(){var t=e.call(this)||this;t.defaultView=null,t.documentElement=void 0,t.timeline=void 0,t.ownerDocument=null,t.nodeName="document";try{t.timeline=Gr.get(Hc),t.timeline.attach(ns(t))}catch(t){}var r={};return vf.forEach(function(t){var e=t.n,n=t.inh,t=t.d;n&&t&&(r[e]=gs(t)?t(_.GROUP):t)}),t.documentElement=new dh({id:"g-root",style:r}),t.documentElement.ownerDocument=ns(t),t.documentElement.parentNode=ns(t),t.childNodes=[t.documentElement],t}b(t,e);var n=t.prototype;return n.createElement=function(t,e){var n;return"svg"===t?this.documentElement:((n=this.defaultView.customElements.get(t))||(console.warn("Unsupported tagName: ",t),n="tspan"===t?Ah:dh),(t=new n(e)).ownerDocument=this,t)},n.createElementNS=function(t,e,n){return this.createElement(e,n)},n.cloneNode=function(t){throw new Error(ic)},n.destroy=function(){try{this.documentElement.destroy(),this.timeline.destroy()}catch(t){}},n.elementsFromBBox=function(t,e,n,r){var t=this.defaultView.getRBushRoot().search({minX:t,minY:e,maxX:n,maxY:r}),i=Gr.get(oh),o=[];return t.forEach(function(t){var t=t.id,t=i.getByEntity(t),e=t.parsedStyle.pointerEvents,e=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(e);e&&!t.isVisible()||t.isCulled()||!t.isInteractive()||o.push(t)}),o.sort(function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder}),o},n.elementFromPointSync=function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,n=n.y,i=this.defaultView.getConfig(),o=i.width,i=i.height;return r<0||n<0||o<r||i<n?null:(i=(o=this.defaultView.viewport2Client({x:r,y:n})).x,o=o.y,(t=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:n,clientX:i,clientY:o},picked:[]}).picked)&&t[0]||this.documentElement)},n.elementFromPoint=function(){var n=Za(Xa().mark(function t(e,n){var r,i,o,a,s,c;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.defaultView.canvas2Viewport({x:e,y:n}),r=i.x,i=i.y,a=this.defaultView.getConfig(),o=a.width,a=a.height,r<0||i<0||o<r||a<i)return t.abrupt("return",null);t.next=4;break;case 4:return o=this.defaultView.viewport2Client({x:r,y:i}),a=o.x,s=o.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:r,viewportY:i,clientX:a,clientY:s},picked:[]});case 7:return s=t.sent,c=s.picked,t.abrupt("return",c&&c[0]||this.documentElement);case 10:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),n.elementsFromPointSync=function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,n=n.y,i=this.defaultView.getConfig(),o=i.width,i=i.height;return r<0||n<0||o<r||i<n?[]:(i=(o=this.defaultView.viewport2Client({x:r,y:n})).x,o=o.y,(t=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:n,clientX:i,clientY:o},picked:[]}).picked)[t.length-1]!==this.documentElement&&t.push(this.documentElement),t)},n.elementsFromPoint=function(){var n=Za(Xa().mark(function t(e,n){var r,i,o,a,s,c;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.defaultView.canvas2Viewport({x:e,y:n}),r=i.x,i=i.y,a=this.defaultView.getConfig(),o=a.width,a=a.height,r<0||i<0||o<r||a<i)return t.abrupt("return",[]);t.next=4;break;case 4:return o=this.defaultView.viewport2Client({x:r,y:i}),a=o.x,s=o.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:r,viewportY:i,clientX:a,clientY:s},picked:[]});case 7:return s=t.sent,(c=s.picked)[c.length-1]!==this.documentElement&&c.push(this.documentElement),t.abrupt("return",c);case 11:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),n.appendChild=function(t,e){throw new Error(oc)},n.insertBefore=function(t,e){throw new Error(oc)},n.removeChild=function(t,e){throw new Error(oc)},n.replaceChild=function(t,e,n){throw new Error(oc)},n.append=function(){throw new Error(oc)},n.prepend=function(){throw new Error(oc)},n.getElementById=function(t){return this.documentElement.getElementById(t)},n.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},n.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},n.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},n.querySelector=function(t){return this.documentElement.querySelector(t)},n.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},n.find=function(t){return this.documentElement.find(t)},n.findAll=function(t){return this.documentElement.findAll(t)},Ja(t,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}}]),t}(Wu)),Vu=(gu=gu||{},gu[gu.Standard=0]="Standard",d.defineToken("")),Yu=d.defineToken(""),Uu=((n=S=S||{}).DESTROY="destroy",n.ATTR_MODIFIED="DOMAttrModified",n.INSERTED="DOMNodeInserted",n.CHILD_INSERTED="child-inserted",n.REMOVED="removed",n.CHILD_REMOVED="child-removed",n.MOUNTED="DOMNodeInsertedIntoDocument",n.UNMOUNTED="DOMNodeRemovedFromDocument",n.BOUNDS_CHANGED="bounds-changed",n.RENDER_ORDER_CHANGED="render-order-changed",n.CULLED="culled",function(l){function t(t,e,n,r,i,o,a,s){var c=l.call(this,null)||this;return c.relatedNode=void 0,c.prevValue=void 0,c.newValue=void 0,c.attrName=void 0,c.attrChange=void 0,c.prevParsedValue=void 0,c.newParsedValue=void 0,c.relatedNode=e,c.prevValue=n,c.newValue=r,c.attrName=i,c.attrChange=o,c.prevParsedValue=a,c.newParsedValue=s,c.type=t,c}return b(t,l),t}(zu)),qu=(Uu.ADDITION=2,Uu.MODIFICATION=1,Uu.REMOVAL=3,0),Xu=new Gu(S.CHILD_INSERTED,{child:null}),$u=new Uu(S.INSERTED,null,"","","",0,"",""),Zu=new Uu(S.REMOVED,null,"","","",0,"",""),Ku=new Gu(S.DESTROY),Ju=new Gu(S.CHILD_REMOVED,{child:null}),Qu=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).sceneGraphService=Gr.get(Yu),t.entity=qu++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1,proxyNodeName:void 0},t.cullable={strategy:gu.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:E(0,0,0),localRotation:to(0,0,0,1),localScale:E(1,1,1),localTransform:si(),localSkew:io(0,0),position:E(0,0,0),rotation:to(0,0,0,1),scaling:E(1,1,1),worldTransform:si(),origin:E(0,0,0)},t.sortable={dirty:!1,sorted:void 0,lastSortedIndex:void 0,renderOrder:0},t.geometry={contentBounds:void 0,renderBounds:void 0},t.rBushNode={aabb:void 0},t.id=void 0,t.name=void 0,t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={anchor:Us,opacity:Us,fillOpacity:Us,strokeOpacity:Us,fill:Us,stroke:Us,transform:Us,transformOrigin:Us,visibility:Us,pointerEvents:Us,lineWidth:Us,lineCap:Us,lineJoin:Us,increasedLineWidthForHitTesting:Us,fontSize:Us,fontFamily:Us,fontStyle:Us,fontWeight:Us,fontVariant:Us,textAlign:Us,textBaseline:Us,textTransform:Us,zIndex:Us,filter:Us,shadowType:Us},t.parsedStyle={},t.attributes={},t}b(t,i),t.isElement=function(t){return!!t.getAttribute};var e=t.prototype;return e.cloneNode=function(t){throw new Error(ic)},e.appendChild=function(t,e){return this.sceneGraphService.attach(t,this,e),Xu.detail.child=t,this.dispatchEvent(Xu),$u.relatedNode=this,t.dispatchEvent($u),t},e.insertBefore=function(t,e){return e?(e=this.childNodes.indexOf(e),this.appendChild(t,e-1)):this.appendChild(t),t},e.replaceChild=function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e},e.removeChild=function(t){return Zu.relatedNode=this,t.dispatchEvent(Zu),Ju.detail.child=t,this.dispatchEvent(Ju),this.sceneGraphService.detach(t),t},e.removeChildren=function(){var e=this;this.childNodes.slice().forEach(function(t){e.removeChild(t),t.destroy()})},e.matches=function(t){return this.sceneGraphService.matches(t,this)},e.getElementById=function(t){return this.sceneGraphService.querySelector("#"+t,this)},e.getElementsByName=function(t){return this.sceneGraphService.querySelectorAll('[name="'+t+'"]',this)},e.getElementsByClassName=function(t){return this.sceneGraphService.querySelectorAll("."+t,this)},e.getElementsByTagName=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.querySelector=function(t){return this.sceneGraphService.querySelector(t,this)},e.querySelectorAll=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.closest=function(t){var e=this;do{if(this.sceneGraphService.matches(t,e))return e}while(null!==(e=e.parentElement));return null},e.find=function(e){var n=this,r=null;return this.forEach(function(t){return!(t===n||!e(t))&&(r=t,!0)}),r},e.findAll=function(e){var n=this,r=[];return this.forEach(function(t){t!==n&&e(t)&&r.push(t)}),r},e.after=function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t,e){var n;return null==(n=r.parentNode)?void 0:n.appendChild(t,i+e+1)})}},e.before=function(){if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n.slice(1);this.parentNode.appendChild(i,t),i.after.apply(i,o)}},e.replaceWith=function(){this.after.apply(this,arguments),this.remove()},e.append=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t)})},e.prepend=function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t,e){return n.appendChild(t,e)})},e.replaceChildren=function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)},e.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.destroy=function(){this.dispatchEvent(Ku),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.getGeometryBounds=function(){return this.sceneGraphService.getGeometryBounds(this)},e.getRenderBounds=function(){return this.sceneGraphService.getBounds(this,!0)},e.getBounds=function(){return this.sceneGraphService.getBounds(this)},e.getLocalBounds=function(){return this.sceneGraphService.getLocalBounds(this)},e.getBoundingClientRect=function(){return this.sceneGraphService.getBoundingClientRect(this)},e.getClientRects=function(){return[this.getBoundingClientRect()]},e.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.getAttributeNames=function(){return Object.keys(this.attributes)},e.getAttribute=function(t){var e=this.attributes[t];return void 0===e&&(t=ws(t.toString(),"")[0],e=this.attributes[t]),T(e)?null:e},e.hasAttribute=function(t){return this.getAttributeNames().includes(t)},e.hasAttributes=function(){return!!this.getAttributeNames().length},e.removeAttribute=function(t){this.setAttribute(t,null),delete this.attributes[t]},e.setAttribute=function(t,e,n){this.attributes[t]=e},e.getAttributeNS=function(t,e){throw new Error(ic)},e.getAttributeNode=function(t){throw new Error(ic)},e.getAttributeNodeNS=function(t,e){throw new Error(ic)},e.hasAttributeNS=function(t,e){throw new Error(ic)},e.removeAttributeNS=function(t,e){throw new Error(ic)},e.removeAttributeNode=function(t){throw new Error(ic)},e.setAttributeNS=function(t,e,n){throw new Error(ic)},e.setAttributeNode=function(t){throw new Error(ic)},e.setAttributeNodeNS=function(t){throw new Error(ic)},e.toggleAttribute=function(t,e){throw new Error(ic)},Ja(t,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(t){return""!==t})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){var t;return this.parentNode&&(t=this.parentNode.childNodes.indexOf(this),this.parentNode.childNodes[t+1])||null}},{key:"previousSibling",get:function(){var t;return this.parentNode&&(t=this.parentNode.childNodes.indexOf(this),this.parentNode.childNodes[t-1])||null}}]),t}(Wu),th=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).altKey=void 0,t.button=void 0,t.buttons=void 0,t.ctrlKey=void 0,t.metaKey=void 0,t.relatedTarget=void 0,t.shiftKey=void 0,t.client=new Pl,t.movement=new Pl,t.offset=new Pl,t.global=new Pl,t.screen=new Pl,t}b(t,i);var e=t.prototype;return e.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.initMouseEvent=function(){throw new Error(ic)},Ja(t,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}}]),t}(zu),eh=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).pointerId=void 0,t.width=0,t.height=0,t.isPrimary=!1,t.pointerType=void 0,t.pressure=void 0,t.tangentialPressure=void 0,t.tiltX=void 0,t.tiltY=void 0,t.twist=void 0,t}b(t,i);var e=t.prototype;return e.getCoalescedEvents=function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]},e.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.clone=function(){return this.manager.clonePointerEvent(this)},t}(th),nh=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).deltaMode=void 0,t.deltaX=void 0,t.deltaY=void 0,t.deltaZ=void 0,t.DOM_DELTA_LINE=0,t.DOM_DELTA_PAGE=1,t.DOM_DELTA_PIXEL=2,t}return b(t,i),t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(th),rh={},ih=[],oh=function(){function t(){}var e=t.prototype;return e.getByEntity=function(t){return rh[t]},e.getAll=function(){return Object.keys(rh).map(function(t){return rh[t]})},e.add=function(t,e){(rh[t]=e).nodeName===_.HTML&&ih.push(e)},e.remove=function(t){var e=rh[t];e&&(delete rh[t],e.nodeName===_.HTML&&(t=ih.indexOf(e),ih.splice(t,1)))},e.getHTMLs=function(){return ih},t}(),oh=g([p()],oh),O=function(i){function a(t){var r=i.call(this)||this;return r.config=void 0,r.isCustomElement=!1,r.activeAnimations=[],r.displayObjectPool=Gr.get(oh),r.styleValueRegistry=Gr.get(Ws),r.config=t,r.config.interactive=null!=(t=r.config.capture)?t:r.config.interactive,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||_.GROUP,r.config.style=Qa({},r.config.style,r.config.attrs),null!=r.config.visible&&(r.config.style.visibility=!1===r.config.visible?"hidden":"visible"),null!=r.config.interactive&&(r.config.style.pointerEvents=!1===r.config.interactive?"none":"auto"),Object.assign(r.parsedStyle,{anchor:[0,0],fill:Xs,stroke:Xs,transform:[],zIndex:0,filter:[],shadowType:"outer"},r.config.initialParsedStyle),Object.assign(r.attributes,{anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""}),r.initAttributes(r.config.style),r.style=new Proxy({setProperty:function(t,e){r.setAttribute(t,e)},getPropertyValue:function(t){return r.getAttribute(t)},removeProperty:function(t){r.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:r.getAttribute(e)},set:function(t,e,n){return r.setAttribute(e,n),!0}}),r.displayObjectPool.add(r.entity,ns(r)),r}b(a,i);var t=a.prototype;return t.destroy=function(){i.prototype.destroy.call(this),this.displayObjectPool.remove(this.entity),this.getAnimations().forEach(function(t){t.cancel()})},t.cloneNode=function(e,t){var n,r=Qa({},this.attributes);for(n in r){var i=r[n];i instanceof a&&(r[n]=i.cloneNode(e)),t&&(r[n]=t(n,i))}var o=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:r});return o.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){t.style.isMarker||(t=t.cloneNode(e),o.appendChild(t))}),o},t.initAttributes=function(t){var e=this.renderable;this.styleValueRegistry.processProperties(this,t=void 0===t?{}:t,{forceUpdateGeometry:!0,usedAttributes:["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting","fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"]}),e.dirty=!0},t.setAttribute=function(t,e,n){void 0===n&&(n=!1);var t=ws(t,e),r=t[0],t=t[1];Jo(e)||!n&&t===this.attributes[r]||(this.internalSetAttribute(r,t),i.prototype.setAttribute.call(this,r,t))},t.internalSetAttribute=function(t,e,n){var r=this,i=(void 0===n&&(n={}),this.renderable),o=this.attributes[t],a=this.parsedStyle[t],s=(this.styleValueRegistry.processProperties(this,((s={})[t]=e,s),n),this.parsedStyle.clipPathTargets&&this.parsedStyle.clipPathTargets.length&&this.parsedStyle.clipPathTargets.forEach(function(t){r.sceneGraphService.dirtifyToRoot(t),t.dispatchEvent(new Uu(S.ATTR_MODIFIED,t,r,r,"clipPath",Uu.MODIFICATION,r,r)),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback("clipPath",r,r)}),i.dirty=!0,this.parsedStyle[t]);this.isConnected&&((vu=vu||new Uu(S.ATTR_MODIFIED,null,null,null,null,Uu.MODIFICATION,null,null)).relatedNode=this,vu.prevValue=o,vu.newValue=e,vu.attrName=t,vu.prevParsedValue=a,vu.newParsedValue=s,this.dispatchEvent(vu)),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(t,o,e,a,s)},t.getBBox=function(){var t=this.getBounds(),e=t.getMin(),n=e[0],e=e[1],t=t.getMax(),r=t[0],t=t[1];return new Nl(n,e,r-n,t-e)},t.setOrigin=function(t,e,n){return this.sceneGraphService.setOrigin(this,cc(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},t.getOrigin=function(){return this.sceneGraphService.getOrigin(this)},t.setPosition=function(t,e,n){return this.sceneGraphService.setPosition(this,cc(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},t.setLocalPosition=function(t,e,n){return this.sceneGraphService.setLocalPosition(this,cc(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},t.translate=function(t,e,n){return this.sceneGraphService.translate(this,cc(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},t.translateLocal=function(t,e,n){return this.sceneGraphService.translateLocal(this,cc(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},t.getPosition=function(){return this.sceneGraphService.getPosition(this)},t.getLocalPosition=function(){return this.sceneGraphService.getLocalPosition(this)},t.scale=function(t,e,n){return this.scaleLocal(t,e,n)},t.scaleLocal=function(t,e,n){return"number"==typeof t&&(t=cc(t,e=e||t,n=n||t)),this.sceneGraphService.scaleLocal(this,t),this},t.setLocalScale=function(t,e,n){return"number"==typeof t&&(t=cc(t,e=e||t,n=n||t)),this.sceneGraphService.setLocalScale(this,t),this},t.getLocalScale=function(){return this.sceneGraphService.getLocalScale(this)},t.getScale=function(){return this.sceneGraphService.getScale(this)},t.getEulerAngles=function(){var t=hc(Ci(),this.sceneGraphService.getWorldTransform(this));return t[0],t[1],uc(t[2])},t.getLocalEulerAngles=function(){var t=hc(Ci(),this.sceneGraphService.getLocalRotation(this));return t[0],t[1],uc(t[2])},t.setEulerAngles=function(t){return this.sceneGraphService.setEulerAngles(this,0,0,t),this},t.setLocalEulerAngles=function(t){return this.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},t.rotateLocal=function(t,e,n){return T(e)&&T(n)?this.sceneGraphService.rotateLocal(this,0,0,t):this.sceneGraphService.rotateLocal(this,t,e,n),this},t.rotate=function(t,e,n){return T(e)&&T(n)?this.sceneGraphService.rotate(this,0,0,t):this.sceneGraphService.rotate(this,t,e,n),this},t.setRotation=function(t,e,n,r){return this.sceneGraphService.setRotation(this,t,e,n,r),this},t.setLocalRotation=function(t,e,n,r){return this.sceneGraphService.setLocalRotation(this,t,e,n,r),this},t.setLocalSkew=function(t,e){return this.sceneGraphService.setLocalSkew(this,t,e),this},t.getRotation=function(){return this.sceneGraphService.getRotation(this)},t.getLocalRotation=function(){return this.sceneGraphService.getLocalRotation(this)},t.getLocalSkew=function(){return this.sceneGraphService.getLocalSkew(this)},t.getLocalTransform=function(){return this.sceneGraphService.getLocalTransform(this)},t.getWorldTransform=function(){return this.sceneGraphService.getWorldTransform(this)},t.setLocalTransform=function(t){return this.sceneGraphService.setLocalTransform(this,t),this},t.resetLocalTransform=function(){this.sceneGraphService.resetLocalTransform(this)},t.getAnimations=function(){return this.activeAnimations},t.animate=function(t,e){var n,r=null==(r=this.ownerDocument)?void 0:r.timeline;return(r=this.parsedStyle.clipPathTargets&&this.parsedStyle.clipPathTargets.length?null==(n=this.parsedStyle.clipPathTargets[0].ownerDocument)?void 0:n.timeline:r)?r.play(this,t,e):null},t.isVisible=function(){var t;return"visible"===(null==(t=this.parsedStyle)?void 0:t.visibility)},t.isInteractive=function(){var t;return"none"!==(null==(t=this.parsedStyle)?void 0:t.pointerEvents)},t.isCulled=function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)},t.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,this.parentNode.children.map(function(t){return Number(t.style.zIndex)}))+1),this},t.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,this.parentNode.children.map(function(t){return Number(t.style.zIndex)}))-1),this},t.getConfig=function(){return this.config},t.attr=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1];return i?Vo(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])}),this):2===n.length?(this.setAttribute(i,o),this):this.attributes[i]:this.attributes},t.getMatrix=function(t){var t=t||this.getWorldTransform(),e=wi(Ci(),t),n=e[0],e=e[1],r=ki(Ci(),t),i=r[0],r=r[1],t=Ei($i(),t),t=hc(Ci(),t),o=t[0],t=(t[1],t[2]);return fc(o||t,n,e,i,r)},t.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.setMatrix=function(t){var t=dc(t),e=t[0],n=t[1],r=t[2],i=t[3],t=t[4];this.setEulerAngles(t).setPosition(e,n).setLocalScale(r,i)},t.setLocalMatrix=function(t){var t=dc(t),e=t[0],n=t[1],r=t[2],i=t[3],t=t[4];this.setLocalEulerAngles(t).setLocalPosition(e,n).setLocalScale(r,i)},t.show=function(){this.style.visibility="visible"},t.hide=function(){this.style.visibility="hidden"},Ja(a,[{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}}]),a}(Qu),ah=["style"],sh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,ah);return n.call(this,Qa({type:_.CIRCLE,style:Qa({cx:"",cy:"",r:""},e),initialParsedStyle:{anchor:[.5,.5]}},t))||this}return b(t,n),t}(O),ch=["style"],lh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,ch),e=n.call(this,Qa({style:Qa({x:"",y:""},e)},t))||this;return e.isCustomElement=!0,e}return b(t,n),t}(O),uh=["style"],hh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,uh);return n.call(this,Qa({type:_.ELLIPSE,style:Qa({cx:"",cy:"",rx:"",ry:""},e),initialParsedStyle:{anchor:[.5,.5]}},t))||this}return b(t,n),t}(O),fh=["style"],dh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,fh);return n.call(this,Qa({type:_.GROUP,style:Qa({x:"",y:"",width:"",height:""},e)},t))||this}return b(t,n),t}(O),ph=["style"],yh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,ph),e=n.call(this,Qa({type:_.HTML,style:Qa({x:"",y:"",width:"auto",height:"auto",innerHTML:""},e)},t))||this;return e.cullable.enable=!1,e}b(t,n);var e=t.prototype;return e.getDomElement=function(){return this.parsedStyle.$el},e.getBoundingClientRect=function(){return this.parsedStyle.$el.getBoundingClientRect()},e.getClientRects=function(){return[this.getBoundingClientRect()]},e.getBounds=function(){var t,e,n=this.getBoundingClientRect(),r=null==(r=this.ownerDocument)||null==(r=r.defaultView)?void 0:r.getContextService().getBoundingClientRect();return r?(t=n.left-r.left,r=n.top-r.top,(e=new Tl).setMinMax(E(t,r,0),E(t+n.width,r+n.height,0)),e):null},e.getLocalBounds=function(){if(this.parentNode){var t,e=fi(si(),this.parentNode.getWorldTransform()),n=this.getBounds();if(!Tl.isEmpty(n))return(t=new Tl).setFromTransformedAABB(n,e),t}return this.getBounds()},t}(O),gh=["style"],vh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,gh);return n.call(this,Qa({type:_.IMAGE,style:Qa({x:"",y:"",img:"",width:"",height:""},e)},t))||this}return b(t,n),t}(O),mh=["style"],bh=function(r){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,mh),e=r.call(this,Qa({type:_.LINE,style:Qa({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0,isBillboard:!1},e)},t))||this,t=(e.markerStartAngle=0,e.markerEndAngle=0,e.parsedStyle),n=t.markerStart,t=t.markerEnd;return n&&n instanceof O&&(e.markerStartAngle=n.getLocalEulerAngles(),e.appendChild(n)),t&&t instanceof O&&(e.markerEndAngle=t.getLocalEulerAngles(),e.appendChild(t)),e.transformMarker(!0),e.transformMarker(!1),e}b(t,r);var e=t.prototype;return e.attributeChangedCallback=function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&r instanceof O&&(this.markerStartAngle=0,r.remove()),i&&i instanceof O&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&r instanceof O&&(this.markerEndAngle=0,r.remove()),i&&i instanceof O&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))},e.transformMarker=function(t){var e,n,r,i,o,a=this.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerStartOffset,u=a.markerEndOffset,h=a.x1,f=a.x2,d=a.y1,p=a.y2,y=a.defX,a=a.defY,s=t?s:c;s&&s instanceof O&&(c=0,t=t?(r=h-y,i=d-a,e=f-h,n=p-d,o=l||0,this.markerStartAngle):(r=f-y,i=p-a,e=h-f,n=d-p,o=u||0,this.markerEndAngle),c=Math.atan2(n,e),s.setLocalEulerAngles(180*c/Math.PI+t),s.setLocalPosition(r+Math.cos(c)*o,i+Math.sin(c)*o))},e.getPoint=function(t){var e=this.parsedStyle,n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.defX,e=e.defY,n=Ma.pointAt(n,r,i,o,t),r=n.x,i=n.y,o=Wi(Ci(),E(r-a,i-e,0),this.getLocalTransform());return new Pl(o[0],o[1])},e.getPointAtLength=function(t){return this.getPoint(t/this.getTotalLength())},e.getTotalLength=function(){var t=this.parsedStyle,e=t.x1,n=t.y1,r=t.x2,t=t.y2;return Ma.length(e,n,r,t)},t}(O),xh=["style"],wh=function(i){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,xh),e=i.call(this,Qa({type:_.PATH,style:Qa({path:"",miterLimit:""},e)},t))||this,t=(e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[],e.parsedStyle),n=t.markerStart,r=t.markerEnd,t=t.markerMid;return n&&n instanceof O&&(e.markerStartAngle=n.getLocalEulerAngles(),e.appendChild(n)),t&&t instanceof O&&e.placeMarkerMid(t),r&&r instanceof O&&(e.markerEndAngle=r.getLocalEulerAngles(),e.appendChild(r)),e.transformMarker(!0),e.transformMarker(!1),e}b(t,i);var e=t.prototype;return e.attributeChangedCallback=function(t,e,n,r,i){"path"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&r instanceof O&&(this.markerStartAngle=0,r.remove()),i&&i instanceof O&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&r instanceof O&&(this.markerEndAngle=0,r.remove()),i&&i instanceof O&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)},e.transformMarker=function(t){var e,n,r,i,o,a=this.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerStartOffset,u=a.markerEndOffset,h=a.defX,a=a.defY,s=t?s:c;s&&s instanceof O&&(c=0,h=t?(i=(t=this.getStartTangent())[0],e=(t=t[1])[0]-h,n=t[1]-a,r=i[0]-t[0],i=i[1]-t[1],o=l||0,this.markerStartAngle):(l=(t=this.getEndTangent())[0],e=(t=t[1])[0]-h,n=t[1]-a,r=l[0]-t[0],i=l[1]-t[1],o=u||0,this.markerEndAngle),c=Math.atan2(i,r),s.setLocalEulerAngles(180*c/Math.PI+h),s.setLocalPosition(e+Math.cos(c)*o,n+Math.sin(c)*o))},e.placeMarkerMid=function(t){var e=this.parsedStyle,n=e.path.segments,r=e.defX,i=e.defY;if(this.markerMidList.forEach(function(t){t.remove()}),t&&t instanceof O)for(var o=1;o<n.length-1;o++){var a=n[o].currentPoint,s=a[0],a=a[1],c=1===o?t:t.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(s-r,a-i)}},e.getTotalLength=function(){return Yc(this)},e.getPointAtLength=function(t){var e=this.parsedStyle,n=e.defX,r=e.defY,e=Go(e.path.absolutePath,t,M(M({},i),{bbox:!1,length:!0})).point,t=e.x,i=e.y,e=Wi(Ci(),E(t-n,i-r,0),this.getLocalTransform());return new Pl(e[0],e[1])},e.getPoint=function(t){return this.getPointAtLength(t*Yc(this))},e.getStartTangent=function(){var t,e,n=this.parsedStyle.path.segments,r=[];return 1<n.length&&(t=n[0].currentPoint,e=n[1].currentPoint,r=[],(n=n[1].startTangent)?r.push([t[0]-n[0],t[1]-n[1]]):r.push([e[0],e[1]]),r.push([t[0],t[1]])),r},e.getEndTangent=function(){var t,e,n=this.parsedStyle.path.segments,r=n.length,i=[];return 1<r&&(t=n[r-2].currentPoint,e=n[r-1].currentPoint,i=[],(n=n[r-1].endTangent)?i.push([e[0]-n[0],e[1]-n[1]]):i.push([t[0],t[1]]),i.push([e[0],e[1]])),i},t}(O),kh=["style"],Eh=function(i){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,kh),e=i.call(this,Qa({type:_.POLYGON,style:Qa({points:"",miterLimit:"",isClosed:!0},e)},t))||this,t=(e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[],e.parsedStyle),n=t.markerStart,r=t.markerEnd,t=t.markerMid;return n&&n instanceof O&&(e.markerStartAngle=n.getLocalEulerAngles(),e.appendChild(n)),t&&t instanceof O&&e.placeMarkerMid(t),r&&r instanceof O&&(e.markerEndAngle=r.getLocalEulerAngles(),e.appendChild(r)),e.transformMarker(!0),e.transformMarker(!1),e}b(t,i);var e=t.prototype;return e.attributeChangedCallback=function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&r instanceof O&&(this.markerStartAngle=0,r.remove()),i&&i instanceof O&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&r instanceof O&&(this.markerEndAngle=0,r.remove()),i&&i instanceof O&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)},e.transformMarker=function(t){var e,n,r,i,o,a=this.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerStartOffset,u=a.markerEndOffset,h=a.points.points,f=a.defX,a=a.defY,s=t?s:c;s&&s instanceof O&&(i=h[c=0][0]-f,o=h[0][1]-a,l=t?(e=h[1][0]-h[0][0],n=h[1][1]-h[0][1],r=l||0,this.markerStartAngle):(t=h.length,n=this.style.isClosed?(e=h[t-1][0]-h[0][0],h[t-1][1]-h[0][1]):(i=h[t-1][0]-f,o=h[t-1][1]-a,e=h[t-2][0]-h[t-1][0],h[t-2][1]-h[t-1][1]),r=u||0,this.markerEndAngle),c=Math.atan2(n,e),s.setLocalEulerAngles(180*c/Math.PI+l),s.setLocalPosition(i+Math.cos(c)*r,o+Math.sin(c)*r))},e.placeMarkerMid=function(t){var e=this.parsedStyle,n=e.points.points,r=e.defX,i=e.defY;if(this.markerMidList.forEach(function(t){t.remove()}),this.markerMidList=[],t&&t instanceof O)for(var o=1;o<(this.style.isClosed?n.length:n.length-1);o++){var a=n[o][0]-r,s=n[o][1]-i,c=1===o?t:t.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},t}(O),_h=["style"],Mh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,_h);return n.call(this,Qa({type:_.POLYLINE,style:Qa({points:"",miterLimit:"",isClosed:!1},e)},t))||this}b(t,n);var e=t.prototype;return e.getTotalLength=function(){return this.parsedStyle.points.totalLength},e.getPointAtLength=function(t){return this.getPoint(t/this.getTotalLength())},e.getPoint=function(n){var t=this.parsedStyle,e=t.defX,r=t.defY,t=t.points,i=t.points,t=t.segments,o=0,a=0,t=(t.forEach(function(t,e){n>=t[0]&&n<=t[1]&&(o=(n-t[0])/(t[1]-t[0]),a=e)}),Ma.pointAt(i[a][0],i[a][1],i[a+1][0],i[a+1][1],o)),i=t.x,t=t.y,i=Wi(Ci(),E(i-e,t-r,0),this.getLocalTransform());return new Pl(i[0],i[1])},e.getStartTangent=function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.getEndTangent=function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},t}(Eh),Sh=["style"],Th=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,Sh);return n.call(this,Qa({type:_.RECT,style:Qa({x:"",y:"",width:"",height:"",radius:""},e)},t))||this}return b(t,n),t}(O),Oh=["style"],Ah=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=es(t,Oh);return n.call(this,Qa({type:_.TEXT,style:Qa({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},e)},t))||this}b(t,n);var e=t.prototype;return e.getComputedTextLength=function(){var t;return(null==(t=this.parsedStyle.metrics)?void 0:t.maxLineWidth)||0},e.getLineBoundingRects=function(){var t;return(null==(t=this.parsedStyle.metrics)?void 0:t.lineMetrics)||[]},e.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},t}(O),Ph=((dt=mu=mu||{})[dt.CAMERA_CHANGED=0]="CAMERA_CHANGED",dt[dt.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",dt[dt.NONE=2]="NONE",d.defineToken("")),Nh=function(){function t(t,e,n,r){var f=this;this.renderingContext=void 0,this.contextService=void 0,this.canvasConfig=void 0,this.displayObjectPool=void 0,this.rootTarget=void 0,this.emitter=new La.exports.EventEmitter,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.pickHandler=void 0,this.tmpMatrix=si(),this.tmpVec3=Ci(),this.onPointerDown=function(){var e=Za(Xa().mark(function t(e){var n,r;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f.createPointerEvent(e);case 4:n=t.sent,f.dispatchEvent(n,"pointerdown"),"touch"===n.pointerType?f.dispatchEvent(n,"touchstart"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(r=2===n.button,f.dispatchEvent(n,r?"rightdown":"mousedown")),f.trackingData(e.pointerId).pressTargetsByButton[e.button]=n.composedPath(),f.freeEvent(n);case 10:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onPointerUp=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o,a,s,c;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:return n=performance.now(),t.next=5,f.createPointerEvent(e);case 5:if(r=t.sent,f.dispatchEvent(r,"pointerup"),"touch"===r.pointerType?f.dispatchEvent(r,"touchend"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(i=2===r.button,f.dispatchEvent(r,i?"rightup":"mouseup")),i=f.trackingData(e.pointerId),s=f.findMountedTarget(i.pressTargetsByButton[e.button]),(c=s)&&!r.composedPath().includes(s)){for(o=s;o&&!r.composedPath().includes(o);)r.currentTarget=o,f.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?f.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(a=2===r.button,f.notifyTarget(r,a?"rightupoutside":"mouseupoutside")),Wu.isNode(o)&&(o=o.parentNode);delete i.pressTargetsByButton[e.button],c=o}c&&((s=f.clonePointerEvent(r,"click")).target=c,s.path=[],i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:s.target,timeStamp:n}),(c=i.clicksByButton[e.button]).target===s.target&&n-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=s.target,c.timeStamp=n,s.detail=c.clickCount,null!=(c=r.detail)&&c.preventClick||("mouse"!==s.pointerType&&"touch"!==s.pointerType||f.dispatchEvent(s,"click"),f.dispatchEvent(s,"pointertap")),f.freeEvent(s)),f.freeEvent(r);case 14:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onPointerMove=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o,a,s,c,l,u,h;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f.createPointerEvent(e);case 4:if(n=t.sent,r="mouse"===n.pointerType||"pen"===n.pointerType,i=f.trackingData(e.pointerId),o=f.findMountedTarget(i.overTargets),i.overTargets&&o!==n.target)return c="mousemove"===e.type?"mouseout":"pointerout",t.next=12,f.createPointerEvent(e,c,o||void 0);t.next=23;break;case 12:if(a=t.sent,f.dispatchEvent(a,"pointerout"),r&&f.dispatchEvent(a,"mouseout"),n.composedPath().includes(o)){t.next=22;break}return t.next=18,f.createPointerEvent(e,"pointerleave",o||void 0);case 18:for((s=t.sent).eventPhase=s.AT_TARGET;s.target&&!n.composedPath().includes(s.target);)s.currentTarget=s.target,f.notifyTarget(s),r&&f.notifyTarget(s,"mouseleave"),Wu.isNode(s.target)&&(s.target=s.target.parentNode);f.freeEvent(s);case 22:f.freeEvent(a);case 23:if(o===n.target){t.next=38;break}c="mousemove"===e.type?"mouseover":"pointerover",l=f.clonePointerEvent(n,c),f.dispatchEvent(l,"pointerover"),r&&f.dispatchEvent(l,"mouseover"),u=o&&Wu.isNode(o)&&o.parentNode;case 29:if(u&&u!==(Wu.isNode(f.rootTarget)&&f.rootTarget.parentNode)){if(u===n.target)return t.abrupt("break",35);t.next=32}else t.next=35;break;case 32:u=u.parentNode,t.next=29;break;case 35:if(!u||u===(Wu.isNode(f.rootTarget)&&f.rootTarget.parentNode)){for((h=f.clonePointerEvent(n,"pointerenter")).eventPhase=h.AT_TARGET;h.target&&h.target!==o&&h.target!==(Wu.isNode(f.rootTarget)&&f.rootTarget.parentNode);)h.currentTarget=h.target,f.notifyTarget(h),r&&f.notifyTarget(h,"mouseenter"),Wu.isNode(h.target)&&(h.target=h.target.parentNode);f.freeEvent(h)}f.freeEvent(l);case 38:f.dispatchEvent(n,"pointermove"),"touch"===n.pointerType&&f.dispatchEvent(n,"touchmove"),r&&(f.dispatchEvent(n,"mousemove"),f.cursor=f.getCursor(n.target)),i.overTargets=n.composedPath(),f.freeEvent(n);case 43:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onPointerOut=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o,a;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:if((n=f.trackingData(e.pointerId)).overTargets)return r="mouse"===e.pointerType||"pen"===e.pointerType,i=f.findMountedTarget(n.overTargets),t.next=8,f.createPointerEvent(e,"pointerout",i||void 0);t.next=19;break;case 8:return o=t.sent,f.dispatchEvent(o),r&&f.dispatchEvent(o,"mouseout"),t.next=13,f.createPointerEvent(e,"pointerleave",i||void 0);case 13:for((a=t.sent).eventPhase=a.AT_TARGET;a.target&&a.target!==(Wu.isNode(f.rootTarget)&&f.rootTarget.parentNode);)a.currentTarget=a.target,f.notifyTarget(a),r&&f.notifyTarget(a,"mouseleave"),Wu.isNode(a.target)&&(a.target=a.target.parentNode);n.overTargets=null,f.freeEvent(o),f.freeEvent(a);case 19:f.cursor=null;case 20:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onPointerOver=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:return n=f.trackingData(e.pointerId),t.next=5,f.createPointerEvent(e);case 5:for(r=t.sent,i="mouse"===r.pointerType||"pen"===r.pointerType,f.dispatchEvent(r,"pointerover"),i&&f.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(f.cursor=f.getCursor(r.target)),(o=f.clonePointerEvent(r,"pointerenter")).eventPhase=o.AT_TARGET;o.target&&o.target!==(Wu.isNode(f.rootTarget)&&f.rootTarget.parentNode);)o.currentTarget=o.target,f.notifyTarget(o),i&&f.notifyTarget(o,"mouseenter"),Wu.isNode(o.target)&&(o.target=o.target.parentNode);n.overTargets=r.composedPath(),f.freeEvent(r),f.freeEvent(o);case 16:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onPointerUpOutside=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof eh){t.next=2;break}return t.abrupt("return");case 2:return n=f.trackingData(e.pointerId),r=f.findMountedTarget(n.pressTargetsByButton[e.button]),t.next=6,f.createPointerEvent(e);case 6:if(i=t.sent,r){for(o=r;o;)i.currentTarget=o,f.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||f.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Wu.isNode(o)&&(o=o.parentNode);delete n.pressTargetsByButton[e.button]}f.freeEvent(i);case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.onWheel=function(){var e=Za(Xa().mark(function t(e){var n;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof nh){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f.createWheelEvent(e);case 4:n=t.sent,f.dispatchEvent(n),f.freeEvent(n);case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),this.renderingContext=t,this.contextService=e,this.canvasConfig=n,this.displayObjectPool=r}var e=t.prototype;return e.init=function(){this.rootTarget=this.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)},e.client2Viewport=function(t){var e=this.contextService.getBoundingClientRect();return new Pl(t.x-((null==e?void 0:e.left)||0),t.y-((null==e?void 0:e.top)||0))},e.viewport2Client=function(t){var e=this.contextService.getBoundingClientRect();return new Pl(t.x+((null==e?void 0:e.left)||0),t.y+((null==e?void 0:e.top)||0))},e.viewport2Canvas=function(t){var e=t.x,t=t.y,n=this.rootTarget.defaultView.getCamera(),r=this.canvasConfig,i=r.width,r=r.height,o=n.getPerspectiveInverse(),n=n.getWorldTransform(),n=pi(this.tmpMatrix,n,o),o=ji(this.tmpVec3,e/i*2-1,2*(1-t/r)-1,0);return Wi(o,o,n),new Pl(o[0],o[1])},e.canvas2Viewport=function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),e=e.getViewTransform(),n=pi(this.tmpMatrix,n,e),e=ji(this.tmpVec3,t.x,t.y,0),t=(Wi(this.tmpVec3,this.tmpVec3,n),this.canvasConfig),n=t.width,t=t.height;return new Pl((e[0]+1)/2*n,(1-(e[1]+1)/2)*t)},e.setPickHandler=function(t){this.pickHandler=t},e.addEventMapping=function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(function(t,e){return t.priority-e.priority})},e.mapEvent=function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for "+t.type)}},e.dispatchEvent=function(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.emitter.emit(e||t.type,t)},e.propagate=function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;1<=r;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=i+1;o<n.length;o++)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.propagationPath=function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)e.unshift(n.document);else{for(var r=0;r<2048&&t!==this.rootTarget;r++)Wu.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);n&&e.push(n)}return e},e.hitTest=function(){var e=Za(Xa().mark(function t(e){var n,r,i,o;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.viewportX,r=e.viewportY,o=this.canvasConfig,i=o.width,o=o.height,n<0||r<0||i<n||o<r)return t.abrupt("return",null);t.next=4;break;case 4:return t.next=6,this.pickHandler(e);case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1=this.rootTarget;case 9:if(t.t0=t.t1,t.t0){t.next=12;break}t.t0=null;case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.isNativeEventFromCanvas=function(t){var e=this.contextService.getDomElement(),n=null==(n=t.nativeEvent)?void 0:n.target;if(n){if(n===e)return!0;if(e&&e.contains)return e.contains(n)}return!!t.nativeEvent.composedPath&&-1<t.nativeEvent.composedPath().indexOf(e)},e.getExistedHTML=function(t){if(t.nativeEvent.composedPath)for(var e=is(this.displayObjectPool.getHTMLs());!(n=e()).done;){var n=n.value;if(-1<t.nativeEvent.composedPath().indexOf(n))return n}return null},e.pickTarget=function(){var e=Za(Xa().mark(function t(e){return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.createPointerEvent=function(){var r=Za(Xa().mark(function t(e,n,r){var i,o;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.allocateEvent(eh),this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,o=this.getExistedHTML(i),null==r?t.next=11:(t.t0=r,t.next=20);break;case 11:if(t.t1=o,t.t1)t.next=19;else{if(t.t2=this.isNativeEventFromCanvas(i),t.t2)return t.next=17,this.pickTarget(i);t.next=18}break;case 17:t.t2=t.sent;case 18:t.t1=t.t2;case 19:t.t0=t.t1;case 20:return i.target=t.t0,"string"==typeof n&&(i.type=n),t.abrupt("return",i);case 23:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.createWheelEvent=function(){var e=Za(Xa().mark(function t(e){var n,r;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.allocateEvent(nh),this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,r=this.getExistedHTML(n),t.t0=r,t.t0)t.next=15;else{if(t.t1=this.isNativeEventFromCanvas(n),t.t1)return t.next=13,this.pickTarget(n);t.next=14}break;case 13:t.t1=t.sent;case 14:t.t0=t.t1;case 15:return n.target=t.t0,t.abrupt("return",n);case 17:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.cloneWheelEvent=function(t){var e=this.allocateEvent(nh);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=e.type,e},e.clonePointerEvent=function(t,e){var n=this.allocateEvent(eh);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n},e.copyPointerData=function(t,e){t instanceof eh&&e instanceof eh&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)},e.copyMouseData=function(t,e){t instanceof th&&e instanceof th&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset))},e.copyWheelData=function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ},e.copyData=function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)},e.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);t=this.eventPool.get(t).pop()||new t(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t},e.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)},e.notifyTarget=function(t,e){e=null!=(n=e)?n:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?e+"capture":e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)},e.notifyListeners=function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)},e.findMountedTarget=function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;0<=n;n--){var r=t[n];if(!(r===this.rootTarget||Wu.isNode(r)&&r.parentNode===e))break;e=t[n]}return e},e.getCursor=function(t){for(var e=t;e;){var n=Qu.isElement(e)&&e.getAttribute("cursor");if(n)return n;e=Wu.isNode(e)&&e.parentNode}},t}(),Nh=g([p(),v(0,y(Ph)),v(1,y(Bu)),v(2,y(Wc)),v(3,y(oh))],Nh),Ch=d.defineToken(""),Lh=d.defineToken("",{multiple:!1});(jt=bu=bu||{})[jt.ORBITING=0]="ORBITING",jt[jt.EXPLORING=1]="EXPLORING",jt[jt.TRACKING=2]="TRACKING",(a=xu=xu||{})[a.DEFAULT=0]="DEFAULT",a[a.ROTATIONAL=1]="ROTATIONAL",a[a.TRANSLATIONAL=2]="TRANSLATIONAL",a[a.CINEMATIC=3]="CINEMATIC",(u=wu=wu||{})[u.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",u[u.PERSPECTIVE=1]="PERSPECTIVE";var Ih="updated",jh=function(){function t(){this.canvas=void 0,this.eventEmitter=new La.exports.EventEmitter,this.matrix=si(),this.right=E(1,0,0),this.up=E(0,1,0),this.forward=E(0,0,1),this.position=E(0,0,1),this.focalPoint=E(0,0,0),this.distanceVector=E(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.projectionMatrix=si(),this.projectionMatrixInverse=si(),this.jitteredProjectionMatrix=void 0,this.view=void 0,this.enableUpdate=!0,this.type=bu.EXPLORING,this.trackingMode=xu.DEFAULT,this.projectionMode=wu.PERSPECTIVE,this.frustum=new Al,this.orthoMatrix=si()}var e=t.prototype;return e.isOrtho=function(){return this.projectionMode===wu.ORTHOGRAPHIC},e.getProjectionMode=function(){return this.projectionMode},e.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.getFrustum=function(){return this.frustum},e.getPosition=function(){return this.position},e.getFocalPoint=function(){return this.focalPoint},e.getDollyingStep=function(){return this.dollyingStep},e.getNear=function(){return this.near},e.getFar=function(){return this.far},e.getZoom=function(){return this.zoom},e.getOrthoMatrix=function(){return this.orthoMatrix},e.getView=function(){return this.view},e.setEnableUpdate=function(t){this.enableUpdate=t},e.setType=function(t,e){return this.type=t,this.type===bu.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===bu.TRACKING&&void 0!==e&&this.setTrackingMode(e),this},e.setProjectionMode=function(t){return this.projectionMode=t,this},e.setTrackingMode=function(t){if(this.type!==bu.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.getViewTransform=function(){return fi(si(),this.matrix)},e.getWorldTransform=function(){return this.matrix},e.jitterProjectionMatrix=function(t,e){t=bi(si(),[t,e,0]);this.jitteredProjectionMatrix=pi(si(),t,this.projectionMatrix)},e.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.setMatrix=function(t){return this.matrix=t,this._update(),this},e.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.setNear=function(t){return this.projectionMode===wu.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.setFar=function(t){return this.projectionMode===wu.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.setViewOffset=function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===wu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.clearViewOffset=function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===wu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.setZoom=function(t){return this.zoom=t,this.projectionMode===wu.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===wu.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.setZoomByViewportPoint=function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,n=n.y,t=(this.setPosition(r,n),this.setFocalPoint(r,n),this.setZoom(t),this.canvas.viewport2Canvas({x:e[0],y:e[1]})),e=t.x,t=t.y;return this.pan(r-e,n-t),this},e.setPerspective=function(t,e,n,r){this.projectionMode=wu.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var i,o,a,s,n=this.near*Math.tan(lc(.5*this.fov))/this.zoom,e=2*n,r=this.aspect*e,c=-.5*r;return null!=(i=this.view)&&i.enabled&&(i=this.view.fullWidth,o=this.view.fullHeight,c+=this.view.offsetX*r/i,n-=this.view.offsetY*e/o,r*=this.view.width/i,e*=this.view.height/o),i=this.projectionMatrix,c=(o=c)+r,n=(r=n)-e,e=this.far,a=2*t/(r-n),s=(c+o)/(c-o),r=(r+n)/(r-n),n=-(e+t)/(e-t),e=-2*e*t/(e-t),i[0]=2*t/(c-o),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=s,i[9]=r,i[10]=n,i[11]=-1,i[12]=0,i[13]=0,i[14]=e,i[15]=0,gi(this.projectionMatrix,this.projectionMatrix,E(1,-1,1)),fi(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.setOrthographic=function(t,e,n,r,i,o){this.projectionMode=wu.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var a,e=(this.rright-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.rright+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,n=n+e,e=r+t,r=r-t;return null!=(t=this.view)&&t.enabled&&(t=(this.rright-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(s+=t*this.view.offsetX)+t*this.view.width,r=(e-=a*this.view.offsetY)-a*this.view.height),Oi(this.projectionMatrix,s,n,r,e,i,o),gi(this.projectionMatrix,this.projectionMatrix,E(1,-1,1)),fi(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.setPosition=function(t,e,n){t=cc(t,e=void 0===e?this.position[1]:e,n=void 0===n?this.position[2]:n);return this._setPosition(t),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.setFocalPoint=function(t,e,n){void 0===e&&(e=this.focalPoint[1]),void 0===n&&(n=this.focalPoint[2]);var r,i=E(0,1,0);return this.focalPoint=cc(t,e,n),this.trackingMode===xu.CINEMATIC&&(t=(r=Di(Ci(),this.focalPoint,this.position))[0],e=r[1],n=r[2],r=Li(r),e=uc(Math.asin(e/r)),r=90+uc(Math.atan2(n,t)),mi(n=si(),n,lc(r)),vi(n,n,lc(e)),i=Wi(Ci(),[0,1,0],n)),fi(this.matrix,Ai(si(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.getDistance=function(){return this.distance},e.getDistanceVector=function(){return this.distanceVector},e.setDistance=function(t){var e,n,r;return this.distance===t||t<0||(this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100,e=Ci(),t=this.distance,n=this.forward,r=this.focalPoint,e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate()),this},e.setMaxDistance=function(t){return this.maxDistance=t,this},e.setMinDistance=function(t){return this.minDistance=t,this},e.setAzimuth=function(t){return this.azimuth=sc(t),this.computeMatrix(),this._getAxes(),this.type===bu.ORBITING||this.type===bu.EXPLORING?this._getPosition():this.type===bu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.getAzimuth=function(){return this.azimuth},e.setElevation=function(t){return this.elevation=sc(t),this.computeMatrix(),this._getAxes(),this.type===bu.ORBITING||this.type===bu.EXPLORING?this._getPosition():this.type===bu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.getElevation=function(){return this.elevation},e.setRoll=function(t){return this.roll=sc(t),this.computeMatrix(),this._getAxes(),this.type===bu.ORBITING||this.type===bu.EXPLORING?this._getPosition():this.type===bu.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.getRoll=function(){return this.roll},e._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.computeMatrix=function(){var t=Zi($i(),[0,0,1],lc(this.roll)),e=(ui(this.matrix),Zi($i(),[1,0,0],lc((this.rotateWorld&&this.type!==bu.TRACKING||this.type===bu.TRACKING?1:-1)*this.elevation))),n=Zi($i(),[0,1,0],lc((this.rotateWorld&&this.type!==bu.TRACKING||this.type===bu.TRACKING?1:-1)*this.azimuth)),n=Ki($i(),n,e),n=Ki($i(),n,t),e=Mi(si(),n);this.type===bu.ORBITING||this.type===bu.EXPLORING?(yi(this.matrix,this.matrix,this.focalPoint),pi(this.matrix,this.matrix,e),yi(this.matrix,this.matrix,[0,0,this.distance])):this.type===bu.TRACKING&&(yi(this.matrix,this.matrix,this.position),pi(this.matrix,this.matrix,e))},e._setPosition=function(t,e,n){this.position=cc(t,e,n);t=this.matrix;t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1,this._getOrthoMatrix()},e._getAxes=function(){Ii(this.right,cc(Xi(qi(),[1,0,0,0],this.matrix))),Ii(this.up,cc(Xi(qi(),[0,1,0,0],this.matrix))),Ii(this.forward,cc(Xi(qi(),[0,0,1,0],this.matrix))),Fi(this.right,this.right),Fi(this.up,this.up),Fi(this.forward,this.forward)},e._getAngles=function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=Li(this.distanceVector);0===r?(this.elevation=0,this.azimuth=0):this.type===bu.TRACKING||this.rotateWorld?(this.elevation=uc(Math.asin(e/r)),this.azimuth=uc(Math.atan2(-t,-n))):(this.elevation=-uc(Math.asin(e/r)),this.azimuth=-uc(Math.atan2(-t,-n)))},e._getPosition=function(){Ii(this.position,cc(Xi(qi(),[0,0,0,1],this.matrix))),this._getDistance()},e._getFocalPoint=function(){var t,e;Hi(this.distanceVector,[0,0,-this.distance],(t=oi(),e=this.matrix,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)),Ri(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e._getDistance=function(){this.distanceVector=Di(Ci(),this.focalPoint,this.position),this.distance=Li(this.distanceVector),this.dollyingStep=this.distance/100},e._getOrthoMatrix=function(){var t,e;this.projectionMode===wu.ORTHOGRAPHIC&&(t=this.position,e=Zi($i(),[0,0,1],-this.roll*Math.PI/180),_i(this.orthoMatrix,e,E((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),E(this.zoom,this.zoom,1),t))},e.triggerUpdate=function(){var t;this.enableUpdate&&(t=this.getViewTransform(),t=pi(si(),this.getPerspective(),t),this.getFrustum().extractFromVPMatrix(t),this.eventEmitter.emit(Ih))},e.rotate=function(t,e,n){throw new Error(ic)},e.pan=function(t,e){throw new Error(ic)},e.dolly=function(t){throw new Error(ic)},e.createLandmark=function(t,e){throw new Error(ic)},e.gotoLandmark=function(t,e){throw new Error(ic)},t}(),jh=g([mr({token:Lh})],jh),Rh=d.defineToken(""),Dh=function(){function t(t,e,n,r,i,o){this.renderingPluginProvider=void 0,this.canvasConfig=void 0,this.renderingContext=void 0,this.sceneGraphService=void 0,this.styleValueRegistry=void 0,this.camera=void 0,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.renderOrderChangedEvent=new Gu(S.RENDER_ORDER_CHANGED),this.hooks={init:new sl,dirtycheck:new dl(["object"]),cull:new dl(["object","camera"]),beginFrame:new hl([]),beforeRender:new hl(["objectToRender"]),render:new hl(["objectToRender"]),afterRender:new hl(["objectToRender"]),endFrame:new hl([]),destroy:new hl([]),pick:new ll(["result"]),pickSync:new dl(["result"]),pointerDown:new hl(["event"]),pointerUp:new hl(["event"]),pointerMove:new hl(["event"]),pointerOut:new hl(["event"]),pointerOver:new hl(["event"]),pointerWheel:new hl(["event"]),pointerCancel:new hl(["event"])},this.renderingPluginProvider=t,this.canvasConfig=e,this.renderingContext=n,this.sceneGraphService=r,this.styleValueRegistry=i,this.camera=o}var e=t.prototype;return e.init=function(){var t=Za(Xa().mark(function t(){var e=this;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.renderingPluginProvider.getContributions({cache:!1}).forEach(function(t){t.apply(e)}),t.next=3,this.hooks.init.promise();case 3:this.inited=!0;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.getStats=function(){return this.stats},e.disableDirtyRectangleRendering=function(){return!this.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering||this.renderingContext.renderReasons.has(mu.CAMERA_CHANGED)},e.render=function(t){var e=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.sceneGraphService.syncHierarchy(this.renderingContext.root),this.sceneGraphService.triggerPendingEvents(),this.renderingContext.renderReasons.size&&this.inited&&(this.renderDisplayObject(this.renderingContext.root,t),this.hooks.beginFrame.call(),this.renderingContext.renderListCurrentFrame.forEach(function(t){e.hooks.beforeRender.call(t),e.hooks.render.call(t),e.hooks.afterRender.call(t)}),this.hooks.endFrame.call(),this.renderingContext.renderListCurrentFrame=[],this.renderingContext.renderReasons.clear())},e.renderDisplayObject=function(t,e){var n=this,r=e.renderer.getConfig(),i=r.enableDirtyCheck,r=r.enableCulling,i=(this.styleValueRegistry.recalc(t),i?this.hooks.dirtycheck.call(t):t),i=(!i||(r=r?this.hooks.cull.call(i,this.camera):i)&&(this.stats.rendered++,this.renderingContext.renderListCurrentFrame.push(r)),t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++,t.sortable),r=!1;i.dirty&&(i.sorted=t.childNodes.slice().sort(ec),i.dirty=!(r=!0)),(i.sorted||t.childNodes).forEach(function(t){n.renderDisplayObject(t,e)}),r&&t.forEach(function(t){n.renderOrderChangedEvent.detail={renderOrder:t.sortable.renderOrder},t.dispatchEvent(n.renderOrderChangedEvent)})},e.destroy=function(){this.inited=!1,this.hooks.destroy.call()},e.dirtify=function(){this.renderingContext.renderReasons.add(mu.DISPLAY_OBJECT_CHANGED)},t}(),Dh=g([p(),v(0,Dr(Rh)),v(1,y(Wc)),v(2,y(Ph)),v(3,y(Yu)),v(4,y(Ws)),v(5,y(Ch))],Dh),Bh=d.defineToken(""),Fh=d.defineToken("",{multiple:!1}),zh=/\[\s*(.*)=(.*)\s*\]/,Gh=function(){function t(){}var e=t.prototype;return e.selectOne=function(e,n){var t,r,i,o=this;return e.startsWith(".")?n.find(function(t){return-1<((null==t?void 0:t.classList)||[]).indexOf(o.getIdOrClassname(e))}):e.startsWith("#")?n.find(function(t){return t.id===o.getIdOrClassname(e)}):e.startsWith("[")?(t=this.getAttribute(e),r=t.name,i=t.value,r?n.find(function(t){return n!==t&&("name"===r?t.name===i:o.attributeToString(t,r)===i)}):null):n.find(function(t){return n!==t&&t.nodeName===e})},e.selectAll=function(e,n){var t,r,i,o=this;return e.startsWith(".")?n.findAll(function(t){return n!==t&&-1<((null==t?void 0:t.classList)||[]).indexOf(o.getIdOrClassname(e))}):e.startsWith("#")?n.findAll(function(t){return n!==t&&t.id===o.getIdOrClassname(e)}):e.startsWith("[")?(t=this.getAttribute(e),r=t.name,i=t.value,r?n.findAll(function(t){return n!==t&&("name"===r?t.name===i:o.attributeToString(t,r)===i)}):[]):n.findAll(function(t){return n!==t&&t.nodeName===e})},e.is=function(t,e){var n,r;return t.startsWith(".")?e.className===this.getIdOrClassname(t):t.startsWith("#")?e.id===this.getIdOrClassname(t):t.startsWith("[")?(n=(r=this.getAttribute(t)).name,r=r.value,"name"===n?e.name===r:this.attributeToString(e,n)===r):e.nodeName===t},e.getIdOrClassname=function(t){return t.substring(1)},e.getAttribute=function(t){var t=t.match(zh),e="",n="";return t&&2<t.length&&(e=t[1].replace(/"/g,""),n=t[2].replace(/"/g,"")),{name:e,value:n}},e.attributeToString=function(t,e){return t.getAttribute&&(t=t.getAttribute(e),!T(t)&&t.toString)?t.toString():""},t}(),Gh=g([p({token:Fh})],Gh),Wh=function(){function t(t){var a,i,o,r,s,c,l,u,h,n,f,d,y=this;this.sceneGraphSelectorFactory=void 0,this.pendingEvents=[],this.boundsChangedEvent=new Gu(S.BOUNDS_CHANGED),this.rotate=(a=$i(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));var i,o,n=t.transformable;null!==t.parentNode&&t.parentNode.transformable?(Qi(r=$i(),e[0],e[1],e[2]),i=y.getRotation(t),o=y.getRotation(t.parentNode),eo(a,o),Ji(a,a),Ki(r,a,r),Ki(n.localRotation,r,i),ro(n.localRotation,n.localRotation),y.dirtifyLocal(t,n)):y.rotateLocal(t,e)}),this.rotateLocal=(i=$i(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));n=t.transformable;Qi(i,e[0],e[1],e[2]),no(n.localRotation,n.localRotation,i),y.dirtifyLocal(t,n)}),this.setEulerAngles=(o=$i(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));n=t.transformable;null!==t.parentNode&&t.parentNode.transformable?(Qi(n.localRotation,e[0],e[1],e[2]),r=y.getRotation(t.parentNode),eo(o,Ji($i(),r)),no(n.localRotation,n.localRotation,o),y.dirtifyLocal(t,n)):y.setLocalEulerAngles(t,e)}),this.translateLocal=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));var i,o,a,s,c,l,u,h,f,d,p,n=t.transformable;Vi(e,Ci())||(i=r=e,o=n.localRotation,a=o[0],s=o[1],c=o[2],o=o[3],l=i[0],u=i[1],i=i[2],p=s*(d=a*u-s*l)-c*(f=c*l-a*i),c=c*(h=s*i-c*u)-a*d,a=a*f-s*h,f*=s=2*o,d*=s,c*=2,a*=2,r[0]=l+(h*=s)+(p*=2),r[1]=u+f+c,r[2]=i+d+a,Ri(n.localPosition,n.localPosition,e),y.dirtifyLocal(t,n))},this.setPosition=(r=si(),s=Ci(),function(t,e){var n=t.transformable;s[0]=e[0],s[1]=e[1],s[2]=e[2]||0,Vi(y.getPosition(t),s)||(Ii(n.position,s),null!==t.parentNode&&t.parentNode.transformable?(e=t.parentNode.transformable,ci(r,e.worldTransform),fi(r,r),Wi(n.localPosition,s,r)):Ii(n.localPosition,s),y.dirtifyLocal(t,n))}),this.setLocalPosition=(c=Ci(),function(t,e){var n=t.transformable;c[0]=e[0],c[1]=e[1],c[2]=e[2]||0,Vi(n.localPosition,c)||(Ii(n.localPosition,c),y.dirtifyLocal(t,n))}),this.translate=(l=Ci(),u=Ci(),h=Ci(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),Vi(e="number"==typeof e?ji(u,e,n,r):e,l)||(Ri(h,y.getPosition(t),e),y.setPosition(t,h))}),this.setRotation=function(){var a=$i();return function(t,e,n,r,i){var o=t.transformable;"number"==typeof e&&(e=to(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable?(n=y.getRotation(t.parentNode),eo(a,n),Ji(a,a),Ki(o.localRotation,a,e),ro(o.localRotation,o.localRotation),y.dirtifyLocal(t,o)):y.setLocalRotation(t,e)}},this.calcLocalTransform=(n=si(),f=Ci(),d=to(0,0,0,1),function(t){var e;0!==t.localSkew[0]||0!==t.localSkew[1]?(_i(t.localTransform,t.localRotation,t.localPosition,E(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||((e=ui(n))[4]=Math.tan(t.localSkew[0]),e[1]=Math.tan(t.localSkew[1]),pi(t.localTransform,t.localTransform,e)),e=_i(n,d,f,t.localScale,t.origin),pi(t.localTransform,t.localTransform,e)):_i(t.localTransform,t.localRotation,t.localPosition,t.localScale,t.origin)}),this.sceneGraphSelectorFactory=t}var e=t.prototype;return e.matches=function(t,e){return this.sceneGraphSelectorFactory().is(t,e)},e.querySelector=function(t,e){return this.sceneGraphSelectorFactory().selectOne(t,e)},e.querySelectorAll=function(t,e){return this.sceneGraphSelectorFactory().selectAll(t,e)},e.attach=function(t,e,n){t.parentNode&&this.detach(t),t.parentNode=e,T(n)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(n,0,t);n=e.sortable,(null!=n&&(null!=(e=n.sorted)&&e.length)||null!=(e=t.style)&&e.zIndex)&&(n.dirty=!0),e=t.transformable;e&&this.dirtifyWorld(t,e),e.frozen&&this.unfreezeParentToRoot(t)},e.detach=function(t){var e,n,r;t.parentNode&&(e=t.transformable,(null!=(n=t.parentNode.sortable)&&(null!=(r=n.sorted)&&r.length)||null!=(r=t.style)&&r.zIndex)&&(n.dirty=!0),-1<(r=t.parentNode.childNodes.indexOf(t))&&t.parentNode.childNodes.splice(r,1),e&&this.dirtifyWorld(t,e),t.parentNode=null)},e.getOrigin=function(t){return t.transformable.origin},e.setOrigin=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));n=t.transformable;Vi(e,n.origin)||((r=n.origin)[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtifyLocal(t,n))},e.setLocalEulerAngles=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=E(e,n,r));n=t.transformable;Qi(n.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(t,n)},e.scaleLocal=function(t,e){var n,r,i=t.transformable;n=i.localScale,r=i.localScale,e=E(e[0],e[1],e[2]||1),n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],this.dirtifyLocal(t,i)},e.setLocalScale=function(t,e){var n=t.transformable,e=E(e[0],e[1],e[2]||n.localScale[2]);Vi(e,n.localScale)||(Ii(n.localScale,e),this.dirtifyLocal(t,n))},e.setLocalRotation=function(t,e,n,r,i){"number"==typeof e&&(e=to(e,n,r,i));n=t.transformable;eo(n.localRotation,e),this.dirtifyLocal(t,n)},e.setLocalSkew=function(t,e,n){"number"==typeof e&&(e=io(e,n));var r,n=t.transformable;r=n.localSkew,e=e,r[0]=e[0],r[1]=e[1],this.dirtifyLocal(t,n)},e.dirtifyLocal=function(t,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))},e.dirtifyWorld=function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)},e.triggerPendingEvents=function(){function r(t,e){i.has(t.entity)||(n.boundsChangedEvent.detail=e,t.dispatchEvent(n.boundsChangedEvent),i.add(t.entity))}var n=this,i=new Set;this.pendingEvents.forEach(function(t){var e=t[0],n=t[1];n.affectChildren?e.forEach(function(t){r(t,n)}):r(e,n)}),this.pendingEvents=[]},e.dirtifyToRoot=function(t,e){void 0===e&&(e=!1);var n=t;for(n.renderable&&(n.renderable.dirty=!0);n;){var r=n.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0),n=n.parentNode}this.pendingEvents.push([t,{affectChildren:e}])},e.getPosition=function(t){var e=t.transformable;return wi(e.position,this.getWorldTransform(t,e))},e.getRotation=function(t){var e=t.transformable;return Ei(e.rotation,this.getWorldTransform(t,e))},e.getScale=function(t){var e=t.transformable;return ki(e.scaling,this.getWorldTransform(t,e))},e.getWorldTransform=function(t,e){return((e=void 0===e?t.transformable:e).localDirtyFlag||e.dirtyFlag)&&(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e)),e.worldTransform},e.getLocalPosition=function(t){return t.transformable.localPosition},e.getLocalRotation=function(t){return t.transformable.localRotation},e.getLocalScale=function(t){return t.transformable.localScale},e.getLocalSkew=function(t){return t.transformable.localSkew},e.getLocalTransform=function(t){t=t.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform},e.setLocalTransform=function(t,e){var n=wi(Ci(),e),r=Ei($i(),e),e=ki(Ci(),e);this.setLocalScale(t,e),this.setLocalPosition(t,n),this.setLocalRotation(t,r)},e.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.getTransformedGeometryBounds=function(t,e,n){e=this.getGeometryBounds(t,e=void 0===e?!1:e);return Tl.isEmpty(e)?null:((n=n||new Tl).setFromTransformedAABB(e,this.getWorldTransform(t)),n)},e.getGeometryBounds=function(t,e){t=t.geometry;return((e=void 0===e?!1:e)?t.renderBounds:t.contentBounds||null)||new Tl},e.getBounds=function(t,e){var n,r,i,o,a=this,s=(void 0===e&&(e=!1),t.renderable);return s.boundsDirty||e||!s.bounds?!s.renderBoundsDirty&&e&&s.renderBounds?s.renderBounds:(n=e?s.renderBounds:s.bounds,r=this.getTransformedGeometryBounds(t,e,n),t.childNodes.forEach(function(t){t=a.getBounds(t,e);t&&(r?r.add(t):(r=n||new Tl).update(t.center,t.halfExtents))}),e&&(t=nc(t))&&((i=this.getTransformedGeometryBounds(t.style.clipPath,!0))&&(o=new Tl).setFromTransformedAABB(i,this.getWorldTransform(t)),r?o&&(r=o.intersection(r)):r=o),(r=r||new Tl)&&(e?s.renderBounds=r:s.bounds=r),e?s.renderBoundsDirty=!1:s.boundsDirty=!1,r):s.bounds},e.getLocalBounds=function(t){if(t.parentNode){var e,n=si(),r=(t.parentNode.transformable&&(n=fi(si(),this.getWorldTransform(t.parentNode))),this.getBounds(t));if(!Tl.isEmpty(r))return(e=new Tl).setFromTransformedAABB(r,n),e}return this.getBounds(t)},e.getBoundingClientRect=function(t){var e,n,r,i=this.getGeometryBounds(t),i=(Tl.isEmpty(i)||(r=new Tl).setFromTransformedAABB(i,this.getWorldTransform(t)),null==(i=t.ownerDocument)||null==(t=i.defaultView)?void 0:t.getContextService().getBoundingClientRect());return r?(e=(t=r.getMin())[0],t=t[1],n=(r=r.getMax())[0],r=r[1],new Nl(e+((null==i?void 0:i.left)||0),t+((null==i?void 0:i.top)||0),n-e,r-t)):new Nl((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)},e.dirtifyWorldInternal=function(t,e){var n=this;e.dirtyFlag||(e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach(function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}),(e=t.renderable)&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0))},e.syncHierarchy=function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}},e.sync=function(t,e){var n;e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag&&(n=(t=t.parentNode)&&t.transformable,null!==t&&n?pi(e.worldTransform,n.worldTransform,e.localTransform):ci(e.worldTransform,e.localTransform),e.dirtyFlag=!1)},e.unfreezeParentToRoot=function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}},t}(),Wh=g([p({token:Yu}),v(0,y(Bh))],Wh),Hh=function(){function t(t){this.sceneGraphService=void 0,this.sceneGraphService=t}return t.prototype.calculator=function(t,e,n,r){var i,o=this;return n instanceof fs&&(n=null),e&&e!==n&&e.parsedStyle.clipPathTargets&&(i=e.parsedStyle.clipPathTargets.indexOf(r),e.parsedStyle.clipPathTargets.splice(i,1)),n&&(n.parsedStyle.clipPathTargets||(n.parsedStyle.clipPathTargets=[]),n.parsedStyle.clipPathTargets.push(r)),r.forEach(function(t){0===t.childNodes.length&&o.sceneGraphService.dirtifyToRoot(t)}),n},t}(),Hh=g([p({token:{token:Ys,named:x.CLIP_PATH}}),v(0,y(Yu))],Hh),Vh=function(){function t(){this.parser=_l,this.mixer=Ml}return t.prototype.calculator=function(t,e,n,r){return n instanceof fs?"none"===n.value?Xs:$s:n},t}(),Vh=g([p({token:[{token:Ys,named:x.PAINT},{token:Ys,named:x.COLOR}]})],Vh),Yh=function(){function t(){this.parser=Gl}return t.prototype.calculator=function(t,e,n){return n instanceof fs?[]:n},t}();function Uh(t){t=t.parsedStyle.fontSize;return T(t)?null:t}function qh(){this.container=void 0}var Xh,$h,Zh,Kh,Jh,Yh=g([p({token:{token:Ys,named:x.FILTER}})],Yh),Qh=function(){function t(){this.parser=Il,this.mixer=Vl}return t.prototype.calculator=function(t,e,n,r,i){if(!Ps.isRelativeUnit(n.unit))return n.value;if(n.unit===m.kPercentage)return 0;if(n.unit===m.kEms){if(r.parentNode){var o=Uh(r.parentNode);if(o)return o*=n.value}return i.addUnresolveProperty(r,t),0}if(n.unit===m.kRems){if(null!=r&&(null!=(o=r.ownerDocument)&&o.documentElement)){o=Uh(r.ownerDocument.documentElement);if(o)return o*=n.value}return i.addUnresolveProperty(r,t),0}},t}(),Qh=g([p({token:[{token:Ys,named:x.LENGTH_PERCENTAGE},{token:Ys,named:x.LENGTH}]})],Qh),tf=function(){function t(){this.mixer=Ul}var e=t.prototype;return e.parser=function(t){t=Dl(Zo(t)?[t]:t),t=1===t.length?[t[0],t[0]]:[t[0],t[1]];return t},e.calculator=function(t,e,n){return n.map(function(t){return t.value})},t}(),tf=g([p({token:{token:Ys,named:x.LENGTH_PERCENTAGE_12}})],tf),ef=function(){function t(){this.mixer=Ul}var e=t.prototype;return e.parser=function(t){t=Dl(Zo(t)?[t]:t),t=1===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:3===t.length?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]];return t},e.calculator=function(t,e,n){return n.map(function(t){return t.value})},t}(),ef=g([p({token:{token:Ys,named:x.LENGTH_PERCENTAGE_14}})],ef),nf=function(t){function e(){return t.apply(this,arguments)||this}return b(e,t),e.prototype.postProcessor=function(t){var e,n,r;switch(t.nodeName){case _.CIRCLE:case _.ELLIPSE:var i=t.parsedStyle,o=i.cx,i=i.cy;T(o)||(c=o),T(i)||(l=i);break;case _.LINE:var o=t.parsedStyle,i=o.x1,a=o.x2,s=o.y1,o=o.y2,c=Math.min(i,a),l=Math.min(s,o),u=0;break;case _.RECT:case _.IMAGE:case _.GROUP:case _.HTML:case _.TEXT:case _.MESH:T(t.parsedStyle.x)||(c=t.parsedStyle.x),T(t.parsedStyle.y)||(l=t.parsedStyle.y)}t.nodeName!==_.PATH&&t.nodeName!==_.POLYLINE&&t.nodeName!==_.POLYGON&&(t.parsedStyle.defX=c||0,t.parsedStyle.defY=l||0),T(c)&&T(l)&&T(u)||(e=(r=t.getLocalPosition())[0],n=r[1],r=r[2],t.setLocalPosition(T(c)?e:c,T(l)?n:l,T(u)?r:u))},e}(Qh),nf=g([p({token:{token:Ys,named:x.COORDINATE}})],nf),rf=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){n=null==(n=n=n instanceof fs?null:n)?void 0:n.cloneNode(!0);return n&&(n.style.isMarker=!0),n},t}(),rf=g([p({token:{token:Ys,named:x.MARKER}})],rf),of=function(){function t(){this.mixer=Vl,this.parser=Hl}return t.prototype.calculator=function(t,e,n){return n.value},t}(),of=g([p({token:{token:Ys,named:x.NUMBER}})],of),af=function(){function t(){this.parser=Hl,this.mixer=Yl(0,1)}var e=t.prototype;return e.calculator=function(t,e,n){return n.value},e.postProcessor=function(t){var e;!t.attributes.offsetPath||(e=t.attributes.offsetPath.nodeName)!==_.LINE&&e!==_.PATH&&e!==_.POLYLINE||(e=t.attributes.offsetPath.getPoint(t.parsedStyle.offsetDistance))&&t.setLocalPosition(e.x,e.y)},t}(),af=g([p({token:{token:Ys,named:x.OFFSET_DISTANCE}})],af),sf=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){var i;return e&&e!==n&&e.style.offsetPathTargets&&(i=e.style.offsetPathTargets.indexOf(r),e.style.offsetPathTargets.splice(i,1)),n&&(n.style.offsetPathTargets||(n.style.offsetPathTargets=[]),n.style.offsetPathTargets.push(r)),n},t}(),sf=g([p({token:{token:Ys,named:x.OFFSET_PATH}})],sf),cf=function(){function t(){this.parser=Hl,this.mixer=Yl(0,1)}return t.prototype.calculator=function(t,e,n){return n.value},t}(),cf=g([p({token:{token:Ys,named:x.OPACITY_VALUE}})],cf),lf=function(){function t(){this.parser=$l,this.mixer=Zl}var e=t.prototype;return e.calculator=function(t,e,n){return n instanceof fs&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:[],totalLength:0,zCommandIndexes:[],rect:new Nl(0,0,0,0)}:n},e.postProcessor=function(t){var e,n;t.nodeName===_.PATH&&(e=(n=t.parsedStyle).defX,n=n.defY,t.setLocalPosition(void 0===e?0:e,void 0===n?0:n))},t}(),lf=g([p({token:{token:Ys,named:x.PATH}})],lf),uf=function(){function t(){this.parser=Kl}return t.prototype.postProcessor=function(t){var e,n;t.nodeName!==_.POLYGON&&t.nodeName!==_.POLYLINE||(e=(n=t.parsedStyle).defX,n=n.defY,t.setLocalPosition(e,n))},t}(),uf=g([p({token:{token:Ys,named:x.LIST_OF_POINTS}})],uf),hf=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).mixer=Yl(0,1/0),t}return b(t,i),t}(Qh),hf=g([p({token:{token:Ys,named:x.SHADOW_BLUR}})],hf),ff=function(){function t(){}var e=t.prototype;return e.calculator=function(t,e,n,r){return n instanceof fs?"unset"===n.value?"":n.value:n},e.postProcessor=function(t){t.nodeValue=""+t.parsedStyle.text||""},t}(),ff=g([p({token:{token:Ys,named:x.TEXT}})],ff),df=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){var i,o=r.getAttribute("text");return o&&(i=o,"capitalize"===n.value?i=o.charAt(0).toUpperCase()+o.slice(1):"lowercase"===n.value?i=o.toLowerCase():"uppercase"===n.value&&(i=o.toUpperCase()),r.parsedStyle.text=i),n.value},t}(),df=g([p({token:{token:Ys,named:x.TEXT_TRANSFORM}})],df),pf=function(){function t(){this.tmpMat4=si(),this.parser=nu,this.mixer=du}var e=t.prototype;return e.calculator=function(t,e,n,r){return n instanceof fs?[]:n},e.postProcessor=function(c){var l=this,t=c.parsedStyle,e=t.transform,u=t.defX,h=t.defY;e&&e.length&&(c.resetLocalTransform(),c.setLocalPosition(u,h),e.forEach(function(t){var e,n,r,i,o,a,s=t.t,t=t.d;"scale"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[1,1],c.scaleLocal(a[0],a[1],1)):"scalex"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[1],c.scaleLocal(a[0],1,1)):"scaley"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[1],c.scaleLocal(1,a[0],1)):"scalez"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[1],c.scaleLocal(1,1,a[0])):"scale3d"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[1,1,1],c.scaleLocal(a[0],a[1],a[2])):"translate"===s?(a=t||[Fs,Fs],c.translateLocal(a[0].value,a[1].value,0)):"translatex"===s?(a=t||[Fs],c.translateLocal(a[0].value,0,0)):"translatey"===s?(a=t||[Fs],c.translateLocal(0,a[0].value,0)):"translatez"===s?(a=t||[Fs],c.translateLocal(0,0,a[0].value)):"translate3d"===s?(a=t||[Fs,Fs,Fs],c.translateLocal(a[0].value,a[1].value,a[2].value)):"rotate"===s?(a=t||[zs],c.rotateLocal(0,0,a[0].value)):"rotatex"===s?(a=t||[zs],c.rotateLocal(a[0].value,0,0)):"rotatey"===s?(a=t||[zs],c.rotateLocal(0,a[0].value,0)):"rotatez"===s?(a=t||[zs],c.rotateLocal(0,0,a[0].value)):"rotate3d"!==s&&("skew"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[0,0],c.setLocalSkew(lc(a[0]),lc(a[1]))):"skewx"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[0],c.setLocalSkew(lc(a[0]),c.getLocalSkew()[1])):"skewy"===s?(a=(null==t?void 0:t.map(function(t){return t.value}))||[0],c.setLocalSkew(c.getLocalSkew()[0],lc(a[0]))):"matrix"===s?(e=(a=t.map(function(t){return t.value}))[0],n=a[1],r=a[2],i=a[3],o=a[4],a=a[5],c.setLocalTransform(li(l.tmpMat4,e,n,0,0,r,i,0,0,0,0,1,0,o+u,a+h,0,1))):"matrix3d"===s&&(li.apply(Ni,[l.tmpMat4].concat(t.map(function(t){return t.value}))),l.tmpMat4[12]+=u,l.tmpMat4[13]+=h,c.setLocalTransform(l.tmpMat4)))}))},t}(),pf=g([p({token:{token:Ys,named:x.TRANSFORM}})],pf),yf=function(){this.parser=pu},yf=g([p({token:{token:Ys,named:x.TRANSFORM_ORIGIN}})],yf),gf=function(){function t(){this.parser=Hl}var e=t.prototype;return e.calculator=function(t,e,n,r){return n.value},e.postProcessor=function(t){var e;t.parentNode&&(e=(t=t.parentNode).renderable,t=t.sortable,e&&(e.dirty=!0),t&&(t.dirty=!0))},t}(),gf=g([p({token:{token:Ys,named:x.Z_INDEX}})],gf),vf=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:x.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:x.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:x.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:x.PAINT},{n:"stroke",int:!0,k:["none"],d:"none",syntax:x.PAINT},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:x.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:x.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:x.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:x.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:x.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:x.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:x.OFFSET_PATH},{n:"offsetDistance",int:!0,syntax:x.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:x.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:x.FILTER},{n:"clipPath",syntax:x.CLIP_PATH},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:x.TRANSFORM},{n:"transformOrigin",p:100,d:function(t){return t===_.CIRCLE||t===_.ELLIPSE?"center":t===_.TEXT?"text-anchor":"left top"},l:!0,syntax:x.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(t){return t===_.CIRCLE||t===_.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:x.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:x.COORDINATE},{n:"cy",int:!0,d:"0",syntax:x.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:x.COORDINATE},{n:"y",int:!0,d:"0",syntax:x.COORDINATE},{n:"z",int:!0,d:"0",syntax:x.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:x.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:x.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:x.COORDINATE},{n:"y1",int:!0,l:!0,syntax:x.COORDINATE},{n:"z1",int:!0,l:!0,syntax:x.COORDINATE},{n:"x2",int:!0,l:!0,syntax:x.COORDINATE},{n:"y2",int:!0,l:!0,syntax:x.COORDINATE},{n:"z2",int:!0,l:!0,syntax:x.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:x.PATH,p:50},{n:"points",l:!0,syntax:x.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:x.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:x.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:x.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:x.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:x.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:x.NUMBER,d:function(t){return t===_.PATH||t===_.POLYGON||t===_.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","end","left","right"],d:"start"},{n:"markerStart",syntax:x.MARKER},{n:"markerEnd",syntax:x.MARKER},{n:"markerMid",syntax:x.MARKER},{n:"markerStartOffset",syntax:x.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:x.LENGTH,l:!0,int:!0,d:"0"}],mf={},bf={},xf={},wf=Yo(function(t){return t.sort(function(t,e){return xf[t]-xf[e]})}),kf=Ci(),Ef=Ci(),_f=Ci(),Mf=function(){function t(t,e,n){var r=this;this.sceneGraphService=void 0,this.propertySyntaxFactory=void 0,this.geometryUpdaterFactory=void 0,this.sceneGraphService=t,this.propertySyntaxFactory=e,this.geometryUpdaterFactory=n,vf.forEach(function(t){r.registerMetadata(t)})}var e=t.prototype;return e.registerMetadata=function(e){[e.n].concat(e.a||[]).forEach(function(t){mf[t]=e,xf[t]=e.p||0})},e.unregisterMetadata=function(t){delete mf[t]},e.getPropertySyntax=function(t){return this.propertySyntaxFactory(t)},e.processProperties=function(n,r,t){var i=this,t=t=void 0===t?{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[]}:t,o=t.skipUpdateAttribute,e=t.skipParse,a=t.forceUpdateGeometry,t=t.usedAttributes,s=a,a=Object.keys(r);a.forEach(function(t){var t=ws(t,r[t]),e=t[0],t=t[1];o||(n.attributes[e]=t),!s&&null!=(t=mf[e])&&t.l&&(s=!0)}),e||a.forEach(function(t){n.computedStyle[t]=i.parseProperty(t,n.attributes[t],n)}),(a=wf(null!=t&&t.length?Array.from(new Set(a.concat(t))):a)).forEach(function(t){t in n.computedStyle&&(n.parsedStyle[t]=i.computeProperty(t,n.computedStyle[t],n))}),s&&this.updateGeometry(n),a.forEach(function(t){t in n.parsedStyle&&i.postProcessProperty(t,n)}),n.children.length&&a.forEach(function(e){e in n.parsedStyle&&i.isPropertyInheritable(e)&&n.children.forEach(function(t){t.internalSetAttribute(e,null,{skipUpdateAttribute:!0,skipParse:!0})})})},e.parseProperty=function(t,e,n){var r,t=mf[t],i=e;return"unset"===(e=""!==e&&!T(e)?e:"unset")||"initial"===e||"inherit"===e?i=Is(e):t&&(r=t.k,t=(t=t.syntax)&&this.getPropertySyntax(t),r&&-1<r.indexOf(e)?i=Is(e):t&&t.parser&&(i=t.parser(e,n))),i},e.computeProperty=function(t,e,n){var r=mf[t],i="g-root"===n.id,o=e;if(r){var a=r.syntax,s=r.inh,r=r.d;if(e instanceof fs){var c=e.value;if("initial"===(c="unset"===c?s&&!i?"inherit":"initial":c))T(r)||(e=this.parseProperty(t,gs(r)?r(n.nodeName):r,n));else if("inherit"===c)return s=this.tryToResolveProperty(n,t,{inherited:!0}),T(s)?void this.addUnresolveProperty(n,t):s}i=a&&this.getPropertySyntax(a);o=i&&i.calculator?(r=n.parsedStyle[t],i.calculator(t,r,e,n,this)):e instanceof fs?e.value:e}return o},e.postProcessProperty=function(t,e){var t=mf[t];t&&t.syntax&&((t=t.syntax&&this.getPropertySyntax(t.syntax))&&t.postProcessor&&t.postProcessor(e))},e.addUnresolveProperty=function(t,e){bf[t.entity]||(bf[t.entity]=[]),-1===bf[t.entity].indexOf(e)&&bf[t.entity].push(e)},e.tryToResolveProperty=function(t,e,n){var r,n=(n=void 0===n?{}:n).inherited;if(n&&(t.parentElement&&(n=t.parentElement,r=e,!bf[n.entity]||0===bf[n.entity].length||bf[n.entity].includes(r))))return"unset"===(n=t.parentElement.parsedStyle[e])||"initial"===n||"inherit"===n?void 0:n},e.recalc=function(e){var n,t=bf[e.entity];t&&t.length&&(n={},t.forEach(function(t){n[t]=e.attributes[t]}),this.processProperties(e,n),delete bf[e.entity])},e.updateGeometry=function(t){var s,e,n,r,i,o,a,c,l,u,h,f,d,p,y,g,v,m=this.geometryUpdaterFactory(t.nodeName);m&&((s=t.geometry).contentBounds||(s.contentBounds=new Tl),s.renderBounds||(s.renderBounds=new Tl),e=t.parsedStyle,d=(m=m.update(e,t)).width,f=m.height,p=void 0===(p=m.depth)?0:p,h=void 0===(h=m.offsetX)?0:h,v=void 0===(v=m.offsetY)?0:v,m=void 0===(m=m.offsetZ)?0:m,n=d<0,r=f<0,p=ji(kf,Math.abs(d)/2,Math.abs(f)/2,p/2),c=e.stroke,l=e.lineWidth,u=e.increasedLineWidthForHitTesting,g=e.shadowType,y=e.shadowColor,i=void 0===(i=e.filter)?[]:i,o=e.transformOrigin,a=e.anchor,t.nodeName===_.TEXT&&delete e.anchor,d=ji(Ef,(1-2*(a&&a[0]||0))*d/2+h,(1-2*(a&&a[1]||0))*f/2+v,(1-2*(a&&a[2]||0))*p[2]+m),s.contentBounds.update(d,p),h=t.nodeName===_.POLYLINE||t.nodeName===_.POLYGON||t.nodeName===_.PATH?Math.SQRT2:.5,c&&!c.isNone&&Ri(p,p,ji(_f,f=((l||0)+(u||0))*h,f,0)),s.renderBounds.update(d,p),y&&g&&"inner"!==g&&(m=(v=s.renderBounds).min,c=v.max,l=e.shadowBlur||0,u=e.shadowOffsetX||0,h=e.shadowOffsetY||0,f=m[0]-l+u,d=c[0]+l+u,p=m[1]-l+h,y=c[1]+l+h,m[0]=Math.min(m[0],f),c[0]=Math.max(c[0],d),m[1]=Math.min(m[1],p),c[1]=Math.max(c[1],y),s.renderBounds.setMinMax(m,c)),i.forEach(function(t){var e,n,r,i,o,a=t.name,t=t.params;"blur"===a?(i=t[0].value,s.renderBounds.update(s.renderBounds.center,Ri(s.renderBounds.halfExtents,s.renderBounds.halfExtents,E(i,i,0)))):"drop-shadow"===a&&(i=t[0].value,a=t[1].value,t=t[2].value,e=(n=s.renderBounds).min,n=n.max,r=e[0]-t+i,i=n[0]+t+i,o=e[1]-t+a,t=n[1]+t+a,e[0]=Math.min(e[0],r),n[0]=Math.max(n[0],i),e[1]=Math.min(e[1],o),n[1]=Math.max(n[1],t),s.renderBounds.setMinMax(e,n))}),a=e.anchor,g=(n?-1:1)*Bl(o[0],0,t),v=(r?-1:1)*Bl(o[1],1,t),g-=(n?-1:1)*(a&&a[0]||0)*s.contentBounds.halfExtents[0]*2,v-=(r?-1:1)*(a&&a[1]||0)*s.contentBounds.halfExtents[1]*2,t.setOrigin(g,v),this.sceneGraphService.dirtifyToRoot(t))},e.isPropertyInheritable=function(t){t=mf[t];return!!t&&t.inh},t}(),Mf=g([p({token:Ws}),v(0,y(Yu)),v(1,y(Vs)),v(2,y(Eu))],Mf),pt=jr(function(t){t(oh),t(jh),t(Gh),t({token:Bh,useFactory:function(t){return function(){return t.container.get(Fh)}}}),t(Wh),t(Nu),t(Ru),t(Mu),t(Su),t(Pu),t(Du),t(Tu),t(Au),t(Ou),t({token:Eu,useFactory:function(e){var n={};return function(t){return n[t]||e.container.isBoundNamed(_u,t)&&(n[t]=e.container.getNamed(_u,t)),n[t]}}}),t(of),t(ku),t(Hh),t(Vh),t(Yh),t(Qh),t(tf),t(ef),t(nf),t(af),t(sf),t(cf),t(lf),t(uf),t(hf),t(ff),t(df),t(pf),t(yf),t(gf),t(rf),t({token:Vs,useFactory:function(e){var n={};return function(t){return n[t]||e.container.isBoundNamed(Ys,t)&&(n[t]=e.container.getNamed(Ys,t)),n[t]}}}),t(Mf)}),o=function(){function t(t){this.plugins=[],this.config=void 0,this.config=Qa({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1},t)}var e=t.prototype;return e.registerPlugin=function(e){-1===this.plugins.findIndex(function(t){return t===e})&&this.plugins.push(e)},e.unregisterPlugin=function(e){var t=this.plugins.findIndex(function(t){return t===e});-1<t&&this.plugins.splice(t,1)},e.getPlugins=function(){return this.plugins},e.getPlugin=function(e){return this.plugins.find(function(t){return t.name===e})},e.getConfig=function(){return this.config},e.setConfig=function(t){Object.assign(this.config,t)},t}(),Sf=d.defineToken(""),Tf=((ut=function(){function t(t,e){this.strategyProvider=void 0,this.renderingContext=void 0,this.strategyProvider=t,this.renderingContext=e}return t.prototype.apply=function(t){var n=this,r=this.strategyProvider.getContributions();t.hooks.cull.tap(Xh.tag,function(e){var t;return e&&(t=e.cullable,0===r.length?t.visible=-1<n.renderingContext.unculledEntities.indexOf(e.entity):t.visible=r.every(function(t){return t.isVisible(e)}),!e.isCulled()&&e.isVisible()?e:(e.dispatchEvent(new Gu(S.CULLED)),null))}),t.hooks.afterRender.tap(Xh.tag,function(t){t.cullable.visibilityPlaneMask=-1})},t}()).tag="Culling",Xh=ut),Tf=Xh=g([p({contrib:Rh}),v(0,Dr(Sf)),v(1,y(Ph))],Tf),Of=((Te=function(){function t(){}return t.prototype.apply=function(e){e.hooks.dirtycheck.tap($h.tag,function(t){return t&&(t.renderable.dirty||e.disableDirtyRectangleRendering()?t:null)})},t}()).tag="DirtyCheck",$h=Te),Of=$h=g([p({contrib:Rh})],Of),Af=((h=function(){function t(t,e,n,r,i){var o=this;this.canvasConfig=void 0,this.contextService=void 0,this.renderingService=void 0,this.renderingContext=void 0,this.eventService=void 0,this.autoPreventDefault=!1,this.rootPointerEvent=new eh(null),this.rootWheelEvent=new nh(null),this.onPointerMove=function(t){var e,n=null==(e=o.renderingContext.root)||null==(e=e.ownerDocument)?void 0:e.defaultView;if(!n.supportsTouchEvents||"touch"!==t.pointerType){for(var r=is(o.normalizeToPointerEvent(t,n));!(i=r()).done;){var i=i.value,i=o.bootstrapEvent(o.rootPointerEvent,i,n);o.eventService.mapEvent(i)}o.setCursor(o.eventService.cursor)}},this.canvasConfig=t,this.contextService=e,this.renderingService=n,this.renderingContext=r,this.eventService=i}var e=t.prototype;return e.apply=function(t){var o=this,a=this.renderingContext.root.ownerDocument.defaultView;this.eventService.setPickHandler(function(){var e=Za(Xa().mark(function t(e){var n;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.renderingService.hooks.pick.promise({position:e,picked:[],topmost:!0});case 2:return n=t.sent,n=n.picked,t.abrupt("return",n[0]||null);case 5:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),t.hooks.pointerWheel.tap(Zh.tag,function(t){t=o.normalizeWheelEvent(t);o.eventService.mapEvent(t)}),t.hooks.pointerDown.tap(Zh.tag,function(t){if(!a.supportsTouchEvents||"touch"!==t.pointerType){var e=o.normalizeToPointerEvent(t,a);!o.autoPreventDefault||!e[0].isNormalized||!t.cancelable&&"cancelable"in t||t.preventDefault();for(var n=is(e);!(r=n()).done;){var r=r.value,r=o.bootstrapEvent(o.rootPointerEvent,r,a);o.eventService.mapEvent(r)}o.setCursor(o.eventService.cursor)}}),t.hooks.pointerUp.tap(Zh.tag,function(t){if(!a.supportsTouchEvents||"touch"!==t.pointerType){for(var e=o.contextService.getDomElement(),n=e&&t.target&&t.target!==e&&e.contains&&!e.contains(t.target)?"outside":"",r=is(o.normalizeToPointerEvent(t,a));!(i=r()).done;){var i=i.value,i=o.bootstrapEvent(o.rootPointerEvent,i,a);i.type+=n,o.eventService.mapEvent(i)}o.setCursor(o.eventService.cursor)}}),t.hooks.pointerMove.tap(Zh.tag,this.onPointerMove),t.hooks.pointerOver.tap(Zh.tag,this.onPointerMove),t.hooks.pointerOut.tap(Zh.tag,this.onPointerMove)},e.getViewportXY=function(t){var e,n=t.offsetX,r=t.offsetY,i=t.clientX,t=t.clientY;return t=!this.canvasConfig.supportsCSSTransform||T(n)||T(r)?(e=(i=this.eventService.client2Viewport(new Pl(i,t))).x,i.y):(e=n,r),{x:e,y:t}},e.bootstrapEvent=function(t,e,n){t.view=n,t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var n=this.getViewportXY(e),r=n.x,n=n.y,r=(t.viewport.x=r,t.viewport.y=n,this.eventService.viewport2Canvas(t.viewport)),n=r.x,r=r.y;return t.canvas.x=n,t.canvas.y=r,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=ac[t.type]||t.type),t},e.normalizeWheelEvent=function(t){var e=this.rootWheelEvent,n=(this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,this.getViewportXY(t)),r=n.x,n=n.y,r=(e.viewport.x=r,e.viewport.y=n,this.eventService.viewport2Canvas(e.viewport)),n=r.x,r=r.y;return e.canvas.x=n,e.canvas.y=r,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e},e.transferMouseData=function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null},e.setCursor=function(t){this.contextService.applyCursorStyle(t||this.canvasConfig.cursor||"default")},e.normalizeToPointerEvent=function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];Jo(i.button)&&(i.button=0),Jo(i.buttons)&&(i.buttons=1),Jo(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),Jo(i.width)&&(i.width=i.radiusX||1),Jo(i.height)&&(i.height=i.radiusY||1),Jo(i.tiltX)&&(i.tiltX=0),Jo(i.tiltY)&&(i.tiltY=0),Jo(i.pointerType)&&(i.pointerType="touch"),Jo(i.pointerId)&&(i.pointerId=i.identifier||0),Jo(i.pressure)&&(i.pressure=i.force||.5),Jo(i.twist)&&(i.twist=0),Jo(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else e.isMouseEvent(t)?(Jo((e=t).isPrimary)&&(e.isPrimary=!0),Jo(e.width)&&(e.width=1),Jo(e.height)&&(e.height=1),Jo(e.tiltX)&&(e.tiltX=0),Jo(e.tiltY)&&(e.tiltY=0),Jo(e.pointerType)&&(e.pointerType="mouse"),Jo(e.pointerId)&&(e.pointerId=1),Jo(e.pressure)&&(e.pressure=.5),Jo(e.twist)&&(e.twist=0),Jo(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0,n.push(e)):n.push(t);return n},t}()).tag="Event",Zh=h),Af=Zh=g([p({contrib:Rh}),v(0,y(Wc)),v(1,y(Bu)),v(2,y(Dh)),v(3,y(Ph)),v(4,y(Nh))],Af),Pf=[_.CIRCLE,_.ELLIPSE,_.IMAGE,_.RECT,_.LINE,_.POLYLINE,_.POLYGON,_.TEXT,_.PATH,_.HTML],Nf=function(){function t(t){this.camera=void 0,this.camera=t}var e=t.prototype;return e.isVisible=function(t){var e,n,r,i=t.cullable;return!i.enable||(e=t.getRenderBounds(),!Tl.isEmpty(e)&&(n=this.camera.getFrustum(),r=null==(r=t.parentNode)||null==(r=r.cullable)?void 0:r.visibilityPlaneMask,i.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,e,r||Sl.INDETERMINATE,n.planes),i.visible=i.visibilityPlaneMask!==Sl.OUTSIDE,i.visible))},e.computeVisibilityWithPlaneMask=function(t,e,n,r){if(n===Sl.OUTSIDE||n===Sl.INSIDE)return n;for(var i=Sl.INSIDE,o=-1<Pf.indexOf(t.nodeName),a=0,s=r.length;a<s;++a){var c=1<<a;if(0!=(n&c)&&(!o||4!==a&&5!==a)){var l=r[a],u=l.normal,l=l.distance;if(zi(u,e.getPositiveFarPoint(r[a]))+l<0)return Sl.OUTSIDE;zi(u,e.getNegativeFarPoint(r[a]))+l<0&&(i|=c)}}return i},t}(),Nf=g([p({contrib:Sf}),v(0,y(Ch))],Nf),Cf=((s=function(){function t(t,e,n,r){this.renderingContext=void 0,this.styleValueRegistry=void 0,this.sceneGraphService=void 0,this.rBush=void 0,this.toSync=new Set,this.renderingContext=t,this.styleValueRegistry=e,this.sceneGraphService=n,this.rBush=r}var e=t.prototype;return e.pushToSync=function(t){var e=this;t.forEach(function(t){e.toSync.add(t)})},e.apply=function(r){function e(t){t.target.renderable.dirty=!0,r.dirtify()}function n(t){var e=t.detail.affectChildren,n=t.target;e&&n.forEach(function(t){a.pushToSync([t])}),a.pushToSync(t.composedPath().slice(0,-2)),r.dirtify()}function i(t){var e=t.target;a.pushToSync(t.composedPath().slice(0,-2)),a.styleValueRegistry.recalc(e),a.sceneGraphService.dirtifyToRoot(e),r.dirtify()}function o(t){var e=t.target,n=e.rBushNode;n.aabb&&a.rBush.remove(n.aabb),a.toSync.delete(e),a.sceneGraphService.dirtifyToRoot(t.target),r.dirtify()}var a=this;r.hooks.init.tapPromise(Kh.tag,Za(Xa().mark(function t(){return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.renderingContext.root.addEventListener(S.MOUNTED,i),a.renderingContext.root.addEventListener(S.UNMOUNTED,o),a.renderingContext.root.addEventListener(S.ATTR_MODIFIED,e),a.renderingContext.root.addEventListener(S.BOUNDS_CHANGED,n);case 4:case"end":return t.stop()}},t)}))),r.hooks.destroy.tap(Kh.tag,function(){a.renderingContext.root.removeEventListener(S.MOUNTED,i),a.renderingContext.root.removeEventListener(S.UNMOUNTED,o),a.renderingContext.root.removeEventListener(S.ATTR_MODIFIED,e),a.renderingContext.root.removeEventListener(S.BOUNDS_CHANGED,n)}),r.hooks.endFrame.tap(Kh.tag,function(){a.syncRTree()})},e.syncRTree=function(){var a=this,s=[];Array.from(this.toSync).filter(function(t){return t.isConnected}).forEach(function(t){var e,n,r,i=t.rBushNode,o=(i&&i.aabb&&a.rBush.remove(i.aabb),t.getRenderBounds());o&&(e=(n=o.getMin())[0],n=n[1],r=(o=o.getMax())[0],o=o[1],i.aabb||(i.aabb={}),i.aabb.id=t.entity,i.aabb.minX=e,i.aabb.minY=n,i.aabb.maxX=r,i.aabb.maxY=o),!i.aabb||isNaN(i.aabb.maxX)||isNaN(i.aabb.maxX)||isNaN(i.aabb.minX)||isNaN(i.aabb.minY)||s.push(i.aabb)}),this.rBush.load(s),s.length=0,this.toSync.clear()},t}()).tag="Prepare",Kh=s),Cf=Kh=g([p({contrib:Rh}),v(0,y(Ph)),v(1,y(Ws)),v(2,y(Yu)),v(3,y(Vu))],Cf),Lf=jr(function(t){Br.register(t,Rh,{cache:!1}),Br.register(t,Sf,{cache:!1}),t({token:Vu,useValue:new Yr}),t(Dh),t(Nh),t(Af),t(Cf),t(Of),t(Tf),t(Nf)}),If=((r=Jh=Jh||{}).READY="ready",r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",function(k){function t(t){var e=k.call(this)||this,n=(e.container=Gr.createChild(),e.document=void 0,e.customElements=void 0,e.requestAnimationFrame=void 0,e.cancelAnimationFrame=void 0,e.devicePixelRatio=void 0,e.supportsPointerEvents=void 0,e.supportsTouchEvents=void 0,e.isTouchEvent=void 0,e.isMouseEvent=void 0,e.Element=O,e.frameId=void 0,e.eventService=void 0,e.renderingService=void 0,e.inited=!1,e.readyPromise=void 0,e.resolveReadyPromise=void 0,e.mountEvent=new Gu(S.MOUNTED),e.unmountEvent=new Gu(S.UNMOUNTED),e.beforeRenderEvent=new Gu(Jh.BEFORE_RENDER),e.afterRenderEvent=new Gu(Jh.AFTER_RENDER),e.document=new Hu,e.document.defaultView=ns(e),e.customElements=new Fu,t.container),r=t.canvas,i=t.offscreenCanvas,o=t.width,a=t.height,s=t.devicePixelRatio,c=t.renderer,l=t.background,u=t.cursor,h=t.document,f=t.requestAnimationFrame,d=t.cancelAnimationFrame,p=t.createImage,y=t.supportsPointerEvents,g=t.supportsTouchEvents,v=t.supportsCSSTransform,m=t.isTouchEvent,t=t.isMouseEvent,b=(b=n,x=ns(e),b&&(b="string"==typeof b?b:b.id||Qs++,Js[b]&&Js[b].destroy(),Js[b]=x),o),x=a,w=s;return r&&(w=1<=(w=s||tc&&window.devicePixelRatio||1)?Math.ceil(w):1,b=o||(("auto"===(o=rc(s=r,"width"))?s.offsetWidth:parseFloat(o))||r.width/w),x=a||(("auto"===(o=rc(s=r,"height"))?s.offsetHeight:parseFloat(o))||r.height/w)),e.devicePixelRatio=w,e.requestAnimationFrame=null!=f?f:Ua.bind(globalThis),e.cancelAnimationFrame=null!=d?d:qa.bind(globalThis),e.supportsTouchEvents=null!=g?g:"ontouchstart"in globalThis,e.supportsPointerEvents=null!=y?y:!!globalThis.PointerEvent,e.isTouchEvent=null!=m?m:function(t){return e.supportsTouchEvents&&t instanceof globalThis.TouchEvent},e.isMouseEvent=null!=t?t:function(t){return!globalThis.MouseEvent||t instanceof globalThis.MouseEvent&&(!e.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))},e.initRenderingContext({container:n,canvas:r,width:b,height:x,renderer:c,offscreenCanvas:i,devicePixelRatio:w,cursor:u||"default",background:l||"transparent",createImage:p,document:h,supportsCSSTransform:v}),e.initDefaultCamera(b,x),Za(Xa().mark(function t(){return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initRenderer(c);case 2:e.dispatchEvent(new Gu(Jh.READY)),e.readyPromise&&e.resolveReadyPromise();case 4:case"end":return t.stop()}},t)}))(),e}b(t,k);var e=t.prototype;return e.initRenderingContext=function(t){var e=this;this.container.register({token:Wc,useValue:t}),this.container.register({token:Ph,useValue:{root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}),this.document.documentElement.addEventListener(S.CHILD_INSERTED,function(t){e.mountChildren(t.detail.child)}),this.document.documentElement.addEventListener(S.CHILD_REMOVED,function(t){e.unmountChildren(t.detail.child)})},e.initDefaultCamera=function(t,e){var n=Gr.get(Lh),r=(n.setType(bu.EXPLORING,xu.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),(n.canvas=this).container.get(Ph));n.eventEmitter.on(Ih,function(){r.renderReasons.add(mu.CAMERA_CHANGED)}),this.container.register({token:Ch,useValue:n})},e.getConfig=function(){return this.container.get(Wc)},e.getContainer=function(){return this.container},e.getRoot=function(){return this.document.documentElement},e.getCamera=function(){return this.container.get(Ch)},e.getContextService=function(){return this.container.get(Bu)},e.getEventService=function(){return this.eventService},e.getRenderingService=function(){return this.renderingService},e.getRenderingContext=function(){return this.container.get(Ph)},e.getRBushRoot=function(){return this.container.get(Vu)},e.getStats=function(){return this.getRenderingService().getStats()},e.destroy=function(t,e){void 0===t&&(t=!0),(e=void 0===e?!1:e)||this.dispatchEvent(new Gu(Jh.BEFORE_DESTROY)),this.frameId&&(this.getConfig().cancelAnimationFrame||cancelAnimationFrame)(this.frameId);var n=this.getRoot();this.unmountChildren(n),t&&this.document.destroy(),this.getContextService().destroy(),this.getRenderingService().destroy(),e||this.dispatchEvent(new Gu(Jh.AFTER_DESTROY))},e.changeSize=function(t,e){this.resize(t,e)},e.resize=function(t,e){var n=this.container.get(Wc),n=(n.width=t,n.height=e,this.getContextService().resize(t,e),this.container.get(Ch)),r=n.getProjectionMode();n.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),r===wu.ORTHOGRAPHIC?n.setOrthographic(t/-2,t/2,e/2,e/-2,n.getNear(),n.getFar()):n.setAspect(t/e),this.dispatchEvent(new Gu(Jh.RESIZE,{width:t,height:e}))},e.appendChild=function(t,e){return this.document.documentElement.appendChild(t,e)},e.insertBefore=function(t,e){return this.document.documentElement.insertBefore(t,e)},e.removeChild=function(t){return this.document.documentElement.removeChild(t)},e.removeChildren=function(){this.document.documentElement.removeChildren()},e.render=function(){this.dispatchEvent(this.beforeRenderEvent),this.container.isBound(Dh)&&this.container.get(Dh).render(this.getConfig()),this.dispatchEvent(this.afterRenderEvent)},e.run=function(){var e=this;(function t(){e.render(),e.frameId=requestAnimationFrame(t)})()},e.initRenderer=function(){var e=Za(Xa().mark(function t(e){var n;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Renderer is required.");case 2:return this.inited=!1,this.readyPromise=void 0,this.loadCommonContainerModule(),this.loadRendererContainerModule(e),n=this.container.get(Bu),this.renderingService=this.container.get(Dh),this.eventService=this.container.get(Nh),this.eventService.init(),t.next=12,n.init();case 12:return t.next=14,this.renderingService.init();case 14:this.inited=!0,this.getRoot().forEach(function(t){t=t.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0,t.dirty=!0)}),this.mountChildren(this.getRoot()),e.getConfig().enableAutoRendering&&this.run();case 18:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.loadCommonContainerModule=function(){this.container.unload(Lf),this.container.load(Lf,!0)},e.loadRendererContainerModule=function(t){var e=this;t.getPlugins().forEach(function(t){t.container=e.container,t.init()})},e.setRenderer=function(){var e=Za(Xa().mark(function t(e){var n,r;return Xa().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.getConfig()).renderer===e)return t.abrupt("return");t.next=3;break;case 3:return r=n.renderer,n.renderer=e,this.destroy(!1,!0),[].concat(null==r?void 0:r.getPlugins()).reverse().forEach(function(t){t.destroy()}),t.next=9,this.initRenderer(e);case 9:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.setCursor=function(t){this.container.get(Wc).cursor=t,this.getContextService().applyCursorStyle(t)},e.unmountChildren=function(t){var e,n=this;this.inited&&(e=[],t.forEach(function(t){t.isConnected&&e.push(t)}),e.reverse().forEach(function(t){t instanceof lh&&t.disconnectedCallback&&t.disconnectedCallback(),t.dispatchEvent(n.unmountEvent),t!==n.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1}))},e.mountChildren=function(t){var e=this;this.inited?t.forEach(function(t){t.isConnected||(t.ownerDocument=e.document,t.isConnected=!0,t.dispatchEvent(e.mountEvent),t instanceof lh&&t.connectedCallback&&t.connectedCallback())}):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName)},e.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.getPointByClient=function(t,e){return this.client2Viewport({x:t,y:e})},e.getClientByPoint=function(t,e){return this.viewport2Client({x:t,y:e})},Ja(t,[{key:"ready",get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise(function(t){e.resolveReadyPromise=function(){t(e)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}}]),t}(t)),jf=(Gr.load(pt),Gr.get(Ws));function Rf(t,e){return(Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Df="undefined"!=typeof Float32Array?Float32Array:Array;function Bf(t,e,n){var r,i,o,a,s,c,l,u,h,f,d,p,y=n[0],g=n[1],n=n[2];e===t?(t[12]=e[0]*y+e[4]*g+e[8]*n+e[12],t[13]=e[1]*y+e[5]*g+e[9]*n+e[13],t[14]=e[2]*y+e[6]*g+e[10]*n+e[14],t[15]=e[3]*y+e[7]*g+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*y+s*g+h*n+e[12],t[13]=i*y+c*g+f*n+e[13],t[14]=o*y+l*g+d*n+e[14],t[15]=a*y+u*g+p*n+e[15])}function Ff(){var t=new Df(3);return Df!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function zf(t){var e=new Df(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Gf(t,e,n){var r=new Df(3);return r[0]=t,r[1]=e,r[2]=n,r}function Wf(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Hf(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}function Vf(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Yf(t,e,n,r){var i=e[0],o=e[1],e=e[2];t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=e+r*(n[2]-e)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Uf=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],e=e[2]-t[2];return Math.hypot(n,r,e)};function qf(){var t=new Df(4);return Df!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Xf(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function $f(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3],a=n[0],s=n[1],c=n[2],n=n[3];return t[0]=r*n+e*a+i*c-o*s,t[1]=i*n+e*s+o*a-r*c,t[2]=o*n+e*c+r*s-i*a,t[3]=e*n-r*a-i*s-o*c,t}Ff(),e=new Df(4),Df!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);Ff(),Gf(1,0,0),Gf(0,1,0),qf(),qf(),Q=new Df(9),Df!=Float32Array&&(Q[1]=0,Q[2]=0,Q[3]=0,Q[5]=0,Q[6]=0,Q[7]=0),Q[0]=1,Q[4]=1,Q[8]=1;i=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).landmarks=[],t.landmarkAnimationID=void 0,t}t=i,(n=e).prototype=Object.create(t.prototype),Rf(n.prototype.constructor=n,t);var n=e.prototype;return n.rotate=function(t,e,n){if(this.relElevation=sc(e),this.relAzimuth=sc(t),this.relRoll=sc(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===bu.EXPLORING){e=Xf(qf(),[1,0,0],lc((this.rotateWorld?1:-1)*this.relElevation)),t=Xf(qf(),[0,1,0],lc((this.rotateWorld?1:-1)*this.relAzimuth)),n=Xf(qf(),[0,0,1],lc(this.relRoll)),t=$f(qf(),t,e),t=$f(qf(),t,n),g=(e=new Df(16),Df!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,n=e,t=(e=t)[0],p=e[1],y=e[2],e=e[3],t*=x=t+t,v=p*x,p*=w=p+p,m=y*x,b=y*w,y*=g=y+y,x*=e,w*=e,e*=g,n[0]=1-p-y,n[1]=v+e,n[2]=m-w,n[3]=0,n[4]=v-e,n[5]=1-t-y,n[6]=b+x,n[7]=0,n[8]=m+w,n[9]=b-x,n[10]=1-t-p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n);Bf(this.matrix,this.matrix,[0,0,-this.distance]),v=this.matrix,e=this.matrix,y=g,m=e[0],w=e[1],b=e[2],x=e[3],t=e[4],p=e[5],n=e[6],g=e[7],r=e[8],i=e[9],o=e[10],a=e[11],s=e[12],c=e[13],l=e[14],e=e[15],u=y[0],h=y[1],f=y[2],d=y[3],v[0]=u*m+h*t+f*r+d*s,v[1]=u*w+h*p+f*i+d*c,v[2]=u*b+h*n+f*o+d*l,v[3]=u*x+h*g+f*a+d*e,u=y[4],h=y[5],f=y[6],d=y[7],v[4]=u*m+h*t+f*r+d*s,v[5]=u*w+h*p+f*i+d*c,v[6]=u*b+h*n+f*o+d*l,v[7]=u*x+h*g+f*a+d*e,u=y[8],h=y[9],f=y[10],d=y[11],v[8]=u*m+h*t+f*r+d*s,v[9]=u*w+h*p+f*i+d*c,v[10]=u*b+h*n+f*o+d*l,v[11]=u*x+h*g+f*a+d*e,u=y[12],h=y[13],f=y[14],d=y[15],v[12]=u*m+h*t+f*r+d*s,v[13]=u*w+h*p+f*i+d*c,v[14]=u*b+h*n+f*o+d*l,v[15]=u*x+h*g+f*a+d*e,Bf(this.matrix,this.matrix,[0,0,this.distance])}else{if(90<Math.abs(this.elevation))return this;this.computeMatrix()}var r,i,o,a,s,c,l,u,h,f,d,p,y,g,v,m,b,x,w;return this._getAxes(),this.type===bu.ORBITING||this.type===bu.EXPLORING?this._getPosition():this.type===bu.TRACKING&&this._getFocalPoint(),this._update(),this},n.pan=function(t,e){t=cc(t,e,0),e=zf(this.position);return Hf(e,e,Vf(Ff(),this.right,t[0])),Hf(e,e,Vf(Ff(),this.up,t[1])),this._setPosition(e),this.triggerUpdate(),this},n.dolly=function(t){var e=this.forward,n=zf(this.position),t=(this.dollyingStep,this.distance+t*this.dollyingStep),t=Math.max(Math.min(t,this.maxDistance),this.minDistance)-this.distance;return n[0]+=t*e[0],n[1]+=t*e[1],n[2]+=t*e[2],this._setPosition(n),this.type===bu.ORBITING||this.type===bu.EXPLORING?this._getDistance():this.type===bu.TRACKING&&Hf(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this},n.createLandmark=function(t,e){var e=e=void 0===e?{}:e,n=e.position,n=void 0===n?this.position:n,r=e.focalPoint,r=void 0===r?this.focalPoint:r,i=e.roll,e=e.zoom,o=Gr.get(Lh),i=(o.setType(this.type,void 0),o.setPosition(n[0],n[1]||this.position[1],n[2]||this.position[2]),o.setFocalPoint(r[0],r[1]||this.focalPoint[1],r[2]||this.focalPoint[2]),o.setRoll(i||this.roll),o.setZoom(e||this.zoom),{name:t,matrix:(n=o.getWorldTransform(),(r=new Df(16))[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r),right:zf(o.right),up:zf(o.up),forward:zf(o.forward),position:zf(o.getPosition()),focalPoint:zf(o.getFocalPoint()),distanceVector:zf(o.getDistanceVector()),distance:o.getDistance(),dollyingStep:o.getDollyingStep(),azimuth:o.getAzimuth(),elevation:o.getElevation(),roll:o.getRoll(),relAzimuth:o.relAzimuth,relElevation:o.relElevation,relRoll:o.relRoll,zoom:o.getZoom()});return this.landmarks.push(i),i},n.gotoLandmark=function(e,t){var n,s,r,i,c,l,u,h,f,d,p,y,g=this,o=(void 0===t&&(t={}),Xo(e)?this.landmarks.find(function(t){return t.name===e}):e);o&&(n=void 0===(n=(t=Zo(t)?{duration:t}:t).easing)?"linear":n,r=t.duration,s=void 0===r?100:r,r=void 0===(r=t.easingFunction)?void 0:r,t=t.onfinish,i=void 0===t?void 0:t,c=.01,0===s?(this.syncFromLandmark(o),i&&i()):(void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID),l=o.position,u=o.focalPoint,h=o.zoom,f=o.roll,d=r||Gr.get(Vc)(n),y=function(){g.setFocalPoint(u),g.setPosition(l),g.setRoll(f),g.setZoom(h),g.computeMatrix(),g.triggerUpdate(),i&&i()},this.canvas.requestAnimationFrame(function t(e){var n,r,i,o,a,e=e-(p=void 0===p?e:p);s<e||(n=d(e/s),r=Ff(),i=Ff(),o=1,a=0,Yf(r,g.focalPoint,u,n),Yf(i,g.position,l,n),a=g.roll*(1-n)+f*n,o=g.zoom*(1-n)+h*n,g.setFocalPoint(r),g.setPosition(i),g.setRoll(a),g.setZoom(o),Uf(r,u)+Uf(i,l)<=c)?y():(g.computeMatrix(),g.triggerUpdate(),e<s&&(g.landmarkAnimationID=g.canvas.requestAnimationFrame(t)))})))},n.syncFromLandmark=function(t){var e,n;this.matrix=(e=this.matrix,n=t.matrix,e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e),this.right=Wf(this.right,t.right),this.up=Wf(this.up,t.up),this.forward=Wf(this.forward,t.forward),this.position=Wf(this.position,t.position),this.focalPoint=Wf(this.focalPoint,t.focalPoint),this.distanceVector=Wf(this.distanceVector,t.distanceVector),this.azimuth=t.azimuth,this.elevation=t.elevation,this.roll=t.roll,this.relAzimuth=t.relAzimuth,this.relElevation=t.relElevation,this.relRoll=t.relRoll,this.dollyingStep=t.dollyingStep,this.distance=t.distance,this.zoom=t.zoom},e}(jh);function Zf(){Zf=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Kf(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function Jf(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Kf(r,e,n,i,o,"next",t)}function o(t){Kf(r,e,n,i,o,"throw",t)}i(void 0)})}}function Qf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function td(){return(td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function ed(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function nd(n,r){return function(t,e){r(t,e,n)}}i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([mr({token:Lh})],i),Gr.register(i),O.prototype.getCount=function(){return this.childElementCount},O.prototype.getParent=function(){return this.parentElement},O.prototype.getChildren=function(){return this.children},O.prototype.getFirst=function(){return this.firstElementChild},O.prototype.getLast=function(){return this.lastElementChild},O.prototype.getChildByIndex=function(t){return this.children[t]||null},O.prototype.add=function(t,e){return this.appendChild(t,e)},O.prototype.setClip=function(t){this.style.clipPath=t},O.prototype.getClip=function(){return this.style.clipPath||null},O.prototype.set=function(t,e){this.config[t]=e},O.prototype.get=function(t){return this.config[t]},O.prototype.moveTo=function(t,e,n){return this.setPosition(t,e=void 0===e?0:e,n=void 0===n?0:n),this},O.prototype.move=function(t,e,n){return this.setPosition(t,e=void 0===e?0:e,n=void 0===n?0:n),this},O.prototype.setZIndex=function(t){return this.style.zIndex=t,this};function rd(){var n=this;this.resolve=void 0,this.reject=void 0,this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function id(e){return void 0===e&&(e=0),new Promise(function(t){setTimeout(function(){t()},e)})}var od,ad,sd,cd=d.defineToken(""),ld=d.defineToken(""),ud=0,hd=function(){function t(t){this.options=void 0,this.contextId=void 0,this.workQueue=[],this.mode=void 0,this.layoutChildrenFactory=void 0,this.fragmentResultFactory=void 0,this.layoutFragmentFactory=void 0,this.options=t,this.contextId=""+ud++,this.mode=t.mode,this.layoutChildrenFactory=t.layoutChildrenFactory,this.fragmentResultFactory=t.fragmentResultFactory,this.layoutFragmentFactory=t.layoutFragmentFactory}var e=t.prototype;return e.appendWorkTask=function(t){this.workQueue.push(t)},e.clearWorkQueue=function(){this.workQueue=[]},t}(),hd=ed([p(),nd(0,y(ld))],hd),fd=d.defineToken(""),dd=d.defineToken(""),pd=d.defineToken(""),yd=function(t,e,n){this._layoutContext=void 0,this._node=void 0,this.options=void 0,this.layoutContext=void 0,this.inlineSize=void 0,this.blockSize=void 0,this.node=void 0,this.childFragments=void 0,this.data=void 0,this._layoutContext=t,this._node=e,this.options=n,this.layoutContext=t,this.inlineSize=null==n?void 0:n.inlineSize,this.blockSize=null==n?void 0:n.blockSize,this.childFragments=null==n?void 0:n.childFragments,this.data=n.data,this.node=e},yd=ed([mr(),nd(0,y(hd)),nd(1,y(pd)),nd(2,y(dd))],yd),gd=((f=od=od||{}).Layout="layout",f.IntrinsicSizes="intrinsic-sizes",(c=ad=ad||{}).LAYOUT="display",c.LEFT="left",c.TOP="top",c.BOTTOM="bottom",c.RIGHT="right",c.WIDTH="width",c.HEIGHT="height",c.MIN_WIDTH="minWidth",c.MAX_WIDTH="maxWidth",c.MIN_HEIGHT="minHeight",c.MAX_HEIGHT="maxHeight",c.BOX_SIZING="boxSizing",c.PADDING="padding",c.PADDING_TOP="paddingTop",c.PADDING_BOTTOM="paddingBottom",c.PADDING_START="paddingLeft",c.PADDING_END="paddingRight",c.MARGIN="margin",c.MARGIN_TOP="marginTop",c.MARGIN_BOTTOM="marginBottom",c.MARGIN_START="marginLeft",c.MARGIN_END="marginRight",c.BORDER="border",c.BORDER_TOP="borderTop",c.BORDER_BOTTOM="borderBottom",c.BORDER_START="borderLeft",c.BORDER_END="borderRight",c.FLEX_DIRECTION="flexDirection",c.FLEX_WRAP="flexWrap",c.FLEX_FLOW="flexFlow",c.ALIGN_ITEMS="alignItems",c.ALIGN_CONTENT="alignContent",c.JUSTIFY_CONTENT="justifyContent",c.FLEX="flex",c.ALIGN_SELF="alignSelf",c.FLEX_SHRINK="flexShrink",c.FLEX_BASIS="flexBasis",c.FLEX_GROW="flexGrow",c.OFFSET_WIDTH="offsetWidth",c.OFFSET_HEIGHT="offsetHeight",c.ORDER="order",d.defineToken("")),vd=d.defineToken(""),md=function(){function t(t,e){this._layoutContext=void 0,this.options=void 0,this.node=void 0,this.styleMap=void 0,this.layoutContext=void 0,this._layoutContext=t,this.options=e,this.layoutContext=t,this.node=e.node,this.styleMap=e.node.getAllStyle()}var e=t.prototype;return e.intrinsicSizes=function(){var t=new rd;return this.layoutContext.appendWorkTask({layoutChild:this,taskType:od.IntrinsicSizes,deferred:t}),t.promise},e.layoutNextFragment=function(t){if(this.layoutContext.mode===od.IntrinsicSizes)throw new Error("Not Supported: cant call layoutNextFragment in intrinsicSizes");var e=new rd;return this.layoutContext.appendWorkTask({layoutConstraints:t,layoutChild:this,taskType:od.Layout,deferred:e}),e.promise},t}(),md=ed([mr(),nd(0,y(hd)),nd(1,y(vd))],md),bd=d.defineToken(""),xd=d.defineToken(""),wd=[0,0,0,0],kd=function(t){this.options=void 0,this.inlineStart=void 0,this.inlineEnd=void 0,this.blockStart=void 0,this.blockEnd=void 0,this.inline=void 0,this.block=void 0;var t=(this.options=t).node.getAllStyle(),e=null!=(e=null==(e=t.get(ad.PADDING_TOP))?void 0:e.value)?e:0,n=null!=(n=null==(n=t.get(ad.PADDING_END))?void 0:n.value)?n:0,r=null!=(r=null==(r=t.get(ad.PADDING_BOTTOM))?void 0:r.value)?r:0,i=null!=(i=null==(i=t.get(ad.PADDING_START))?void 0:i.value)?i:0,o=null!=(o=null==(o=t.get(ad.PADDING_TOP))?void 0:o.value)?o:0,a=null!=(a=null==(a=t.get(ad.PADDING_END))?void 0:a.value)?a:0,s=null!=(s=null==(s=t.get(ad.PADDING_BOTTOM))?void 0:s.value)?s:0,t=null!=(t=null==(t=t.get(ad.PADDING_START))?void 0:t.value)?t:0;this.blockStart=e+wd[0]+o,this.inlineStart=n+wd[1]+a,this.blockEnd=r+wd[2]+s,this.inlineEnd=i+wd[3]+t,this.block=this.blockStart+this.blockEnd,this.inline=this.inlineStart+this.inlineEnd},kd=ed([mr(),nd(0,y(xd))],kd),Ed=function(){function t(t,e,n){this._layoutRegistry=void 0,this._layoutContextFactory=void 0,this._layoutEdgesFactory=void 0,this.layoutRegistry=void 0,this.layoutContextFactory=void 0,this.layoutEdgesFactory=void 0,this._layoutRegistry=t,this._layoutContextFactory=e,this._layoutEdgesFactory=n,this.layoutRegistry=t,this.layoutContextFactory=e,this.layoutEdgesFactory=n}var e=t.prototype;return e.computeLayout=function(){var n=Jf(Zf().mark(function t(e,n){return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.determineIntrinsicSizes(e,e.children);case 2:return t.next=4,this.calculateLayout(e,e.children,n);case 4:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),e.determineAllIntrinsicSizes=function(){var e=Jf(Zf().mark(function t(e){return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),e.getLayoutDefinitionName=function(t){t=t.getAllStyle().get(ad.LAYOUT);if(t)return t.value;throw new Error("layout property not found")},e.determineIntrinsicSizes=function(){var n=Jf(Zf().mark(function t(e,n){var r;return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getLayoutDefinitionName(e),t.next=3,this.invokeIntrinsicSizesCallback(r,e,n);case 3:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),e.invokeIntrinsicSizesCallback=function(){var r=Jf(Zf().mark(function t(e,n,r){var i,o,a,s,c;return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=this.layoutRegistry.getLayout(e),a=new c,i=this.layoutContextFactory({mode:od.IntrinsicSizes}),c=c.inputProperties,c=void 0===c?[]:c,o=[],r.forEach(function(t){t=i.layoutChildrenFactory({node:t});o.push(t)}),s=this.layoutEdgesFactory({node:n}),c=n.getStyle.apply(n,c),a=a.intrinsicSizes(o,s,c),(s=this.runWorkQueue(a,i.workQueue)).next(),t.next=13,id();case 13:c=s.next().value,i.clearWorkQueue(),n.setIntrisicSizes(c);case 16:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.calculateLayout=function(){var r=Jf(Zf().mark(function t(e,n,r){var i;return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getLayoutDefinitionName(e),t.next=3,this.invokeLayoutCallback(i,e,n,r);case 3:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.invokeLayoutCallback=function(){var i=Jf(Zf().mark(function t(e,n,r,i){var o,a,s,c,l,u;return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=this.layoutRegistry.getLayout(e),u=new c,o=this.layoutContextFactory({mode:od.Layout}),c=c.inputProperties,c=void 0===c?[]:c,a=[],r.forEach(function(t){t=o.layoutChildrenFactory({node:t});a.push(t)}),s=this.layoutEdgesFactory({node:n}),c=n.getStyle.apply(n,c),u=u.layout(a,s,i,c),(s=this.runWorkQueue(u,o.workQueue)).next(),t.next=13,id();case 13:c=s.next().value,o.clearWorkQueue(),l=c instanceof yd?c:o.fragmentResultFactory(c),u=o.layoutFragmentFactory({inlineSize:l.inlineSize,blockSize:l.blockSize,data:l.data}),n.setComputedLayout(u),r.forEach(function(t,e){t.setComputedLayout(l.childFragments[e])});case 19:case"end":return t.stop()}},t,this)}));return function(t,e,n,r){return i.apply(this,arguments)}}(),e.runWorkQueue=Zf().mark(function t(e,n){var r,i=this;return Zf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(t){var e,n,r,i;return t.isRejected||t.isFulfilled||(r=n=!(e=!0),(t=t.then(function(t){return e=!(r=!0),i=t},function(t){throw e=!(n=!0),t})).isFulfilled=function(){return r},t.isPending=function(){return e},t.isRejected=function(){return n},t.getFullFilledValue=function(){return i}),t}(e),0<n.length&&r.isPending()&&n.forEach(function(t){var e,n,r;t.taskType===od.IntrinsicSizes&&(e=t.layoutChild,n=t.deferred,e=e.node,n.resolve(i.getNodeIntrisicSizes(e))),t.taskType===od.Layout&&(n=t.layoutChild,e=t.deferred,t=t.layoutConstraints,r=n.node,n=n.layoutContext,r=i.getNodeFragment(r,t),e.resolve(n.layoutFragmentFactory(r)))}),void(t.next=4);case 4:if(r.isFulfilled()){t.next=6;break}throw new Error("promise not fullfilled!");case 6:return t.abrupt("return",r.getFullFilledValue());case 7:case"end":return t.stop()}},t)}),e.getNodeIntrisicSizes=function(t){var e,n=t.getAllStyle();return{minContentInlineSize:(null==(e=n.get(ad.MIN_WIDTH))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.minContentInlineSize)||(null==(e=n.get(ad.WIDTH))?void 0:e.value)||0,maxContentInlineSize:(null==(e=n.get(ad.MAX_WIDTH))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.maxContentInlineSize)||(null==(e=n.get(ad.WIDTH))?void 0:e.value)||0,minContentBlockSize:(null==(e=n.get(ad.MIN_HEIGHT))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.minContentBlockSize)||(null==(e=n.get(ad.HEIGHT))?void 0:e.value)||0,maxContentBlockSize:(null==(e=n.get(ad.MAX_HEIGHT))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.maxContentBlockSize)||(null==(t=n.get(ad.HEIGHT))?void 0:t.value)||0}},e.getNodeFragment=function(t,e){var n;return{inlineSize:(null==(n=t.getComputedLayout())?void 0:n.inlineSize)||(null==(n=t.getAllStyle().get(ad.MIN_WIDTH))?void 0:n.value)||(null==(n=t.getAllStyle().get(ad.WIDTH))?void 0:n.value)||0,blockSize:(null==(n=t.getComputedLayout())?void 0:n.blockSize)||(null==(n=t.getAllStyle().get(ad.MIN_HEIGHT))?void 0:n.value)||(null==(n=t.getAllStyle().get(ad.HEIGHT))?void 0:n.value)||0,data:e.data}},t}(),Ed=ed([p(),nd(0,y(K)),nd(1,y(cd)),nd(2,y(bd))],Ed),_d=d.defineToken(""),Md=d.defineToken(""),Sd=function(t,e){this._layoutContext=void 0,this.options=void 0,this.layoutContext=void 0,this.inlineSize=void 0,this.blockSize=void 0,this.inlineOffset=void 0,this.blockOffset=void 0,this.data=void 0,this._layoutContext=t,this.options=e,this.layoutContext=t,this.inlineSize=e.inlineSize,this.blockSize=e.blockSize,this.inlineOffset=0,this.blockOffset=0,this.data=e.data},Sd=ed([mr(),nd(0,y(hd)),nd(1,y(Md))],Sd),Td=((Mt=function(){function t(){this.registry=new Map}var e,n,r=t.prototype;return r.hasLayout=function(t){return this.registry.has(t)},r.getLayout=function(t){if(this.hasLayout(t=void 0===t?"absolute":t))return this.registry.get(t);throw new Error("invalid layout property: "+t)},r.updateLayout=function(t,e){this.registry.set(t,e)},r.registerLayout=function(t,e){if(""===t)throw new TypeError("layout name cant't be empty");if(sd.reservedLayout.includes(t))throw new Error("layout name '"+t+"' is a system reserved layout name, please use another name");if(this.hasLayout(t))throw new Error("layout '"+t+"' already exist.");this.registry.set(t,e)},r.deleteLayout=function(t){this.registry.delete(t)},r=t,(e=[{key:"size",get:function(){return this.registry.size}}])&&Qf(r.prototype,e),n&&Qf(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}()).reservedLayout=[],sd=Mt),Td=sd=ed([p({token:K})],Td),l=jr(function(t){t(Td),t(Ed),t(kd),t({token:bd,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:xd,useValue:t}),e.get(kd)}}}),t({token:cd,useFactory:function(o){return function(t){var e=o.container.createChild(),n=(e.register(hd),e.register(md),e.register({token:gd,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:vd,useValue:t}),e.get(md)}}}),e.register(yd),e.register({token:fd,useFactory:function(r){return function(t,e){var n=r.container.createChild();return n.register({token:dd,useValue:t}),n.register({token:pd,useValue:e}),n.get(yd)}}}),e.register(Sd),e.register({token:_d,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:Md,useValue:t}),e.get(Sd)}}}),e.get(gd)),r=e.get(_d),i=e.get(fd);return e.register({token:ld,useValue:td({},t,{layoutChildrenFactory:n,layoutFragmentFactory:r,fragmentResultFactory:i})}),e.get(hd)}}})});function Od(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ad(t,e,n){e&&Od(t.prototype,e),n&&Od(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function Pd(t,e){return(Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Gr.load(l),Gr.get(Ed);function Nd(b,e,x,n){if(!(0<=b&&b<=1&&0<=x&&x<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===e&&x===n)return function(t){return t};for(var w=new(ep?Float32Array:Array)(11),t=0;t<11;++t)w[t]=op(.1*t,b,x);function r(t){for(var e=0,n=1;10!==n&&w[n]<=t;++n)e+=.1;var r=e+.1*((t-w[--n])/(w[n+1]-w[n])),i=ap(r,b,x);if(.001<=i){for(var o=t,a=r,s=b,c=x,l=0;l<Jd;++l){var u=ap(a,s,c);if(0===u)return a;a-=(op(a,s,c)-o)/u}return a}if(0===i)return r;for(var h,f,d=t,p=e,y=e+.1,g=b,v=x,m=0;0<(h=op(f=p+(y-p)/2,g,v)-d)?y=f:p=f,Math.abs(h)>Qd&&++m<tp;);return f}return function(t){return 0===t||1===t?t:op(r(t),e,n)}}function Cd(t){return Math.pow(t,2)}function Ld(t){return Math.pow(t,3)}function Id(t){return Math.pow(t,4)}function jd(t){return Math.pow(t,5)}function Rd(t){return Math.pow(t,6)}function Dd(t){return 1-Math.cos(t*Math.PI/2)}function Bd(t){return 1-Math.sqrt(1-t*t)}function Fd(t){return t*t*(3*t-2)}function zd(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}function Gd(t,e){var n=(e=e=void 0===e?[]:e)[0],e=void 0===(e=e[1])?.5:e,n=$o(Number(void 0===n?1:n),1,10),e=$o(Number(e),.1,2);return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-e/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/e)}function Wd(t,e,n){var r=(e=e=void 0===e?[]:e)[0],i=void 0===(i=e[1])?100:i,o=void 0===(o=e[2])?10:o,e=void 0===(e=e[3])?0:e,r=$o(void 0===r?1:r,.1,1e3),i=$o(i,.1,1e3),o=$o(o,.1,1e3),e=$o(e,.1,1e3),a=Math.sqrt(i/r),i=(o=o/(2*Math.sqrt(i*r)))<1?a*Math.sqrt(1-o*o):0,r=o<1?(o*a-e)/i:-e+a,e=n?n*t/1e3:t,e=o<1?Math.exp(-e*o*a)*(+Math.cos(i*e)+r*Math.sin(i*e)):(1+r*e)*Math.exp(-e*a);return 0===t||1===t?t:1-e}function Hd(t,e){var e=e=void 0===e?[]:e,n=void 0===(n=e[0])?10:n;return("start"==e[1]?Math.ceil:Math.floor)($o(t,0,1)*n)/n}function Vd(t,e){var n=(e=e=void 0===e?[]:e)[0],r=e[1],i=e[2],e=e[3];return Nd(n,r,i,e)(t)}function Yd(r){return function(t,e,n){return 1-r(1-t,e=void 0===e?[]:e,n)}}function Ud(r){return function(t,e,n){return void 0===e&&(e=[]),t<.5?r(2*t,e,n)/2:1-r(-2*t+2,e,n)/2}}function qd(r){return function(t,e,n){return void 0===e&&(e=[]),t<.5?(1-r(1-2*t,e,n))/2:(r(2*t-1,e,n)+1)/2}}function Xd(t){return t}var $d=function(i){var t,e;function n(t,e,n,r){t=i.call(this,t)||this;return t.currentTime=void 0,t.timelineTime=void 0,t.currentTime=n,t.timelineTime=r,t.target=e,t.type="finish",t.bubbles=!1,t.currentTarget=e,t.defaultPrevented=!1,t.eventPhase=t.AT_TARGET,t.timeStamp=Date.now(),t.currentTime=n,t.timelineTime=r,t}return e=i,(t=n).prototype=Object.create(e.prototype),Pd(t.prototype.constructor=t,e),n}(zu),Zd=0,Kd=function(){function t(t,e){this.effect=void 0,this.timeline=void 0,this.id=void 0,this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this.oldPlayState=void 0,this._holdTime=void 0,this.readyPromise=void 0,this.finishedPromise=void 0,this.resolveReadyPromise=void 0,this.rejectReadyPromise=void 0,this.resolveFinishedPromise=void 0,this.rejectFinishedPromise=void 0,this.onfinish=void 0,this.oncancel=void 0,this.onframe=void 0,this._currentTime=0,this._startTime=void 0,this._playbackRate=1,this._totalDuration=void 0,this._inEffect=void 0,this._inTimeline=!0,this.onremove=void 0,((this.effect=t).animation=this).timeline=e,this.id=""+Zd++,this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null==(t=this.effect)?void 0:t.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}var e=t.prototype;return e.updatePromises=function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},e.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()},e.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()},e.finish=function(){this.updatePromises(),this._idle||(this.currentTime=0<this._playbackRate?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.cancel=function(){this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()},e.updatePlaybackRate=function(t){this.playbackRate=t},e.targetAnimations=function(){var t;return(null==(t=this.effect)?void 0:t.target).getAnimations()},e.markTarget=function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)},e.unmarkTarget=function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)},e.tick=function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))},e.rewind=function(){if(0<=this.playbackRate)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}},e.persist=function(){throw new Error(ic)},e.addEventListener=function(t,e,n){throw new Error(ic)},e.removeEventListener=function(t,e,n){throw new Error(ic)},e.dispatchEvent=function(t){throw new Error(ic)},e.commitStyles=function(){throw new Error(ic)},e.ensureAlive=function(){var t;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null==(t=this.effect)||!t.update(-1)):this._inEffect=!(null==(t=this.effect)||!t.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))},e.tickCurrentTime=function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=0<this._playbackRate?this._totalDuration:0),this.ensureAlive())},e.fireEvents=function(t){var e,n=this;this._isFinished?this._finishedFlag||(this.onfinish&&(e=new $d(null,this,this.currentTime,t),setTimeout(function(){n.onfinish&&n.onfinish(e)})),this._finishedFlag=!0):(this.onframe&&"running"===this.playState&&(t=new $d(null,this,this.currentTime,t),this.onframe(t)),this._finishedFlag=!1)},Ad(t,[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(t,e){n.resolveReadyPromise=function(){t(n)},n.rejectReadyPromise=function(){e(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(t,e){n.resolveFinishedPromise=function(){t(n)},n.rejectFinishedPromise=function(){e(new Error)}}),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;t=Number(t),isNaN(t)||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null==(e=this.timeline)?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:"startTime",get:function(){return this._startTime},set:function(t){null!==t&&(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle||(this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){var e;t!==this._playbackRate&&(this.updatePromises(),e=this.currentTime,this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises())}},{key:"_isFinished",get:function(){return!this._idle&&(0<this._playbackRate&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}}]),t}(),Jd=4,Qd=1e-7,tp=10,ep="function"==typeof Float32Array,np=function(t,e){return 1-3*e+3*t},rp=function(t,e){return 3*e-6*t},ip=function(t){return 3*t},op=function(t,e,n){return((np(e,n)*t+rp(e,n))*t+ip(e))*t},ap=function(t,e,n){return 3*np(e,n)*t*t+2*rp(e,n)*t+ip(e)},J=Nd(.42,0,1,1),sp={steps:Hd,"step-start":function(t){return Hd(t,[1,"start"])},"step-end":function(t){return Hd(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":Vd,ease:function(t){return Vd(t,[.25,.1,.25,1])},in:J,out:Yd(J),"in-out":Ud(J),"out-in":qd(J),"in-quad":Cd,"out-quad":Yd(Cd),"in-out-quad":Ud(Cd),"out-in-quad":qd(Cd),"in-cubic":Ld,"out-cubic":Yd(Ld),"in-out-cubic":Ud(Ld),"out-in-cubic":qd(Ld),"in-quart":Id,"out-quart":Yd(Id),"in-out-quart":Ud(Id),"out-in-quart":qd(Id),"in-quint":jd,"out-quint":Yd(jd),"in-out-quint":Ud(jd),"out-in-quint":qd(jd),"in-expo":Rd,"out-expo":Yd(Rd),"in-out-expo":Ud(Rd),"out-in-expo":qd(Rd),"in-sine":Dd,"out-sine":Yd(Dd),"in-out-sine":Ud(Dd),"out-in-sine":qd(Dd),"in-circ":Bd,"out-circ":Yd(Bd),"in-out-circ":Ud(Bd),"out-in-circ":qd(Bd),"in-back":Fd,"out-back":Yd(Fd),"in-out-back":Ud(Fd),"out-in-back":qd(Fd),"in-bounce":zd,"out-bounce":Yd(zd),"in-out-bounce":Ud(zd),"out-in-bounce":qd(zd),"in-elastic":Gd,"out-elastic":Yd(Gd),"in-out-elastic":Ud(Gd),"out-in-elastic":qd(Gd),spring:Wd,"spring-in":Wd,"spring-out":Yd(Wd),"spring-in-out":Ud(Wd),"spring-out-in":qd(Wd)},cp=function(t){return("-"===(t=(t=t).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})).charAt(0)?t.substring(1):t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()};function lp(n,r){return function(t){var e;return 1<=t?1:(t+=r*(e=1/n))-t%e}}var n="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",up=new RegExp("cubic-bezier\\("+n+","+n+","+n+","+n+"\\)"),hp=/steps\(\s*(\d+)\s*\)/,fp=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function dp(t){var e=up.exec(t);return e?Nd.apply(void 0,e.slice(1).map(Number)):(e=hp.exec(t))?lp(Number(e[1]),0):(e=fp.exec(t))?lp(Number(e[1]),{start:1,middle:.5,end:0}[e[2]]):sp[cp(t)]||sp.linear}function pp(t){return Math.abs((0!==(e=t).duration&&0!==e.iterations?("auto"===e.duration?0:Number(e.duration))*(null!=(e=e.iterations)?e:1):0)/(t.playbackRate||1));var e}var yp=0,gp=1,vp=2,mp=3;function bp(t,e,n){l=t,i=n;var r,i,o,a,s,c=null===(c=e)?yp:(r=i.endTime,c<Math.min(i.delay,r)?gp:c>=Math.min(i.delay+l+i.endDelay,r)?vp:mp),l=function(t,e,n,r,i){switch(r){case gp:return"backwards"===e||"both"===e?0:null;case mp:return n-i;case vp:return"forwards"===e||"both"===e?t:null;case yp:return null}}(t,n.fill,e,c,n.delay);return null===l?null:(i="auto"===n.duration?0:n.duration,r=i,t=c,e=n.iterations,a=l,s=n.iterationStart,0===r?t!==gp&&(s+=e):s+=a/r,e=t=s,a=n.iterationStart,s=c,o=n.iterations,l=l,i=i,e=a=0!==(a=e===1/0?a%1:e%1)||s!==vp||0===o||0===l&&0!==i?a:1,s=n.iterations,o=e,l=t,i=c===vp&&s===1/0?1/0:1===o?Math.floor(l)-1:Math.floor(l),a=n.direction,t=i,c=e,"normal"!==(s=a)&&"reverse"!==a&&(t=t,"alternate-reverse"===a&&(t+=1),s=t!==1/0&&t%2!=0?"reverse":"normal"),o="normal"===s?c:1-c,n.currentIteration=i,n.progress=o,n.easingFunction(o))}function xp(t,e,n){var o=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r]){var o;wp(i)&&(o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:dp(t[r].easing)||e.easingFunction,value:t[r][i]},n[i]=n[i]||[],n[i].push(o))}return n}(t,e),a=function(t,e){var n,r=[];for(n in t)for(var i=t[n],o=0;o<i.length-1;o++){var a=o,s=o+1,c=i[a].computedOffset,l=i[s].computedOffset,u=c,h=l;0===o&&(u=-1/0,0===l&&(s=a)),o===i.length-2&&(h=1/0,1===c&&(a=s)),r.push({applyFrom:u,applyTo:h,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:n,interpolation:function(t,e,n,r){var i=mf[t];if(i&&i.syntax&&i.int){i=jf.getPropertySyntax(i.syntax);if(i){var o,a=jf.parseProperty(t,e,r),s=jf.parseProperty(t,n,r),a=jf.computeProperty(t,a,r),t=jf.computeProperty(t,s,r),s=i.mixer(a,t,r);if(s)return o=kp.apply(void 0,s),function(t){return 0===t?e:1===t?n:o(t)}}}return kp(!1,!0,function(t){return t?n:e})}(n,i[a].value,i[s].value,e)})}return r.sort(function(t,e){return t.startOffset-e.startOffset}),r}(o,n);return function(r,i){if(null!==i)a.filter(function(t){return i>=t.applyFrom&&i<t.applyTo}).forEach(function(t){var e=i-t.startOffset,n=t.endOffset-t.startOffset,e=0==n?0:t.easingFunction(e/n);r.style[t.property]=t.interpolation(e)});else for(var t in o)wp(t)&&(r.style[t]=null)}}function wp(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var kp=function(e,n,r){return function(t){return r(function t(e,n,r){if("number"==typeof e&&"number"==typeof n)return e*(1-r)+n*r;if("boolean"==typeof e&&"boolean"==typeof n||"string"==typeof e&&"string"==typeof n)return r<.5?e:n;if(Array.isArray(e)&&Array.isArray(n)&&e.length===n.length){for(var i=[],o=0;o<e.length;o++)i.push(t(e[o],n[o],r));return i}throw new Error("Mismatched interpolation arguments "+e+":"+n)}(e,n,t))}};var Ep=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Xd,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.playbackRate=void 0,this.effect=void 0,this.composite=void 0,this.activeDuration=void 0,this.endTime=void 0,this.currentIteration=null,this.progress=null}return Ad(t,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=dp(t),this._easing=t}}]),t}();function _p(t,i){if(null===t)return[];for(var e=(t=Array.isArray(t)?t:function(t){var e,n=[];for(e in t)if(!(e in["easing","offset","composite"]))for(var r,i=t[e],o=(i=Array.isArray(i)?i:[i]).length,a=0;a<o;a++)n[a]||(r={},"offset"in t&&(r.offset=Number(t.offset)),"easing"in t&&(r.easing=t.easing),"composite"in t&&(r.composite=t.composite),n[a]=r),void 0!==i[a]&&null!==i[a]&&(n[a][e]=i[a]);return n.sort(function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)}),n}(t)).map(function(t){var e,n={};for(e in null!=i&&i.composite&&(n.composite="auto"),t){var r=t[e];if("offset"===e){if(null!==r){if(r=Number(r),!isFinite(r))throw new Error("Keyframe offsets must be numbers.");if(r<0||1<r)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=r}}else if("composite"===e&&-1===["replace","add","accumulate","auto"].indexOf(r))throw new Error(r+" compositing is not supported");n[e]=r}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==i?void 0:i.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n}),n=!0,r=-1/0,o=0;o<e.length;o++){var a=e[o].offset;if(T(a))n=!1;else{if(a<r)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=a}}if(e=e.filter(function(t){return 0<=Number(t.offset)&&Number(t.offset)<=1}),!n)for(var s=e.length,c=(e[s-1].computedOffset=Number(null!=(t=e[s-1].offset)?t:1),1<s&&(e[0].computedOffset=Number(null!=(t=e[0].offset)?t:0)),0),l=Number(e[0].computedOffset),u=1;u<s;u++){var h=e[u].computedOffset;if(!T(h)&&!T(l)){for(var f=1;f<u-c;f++)e[c+f].computedOffset=l+(Number(h)-l)*f/(u-c);c=u,l=Number(h)}}return e}var Mp="backwards|forwards|both|none".split("|"),Sp="reverse|alternate|alternate-reverse".split("|");function Tp(t,e){var n,r,i;return t=function(t){"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t});return t}(null!=(r=t)?r:{duration:"auto"}),n=t,r=e,i=new Ep,r&&(i.fill="both",i.duration="auto"),"number"!=typeof n||isNaN(n)?void 0!==n&&Object.keys(n).forEach(function(t){void 0===n[t]||null===n[t]||"auto"===n[t]||!("number"!=typeof i[t]&&"duration"!==t||"number"==typeof n[t]&&!isNaN(n[t]))||"fill"===t&&-1===Mp.indexOf(n[t])||"direction"===t&&-1===Sp.indexOf(n[t])||(i[t]=n[t])}):i.duration=n,i}var Op=function(){function t(t,e,n){var r=this;this.composite="replace",this.iterationComposite="replace",this.target=void 0,this.animation=void 0,this.timing=void 0,this.computedTiming=void 0,this.normalizedKeyframes=void 0,this.timeFraction=void 0,this.interpolations=void 0,this.target=t,this.timing=Tp(n,!1),(this.timing.effect=this).timing.activeDuration=pp(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=_p(e,this.timing),this.interpolations=xp(this.normalizedKeyframes,this.timing,this.target),this.computedTiming=new Proxy(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?r.animation&&r.animation.currentTime||null:"currentIteration"===e?r.animation&&"running"===r.animation.playState?t.currentIteration||0:null:"progress"===e?r.animation&&"running"===r.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}})}var e=t.prototype;return e.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.update=function(t){return null!==t&&(this.timeFraction=bp(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)},e.getKeyframes=function(){return this.normalizedKeyframes},e.setKeyframes=function(t){this.normalizedKeyframes=_p(t)},e.getComputedTiming=function(){return this.computedTiming},e.getTiming=function(){return this.timing},e.updateTiming=function(e){var n=this;Object.keys(e||{}).forEach(function(t){n.timing=e[t]})},t}();function Ap(t,e){return Number(t.id)-Number(e.id)}var Pp=function(){function t(){var n=this;this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.frameId=void 0,this.document=void 0,this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(e){var t=n.rafCallbacks;n.rafCallbacks=[],e<Number(n.currentTime)&&(e=Number(n.currentTime)),n.animations.sort(Ap),n.animations=n.tick(e,!0,n.animations)[0],t.forEach(function(t){t[1](e)}),n.applyPendingEffects()}}var e=t.prototype;return e.attach=function(t){this.document=t},e.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.isTicking=function(){return this.inTick},e.play=function(t,e,n){t=new Op(t,e,n),e=new Kd(t,this);return this.animations.push(e),this.restartWebAnimationsNextTick(),e.updatePromises(),e.play(),e.updatePromises(),e},e.applyDirtiedAnimation=function(t){var e=this;this.inTick||(t.markTarget(),(t=t.targetAnimations()).sort(Ap),this.tick(Number(this.currentTime),!1,t.slice())[1].forEach(function(t){t=e.animations.indexOf(t);-1!==t&&e.animations.splice(t,1)}),this.applyPendingEffects())},e.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){null!=t&&t.applyInterpolations()}),this.pendingEffects=[]},e.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return"finished"!==t.playState&&"idle"!==t.playState})},e.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.rAF=function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e},e.requestAnimationFrame=function(e){var n=this;return this.rAF(function(t){n.updateAnimationsPromises(),e(t),n.updateAnimationsPromises()})},e.tick=function(n,r,t){var i=this,o=(this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1,[]),a=[],s=[],c=[];return t.forEach(function(t){t.tick(n,r),t._inEffect?(a.push(t.effect),t.markTarget()):(o.push(t.effect),t.unmarkTarget()),t._needsTick&&(i.ticking=!0);var e=t._inEffect||t._needsTick;((t._inTimeline=e)?s:c).push(t)}),(t=this.pendingEffects).push.apply(t,o),(t=this.pendingEffects).push.apply(t,a),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[s,c]},t}(),Pp=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([p({token:Hc})],Pp),dt=jr(function(t){t({token:Vc,useValue:dp}),t(Pp)});function Np(t,e){return(Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Gr.load(dt);var Cp=d.defineToken(""),Lp=d.defineToken("");function Ip(t,e){e=e.r;t.arc(e,e,e,0,2*Math.PI,!1)}function jp(t,e){var n,r,i=e.rx,e=e.ry;t.ellipse?t.ellipse(i,e,i,e,0,0,2*Math.PI,!1):(n=e<i?i:e,r=e<i?1:i/e,e=e<i?e/i:1,t.save(),t.scale(r,e),t.arc(0,0,n,0,2*Math.PI))}function Rp(t,e){var n,r,i=e.x1,o=e.y1,a=e.x2,s=e.y2,c=e.defX,c=void 0===c?0:c,l=e.defY,l=void 0===l?0:l,u=e.markerStart,h=e.markerEnd,f=e.markerStartOffset,e=e.markerEndOffset,d=0,p=0,y=0,g=0,v=0;u&&u instanceof O&&f&&(n=a-i,r=s-o,v=Math.atan2(r,n),d=Math.cos(v)*(f||0),p=Math.sin(v)*(f||0)),h&&h instanceof O&&e&&(n=i-a,r=o-s,v=Math.atan2(r,n),y=Math.cos(v)*(e||0),g=Math.sin(v)*(e||0)),t.moveTo(i-c+d,o-l+p),t.lineTo(a-c+y,s-l+g)}function Dp(t,e){var n,r,i=e.defX,o=void 0===i?0:i,i=e.defY,a=void 0===i?0:i,i=e.markerStart,s=e.markerEnd,c=e.markerStartOffset,l=e.markerEndOffset,e=e.path,u=e.curve,e=e.zCommandIndexes,h=[].concat(u),f=(e.forEach(function(t,e){h.splice(t+e+1,0,["Z"])}),h.length&&"Z"===h[h.length-1][0]),d=0,p=0,y=0,g=0,u=0;i&&i instanceof O&&c&&(i=(e=i.parentNode.getStartTangent())[0],e=e[1],n=i[0]-e[0],r=i[1]-e[1],u=Math.atan2(r,n),d=Math.cos(u)*(c||0),p=Math.sin(u)*(c||0)),s&&s instanceof O&&l&&(e=(i=s.parentNode.getEndTangent())[0],c=i[1],n=e[0]-c[0],r=e[1]-c[1],u=Math.atan2(r,n),y=Math.cos(u)*(l||0),g=Math.sin(u)*(l||0));for(var v=0;v<h.length;v++){var m=h[v];switch(m[0]){case"M":t.moveTo(m[1]-o+d,m[2]-a+p);break;case"C":var b=v===h.length-(f?2:1)?y:0,x=v===h.length-(f?2:1)?g:0;t.bezierCurveTo(m[1]-o,m[2]-a,m[3]-o,m[4]-a,m[5]-o+b,m[6]-a+x);break;case"Z":t.closePath()}}}function Bp(t,e){var n,r,i=e.defX,o=void 0===i?0:i,i=e.defY,a=void 0===i?0:i,i=e.markerStart,s=e.markerEnd,c=e.markerStartOffset,l=e.markerEndOffset,u=e.points.points,h=u.length,e=u[0][0]-o,f=u[0][1]-a,d=u[h-1][0]-o,p=u[h-1][1]-a,y=0,g=0,v=0,m=0,b=0;i&&i instanceof O&&c&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],b=Math.atan2(r,n),y=Math.cos(b)*(c||0),g=Math.sin(b)*(c||0)),s&&s instanceof O&&l&&(n=u[h-1][0]-u[0][0],r=u[h-1][1]-u[0][1],b=Math.atan2(r,n),v=Math.cos(b)*(l||0),m=Math.sin(b)*(l||0)),t.moveTo(e+(y||v),f+(g||m));for(var x=1;x<h-1;x++){var w=u[x];t.lineTo(w[0]-o,w[1]-a)}t.lineTo(d,p)}function Fp(t,e){var n,r,i=e.defX,o=void 0===i?0:i,i=e.defY,a=void 0===i?0:i,i=e.markerStart,s=e.markerEnd,c=e.markerStartOffset,l=e.markerEndOffset,u=e.points.points,h=u.length,e=u[0][0]-o,f=u[0][1]-a,d=u[h-1][0]-o,p=u[h-1][1]-a,y=0,g=0,v=0,m=0,b=0;i&&i instanceof O&&c&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],b=Math.atan2(r,n),y=Math.cos(b)*(c||0),g=Math.sin(b)*(c||0)),s&&s instanceof O&&l&&(n=u[h-2][0]-u[h-1][0],r=u[h-2][1]-u[h-1][1],b=Math.atan2(r,n),v=Math.cos(b)*(l||0),m=Math.sin(b)*(l||0)),t.moveTo(e+y,f+g);for(var x=1;x<h-1;x++){var w=u[x];t.lineTo(w[0]-o,w[1]-a)}t.lineTo(d+v,p+m)}function zp(t,e){var n,r,i,o,a=e.radius,s=e.width,e=e.height,c=s,l=e;a&&a.some(function(t){return 0!==t})?(n=(s=0<s?1:-1)+(e=0<e?1:-1)==0,r=(a=a.map(function(t){return $o(t,0,Math.min(Math.abs(c)/2,Math.abs(l)/2))}))[0],i=a[1],o=a[2],a=a[3],t.moveTo(s*r,0),t.lineTo(c-s*i,0),0!==i&&t.arc(c-s*i,e*i,i,-e*Math.PI/2,0<s?0:Math.PI,n),t.lineTo(c,l-e*o),0!==o&&t.arc(c-s*o,l-e*o,o,0<s?0:Math.PI,0<e?Math.PI/2:1.5*Math.PI,n),t.lineTo(s*a,l),0!==a&&t.arc(s*a,l-e*a,a,0<e?Math.PI/2:-Math.PI/2,0<s?Math.PI:0,n),t.lineTo(0,e*r),0!==r&&t.arc(s*r,e*r,r,0<s?Math.PI:0,0<e?1.5*Math.PI:Math.PI/2,n)):t.rect(0,0,c,l)}var Gp=jr(function(t){t({token:{token:Lp,named:_.CIRCLE},useValue:Ip}),t({token:{token:Lp,named:_.ELLIPSE},useValue:jp}),t({token:{token:Lp,named:_.RECT},useValue:zp}),t({token:{token:Lp,named:_.LINE},useValue:Rp}),t({token:{token:Lp,named:_.POLYLINE},useValue:Fp}),t({token:{token:Lp,named:_.POLYGON},useValue:Bp}),t({token:{token:Lp,named:_.PATH},useValue:Dp}),t({token:Cp,useFactory:function(e){return function(t){return e.container.isBoundNamed(Lp,t)?e.container.getNamed(Lp,t):null}}})}),Wp=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-path-generator",t}t=i,(n=e).prototype=Object.create(t.prototype),Np(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(Gp,!0)},n.destroy=function(){this.container.unload(Gp)},e}(qh);function Hp(){Hp=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Vp(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function Yp(t,e){return(Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Up(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qp(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){var n;if(t)return"string"==typeof t?Up(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Up(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Xp,$p="undefined"!=typeof Float32Array?Float32Array:Array;function Zp(){var t=new $p(3);return $p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Kp(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),Zp(),jt=new $p(2),$p!=Float32Array&&(jt[0]=0,jt[1]=0);var Jp=d.defineToken(""),Qp=Zp(),t0=Zp(),e0=Zp(),n0=(a=new $p(16),$p!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a),r0=((u=function(){function t(t,e,n,r,i){var L=this;this.renderingContext=void 0,this.canvasConfig=void 0,this.offscreenCanvas=void 0,this.pathGeneratorFactory=void 0,this.pointInPathPickerFactory=void 0,this.pathGeneratorFactoryCache={},this.isHit=function(t,e,n){var r,i,o,a,s,c,l,u,h,f,d,p,y,g,v,m,b,x,w,k,E,_,M,S,T,O=L.pointInPathPickerFactory(t.nodeName);if(O){r=n0,i=(n=n)[0],o=n[1],a=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],f=n[8],d=n[9],p=n[10],C=n[11],y=n[12],g=n[13],v=n[14],n=n[15];var A=(T=(m=i*l-o*c)*(A=p*n-C*v)-(b=i*u-a*c)*(S=d*n-C*g)+(P=i*h-s*c)*(M=d*v-p*g)+(x=o*u-a*l)*(_=f*n-C*y)-(N=o*h-s*l)*(E=f*v-p*y)+(w=a*h-s*u)*(k=f*g-d*y))?(r[0]=(l*A-u*S+h*M)*(T=1/T),r[1]=(a*S-o*A-s*M)*T,r[2]=(g*w-v*N+n*x)*T,r[3]=(p*N-d*w-C*x)*T,r[4]=(u*_-c*A-h*E)*T,r[5]=(i*A-a*_+s*E)*T,r[6]=(v*P-y*w-n*b)*T,r[7]=(f*w-p*P+C*b)*T,r[8]=(c*S-l*_+h*k)*T,r[9]=(o*_-i*S-s*k)*T,r[10]=(y*N-g*P+n*m)*T,r[11]=(d*P-f*N-C*m)*T,r[12]=(l*E-c*M-u*k)*T,r[13]=(i*M-o*E+a*k)*T,r[14]=(g*b-y*x-v*m)*T,r[15]=(f*x-d*b+p*m)*T,r):null,P=(w=t0,h=Kp(e0,e[0],e[1],0),_=A,S=h[0],s=h[1],h=h[2],n=_[3]*S+_[7]*s+_[11]*h+_[15],w[0]=(_[0]*S+_[4]*s+_[8]*h+_[12])/(n=n||1),w[1]=(_[1]*S+_[5]*s+_[9]*h+_[13])/n,w[2]=(_[2]*S+_[6]*s+_[10]*h+_[14])/n,w),N=t.getGeometryBounds().halfExtents,C=t.parsedStyle.anchor;if(P[0]+=(C&&C[0]||0)*N[0]*2,P[1]+=(C&&C[1]||0)*N[1]*2,O(t,new Pl(P[0],P[1]),L.isPointInPath))return!0}return!1},this.isPointInPath=function(t,e){var n=L.offscreenCanvas.getOrCreateContext(L.canvasConfig.offscreenCanvas),r=(void 0===L.pathGeneratorFactoryCache[t.nodeName]&&(L.pathGeneratorFactoryCache[t.nodeName]=L.pathGeneratorFactory(t.nodeName)),L.pathGeneratorFactoryCache[t.nodeName]);return r&&(n.beginPath(),r(n,t.parsedStyle),n.closePath()),n.isPointInPath(e.x,e.y)},this.renderingContext=t,this.canvasConfig=e,this.offscreenCanvas=n,this.pathGeneratorFactory=r,this.pointInPathPickerFactory=i}var e=t.prototype;return e.apply=function(t){var e,n=this,r=null==(e=this.renderingContext.root)?void 0:e.ownerDocument;t.hooks.pick.tapPromise(Xp.tag,function(){s=Hp().mark(function t(e){return Hp().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.pick(r,e));case 1:case"end":return t.stop()}},t)});var s,e=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Vp(r,e,n,i,o,"next",t)}function o(t){Vp(r,e,n,i,o,"throw",t)}i(void 0)})};return function(t){return e.apply(this,arguments)}}()),t.hooks.pickSync.tap(Xp.tag,function(t){return n.pick(r,t)})},e.pick=function(t,e){for(var n,r,i,o,a,s,c,l,u,h,f,d,p,y,g,v,m,b,x,w,k,E=e.topmost,_=e.position,M=_.x,_=_.y,S=Kp(Qp,M,_,0),T=[],O=qp(t.elementsFromBBox(S[0],S[1],S[0],S[1]));!(A=O()).done;){var A=A.value,P=A.getWorldTransform();if(this.isHit(A,S,P)){var N=nc(A);if(N){var C=N.style.clipPath;if(n=n0,N=N===A?P:N.getWorldTransform(),r=C.getLocalTransform(),k=w=x=b=m=v=g=y=p=d=f=h=u=l=c=s=a=o=i=void 0,i=N[0],o=N[1],a=N[2],s=N[3],c=N[4],l=N[5],u=N[6],h=N[7],f=N[8],d=N[9],p=N[10],y=N[11],g=N[12],v=N[13],m=N[14],N=N[15],b=r[0],x=r[1],w=r[2],k=r[3],n[0]=b*i+x*c+w*f+k*g,n[1]=b*o+x*l+w*d+k*v,n[2]=b*a+x*u+w*p+k*m,n[3]=b*s+x*h+w*y+k*N,b=r[4],x=r[5],w=r[6],k=r[7],n[4]=b*i+x*c+w*f+k*g,n[5]=b*o+x*l+w*d+k*v,n[6]=b*a+x*u+w*p+k*m,n[7]=b*s+x*h+w*y+k*N,b=r[8],x=r[9],w=r[10],k=r[11],n[8]=b*i+x*c+w*f+k*g,n[9]=b*o+x*l+w*d+k*v,n[10]=b*a+x*u+w*p+k*m,n[11]=b*s+x*h+w*y+k*N,b=r[12],x=r[13],w=r[14],k=r[15],n[12]=b*i+x*c+w*f+k*g,n[13]=b*o+x*l+w*d+k*v,n[14]=b*a+x*u+w*p+k*m,n[15]=b*s+x*h+w*y+k*N,P=n,this.isHit(C,S,P)){if(E)return e.picked=[A],e;T.push(A)}}else{if(E)return e.picked=[A],e;T.push(A)}}}return e.picked=T,e},t}()).tag="CanvasPicker",Xp=u);function i0(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function o0(t,e){return Math.abs(t-e)<.001}function a0(t,e){var n=Math.min.apply(Math,t),r=Math.min.apply(Math,e);return{x:n,y:r,width:Math.max.apply(Math,t)-n,height:Math.max.apply(Math,e)-r}}var r0=Xp=g([p({contrib:Rh}),v(0,y(Ph)),v(1,y(Wc)),v(2,y(Nu)),v(3,y(Cp)),v(4,y(Jp))],r0),s0={box:function(t,e,n,r){return a0([t,n],[e,r])},length:i0,pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?i0(t,e,i,o):(n-t)*(n-t)+(r-e)*(r-e)<a?i0(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a,s,c,n=[n-t,r-e];return(r=n)[0]===(a=[0,0])[0]&&r[1]===a[1]?Math.sqrt((i-t)*(i-t)+(o-e)*(o-e)):(s=(n=a=r=[-n[1],n[0]])[0],c=n[1],0<(s=s*s+c*c)&&(s=1/Math.sqrt(s)),a[0]=n[0]*s,a[1]=n[1]*s,c=[i-t,o-e],Math.abs(c[0]*r[0]+c[1]*r[1]))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function c0(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function l0(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function u0(t,e,n,r){var i,o,r=-3*t+9*e-9*n+3*r,n=6*t-12*e+6*n,e=3*e-3*t,t=[];return o0(r,0)?o0(n,0)||0<=(i=-e/n)&&i<=1&&t.push(i):o0(e=n*n-4*r*e,0)?t.push(-n/(2*r)):0<e&&(o=(-n-(e=Math.sqrt(e)))/(2*r),0<=(i=(-n+e)/(2*r))&&i<=1&&t.push(i),0<=o&&o<=1&&t.push(o)),t}function h0(t,e,n,r,i,o,a,s,c){var l=c0(t,n,i,a,c),u=c0(e,r,o,s,c),h=s0.pointAt(t,e,n,r,c),n=s0.pointAt(n,r,i,o,c),r=s0.pointAt(i,o,a,s,c),i=s0.pointAt(h.x,h.y,n.x,n.y,c),o=s0.pointAt(n.x,n.y,r.x,r.y,c);return[[t,e,h.x,h.y,i.x,i.y,l,u],[l,u,o.x,o.y,r.x,r.y,a,s]]}function f0(t,e,n,r,i,o,a,s,c){if(0===c){for(var l=[t,n,i,a],u=[e,r,o,s],h=0,f=l.length,d=0;d<f;d++)h+=i0(l[d],u[d],l[(d+1)%f],u[(d+1)%f]);return h/2}t=h0(t,e,n,r,i,o,a,s,.5),e=[].concat(t[0],[c-1]),n=[].concat(t[1],[c-1]);return f0.apply(void 0,e)+f0.apply(void 0,n)}var d0={extrema:u0,box:function(t,e,n,r,i,o,a,s){for(var c=[t,a],l=[e,s],u=u0(t,n,i,a),h=u0(e,r,o,s),f=0;f<u.length;f++)c.push(c0(t,n,i,a,u[f]));for(var d=0;d<h.length;d++)l.push(c0(e,r,o,s,h[d]));return a0(c,l)},length:function(t,e,n,r,i,o,a,s){return f0(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,c,l,u){for(var h=[t,n,i,a],f=[e,r,o,s],t=c,d=c0,n=u,p=-1,y=1/0,g=[t,l],v=20,m=1/(v=n&&200<n?n/10:v),b=m/10,x=0;x<=v;x++){var w=x*m,k=[d.apply(void 0,h.concat([w])),d.apply(void 0,f.concat([w]))],k=i0(g[0],g[1],k[0],k[1]);k<y&&(p=w,y=k)}if(0===p)return{x:h[0],y:f[0]};if(1===p)return{x:h[(t=h.length)-1],y:f[t-1]};for(var y=1/0,E=0;E<32&&!(b<1e-4);E++){var _=p-b,M=p+b,S=[d.apply(void 0,h.concat([_])),d.apply(void 0,f.concat([_]))],S=i0(g[0],g[1],S[0],S[1]);0<=_&&S<y?(p=_,y=S):(_=[d.apply(void 0,h.concat([M])),d.apply(void 0,f.concat([M]))],S=i0(g[0],g[1],_[0],_[1]),M<=1&&S<y?(p=M,y=S):b*=.5)}return{x:d.apply(void 0,h.concat([p])),y:d.apply(void 0,f.concat([p]))}},pointDistance:function(t,e,n,r,i,o,a,s,c,l,u){t=this.nearestPoint(t,e,n,r,i,o,a,s,c,l,u);return i0(t.x,t.y,c,l)},interpolationAt:c0,pointAt:function(t,e,n,r,i,o,a,s,c){return{x:c0(t,n,i,a,c),y:c0(e,r,o,s,c)}},divide:h0,tangentAngle:function(t,e,n,r,i,o,a,s,c){t=l0(t,n,i,a,c),n=l0(e,r,o,s,c);return(Math.atan2(n,t)+2*Math.PI)%(2*Math.PI)}};function p0(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function y0(t,e,n,r,i,o){return t<=i&&i<=t+n&&e<=o&&o<=e+r}function g0(t,e,n,r,i,o,a,s){var c=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);return!(c<r||i<c)&&p0((r={x:t+n*Math.cos(c),y:e+n*Math.sin(c)}).x,r.y,a,s)<=o/2}function v0(t,e,n,r,i,o,a){var s=Math.min(t,n),c=Math.max(t,n),l=Math.min(e,r),u=Math.max(e,r),h=i/2;return s-h<=o&&o<=c+h&&l-h<=a&&a<=u+h&&s0.pointToLine(t,e,n,r,o,a)<=i/2}function m0(t,e,n,r,i){var o=t.length;if(!(o<2)){for(var a=0;a<o-1;a++)if(v0(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){var i=t[0],s=t[o-1];if(v0(i[0],i[1],s[0],s[1],e,n,r))return!0}}return!1}var b0=1e-6;function x0(t){return Math.abs(t)<b0?0:t<0?-1:1}function w0(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o,a,s,c=0;c<i;c++){var l=t[c],u=t[(c+1)%i];if(a=u,((s=[e,n])[0]-(o=l)[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&Math.min(o[0],a[0])<=s[0]&&s[0]<=Math.max(o[0],a[0])&&Math.min(o[1],a[1])<=s[1]&&s[1]<=Math.max(o[1],a[1]))return!0;0<x0(l[1]-n)!=0<x0(u[1]-n)&&x0(e-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r}function k0(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=w0(t[i],e,n));i++);return r}function E0(t,e){var t=t.parsedStyle,n=t.r,r=t.fill,i=t.stroke,o=t.lineWidth,a=t.increasedLineWidthForHitTesting,s=t.clipPathTargets,t=t.pointerEvents,o=((o||0)+(a||0))/2,a=p0(n,n,e.x,e.y),e=!(null==s||!s.length),s=Xc(t,r,i),t=s[0],r=s[1];return t&&r||e?a<=n+o:t?a<=n:!!r&&(n-o<=a&&a<=n+o)}function _0(t,e,n,r){return t/(n*n)+e/(r*r)}function M0(t,e){var n=e.x,e=e.y,t=t.parsedStyle,r=t.rx,i=t.ry,o=t.fill,a=t.stroke,s=t.lineWidth,c=t.increasedLineWidthForHitTesting,l=t.clipPathTargets,t=t.pointerEvents,l=!(null==l||!l.length),t=Xc(t,o,a),o=t[0],a=t[1],t=((s||0)+(c||0))/2,s=(n-r)*(n-r),c=(e-i)*(e-i);return o&&a||l?_0(s,c,r+t,i+t)<=1:o?_0(s,c,r,i)<=1:!!a&&(1<=_0(s,c,r-t,i-t)&&_0(s,c,r+t,i+t)<=1)}function S0(t,e){var t=t.parsedStyle,n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.lineWidth,s=t.increasedLineWidthForHitTesting,c=t.defX,l=t.defY,u=t.clipPathTargets,h=t.pointerEvents,f=t.fill,t=t.stroke,u=!(null==u||!u.length);return!(!Xc(h,f,t)[1]&&!u||!a)&&v0(n,r,i,o,(a||0)+(s||0),e.x+(void 0===c?0:c),e.y+(void 0===l?0:l))}function T0(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=r.increasedLineWidthForHitTesting,a=r.stroke,s=r.fill,c=r.defX,c=void 0===c?0:c,l=r.defY,l=void 0===l?0:l,u=r.clipPathTargets,h=r.path,r=Xc(r.pointerEvents,s,a),s=r[0],a=r[1],r=h.segments,f=h.hasArc,d=h.polylines,h=h.polygons,p=Yc(t),u=!(null==u||!u.length),y=!1;return s||u?f?n(t,e):k0(h,e.x+c,e.y+l)||k0(d,e.x+c,e.y+l):a||u?function(t,e,n,r,i){for(var o=!1,a=0;a<t.length;a++){var s=t[a],c=s.currentPoint,l=s.params,u=s.prePoint;switch(s.command){case"L":case"Z":o=v0(u[0],u[1],c[0],c[1],e,n,r);break;case"C":o=d0.pointDistance(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2}if(o)break}return o}(r,(i||0)+(o||0),e.x+c,e.y+l,p):y}function O0(t,e){var t=t.parsedStyle,n=t.stroke,r=t.fill,i=t.lineWidth,o=t.increasedLineWidthForHitTesting,a=t.points,s=t.defX,s=void 0===s?0:s,c=t.defY,c=void 0===c?0:c,l=t.clipPathTargets,t=t.pointerEvents,l=!(null==l||!l.length),t=Xc(t,r,n),r=t[0],n=!1;return n=(n=t[1]||l?m0(a.points,(i||0)+(o||0),e.x+s,e.y+c,!0):n)||!r&&!l?n:w0(a.points,e.x+s,e.y+c)}function A0(t,e){var t=t.parsedStyle,n=t.lineWidth,r=t.increasedLineWidthForHitTesting,i=t.points,o=t.defX,a=t.defY,s=t.clipPathTargets,c=t.pointerEvents,l=t.fill,t=t.stroke,s=!(null==s||!s.length);return!(!Xc(c,l,t)[1]&&!s||!n)&&m0(i.points,(n||0)+(r||0),e.x+(void 0===o?0:o),e.y+(void 0===a?0:a),!1)}function P0(t,e,n){var r,i,o,a,s,c,l,u,h,f=t.parsedStyle,d=f.radius,p=f.fill,y=f.stroke,g=f.lineWidth,v=f.increasedLineWidthForHitTesting,m=f.width,b=f.height,x=f.clipPathTargets,f=f.pointerEvents,x=!(null==x||!x.length),f=Xc(f,p,y),p=f[0],y=f[1],f=(g||0)+(v||0);return d&&d.some(function(t){return 0!==t})?(g=!1,(y||x)&&(l=v=0,a=m,c=b,d=d.map(function(t){return $o(t,0,Math.min(Math.abs(m)/2,Math.abs(b)/2))}),h=f,r=e.x,i=e.y,u=d[0],o=d[1],s=d[2],d=d[3],g=v0(v+u,l,v+a-o,l,h,r,i)||v0(v+a,l+o,v+a,l+c-s,h,r,i)||v0(v+a-s,l+c,v+d,l+c,h,r,i)||v0(v,l+c-d,v,l+u,h,r,i)||g0(v+a-o,l+o,o,1.5*Math.PI,2*Math.PI,h,r,i)||g0(v+a-s,l+c-s,s,0,.5*Math.PI,h,r,i)||g0(v+d,l+c-d,d,.5*Math.PI,Math.PI,h,r,i)||g0(v+u,l+u,u,Math.PI,1.5*Math.PI,h,r,i)),g||!p&&!x?g:n(t,e)):(o=f/2,p&&y||x?y0(0-o,0-o,m+o,b+o,e.x,e.y):p?y0(0,0,m,b,e.x,e.y):!!y&&(s=a=0,c=m,d=b,v=f,l=e.x,u=e.y,y0(a-(h=v/2),s-h,c,v,l,u)||y0(a+c-h,s-h,v,d,l,u)||y0(a+h,s+d-h,c,v,l,u)||y0(a-h,s+h,v,d,l,u)))}var N0=jr(function(t){t({token:Jp,useFactory:function(t){return function(t){return t===_.CIRCLE?E0:t===_.ELLIPSE?M0:t===_.RECT?P0:t===_.LINE?S0:t===_.POLYLINE?A0:t===_.POLYGON?O0:t===_.PATH?T0:t===_.IMAGE||t===_.TEXT?function(){return!0}:null}}}),t(r0)}),C0=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-picker",t}t=i,(n=e).prototype=Object.create(t.prototype),Yp(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(N0,!0)},n.destroy=function(){this.container.unload(N0)},e}(qh);function L0(){L0=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function I0(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function j0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){I0(r,e,n,i,o,"next",t)}function o(t){I0(r,e,n,i,o,"throw",t)}i(void 0)})}}function R0(t,e){return(R0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var D0,B0=function(){function t(t){this.canvasConfig=void 0,this.imageCache={},this.gradientCache={},this.patternCache={},this.canvasConfig=t}var e=t.prototype;return e.getImageSync=function(t,e){return this.imageCache[t]?e&&e():this.getOrCreateImage(t).then(function(){e&&e()}),this.imageCache[t]},e.getOrCreateImage=function(r){var i,o=this;return this.imageCache[r]?Promise.resolve(this.imageCache[r]):(i=this.canvasConfig.createImage,new Promise(function(t,e){var n;i?n=i(r):tc&&(n=new window.Image),n&&(n.onload=function(){t(n)},n.onerror=function(t){e(t)},n.crossOrigin="Anonymous",n.src=r,o.imageCache[r]=n)}))},e.getOrCreatePatternSync=function(t,e,n){var r,i=this.generatePatternKey(t);return i&&this.patternCache[i]?this.patternCache[i]:(r=t.image,t=t.repetition,r=(n=Xo(r)?this.getImageSync(r,n):r)&&e.createPattern(n,t),i&&r&&(this.patternCache[i]=r),r)},e.getOrCreateGradient=function(t,e){var r,n,i,o,a,s=this.generateGradientKey(t),c=t.type,l=t.steps,u=t.width,h=t.height,f=t.angle,d=t.cx,p=t.cy,t=t.size;return this.gradientCache[s]||(r=null,c===ls.LinearGradient?(n=u,i=h,f=lc((f=f).value),o=0+n/2,a=0+i/2,n=Math.abs(n*Math.cos(f))+Math.abs(i*Math.sin(f)),i={x1:o-Math.cos(f)*n/2,y1:a-Math.sin(f)*n/2,x2:o+Math.cos(f)*n/2,y2:a+Math.sin(f)*n/2},r=e.createLinearGradient(i.x1,i.y1,i.x2,i.y2)):c===ls.RadialGradient&&(o=u,a=h,f=p,n=t,c=(i=d).value,u=f.value,i.unit===m.kPercentage&&(c=i.value/100*o),f.unit===m.kPercentage&&(u=f.value/100*a),i=Math.max(Co([0,0],[c,u]),Co([0,a],[c,u]),Co([o,a],[c,u]),Co([o,0],[c,u])),n&&(n instanceof Ps?i=n.value:n instanceof fs&&("closest-side"===n.value?i=Math.min(c,o-c,u,a-u):"farthest-side"===n.value?i=Math.max(c,o-c,u,a-u):"closest-corner"===n.value&&(i=Math.min(Co([0,0],[c,u]),Co([0,a],[c,u]),Co([o,a],[c,u]),Co([o,0],[c,u]))))),r=e.createRadialGradient(p=(h={x:c,y:u,r:i}).x,t=h.y,0,p,t,h.r)),r&&(l.forEach(function(t){var e,n=t.offset,t=t.color;n.unit===m.kPercentage&&null!=(e=r)&&e.addColorStop(n.value/100,t.toString())}),this.gradientCache[s]=r)),this.gradientCache[s]},e.generateGradientKey=function(t){var e=t.type,n=t.width,r=t.height,i=t.steps,o=t.angle,a=t.cx,s=t.cy,t=t.size;return"gradient-"+e+"-"+((null==o?void 0:o.toString())||0)+"-"+((null==a?void 0:a.toString())||0)+"-"+((null==s?void 0:s.toString())||0)+"-"+((null==t?void 0:t.toString())||0)+"-"+n+"-"+r+"-"+i.map(function(t){return""+t.offset+t.color}).join("-")},e.generatePatternKey=function(t){var e=t.image,t=t.repetition;if(Xo(e))return"pattern-"+e+"-"+t},t}(),B0=g([p(),v(0,y(Wc))],B0),F0=((ut=function(){function t(t,e){this.imagePool=void 0,this.renderingContext=void 0,this.imagePool=t,this.renderingContext=e}return t.prototype.apply=function(r){function e(t){var e=t.target,t=e.nodeName,n=e.attributes;t===_.IMAGE&&(t=n.img,Xo(t)&&i.imagePool.getImageSync(t,function(){e.renderable.dirty=!0,r.dirtify()}))}function n(t){var e=t.target,n=t.attrName,t=t.newValue;e.nodeName===_.IMAGE&&"img"===n&&Xo(t)&&i.imagePool.getOrCreateImage(t).then(function(){e.renderable.dirty=!0,r.dirtify()})}var i=this;r.hooks.init.tapPromise(D0.tag,j0(L0().mark(function t(){return L0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.renderingContext.root.addEventListener(S.MOUNTED,e),i.renderingContext.root.addEventListener(S.ATTR_MODIFIED,n);case 2:case"end":return t.stop()}},t)}))),r.hooks.destroy.tap(D0.tag,function(){i.renderingContext.root.removeEventListener(S.MOUNTED,e),i.renderingContext.root.removeEventListener(S.ATTR_MODIFIED,n)})},t}()).tag="LoadImage",D0=ut),F0=D0=g([p({contrib:Rh}),v(0,y(B0)),v(1,y(Ph))],F0),z0=jr(function(t){t(B0),t(F0)}),G0=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="image-loader",t}t=i,(n=e).prototype=Object.create(t.prototype),R0(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(z0,!0)},n.destroy=function(){this.container.unload(z0)},e}(qh);function W0(){W0=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function H0(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function V0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){H0(r,e,n,i,o,"next",t)}function o(t){H0(r,e,n,i,o,"throw",t)}i(void 0)})}}function Y0(){return(Y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function U0(t,e){t.prototype=Object.create(e.prototype),q0(t.prototype.constructor=t,e)}function q0(t,e){return(q0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var X0="undefined"!=typeof Float32Array?Float32Array:Array;function $0(){var t=new X0(16);return X0!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Z0(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}function K0(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],y=e[12],g=e[13],v=e[14],e=e[15],m=n[0],b=n[1],x=n[2],w=n[3];t[0]=m*r+b*s+x*h+w*y,t[1]=m*i+b*c+x*f+w*g,t[2]=m*o+b*l+x*d+w*v,t[3]=m*a+b*u+x*p+w*e,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*r+b*s+x*h+w*y,t[5]=m*i+b*c+x*f+w*g,t[6]=m*o+b*l+x*d+w*v,t[7]=m*a+b*u+x*p+w*e,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*r+b*s+x*h+w*y,t[9]=m*i+b*c+x*f+w*g,t[10]=m*o+b*l+x*d+w*v,t[11]=m*a+b*u+x*p+w*e,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*r+b*s+x*h+w*y,t[13]=m*i+b*c+x*f+w*g,t[14]=m*o+b*l+x*d+w*v,t[15]=m*a+b*u+x*p+w*e}function J0(t,e,n){var r,i,o,a,s,c,l,u,h,f,d,p,y=n[0],g=n[1],n=n[2];e===t?(t[12]=e[0]*y+e[4]*g+e[8]*n+e[12],t[13]=e[1]*y+e[5]*g+e[9]*n+e[13],t[14]=e[2]*y+e[6]*g+e[10]*n+e[14],t[15]=e[3]*y+e[7]*g+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*y+s*g+h*n+e[12],t[13]=i*y+c*g+f*n+e[13],t[14]=o*y+l*g+d*n+e[14],t[15]=a*y+u*g+p*n+e[15])}function Q0(){var t=new X0(3);return X0!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ty(t,e,n){var r=new X0(3);return r[0]=t,r[1]=e,r[2]=n,r}function ey(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[3]*r+n[7]*i+n[11]*e+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*e+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*e+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*e+n[14])/o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),Q0();var ny=d.defineToken(""),ry=d.defineToken("",{multiple:!1}),iy=d.defineToken("",{multiple:!1}),oy=d.defineToken("",{multiple:!1}),ay=d.defineToken("",{multiple:!1}),sy=d.defineToken("",{multiple:!1}),cy=d.defineToken("",{multiple:!1}),ly=d.defineToken("",{multiple:!1}),uy=d.defineToken("",{multiple:!1}),hy=d.defineToken("",{multiple:!1}),Te=function(){function t(t){this.imagePool=void 0,this.imagePool=t}var e=t.prototype;return e.render=function(t,e,n,r){var i=e.fill,o=e.opacity,a=e.fillOpacity,s=e.stroke,c=e.strokeOpacity,l=e.lineWidth,u=e.lineCap,h=e.lineJoin,f=e.shadowType,d=e.shadowColor,p=e.shadowBlur,y=e.filter,e=e.miterLimit,g=!T(i)&&!i.isNone,v=!T(s)&&!s.isNone&&0<l,m=0===i.alpha,y=!(!y||!y.length),d=!T(d)&&0<p,p=n.nodeName,f="inner"===f,p=v&&d&&(p===_.PATH||p===_.LINE||p===_.POLYLINE||m||f);g&&(t.globalAlpha=o*a,p||fy(n,t,d),this.fill(t,n,i,r),p||this.clearShadowAndFilter(t,y,d)),v&&(t.globalAlpha=o*c,t.lineWidth=l,T(e)||(t.miterLimit=e),T(u)||(t.lineCap=u),T(h)||(t.lineJoin=h),p&&(f&&(t.globalCompositeOperation="source-atop"),fy(n,t,!0),f&&(this.stroke(t,n,s,r),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,y,!0))),this.stroke(t,n,s,r))},e.clearShadowAndFilter=function(t,e,n){n&&(t.shadowColor="transparent",t.shadowBlur=0),e&&(n=t.filter,!T(n)&&-1<n.indexOf("drop-shadow")&&(t.filter=n.replace(/drop-shadow\([^)]*\)/,"").trim()||"none"))},e.fill=function(e,n,t,r){var i=this;Array.isArray(t)?t.forEach(function(t){e.fillStyle=i.getColor(t,n,e),e.fill()}):(El(t)&&(e.fillStyle=this.getPattern(t,n,e,r)),e.fill())},e.stroke=function(e,n,t,r){var i=this;Array.isArray(t)?t.forEach(function(t){e.strokeStyle=i.getColor(t,n,e),e.stroke()}):(El(t)&&(e.strokeStyle=this.getPattern(t,n,e,r)),e.stroke())},e.getPattern=function(t,e,n,r){return this.imagePool.getOrCreatePatternSync(t,n,function(){e.renderable.dirty=!0,r.dirtify()})},e.getColor=function(t,e,n){var r;return t.type!==ls.LinearGradient&&t.type!==ls.RadialGradient||(r=(e=e.getGeometryBounds())&&2*e.halfExtents[0]||1,e=e&&2*e.halfExtents[1]||1,r=this.imagePool.getOrCreateGradient(Y0({type:t.type},t.value,{width:r,height:e}),n)),r},t}();function fy(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,r=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=a||0,e.shadowOffsetX=s||0,e.shadowOffsetY=r||0)}var dy,py,Te=g([p(),v(0,y(B0))],Te),yy=function(){function t(t){this.imagePool=void 0,this.imagePool=t}return t.prototype.render=function(t,e,n){var r=e.width,i=e.height,o=e.img,a=e.shadowColor,e=e.shadowBlur,o=Xo(o)?this.imagePool.getImageSync(o):(r=r||o.width,i=i||o.height,o);if(o){fy(n,t,!T(a)&&0<e);try{t.drawImage(o,0,0,r,i)}catch(t){}}},t}(),yy=g([p({token:hy}),v(0,y(B0))],yy),gy=function(){function t(){}var e=t.prototype;return e.render=function(t,e,n){var r=e.lineWidth,i=e.textAlign,o=e.textBaseline,a=e.lineJoin,s=e.miterLimit,c=e.letterSpacing,l=e.stroke,u=e.fill,h=e.fillOpacity,f=e.strokeOpacity,d=e.opacity,p=e.metrics,y=e.dx,g=e.dy,v=e.shadowColor,e=e.shadowBlur,m=p.font,b=p.lines,x=p.height,w=p.lineHeight,k=p.lineMetrics,E=(t.font=m,t.lineWidth=r,t.textAlign=i,t.textBaseline=o,t.lineJoin=a,T(s)||(t.miterLimit=s),0),_=("middle"===o?E=-x/2-w/2:"bottom"===o||"alphabetic"===o||"ideographic"===o?E=-x:"top"!==o&&"hanging"!==o||(E=-w),y||0);E+=g||0,fy(n,t,!T(v)&&0<e);for(var M=0;M<b.length;M++){var S=r/2+_;E+=w,T(l)||l.isNone||!r||this.drawLetterSpacing(t,b[M],k[M],i,S,E,c,h,f,d,!0),T(u)||this.drawLetterSpacing(t,b[M],k[M],i,S,E,c,h,f,d)}},e.drawLetterSpacing=function(t,e,n,r,i,o,a,s,c,l,u){if(void 0===u&&(u=!1),0===a)u?this.strokeText(t,e,i,o,c):this.fillText(t,e,i,o,s,l);else{for(var h=t.textAlign,f=(t.textAlign="left",i),d=("center"===r?f=i-n.width/2:"right"!==r&&"end"!==r||(f=i-n.width),Array.from(e)),p=t.measureText(e).width,y=0;y<d.length;++y){var g=d[y];u?this.strokeText(t,g,f,o,c):this.fillText(t,g,f,o,s,l),f+=p-(g=t.measureText(e.substring(y+1)).width)+a,p=g}t.textAlign=h}},e.fillText=function(t,e,n,r,i,o){var a,s=!T(i)&&1!==i;s&&(a=t.globalAlpha,t.globalAlpha=i*o),t.fillText(e,n,r),s&&(t.globalAlpha=a)},e.strokeText=function(t,e,n,r,i){var o,a=!T(i)&&1!==i;a&&(o=t.globalAlpha,t.globalAlpha=i),t.strokeText(e,n,r),a&&(t.globalAlpha=o)},t}(),gy=g([p({token:uy})],gy),vy=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),vy=g([p({token:oy})],vy),my=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),my=g([p({token:ry})],my),by=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),by=g([p({token:iy})],by),xy=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),xy=g([p({token:ay})],xy),wy=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),wy=g([p({token:sy})],wy),ky=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),ky=g([p({token:cy})],ky),Ey=function(t){function e(){return t.apply(this,arguments)||this}return U0(e,t),e}(Te),Ey=g([p({token:ly})],Ey),_y=d.defineToken(""),My=((h=function(){function t(t,e,n,r,i,o,a,s,c){this.canvasConfig=void 0,this.camera=void 0,this.contextService=void 0,this.renderingContext=void 0,this.pathGeneratorFactory=void 0,this.styleRendererFactory=void 0,this.displayObjectPool=void 0,this.canvasRendererPluginOptions=void 0,this.rBush=void 0,this.pathGeneratorFactoryCache={},this.styleRendererFactoryCache={},this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=$0(),this.dprMatrix=$0(),this.tmpMat4=$0(),this.vec3a=Q0(),this.vec3b=Q0(),this.vec3c=Q0(),this.vec3d=Q0(),this.canvasConfig=t,this.camera=e,this.contextService=n,this.renderingContext=r,this.pathGeneratorFactory=i,this.styleRendererFactory=o,this.displayObjectPool=a,this.canvasRendererPluginOptions=s,this.rBush=c}var e=t.prototype;return e.apply=function(l){function o(t){(t=t.target.rBushNode).aabb&&h.removedRBushNodeAABBs.push(t.aabb)}function a(t){(t=t.target.rBushNode).aabb&&h.removedRBushNodeAABBs.push(t.aabb)}function u(t){t.isVisible()&&!t.isCulled()&&(h.renderDisplayObject(t,l),h.saveDirtyAABB(t)),(t.sortable.sorted||t.childNodes).forEach(function(t){u(t)})}var h=this,f=this.renderingContext.root.ownerDocument.defaultView;l.hooks.init.tapPromise(dy.tag,V0(W0().mark(function t(){var e,n,r,i;return W0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h.renderingContext.root.addEventListener(S.UNMOUNTED,o),h.renderingContext.root.addEventListener(S.CULLED,a),e=h.contextService.getDPR(),r=h.canvasConfig,n=r.width,r=r.height,i=h.contextService.getContext(),h.clearRect(i,0,0,n*e,r*e);case 6:case"end":return t.stop()}},t)}))),l.hooks.destroy.tap(dy.tag,function(){h.renderingContext.root.removeEventListener(S.UNMOUNTED,o),h.renderingContext.root.removeEventListener(S.CULLED,a)}),l.hooks.beginFrame.tap(dy.tag,function(){var t=h.contextService.getContext(),e=h.contextService.getDPR(),n=h.canvasConfig,r=n.width,n=n.height,i=h.canvasRendererPluginOptions,o=i.dirtyObjectNumThreshold,i=i.dirtyObjectRatioThreshold,a=l.getStats(),s=a.total,a=a.rendered,s=a/s;h.clearFullScreen=l.disableDirtyRectangleRendering()||o<a&&i<s,t&&(t.resetTransform(),h.clearFullScreen&&h.clearRect(t,0,0,r*e,n*e))});l.hooks.endFrame.tap(dy.tag,function(){var t=h.contextService.getContext(),e=h.contextService.getDPR();if(n=h.dprMatrix,e=ty(e,e,1),n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,K0(h.vpMatrix,h.dprMatrix,h.camera.getOrthoMatrix()),h.clearFullScreen)u(h.renderingContext.root);else{e=h.safeMergeAABB.apply(h,[h.mergeDirtyAABBs(h.renderQueue)].concat(h.removedRBushNodeAABBs.map(function(t){var e=t.minX,n=t.minY,r=t.maxX,t=t.maxY,i=new Tl;return i.setMinMax(ty(e,n,0),ty(r,t,0)),i})));if(h.removedRBushNodeAABBs=[],Tl.isEmpty(e))return void(h.renderQueue=[]);var n=h.convertAABB2Rect(e),r=n.x,i=n.y,o=n.width,n=n.height,a=ey(h.vec3a,ty(r,i,0),h.vpMatrix),s=ey(h.vec3b,ty(r+o,i,0),h.vpMatrix),c=ey(h.vec3c,ty(r,i+n,0),h.vpMatrix),r=ey(h.vec3d,ty(r+o,i+n,0),h.vpMatrix),o=Math.min(a[0],s[0],r[0],c[0]),i=Math.min(a[1],s[1],r[1],c[1]),n=Math.max(a[0],s[0],r[0],c[0]),a=Math.max(a[1],s[1],r[1],c[1]),s=Math.floor(o),r=Math.floor(i),c=Math.ceil(n-o),n=Math.ceil(a-i);t.save(),h.clearRect(t,s,r,c,n),t.beginPath(),t.rect(s,r,c,n),t.clip(),t.setTransform(h.vpMatrix[0],h.vpMatrix[1],h.vpMatrix[4],h.vpMatrix[5],h.vpMatrix[12],h.vpMatrix[13]),h.canvasConfig.renderer.getConfig().enableDirtyRectangleRenderingDebug&&f.dispatchEvent(new Gu(Jh.DIRTY_RECTANGLE,{dirtyRect:{x:s,y:r,width:c,height:n}})),h.searchDirtyObjects(e).sort(function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder}).forEach(function(t){t&&t.isVisible()&&!t.isCulled()&&h.renderDisplayObject(t,l)}),t.restore(),h.renderQueue.forEach(function(t){h.saveDirtyAABB(t)}),h.renderQueue=[]}h.restoreStack.forEach(function(){t.restore()}),h.restoreStack=[]}),l.hooks.render.tap(dy.tag,function(t){h.clearFullScreen||h.renderQueue.push(t)})},e.clearRect=function(t,e,n,r,i){t.clearRect(e,n,r,i);var o=this.canvasConfig.background;o&&(t.fillStyle=o,t.fillRect(e,n,r,i))},e.renderDisplayObject=function(t,e){var n,r=this.contextService.getContext(),i=t.nodeName,o=this.restoreStack[this.restoreStack.length-1],o=(!o||t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINS||(r.restore(),this.restoreStack.pop()),void 0===this.styleRendererFactoryCache[i]&&(this.styleRendererFactoryCache[i]=this.styleRendererFactory(i)),this.styleRendererFactoryCache[i]),i=(void 0===this.pathGeneratorFactoryCache[i]&&(this.pathGeneratorFactoryCache[i]=this.pathGeneratorFactory(i)),this.pathGeneratorFactoryCache[i]),a=t.parsedStyle.clipPath;a&&(this.applyWorldTransform(r,a,t.getWorldTransform()),void 0===this.pathGeneratorFactoryCache[a.nodeName]&&(this.pathGeneratorFactoryCache[a.nodeName]=this.pathGeneratorFactory(a.nodeName)),(n=this.pathGeneratorFactoryCache[a.nodeName])&&(r.save(),this.restoreStack.push(t),r.beginPath(),n(r,a.parsedStyle),r.closePath(),r.clip())),o&&(this.applyWorldTransform(r,t),r.save(),this.applyAttributesToContext(r,t)),i&&(r.beginPath(),i(r,t.parsedStyle),t.nodeName!==_.LINE&&t.nodeName!==_.PATH&&t.nodeName!==_.POLYLINE&&r.closePath()),o&&(o.render(r,t.parsedStyle,t,e),r.restore()),t.renderable.dirty=!1},e.convertAABB2Rect=function(t){var e=t.getMin(),t=t.getMax(),n=Math.floor(e[0]),e=Math.floor(e[1]);return{x:n,y:e,width:Math.ceil(t[0])-n,height:Math.ceil(t[1])-e}},e.mergeDirtyAABBs=function(t){var n=new Tl;return t.forEach(function(t){var e=t.getRenderBounds(),e=(n.add(e),t.renderable.dirtyRenderBounds);e&&n.add(e)}),n},e.searchDirtyObjects=function(t){var e=this,n=t.getMin(),r=n[0],n=n[1],t=t.getMax(),i=t[0],t=t[1];return this.rBush.search({minX:r,minY:n,maxX:i,maxY:t}).map(function(t){t=t.id;return e.displayObjectPool.getByEntity(t)})},e.saveDirtyAABB=function(t){var e=t.renderable,t=(e.dirtyRenderBounds||(e.dirtyRenderBounds=new Tl),t.getRenderBounds());t&&e.dirtyRenderBounds.update(t.center,t.halfExtents)},e.applyAttributesToContext=function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,o=n.opacity,a=n.lineDash,n=n.lineDashOffset;a&&t.setLineDash(a),T(n)||(t.lineDashOffset=n),T(o)||(t.globalAlpha*=o),T(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),T(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)},e.applyWorldTransform=function(t,e,n){var r=0,i=0,o=(e.parsedStyle||{}).anchor,a=o&&o[0]||0,o=o&&o[1]||0;0===a&&0===o||(r=-a*((a=e.getGeometryBounds())&&2*a.halfExtents[0]||0),i=-o*(a&&2*a.halfExtents[1]||0)),n?(Z0(this.tmpMat4,e.getLocalTransform()),this.vec3a[0]=r,this.vec3a[1]=i,this.vec3a[2]=0,J0(this.tmpMat4,this.tmpMat4,this.vec3a),K0(this.tmpMat4,n,this.tmpMat4)):(Z0(this.tmpMat4,e.getWorldTransform()),this.vec3a[0]=r,this.vec3a[1]=i,this.vec3a[2]=0,J0(this.tmpMat4,this.tmpMat4,this.vec3a)),K0(this.tmpMat4,this.vpMatrix,this.tmpMat4),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.safeMergeAABB=function(){for(var e=new Tl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e.add(t)}),e},t}()).tag="CanvasRenderer",dy=h),My=dy=g([p({contrib:Rh}),v(0,y(Wc)),v(1,y(Ch)),v(2,y(Bu)),v(3,y(Ph)),v(4,y(Cp)),v(5,y(ny)),v(6,y(oh)),v(7,y(_y)),v(8,y(Vu))],My),Sy=jr(function(t){t(my),t(by),t(vy),t(yy),t(gy),t(xy),t(wy),t(ky),t(Ey),(e={})[_.CIRCLE]=ry,e[_.ELLIPSE]=iy,e[_.RECT]=oy,e[_.IMAGE]=hy,e[_.TEXT]=uy,e[_.LINE]=ay,e[_.POLYLINE]=sy,e[_.POLYGON]=cy,e[_.PATH]=ly;var e,n=e;t({token:ny,useFactory:function(e){return function(t){t=n[t];return t&&e.container.isBound(t)?e.container.get(t):null}}}),t(My)}),Ty=function(n){function t(t){var e;return void 0===t&&(t={}),(e=n.call(this)||this).options=void 0,e.name="canvas-renderer",e.options=t,e}U0(t,n);var e=t.prototype;return e.init=function(){this.container.register(_y,{useValue:Y0({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options)}),this.container.load(Sy,!0)},e.destroy=function(){this.container.unload(Sy),this.container.remove(_y)},t}(qh);function Oy(){Oy=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Ay(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function Py(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Ay(r,e,n,i,o,"next",t)}function o(t){Ay(r,e,n,i,o,"throw",t)}i(void 0)})}}function Ny(t,e){return(Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(s=function(){function t(t,e){this.contextService=void 0,this.renderingContext=void 0,this.contextService=t,this.renderingContext=e}return t.prototype.apply=function(e){function i(t){e.hooks.pointerWheel.call(t)}var o=this,a=this.renderingContext.root.ownerDocument.defaultView,s=function(t){e.hooks.pointerMove.call(t)},c=function(t){e.hooks.pointerUp.call(t)},l=function(t){e.hooks.pointerDown.call(t)},u=function(t){e.hooks.pointerOver.call(t)},h=function(t){e.hooks.pointerOut.call(t)},f=function(t){e.hooks.pointerCancel.call(t)};e.hooks.init.tapPromise(py.tag,Py(Oy().mark(function t(){var r;return Oy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.contextService.getDomElement(),globalThis.navigator.msPointerEnabled?(r.style.msContentZooming="none",r.style.msTouchAction="none"):a.supportsPointerEvents&&(r.style.touchAction="none"),a.supportsPointerEvents?(n=r,globalThis.document.addEventListener("pointermove",s,!0),n.addEventListener("pointerdown",l,!0),n.addEventListener("pointerleave",h,!0),n.addEventListener("pointerover",u,!0),globalThis.addEventListener("pointerup",c,!0)):(n=r,globalThis.document.addEventListener("mousemove",s,!0),n.addEventListener("mousedown",l,!0),n.addEventListener("mouseout",h,!0),n.addEventListener("mouseover",u,!0),globalThis.addEventListener("mouseup",c,!0)),a.supportsTouchEvents&&((e=r).addEventListener("touchstart",l,!0),e.addEventListener("touchend",c,!0),e.addEventListener("touchmove",s,!0),e.addEventListener("touchcancel",f,!0)),r.addEventListener("wheel",i,{passive:!0,capture:!0});case 5:case"end":return t.stop()}var e,n},t)}))),e.hooks.destroy.tap(py.tag,function(){var t,e,n=o.contextService.getDomElement();globalThis.navigator.msPointerEnabled?(n.style.msContentZooming="",n.style.msTouchAction=""):a.supportsPointerEvents&&(n.style.touchAction=""),a.supportsPointerEvents?(t=n,globalThis.document.removeEventListener("pointermove",s,!0),t.removeEventListener("pointerdown",l,!0),t.removeEventListener("pointerleave",h,!0),t.removeEventListener("pointerover",u,!0),globalThis.removeEventListener("pointerup",c,!0)):(t=n,globalThis.document.removeEventListener("mousemove",s,!0),t.removeEventListener("mousedown",l,!0),t.removeEventListener("mouseout",h,!0),t.removeEventListener("mouseover",u,!0),globalThis.removeEventListener("mouseup",c,!0)),a.supportsTouchEvents&&((e=n).removeEventListener("touchstart",l,!0),e.removeEventListener("touchend",c,!0),e.removeEventListener("touchmove",s,!0),e.removeEventListener("touchcancel",f,!0)),n.removeEventListener("wheel",i,!0)})},t}()).tag="DOMInteraction";var Cy,Ly=py=s,Ly=py=g([p({contrib:Rh}),v(0,y(Bu)),v(1,y(Ph))],Ly),Iy=jr(function(t){t(Ly)}),jy=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="dom-interaction",t}t=i,(n=e).prototype=Object.create(t.prototype),Ny(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(Iy,!0)},n.destroy=function(){this.container.unload(Iy)},e}(qh);function Ry(){Ry=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Dy(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function By(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Dy(r,e,n,i,o,"next",t)}function o(t){Dy(r,e,n,i,o,"throw",t)}i(void 0)})}}function Fy(t,e){return(Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(r=function(){function t(t,e,n){this.contextService=void 0,this.renderingContext=void 0,this.canvasConfig=void 0,this.$camera=void 0,this.contextService=t,this.renderingContext=e,this.canvasConfig=n}var e=t.prototype;return e.apply=function(t){function i(t,e){t=t.getWorldTransform(),e.style.transform="matrix("+[t[0],t[1],t[4],t[5],t[12],t[13]].join(",")+")"}function e(t){var e,n,r=t.target;r.nodeName===_.HTML&&(e=a.getOrCreateEl(r),n=r.ownerDocument.documentElement.attributes,Object.keys(n).forEach(function(t){e.style[t]=n[t]}),Object.keys(r.attributes).forEach(function(t){a.updateAttribute(t,r)}),i(r,e))}function n(t){var e;(t=t.target).nodeName===_.HTML&&(t=a.getId(t),(e=a.contextService.getDomElement().parentNode)&&(t=e.querySelector("#"+t))&&e.removeChild(t))}function r(t){var e=t.target;e.nodeName===_.HTML&&(t=t.attrName,a.updateAttribute(t,e))}function o(t){var e;(t=t.target).nodeName===_.HTML&&(e=a.getOrCreateEl(t),i(t,e))}var a=this;t.hooks.init.tapPromise(Cy.tag,By(Ry().mark(function t(){return Ry().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.renderingContext.root.addEventListener(S.MOUNTED,e),a.renderingContext.root.addEventListener(S.UNMOUNTED,n),a.renderingContext.root.addEventListener(S.ATTR_MODIFIED,r),a.renderingContext.root.addEventListener(S.BOUNDS_CHANGED,o);case 4:case"end":return t.stop()}},t)}))),t.hooks.destroy.tap(Cy.tag,function(){a.renderingContext.root.removeEventListener(S.MOUNTED,e),a.renderingContext.root.removeEventListener(S.UNMOUNTED,n),a.renderingContext.root.removeEventListener(S.ATTR_MODIFIED,r),a.renderingContext.root.removeEventListener(S.BOUNDS_CHANGED,o)})},e.getId=function(t){return t.id||"g-html-"+t.entity},e.getOrCreateEl=function(t){var e,n=this.canvasConfig.document,r=this.getId(t),i=this.contextService.getDomElement(),o=i.parentNode;return o?((e=o.querySelector("#"+r))||(e=(n||document).createElement("div"),(t.parsedStyle.$el=e).id=r,t.name&&e.setAttribute("name",t.name),t.className&&(e.className=t.className),o.appendChild(e),e.style.position="absolute",e.style.left=(i.offsetLeft||0)+"px",e.style.top=(i.offsetTop||0)+"px",e.style["will-change"]="transform",n=t.getWorldTransform(),e.style.transform="matrix("+[n[0],n[1],n[4],n[5],n[12],n[13]].join(",")+")"),e):null},e.updateAttribute=function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Xo(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"transformOrigin":r=e.parsedStyle.transformOrigin;n.style["transform-origin"]=r[0].value+" "+r[1].value;break;case"width":r=e.computedStyleMap().get("width");n.style.width=r.toString();break;case"height":r=e.computedStyleMap().get("height");n.style.height=r.toString();break;case"zIndex":r=e.parsedStyle.zIndex;n.style["z-index"]=""+r;break;case"visibility":r=e.parsedStyle.visibility;n.style.visibility=r;break;case"pointerEvents":r=e.parsedStyle.pointerEvents;n.style.pointerEvents=r;break;case"opacity":r=e.parsedStyle.opacity;n.style.opacity=""+r;break;case"fill":var r=e.parsedStyle.fill,i="";r instanceof Gs?i=r.isNone?"transparent":e.getAttribute("fill"):Array.isArray(r)?i=e.getAttribute("fill"):El(r),n.style.background=i;break;case"stroke":r=e.parsedStyle.stroke,i="";r instanceof Gs?i=r.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(r)?i=e.getAttribute("stroke"):El(r),n.style["border-color"]=i,n.style["border-style"]="solid";break;case"lineWidth":r=e.parsedStyle.lineWidth;n.style["border-width"]=(r||0)+"px";break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":i=e.style.filter;n.style.filter=i}},t}()).tag="HTMLRendering";var zy=Cy=r,zy=Cy=g([p({contrib:Rh}),v(0,y(Bu)),v(1,y(Ph)),v(2,y(Wc))],zy),Gy=jr(function(t){t(zy)}),Wy=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="html-renderer",t}t=i,(n=e).prototype=Object.create(t.prototype),Fy(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(Gy,!0)},n.destroy=function(){this.container.unload(Gy)},e}(qh);function Hy(){Hy=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Vy(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function Yy(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Vy(r,e,n,i,o,"next",t)}function o(t){Vy(r,e,n,i,o,"throw",t)}i(void 0)})}}function Uy(t,e){t.prototype=Object.create(e.prototype),qy(t.prototype.constructor=t,e)}function qy(t,e){return(qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xy=function(){function t(t,e){this.canvasConfig=void 0,this.renderingContext=void 0,this.$container=void 0,this.$canvas=void 0,this.dpr=void 0,this.context=void 0,this.canvasConfig=t,this.renderingContext=e}var e=t.prototype;return e.init=function(){var t=Yy(Hy().mark(function t(){var e,n;return Hy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.canvasConfig,e=n.container,(n=n.canvas)?(this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container):e&&(this.$container=Xo(e)?document.getElementById(e):e,this.$container&&(n=document.createElement("canvas"),this.$container.appendChild(n),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=n)),this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.getContext=function(){return this.context},e.getDomElement=function(){return this.$canvas},e.getDPR=function(){return this.dpr},e.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.resize=function(t,e){var n=1<=(n=this.canvasConfig.devicePixelRatio||tc&&window.devicePixelRatio||1)?Math.ceil(n):1;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,n=this.$canvas,t=t,e=e,tc&&n.style&&(n.style.width=t+"px",n.style.height=e+"px")),this.renderingContext.renderReasons.add(mu.CAMERA_CHANGED)},e.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.toDataURL=function(){var e=Yy(Hy().mark(function t(e){var n,r;return Hy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e=void 0===e?{}:e).type,r=r.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t}(),Xy=g([p({token:Bu}),v(0,y(Wc)),v(1,y(Ph))],Xy),$y=jr(function(t){t(Xy)}),Zy=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-context-register",t}Uy(t,i);var e=t.prototype;return e.init=function(){this.container.load($y,!0)},e.destroy=function(){this.container.unload($y)},t}(qh),Ky=function(e){function t(t){t=e.call(this,t)||this;return t.registerPlugin(new Zy),t.registerPlugin(new G0),t.registerPlugin(new Wp),t.registerPlugin(new Ty),t.registerPlugin(new jy),t.registerPlugin(new C0),t.registerPlugin(new Wy),t}return Uy(t,e),t}(o);function Jy(){Jy=function(){return a};var a={},t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return u;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,u;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,u):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}(n,a);if(n){if(n===u)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u={};function h(){}function f(){}function d(){}var e={},p=(o(e,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(w([]))),y=(p&&p!==t&&c.call(p,r)&&(e=p),d.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=l(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&c.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",f.prototype=d),o(d,"constructor",f),f.displayName=o(d,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function Qy(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function tg(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Qy(r,e,n,i,o,"next",t)}function o(t){Qy(r,e,n,i,o,"throw",t)}i(void 0)})}}function eg(){return(eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function ng(t,e){return(ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rg,ig=d.defineToken(""),og=((t=function(){function t(t,e,n){this.sceneGraphService=void 0,this.renderingContext=void 0,this.dragndropPluginOptions=void 0,this.sceneGraphService=t,this.renderingContext=e,this.dragndropPluginOptions=n}return t.prototype.apply=function(t){function e(t){var e,o,a,s,c,l,n,u=t.target,h=u===d,f=h&&i?d:u.closest&&u.closest("[draggable=true]");f&&(e=function(){var e=tg(Jy().mark(function t(e){var n,r,i;return Jy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o)t.next=8;else{if(n=e.timeStamp-a,r=Co([e.clientX,e.clientY],s),n<=v||r<=g)return t.abrupt("return");t.next=5}break;case 5:e.type="dragstart",f.dispatchEvent(e),o=!0;case 8:if(e.type="drag",e.dx=e.clientX-l[0],e.dy=e.clientY-l[1],f.dispatchEvent(e),l=[e.clientX,e.clientY],h){t.next=21;break}return n="pointer"===p?[e.canvasX,e.canvasY]:u.getBounds().center,t.next=17,d.elementsFromPoint(n[0],n[1]);case 17:r=t.sent,i=r[r.indexOf(u)+1],i=(null==i?void 0:i.closest("[droppable=true]"))||(y?d:null),c!==i&&(c&&(e.type="dragleave",(e.target=c).dispatchEvent(e)),i&&(e.type="dragenter",(e.target=i).dispatchEvent(e)),(c=i)&&(e.type="dragover",(e.target=c).dispatchEvent(e)));case 21:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),o=!1,a=t.timeStamp,s=[t.clientX,t.clientY],c=null,l=[t.clientX,t.clientY],r.addEventListener("pointermove",e),u.addEventListener("pointerup",n=function(){o&&(c&&(t.type="drop",(t.target=c).dispatchEvent(t)),t.type="dragend",t.detail={preventClick:!0},f.dispatchEvent(t),o=!1),r.removeEventListener("pointermove",e)},{once:!0}),u.addEventListener("pointerupoutside",n,{once:!0}))}var d=this.renderingContext.root.ownerDocument,r=d.defaultView,n=this.dragndropPluginOptions,p=n.overlap,i=n.isDocumentDraggable,y=n.isDocumentDroppable,g=n.dragstartDistanceThreshold,v=n.dragstartTimeThreshold;t.hooks.init.tapPromise(rg.tag,tg(Jy().mark(function t(){return Jy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.addEventListener("pointerdown",e);case 1:case"end":return t.stop()}},t)}))),t.hooks.destroy.tap(rg.tag,function(){r.removeEventListener("pointerdown",e)})},t}()).tag="Dragndrop",rg=t),og=rg=g([p({contrib:Rh}),v(0,y(Yu)),v(1,y(Ph)),v(2,y(ig))],og),ag=jr(function(t){t(og)}),sg=function(n){var t;function e(t){var e;return void 0===t&&(t={}),(e=n.call(this)||this).options=void 0,e.name="dragndrop",e.options=t,e}t=n,(r=e).prototype=Object.create(t.prototype),ng(r.prototype.constructor=r,t);var r=e.prototype;return r.init=function(){this.container.register(ig,{useValue:eg({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)}),this.container.load(ag,!0)},r.destroy=function(){this.container.remove(ig),this.container.unload(ag)},e}(qh),cg=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},lg={}.toString,ug=function(t,e){return lg.call(t)==="[object "+e+"]"},hg=function(t){return ug(t,"Function")},fg=function(t){return null==t},dg=function(t){return Array.isArray?Array.isArray(t):ug(t,"Array")},pg=function(t){var e=typeof t;return null!==t&&"object"==e||"function"==e};function yg(t,e){if(t)if(dg(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(pg(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}function gg(t){return"object"==typeof t&&null!==t}function vg(t){if(dg(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])}function mg(t){if(dg(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])}var bg=function(t){if(!gg(t)||!ug(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},xg=function(t){return ug(t,"String")};function wg(t){if(cg(t))return t[0]}function kg(t){if(cg(t))return t[t.length-1]}function Eg(t,e,n){return t<e?e:n<t?n:t}var _g=function(t){return ug(t,"Number")},Mg=1e-5;function Sg(t,e,n){return void 0===n&&(n=Mg),Math.abs(t-e)<n}var Tg=function(t,e){if(dg(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=hg(e)?e(o):o[e];r<a&&(n=o,r=a)}return n}},Og=function(t,e){if(dg(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=hg(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},Ag=Object.values?function(t){return Object.values(t)}:function(n){var r=[];return yg(n,function(t,e){hg(n)&&"prototype"===e||r.push(t)}),r},Pg=function(t){return fg(t)?"":t.toString()},Ng=function(t){t=Pg(t);return t.charAt(0).toLowerCase()+t.substring(1)};function Cg(t){return null===t}function Lg(t){return void 0===t}function Ig(t){return t instanceof Element||t instanceof HTMLDocument}var jg=function(t){t=Pg(t);return t.charAt(0).toUpperCase()+t.substring(1)};function Rg(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Dg(t,e,n,r){return e&&Rg(t,e),n&&Rg(t,n),r&&Rg(t,r),t}function Bg(o,a){var s;if(hg(o))return(s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=a?a.apply(this,t):t[0],i=s.cache;return i.has(r)?i.get(r):(n=o.apply(this,t),i.set(r,n),n)}).cache=new Map,s;throw new TypeError("Expected a function")}var Fg=function(t){if("object"!=typeof t||null===t)return t;if(dg(t))for(var e=[],n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=Fg(t[n]):e[n]=t[n];else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=Fg(t[i]):e[i]=t[i];return e},zg=5;function Gg(t,e,n){for(var r=0,i=xg(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t}function Wg(e,t){var n;return null!==e&&bg(e)?(n={},yg(t,function(t){Zg.call(e,t)&&(n[t]=e[t])}),n):{}}function Hg(t,r){return n=function(t,e,n){return r.includes(n)||(t[n]=e),t},e={},dg(t=t)||bg(t)?(i=e,yg(t,function(t,e){i=n(i,t,e)}),i):t;var n,e,i}function Vg(n,r,i){function o(){u=!1===i.leading?0:Date.now(),a=null,l=n.apply(s,c),a||(s=c=null)}function t(){var t=Date.now(),e=(u||!1!==i.leading||(u=t),r-(t-u));return s=this,c=arguments,e<=0||r<e?(a&&(clearTimeout(a),a=null),u=t,l=n.apply(s,c),a||(s=c=null)):a||!1===i.trailing||(a=setTimeout(o,e)),l}var a,s,c,l,u=0;return i=i||{},t.cancel=function(){clearTimeout(a),u=0,a=s=c=null},t}function Yg(){}function Ug(t){return t}var qg,P=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)!function t(e,n,r,i){for(var o in r=r||0,i=i||zg,n){var a;n.hasOwnProperty(o)&&(null!==(a=n[o])&&bg(a)?(bg(e[o])||(e[o]={}),r<i?t(e[o],a,r+1,i):e[o]=n[o]):dg(a)?(e[o]=[],e[o]=e[o].concat(a)):void 0!==a&&(e[o]=a))}}(t,e[r]);return t},Xg=function(t,e){if(!cg(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},$g=function(t,e){if(t===e)return!0;if(t&&e&&!xg(t)&&!xg(e)){if(cg(t)||cg(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=$g(t[r],e[r]));r++);return n}if(gg(t)||gg(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=$g(t[i[r]],e[i[r]]));r++);return n}}return!1},Zg=Object.prototype.hasOwnProperty;function Kg(t){return fg(t)?0:(cg(t)?t:Object.keys(t)).length}var Jg=Bg(function(t,e){var n=(e=void 0===e?{}:e).fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,e=e.fontVariant;return(qg=qg||document.createElement("canvas").getContext("2d")).font=[o,e,i,n+"px",r].join(" "),qg.measureText(xg(t)?t:"").width},function(t,e){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([t],Ag(e=void 0===e?{}:e)).join("")});const Qg=()=>[["cartesian"]],tv=(Qg.props={},({startAngle:t=-Math.PI/2,endAngle:e=3*Math.PI/2,innerRadius:n=0,outerRadius:r=1})=>[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,e,n,r]]),ev=(tv.props={},({startAngle:t=0,endAngle:e=6*Math.PI,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]]),nv=(ev.props={},()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]]),rv=(nv.props={},()=>[["translate",.5,.5],["reflect"],["translate",-.5,-.5]]),iv=(rv.props={},()=>[["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]]),ov=(iv.props={},()=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5]]),av=(ov.props={},({startAngle:t=-Math.PI/2,endAngle:e=3*Math.PI/2,innerRadius:n=0,outerRadius:r=1})=>[...nv(),...tv({startAngle:t,endAngle:e,innerRadius:n,outerRadius:r})]),sv=(av.props={},({startAngle:t=-Math.PI/2,endAngle:e=3*Math.PI/2,innerRadius:n=0,outerRadius:r=1})=>[["transpose"],...rv(),...tv({startAngle:t,endAngle:e,innerRadius:n,outerRadius:r})]),cv=(sv.props={},()=>[["parallel",0,1,0,1]]),lv=(cv.props={},({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,isVisual:i=!1})=>[["fisheye",t,e,n,r,i]]),uv=(lv.props={},({focusX:t=0,distortionX:e=2,isVisual:n=!1})=>[["fisheye.x",t,e,n]]),hv=(uv.props={},({focusY:t=0,distortionY:e=2,isVisual:n=!1})=>[["fisheye.x",t,e,n]]),fv=(hv.props={},({value:e})=>t=>t.map(()=>e)),dv=(fv.props={},({value:e})=>t=>t.map(e)),pv=(dv.props={},({value:e})=>t=>t.map(t=>t[e])),yv=(pv.props={},({value:t})=>()=>t);function gv(){return[{name:"color"},{name:"shape"},{name:"enterType"},{name:"enterDelay",scaleName:"enter"},{name:"enterDuration",scaleName:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function vv(){return[...gv(),{name:"title",scale:"identity"},{name:"tooltip",scale:"identity",independent:!0}]}function mv(){return[{type:"maybeKey"}]}function bv(t,e){return t.getBandWidth(t.invert(e))}function xv(t,e,n={}){const{x:i,y:o}=e,{x:a,y:s}=t,{style:{bandOffset:r=.5,bandOffsetX:c=r,bandOffsetY:l=r}={}}=n,u=!(null===a||void 0===a||!a.getBandWidth),h=!(null===s||void 0===s||!s.getBandWidth);return u||h?(t,e)=>{var n=u?bv(a,i[e]):0,e=h?bv(s,o[e]):0,[t,r]=t;return[t+c*n,r+l*e]}:t=>t}function wv(t,e){return t.getBandWidth(t.invert(e))}yv.props={};const kv=()=>(t,e,n,i)=>{const{x:o,y:a,y1:s,series:c,size:r}=n,l=e.x,u=e.series,[h]=i.getSize(),f=r?r.map(t=>+t/h):null,d=r?(t,e,n)=>{t+=e/2,e=f[n];return[t-e/2,t+e/2]}:(t,e,n)=>[t,t+e];return[t,Array.from(t,t=>{var e=wv(l,o[t]),n=e*(u?wv(u,null===c||void 0===c?void 0:c[t]):1),e=(+(null===c||void 0===c?void 0:c[t])||0)*e,e=+o[t]+e,[e,n]=d(e,n,t),r=+a[t],t=+s[t];return[[e,r],[n,r],[n,t],[e,t]].map(t=>i.map(t))})]},Ev=(kv.props={defaultShape:"rect",defaultLabelShape:"label",channels:[...vv(),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[{type:"maybeZeroY1"},{type:"maybeZeroX"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["rect","hollow","funnel","pyramid"]},()=>(t,e,n,r)=>{const{x:i,x1:o,y:a,y1:s}=n;return[t,Array.from(t,t=>{return[[+i[t],+a[t]],[+o[t],+a[t]],[+o[t],+s[t]],[+i[t],+s[t]]].map(t=>r.map(t))})]});function _v(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function Mv(t,e){t=function(e,n){let r=0,i,o=0,a=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(i=t-o,o+=i/++r,a+=i*(t-o));else{let t=-1;for(var s of e)null!=(s=n(s,++t,e))&&(s=+s)>=s&&(i=s-o,o+=i/++r,a+=i*(s-o))}if(1<r)return a/(r-1)}(t,e);return t&&Math.sqrt(t)}function Sv(e,n){let r,i;if(void 0===n)for(const t of e)null!=t&&(void 0===r?t>=t&&(r=i=t):(r>t&&(r=t),i<t&&(i=t)));else{let t=-1;for(var o of e)null!=(o=n(o,++t,e))&&(void 0===r?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}return[r,i]}Ev.props={defaultShape:"rect",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[{type:"maybeZeroY1"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["rect","hollow"]};class Tv extends Map{constructor(t,e=function(t){return null!==t&&"object"==typeof t?t.valueOf():t}){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ov(this,t))}has(t){return super.has(Ov(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):(t.set(e,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){e=e(n);t.has(e)&&(n=t.get(e),t.delete(e));return n}(this,t))}}function Ov({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):n}function Av(t){return t}function Pv(t,...e){return Nv(t,Av,Av,e)}function Nv(t,u,h,f){return function t(e,n){if(n>=f.length)return h(e);var r=new Tv,i=f[n++];let o=-1;for(const c of e){var a=i(c,++o,e),s=r.get(a);s?s.push(c):r.set(a,[c])}for(const[l,e]of r)r.set(l,t(e,n));return u(r)}(t,0)}function Cv(e,...i){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n]=i;var t,r;return n&&2!==n.length||1<i.length?(t=Uint32Array.from(e,(t,e)=>e),1<i.length?(i=i.map(t=>e.map(t)),t.sort((t,e)=>{for(const r of i){var n=Iv(r[t],r[e]);if(n)return n}})):(n=e.map(n),t.sort((t,e)=>Iv(n[t],n[e]))),r=e,Array.from(t,t=>r[t])):e.sort(Lv(n))}function Lv(r=_v){if(r===_v)return Iv;if("function"!=typeof r)throw new TypeError("compare is not a function");return(t,e)=>{var n=r(t,e);return n||0===n?n:(0===r(e,e))-(0===r(t,t))}}function Iv(t,e){return(null==t||!(t<=t))-(null==e||!(e<=e))||(t<e?-1:e<t?1:0)}function jv(t,i,e){return(2!==i.length?Cv(Nv(t,Av,i,[e]),([t,e],[n,r])=>_v(e,r)||_v(t,n)):Cv(Pv(t,e),([t,e],[n,r])=>i(e,r)||_v(t,n))).map(([t])=>t)}function Rv(e,n){let r;if(void 0===n)for(const t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function Dv(t,e){let n,r=-1,i=-1;if(void 0===e)for(const a of t)++i,null!=a&&(n<a||void 0===n&&a>=a)&&(n=a,r=i);else for(var o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Bv(e,n){let r;if(void 0===n)for(const t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function Fv(n,r,i=0,o=n.length-1,a){for(a=void 0===a?Iv:Lv(a);i<o;){600<o-i&&(s=o-i+1,c=r-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),u=.5*Math.sqrt(u*l*(s-l)/s)*(c-s/2<0?-1:1),Fv(n,r,Math.max(i,Math.floor(r-c*l/s+u)),Math.min(o,Math.floor(r+(s-c)*l/s+u)),a));var s,c,l,u,h=n[r];let t=i,e=o;for(zv(n,i,r),0<a(n[o],h)&&zv(n,i,o);t<e;){for(zv(n,t,e),++t,--e;a(n[t],h)<0;)++t;for(;0<a(n[e],h);)--e}0===a(n[i],h)?zv(n,i,e):zv(n,++e,o),e<=r&&(i=e+1),r<=e&&(o=e-1)}return n}function zv(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Gv(t,e,n){var r;if(n=(t=Float64Array.from(function*(e,n){if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(r=+r)>=r&&(yield r)}}(t,n))).length)return(e=+e)<=0||n<2?Bv(t):1<=e?Rv(t):(n=(n-1)*e,(r=Rv(Fv(t,e=Math.floor(n)).subarray(0,e+1)))+(Bv(t.subarray(e+1))-r)*(n-e))}function Wv(e,n){let r=0,i=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(++r,i+=t);else{let t=-1;for(var o of e)null!=(o=n(o,++t,e))&&(o=+o)>=o&&(++r,i+=o)}if(r)return i/r}function Hv(t,e){return Gv(t,.5,e)}function Vv(e,n=_v){let r,i=!1;if(1===n.length){let t;for(const a of e){var o=n(a);(i?_v(o,t)<0:0===_v(o,o))&&(r=a,t=o,i=!0)}}else for(const t of e)(i?n(t,r)<0:0===n(t,t))&&(r=t,i=!0);return r}function Yv(e,n){let r=0;if(void 0===n)for(var t of e)(t=+t)&&(r+=t);else{let t=-1;for(var i of e)(i=+n(i,++t,e))&&(r+=i)}return r}function Uv(t){t=t.getOptions().transformations;return t.map(([t])=>t).filter(t=>"transpose"===t).length%2!=0}function qv(t){t=t.getOptions().transformations;return t.some(([t])=>"polar"===t)}function Xv(t){t=t.getOptions().transformations;return t.some(([t])=>"helix"===t)}function $v(t){t=t.getOptions().transformations;return t.some(([t])=>"parallel"===t)}function Zv(t){return Xv(t)||qv(t)}const Kv=(t,e,n,r)=>{var i;const{series:o,x:a,y:s}=n;var{x:n,y:e}=e;if(void 0===a||void 0===s)throw new Error("Missing encode for x or y channel.");var t=o?Array.from(Pv(t,t=>o[t]).values()):[t],c=t.map(t=>t[0]);const l=((null==(i=null==n?void 0:n.getBandWidth)?void 0:i.call(n))||0)/2,u=((null==(i=null==e?void 0:e.getBandWidth)?void 0:i.call(e))||0)/2;return[c,Array.from(t,t=>t.map(t=>r.map([+a[t]+l,+s[t]+u]))),t]},Jv=(t,e,n,i)=>{const o=Object.entries(n).filter(([t])=>t.startsWith("position")).map(([,t])=>t);if(0===o.length)throw new Error("Missing encode for position channel.");return[t,Array.from(t,e=>{var t=o.map(t=>+t[e]),n=i.map(t),r=[];for(let t=0;t<n.length;t+=2)r.push([n[t],n[t+1]]);return r})]},Qv=()=>(t,e,n,r)=>{return($v(r)?Jv:Kv)(t,e,n,r)},tm=(Qv.props={defaultShape:"line",defaultLabelShape:"label",channels:[...vv(),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"identity"}],preInference:[{type:"maybeSeries"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"},{type:"maybeTooltipPosition"}],shapes:["line","smooth"]},d=>(t,e,n,a)=>{const{x:r,y:i,size:s,dx:o,dy:c}=n,[l,u]=a.getSize(),h=xv(e,n,d),f=t=>{var e=+((null===o||void 0===o?void 0:o[t])||0),n=+((null===c||void 0===c?void 0:c[t])||0);return[+r[t]+e,+i[t]+n]};return[t,s?Array.from(t,t=>{var[e,n]=f(t),r=+s[t],i=r/l,r=r/u,o=[e-i,n-r],e=[e+i,n+r];return[a.map(h(o,t)),a.map(h(e,t))]}):Array.from(t,t=>[a.map(h(f(t),t))])]}),em=(tm.props={defaultShape:"hollow",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0},{name:"size",scale:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[{type:"maybeZeroY"},{type:"maybeZeroX"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["hollow","hollowDiamond","hollowHexagon","hollowSquare","hollowTriangleDown","hollowTriangle","hollowBowtie","point","plus","diamond","square","triangle","hexagon","cross","bowtie","hyphen","linePoint","tick","triangleDown"]},s=>(t,e,n,r)=>{const{x:i,y:o}=n,a=xv(e,n,s);return[t,Array.from(t,t=>{var e=[+i[t],+o[t]];return[r.map(a(e,t))]})]}),nm=(em.props={defaultShape:"text",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0},{name:"text",required:!0,scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["text","badge"]},()=>(t,e,n,i)=>{const{x:o,y:a}=n,s=e.x,c=e.y;return[t,Array.from(t,t=>{var e=s.getBandWidth(s.invert(+o[t])),n=c.getBandWidth(c.invert(+a[t])),r=+o[t],t=+a[t];return[[r,t],[r+e,t],[r+e,t+n],[r,t+n]].map(t=>i.map(t))})]}),rm=(nm.props={defaultShape:"cell",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[{type:"maybeZeroX"},{type:"maybeZeroY"},{type:"maybeZeroPadding"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["rect","hollow"]},()=>(t,e,n,o)=>{const{x:a,y:s,y1:c,series:r}=n;n=r?Array.from(Pv(t,t=>r[t]).values()):[t];return[n.map(t=>t[0]),Array.from(n,e=>{var n=e.length,r=new Array(2*n);for(let t=0;t<e.length;t++){var i=e[t];r[t]=o.map([+a[i],+s[i]]),r[n+t]=o.map([+a[i],+c[i]])}return r}),n]}),im=(rm.props={defaultShape:"area",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"identity"}],preInference:[{type:"maybeSeries"},{type:"maybeZeroY1"},{type:"maybeZeroPadding"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["area","smooth"]},l=>(t,e,n,r)=>{const{x:i,y:o,x1:a=i,y1:s=o}=n,c=xv(e,n,l);e=t.map(t=>[r.map(c([+i[t],+o[t]],t)),r.map(c([+a[t],+s[t]],t))]);return[t,e]}),om=(im.props={defaultShape:"link",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[{type:"maybeIdentityY"},{type:"maybeIdentityX"}],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["link","arc","vhv","smooth"]},s=>(t,e,n,r)=>{const{x:i,y:o}=n,a=xv(e,n,s);return[t,Array.from(t,t=>{var e=[+i[t],+o[t]];return[r.map(a(e,t))]})]}),am=(om.props={defaultShape:"image",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0},{name:"src",required:!0,scale:"identity"},{name:"size"}],preInference:[],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["image"]},()=>(t,e,n,o)=>{const a=Object.entries(n).filter(([t])=>t.startsWith("x")).map(([,t])=>t),s=Object.entries(n).filter(([t])=>t.startsWith("y")).map(([,t])=>t);n=t.map(e=>{var n=[];for(let t=0;t<a.length;t++){var r=a[t][e];if(void 0===r)break;var i=s[t][e];n.push(o.map([+r,+i]))}return n});return[t,n]}),sm=(am.props={defaultShape:"polygon",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["polygon","ribbon"]},()=>(t,e,n,s)=>{const{x:c,y:l,y1:u,y2:h,y3:f,y4:d,series:p}=n,y=e.x,g=e.series;return[t,Array.from(t,t=>{var e=y.getBandWidth(y.invert(+c[t])),n=e*(g?g.getBandWidth(g.invert(+(null===p||void 0===p?void 0:p[t]))):1),e=(+(null===p||void 0===p?void 0:p[t])||0)*e,e=+c[t]+e+n/2,[t,r,i,o,a]=[+l[t],+u[t],+h[t],+f[t],+d[t]];return[[e-n/2,a],[e+n/2,a],[e,a],[e,o],[e-n/2,o],[e+n/2,o],[e+n/2,r],[e-n/2,r],[e-n/2,i],[e+n/2,i],[e,r],[e,t],[e-n/2,t],[e+n/2,t]].map(t=>s.map(t))})]}),cm=(sm.props={defaultShape:"box",defaultLabelShape:"label",channels:[...vv(),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["box"]},()=>(t,e,n,i)=>{const{x:o,y:a,size:s,rotate:c}=n,[l,u]=i.getSize();n=t.map(t=>{var e=+c[t]/180*Math.PI,n=+s[t],r=n/l,n=n/u,r=r*Math.cos(e),n=-n*Math.sin(e);return[i.map([+o[t]-r/2,+a[t]-n/2]),i.map([+o[t]+r/2,+a[t]+n/2])]});return[t,n]}),lm=(cm.props={defaultShape:"vector",defaultLabelShape:"label",channels:[...vv(),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[],postInference:[...mv(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["vector"]},()=>(t,e,n,r)=>{const i=n["y"];return[t,Array.from(t,t=>{return[[0,i[t]],[1,i[t]]].map(t=>r.map(t))})]}),um=(lm.props={defaultShape:"line",defaultLabelShape:"label",channels:[...gv(),{name:"y",required:!0}],preInference:[{type:"maybeTupleY"}],postInference:[...mv()],shapes:["line"]},()=>(t,e,n,r)=>{const i=n["x"];return[t,Array.from(t,t=>{return[[i[t],1],[i[t],0]].map(t=>r.map(t))})]}),hm=(um.props={defaultShape:"line",defaultLabelShape:"label",channels:[...gv(),{name:"x",required:!0}],preInference:[{type:"maybeTupleX"}],postInference:[...mv()],shapes:["line"]},(...t)=>im(...t));function fm(t,e,n,r){if(e)return()=>[0,1];const{[t]:i,[t+"1"]:o}=n;return t=>{var e=(null==(e=r.getBandWidth)?void 0:e.call(r,r.invert(+o[t])))||0;return[i[t],o[t]+e]}}function dm(t={}){const{extendX:r=!1,extendY:s=!1}=t;return(t,e,n,i)=>{const o=fm("x",r,n,e.x),a=fm("y",s,n,e.y);return[t,Array.from(t,t=>{var[e,n]=o(t),[t,r]=a(t);return[[e,t],[n,t],[n,r],[e,r]].map(t=>i.map(t))})]}}hm.props={defaultShape:"connector",defaultLabelShape:"label",channels:[...gv(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[],postInference:[...mv()],shapes:["connector"]};const pm=()=>dm(),ym=(pm.props={defaultShape:"range",defaultLabelShape:"label",channels:[...gv(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[],postInference:[...mv()],shapes:["range"]},()=>dm({extendY:!0})),gm=(ym.props={defaultShape:"range",defaultLabelShape:"label",channels:[...gv(),{name:"x",required:!0}],preInference:[],postInference:[...mv()],shapes:["range"]},()=>dm({extendX:!0})),vm=(gm.props={defaultShape:"range",defaultLabelShape:"label",channels:[...gv(),{name:"y",required:!0}],preInference:[],postInference:[...mv()],shapes:["range"]},()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"]),mm=(vm.props={},()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"]),bm=(mm.props={},()=>["#95F0FF","#78D3F8","#5AB8DB","#3A9DBF","#0A82A4","#00698A","#005170","#003958","#002440"]),xm=(bm.props={},()=>["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"]),wm=(xm.props={},()=>["#9DF5CA","#61DDAA","#42C090","#19A576","#008A5D","#006F45","#00562F","#003E19","#002800"]),km=(wm.props={},()=>["#8CF4F2","#6FD8D6","#52BCBA","#31A09F","#008685","#006C6C","#005354","#003B3D","#002627"]),Em=(km.props={},()=>["#D0E4FF","#B4C8ED","#99ADD1","#7E92B5","#65789B","#4C6080","#334867","#1B324F","#021D38"]),_m=(Em.props={},()=>["#FFC771","#FFAB57","#F6903D","#D77622","#B85C00","#9B4300","#7D2A00","#601000","#450000"]),Mm=(_m.props={},()=>["#FFC2EC","#FFA6D0","#F08BB4","#D37099","#B65680","#9A3C67","#7E214F","#630038","#490022"]),Sm=(Mm.props={},()=>["#FFBB95","#FF9E7B","#FF8362","#E8684A","#C84D32","#AA311C","#8C1104","#6F0000","#510000"]),Tm=(Sm.props={},()=>["#FFD83B","#F6BD16","#D7A100","#B98700","#9C6E00","#7F5600","#633F00","#482900","#2F1400"]),Om=(Tm.props={},()=>["#FFCCFF","#EBB0FF","#CE95F5","#B27AD8","#9661BC","#7B48A1","#613086","#48186C","#2E0054"]),Am=(Om.props={},()=>["#FDEDBE","#FFDF80","#FFCB33","#FFB200","#FF8C00","#FF6500","#E6450F","#B22C00","#661900"]),Pm=(Am.props={},()=>["#FFEBB0","#FFDF80","#FACA3E","#E6B80B","#B5AC23","#6A9A48","#20876B","#06746B","#044E48"]),Nm=(Pm.props={},()=>["#FFEBB0","#FFDF80","#FACA3E","#E6B80B","#B5AC23","#6A9A48","#20876B","#06746B","#044E48"]),Cm=(Nm.props={},()=>["#D2EDC8","#A9DACC","#75C6D1","#42B3D5","#3993C2","#3073AE","#27539B","#1E3388","#171E6D"]),Lm=(Cm.props={},()=>["#003F7F","#004C99","#0059B2","#0072E5","#1A8CFF","#4DA6FF","#80BFFF","#B3D9FF","#EAE9EB","#FFD5B1","#FFC08C","#FFAB66","#FF963E","#F17F0B","#D16A0C","#A45411","#794012"]),Im=(Lm.props={},()=>["#661900","#B22C00","#E6450F","#FF6500","#FF8C00","#FFB200","#FFCB33","#FFDF80","#E0F2EB","#66D8FF","#1AC5FF","#007FFF","#0059FF","#0040FF","#002CB2","#FFDF80","#001F7F"]),jm=(Im.props={},()=>["#014c63","#10686c","#168575","#16a37e","#0bc286","#65cf9b","#96dcb0","#c1e8c5","#F2EAEA","#FFC5AC","#FFA884","#FF895D","#FF6836","#F3470D","#D13808","#A4300C","#7A270E"]),Rm=(jm.props={},()=>["#661900","#B22C00","#E6450F","#FF6500","#FF8C00","#FFB200","#FFCB33","#FFDF80","#FFE2DC","#EAACFF","#DD78FF","#C53FFF","#A700FF","#8500FF","#620BE1","#3607C2","#27029A"]);function Dm(t,...e){return e.reduce((e,n)=>t=>e(n(t)),t)}function Bm(e,n){return n-e?t=>(t-e)/(n-e):t=>.5}function Fm(t,e,n,r,i){let o=n||0,a=r||t.length;for(var s=i||(t=>t);o<a;){var c=Math.floor((o+a)/2);s(t[c])>e?a=c:o=c+1}return o}Rm.props={};const zm=Math.sqrt(50),Gm=Math.sqrt(10),Wm=Math.sqrt(2);function Hm(t,e,n){e=(e-t)/Math.max(0,n),t=Math.floor(Math.log(e)/Math.LN10),n=e/10**t;return 0<=t?(n>=zm?10:n>=Gm?5:n>=Wm?2:1)*10**t:-(10**-t)/(n>=zm?10:n>=Gm?5:n>=Wm?2:1)}function Vm(t,e,n){n=Math.abs(e-t)/Math.max(0,n);let r=10**Math.floor(Math.log(n)/Math.LN10);n/=r;return n>=zm?r*=10:n>=Gm?r*=5:n>=Wm&&(r*=2),e<t?-r:r}const Ym=(t,e,n=5)=>{t=[t,e];let r=0,i=t.length-1,o=t[r],a=t[i],s;return a<o&&([o,a]=[a,o],[r,i]=[i,r]),0<(s=Hm(o,a,n))?(o=Math.floor(o/s)*s,a=Math.ceil(a/s)*s,s=Hm(o,a,n)):s<0&&(o=Math.ceil(o*s)/s,a=Math.floor(a*s)/s,s=Hm(o,a,n)),0<s?(t[r]=Math.floor(o/s)*s,t[i]=Math.ceil(a/s)*s):s<0&&(t[r]=Math.ceil(o*s)/s,t[i]=Math.floor(a*s)/s),t},Um=36e5,qm=864e5,Xm=7*qm;qm,qm;function $m(t,n,s,r){const i=(t,e)=>{let n=e;for(;n&&r(t)%e!=0;)s(t,-1),--n;return t},c=(t,e)=>{e&&i(t,e),n(t)};const l=(t,e)=>{t=new Date(+t-1);return c(t,e),s(t,e),c(t),t};return{ceil:l,floor:(t,e)=>{t=new Date(+t);return c(t,e),t},range:(t,e,n,r)=>{for(var i=[],o=Math.floor(n),a=r?l(t,n):l(t);+a<+e;s(a,o),c(a))i.push(new Date(+a));return i},duration:t}}pt=$m(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),e=$m(1e3,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+1e3*e)},t=>t.getSeconds()),Q=$m(6e4,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+6e4*e)},t=>t.getMinutes()),i=$m(Um,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Um*e)},t=>t.getHours()),f=$m(qm,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+qm*e)},t=>t.getDate()-1);const Zm=$m(2592e6,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{var n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth());c=$m(Xm,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Xm*e)},t=>{var e=Zm.floor(t),t=new Date(+t);return Math.floor((+t-+e)/Xm)}),Mt=$m(31536e6,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{var n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear());const Km={millisecond:pt,second:e,minute:Q,hour:i,day:f,week:c,month:Zm,year:Mt};K=$m(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),l=$m(1e3,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+1e3*e)},t=>t.getUTCSeconds()),J=$m(6e4,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+6e4*e)},t=>t.getUTCMinutes()),n=$m(Um,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Um*e)},t=>t.getUTCHours()),dt=$m(qm,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+qm*e)},t=>t.getUTCDate()-1);const Jm=$m(2592e6,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{var n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth());jt=$m(Xm,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Xm*e)},t=>{var e=Jm.floor(t),t=new Date(+t);return Math.floor((+t-+e)/Xm)}),a=$m(31536e6,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{var n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear());const Qm={millisecond:K,second:l,minute:J,hour:n,day:dt,week:jt,month:Jm,year:a};function t1(t,e,n,r,i){var t=+t,e=+e,{tickIntervals:i,year:o,millisecond:a}=function(t){var{year:t,month:e,week:n,day:r,hour:i,minute:o,second:a,millisecond:s}=t?Qm:Km;return{tickIntervals:[[a,1],[a,5],[a,15],[a,30],[o,1],[o,5],[o,15],[o,30],[i,1],[i,3],[i,6],[i,12],[r,1],[r,2],[n,1],[e,1],[e,3],[t,1]],year:t,millisecond:s}}(i),s=([t,e])=>t.duration*e,n=r?(e-t)/r:n||5,c=r||(e-t)/n,l=i.length,u=Fm(i,c,0,l,s);let h;return h=u===l?[o,Vm(t/o.duration,e/o.duration,n)]:u?([l,o]=c/s(i[u-1])<s(i[u])/c?i[u-1]:i[u],[l,r?Math.ceil(r/l.duration):o]):[a,Math.max(Vm(t,e,n),1)]}const e1=(t,e,n,r,i)=>{var o=e<t,a=o?e:t,t=o?t:e,[e,n]=t1(a,t,n,r,i),r=[e.floor(a,n),e.ceil(t,n)];return o?r.reverse():r};function n1(t){return!Lg(t)&&!Cg(t)&&!Number.isNaN(t)}const r1=e=>t=>-e(-t),i1=(t,e)=>{const n=Math.log(t);t=t===Math.E?Math.log:t=>Math.log(t)/n;return e?r1(t):t},o1=(e,t)=>{var n=e===Math.E?Math.exp:t=>e**t;return t?r1(n):n},a1=(t,e,n,r)=>{var i=t<0,o=i1(r,i),r=o1(r,i),i=e<t,a=i?t:e,e=[r(Math.floor(o(i?e:t))),r(Math.ceil(o(a)))];return i?e.reverse():e};function s1(e,a){return t=>{t.prototype.rescale=function(){this.initRange(),this.nice();var[t]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t))},t.prototype.initRange=function(){var t=this.options["interpolator"];this.options.range=e(t)},t.prototype.composeOutput=function(t,e){var n,{domain:r,interpolator:i,round:o}=this.getOptions(),r=a(r.map(t)),o=o?(n=i,t=>{t=n(t);return _g(t)?Math.round(t):t}):i;this.output=Dm(o,r,e,t)},t.prototype.invert=void 0}}var c1,u={exports:{}},ut={exports:{}},l1=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||0<=t.length&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))},u1=Array.prototype.concat,h1=Array.prototype.slice,f1=ut.exports=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];l1(i)?e=u1.call(e,h1.call(i)):e.push(i)}return e},d1=(f1.wrap=function(t){return function(){return t(f1(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),p1=ut.exports,y1=Object.hasOwnProperty,g1=Object.create(null);for(c1 in d1)y1.call(d1,c1)&&(g1[d1[c1]]=c1);var v1=u.exports={to:{},get:{}};function m1(t,e,n){return Math.min(Math.max(e,t),n)}function b1(t){t=Math.round(t).toString(16).toUpperCase();return t.length<2?"0"+t:t}v1.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=v1.get.hsl(t),n="hsl";break;case"hwb":e=v1.get.hwb(t),n="hwb";break;default:e=v1.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},v1.get.rgb=function(t){if(!t)return null;var e,n,r,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var o=2*n;i[n]=parseInt(e.slice(o,2+o),16)}r&&(i[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)i[n]=parseInt(e[n]+e[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else{if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(n=0;n<3;n++)i[n]=parseInt(e[n+1],0);else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:y1.call(d1,e[1])?((i=d1[e[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(e[n+1]))}e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}for(n=0;n<3;n++)i[n]=m1(i[n],0,255);return i[3]=m1(i[3],0,1),i},v1.get.hsl=function(t){var e;return(t=t&&t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,m1(parseFloat(t[2]),0,100),m1(parseFloat(t[3]),0,100),m1(isNaN(e)?1:e,0,1)]):null},v1.get.hwb=function(t){var e;return(t=t&&t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,m1(parseFloat(t[2]),0,100),m1(parseFloat(t[3]),0,100),m1(isNaN(e)?1:e,0,1)]):null},v1.to.hex=function(){var t=p1(arguments);return"#"+b1(t[0])+b1(t[1])+b1(t[2])+(t[3]<1?b1(Math.round(255*t[3])):"")},v1.to.rgb=function(){var t=p1(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},v1.to.rgb.percent=function(){var t=p1(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},v1.to.hsl=function(){var t=p1(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},v1.to.hwb=function(){var t=p1(arguments),e="";return 4<=t.length&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},v1.to.keyword=function(t){return g1[t.slice(0,3)]};var x1=u.exports;function w1(t,e,n){let r=n;return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function k1(t){var e,n,r,t=x1.get(t);return t?({model:t,value:e}=t,"rgb"===t?e:"hsl"===t?(e=(t=e)[0]/360,n=t[1]/100,r=t[2]/100,t=t[3],0==n?[255*r,255*r,255*r,t]:[255*w1(n=2*r-(r=r<.5?r*(1+n):r+n-r*n),r,e+1/3),255*w1(n,r,e),255*w1(n,r,e-1/3),t]):null):null}const E1=(e,n)=>t=>e*(1-t)+n*t,_1=(t,e)=>{if("number"==typeof t&&"number"==typeof e)return E1(t,e);if("string"!=typeof t||"string"!=typeof e)return()=>t;{var n=t,r=e;const c=k1(n),l=k1(r);return null===c||null===l?c?()=>n:()=>r:e=>{var n=new Array(4);for(let t=0;t<4;t+=1){var r=c[t],i=l[t];n[t]=r*(1-e)+i*e}var[t,o,a,s]=n;return`rgba(${Math.round(t)}, ${Math.round(o)}, ${Math.round(a)}, ${s})`}}},M1=(t,e)=>{const n=E1(t,e);return t=>Math.round(n(t))};function S1({map:t,initKey:e},n){e=e(n);return t.has(e)?t.get(e):n}function T1(t){return"object"==typeof t?t.valueOf():t}class O1 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=T1,null!==t)for(var[e,n]of t)this.set(e,n)}get(t){return super.get(S1({map:this.map,initKey:this.initKey},t))}has(t){return super.has(S1({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(([{map:t,initKey:n},r]=[{map:this.map,initKey:this.initKey},t],n=n(r),t.has(n)?t.get(n):(t.set(n,r),r)),e);var n,r}delete(t){return super.delete(([{map:t,initKey:e},n]=[{map:this.map,initKey:this.initKey},t],e=e(n),t.has(e)&&(n=t.get(e),t.delete(e)),n));var e,n}}class A1{constructor(t){this.options=P({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=P({},this.options,t),this.rescale(t)}rescale(t){}}const P1=Symbol("defaultUnknown");function N1(e,n,r){for(let t=0;t<n.length;t+=1)e.has(n[t])||e.set(r(n[t]),t)}function C1(t){var{value:t,from:e,to:n,mapper:r,notFoundReturn:i}=t;let o=r.get(t);if(void 0===o){if(i!==P1)return i;o=e.push(t)-1,r.set(t,o)}return n[o%n.length]}function L1(t){return t instanceof Date?t=>""+t:"object"==typeof t?t=>JSON.stringify(t):t=>t}class I1 extends A1{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[],unknown:P1}}map(t){return 0===this.domainIndexMap.size&&N1(this.domainIndexMap,this.getDomain(),this.domainKey),C1({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&N1(this.rangeIndexMap,this.getRange(),this.rangeKey),C1({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){var[e]=this.options.domain,[n]=this.options.range;this.domainKey=L1(e),this.rangeKey=L1(n),this.rangeIndexMap?(t&&!t.range||this.rangeIndexMap.clear(),t&&!t.domain&&!t.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new I1(this.options)}getRange(){return this.options.range}getDomain(){var t,e;return this.sortedDomain||({domain:t,compare:e}=this.options,this.sortedDomain=e?[...t].sort(e):t),this.sortedDomain}}function j1(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:o,round:a,align:s}=t;var c=e.length,l=0<(l=(t=c)-(u=o).length)?[...u,...new Array(l).fill(1)]:l<0?u.slice(0,t):u,[t,u]=n,u=u-t,h=u/(2/c*r+1-1/c*i);const f=h*i/c;h-=c*f;const d=function(t){const e=Math.min(...t);return t.map(t=>t/e)}(l),p=h/d.reduce((t,e)=>t+e);var l=new O1(e.map((t,e)=>{e=d[e]*p;return[t,a?Math.floor(e):e]})),y=new O1(e.map((t,e)=>{e=d[e]*p+f;return[t,a?Math.floor(e):e]})),h=Array.from(y.values()).reduce((t,e)=>t+e),t=t+(u-(h-h/c*i))*s;let g=a?Math.round(t):t;var v=new Array(c);for(let t=0;t<c;t+=1){v[t]=(m=g,Math.round(1e12*m)/1e12);var m=e[t];g+=y.get(m)}return{valueBandWidth:l,valueStep:y,adjustedRange:v}}class R1 extends I1{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:P1,flex:[]}}clone(){return new R1(this.options)}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:t,paddingInner:e}=this.options;return 0<t?t:e}getPaddingOuter(){var{padding:t,paddingOuter:e}=this.options;return 0<t?t:e}rescale(){super.rescale();var{align:t,domain:e,range:n,round:r,flex:i}=this.options,{adjustedRange:t,valueBandWidth:n,valueStep:r}=function(t){var e=t["domain"];if(0===(e=e.length))return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!(null==(n=t.flex)||!n.length))return j1(t);var{range:n,paddingOuter:t,paddingInner:r,round:i,align:o}=t;let a,s,c=n[0];return n=n[1]-c,a=n/Math.max(1,2*t+(e-r)),i&&(a=Math.floor(a)),c+=(n-a*(e-r))*o,s=a*(1-r),i&&(c=Math.round(c),s=Math.round(s)),t=new Array(e).fill(0).map((t,e)=>c+e*a),{valueStep:a,valueBandWidth:s,adjustedRange:t}}({align:t,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=r,this.valueBandWidth=n,this.adjustedRange=t}}const D1=(t,e,n)=>{let r,i,o=t,a=e;if(o===a&&0<n)return[o];let s=Hm(o,a,n);if(0===s||!Number.isFinite(s))return[];if(0<s){o=Math.ceil(o/s),a=Math.floor(a/s),i=new Array(r=Math.ceil(a-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),i=new Array(r=Math.ceil(a-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)/s}return i};function B1(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}const F1=[1,5,2,2.5,4,3],z1=100*Number.EPSILON;const G1=(n,r,t=5,i=!0,o=F1,a=[.25,.2,.5,.05])=>{var s=t<0?0:Math.round(t);if(Number.isNaN(n)||Number.isNaN(r)||"number"!=typeof n||"number"!=typeof r||!s)return[];if(r-n<1e-15||1===s)return[n];var c,l,u,h,f,d,p,y={score:-2,lmin:0,lmax:0,lstep:0};let g=1;for(;g<1/0;){for(let t=0;t<o.length;t+=1){var v=o[t],m=(h=v,f=o,d=g,p=void 0,p=Kg(f),1-Xg(f,h)/(p-1)-d+1);if(a[0]*m+a[1]+a[2]+a[3]<y.score){g=1/0;break}let e=2;for(;e<1/0;){x=e;var b=(u=s)<=x?2-(x-1)/(u-1):1;if(a[0]*m+a[1]+a[2]*b+a[3]<y.score)break;var x=(r-n)/(e+1)/g/v;let t=Math.ceil(Math.log10(x));for(;t<1/0;){var w=g*v*10**t,k=(_=r,k=w*(e-1),(_-=n)<k?1-((k-_)/2)**2/(.1*_)**2:1);if(a[0]*m+a[1]*k+a[2]*b+a[3]<y.score)break;var E=Math.floor(r/w)*g-(e-1)*g,_=Math.ceil(n/w)*g;if(E<=_){var M=_-E;for(let t=0;t<=M;t+=1){var S=(E+t)*(w/g),T=S+w*(e-1),O=w,A=function(t,e,n,r,i,o){var a=Kg(e),e=Xg(e,t);let s=0;return t=(r%o+o)%o,1-e/(a-1)-n+(s=(t<z1||o-t<z1)&&r<=0&&0<=i?1:s)}(v,o,g,S,T,O),P=1-.5*((r-T)**2+(n-S)**2)/(.1*(r-n))**2,N=(c=e,N=n,c=(c-1)/(T-(C=S)),l=((l=s)-1)/(Math.max(T,r)-Math.min(N,C)),2-Math.max(c/l,l/c)),C=a[0]*A+a[1]*P+a[2]*N+ +a[3];y.score<C&&(!i||S<=n&&r<=T)&&(y.lmin=S,y.lmax=T,y.lstep=O,y.score=C)}}t+=1}e+=1}}g+=1}var t=B1(y.lmax),e=B1(y.lmin),L=B1(y.lstep),I=Math.floor((t=(t-e)/L,Math.round(1e12*t)/1e12))+1,j=new Array(I);j[0]=B1(e);for(let t=1;t<I;t+=1)j[t]=B1(j[t-1]+L);return j};class W1 extends A1{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:G1}}map(t){return n1(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new W1(this.options)}getTicks(){var{domain:t,tickCount:e,tickMethod:n}=this.options,[t,r]=t;return _g(t)&&_g(r)?n(t,r,e):[]}}const H1=(t,e,n)=>{var[t,r]=t,[e,i]=e;let o,a;return Dm(a=t<r?(o=Bm(t,r),n(e,i)):(o=Bm(r,t),n(i,e)),o)},V1=(r,t,e)=>{const i=Math.min(r.length,t.length)-1,o=new Array(i),a=new Array(i);var n=r[0]>r[i],s=n?[...r].reverse():r,c=n?[...t].reverse():t;for(let t=0;t<i;t+=1)o[t]=Bm(s[t],s[t+1]),a[t]=e(c[t],c[t+1]);return t=>{var e=Fm(r,t,1,i)-1,n=o[e];return Dm(a[e],n)(t)}},Y1=(t,e,n,r)=>{return(2<Math.min(t.length,e.length)?V1:H1)(t,e,r?M1:n)};class U1 extends A1{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:E1,tickCount:5}}map(t){return n1(t)?this.output(t):this.options.unknown}invert(t){return n1(t)?this.input(t):this.options.unknown}nice(){var t,e,n,r;this.options.nice&&([t,e,n,...r]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(t,e,n,...r))}getTicks(){var t=this.options["tickMethod"],[e,n,r,...i]=this.getTickMethodOptions();return t(e,n,r,...i)}getTickMethodOptions(){var{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}chooseNice(){return Ym}rescale(){this.nice();var[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){var{clamp:e,range:n}=this.options,t=this.options.domain.map(t),n=Math.min(t.length,n.length);if(e){e=t[0],t=t[n-1];const r=t<e?t:e,i=t<e?e:t;return t=>Math.min(Math.max(r,t),i)}return Ug}composeOutput(t,e){var{domain:n,range:r,round:i,interpolate:o}=this.options,n=Y1(n.map(t),r,o,i);this.output=Dm(n,e,t)}composeInput(t,e,n){var{domain:r,range:i}=this.options,i=Y1(i,r.map(t),E1);this.input=Dm(e,n,i)}}class q1 extends U1{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:_1,tickMethod:D1,tickCount:5}}chooseTransforms(){return[Ug,Ug]}clone(){return new q1(this.options)}}class X1 extends R1{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:P1,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new X1(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const $1=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class Z1 extends U1{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:_1,tickMethod:D1,tickCount:5}}constructor(t){super(t)}chooseTransforms(){var t,e,n,r=this.options["exponent"];return 1===r?[Ug,Ug]:(t=.5===r?$1:(e=r,t=>t<0?-((-t)**e):t**e),n=r,[t,t=>t<0?-((-t)**(1/n)):t**(1/n)])}clone(){return new Z1(this.options)}}class K1 extends Z1{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:_1,tickMethod:D1,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new K1(this.options)}}class J1 extends A1{constructor(t){super(t)}getDefaultOptions(){return{domain:[.5],range:[0,1]}}map(t){return n1(t)?(t=Fm(this.thresholds,t,0,this.n),this.options.range[t]):this.options.unknown}invert(t){var e=this.options["range"],e=e.indexOf(t),t=this.thresholds;return[t[e-1],t[e]]}clone(){return new J1(this.options)}rescale(){var{domain:t,range:e}=this.options;this.n=Math.min(t.length,e.length-1),this.thresholds=t}}const Q1=(t,e,n,r=10)=>{var i=t<0,o=o1(r,i),a=i1(r,i),s=e<t,c=s?e:t,l=s?t:e;let u=a(c),h=a(l),f=[];if(!(r%1)&&h-u<n){if(u=Math.floor(u),h=Math.ceil(h),i)for(;u<=h;u+=1){var d=o(u);for(let t=r-1;1<=t;--t){var p=d*t;if(l<p)break;c<=p&&f.push(p)}}else for(;u<=h;u+=1){var y=o(u);for(let t=1;t<r;t+=1){var g=y*t;if(l<g)break;c<=g&&f.push(g)}}2*f.length<n&&(f=D1(c,l,n))}else f=D1(u,h,Math.min(h-u,n)).map(o);return s?f.reverse():f};class tb extends U1{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:_1,tickMethod:Q1,tickCount:5}}chooseNice(){return a1}getTickMethodOptions(){var{domain:t,tickCount:e,base:n}=this.options;return[t[0],t[t.length-1],e,n]}chooseTransforms(){var{base:t,domain:e}=this.options,e=e[0]<0;return[i1(t,e),o1(t,e)]}clone(){return new tb(this.options)}}class eb extends J1{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:G1}}constructor(t){super(t)}nice(){var t,e,n=this.options["nice"];n&&([n,t,e]=this.getTickMethodOptions(),this.options.domain=Ym(n,t,e))}getTicks(){var t=this.options["tickMethod"],[e,n,r]=this.getTickMethodOptions();return t(e,n,r)}getTickMethodOptions(){var{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}rescale(){this.nice();var{range:t,domain:e}=this.options,[n,r]=e;this.n=t.length-1,this.thresholds=new Array(this.n);for(let t=0;t<this.n;t+=1)this.thresholds[t]=((t+1)*r-(t-this.n)*n)/(this.n+1)}invert(t){var[t,e]=super.invert(t),[n,r]=this.options.domain;return void 0===t&&void 0===e?[t,e]:[t||n,e||r]}getThresholds(){return this.thresholds}clone(){return new eb(this.options)}}function nb(t,e,n=!1){var r=t,i=(n||r.sort((t,e)=>t-e),[]);for(let t=1;t<e;t+=1)i.push(function(t,e){var n,r=t.length;if(r)return r<2?t[r-1]:(r=(r-1)*e,(n=t[e=Math.floor(r)])+(t[e+1]-n)*(r-e))}(r,t/e));return i}class rb extends J1{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:G1}}constructor(t){super(t)}rescale(){var{domain:t,range:e}=this.options;this.n=e.length-1,this.thresholds=nb(t,this.n+1,!1)}invert(t){var[t,e]=super.invert(t),n=this.options["domain"],r=n[0],n=n[n.length-1];return void 0===t&&void 0===e?[t,e]:[t||r,e||n]}getThresholds(){return this.thresholds}clone(){return new rb(this.options)}getTicks(){var{tickCount:t,domain:e,tickMethod:n}=this.options,r=e.length-1;return n(e[0],e[r],t)}}var ib=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ob=/\[([^]*?)\]/gm;function ab(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function sb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o,a=i[r];for(o in a)t[o]=a[o]}return t}function cb(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t}var lb,Te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],s=ab(h,3),ub=sb({},{dayNamesShort:ab(Te,3),dayNames:Te,monthNamesShort:s,monthNames:h,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][3<t%10?0:(t-t%10!=10?1:0)*t%10]}}),hb={D:function(t){return String(t.getDate())},DD:function(t){return cb(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return cb(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return cb(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return cb(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return cb(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return cb(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return cb(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return cb(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return cb(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return cb(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return cb(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return(t.getHours()<12?e.amPm[0]:e.amPm[1]).toUpperCase()},ZZ:function(t){t=t.getTimezoneOffset();return(0<t?"-":"+")+cb(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(t){t=t.getTimezoneOffset();return(0<t?"-":"+")+cb(Math.floor(Math.abs(t)/60),2)+":"+cb(Math.abs(t)%60,2)}},fb={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};const db=(t,e,n,r,i)=>{var o=e<t,a=o?e:t,t=o?t:e,[e,n]=t1(a,t,n,r,i),r=e.range(a,new Date(+t+1),n,!0);return o?r.reverse():r};function pb(t){var e=t.getTimezoneOffset(),t=new Date(t);return t.setMinutes(t.getMinutes()+e,t.getSeconds(),t.getMilliseconds()),t}class yb extends U1{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:db,interpolate:E1,mask:void 0,utc:!1}}chooseTransforms(){return[t=>+t,t=>new Date(t)]}chooseNice(){return e1}getTickMethodOptions(){var{domain:t,tickCount:e,tickInterval:n,utc:r}=this.options;return[t[0],t[t.length-1],e,n,r]}getFormatter(){const{mask:o,utc:t}=this.options,a=t?Qm:Km,s=t?pb:Ug;return t=>{var e=s(t),t=o||function(t,e){var{second:e,minute:n,hour:r,day:i,week:o,month:a,year:s}=e;return e.floor(t)<t?".SSS":n.floor(t)<t?":ss":r.floor(t)<t?"hh:mm":i.floor(t)<t?"hh A":a.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":s.floor(t)<t?"MMMM":"YYYY"}(t,a),n=void 0;if(void 0===t&&(t=fb.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[],i=(t=(t=fb[t]||t).replace(ob,function(t,e){return r.push(e),"@@@"}),sb(sb({},ub),n));return(t=t.replace(ib,function(t){return hb[t](e,i)})).replace(/@@@/g,function(){return r.shift()})}}clone(){return new yb(this.options)}}var gb;let vb=lb=class extends q1{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Ug,tickMethod:D1,tickCount:5}}constructor(t){super(t)}clone(){return new lb(this.options)}};vb=lb=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([s1(function(t){return[t(0),t(1)]},t=>{var[t,e]=t;return Dm(E1(0,1),Bm(t,e))})],vb);let mb=gb=class extends q1{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Ug,tickMethod:D1,tickCount:5}}constructor(t){super(t)}clone(){return new gb(this.options)}};mb=gb=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([s1(function(t){return[t(0),t(.5),t(1)]},t=>{const[e,n,r]=t,i=Dm(E1(0,.5),Bm(e,n)),o=Dm(E1(.5,1),Bm(n,r));return t=>(e>r?t<n?o:i:t<n?i:o)(t)})],mb);const bb=t=>new R1(t),xb=(bb.props={},t=>new q1(t)),wb=(xb.props={},t=>new I1(t)),kb=(wb.props={},t=>new W1(t)),Eb=(kb.props={},t=>new X1(t)),_b=(Eb.props={},t=>new yb(t)),Mb=(_b.props={},t=>new tb(t)),Sb=(Mb.props={},t=>new Z1(t)),Tb=(Sb.props={},t=>new J1(t)),Ob=(Tb.props={},t=>new rb(t)),Ab=(Ob.props={},t=>new eb(t)),Pb=(Ab.props={},t=>new K1(t)),Nb=(Pb.props={},t=>new vb(t)),Cb=(Nb.props={},Math.PI),Lb=2*Cb,Ib=1e-6,jb=Lb-Ib;function Rb(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Db(){return new Rb}function Bb(t){return function(){return t}}Rb.prototype=Db.prototype={constructor:Rb,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){var o,a,s=this._x1,c=this._y1,l=(n=+n)-(t=+t),u=(r=+r)-(e=+e),h=s-t,f=c-e,d=h*h+f*f;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>Ib&&(Math.abs(f*l-u*h)>Ib&&i?(a=l*l+u*u,r=(n=n-s)*n+(s=r-c)*s,c=Math.sqrt(a),o=Math.sqrt(d),d=(a=i*Math.tan((Cb-Math.acos((a+d-r)/(2*c*o)))/2))/o,r=a/c,Math.abs(d-1)>Ib&&(this._+="L"+(t+d*h)+","+(e+d*f)),this._+="A"+i+","+i+",0,0,"+ +(h*s<f*n)+","+(this._x1=t+r*l)+","+(this._y1=e+r*u)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+a,l=e+s,u=1^o,o=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>Ib||Math.abs(this._y1-l)>Ib)&&(this._+="L"+c+","+l),n&&((o=o<0?o%Lb+Lb:o)>jb?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):o>Ib&&(this._+="A"+n+","+n+",0,"+ +(o>=Cb)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Fb=Math.abs,zb=Math.atan2,Gb=Math.cos,Wb=Math.max,Hb=Math.min,Vb=Math.sin,Yb=Math.sqrt,Ub=1e-12,qb=Math.PI,Xb=qb/2,$b=2*qb;function Zb(t){return 1<=t?Xb:t<=-1?-Xb:Math.asin(t)}function Kb(t){return t.innerRadius}function Jb(t){return t.outerRadius}function Qb(t){return t.startAngle}function t2(t){return t.endAngle}function e2(t){return t&&t.padAngle}function n2(t,e,n,r,i,o,a){var s=t-n,c=e-r,a=(a?o:-o)/Yb(s*s+c*c),c=a*c,a=-a*s,s=t+c,t=e+a,e=n+c,n=r+a,r=(s+e)/2,l=(t+n)/2,u=e-s,h=n-t,f=u*u+h*h,o=i-o,s=s*n-e*t,n=(h<0?-1:1)*Yb(Wb(0,o*o*f-s*s)),e=(s*h-u*n)/f,t=(-s*u-h*n)/f,d=(s*h+u*n)/f,s=(-s*u+h*n)/f,u=e-r,h=t-l,n=d-r,f=s-l;return n*n+f*f<u*u+h*h&&(e=d,t=s),{cx:e,cy:t,x01:-c,y01:-a,x11:e*(i/o-1),y11:t*(i/o-1)}}function r2(){var O=Kb,A=Jb,P=Bb(0),N=null,C=Qb,L=t2,I=e2,j=null;function e(){var t,e,n,r,i,o,a,s,c,l,u,h,f,d,p,y,g,v,m,b,x,w,k=+O.apply(this,arguments),E=+A.apply(this,arguments),_=C.apply(this,arguments)-Xb,M=L.apply(this,arguments)-Xb,S=Fb(M-_),T=_<M;if(j=j||(t=Db()),E<k&&(e=E,E=k,k=e),E>Ub?S>$b-Ub?(j.moveTo(E*Gb(_),E*Vb(_)),j.arc(0,0,E,_,M,!T),k>Ub&&(j.moveTo(k*Gb(M),k*Vb(M)),j.arc(0,0,k,M,_,T))):(r=e=_,i=n=M,a=o=S,f=(u=I.apply(this,arguments)/2)>Ub&&(N?+N.apply(this,arguments):Yb(k*k+E*E)),w=x=s=Hb(Fb(E-k)/2,+P.apply(this,arguments)),f>Ub&&(h=Zb(f/k*Vb(u)),f=Zb(f/E*Vb(u)),(o-=2*h)>Ub?(r+=h*=T?1:-1,i-=h):(o=0,r=i=(_+M)/2),(a-=2*f)>Ub?(e+=f*=T?1:-1,n-=f):(a=0,e=n=(_+M)/2)),u=E*Gb(e),h=E*Vb(e),f=k*Gb(i),_=k*Vb(i),s>Ub&&(d=E*Gb(n),p=E*Vb(n),y=k*Gb(r),g=k*Vb(r),S<qb&&(M=function(t,e,n,r,i,o,a,s){var c=(s=s-o)*(n=n-t)-(a=a-i)*(r=r-e);if(!(c*c<Ub))return[t+(c=(a*(e-o)-s*(t-i))/c)*n,e+c*r]}(u,h,y,g,d,p,f,_))&&(S=u-M[0],m=h-M[1],b=d-M[0],v=p-M[1],m=1/Vb((1<(S=(S*b+m*v)/(Yb(S*S+m*m)*Yb(b*b+v*v)))?0:S<-1?qb:Math.acos(S))/2),b=Yb(M[0]*M[0]+M[1]*M[1]),x=Hb(s,(k-b)/(m-1)),w=Hb(s,(E-b)/(1+m)))),a>Ub?w>Ub?(c=n2(y,g,u,h,E,w,T),l=n2(d,p,f,_,E,w,T),j.moveTo(c.cx+c.x01,c.cy+c.y01),w<s?j.arc(c.cx,c.cy,w,zb(c.y01,c.x01),zb(l.y01,l.x01),!T):(j.arc(c.cx,c.cy,w,zb(c.y01,c.x01),zb(c.y11,c.x11),!T),j.arc(0,0,E,zb(c.cy+c.y11,c.cx+c.x11),zb(l.cy+l.y11,l.cx+l.x11),!T),j.arc(l.cx,l.cy,w,zb(l.y11,l.x11),zb(l.y01,l.x01),!T))):(j.moveTo(u,h),j.arc(0,0,E,e,n,!T)):j.moveTo(u,h),k>Ub&&o>Ub?x>Ub?(c=n2(f,_,d,p,k,-x,T),l=n2(u,h,y,g,k,-x,T),j.lineTo(c.cx+c.x01,c.cy+c.y01),x<s?j.arc(c.cx,c.cy,x,zb(c.y01,c.x01),zb(l.y01,l.x01),!T):(j.arc(c.cx,c.cy,x,zb(c.y01,c.x01),zb(c.y11,c.x11),!T),j.arc(0,0,k,zb(c.cy+c.y11,c.cx+c.x11),zb(l.cy+l.y11,l.cx+l.x11),T),j.arc(l.cx,l.cy,x,zb(l.y11,l.x11),zb(l.y01,l.x01),!T))):j.arc(0,0,k,i,r,T):j.lineTo(f,_)):j.moveTo(0,0),j.closePath(),t)return j=null,t+""||null}return e.centroid=function(){var t=(+O.apply(this,arguments)+ +A.apply(this,arguments))/2,e=(+C.apply(this,arguments)+ +L.apply(this,arguments))/2-qb/2;return[Gb(e)*t,Vb(e)*t]},e.innerRadius=function(t){return arguments.length?(O="function"==typeof t?t:Bb(+t),e):O},e.outerRadius=function(t){return arguments.length?(A="function"==typeof t?t:Bb(+t),e):A},e.cornerRadius=function(t){return arguments.length?(P="function"==typeof t?t:Bb(+t),e):P},e.padRadius=function(t){return arguments.length?(N=null==t?null:"function"==typeof t?t:Bb(+t),e):N},e.startAngle=function(t){return arguments.length?(C="function"==typeof t?t:Bb(+t),e):C},e.endAngle=function(t){return arguments.length?(L="function"==typeof t?t:Bb(+t),e):L},e.padAngle=function(t){return arguments.length?(I="function"==typeof t?t:Bb(+t),e):I},e.context=function(t){return arguments.length?(j=null==t?null:t,e):j},e}function i2(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function o2(t){this._context=t}function a2(t){return new o2(t)}function s2(t){return t[0]}function c2(t){return t[1]}function l2(a,s){var c=Bb(!0),l=null,u=a2,h=null;function e(t){var e,n,r,i=(t=i2(t)).length,o=!1;for(null==l&&(h=u(r=Db())),e=0;e<=i;++e)!(e<i&&c(n=t[e],e,t))===o&&((o=!o)?h.lineStart():h.lineEnd()),o&&h.point(+a(n,e,t),+s(n,e,t));if(r)return h=null,r+""||null}return a="function"==typeof a?a:void 0===a?s2:Bb(a),s="function"==typeof s?s:void 0===s?c2:Bb(s),e.x=function(t){return arguments.length?(a="function"==typeof t?t:Bb(+t),e):a},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Bb(+t),e):s},e.defined=function(t){return arguments.length?(c="function"==typeof t?t:Bb(!!t),e):c},e.curve=function(t){return arguments.length?(u=t,null!=l&&(h=u(l)),e):u},e.context=function(t){return arguments.length?(null==t?l=h=null:h=u(l=t),e):l},e}function u2(u,h,f){var d=null,p=Bb(!0),y=null,g=a2,v=null;function e(t){var e,n,r,i,o,a=(t=i2(t)).length,s=!1,c=new Array(a),l=new Array(a);for(null==y&&(v=g(o=Db())),e=0;e<=a;++e){if(!(e<a&&p(i=t[e],e,t))===s)if(s=!s)n=e,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),r=e-1;n<=r;--r)v.point(c[r],l[r]);v.lineEnd(),v.areaEnd()}s&&(c[e]=+u(i,e,t),l[e]=+h(i,e,t),v.point(d?+d(i,e,t):c[e],f?+f(i,e,t):l[e]))}if(o)return v=null,o+""||null}function t(){return l2().defined(p).curve(g).context(y)}return u="function"==typeof u?u:void 0===u?s2:Bb(+u),h="function"==typeof h?h:Bb(void 0===h?0:+h),f="function"==typeof f?f:void 0===f?c2:Bb(+f),e.x=function(t){return arguments.length?(u="function"==typeof t?t:Bb(+t),d=null,e):u},e.x0=function(t){return arguments.length?(u="function"==typeof t?t:Bb(+t),e):u},e.x1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:Bb(+t),e):d},e.y=function(t){return arguments.length?(h="function"==typeof t?t:Bb(+t),f=null,e):h},e.y0=function(t){return arguments.length?(h="function"==typeof t?t:Bb(+t),e):h},e.y1=function(t){return arguments.length?(f=null==t?null:"function"==typeof t?t:Bb(+t),e):f},e.lineX0=e.lineY0=function(){return t().x(u).y(h)},e.lineY1=function(){return t().x(u).y(f)},e.lineX1=function(){return t().x(d).y(h)},e.defined=function(t){return arguments.length?(p="function"==typeof t?t:Bb(!!t),e):p},e.curve=function(t){return arguments.length?(g=t,null!=y&&(v=g(y)),e):g},e.context=function(t){return arguments.length?(null==t?y=v=null:v=g(y=t),e):y},e}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var h2=d2(a2);function f2(t){this._curve=t}function d2(e){function t(t){return new f2(e(t))}return t._curve=e,t}function p2(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(d2(t)):e()._curve},t}function y2(){}function g2(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function v2(t,e){this._context=t,this._k=(1-e)/6}function m2(t,e){this._context=t,this._k=(1-e)/6}function b2(t,e,n){var r,i,o=t._x1,a=t._y1,s=t._x2,c=t._y2;t._l01_a>Ub&&(r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),o=(o*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,a=(a*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>Ub&&(r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,i=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*r+t._x1*t._l23_2a-e*t._l12_2a)/i,c=(c*r+t._y1*t._l23_2a-n*t._l12_2a)/i),t._context.bezierCurveTo(o,a,s,c,t._x2,t._y2)}function x2(t,e){this._context=t,this._alpha=e}f2.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}},v2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:g2(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:g2(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function e(n){function t(t){return new v2(t,n)}return t.tension=function(t){return e(+t)},t}(0),m2.prototype={areaStart:y2,areaEnd:y2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:g2(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function e(n){function t(t){return new m2(t,n)}return t.tension=function(t){return e(+t)},t}(0),x2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:b2(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var w2=function e(n){function t(t){return n?new x2(t,n):new v2(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function k2(t,e){this._context=t,this._alpha=e}k2.prototype={areaStart:y2,areaEnd:y2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:b2(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var E2=function e(n){function t(t){return n?new k2(t,n):new m2(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function _2(t){this._context=t}function M2(t){return new _2(t)}function S2(t,e){this._context=t,this._t=e}function T2(t){return new S2(t,.5)}function O2(t){return new S2(t,0)}function A2(t){return new S2(t,1)}function P2(t){return t}function N2(t){return t.reduce((n,r)=>e=>go(this,void 0,void 0,function*(){var t=yield n(e);return r(t)}),P2)}function C2(t=""){throw new Error(t)}function L2(t,e){var n,r,e=e["attributes"],i=new Set(["id","className"]);for([n,r]of Object.entries(e))i.has(n)||t.attr(n,r)}function I2(t){return null!=t&&!Number.isNaN(t)}function j2(t,n){return Object.fromEntries(Object.entries(t).filter(([t])=>t.startsWith(n)).map(([t,e])=>[Ng(t.replace(n,"").trim()),e]).filter(([t])=>void 0!==t))}function C(t){return new R2([t],null,t,t.ownerDocument)}_2.prototype={areaStart:y2,areaEnd:y2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},S2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};class R2{constructor(t=null,e=null,n=null,r=null,i=[null,null,null,null,null],o=[],a=[]){this._elements=Array.from(t),this._data=e,this._parent=n,this._document=r,this._enter=i[0],this._update=i[1],this._exit=i[2],this._merge=i[3],this._split=i[4],this._transitions=o,this._facetElements=a}selectAll(t){t="string"==typeof t?this._parent.querySelectorAll(t):t;return new R2(t,null,this._elements[0],this._document)}selectFacetAll(t){t="string"==typeof t?this._parent.querySelectorAll(t):t;return new R2(this._elements,null,this._parent,this._document,void 0,void 0,t)}select(t){t="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new R2([t],null,t,this._document)}append(t){var e="function"==typeof t?t:()=>this.createElement(t),n=[];if(null!==this._data){for(let t=0;t<this._data.length;t++){var r=this._data[t],[r,i]=Array.isArray(r)?r:[r,null],o=e(r,t);o.__data__=r,null!==i&&(o.__fromElements__=i),this._parent.appendChild(o),n.push(o)}return new R2(n,null,this._parent,this._document)}for(let t=0;t<this._elements.length;t++){var a=this._elements[t],s=e(a.__data__,t);a.appendChild(s),n.push(s)}return new R2(n,null,n[0],this._document)}maybeAppend(t,e){var n=this._elements[0],r=n.getElementById(t);return r||((r="string"==typeof e?this.createElement(e):e()).id=t,n.appendChild(r)),new R2([r],null,this._parent,this._document)}data(e,n=t=>t,r=()=>null){var i=[],o=[],a=new Set(this._elements),s=[],c=new Set,l=new Map(this._elements.map((t,e)=>[n(t.__data__,e),t])),u=new Map(this._facetElements.map((t,e)=>[n(t.__data__,e),t])),h=Pv(this._elements,t=>r(t.__data__));for(let t=0;t<e.length;t++){var f=e[t],d=n(f,t),p=r(f,t);if(l.has(d)){var y=l.get(d);y.__data__=f,y.__facet__=!1,o.push(y),a.delete(y),l.delete(d)}else if(u.has(d)){y=u.get(d);y.__data__=f,y.__facet__=!0,o.push(y),u.delete(d)}else if(h.has(d)){const Pv=h.get(d);s.push([f,Pv]);for(const g of Pv)a.delete(g);h.delete(d)}else l.has(p)?((d=l.get(p)).__toData__?d.__toData__.push(f):d.__toData__=[f],c.add(d),a.delete(d)):i.push(f)}var t=[new R2([],i,this._parent,this._document),new R2(o,null,this._parent,this._document),new R2(a,null,this._parent,this._document),new R2([],s,this._parent,this._document),new R2(c,null,this._parent,this._document)];return new R2(this._elements,null,this._parent,this._document,t)}merge(t){var e=[...this._elements,...t._elements],t=[...this._transitions,...t._transitions];return new R2(e,null,this._parent,this._document,void 0,t)}createElement(t){var e;return this._document?this._document.createElement(t,{}):(e=R2.registry[t])?new e:C2("Unknown node type: "+t)}join(t=t=>t,e=t=>t,n=t=>t.remove(),r=t=>t,i=t=>t.remove()){t=t(this._enter),e=e(this._update),n=n(this._exit),r=r(this._merge),i=i(this._split);return e.merge(t).merge(n).merge(r).merge(i)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._elements[t];var e=this._transitions[t];e?e.then(()=>n.remove()):n.remove()}return new R2([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let t=0;t<this._elements.length;t++){var n=this._elements[t],r=n.__data__;e.call(n,r,t)}return this}attr(n,r){const i="function"!=typeof r?()=>r:r;return this.each(function(t,e){void 0!==r&&(this[n]=i.call(this,t,e))})}style(n,r){const i="function"!=typeof r?()=>r:r;return this.each(function(t,e){void 0!==r&&(this.style[n]=i.call(this,t,e))})}transition(t){const n="function"!=typeof t?()=>t:t,r=this["_transitions"];return this.each(function(t,e){r[e]=n.call(this,t,e)})}on(t,e){return this.each(function(){this.addEventListener(t,e)}),this}call(t,...e){return t.call(this._parent,this,...e),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}function D2([t,e],[n,r]){return[t-n,e-r]}function B2([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function F2([t,e]){return Math.atan2(e,t)}function z2([t,e]){return F2([t,e])+Math.PI/2}function G2(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(var[o,a]of t)e=Math.min(o,e),n=Math.max(o,n),r=Math.min(a,r),i=Math.max(a,i);var t=n-e,s=i-r;return[e,r,t,s]}function W2(r,i){return Object.entries(r).reduce((t,[e,n])=>(t[e]=i(n,e,r),t),{})}function H2(t){return t.map((t,e)=>e)}function V2(t){return Array.from(new Set(t))}function A(t,e){for(var[n,r]of Object.entries(e))t.style(n,r)}function Y2(n,t){return t.forEach((t,e)=>0===e?n.moveTo(t[0],t[1]):n.lineTo(t[0],t[1])),n.closePath(),n}function U2(t,e,n){var n=Object.assign({size:8},n)["size"],n="string"==typeof n?+parseFloat(n)/100*B2(t,e):n,r=Math.PI/6,t=Math.atan2(e[1]-t[1],e[0]-t[0]),i=Math.PI/2-t-r,t=t-r;return[[e[0]-n*Math.sin(i),e[1]-n*Math.cos(i)],[e[0]-n*Math.cos(t),e[1]-n*Math.sin(t)]]}function q2(t,e,n,r,i){e=F2(D2(r,e))+Math.PI,n=F2(D2(r,n))+Math.PI;t.arc(r[0],r[1],i,e,n,n-e<0)}function X2(e,t,n,r="y"){const i="y"===r||!0===r?n:t;var n="y"===r||!0===r?90:0,t=H2(i),[r,o]=Sv(t,t=>i[t]);const a=new q1({domain:[r,o],range:[0,100]}),s=t=>a.map(i[t]);return`linear-gradient(${n}deg, ${t.sort((t,e)=>s(t)-s(e)).map(t=>`${e[t]} ${s(t)}%`).join(",")})`}function $2(t){var[t,e,n,r]=t;return[r,t,e,n]}function Z2(t,e,n){var[e,r,,i]=Uv(t)?$2(e):e,[n,o]=n,t=t.getCenter(),a=z2(D2(e,t)),r=z2(D2(r,t)),n=r===a&&n!==o?r+2*Math.PI:r;return{startAngle:a,endAngle:0<=n-a?n:2*Math.PI+n,innerRadius:B2(i,t),outerRadius:B2(e,t)}}function K2(t,e,n,r){var i=t["defaultColor"],t=t[e]||{};return t[n]||t[r]||{fill:i,stroke:i}}R2.registry={g:dh,rect:Th,circle:sh,path:wh,text:Ah,ellipse:hh,image:vh,line:bh,polygon:Eh,polyline:Mh,html:yh};const J2=t=>{const _=t["colorAttribute"],M=N(t,["colorAttribute"]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),i=_,o=r[i],a=N(r,["symbol"==typeof i?i:i+""]),r=a.lineWidth||1,{stroke:i,radius:s=0,radiusTopLeft:c=s,radiusTopRight:l=s,radiusBottomRight:u=s,radiusBottomLeft:h=s,inset:f=0,insetLeft:d=f,insetRight:p=f,insetBottom:y=f,insetTop:g=f,lineWidth:r="stroke"===_||i?r:0}=M,{color:o=o}=e;if(!qv(n)&&!Xv(n)){var[v,,m]=!!Uv(n)?$2(t):t;const[E,w]=v;var[m,v]=D2(m,v),b=(0<m?E:E+m)+d,x=(0<v?w:w+v)+g,m=Math.abs(m)-(d+p),d=Math.abs(v)-(g+y);return C(new Th({})).call(A,a).style("lineWidth",r).style("x",b).style("y",x).style("width",m).style("height",d).style("stroke",o).style("stroke",o||i).style(_,o).style("radius",[c,l,u,h]).call(A,M).node()}const{y:w,y1:k}=e;p=n.getCenter(),v=Z2(n,t,[w,k]),g=r2().cornerRadius(s).padAngle(f*Math.PI/180);return C(new wh({})).call(A,a).style("path",g(v)).style("transform",`translate(${p[0]}, ${p[1]})`).style("stroke",o||i).style("lineWidth",r).style(_,o).call(A,M).node()}},Q2=(J2.props={defaultEnterAnimation:"scaleInY"},t=>J2(Object.assign({colorAttribute:"fill"},t))),tx=(Q2.props=Object.assign({},J2.props),t=>J2(Object.assign({colorAttribute:"stroke"},t)));tx.props=Object.assign({},J2.props);const ex=t=>{const{adjustPoints:s=function(t,e,n){var[t,r,i,o]=t;if(Uv(n)){const a=[(e?e[0]:r)[0],r[1]],s=[(e?e[3]:i)[0],i[1]];return[t,a,s,o]}const a=[r[0],(e?e[0]:r)[1]],s=[i[0],(e?e[3]:i)[1]];return[t,a,s,o]}}=t,c=N(t,["adjustPoints"]);return(t,e,n,r,i,...o)=>{var a=e["index"],a=i[a+1],t=s(t,a,n);return J2(Object.assign({colorAttribute:"fill"},c))(t,e,n,r,i,...o)}};function nx(t,e,n){var[t,r,i,o]=t;if(Uv(n)){const a=[e?e[0][0]:(r[0]+i[0])/2,r[1]],s=[e?e[3][0]:(r[0]+i[0])/2,i[1]];return[t,a,s,o]}const a=[r[0],e?e[0][1]:(r[1]+i[1])/2],s=[i[0],e?e[3][1]:(r[1]+i[1])/2];return[t,a,s,o]}ex.props={defaultEnterAnimation:"fadeIn"};const rx=t=>ex(Object.assign({adjustPoints:nx},t));function ix(t){const e="function"==typeof t?t:t.render;return class extends lh{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}rx.props={defaultEnterAnimation:"fadeIn"};const ox=ix(t=>{var{d1:e,d2:n,style1:r,style2:i}=t.attributes;C(t).maybeAppend("line",()=>new wh({})).style("d",e).call(A,r),C(t).maybeAppend("line1",()=>new wh({})).style("d",n).call(A,i)});const ax=t=>{const{curve:u,gradient:h=!1,defined:f=t=>!Number.isNaN(t)&&null!=t,connectNulls:d=!1}=t,p=N(t,["curve","gradient","defined","connectNulls"]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),{stroke:i,lineWidth:o}=r,a=N(r,["stroke","lineWidth"]),{color:r=i,size:e=o,transform:i,seriesColor:o,seriesX:s,seriesY:c}=e,o=h&&o?X2(o,s,c,h):r,s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),o&&{stroke:o}),e&&{lineWidth:e}),i&&{transform:i}),p),c=qv(n)?[...t,t[0]]:t;const l=l2().x(t=>t[0]).y(t=>t[1]).defined(([t,e])=>f(t)&&f(e)).curve(u);var[r,a]=function(t,e){var n=[],r=[];let i=!1,o=null;for(const a of t)e(a[0])&&e(a[1])?(n.push(a),i&&(i=!1,r.push([o,a])),o=a):i=!0;return[n,r]}(c,f),o=j2(p,"connect"),e=!!a.length;return(!e||d&&!Object.keys(o).length?C(new wh({})).style("d",l(r)).call(A,s):e&&!d?C(new wh({})).style("d",l(c)).call(A,s):C(new ox).style("style1",Object.assign(Object.assign({},s),o)).style("style2",s).style("d1",a.map(l).join(",")).style("d2",l(c))).node()}},sx=(ax.props={defaultEnterAnimation:"fadeIn"},t=>ax(Object.assign({curve:a2},t))),cx=(sx.props=Object.assign({},ax.props),t=>{var{alpha:e=.5}=t,t=N(t,["alpha"]);return ax(Object.assign({curve:w2.alpha(e)},t))}),lx=(cx.props=Object.assign({},ax.props),t=>ax(Object.assign({curve:A2},t))),ux=(lx.props=Object.assign({},ax.props),t=>ax(Object.assign({curve:O2},t))),hx=(ux.props=Object.assign({},ax.props),t=>ax(Object.assign({curve:T2},t)));function fx(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]}hx.props=Object.assign({},ax.props);var dx=Object.freeze({__proto__:null,point:fx,square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){var r=.618*n;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},line:function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}});const px=t=>{const{colorAttribute:h,symbol:e,mode:f="auto"}=t,d=N(t,["colorAttribute","symbol","mode"]),p=dx[e]||fx;return(t,e,n,r)=>{var i,{mark:o,shape:a,defaultShape:s}=e,r=K2(r,o,a,s),o=h,a=r[o],s=r["lineWidth"],r=N(r,["symbol"==typeof o?o:o+"","lineWidth"]),o=d.stroke?s||1:s,{color:s=a,transform:a}=e,[c,l]=1===(c=t).length?c[0]:([[c,u],[l,i]]=c,[(c+l)/2,(u+i)/2]),u=function(t,e,n,r){var i;if(1!==e.length)return n=n["size"],"fixed"!==t&&("normal"===t||r.getOptions().transformations.some(([t])=>"fisheye"===t))?([[t,r],[e,i]]=e,e=Math.abs((e-t)/2),t=Math.abs((i-r)/2),Math.max(0,(e+t)/2)):n}(f,t,e,n)||d.r||r.r;return C(new wh).call(A,r).style("d",p(c,l,u)).style("lineWidth",o).style("stroke",s).style("transform",a).style(h,s).call(A,d).node()}},yx=(px.props={defaultEnterAnimation:"fadeIn"},t=>px(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t))),gx=(yx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"cross"},t))),vx=(gx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"diamond"},t))),mx=(vx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t))),bx=(mx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t))),xx=(bx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t))),wx=(xx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t))),kx=(wx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"point"},t))),Ex=(kx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"square"},t))),_x=(Ex.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t))),Mx=(_x.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t))),Sx=(Mx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t))),Tx=(Sx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"line"},t))),Ox=(Tx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"plus"},t))),Ax=(Ox.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"point"},t))),Px=(Ax.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"square"},t))),Nx=(Px.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"stroke",symbol:"tick"},t))),Cx=(Nx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"triangle"},t))),Lx=(Cx.props=Object.assign({},px.props),t=>px(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t))),Ix=(Lx.props=Object.assign({},px.props),t=>{const h=t["arrow"],f=N(t,["arrow"]);return(t,e,n,r)=>{var{mark:e,shape:i,defaultShape:o,color:a,transform:s}=e,r=K2(r,e,i,o),{fill:e,stroke:i}=r,o=N(r,["fill","stroke"]),[r,t]=t,[c,l]=U2(r,t,h),u=Db();return u.moveTo(...r),u.lineTo(...t),u.moveTo(...t),u.lineTo(...c),u.moveTo(...t),u.lineTo(...l),C(new wh).call(A,o).style("d",u.toString()).style("stroke",a||i).style("fill",a||e).style("transform",s).call(A,f).node()}});Ix.props={defaultEnterAnimation:"fadeIn"};yo(Dx,jx=lh),Dx.prototype.connectedCallback=function(){var t=this.style,e=t.x,t=t.y;this.setLocalPosition([Number(e)||0,Number(t)||0]),this.update(),this.bindEvents(this.attributes,this)},Dx.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),null!=(t=this.render)&&t.call(this,this.attributes,this)},Dx.prototype.clear=function(){this.removeChildren()},Dx.prototype.destroy=function(){this.removeAllEventListeners(),this.removeChildren(),this.remove()},Dx.prototype.bindEvents=function(t,e){};var jx,Rx,r=Dx;function Dx(t){return jx.call(this,t)||this}function Bx(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Bx)}function Fx(){this.constructor=Rx}Rx=Bx,o=Error,Fx.prototype=o.prototype,Rx.prototype=new Fx,Bx.buildMessage=function(t,e){var o={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){for(var e="",n=0;n<t.parts.length;n++)e+=t.parts[n]instanceof Array?i(t.parts[n][0])+"-"+i(t.parts[n][1]):i(t.parts[n]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){for(var e,n,r=new Array(t.length),i=0;i<t.length;i++)r[i]=(n=t[i],o[n.type](n));if(r.sort(),0<r.length){for(e=i=1;i<r.length;i++)r[i-1]!==r[i]&&(r[e]=r[i],e++);r.length=e}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+((t=e)?'"'+r(t)+'"':"end of input")+" found."};var zx;function Gx(t,e,n,r){var i,o,a=Wx(r=void 0===r?"...":r,n),s=xg(t)?t:Pg(t),c=e,l=[];if(Wx(t,n)<=e)return t;for(;;){if(i=s.substr(0,16),c<(o=Wx(i,n))+a)break;if(l.push(i),c-=o,!(s=s.substr(16)))return l.join("")}for(;;){if(i=s.substr(0,1),c<(o=Wx(i,n))+a)break;if(l.push(i),c-=o,!(s=s.substr(1)))return l.join("")}return"".concat(l.join("")).concat(r)}var Wx=Bg(function(t,e){var n=(e=void 0===e?{}:e).fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,e=e.fontVariant;return(zx=zx||document.createElement("canvas").getContext("2d")).font=[o,e,i,"".concat(n,"px"),r].join(" "),zx.measureText(xg(t)?t:"").width},function(t,e){return vo([t],D(Ag(e=void 0===e?{}:e)),!1).join("")});function Hx(t,e){return"string"==typeof t?Wx(t,e):t}var Vx=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,t=t.style.fontSize;return{fontSize:"object"==typeof t?t.value:t,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function Yx(t,e){return"capitalize"===e?t.toLowerCase().replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()}):"lowercase"===e?t.toLowerCase():"uppercase"===e?t.toUpperCase():t}function Ux(t,e){e=Math.pow(10,e);return~~(t*e)/e}function qx(t){return t.toLocaleString()}function Xx(t,e){return void 0===e&&(e=0),Math.abs(t)<1e3?String(t):"".concat(Ux(t/1e3,e).toLocaleString(),"K")}var $x=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},Zx=function(t,e,n){return 0<t&&Number.isFinite(t)?e:n},Kx=function(t,e){return t*e},Jx=Math.PI/180;function Qx(t){if(_g(t))return[t,t,t,t];if(dg(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}var tw=["default","active","selected","disabled","inactive"],ew={fontSize:"16px",fontFamily:"sans-serif",fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",textAlign:"start",textBaseline:"alphabetic"};function nw(t){var e;return t?null==t?void 0:t.default:(e=Fg(t)||{},tw.forEach(function(t){t in e&&delete e[t]}),e)}function rw(t,e,n){return void 0===n&&(n=!1),e?(e=Gg(t,e),n?P({},nw(t),e):e):nw(t)||{}}function iw(t){var e=t.canvas,n=t.touches,r=t.offsetX,t=t.offsetY;return e?[e.x,e.y]:n?[(e=n[0]).clientX,e.clientY]:r&&t?[r,t]:[0,0]}aw.prototype.selectAll=function(t){return new aw("string"==typeof t?this.__parent__.querySelectorAll(t):t,null,this.__elements__[0],this.__document__)},aw.prototype.select=function(t){t="string"==typeof t?this.__parent__.querySelectorAll(t)[0]||null:t;return new aw([t],null,t,this.__document__)},aw.prototype.append=function(n){var r=this,t="function"==typeof n?n:function(){return t=n,r.__document__?r.__document__.createElement(t,{}):(e=aw.registry[t])?new e:new Error("Unknown node type: ".concat(t));var t,e},e=[];if(null!==this.__data__){for(var i=0;i<this.__data__.length;i++)(s=t(o=this.__data__[i],i)).__data__=o,this.__parent__.appendChild(s),e.push(s);return new aw(e,null,this.__parent__,this.__document__)}for(i=0;i<this.__elements__.length;i++){var o,a=this.__elements__[i],s=t(o=a.__data__,i);a.appendChild(s),e.push(s)}return new aw(e,null,e[0],this.__document__)},aw.prototype.data=function(t,n){void 0===n&&(n=function(t){return t});for(var e=[],r=[],i=new Map(this.__elements__.map(function(t,e){return[n(t.__data__,e),t]})),o=0;o<t.length;o++){var a,s=t[o],c=n(s,o);i.has(c)?((a=i.get(c)).__data__=s,r.push(a),i.delete(c)):e.push(s)}var l=Array.from(i.values()),l=[new aw([],e,this.__parent__,this.__document__),new aw(r,null,this.__parent__,this.__document__),new aw(l,null,this.__parent__,this.__document__)];return new aw(this.__elements__,null,this.__parent__,this.__document__,l)},aw.prototype.merge=function(t){return new aw(vo(vo([],D(this.__elements__),!1),D(t.__elements__),!1),null,this.__parent__,this.__document__)},aw.prototype.join=function(t,e,n){void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()});t=(t=void 0===t?function(t){return t}:t)(this.__enter__),e=e(this.__update__),n=n(this.__exit__);return e.merge(t).merge(n)},aw.prototype.remove=function(){var n=vo([],D(this.__elements__),!1);return this.__elements__.forEach(function(t){var e;t.parentNode&&(t.parentNode.removeChild(t),e=n.indexOf(t),n.splice(e,1),null!=(e=t.parentNode)&&e.removeChild(t),t.remove())}),new aw(n,null,this.__parent__,this.__document__)},aw.prototype.each=function(t){for(var e=0;e<this.__elements__.length;e++){var n,r=this.__elements__[e];r&&(n=r.__data__,t.call(r,n,e))}return this},aw.prototype.attr=function(n,r){var i="function"!=typeof r?function(){return r}:r;return this.each(function(t,e){void 0!==r&&(this[n]=i.call(this,t,e))}),this},aw.prototype.style=function(n,r){var i="function"!=typeof r?function(){return r}:r;return this.each(function(t,e){void 0!==r&&(this.style[n]=i.call(this,t,e))}),this},aw.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)}),this},aw.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,vo([this.__parent__,this],D(e),!1)),this},aw.prototype.node=function(){return this.__elements__[0]},aw.prototype.nodes=function(){return this.__elements__},aw.registry={g:dh,rect:Th,circle:sh,path:wh,text:Ah,ellipse:hh,image:vh,line:bh,polygon:Eh,polyline:Mh,html:yh};var ow=aw;function aw(t,e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=[null,null,null]),this.__elements__=t=void 0===t?null:t,this.__data__=e,this.__parent__=n,this.__document__=r,this.__enter__=i[0],this.__update__=i[1],this.__exit__=i[2]}function sw(t){return new ow([t],null,t,t.ownerDocument)}function L(t,e){var n,r;if(e)try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=D(o.value,2),s=a[0],c=a[1];t.style(s,c)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function B(t,e,n){return t.querySelector(e)?sw(t).select(e):sw(t).append(n)}function cw(t){var e,t=t&&t.getRenderBounds();return t?(e=t.getMax(),t=t.getMin(),{width:e[0]-t[0],height:e[1]-t[1]}):{width:0,height:0}}function lw(t){var t=t.getLocalBounds(),t=D([t.min,t.max],2),e=D(t[0],2),n=e[0],e=e[1],t=D(t[1],2),r=t[0],t=t[1];return{x:n,y:e,width:r-n,height:t-e,left:n,bottom:t,top:e,right:r}}function uw(t){var e,n;return"string"==typeof t?(e=t,(n=document.createElement("div")).innerHTML=e,n.firstChild):t}var hw=["year","month","day","hour","minute","second"],fw=["YYYY","MM","DD","hh","mm","ss"];function dw(t){return t instanceof Date?t:new Date(t)}function pw(t){for(var e,t=D(t,2),n=t[0],t=t[1],n=hw.indexOf(n),r=hw.indexOf(t),i="",o=n;o<=r;o+=1)i+=fw[o],o<r&&(e="-",2===o?e=" ":2<o&&(e=":"),i+=e);return i}function yw(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach(function(t){var e=n[t];r=r.replace(t,"YYYY"===t?"".concat(e):"0".concat(e).slice(-2))}),r}function gw(t,e){t=new Date(t);return{year:function(t){t.setMonth(0),t.setHours(0,0,0,0)},month:function(t){t.setDate(1),t.setHours(0,0,0,0)},day:function(t){return t.setHours(0,0,0,0)},hour:function(t){return t.setMinutes(0,0,0)},minute:function(t){return t.setSeconds(0,0)},second:function(t){return t.setMilliseconds(0)}}[e](t),yw(t,pw(["year",e]))}function vw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)mw(t,e[r]);return t}var mw=function(r,i,o,a){void 0===o&&(o=0),void 0===a&&(a=5),Object.entries(i).forEach(function(t){var t=D(t,2),e=t[0],t=t[1],n=r;Object.prototype.hasOwnProperty.call(i,e)&&(t?bg(t)?(bg(r[e])||(n[e]={}),o<a?mw(r[e],t,o+1,a):n[e]=i[e]):dg(t)?(n[e]=[],n[e]=n[e].concat(t)):n[e]=t:n[e]=t)})};function bw(t,e,n,r,i,o){return(t===e||Math.min(t,e)<=i&&i<=Math.max(t,e))&&(n===r||Math.min(n,r)<=o&&o<=Math.max(n,r))}function xw(t,e,n){var r=t;(!t.length||e<t[0]||e===t[0]&&n<t[1])&&(r[0]=e,r[1]=n)}function ww(t,e){var t=D(t,2),n=t[0],t=t[1],e=D(e,2),r=e[0],e=e[1];return Math.pow(Math.pow(n-r,2)+Math.pow(t-e,2),.5)}function kw(o){return void 0===o&&(o=0),function(t,e,n){var r,i=n.value;"function"==typeof i&&(n.value=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(t=this,r=window.setTimeout(function(){i.apply(t,e),r=null},o))})}}var Ew=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)};function _w(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]}t=_w;function Mw(t,e,n){return[["M",t,e+n],["L",t,e-n]]}function Sw(t,e,n){return[["M",t-n,e],["L",t+n,e]]}pt=Sw;function Tw(t){n="default",pg(e=t)&&e instanceof Image?n="image":hg(e)?n="symbol":xg(e)&&(r=new RegExp("data:(image|text)"),n=e.match(r)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?"url":"symbol");var e,n,r=n;return["base64","url","image"].includes(r)?"image":t&&"symbol"===r?"path":null}yo(Pw,Ow=r),Pw.prototype.render=function(t,e){t.x,t.y;var r=t.symbol,n=t.size,i=void 0===n?16:n,o=N(t,["x","y","symbol","size"]),a=Tw(r);a?B(e,".".concat(a,"-marker"),a).attr("className","marker ".concat(a,"-marker")).call(function(t){var e,n;"image"===a?(e=2*i,t.style("img",r).style("width",e).style("height",e).style("x",-i).style("y",-i)):(e=i/2,n=hg(r)?r:Pw.getSymbol(r),t.style("path",null==n?void 0:n(0,0,e)).call(L,o))}):(null!=(n=this.querySelector(".marker"))&&n.remove(),this.removeChildren())},Pw.MARKER_SYMBOL_MAP=new Map,Pw.registerSymbol=function(t,e){Pw.MARKER_SYMBOL_MAP.set(t,e)},Pw.getSymbol=function(t){return Pw.MARKER_SYMBOL_MAP.get(t)};var Ow,Aw=Pw;function Pw(){return null!==Ow&&Ow.apply(this,arguments)||this}Aw.registerSymbol("cross",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]}),Aw.registerSymbol("hyphen",function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}),Aw.registerSymbol("line",Mw),Aw.registerSymbol("plus",function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]}),Aw.registerSymbol("tick",function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]}),Aw.registerSymbol("circle",_w),Aw.registerSymbol("point",t),Aw.registerSymbol("bowtie",function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]}),Aw.registerSymbol("hexagon",function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]}),Aw.registerSymbol("square",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]}),Aw.registerSymbol("diamond",function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]}),Aw.registerSymbol("triangle",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]}),Aw.registerSymbol("triangle-down",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}),Aw.registerSymbol("line",Mw),Aw.registerSymbol("dot",Sw),Aw.registerSymbol("dash",pt),Aw.registerSymbol("smooth",function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]}),Aw.registerSymbol("hv",function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]}),Aw.registerSymbol("vh",function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]}),Aw.registerSymbol("hvh",function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]}),Aw.registerSymbol("vhv",function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]});yo(Lw,Nw=r),Lw.prototype.render=function(t,e){var n,r,i=t.padding,o=t.marker,a=t.text,s=t.textStyle,c=t.radius,l=t.backgroundStyle,u=t.spacing,h=t.align,t=t.verticalAlign,i=D(Qx(i),4),f=i[0],d=i[1],p=i[2],i=i[3],y=B(e,".tag-content","g").attr("className","tag-content").node(),g=B(y,".tag-marker",function(){return new Aw({})}).attr("className","tag-marker").call(function(t){t.node().clear(),t.node().update(o||{symbol:"triangle",size:0,x:0})}).node(),u=(u=u,{x:(v=(g=g).getLocalBounds()).halfExtents[0]?v.max[0]+(u||0):g.style.x,y:v.halfExtents[1]?(v.min[1]+v.max[1])/2:g.style.y}),v=u.x,g=u.y,g=(B(y,".tag-text","text").attr("className","tag-text").style("fontFamily","sans-serif").style("fontSize",12).style("x",v).style("y",g).style("text",fg(a)?"":"".concat(a)).call(L,s).style("textBaseline","middle").call(function(t){a||t.remove()}),u=i,v=f,g=h||"start",s=t||"top",t=(h=y).getLocalBounds(),r=n=0,"start"===g&&(n=u),"center"===g&&(n=-t.halfExtents[0]),"end"===g&&(n=-u-2*t.halfExtents[0]),"top"===s&&(r=v+t.halfExtents[1]),"middle"===s&&(r=0),"bottom"===s&&(r=v-2*t.halfExtents[1]),h.setLocalPosition([n,r]),y.getLocalBounds());B(e,".tag-background","rect").attr("className","tag-background").style("zIndex",(y.style.zIndex||0)-1).style("x",g.min[0]-i).style("y",g.min[1]-f).style("width",null!==l?i+d+2*g.halfExtents[0]:0).style("height",null!==l?f+p+2*g.halfExtents[1]:0).style("radius",null!=c?c:2).style("fill","#fafafa").style("stroke","#d9d9d9").style("lineWidth",1).call(L,l)},Lw.defaultOptions={type:Lw.tag="tag",style:{padding:4,spacing:4}};var Nw,Cw=Lw;function Lw(t){return Nw.call(this,P({},Lw.defaultOptions,t))||this}var Iw,jw,Rw={small:{textStyle:{fontSize:10},buttonStyle:{width:40,height:20},markerStyle:{size:8}},middle:{textStyle:{fontSize:12},buttonStyle:{width:60,height:30},markerStyle:{size:12}},large:{textStyle:{fontSize:16},buttonStyle:{width:80,height:40},markerStyle:{size:16}}},Dw={primary:{textStyle:{default:{fill:"#fff"},active:{}},buttonStyle:{default:{fill:"#1890ff",lineWidth:0},active:{fill:"#40a9ff"}},markerStyle:{default:{fill:"#1890ff"},active:{fill:"#40a9ff"}}},dashed:{textStyle:{default:{},active:{}},buttonStyle:{default:{fill:"transparent",stroke:"#bbb",lineDash:[5,5]},active:{}},markerStyle:{}},link:{textStyle:{default:{fill:"#1890ff"},active:{}},buttonStyle:{default:{fill:"transparent",lineWidth:0},active:{}},markerStyle:{default:{fill:"#1890ff"}}},text:{textStyle:{default:{fill:"#000"},active:{}},buttonStyle:{default:{fill:"transparent",lineWidth:0},active:{}},markerStyle:{default:{stroke:"#000"}}},default:{textStyle:{default:{fill:"#000"},active:{fill:"#1890ff"}},buttonStyle:{default:{fill:"transparent",stroke:"#bbb"},active:{stroke:"#1890ff"}},markerStyle:{default:{stroke:"#bbb",lineWidth:1},active:{stroke:"#1890ff"}}}},Bw={strict:{textStyle:{fill:"#b8b8b8"},buttonStyle:{},markerStyle:{}},textStyle:{},buttonStyle:{stroke:"#d9d9d9",fill:"#f5f5f5"},markerStyle:{stroke:"#d9d9d9"}},Fw=(yo(zw,Iw=r),Object.defineProperty(zw.prototype,"markerSize",{get:function(){var t=this.attributes.marker,e=this.getStyle("markerStyle");return t?(null==e?void 0:e.size)||2:0},enumerable:!1,configurable:!0}),Object.defineProperty(zw.prototype,"text",{get:function(){var t,e=this.attributes.text;return""===e?e:(t=this.textAvailableWidth,Gx(e,t))},enumerable:!1,configurable:!0}),Object.defineProperty(zw.prototype,"textAvailableWidth",{get:function(){var t=this.attributes,e=t.marker,n=t.padding,r=t.ellipsis,i=t.width,t=t.markerSpacing;return r?(r=Lg(i)?this.getStyle("buttonStyle").width:i,e?r-2*n-t-this.markerSize:r-2*n):1/0},enumerable:!1,configurable:!0}),Object.defineProperty(zw.prototype,"buttonHeight",{get:function(){var t=this.attributes.height;return t||this.getStyle("buttonStyle").height},enumerable:!1,configurable:!0}),zw.prototype.getStyle=function(e){var t=this.attributes,n=t.size,t=t.type,r=this.state,i=P({},Gg(Rw,[n,e]),rw(Gg(Dw,[t,e]),r),rw(Gg(this.attributes,e),r,!0));return"disabled"===r&&(Object.keys(i).forEach(function(t){t in Bw[e]&&(i[t]=Gg(Bw,[e,t]))}),Object.keys(Bw.strict[e]).forEach(function(t){i[t]=Gg(Bw,["strict",e,t])}),P(i,rw(Gg(this.attributes,e),"disabled"))),i},zw.prototype.render=function(t,e){var n=t.padding,r=t.marker,t=t.markerSpacing,t=void 0===t?0:t,n=(e.attr("cursor","disabled"===this.state?"not-allowed":"pointer"),D(Qx(n),4)),i=(n[0],n[1]),o=(n[2],n[3]),a=this.buttonHeight,s=this.getStyle("markerStyle"),c=this.markerSize,n=B(e,".marker",function(){return new Aw({className:"marker",style:{symbol:"circle"}})}).call(function(t){t.node().update(M(M({},s),{symbol:r,x:o+c/2,y:a/2,size:c}))}).node().getLocalBounds(),l=this.text,l=void 0===l?"":l,u=this.getStyle("textStyle"),n=(this.textShape=B(e,".text","text").attr("className","text").style("x",c?n.max[0]+t:o).style("y",a/2).style("text",l).style("textAlign","left").style("textBaseline","middle").call(L,u).node(),this.textShape.getLocalBounds()),l=this.getStyle("buttonStyle");B(e,".background","rect").attr("className","background").style("zIndex",-1).call(L,l).style("height",a).style("width",o+(c?c+t:0)+2*n.halfExtents[0]+i).node()},zw.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t));t=this.attributes.state;this.state=void 0===t?"default":t,this.render(this.attributes,this)},zw.prototype.setState=function(t){this.update({state:t})},zw.prototype.hide=function(){this.style.visibility="hidden"},zw.prototype.show=function(){this.style.visibility="visible"},zw.prototype.bindEvents=function(){this.addEventListener("click",this.clickEvents),this.addEventListener("mouseenter",this.mouseenterEvent),this.addEventListener("mouseleave",this.mouseleaveEvent)},zw.defaultOptions={type:zw.tag="button",style:{cursor:"pointer",padding:10,size:"middle",type:"default",text:"",markerAlign:"left",markerSpacing:5,textStyle:{default:{},active:{}},buttonStyle:{default:{lineWidth:1,radius:5},active:{}},markerStyle:{default:{}}}},zw);function zw(t){var n=Iw.call(this,vw({},zw.defaultOptions,t))||this;return n.state="default",n.clickEvents=function(){var t=n.attributes,e=t.onClick;"disabled"!==t.state&&null!=e&&e.call(n,n)},n.mouseenterEvent=function(){"disabled"!==n.attributes.state&&(n.state="active",n.render(n.attributes,n))},n.mouseleaveEvent=function(){var t=n.attributes.state;n.state=void 0===t?"default":t,n.render(n.attributes,n)},n}function Gw(t){return jw.call(this,P({},Gw.defaultOptions,t))||this}yo(Gw,jw=r),Gw.prototype.render=function(t,e){for(var n=t.x,r=t.y,s=t.items,c=t.textStyle,i=t.padding,l=t.width,u=t.separator,t=D(Qx(i),3),i=t[0],h=t[1],t=t[2],f=B(e,".container","g").attr("className","container").style("x",n+t).style("y",r+i),d=0,p=0,y=(f.node().removeChildren(),this),o=0;o<s.length;o++)!function(t){var e,n=s[t],r=new Cw({className:"breadcrumb-item",style:M(M({x:d,y:p,text:fg(n.text)?n.id:n.text,textStyle:c},Wg(n,["marker"])),{padding:0,backgroundStyle:null})}),i=(f.append(function(){return r}),r.getLocalBounds()),o=2*i.halfExtents[0],i=2*i.halfExtents[1],o=(d+=o,fg(l)||l-h<d&&(r.attr({x:0,y:p+i}),d=o,p+=i),y.bindInnerEvents(r,n),u||{}),n=o.spacing,n=void 0===n?0:n,a=o.text,a=void 0===a?"/":a,o=o.style;t!==s.length-1&&(e=new Ah({className:"".concat(Gw.tag,"-separator"),id:"".concat(Gw.tag,"-separator-").concat(t),style:M(M(M(M({},ew),{x:d+n,y:p+i/2}),o),{text:a,textAlign:"end",textBaseline:"middle"})}),f.append(function(){return e}),t=e.getLocalBounds(),d+=2*t.halfExtents[0]+n)}(o)},Gw.prototype.update=function(t){this.attr(P({},this.attributes,t)),this.render(this.attributes,this)},Gw.prototype.bindInnerEvents=function(t,e){var n=this.attributes,r=n.items,i=n.onClick;i&&t.addEventListener("click",function(){i.call(t,e.id,e,r)})},Gw.defaultOptions={type:Gw.tag="breadcrumb",style:{separator:{text:"/",style:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},spacing:8},textStyle:{default:M(M({},ew),{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"}),active:{fill:"#5468ff",cursor:"pointer"}},padding:[8,8,8,8]}};yo(Vw,Ww=O),Vw.prototype.render=function(){var t=this.attributes,e=t.lines,t=t.areas;e&&this.createLines(e),t&&this.createAreas(t)},Vw.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},Vw.prototype.update=function(t){var e=t.lines,t=t.areas;this.clear(),e&&this.setAttribute("lines",e),t&&this.setAttribute("areas",t),this.render()},Vw.prototype.createLines=function(t){var e=this;t.forEach(function(t){e.linesGroup.appendChild(new wh({name:"line",style:t}))})},Vw.prototype.createAreas=function(t){var e=this;t.forEach(function(t){e.areasGroup.appendChild(new wh({name:"area",style:t}))})};var Ww,Hw=Vw;function Vw(t){var e=this,n=t.style,t=N(t,["style"]);return(e=Ww.call(this,P({},{type:"lines",style:{width:0,height:0}},M({style:n},t)))||this).linesGroup=new dh({name:"lines"}),e.appendChild(e.linesGroup),e.areasGroup=new dh({name:"areas"}),e.appendChild(e.areasGroup),e.render(),e}yo(qw,Yw=O),qw.prototype.render=function(){var e=this;this.attributes.columns.forEach(function(t){t.forEach(function(t){e.columnsGroup.appendChild(new Th({name:"column",style:t}))})})},qw.prototype.update=function(t){this.attr(P({},this.attributes,t)),t.columns&&(this.clear(),this.render())},qw.prototype.clear=function(){this.removeChildren()};var Yw,Uw=qw;function qw(t){var e=this,n=t.style,t=N(t,["style"]);return(e=Yw.call(this,P({},{type:"column",style:{width:0,height:0}},M({style:n},t)))||this).columnsGroup=new dh({name:"columns"}),e.appendChild(e.columnsGroup),e.render(),e}function Xw(t){return 0===t.length?[0,0]:[mg(Og(t,function(t){return mg(t)||0})),vg(Tg(t,function(t){return vg(t)||0}))]}function $w(t){for(var e=Fg(t),n=e[0].length,t=D([Array(n).fill(0),Array(n).fill(0)],2),r=t[0],i=t[1],o=0;o<e.length;o+=1)for(var a=e[o],s=0;s<n;s+=1)0<=a[s]?(a[s]+=r[s],r[s]=a[s]):(a[s]+=i[s],i[s]=a[s]);return e}function Zw(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);for(var e=!!(e=void 0===e?!1:e),r=[],i=0,o=t.length;i<o;i+=2)r.push([t[i],t[i+1]]);for(var a,s,c,l=function(t,e,n,r){var i,o=[],a=!!r;if(a){l=r[0],u=r[1];for(var s=0,c=t.length;s<c;s+=1)var l=ao([0,0],l,x=t[s]),u=so([0,0],u,x)}for(var s=0,h=t.length;s<h;s+=1){var f,d,p,y,g,v,m,b,x=t[s];0!==s||n?s!==h-1||n?(f=t[[s?s-1:h-1,s-1][n?0:1]],d=t[n?(s+1)%h:s+1],v=co(v=ho([0,0],d,f),v,e),0!==(g=(p=lo(x,f))+(y=lo(x,d)))&&(p/=g,y/=g),g=co([0,0],v,-p),v=co([0,0],v,y),m=oo([0,0],x,g),b=ao([0,0],b=oo([0,0],x,v),so([0,0],d,x)),b=so([0,0],b,ao([0,0],d,x)),m=ao([0,0],m=oo([0,0],x,g=co([0,0],g=ho([0,0],b,x),-p/y)),so([0,0],f,x)),m=so([0,0],m,ao([0,0],f,x)),b=oo([0,0],x,v=co([0,0],v=ho([0,0],x,m),y/p)),a&&(m=ao([0,0],m=so([0,0],m,l),u),b=ao([0,0],b=so([0,0],b,l),u)),o.push(i),o.push(m),i=b):(m=x,o.push(i),o.push(m)):i=x}return n&&o.push(o.shift()),o}(r,.4,e,n),u=r.length,h=[],i=0;i<u-1;i+=1)a=l[2*i],s=l[2*i+1],h.push(["C",a[0],a[1],s[0],s[1],(c=r[i+1])[0],c[1]]);return e&&(a=l[u],s=l[u+1],h.push(["C",a[0],a[1],s[0],s[1],(c=r[0])[0],c[1]])),h}function Kw(t,e){var n=(e=void 0===e?!1:e)?t.length-1:0,t=t.map(function(t,e){return vo([e===n?"M":"L"],D(t),!1)});return e?t.reverse():t}function Jw(t,e){if(void 0===e&&(e=!1),t.length<=2)return Kw(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var o=e?t[r-i-1]:t[i];$g(o,n.slice(-2))||n.push.apply(n,vo([],D(o),!1))}var a=Zw(n,!1);return e?a.unshift(vo(["M"],D(t[r-1]),!1)):a.unshift(vo(["M"],D(t[0]),!1)),a}function Qw(t,e,n){t=Fg(t);return t.push(["L",e,n],["L",0,n],["Z"]),t}yo(rk,tk=r),Object.defineProperty(rk.prototype,"rawData",{get:function(){var t=this.attributes.data;return t&&0!==(null==t?void 0:t.length)?(t=Fg(t),_g(t[0])?[t]:t):[[]]},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"data",{get:function(){return this.attributes.isStack?$w(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"baseline",{get:function(){var t=this.scales.y,e=D(t.getOptions().domain||[0,0],2),n=e[0],e=e[1];return e<0?t.map(e):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"containerCfg",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"linesCfg",{get:function(){var t,n,r,i,o,e,a,s,c,l=this,u=this.attributes,h=u.areaStyle,f=u.isStack,d=u.lineStyle,p=u.smooth,u=this.containerCfg.width,y=this.data;return 0===y[0].length?{lines:[],areas:[]}:(t=this.scales,e=t.x,t=t.y,y=y,n=(e={type:"line",x:e,y:t}).x,r=e.y,i=(e=D(r.getOptions().range||[0,0],2))[0],o=e[1],i<o&&(e=D([i,o],2),o=e[0],i=e[1]),t=y.map(function(t){return t.map(function(t,e){return[n.map(e),Eg(r.map(t),o,i)]})}),e=[],h&&(y=this.baseline,e=f?(p?function(t,e,n){for(var r=[],i=t.length-1;0<=i;--i){var o,a=t[i],s=Jw(a),c=void 0,c=0===i?Qw(s,e,n):(o=Jw(t[i-1],!0),a=a[0],o[0][0]="L",vo(vo(vo([],D(s),!1),D(o),!1),[vo(["M"],D(a),!1),["Z"]],!1));r.push(c)}return r}:function(t,e,n){for(var r=[],i=t.length-1;0<=i;--i){var o,a=Kw(t[i]),s=void 0,s=0===i?Qw(a,e,n):((o=Kw(t[i-1],!0))[0][0]="L",vo(vo(vo([],D(a),!1),D(o),!1),[["Z"]],!1));r.push(s)}return r})(t,u,y):(a=p,s=u,c=y,t.map(function(t){return Qw((a?Jw:Kw)(t),s,c)}))),{lines:t.map(function(t,e){return M({stroke:l.getColor(e),path:(p?Jw:Kw)(t)},d)}),areas:e.map(function(t,e){return M({path:t,fill:l.getColor(e)},h)})})},enumerable:!1,configurable:!0}),Object.defineProperty(rk.prototype,"columnsCfg",{get:function(){var i=this,t=this.attributes,o=t.isStack,a=t.columnStyle,t=this.containerCfg.height,s=this.rawData;if(!s)return{columns:[]};o&&(s=$w(s));var e=this.createScales(s),c=e.x,l=e.y,e=D(Xw(s),2),n=e[0],e=e[1],u=new q1({domain:[0,e-(0<n?0:n)],range:[0,t]}),h=c.getBandWidth(),f=this.rawData;return{columns:s.map(function(t,r){return t.map(function(t,e){var n=h/s.length;return M(M({fill:i.getColor(r)},a),o?{x:c.map(e),y:l.map(t),width:h,height:u.map(f[r][e])}:{x:c.map(e)+n*r,y:0<=t?l.map(t):l.map(0),width:n,height:u.map(Math.abs(t))})})})}},enumerable:!1,configurable:!0}),rk.prototype.render=function(t,e){this.containerShape=B(e,".container","rect").attr("className","container").node();var n=this.attributes.type,r="spark".concat(n),i="line"===n?this.linesCfg:this.columnsCfg;this.sparkShape=B(e,".".concat(r),function(){return new("line"===n?Hw:Uw)({className:r,style:i})}).call(L,i).node()},rk.prototype.update=function(t){this.attr(P({},this.attributes,t)),this.render(this.attributes,this)},rk.prototype.clear=function(){this.removeChild(this.sparkShape),this.sparkShape.clear(),this.sparkShape.destroy()},rk.prototype.getColor=function(t){var e=this.attributes.color;return dg(e)?e[t%e.length]:hg(e)?e.call(null,t):e},rk.prototype.createScales=function(t){var e=this.attributes,n=e.type,r=e.isGroup,i=e.barPadding,o=e.nice,o=void 0===o||o,a=e.minValue,e=e.maxValue,s=this.containerCfg,c=s.width,s=s.height,l=D(Xw(t),2),u=l[0],l=l[1];return{type:n,x:"line"===n?new q1({domain:[0,t[0].length-1],range:[0,c]}):new R1({domain:t[0].map(function(t,e){return e}),range:[0,c],paddingInner:r?i:0}),y:new q1({domain:[null!=a?a:u,null!=e?e:l],range:[s,0],nice:o})}},rk.tag="sparkline",rk.defaultOptions={style:{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineStyle:{lineWidth:1},isGroup:!1,columnStyle:{lineWidth:1,stroke:"#fff",padding:.1}}};var tk,ek,nk=rk;function rk(t){return tk.call(this,P({},rk.defaultOptions,t))||this}function ik(){return null!==ek&&ek.apply(this,arguments)||this}function ok(e,n){return yo(t,r=lh),t.prototype.connectedCallback=function(){var t,e;null!=(t=(e=this.descriptor).render)&&t.call(e,this.attributes,this),null!=(e=(t=this.descriptor).bindEvents)&&e.call(t,this.attributes,this)},t.prototype.update=function(t){var e;this.attr(P({},this.attributes,t=void 0===t?{}:t)),null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)},t;function t(t){t=r.call(this,vw({},{style:n},t))||this;return t.descriptor=e,t}var r}yo(ik,ek=lh);var ak=ok({render:function(t,e){function n(t,e,n,r,i){B(h,"line-".concat(t),"line").attr("className","line-".concat(t)).style("x1",e).style("y1",n).style("x2",r).style("y2",i).style("stroke",h.style.stroke).style("strokeOpacity",h.style.strokeOpacity).style("lineWidth",h.style.lineWidth)}var r=t.size,i=t.radius,o=t.stroke,a=t.fill,s=t.lineWidth,c=t.orient,l=t.fillOpacity,t=t.strokeOpacity,r=void 0===r?10:r,u=2.4*r,h=B(e,".rect","rect").attr("className","rect").style("x",-r/2).style("y",-u/2).style("width",r).style("height",u).style("fill",a||"#fff").style("fillOpacity",l||1).style("stroke",o||"#bfbfbf").style("lineWidth","number"!=typeof s?1:s).style("strokeOpacity",t).style("radius","number"!=typeof i?r/4:null!=i?i:2).node(),a=1/3*r,l=2/3*r,o=.25*u,s=.75*u;n(0,a,o,a,s),n(0,l,o,l,s),h.setOrigin(r/2,u/2),"vertical"===c?e.setLocalEulerAngles(90):e.setLocalEulerAngles(0)}});yo(hk,sk=r),hk.prototype.render=function(t,e){var n,r,i,o=t.iconCfg,t=t.textCfg;i=e,o=((n=o)||{}).type,r="handle-icon ".concat(o,"-handle"),sw(i).selectAll(".handle-icon").data(o?[o]:[],function(t){return t}).join(function(t){return t.append(function(t){return"symbol"===t?new Aw({className:r,name:"icon",style:n}):new ak({name:"icon",className:r,style:n})})},function(t){return t.each(function(){this.update(n)})},function(t){return t.remove()}),void 0===(i=t)&&(i={}),B(e,".".concat(o="handle-text"),"text").attr("className",o).style("fontSize",12).style("fill","#000").style("fillOpacity",.45).style("textAlign","center").style("textBaseline","middle").call(L,i)};var sk,ck,lk,uk=hk;function hk(){return null!==sk&&sk.apply(this,arguments)||this}function fk(t){var o=ck.call(this,P({},fk.defaultOptions,t))||this;return o.onSelectionMouseenter=function(){o.selectionShape.attr(o.getStyle("selectionStyle"))},o.onSelectionMouseleave=function(){o.selectionShape.attr(o.getStyle("selectionStyle"))},o.onDragStart=function(i){return function(t){t.stopPropagation(),o.target=i,o.prevPos=o.getOrientVal(iw(t));var t=o.availableSpace,e=t.x,t=t.y,n=o.attributes,r=n.x,n=n.y;o.selectionStartPos=o.getRatio(o.prevPos-o.getOrientVal([e,t])-o.getOrientVal([r,n])),o.selectionWidth=0,o.addEventListener("mousemove",o.onDragging),o.addEventListener("touchmove",o.onDragging),document.addEventListener("mouseup",o.onDragEnd),document.addEventListener("touchend",o.onDragEnd)}},o.onDragging=function(t){t.stopPropagation();var t=o.getOrientVal(iw(t)),e=t-o.prevPos;if(e){var n=o.getRatio(e);switch(o.target){case"start":o.setValuesOffset(n);break;case"end":o.setValuesOffset(0,n);break;case"selection":o.setValuesOffset(n,n);break;case"background":o.selectionWidth+=n,o.setValues([o.selectionStartPos,o.selectionStartPos+o.selectionWidth].sort())}o.prevPos=t}},o.onDragEnd=function(){o.removeEventListener("mousemove",o.onDragging),o.removeEventListener("mousemove",o.onDragging),document.removeEventListener("mouseup",o.onDragEnd),document.removeEventListener("touchend",o.onDragEnd)},o.onValueChanged=function(t){t=new Gu("valueChanged",{detail:{oldValue:t,value:o.getValues()}});o.dispatchEvent(t)},o.selectionStartPos=0,o.selectionWidth=0,o.prevPos=0,o.target="",o}function dk(t){var a=lk.call(this,P({},dk.defaultOptions,t))||this;return a.onValueChanged=function(t){var e=a.style.value;t!==e&&(e=new Gu("scroll",t={detail:{oldValue:t,value:e}}),a.dispatchEvent(e),e=new Gu("valueChanged",t),a.dispatchEvent(e))},a.onTrackClick=function(t){var e=a.attributes.thumbLen,n=D(a.getLocalPosition(),2),r=n[0],n=n[1],i=D(a.padding,4),o=i[0],i=i[3],r=a.getOrientVal([r+i,n+o]),i=a.getOrientVal(iw(t))-e/2,n=a.valueOffset(i-r,!0);a.setValue(n)},a.onThumbMouseenter=function(){a.thumbShape.attr(a.getStyle("thumbStyle","active"))},a.onTrackMouseenter=function(){a.trackShape.attr(a.getStyle("trackStyle","active"))},a.onThumbMouseleave=function(){a.thumbShape.attr(a.getStyle("thumbStyle"))},a.onTrackMouseleave=function(){a.trackShape.attr(a.getStyle("trackStyle"))},a.onDragStart=function(t){t.stopPropagation(),a.prevPos=a.getOrientVal(iw(t)),document.addEventListener("mousemove",a.onDragging),document.addEventListener("mouseup",a.onDragEnd),document.addEventListener("touchmove",a.onDragging),document.addEventListener("touchcancel",a.onDragEnd)},a.onDragging=function(t){t.stopPropagation();var t=a.getOrientVal(iw(t)),e=t-a.prevPos;a.setOffset(e),a.prevPos=t},a.onDragEnd=function(t){t.preventDefault(),document.removeEventListener("mousemove",a.onDragging),document.removeEventListener("mouseup",a.onDragEnd),document.removeEventListener("touchmove",a.onDragging),document.removeEventListener("touchcancel",a.onDragEnd)},a}yo(fk,ck=r),Object.defineProperty(fk.prototype,"values",{get:function(){return this.getAttribute("values")},set:function(t){this.setAttribute("values",this.getSafetyValues(t))},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"names",{get:function(){return this.getAttribute("names")},set:function(t){this.setAttribute("names",t)},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"backgroundShapeCfg",{get:function(){return M(M({cursor:"crosshair",zIndex:0},this.availableSpace),this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"sparklineShapeCfg",{get:function(){var t=this.attributes,t=(t.orient,t.sparkline),e=t.padding,t=N(t,["padding"]),e=D(Qx(e),4),n=e[0],r=e[1],i=e[2],e=e[3],o=this.availableSpace,a=o.width,o=o.height,s=this.getStyle("backgroundStyle").lineWidth,s=void 0===s?0:s;return M(M({x:s/2+e,y:s/2+n},t),{zIndex:0,width:a-s-e-r,height:o-s-n-i})},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.padding,n=t.width,t=t.height,e=D(Qx(e),4),r=e[0],i=e[1],o=e[2],e=e[3];return{x:e,y:r,width:n-(e+i),height:t-(r+o)}},enumerable:!1,configurable:!0}),fk.prototype.getValues=function(){return this.values},fk.prototype.setValues=function(t){this.values=t,this.update({values:t})},fk.prototype.getNames=function(){return this.names},fk.prototype.setNames=function(t){this.names=t},fk.prototype.render=function(t,e){function n(e){var t="slider-".concat(e,"-handle");return B(o,".".concat(t),function(){return new uk({className:t})}).call(function(t){t.node().update(r.getHandleShapeCfg(e))}).node()}var r=this,i=t.backgroundStyle,t=t.selectionStyle,e=B(e,".slider-background","rect").attr("className","slider-background").style("cursor","crosshair").style("fill","#416180").style("fillOpacity",.05).call(L,this.availableSpace).call(L,rw(i)).node(),o=(B(this.backgroundShape=e,".slider-sparkline",function(){return new nk({})}).attr("className","slider-sparkline").call(function(t){t.node().update(r.sparklineShapeCfg)}),B(e,".slider-foreground","g").attr("className","slider-foreground").node());this.selectionShape=B(o,".slider-selection","rect").attr("className","slider-selection").style("cursor","move").style("zIndex",2).style("fill","#5B8FF9").style("fillOpacity",.15).call(L,this.calcMask()).call(L,rw(t)||{}).node();this.startHandle=n("start"),this.endHandle=n("end")},fk.prototype.getSafetyValues=function(t,e){void 0===t&&(t=this.getValues()),void 0===e&&(e=4);var n,r=this.attributes,i=r.min,r=r.max,o=D(this.getValues(),2),a=o[0],o=o[1],t=D(t||[a,o],2),s=t[0],t=t[1],c=t-s;return t<s&&(s=(n=D([t,s],2))[0],t=n[1]),r-i<c?[i,r]:s<i?a===i&&o===t?[i,t]:[i,c+i]:r<t?o===r&&a===s?[s,r]:[r-c,r]:[Ux(s,e),Ux(t,e)]},fk.prototype.getStyle=function(t,e,n){return void 0===e&&(e="default"),n?this.getHandleCfg(n):rw(Gg(this.attributes,t),e,!0)},fk.prototype.calcMask=function(t){var t=D(this.getSafetyValues(t),2),e=t[0],t=t[1],n=this.availableSpace,r=n.width,n=n.height;return this.getOrientVal([{y:0,height:n,x:e*r,width:(t-e)*r},{x:0,width:r,y:e*n,height:(t-e)*n}])},fk.prototype.calcHandlePosition=function(t){var e=this.availableSpace,n=e.width,e=e.height,r=D(this.getSafetyValues(),2),i=r[0],r=r[1],t=("start"===t?i:r)*this.getOrientVal([n,e]);return{x:this.getOrientVal([t,n/2]),y:this.getOrientVal([e/2,t])}},fk.prototype.calcHandleText=function(t){var e,n,r=this.attributes,i=r.orient,r=r.names,o=this.getHandleCfg(t),a=o.spacing,s=o.formatter,o=o.textStyle,c=this.getHandleSize(t),l=this.getSafetyValues(),u=this.availableSpace,h=u.width,u=u.height,f=this.calcMask(),d=f.x,p=f.y,y=f.width,f=f.height,r=D("start"===t?[r[0],l[0]]:[r[1],l[1]],2),l=s(r[0],r[1]),s=new Ah({style:M(M({},o),{text:l})}),r=cw(s),o=r.width,r=r.height,s=(s.destroy(),0),g=0,c=c/2,v="center";return"horizontal"===i?(e=(i=a+c)+o/2,v="start"===t?(s=0<(n=d-i-o)?-e:e,0<n?"end":"start"):(s=(n=o<h-d-y-i)?e:-e,n?"start":"end")):(o=a+c,g="start"===t?r<p-c?-o:o:r<u-p-f-c?o:-o),{x:s,y:g,text:l,textAlign:v}},fk.prototype.getHandleTextShapeCfg=function(t){var e=this.getHandleCfg(t).textStyle;return M(M({},e),this.calcHandleText(t))},fk.prototype.getHandleIconShapeCfg=function(t){var e,n=this.attributes.orient,r=this.getHandleCfg(t),i=r.handleIcon,r=r.handleStyle,o=this.getOrientVal(["ew-resize","ns-resize"]),t=this.getHandleSize(t),i=i?(e="symbol",M(M({},r),{cursor:o,size:t,symbol:i})):(e="default",M(M({},r),{cursor:o,size:t}));return M({orient:n,type:e},i)},fk.prototype.getHandleShapeCfg=function(t){var e=this.getHandleCfg(t),n=this.calcHandlePosition(t),r=n.x,n=n.y,i=this.calcHandleText(t);return{x:r,y:n,handleType:t,zIndex:3,visibility:null!=e&&e.show?"visible":"hidden",iconCfg:this.getHandleIconShapeCfg(t),textCfg:M(M({},this.getHandleTextShapeCfg(t)),i)}},fk.prototype.getHandleCfg=function(t){var e=Gg(this.attributes,"handle"),n=e.start,r=e.end,e=N(e,["start","end"]),i={};return"start"===t?i=n:"end"===t&&(i=r),P({},e,i)},fk.prototype.getHandleSize=function(t){var e,t=this.getHandleCfg(t).size;return t||(e=(t=this.attributes).width,t=t.height,Math.floor((this.getOrientVal([t,e])+4)/2.4))},fk.prototype.getOrientVal=function(t){var t=D(t,2),e=t[0],t=t[1];return"horizontal"===this.attributes.orient?e:t},fk.prototype.setValuesOffset=function(t,e){void 0===e&&(e=0);var n=D(this.getValues(),2),r=n[0],n=n[1],t=[r+t,n+e].sort();this.setValues(t),this.onValueChanged([r,n])},fk.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,e=e.height;return t/this.getOrientVal([n,e])},fk.prototype.bindEvents=function(){function r(t){return t&&".handle-text"!==t.className}var i=this,t=this.selectionShape;t.addEventListener("mousedown",this.onDragStart("selection")),t.addEventListener("touchstart",this.onDragStart("selection")),t.addEventListener("mouseenter",this.onSelectionMouseenter),t.addEventListener("mouseleave",this.onSelectionMouseleave);[this.startHandle,this.endHandle].forEach(function(t){var n=t.style.handleType;t.addEventListener("mousedown",function(t){var e=t.target;r(e)&&i.onDragStart(n)(t)}),t.addEventListener("touchstart",function(t){var e=t.target;r(e)&&i.onDragStart(n)(t)})}),this.backgroundShape.addEventListener("mousedown",this.onDragStart("background")),this.backgroundShape.addEventListener("touchstart",this.onDragStart("background"))},fk.defaultOptions={type:fk.tag="slider",style:{orient:"horizontal",values:[0,1],names:["",""],min:0,max:1,width:200,height:20,sparkline:{padding:[1,1,1,1]},padding:[0,0,0,0],selectionStyle:{active:{fill:"#ccdaf5"}},handle:{show:!0,formatter:function(t,e){return t},spacing:10}}},yo(dk,lk=r),Object.defineProperty(dk.prototype,"padding",{get:function(){return Qx(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(dk.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.width,t=t.height,n=D(this.padding,4),r=n[0],i=n[1],o=n[2],n=n[3];return{x:n,y:r,width:e-(n+i),height:t-(r+o)}},enumerable:!1,configurable:!0}),Object.defineProperty(dk.prototype,"trackLen",{get:function(){var t=this.availableSpace,e=t.width,t=t.height;return this.getOrientVal([e,t])},enumerable:!1,configurable:!0}),Object.defineProperty(dk.prototype,"thumbRadius",{get:function(){var t=this.attributes.isRound,e=this.availableSpace,n=e.width,e=e.height,r=Gg(this.attributes,["thumbStyle","default","radius"]);return t?r||this.getOrientVal([e,n])/2:0},enumerable:!1,configurable:!0}),dk.prototype.render=function(t,e){var n=t.width,r=t.height,i=t.trackStyle,o=t.thumbStyle,a=t.value,s=t.thumbLen,t=t.orient,e=B(e,".track","rect").attr("className","track").style("width",null!=n?n:10).style("height",null!=r?r:200).call(L,rw(i)).node(),n=this.valueOffset(a||0),r=this.availableSpace;this.thumbShape=B(e,".thumb","rect").attr("className","thumb").style("x","vertical"===t?r.x:r.x+n).style("y","vertical"===t?r.y+n:r.y).style("width","vertical"===t?r.width:s).style("height","vertical"===t?s:r.height).style("radius",this.thumbRadius).call(L,rw(o)).node(),this.trackShape=e},dk.prototype.getValue=function(){return this.style.value},dk.prototype.setValue=function(t){var e=this.style,n=e.value,r=e.min,e=e.max;this.update({value:Eg(t,r,e)}),this.onValueChanged(n)},dk.prototype.setOffset=function(t){var e=this.getValue();this.setValue(this.valueOffset(t,!0)+e)},dk.prototype.valueOffset=function(t,e){var n=this.attributes,r=n.thumbLen,i=n.min,n=n.max,r=this.trackLen-r;return(e=void 0!==e&&e)?t/r:r*Eg(t,i,n)},dk.prototype.getStyle=function(t,e){return void 0===e&&(e="default"),rw(Gg(this.attributes,t),e)},dk.prototype.bindEvents=function(){this.trackShape.addEventListener("click",this.onTrackClick),this.thumbShape.addEventListener("mousedown",this.onDragStart),this.thumbShape.addEventListener("touchstart",this.onDragStart),this.onHover()},dk.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orient?t[0]:t[1]},dk.prototype.onHover=function(){this.thumbShape.addEventListener("mouseenter",this.onThumbMouseenter),this.trackShape.addEventListener("mouseenter",this.onTrackMouseenter),this.thumbShape.addEventListener("mouseleave",this.onThumbMouseleave),this.trackShape.addEventListener("mouseleave",this.onTrackMouseleave)},dk.defaultOptions={type:dk.tag="scrollbar",style:{orient:"vertical",min:0,max:1,isRound:!0,thumbLen:20,padding:[2,2,2,2],trackStyle:{default:{fill:"#fafafa",lineWidth:1,stroke:"#e8e8e8"},active:{}},thumbStyle:{default:{fill:"#c1c1c1"},active:{opacity:.8}}}};Object.defineProperty(yk.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),yk.prototype.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},yk.prototype.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},yk.prototype.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},yk.prototype.rotate=function(t,e,n){t=this.rotatedPoints(t,e,n);return this.clear().add(t[0],t[1]).add(t[2],t[3]).add(t[4],t[5]).add(t[6],t[7])},yk.prototype.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,o=this.x2,a=this.y2,s=Math.cos(t),t=Math.sin(t),c=e-e*s+n*t,e=n-e*t-n*s;return[[s*r-t*i+c,t*r+s*i+e],[s*r-t*a+c,t*r+s*a+e],[s*o-t*a+c,t*o+s*a+e],[s*o-t*i+c,t*o+s*i+e]].flat(1)},yk.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},yk.prototype.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},yk.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE};var pk=yk;function yk(t){var t=t||{},e=t.left,n=t.top,r=t.right,t=t.bottom;this.x1=null!=e?e:+Number.MAX_VALUE,this.x2=null!=r?r:-Number.MAX_VALUE,this.y1=null!=n?n:+Number.MAX_VALUE,this.y2=null!=t?t:-Number.MAX_VALUE}function gk(t,l){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some(function(t){return t=t,n=(e=D(e=l,4))[0],r=e[1],i=e[2],e=e[3],o=(t=D(t,4))[0],a=t[1],i-=n,e-=r,s=t[2]-o,t=t[3]-a,0!=(c=i*t-s*e)&&((a=i*(i=r-a)-e*(r=n-o))<0!=(e=0<c)&&((n=s*i-t*r)<0!=e&&(c<a!=e&&c<n!=e)));var e,n,r,i,o,a,s,c})}function vk(t,e,n){void 0===n&&(n=[0,0,0,0]);var r=e.getEulerAngles()||0,i=(e.setEulerAngles(0),e.getLocalBounds()),o=i.min,a=i.max,i=i.halfExtents,s=o[0],c=2*i[0],i=2*i[1],o=o[1],l=a[0],a=a[1],u=0,h=0,f=s,d=o,p=("text"===e.tagName&&(i-=1.5,p=e.style.textAlign,y=e.style.textBaseline,u=+e.style.dx,h=+e.style.dy,"center"===p?f=(s+l)/2:"right"!==p&&"end"!==p||(f=l),"middle"===y?d=(o+a)/2:"bottom"!==y&&"baseline"!==y||(d=a)),D(n,4)),l=p[0],y=void 0===l?0:l,a=p[1],n=void 0===a?0:a,l=p[2],a=p[3];return t.set((u+=s)-(void 0===a?n:a),(h+=o)-y,u+c+n,h+i+(void 0===l?y:l)),e.setEulerAngles(r),t.rotatedPoints(r*Jx,f,d)}function mk(t,e,n){t=vk(new pk,t,n),e=vk(new pk,e,n);return gk(e,[t[0],t[1],t[2],t[3]])||gk(e,[t[0],t[1],t[4],t[5]])||gk(e,[t[4],t[5],t[6],t[7]])||gk(e,[t[2],t[3],t[6],t[7]])}function bk(t,e,n){return"top"===t||"bottom"===t?e:n}function xk(t,e,n){return"left"===t||"right"===t?e:n}function wk(t,e,n){return"outside"===t?e:n}var kk=function(t,e,n){return"left"===t?e:n},Ek=function(t,e,n){return"right"===t?e:n},_k=function(t,e,n){return"left"===t||"top"===t||"inside"===t?e:n};function Mk(t,r){var i;return vo([],D(t.reduce(function(t,e,n){return n&&i&&mk(i,e,r)?(t.add(i),t.add(e)):i=e,t},new Set)),!1)}var e={style:{title:{content:"",rotate:void 0,maxLength:260},ticks:[],ticksThreshold:100,tickLine:{len:6},subTickLine:{len:4,count:0},label:{type:"text",alignTick:!0,tickPadding:2,margin:[0,0,0,0],overlapOrder:["autoRotate","autoEllipsis","autoHide"],autoRotate:!1,autoEllipsis:!1,autoHide:!1,autoHideTickLine:!0,showLast:!0,showFirst:!0,optionalAngles:[0,45,90],minLabel:0,minLength:14,maxLength:160,ellipsisStep:" "},verticalFactor:1}},Sk=(P({},e,{style:{type:"arc"}}),P({},e,{style:{}}),{year:[["year","second"],["year","day"],["month","day"],["day","day"]],month:[["month","day"],["day","day"]],day:[["month","day"],["day","day"]],hour:[["hour","second"],["hour","minute"],["hour","hour"]],minute:[["minute","second"],["second","second"]],second:[["second","second"]]});function Tk(t,r){for(var i,o=t.map(function(t,e){return[t.id,{text:t.style.text,value:t.style.tip||t.style.text,idx:e}]}),a=new Map(o),e=Og(o,function(t){t=D(t,2),t[0],t=t[1].value;return new Date(t).getTime()}).text,n=Tg(o,function(t){t=D(t,2),t[0],t=t[1].value;return new Date(t).getTime()}).text,s=(n=n,e=D([dw(e=e),dw(n)],2),n=e[0],e=e[1],n.getFullYear()!==e.getFullYear()?"year":n.getMonth()!==e.getMonth()?"month":n.getDay()!==e.getDay()?"day":n.getHours()!==e.getHours()?"hour":n.getMinutes()!==e.getMinutes()?"minute":"second"),c=new Date("1970-01-01 00:00:00"),l=Vx(t[0]),u=0;u<Sk[s].length;u+=1){var h=Sk[s][u];if(Jg(yw(c,pw(h)),l)<r){i=h;break}i=h}return function(t,e){var n,e=a.get(e.id).idx;return 0===e?t:(e=null==(e=o[e-1])?void 0:e[1].text,t=new Date(t),n=i,gw(new Date(e),s)!==gw(t,s)&&(n=function(t,e,n,r){for(var i=[],o=D(t,2)[1],a=hw.indexOf(o),s=0;s<=a;s+=1){var c=[hw[s],o];if(Jg(yw(e,pw(c)),r)<n){i=c;break}}return i}(i,t,r,l)),yw(t,pw(n)))}}function Ok(a,s,t){if(!(s.length<=1))for(var e=t.ellipsisStep,n=t.minLength,r=t.maxLength,i=t.margin,c=void 0===i?[]:i,l=t.labelType,u=Vx(s[0]),o=Hx(e,u)||1,h=Hx(n,u)||1,i=Hx(r,u),f=(!fg(i)&&i!==1/0||(i=Math.max.apply(null,s.map(function(t){return t.getBBox().width}))),Date.now()),d=s.slice(),t=D(c,4),e=(t[0],t[1]),p=void 0===e?0:e,n=(t[2],t[3]),y=void 0===n?p:n,g=function(e){var t,n,r,i,o;return(d=Mk(s,c)).length<1||300<Date.now()-f?{value:void 0}:(o=function(t,e){return""},n=bk(a,e-y-p,e),o="time"===l?Tk(s,n):"number"===l?(n=n,r=(t=s).map(function(t,e){return{text:t.style.text,value:Number(t.style.tip||t.style.text)}}),r=Number(Tg(r,function(t){t=t.text;return(null==t?void 0:t.length)||0}).value),t=Vx(t[0]),i=qx(r),Jg(i,t)<=n?function(t,e){return qx(Number(t))}:(i=Xx(r),Jg(i,t)<=n?function(t,e){return Xx(Number(t),1)}:function(t,e){return Number(t).toExponential()})):function(t){return Gx(t,e,u)},void d.forEach(function(t,e){var n=t.style.tip||t.style.text,n=(t.style.tip=n,o.call(null,n,t));t.attr("text",n)}))},v=i;h+o<v;v-=o){var m=g(v);if("object"==typeof m)return m.value}}var Ak=function(t,e){var e=e.seq,n=void 0===e?2:e;return t.filter(function(t,e){return!(e%n)||!(t.style.visibility="hidden")})};function Pk(t,e,n){var r=e.length;if(!(r<=1||2===r&&null!=n&&n.showFirst&&null!=n&&n.showLast)){var i,o,a,s=Ak,c=2,l=e.slice(),u=e.slice(),h=Date.now(),f=Math.min.apply(null,e.map(function(t){return t.getBBox().width}))||1;for("top"!==t&&"bottom"!==t||(t=lw(e[0]).left,e=lw(e[r-1]).right,e=Math.abs(e-t)||1,c=Math.max(Math.floor(r*f/e),c)),null!=n&&n.showFirst&&(i=l.splice(0,1)[0]),null!=n&&n.showLast&&(o=l.splice(-1,1)[0],l.reverse());Mk((o?vo(vo([o],D(u),!1),[i],!1):vo([i],D(u),!1)).filter(function(t){return Ew(t)}),null==n?void 0:n.margin).length;)if(o&&!i&&c%2==0?l.splice(0,1).forEach(function(t){return t.style.visibility="hidden"}):o&&i&&l.splice(0,1).forEach(function(t){return t.style.visibility="hidden"}),u=s(((a=l).forEach(function(t){return t.style.visibility="visible"}),a),{seq:c}),c++,200<Date.now()-h)return}}function Nk(o,t,e){for(var n=e.optionalAngles,a=void 0===n?[0,45,90]:n,r=e.margin,i=function(i){if(t.forEach(function(t){return e=o,t=t,n=a[i],t.setEulerAngles(n),void(n&&(r=_k(e,-1,1),e=kk(e,"end",Ek(e,"start",Zx(Kx(r,n),"left",$x(Kx(r,n),"right")))),t.style.textAlign=e));var e,n,r}),Mk(t,r).length<1)return"break"},s=0;s<a.length&&"break"!==i(s);s++);}var Ck=new Map([["autoHide",{getDefault:function(){return Pk},equidistance:Pk,greedy:function(t,e,n){var r,i=e.length;i<=1||2===i&&null!=n&&n.showFirst&&null!=n&&n.showLast||e.slice().forEach(function(t,e){e&&r&&mk(r,t,null==n?void 0:n.margin)?e===i-1&&null!=n&&n.showLast?r.style.visibility="hidden":t.style.visibility="hidden":r=t})}}],["autoRotate",{getDefault:function(){return Nk}}],["autoEllipsis",{getDefault:function(){return Ok},ellipsis:Ok}]]);function Lk(t,e,n){var r,t=Array.from(t||[]).map(function(t,e){return M({id:"".concat(e)},t)}),i=t.length,o=t;return"number"==typeof e&&e<i&&(r=Math.ceil(i/e),o=t.filter(function(t,e){return e%r==0||e===i-1})),n&&1!==o[o.length-1].value&&o.push({value:1,id:"append"}),o}function Ik(a,s){return function(i){var t,o;a&&(t=void 0===(t=a.overlapOrder)?[]:t,o=M({labelType:a.type},Wg(a,["optionalAngles","minLength","maxLength","ellipsisStep","showFirst","showLast","margin"])),t.forEach(function(t){var e,n=Ck.get(t),r=a[t];n&&r&&(t=t,(e=a)&&("autoRotate"!==t||fg(e.rotate))&&(t=n.getDefault(),"function"==typeof r?t=r:"object"==typeof r?(t=n[r.type]||Yg,o=M(M({},o),r.cfg)):"string"==typeof r&&(t=n[r]||Yg),t(s,i,o)))}))}}function jk(t,n,e){e&&t.forEach(function(t,e){e=n[e];e&&(e.style.visibility=t.style.visibility)})}function Rk(t,e,n,r,i,o){B(t,".axis-title","text").attr("className","axis-title").style("text",(null==o?void 0:o.content)||"").style("x",e).style("y",n).style("fill","black").style("fontSize",12).style("fontWeight","lighter").style("textAlign",r).style("textBaseline",i).style("transform","rotate(".concat((null==o?void 0:o.rotate)||0,"deg)")).style("visibility",o?"visible":"hidden").call(L,(null==o?void 0:o.style)||{})}function Dk(t,e,n,r){var i=n[e].data,n=n.map(function(t){return t.data}),i="function"==typeof r?r.call(null,i,e,n):r;t.attr(i||{})}function Bk(t,n,r,e){void 0===e&&(e=""),sw(t).selectAll(".axis-".concat(e,"tick")).data(r?n:[],function(t){return t.id}).join(function(t){return t.append(function(t){return new bh({className:"axis-".concat(e,"tick"),style:t})}).style("stroke","#416180").style("lineWidth",.5).style("strokeOpacity","sub"===e?.45:.65).style("visibility","visible").each(function(t,e){this.attr(t),Dk(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),Dk(this,e,n,null==r?void 0:r.style)}).style("visibility","visible")},function(t){return t.remove()})}function Fk(t,e,n,r){var i=n[e].data,n=n.map(function(t){return t.data}),i="function"==typeof r?r.call(null,i,e,n):r;t.attr(i||{})}function zk(t,e){var n=Vx(t),e=Hx(e,n);t.attr("tip",null),Ew(e)&&e<2*t.getBounds().halfExtents[0]&&(e=Gx(t.style.text||"",e,n,"..."),t.attr("tip",t.style.text),t.attr("text",e))}function Gk(t,e,n,r,i){sw(t).selectAll(".".concat(e)).data(n,function(t){return t.id}).join(function(t){return t.append("text").attr("className",e).style("fontFamily","sans-serif").style("fontSize",12).style("fontWeight","normal").call(L,i||{}).each(function(t,e){this.attr(t),zk(this,(null==r?void 0:r.maxLength)||Number.MAX_SAFE_INTEGER),Fk(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),zk(this,(null==r?void 0:r.maxLength)||Number.MAX_SAFE_INTEGER),Fk(this,e,n,null==r?void 0:r.style)})},function(t){return t.remove()})}function Wk(t,e,n){Gk(t,"axis-label",(n=void 0===n?{}:n)?e:[],n,{fill:"#000",fontWeight:"lighter"})}function Hk(t,e,n,r,i,o){B(t,".axis-".concat(e,"-arrow"),function(){return new Aw({})}).attr("className","axis-arrow$$ axis-".concat(e,"-arrow")).style("visibility",o?"visible":"hidden").style("symbol","axis-arrow").style("x",n).style("y",r).style("size",8).style("lineWidth",.5).style("fill","grey").style("stroke","grey").style("fillOpacity",.85).style("strokeOpacity",.85).style("transformOrigin","left").style("transform","rotate(".concat(i,"deg)")).call(L,o||{})}function Vk(t,e,n,r){var i,o,a,s;void 0===r&&(r={}),B(t,".axis-line","path").attr("className","axis-line").style("visibility",r?"visible":"hidden").style("stroke","grey").style("lineWidth",.5).style("strokeOpacity",.85).style("path",e).call(L,(null==r?void 0:r.style)||{}),n&&(r=(e=(null==r?void 0:r.arrow)||{}).start,e=e.end,n=D(n,2),i=(o=D(n[0],2))[0],o=o[1],a=(n=D(n[1],2))[0],n=n[1],s=Math.atan((n-o)/(a-i))/Math.PI*180/2,i===a?s=n<o?45:-45:o===n&&(s=a<i?0:90),Hk(t,"start",i,o,s,r),Hk(t,"end",a,n,s+90,e))}function Yk(t,e,n,r){var i,o,a,s,c;return e?(o=t[0],a=e,s=(o=D(o,2))[0],o=o[1],s=(a=D(a,2))[0]-s,a=a[1]-o,i=Math.sqrt(s*s+a*a),c=r?0:1,n?"M".concat(e[0],",").concat(e[1]-i," A").concat(i,",").concat(i,",0,0,").concat(c,",").concat(e[0],",").concat(e[1]+i," A").concat(i,",").concat(i,",0,0,").concat(c,",").concat(e[0],",").concat(e[1]-i," Z"):t.reduce(function(t,e,n){return(0===n?"M":"".concat(t,"A").concat(i,",").concat(i,",0,0,").concat(c,",")).concat(e[0],",").concat(e[1])},"")):""}function Uk(t,e,n,r,i){return"circle"===e?Yk(t,n,r,i):(e=t.reduce(function(t,e,n){return"".concat(t).concat(0===n?"M":" L").concat(e[0],",").concat(e[1])},""),"".concat(e).concat(r?"Z":""))}yo($k,qk=r),$k.prototype.render=function(t,e){var n,r,i,o,a=t.items,s=void 0===a?[]:a,c=t.type,l=t.center,a=t.lineStyle,u=t.alternateColor,h=t.closed,t=s.map(function(t,e){return{id:t.id||"grid-line-".concat(e),path:Uk(t.points,c,l,h)}}),f=(n=t,r={style:a},sw(e).selectAll(".grid-line").data(n,function(t){return t.id}).join(function(t){return t.append("path").attr("className","grid-line").style("stroke","#D9D9D9").style("lineWidth",1).style("lineDash",[4,4]).each(function(t,e){this.attr(t),Dk(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),Dk(this,e,n,null==r?void 0:r.style)})},function(t){return t.remove()}),[]);if(u)for(var d=Array.isArray(u)?u:[u,"transparent"],p=0;p<s.length-1;p++){0===p&&2<s[0].points.length&&(y=Uk(s[0].points,c,l),f.push({path:y,fill:d[f.length%2]}));var y=Uk(s[p].points,c,l,h),g=Uk(s[p+1].points.slice().reverse(),c,l,h,!0),v=void 0,v=h?"".concat(y," ").concat(g):"".concat(y," L").concat(g.slice(1)," Z");f.push({path:v,fill:d[f.length%2]})}i=f,sw(e).selectAll(".grid-region").data(i,function(t,e){return e}).join(function(t){return t.append("path").attr("className","grid-region").each(function(t,e){this.attr(t),Dk(this,e,i,null==o?void 0:o.style)})},function(t){return t.each(function(t,e){this.attr(t),Dk(this,e,i,null==o?void 0:o.style)})},function(t){return t.remove()})};var qk,Xk=$k;function $k(){return null!==qk&&qk.apply(this,arguments)||this}function Zk(t,e){e?B(t,".axis-grid",function(){return new Xk({})}).attr("className","axis-grid").call(function(t){return t.node().update(e)}):(t=t.querySelector(".axis-grid"))&&t.remove()}function Kk(t,e,n,r){void 0===r&&(r=0);var t=D(t,2),i=D(t[0],2),o=i[0],i=i[1],t=D(t[1],2),a=t[0],t=t[1],e=D([e*(a-o)+o,e*(t-i)+i],2),s=e[0],e=e[1],a=uo([0,0],[Math.abs(a-o),-Math.abs(t-i)]),o=_k(n,-1,1),n=D(co([0,0],(t=a,!(i=[])?(i[0]=t[1],i[1]=-1*t[0]):(i[0]=-1*t[1],i[1]=t[0]),i),r),2),a=n[0],t=n[1];return[[s,e],[s+Kx(o,a),e+Kx(o,t)]]}function Jk(a,s,t,e,n){var c=(null==n?void 0:n.len)||0,l=t,n=e||{},u=n.formatter,t=n.tickPadding,h=void 0===t?0:t,e=n.offset,f=void 0===e?0:e,t=n.alignTick,d=void 0===t||t,e=n.rotate,p=void 0===e?0:e,y=_k(l,-1,1);return Array.from(a).map(function(t,e){var n=t.value,r=(d||(n=((e===a.length-1?1:null==(r=a[e+1])?void 0:r.value)+n)/2+(i||0)/2),D(Kk(s,n,l,c+h),2)),i=D(r[1],2),n=i[0],i=i[1],e=u?u(t,e):t.text,o=bk(l,"center",kk(l,"end","start"));return p&&(o=kk(l,"end",Ek(l,"start",Zx(Kx(y,p),"left",$x(Kx(y,p),"right"))))),{id:"label-".concat(t.id),data:t,x:n+bk(l,f,0),y:i+xk(l,f,0),text:e,textAlign:o,textBaseline:xk(l,"middle","top"===l?"bottom":"top"),transform:"rotate(".concat(p||0,"deg)")}})}Aw.registerSymbol("axis-arrow",function(t,e,n){var r=t+2*n;return[["M",t,e],["L",r,e],["L",r-n,e-n],["L",r+n,e],["L",r-n,e+n],["L",r,e]]});var Qk=ok({render:function(t,e){var n=t.startPos,r=t.endPos,i=t.verticalFactor,o=t.ticksThreshold,a=t.appendTick,s=t.axisLine,c=t.ticks,c=void 0===c?[]:c,l=t.label,l=void 0===l?{}:l,u=t.tickLine,h=t.subTickLine,f=t.title,t=t.grid,n=[n||[0,0],r||[0,0]],r=D(n,2),d=D(r[0],2),p=d[0],d=d[1],r=D(r[1],2),y=r[0],r=r[1],g=uo([0,0],[y-p,r-d]),g=(void 0===(g=g)&&(g=[0,0]),void 0===(i=i||1)&&(i=1),Math.abs(g[0])>Math.abs(g[1])?1===i?"bottom":"top":-1===i?"left":"right"),i=Lk(c,o,a);Zk(e,t);Vk(B(e,".axis-line-group","g").attr("className","axis-line-group").node(),"M".concat(p,",").concat(d," L").concat(y,",").concat(r),n,s);c=B(e,".axis-tick-group","g").attr("className","axis-tick-group").node();v=n,m=g,b=(null==u?void 0:u.len)||0;Bk(c,Array.from(i).map(function(t){var e=D(Kk(v,t.value,m,b),2),n=D(e[0],2),r=n[0],n=n[1],e=D(e[1],2);return{x1:r,y1:n,x2:e[0],y2:e[1],id:"tick-".concat(t.id),data:t}}),u);var v,m,b,o="axis-subtick-group",a=B(e,".".concat(o),"g").attr("className",o).node();x=i,w=n,k=g,E=null==h?void 0:h.count,_=null==h?void 0:h.len,void 0===E&&(E=0),void 0===_&&(_=0);Bk(a,Array.from(x).map(function(a,s){return s===x.length-1?[]:Array(E).fill(null).map(function(t,e){var n=(((null==(n=x[s+1])?void 0:n.value)||1)-a.value)/(E+1),n=a.value+n*(e+1),n=D(Kk(w,n,k,_),2),r=D(n[0],2),i=r[0],r=r[1],n=D(n[1],2),o=n[0],n=n[1];return{id:"sub-".concat(a.id,"-").concat(e),x1:i,y1:r,x2:o,y2:n}})}).flat(),h,"sub");var x,w,k,E,_,M,S,T,t="axis-label-group",p=B(e,".".concat(t),"g").attr("className",t).node(),d=(Wk(p,Jk(i,n,g,l,u),l),p.querySelectorAll(".axis-label")),y=p.querySelectorAll(".axis-tick"),r=(Ik(l,g)(d),jk(d,y,null==l?void 0:l.autoHideTickLine),D(c.getBounds().halfExtents,2)),o=r[0],a=r[1],h=D(p.getBounds().halfExtents,2),t=h[0],i=h[1],d=+((null==(u=null==s?void 0:s.style)?void 0:u.lineWidth)||0),l=(y=g,l=2*(o+t)+d,c=2*(a+i)+d,r=f,h=(p=D(p=n,2))[0],p=p[1],s=(h=D(h,2))[0],h=h[1],u=(p=D(p,2))[0],p=p[1],g=Math.min(s,u),o=Math.max(s,u),t=Math.min(h,p),a=Math.max(h,p),i=g,d=t,M=n=0,S="bottom",T="start","left"===y||"right"===y?(n=l+((null==r?void 0:r.titlePadding)||0),"center"===(null==r?void 0:r.titleAnchor)&&(d=(h+p)/2),"end"===(null==r?void 0:r.titleAnchor)&&(d=a,S="top"),"left"===y&&(T="end",n*=-1)):(M=c+((null==r?void 0:r.titlePadding)||0),"center"===(null==r?void 0:r.titleAnchor)&&(i=(s+u)/2,T="center"),"end"===(null==r?void 0:r.titleAnchor)&&(i=o,T="end"),"top"===y&&(M*=-1),"bottom"===y&&(S="top")),void 0!==(null==r?void 0:r.positionX)&&(i=g+r.positionX,T="start"),void 0!==(null==r?void 0:r.positionY)&&(d=t+r.positionY,S="bottom"),{x:i+n,y:d+M,textAlign:T,textBaseline:S});Rk(e,l.x,l.y,l.textAlign,l.textBaseline,f)}},e.style),tE=Math.PI,eE=Math.abs,nE=Math.cos,rE=Math.sin,iE=D([2*tE],1)[0];function oE(t,e,n,r,i){void 0===i&&(i=0);var t=D(t,2),o=t[0],t=t[1],n=n*Jx,a=e*nE(n),s=e*rE(n),r=_k(r,-1,1);return[[o+a,t+s],[o+(e+Kx(r,i))*nE(n),t+(e+Kx(r,i))*rE(n)]]}function aE(t){var e;return Sg(t[0],0)?e="center":0<t[0]?e="start":t[0]<0&&(e="end"),e}function sE(t,f,d,p,y,e,g,v){void 0===v&&(v=0);var m=e,b=_k(m,-1,1),e=g.tickPadding,x=void 0===e?0:e,w=g.formatter,k=g.align,E=g.rotate;return Array.from(t).map(function(t,e){var n,r=(d-f)*t.value+f,i=v+x,o=270<=(o=r)?(o-360)%360:o,a=D(oE(y,p,r,m,i),2),a=D(a[1],2),s=a[0],a=a[1],c=w?w(t,e):t.text,l="center",u="baseline",h=[Kx(b,s-y[0]),Kx(b,a-y[1])];return"radial"===k?(u="middle",(90<=o||o<-90)&&(o+=180),l=aE(h),Sg(o,-90)&&(l=wk(m,"start","end")),Sg(o,270)&&(l=wk(m,"end","start"))):"tangential"===k?(l="center",u="bottom",0<=o&&o<180?(o+=270,e="function"==typeof(null==g?void 0:g.style)?g.style(t,e):null!=(e=null==(e=null==g?void 0:g.style)?void 0:e.fontSize)?e:14,r=D(oE(y,p,r,m,i+e),2),s=(i=D(r[1],2))[0],a=i[1]):o+=90):(o=null!=E?E:0,l=aE(h),Sg((e=h)[1],0)?n="middle":0<e[1]?n="top":e[1]<0&&(n="bottom"),u=n),{id:"label-".concat(t.id),x:s,y:a,text:c,textAlign:l,textBaseline:u,transform:"rotate(".concat((o||0).toFixed(0),"deg)"),data:t}})}var cE,lE=ok({render:function(t,e){var n=t.startAngle,n=void 0===n?0:n,r=t.endAngle,r=void 0===r?0:r,i=t.center,o=t.radius,a=t.axisLine,s=t.tickLine,c=t.subTickLine,l=t.label,l=void 0===l?{}:l,u=t.ticks,R=t.title,h=t.grid,f=t.ticksThreshold,d=t.appendTick,t=t.verticalFactor,u=Lk(void 0===u?[]:u,f,d),f=-1===t?"inside":"outside",d=(Zk(e,h),B(e,".axis-line-group","g").attr("className","axis-line-group").node());t=i,h=o,g=n/180*Math.PI,j=r/180*Math.PI,void 0===h&&(h=0),void 0===g&&(g=0),void 0===j&&(j=0),p=(t=D(t=void 0===t?[0,0]:t,2))[0],t=t[1],L=(I=D([h,h],2))[0],I=I[1],E=(_=D([p+h*nE(g),t+h*rE(g)],2))[0],_=_[1],y=(h=D([p+h*nE(j),t+h*rE(j)],2))[0],h=h[1];Vk(d,(d=eE(j-g))===iE?"M".concat(p,",").concat(t-I,", A").concat(L,",").concat(I,",0,1,1,").concat(p,",").concat(t+I,", A").concat(L,",").concat(I,",0,1,1,").concat(p,",").concat(t-I):(d=tE<d?1:0,j=j<g?0:1,"M".concat(p,",").concat(t,",L").concat(E,",").concat(_,",A").concat(L,",").concat(I,",0,").concat(d,",").concat(j,",").concat(y,",").concat(h,",L").concat(p,",").concat(t)),void 0,a);var p,y,g=B(e,".axis-tick-group","g").attr("className","axis-tick-group").node();v=n,m=r,b=o,x=i,w=f,void 0===(k=null==s?void 0:s.len)&&(k=0);Bk(g,Array.from(u).map(function(t){var e=(m-v)*t.value+v,e=D(oE(x,b,e,w,k),2),n=D(e[0],2),r=n[0],n=n[1],e=D(e[1],2);return{x1:r,y1:n,x2:e[0],y2:e[1],id:"tick-".concat(t.id),data:t}}),s);var v,m,b,x,w,k,E="axis-subtick-group",_=B(e,".".concat(E),"g").attr("className",E).node();M=u,S=n,T=r,O=o,A=i,P=f,N=null==c?void 0:c.count,C=null==c?void 0:c.len,void 0===N&&(N=0),void 0===C&&(C=0);Bk(_,Array.from(M).map(function(a,s){return Array(N).fill(null).map(function(t,e){var n=(((null==(n=M[s+1])?void 0:n.value)||1+M[0].value)-a.value)/(N+1),n=a.value+n*(e+1),n=D(oE(A,O,(T-S)*n+S,P,C),2),r=D(n[0],2),i=r[0],r=r[1],n=D(n[1],2),o=n[0],n=n[1];return{id:"sub-".concat(a.id,"-").concat(e),x1:i,y1:r,x2:o,y2:n}})}).flat(),c,"sub");var M,S,T,O,A,P,N,C,L="axis-label-group",I=B(e,".".concat(L),"g").attr("className",L).node(),d=(Wk(I,sE(u,n,r,o,i,f,l,null==s?void 0:s.len),l),I.querySelectorAll(".axis-label")),j=I.querySelectorAll(".axis-tick");Ik(l,f)(d),jk(d,j,null==l?void 0:l.autoHideTickLine),Rk(e,i[0],i[1],"center","middle",R)}},vw({startAngle:-90,endAngle:270,center:[0,0],label:{tickPadding:2,style:{},align:"normal"}},e.style||{})),uE=(yo(hE,cE=lh),hE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},hE.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),t.disabled&&(this.active=!1,this.disabled=!0),this.render()},hE.prototype.setState=function(t){"disabled"===t?(this.active=!1,this.disabled=!0):this.disabled=!1,this.render()},hE.prototype.render=function(){var t=this.style,e=t.size,e=void 0===e?8:e,n=t.symbol,r=t.markerStyle,t=t.backgroundStyle,i=D(Qx(this.style.margin),4),o=i[0],a=i[1],s=i[2],i=i[3],c=D(Qx(this.style.padding),4),l=c[0],u=c[1],h=c[2],c=c[3],u=(e-u-c)/2,h=(e-l-h)/2,a=(B(this,".container","rect").attr("className","container").style("x",-(u+c+i)).style("y",-(h+l+o)).style("width",e+a+i).style("height",e+o+s).style("fill","transparent").style("cursor",this.disabled?"not-allowed":"pointer").style("zIndex",1),t||{}),i=a.active,o=a.disabled,s=N(a,["active","disabled"]),t=(B(this,".background","rect").attr("className","background").style("x",-(u+c)).style("y",-(h+l)).style("width",e).style("height",e).call(L,s).call(L,this.active?i:{}).call(L,this.disabled?o:{}),"function"==typeof n?n:hE.getSymbol(n||"")),a=r||{},c=a.active,l=a.disabled,e=N(a,["active","disabled"]);B(this,".marker","path").attr("className","marker").style("x",0).style("y",0).style("path",null==t?void 0:t(0,0,Math.min(u,h))).call(L,e).call(L,this.active?c:{}).call(L,this.disabled?l:{})},hE.prototype.bindEvents=function(){var e=this,n=sw(this).select(".marker"),r=sw(this).select(".background");sw(this).on("pointerup",function(){e.disabled||(e.active=!0)}),sw(this).on("pointermove",function(){var t;e.disabled||(e.active=!0,L(n,null==(t=e.style.markerStyle)?void 0:t.active),L(r,null==(t=e.style.backgroundStyle)?void 0:t.active))}),sw(this).on("pointerout",function(){e.disabled||(e.active=!1,L(n,Hg(e.style.markerStyle||{},["active"])),L(r,Hg(e.style.backgroundStyle||{},["active"])))})},hE.MARKER_SYMBOL_MAP=new Map,hE.registerSymbol=function(t,e){hE.MARKER_SYMBOL_MAP.set(t,e)},hE.getSymbol=function(t){return hE.MARKER_SYMBOL_MAP.get(t)},hE);function hE(t){t=cE.call(this,t)||this;return t.active=!1,t.disabled=!1,t.disabled=t.style.disabled||!1,t}uE.registerSymbol("timeline-prev-button",function(t,e,n){return[["M",t+n,e+n],["L",t,e],["L",t+n,e-n],["M",t,e+n],["L",t-n,e],["L",t,e-n]]}),uE.registerSymbol("timeline-next-button",function(t,e,n){return[["M",t,e+n],["L",t+n,e],["L",t,e-n],["M",t-n,e+n],["L",t,e],["L",t-n,e-n]]}),uE.registerSymbol("timeline-play-button",function(t,e,n){return[["M",t+2,e+3],["L",t+2,e-3],["M",t-2,e+3],["L",t-2,e-3]]}),uE.registerSymbol("timeline-stop-button",function(t,e,n){return[["M",t+3,e],["L",t-1.5,e-1.5*Math.sqrt(3)],["L",t-1.5,e+1.5*Math.sqrt(3)],["Z"]]});var Q={margin:[2,4],markerStyle:{stroke:"#bfbfbf",active:{stroke:"#3471F9"}},backgroundStyle:{fill:"transparent"}},fE={x:0,y:0,data:[],width:500,height:40,selection:[0,0],orient:"horizontal",singleModeControl:{width:56,size:12,labelStyle:{text:"单一时间",fontSize:10,dx:4}},speedControl:{width:32,markerSize:4,speeds:[1,2,3,4,5],labelStyle:{fontFamily:"sans-serif",fill:"rgba(0,0,0,0.45)",fontStyle:"normal",fontWeight:500,fontSize:10,textBaseline:"top"},formatter:function(t){return"".concat(t.toFixed(1),"x")}},controlPosition:"bottom",controlButton:{spacing:14,prevBtn:M(M({},Q),{symbol:"timeline-prev-btn",padding:0,size:8}),nextBtn:M(M({},Q),{symbol:"timeline-next-btn",padding:0,size:8}),playBtn:{margin:4,padding:0,size:20,symbol:"",markerStyle:{stroke:"#bfbfbf",fill:"#bfbfbf",active:{stroke:"#3471F9",fill:"#3471F9"}},backgroundStyle:{stroke:"#bfbfbf",lineWidth:1,fill:"#F7F7F7",active:{fill:"rgba(52, 113, 249, 0.1)",stroke:"#3471F9"}}}},padding:[0,8],playAxis:{appendPadding:[4,0],handleStyle:{r:3,lineWidth:1},label:{position:1,tickPadding:2,tickLine:{len:4,style:{stroke:"rgba(0,0,0,0.25)",lineWidth:1}},style:{fontSize:10,fillOpacity:1,fill:"rgba(0,0,0,0.45)"}},loop:!1},playInterval:2e3,autoPlay:!1},dE=P({},{x:0,y:0,data:[],length:120,orient:"horizontal",selection:0,selectionStyle:{fill:"#5B8FF9",fillOpacity:.15},loop:!1,playInterval:1e3},fE.playAxis),pE={axisLine:null,label:{autoRotate:!1,rotate:0,autoHide:!0,autoHideTickLine:!1,autoEllipsis:!0,minLength:50,alignTick:!0}};function yE(t,e){void 0===t&&(t=[]);var t=D(Array.of(t).flat(),2),n=t[0],n=void 0===n?0:n,t=t[1];return e?[n,n]:[n,void 0===t?n:t]}yo(vE,gE=lh),vE.prototype.update=function(t){var e=P({},this.attributes,t=void 0===t?{}:t),t=(t.selection&&(this.selection=yE(t.selection,e.singleMode)),t.singleMode&&(this.selection=yE(e.selection,t.singleMode)),this.playTimer);t&&this.stop(),this.attr(e),this.render(),t&&this.play()},vE.prototype.play=function(){var r=this,t=this.style,e=t.data,i=t.loop,o=t.singleMode,a=t.playMode,s=e.length,t=this.style.playInterval;fg(t)&&(t=dE.playInterval),this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(function(){var t,e,n;!i&&r.selection[1]>=s-1?r.stop(!0):o?(t=(r.selection[0]+1)%s,r.setSelection({start:t,end:t})):(t=r.selection[0],n=r.selection[1],e=r.selection[1]-r.selection[0],n=s-1<=n?"increase"===a?t:(t=0,e):("increase"!==a&&(t=(t+1)%s),(n+1)%s),r.setSelection({start:t,end:n}))},t)},vE.prototype.stop=function(t){clearInterval(this.playTimer),this.playTimer=void 0,t&&this.dispatchEvent(new Gu("timelineStopped",{selection:this.selection}))},vE.prototype.prev=function(){var t,e=D(this.selection,2),n=e[0],e=e[1],r=this.style.data.length,r=r&&this.style.singleMode?t=(n-1+r)%r:0===n?(t=r-(e-n)-1,r-1):(t=n-1,e-1);this.setSelection({start:null!=t?t:this.selection[0],end:null!=r?r:this.selection[1]})},vE.prototype.next=function(){var t,e=D(this.selection,2),n=e[0],e=e[1],r=this.style.data.length,r=r&&this.style.singleMode?t=(n+1)%r:e===r-1?(t=0,e-n):(t=n+1,e+1);this.setSelection({start:null!=t?t:this.selection[0],end:null!=r?r:this.selection[1]})},vE.prototype.getSelection=function(){return this.selection},Object.defineProperty(vE.prototype,"orient",{get:function(){return this.style.orient||"horizontal"},enumerable:!1,configurable:!0}),vE.prototype.ifH=function(t,e){return"horizontal"===this.orient?"function"==typeof t?t():t:"function"==typeof e?e():e},vE.prototype.destroy=function(){gE.prototype.destroy.call(this),this.playTimer&&clearInterval(this.playTimer),this.playTimer=void 0};var gE,i=vE;function vE(){var t=null!==gE&&gE.apply(this,arguments)||this;return t.selection=[0,0],t}function mE(t,e){return new X1({domain:t.map(function(t,e){return e}),range:e,padding:.1})}function bE(t,e,n){n=mE(n,[0,e]).getStep(),e=0<t?Math.ceil:Math.floor;return 0<n?e(t/n):0}function xE(t,e,n){return mE(n,[0,e]).map(t)}yo(EE,wE=i),EE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(EE.prototype,"styles",{get:function(){return P({},EE.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),EE.prototype.setSelection=function(t){var e,n,r=t.start,t=t.end,i=this.styles,o=i.data,o=void 0===o?[]:o,i={duration:i.playInterval/2,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",fill:"both"},a=this.ifH("cx","cy"),s=sw(this).select(".slider-start-handle").node();void 0!==r&&(n=xE(r,this.style.length,o),this.startHandleAnimation=s.animate([((e={})[a]=s.style[a],e),((s={})[a]=n,s)],i)),void 0!==t&&(e=sw(this).select(".slider-end-handle").node(),n=xE(t,this.style.length,o),this.endHandleAnimation=e.animate([((s={})[a]=e.style[a],s),((o={})[a]=n,o)],i)),this.selection=[null!=r?r:this.selection[0],null!=t?t:this.selection[1]],this.dispatchEvent(new Gu("selectionChanged",{detail:{selection:this.selection}}))},EE.prototype.render=function(){var e=this,n=this.styles,t=D(this.ifH([n.length,n.size],[n.size,n.length]),2),r=t[0],i=t[1],t=B(this,".slider-background","line").attr("className","slider-background").style("x1",0).style("y1",0).style("x2",this.ifH(r,0)).style("y2",this.ifH(0,i)).style("lineWidth",n.size).style("lineCap","round").style("stroke",null==(t=n.backgroundStyle)?void 0:t.fill).style("strokeOpacity",null==(t=n.backgroundStyle)?void 0:t.fillOpacity).node(),o=mE(n.data,[0,1]),a=D(this.selection.map(function(t){return o.map(t)}),2),s=a[0],s=void 0===s?0:s,a=a[1],a=void 0===a?s:a,c=this.ifH(s*r,0),l=this.ifH(a*r,0),s=this.ifH(0,s*i),a=this.ifH(0,a*i),u=(B(t,".slider-selection","line").attr("className","slider-selection").style("x1",c).style("y1",s).style("x2",l).style("y2",a).style("lineWidth",n.size).style("lineCap","round").style("stroke",null==(h=n.selectionStyle)?void 0:h.fill).style("strokeOpacity",null==(h=n.selectionStyle)?void 0:h.fillOpacity).style("visibility",n.singleMode?"hidden":"visible").call(L,n.selectionStyle),"running"===(null==(h=this.startHandleAnimation)?void 0:h.playState)&&this.startHandleAnimation.pause(),B(t,".slider-start-handle","circle").attr("className","slider-start-handle").style("cx",c).style("cy",s).call(L,n.handleStyle),"paused"===(null==(h=this.startHandleAnimation)?void 0:h.playState)&&this.startHandleAnimation.play(),"running"===(null==(c=this.endHandleAnimation)?void 0:c.playState)&&this.endHandleAnimation.pause(),B(t,".slider-end-handle","circle").attr("className","slider-end-handle").style("cx",l).style("cy",a).style("visibility",n.singleMode?"hidden":"visible").call(L,n.handleStyle),"paused"===(null==(s=this.endHandleAnimation)?void 0:s.playState)&&this.endHandleAnimation.play(),n.data.map(function(t,e){return{value:o.map(e),text:t.date}})),h=n.label||{},c=h.position,f=void 0===c?-1:c,d=h.tickLine,p=N(h,["position","tickLine"]);B(t,".slider-axis",function(){return new Qk({className:"slider-axis"})}).call(function(t){return t.node().update(P({},pE,{startPos:[f*e.ifH(0,r+2),f*e.ifH(i+2,0)],endPos:[e.ifH(r,0)+f*e.ifH(0,r+2),e.ifH(0,i)+f*e.ifH(i+2,0)],ticks:u,verticalFactor:f,tickLine:null===n.label?null:d,label:null===n.label?null:p}))})},EE.prototype.bindEvents=function(){var t=sw(this).select(".slider-background"),r=(this.dragHandle(t,"start"),this.dragHandle(t,"end"),this.dragSelection(t),t.select(".slider-selection").node()),e=t.select(".slider-start-handle").node(),t=t.select(".slider-end-handle").node();e.addEventListener(S.ATTR_MODIFIED,function(t){var e=t.attrName,n=t.newValue;t.prevValue,"cx"!==e&&"cy"!==e||(t=parseFloat(n)||0,r.style["cx"===e?"x1":"y1"]=t)}),t.addEventListener(S.ATTR_MODIFIED,function(t){var e=t.attrName,n=t.newValue;t.prevValue,"cx"!==e&&"cy"!==e||(t=parseFloat(n)||0,r.style["cx"===e?"x2":"y2"]=t)})},EE.prototype.dragHandle=function(n,o){function t(t){var e,n,r,i;l&&(l=!1,t=bE(s?c.ifH(t.x-s[0],t.y-s[1]):0,c.style.length,c.style.data),s=void 0,e=(n=D(c.selection,2))[0],n=n[1],r=c.style.data.length-1,"start"===o?e===n&&0<t?(i=Eg(0,e+t,r),c.setSelection({start:i,end:i})):c.setSelection({start:Eg(e+t,0,n)}):e===n&&t<0?(i=Eg(0,n+t,r),c.setSelection({start:i,end:i})):c.setSelection({end:Eg(n+t,e,r)}),c.playTimer&&c.play())}var a,s,c=this,l=!1;n.on("pointerdown",function(t){c.playTimer&&clearInterval(c.playTimer);var e=n.select(".slider-".concat(o,"-handle")).node();t.target===e&&(l=!0,s=[t.x,t.y],a=[t.x,t.y])}.bind(this)).on("pointerup",t).on("mouseupoutside",t).on("touchendoutside",t).on("pointermove",function(t){var e,n,r,i;l&&(e=c.styles.length,n=sw(c).select(".slider-".concat(o,"-handle")).node(),r=c.ifH(t.x-a[0],t.y-a[1]),i=n.getLocalPosition(),"vertical"===c.orient?n.style.cy=Eg(i[1]+r,0,e):n.style.cx=Eg(i[0]+r,0,e),a=[t.x,t.y])})},EE.prototype.dragSelection=function(t){function e(t){c.playTimer&&clearInterval(c.playTimer),t.target===o&&(h=!0,i=[t.x,t.y],s=[t.x,t.y])}function n(t){var e;h&&(h=!1,t=bE(i?c.ifH(t.x-i[0],t.y-i[1]):0,c.style.length,c.style.data),i=void 0,e=c.selection[1]-c.selection[0],t=Eg(c.selection[1]+t,e,c.style.data.length-1),c.setSelection({start:t-e,end:t}),c.playTimer&&c.play())}function r(t){var e,n,r,i,o,a;h&&(e=c.styles.length,n=c.ifH(t.x-s[0],t.y-s[1]),r=(a=D(l.getLocalPosition(),2))[0],a=a[1],i=(o=D(u.getLocalPosition(),2))[0],o=o[1],"vertical"===c.orient?(l.style.cy=Eg(a+n,0,e-(o=o-a)),u.style.cy=l.style.cy+o):(a=i-r,l.style.cx=Eg(r+n,0,e),u.style.cx=l.style.cx+a),s=[t.x,t.y])}var s,i,c=this,o=t.select(".slider-selection").node(),l=t.select(".slider-start-handle").node(),u=t.select(".slider-end-handle").node(),h=!1;t.on("mousedown",e.bind(this)).on("touchstart",e.bind(this)).on("mouseup",n.bind(this)).on("mouseupoutside",n.bind(this)).on("touchend",n.bind(this)).on("touchendoutside",n.bind(this)).on("mousemove",r.bind(this)).on("touchmove",r.bind(this))},EE.defaultOptions={style:P({},dE,{tag:"slider-axis",size:3,handleStyle:{r:3,stroke:"#8AADF3",strokeOpacity:.75,lineWidth:1,fill:"#fff",fillOpacity:1},backgroundStyle:{fill:"#416180",fillOpacity:.1},selectionStyle:{cursor:"grabbing"}})};var wE,kE=EE;function EE(t){t=wE.call(this,P({},EE.defaultOptions,t))||this;return t.startHandleAnimation=null,t.endHandleAnimation=null,t.selection=yE(t.style.selection,t.style.singleMode),t}function _E(t,e){return new R1({domain:t.map(function(t,e){return e}),range:e,paddingOuter:0,paddingInner:0})}yo(TE,ME=i),TE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(TE.prototype,"styles",{get:function(){return P({},TE.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),TE.prototype.setSelection=function(t){var e,n=D(this.selection,2),r=n[0],n=n[1];this.selection=yE([null!=(e=t.start)?e:r,null!=(e=t.end)?e:n],this.style.singleMode),this.dispatchEvent(new Gu("selectionChanged",{detail:{selection:this.selection}})),this.render()},TE.prototype.render=function(){var i=this,r=this.styles,o=r.size,a=r.spacing,t=D(this.ifH(["x","y","width","height"],["y","x","height","width"]),4),s=t[0],c=t[1],l=t[2],u=t[3],t=B(this,".slider-background","rect").attr("className","slider-background").style("x",0).style("y",0).style(l,r.length).style(u,o+a).call(L,r.backgroundStyle).node(),h=this.getCellScale(),f=h.getBandWidth(),e=r.data.map(function(t,e){var n;return M(((n={})[s]=h.map(e),n[c]=a/2,n[l]=f-r.cellGap,n[u]=o,n),r.cellStyle)}),e=(sw(t).selectAll(".cell").data(e).join(function(t){return t.append("rect").attr("className","cell").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()}),e.filter(function(t,e){var n=D(i.selection,2),r=n[0],n=n[1];return r<=e&&e<=n}).map(function(t){return M(M({},t),r.selectionStyle)})),n={duration:this.style.playInterval/2,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",fill:"both"},d=(sw(t).selectAll(".selected-cell").data(e).join(function(t){return t.append("rect").attr("className","selected-cell").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.animate([t],n)})},function(t){return t.remove()}),r.length-2*r.spacing+r.cellGap),p=_E(r.data,[0,d]),y=r.data.map(function(t,e){return{value:(p.map(e)+(f-r.cellGap)/2)/d,text:t.date}}),e=r.label||{},g=e.position,v=void 0===g?-1:g,m=e.tickLine,b=N(e,["position","tickLine"]),g=-1===v?-2:r.spacing+o+2,x=[r.spacing,g],w=[a+d,g];"vertical"===this.orient&&(x=[x[1],x[0]],w=[w[1],w[0]]),B(t,".slider-axis",function(){return new Qk({className:"slider-axis",style:pE})}).call(function(t){return t.node().update({startPos:x,endPos:w,ticks:y,verticalFactor:v,tickLine:null===r.label?null:m,label:null===r.label?null:b})})},TE.prototype.bindEvents=function(){this.dragSelection()},TE.prototype.getCellScale=function(){var t=this.styles.cellGap,e=this.styles.length,n=this.styles.spacing;return _E(this.style.data,[n,e-n+t])},TE.prototype.dragSelection=function(){function t(){r=!1,i.playTimer&&i.play()}var n,i=this,o=sw(this).select(".slider-background"),r=!1,a=this.styles.spacing,s=function(t){var e=D(o.node().getPosition(),2),n=e[0],e=e[1],n=i.ifH(n+4,e+a),e=i.styles.cellGap,r=i.getCellScale().getStep();return Math.floor((t-n+e)/r)};o.on("pointerdown",function(t){i.playTimer&&clearInterval(i.playTimer),r=!0,n=i.ifH(t.x,t.y);t=s(n);i.setSelection({start:t,end:t})}).on("pointerup",t).on("mouseupoutside",t).on("touchendoutside",t).on("pointermove",function(t){var e;r&&(t=s(i.ifH(t.x,t.y)),e=(t=D((e=n?s(n):t)<t?[e,t]:[t,e],2))[0],t=t[1],i.setSelection({start:e,end:t}))})},TE.defaultOptions={style:P({},dE,{tag:"cell-axis",backgroundStyle:{fill:"#416180",fillOpacity:.05},size:16,spacing:4,cellGap:2,cellStyle:{fill:"#416180",fillOpacity:.1},selectionStyle:{fillOpacity:.45},label:{autoHideTickLine:!0}})};var ME,SE=TE;function TE(t){t=ME.call(this,P({},TE.defaultOptions,t))||this;return t.selection=yE(t.style.selection,t.style.singleMode),t}function OE(t,e){return[1.43,2.79,4.89,7.57,11.66][t]/11.66*e}var AE,f=P({},fE.speedControl,{markerFill:"#8c8c8c",spacing:1,lineStyle:{stroke:"#bfbfbf",lineWidth:1}}),PE=(yo(NE,AE=lh),NE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},NE.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),this.render()},Object.defineProperty(NE.prototype,"styles",{get:function(){return P({},NE.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),NE.prototype.render=function(){var t=this.styles,e=t.initialSpeed,n=t.markerSize,r=t.markerFill,i=t.lineStyle,o=t.speeds,a=t.labelStyle,s=t.spacing,t=t.formatter,t=void 0===t?function(t){return"".concat(t)}:t,e=o.indexOf(e),c=2*n,l=OE(e=-1===e?0:e,2*c),u=n*Math.tan(Math.PI/6)*2,r=(B(this,".speed-marker","path").attr("className","speed-marker").style("fill",r).style("path",[["M",0,l-u/2],["L",n,l],["L",0,l+u/2],["Z"]]),n-.5),l=B(this,".line-group","rect").attr("className","line-group").style("x",r).style("y",0).style("width",c).style("height",2*c).style("cursor","pointer").style("fill","transparent").node(),u=o.reduce(function(t,e,n){n=OE(n,2*c);return t.push(["M",0,n],["L",c,n]),t},[]);B(l,".speed-path","path").attr("className","speed-path").style("path",u).call(L,i),B(this,".speed-label","text").attr("className","speed-label").style("x",r+c+s).style("y",2).style("text",t(o[e])).call(L,a)},NE.prototype.bindEvents=function(){var e=this,t=this.querySelector(".line-group");t.addEventListener("pointerdown",function(t){return e.onClick(t)}),t.addEventListener("touchmove",function(t){return e.onClick(t)})},NE.prototype.onClick=function(t){var o,e=this.styles,a=e.speeds,n=e.markerSize,e=e.formatter,e=void 0===e?function(t){return"".concat(t)}:e,s=2*n*2,n=this.querySelector(".line-group"),r=sw(this).select(".speed-label").node(),i=sw(this).select(".speed-marker").node();t.currentTarget===n&&(o=t.y-n.getBBox().y,-1!==(t=a.findIndex(function(t,e){var n=OE(e,s),r=OE(e-1,s),i=OE(e+1,s);return 0===e?o<n+(OE(1,s)-n)/2:e===a.length-1?n-(n-r)/2<o:(e=[n-(n-r)/2,n+(i-n)/2])[0]<=o&&o<e[1]}))&&(r.setAttribute("text",e(a[t])),i.setLocalPosition(0,OE(t,s)-s/8),this.dispatchEvent(new Gu("speedChanged",{detail:{speed:a[t]}}))))},NE.tag="speed-control",NE.defaultOptions={style:f},NE);function NE(t){return AE.call(this,P({},NE.defaultOptions,t))||this}yo(jE,CE=lh),jE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(jE.prototype,"styles",{get:function(){return P({},jE.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),jE.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),fg(t.active)||(this.active=t.active),this.render()},jE.prototype.render=function(){var t,e=this.styles,n=e.size,r=e.buttonStyle,i=e.labelStyle,e=e.symbol,o=r.active,r=N(r,["active"]),r=B(this,".button","rect").attr("className","button").style("x",0).style("y",0).style("width",n).style("height",n).call(L,r).call(L,this.active?o:{}).node();B(r,".symbol","path").attr("className","symbol").style("x",n/2).style("y",n/2).style("path",[["M",(o=n/2)-(t=r=n/2)/7*4,r-t/14],["L",o-t/7,r+t/7*3],["L",o+t/7*4,r-t/7*3]]).style("lineWidth",1).style("lineCap","round").style("stroke","transparent").style("cursor","pointer").call(L,this.active?null==e?void 0:e.active:{}),B(this,".label","text").attr("className","label").style("x",n).style("y",n/2).call(L,i)},jE.prototype.bindEvents=function(){var t=this;sw(this).select(".button").on("pointerdown",function(){t.dispatchEvent(new Gu("singleModeChanged",{detail:{active:!t.active}}))})},jE.defaultOptions={style:{size:12,buttonStyle:{fill:"transparent",stroke:"#000",strokeOpacity:.15,cursor:"pointer",lineWidth:1,radius:2,active:{stroke:"#3471F9",fill:"#3471F9",strokeOpacity:1}},symbol:{active:{stroke:"#fff"}},labelStyle:{text:"",textAlign:"left",textBaseline:"middle",fill:"#000",fillOpacity:.65},cursor:"pointer"}};var CE,LE,IE=jE;function jE(t){t=CE.call(this,P({},jE.defaultOptions,t))||this;return t.active=!1,t.active=t.style.active||!1,t}function RE(t,e,n){var r,i,o,a,s,n=P({},fE,n),c=n.type,l=n.playAxis,u=n.controlButton,h=n.speedControl,f=n.singleModeControl,d=(null==(d=null==l?void 0:l.label)?void 0:d.position)||-1,p=null!=(p=null==l?void 0:l.spacing)?p:(null==(p=null==(p=SE.defaultOptions)?void 0:p.style)?void 0:p.spacing)||0,y=(null==l?void 0:l.size)||("cell"===c?null==(y=null==(y=SE.defaultOptions)?void 0:y.style)?void 0:y.size:null==(y=null==(y=kE.defaultOptions)?void 0:y.style)?void 0:y.size)||4,p=(y+="cell"===c?p:0,D(Qx(null==l?void 0:l.appendPadding),4)),g=p[0],v=p[1],m=p[2],p=p[3],b=(null==u?void 0:u.spacing)||0,x=Cg(u)||Cg(null==u?void 0:u.playBtn)?0:null==(x=null==u?void 0:u.playBtn)?void 0:x.size,w=Cg(u)||Cg(null==u?void 0:u.prevBtn)?0:null==(w=null==u?void 0:u.prevBtn)?void 0:w.size,u=Cg(u)||Cg(null==u?void 0:u.nextBtn)?0:null==(u=null==u?void 0:u.nextBtn)?void 0:u.size,k=x/2+w/2+b,E=x/2+u/2+b,_=null===h?0:null==h?void 0:h.markerSize,M=2*_,h=null===h?0:null==h?void 0:h.width,S=2*M+_/2,T=null===f?0:null==f?void 0:f.width,f=null===f?0:(null==f?void 0:f.size)+2;return"vertical"===n.orient?{axis:{x:(n=p+(-1===d?30:0))+("cell"===c?0:y/2),y:i=(r=w+b+x/2)+x/2+b+g,length:(o=(s=(a=e-f)-4-S)-b-u/2)-b-u/2-m-i},prevBtn:{x:i=n+y/2,y:w/2,size:w},playBtn:{x:i,y:r,size:x},nextBtn:{x:i,y:o,size:u},speedControl:{x:n-h/2,y:s,size:h},singleModeControl:{x:0,y:a}}:(i=(r=e-T)-8-h,o=l,s=(o=P({},fE.playAxis,o).label)?((null==(n=o.tickLine)?void 0:n.len)||0)+(o.tickPadding||0)+(Number(o.style.fontSize)||0)+2:0,a=(-1===d?s:0)+("cell"===c?0:y/2)+g,"bottom"===t?{axis:{x:p,y:a,length:e-(p+v)},playBtn:{x:T=e/2,y:l=a+(1===d?s:0)+y+x/2+m,size:x},prevBtn:{x:T-k,y:l,size:w},nextBtn:{x:T+E,y:l,size:u},speedControl:{x:i,y:n=a+(1===d?s:0)+y+m,size:h},singleModeControl:{x:r,y:n+M-f/2}}:(g="cell"===c?a+y/2:a,e="cell"===c&&-1===d?s+y-S:1===d?a+_/2:a-S,"left"===t?{axis:{x:n=(m=(l=(T=w/2)+k)+E)+u/2+p,y:a,length:i-v-n},prevBtn:{x:T,y:g,size:w},playBtn:{x:l,y:g,size:x},nextBtn:{x:m,y:g,size:u},speedControl:{x:i,y:e,size:h},singleModeControl:{x:r,y:e+M-f/2}}:{axis:{x:p,y:a,length:(y=(s=(c=i-(u/2+b))-E)-k)-w/2-v-p},playBtn:{x:s,y:g,size:x},prevBtn:{x:y,y:g,size:w},nextBtn:{x:c,y:g,size:u},speedControl:{x:i,y:e,size:h},singleModeControl:{x:r,y:e+M-f/2}}))}function DE(t){t=LE.call(this,P({},{style:fE},t))||this;return t.speed=1,t.singleMode=!1,t.playing=!1,t.selection=[0,0],t.singleMode=t.style.singleMode||!1,t.selection=yE(t.style.selection,t.singleMode),t}function BE(t){var e,n={left:0,top:0,width:0,height:0};return"html"===(null==t?void 0:t.tagName)?n={left:0,top:0,width:(e=t.style).width,height:e.height}:t&&(t=(e=t.getLocalBounds()).min,e=e.halfExtents,n={left:t[0],top:t[1],width:2*e[0],height:2*e[1]}),{left:0,top:0,right:n.width,bottom:n.height}}function FE(t,n){var r,e,i,o;return n?(r=n.useHTML,e=n.style,i="legend-title ".concat(r?"html":"text","-title"),o="<span>".concat((null==n?void 0:n.content)||"","</span>"),B(t,".".concat(i),function(){return r?new yh({className:i,style:{innerHTML:o}}):new Ah({className:i,style:e})}).call(function(t){var e;r?t.style("width",null!=(e=n.width)?e:80).style("height",null!=(e=n.height)?e:20).style("innerHTML",o):t.style("fontSize",12).style("textBaseline","top").style("text",n.content||"")}).call(L,e).node()):((t=t.querySelector(".legend-title"))&&t.remove(),null)}function zE(t,e,n,r){return B(t,".".concat(e),"g").attr("className",e).style("x",n).style("y",r).node()}function GE(t,e,n,r,i){B(t,".".concat(e),"rect").attr("className",e).style("zIndex",-1).style("width",n).style("height",r).call(L,i||{}).node()}yo(DE,LE=lh),DE.prototype.connectedCallback=function(){this.render(),this.bindEvents()},DE.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),void 0!==t.singleMode&&(this.singleMode=t.singleMode),t.selection&&(this.selection=yE(t.selection,this.singleMode)),this.render()},Object.defineProperty(DE.prototype,"styles",{get:function(){return P({},fE,this.attributes)},enumerable:!1,configurable:!0}),DE.prototype.render=function(){var e=this,t=this.styles,n=t.width,r=t.height,i=t.controlPosition,o=t.speedControl,a=t.singleModeControl,t=D(Qx(this.styles.padding),4),s=t[0],s=void 0===s?0:s,c=t[1],c=void 0===c?0:c,l=t[2],t=t[3],t=void 0===t?c:t,u=B(this,".container","g").attr("className","container").style("x",t).style("y",s).node(),h=RE(i,"vertical"===this.style.orient?r-(s+l):n-(t+c),this.styles);this.renderAxis(u,h),this.renderControlButton(u,h),B(u,".timeline-speed-control",function(){return new PE({})}).attr("className","timeline-speed-control").call(function(t){null===o?t.remove():t.node().update(M(M({x:h.speedControl.x,y:h.speedControl.y},o),{initialSpeed:e.speed}))}),B(u,".timeline-single-control",function(){return new IE({})}).attr("className","timeline-single-control").call(function(t){null===a?t.remove():t.node().update(M(M({x:h.singleModeControl.x,y:h.singleModeControl.y},a),{active:e.singleMode}))})},DE.prototype.renderAxis=function(t,e){var n=this,r=this.styles.data,i=this.styles.type||"slider",o=sw(t).select(".timeline-axis").node(),a="cell"===i?SE:kE;o&&o.style.tag!=="".concat(i,"-axis")&&(o.remove(),this.removeChild(o)),B(t,".timeline-axis",function(){return new a({})}).attr("className","timeline-axis").call(function(t){t.node().update(M({x:e.axis.x,y:e.axis.y,length:e.axis.length,data:r,selection:n.selection,orient:n.style.orient,playInterval:n.style.playInterval/n.speed,singleMode:n.singleMode},n.style.playAxis||{})),t.node().update({handleStyle:{cursor:"vertical"===n.style.orient?"ns-resize":"ew-resize"}})}).node()},DE.prototype.renderControlButton=function(t,n){var e,r=this,i=n.playBtn.size||0,o=n.prevBtn.size||0,a=(null==(e=n.nextBtn)?void 0:e.size)||0;B(t,".timeline-prev-btn",function(){return new uE({})}).attr("className","timeline-prev-btn").call(function(t){var e;o?(t.node().update(M(M({},(null==(e=r.style.controlButton)?void 0:e.prevBtn)||{}),{x:n.prevBtn.x,y:n.prevBtn.y,size:o,symbol:"timeline-prev-button"})),t.node().update({markerStyle:{transformOrigin:"center",transform:"vertical"===r.style.orient?"rotate(90deg)":""}})):t.remove()}),B(t,".timeline-play-btn",function(){return new uE({})}).attr("className","timeline-play-btn").call(function(t){var e;i?(t.node().update({backgroundStyle:{radius:(n.playBtn.size||0)/2}}),t.node().update(M(M({},(null==(e=r.style.controlButton)?void 0:e.playBtn)||{}),{x:n.playBtn.x,y:n.playBtn.y,size:i,symbol:r.playing?"timeline-play-button":"timeline-stop-button"}))):t.remove()}),B(t,".timeline-next-btn",function(){return new uE({})}).attr("className","timeline-next-btn").call(function(t){var e;a?(t.node().update(M(M({},(null==(e=r.style.controlButton)?void 0:e.nextBtn)||{}),{x:n.nextBtn.x,y:n.nextBtn.y,size:a,symbol:"timeline-next-button"})),t.node().update({markerStyle:{transformOrigin:"center",transform:"vertical"===r.style.orient?"rotate(90deg)":""}})):t.remove()}),this.style.autoPlay&&!this.playing&&(this.playing=!0,sw(this).select(".timeline-axis").call(function(t){return null==(t=t.node())?void 0:t.play()}),sw(this).select(".timeline-play-btn").call(function(t){return null==(t=t.node())?void 0:t.update({symbol:"timeline-play-button"})})),!this.style.autoPlay&&this.playing&&(this.playing=!1,sw(this).select(".timeline-axis").call(function(t){return null==(t=t.node())?void 0:t.stop()}),sw(this).select(".timeline-play-btn").call(function(t){return null==(t=t.node())?void 0:t.update({symbol:"timeline-stop-button"})}))};var c={style:{x:0,y:0,padding:0,orient:"horizontal",backgroundStyle:{fill:"transparent",lineWidth:0},title:{content:"",spacing:4,align:"left",style:{fontWeight:"bold",fontFamily:"sans-serif",fontSize:12,textAlign:"top",textBaseline:"top",fill:"#2C3542"}},label:{style:{fill:"#2C3542",fillOpacity:.65,fontSize:12}}}},WE={symbol:"circle",size:8},HE={style:{inactive:{fill:"#d3d2d3",opacity:.5}}},VE={style:{inactive:{fill:"#d3d2d3",opacity:.5}}},YE=P({},c,{style:{type:"category",items:[],maxWidth:void 0,maxHeight:void 0,maxCols:void 0,maxRows:void 0,spacing:[8,2],itemBackground:{padding:0,style:{fill:"transparent",active:{cursor:"pointer"}}},reverse:!(DE.prototype.bindEvents=function(){var e=this,n=sw(this).select(".timeline-axis").node(),r=sw(this).select(".timeline-play-btn").node();r&&sw(r).on("pointerdown",function(t){e.playing?(e.playing=!1,n.stop(),r.update({symbol:"timeline-stop-button"})):(e.playing=!0,n.play(),r.update({symbol:"timeline-play-button"}))}),sw(this).on("timelineStopped",function(){e.playing=!1,null!=r&&r.update({symbol:"timeline-stop-button"})}),sw(this).on("speedChanged",function(t){e.speed=t.detail.speed,n.update({playInterval:e.style.playInterval/e.speed})}),sw(this).select(".timeline-prev-btn").on("pointerdown",function(){return n.prev()}),sw(this).select(".timeline-next-btn").on("pointerdown",function(){return n.next()}),sw(this).on("singleModeChanged",function(t){e.singleMode=t.detail.active,e.selection=yE(e.selection,e.singleMode),e.render()}),sw(this).on("selectionChanged",function(t){e.selection=t.detail.selection})}),pageNavigator:{loop:!1}}}),UE={width:100,height:20,type:"color",chunked:!1,ticks:[],isGradient:"auto",backgroundColor:"#c5c5c5"},qE={spacing:4,formatter:function(t){return String(t)},align:"rail",flush:!0,maxLength:30},XE={size:25,stroke:"#c5c5c5",fill:"#fff",lineWidth:1},$E=P({},c,{style:{type:"continuous",color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],label:qE,rail:UE,slidable:!0,indicator:{size:8,spacing:10,padding:5,backgroundStyle:{fill:"#262626","background-color":"#262626","border-radius":"5px"},text:{style:{color:"white","font-size":"12px"}}}}}),ZE="legend-item-";function KE(t,e){t&&(t.setAttribute("tip",t.style.text),null!=t&&t.attr("text",e||""))}function JE(n,t){return void 0===n&&(n={}),(t=void 0===t?"":t).split("-").reduce(function(t,e){return M(M({},t),Gg(n,e,{}))},{})}yo(e_,QE=r),e_.prototype.setState=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=new Set((this.state||"").split("-"));e?n.add(t):n.delete(t),this.state=vo([],D(n),!1).join("-"),this.update()},e_.prototype.getState=function(){return this.state},e_.prototype.update=function(t){QE.prototype.update.call(this,t=void 0===t?{}:t),t.state&&(this.state=t.state)},Object.defineProperty(e_.prototype,"styles",{get:function(){return P({},e_.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),e_.prototype.render=function(t,e){var n,r,i,o,a,s,c=this,l=this.styles,u=l.backgroundStyle,h=l.itemMarker,f=l.padding,d=l.itemName,p=l.itemValue,l=l.maxItemWidth,y=this.styles.itemHeight,f=D(Qx(f),4),g=f[0],v=f[1],m=f[2],f=f[3],b=Number((null==h?void 0:h.size)||0),x=(fg(y)&&(y=Math.max.call(null,b,Number((null==(x=null==d?void 0:d.style)?void 0:x.fontSize)||0),Number((null==(x=null==p?void 0:p.style)?void 0:x.fontSize)||0))+(g+m)),B(this,".".concat(ZE,"container"),"g").attr("className","".concat(ZE,"container")).style("x",f).style("y",y/2).node()),w=(B(x,".".concat(ZE,"marker"),function(){return new Aw({})}).attr("className","".concat(ZE,"marker")).call(function(t){h?t.node().update(M(M({x:b/2,y:0,size:b,symbol:h.symbol},h.style||{}),JE(h.style,c.state))):t.remove()}),b?b+((null==d?void 0:d.spacing)||0):0),g=B(x,".".concat(ZE,"name"),"text").attr("className","".concat(ZE,"name")).call(function(t){d?t.node().attr(M(M({x:w,y:0,tip:"",text:(null==d?void 0:d.content)||"",textBaseline:"middle",textAlign:"left"},d.style||{}),JE(d.style,c.state))):t.remove()}).node(),k=w,m=(g&&!g.destroyed&&(k=g.getLocalBounds().max[0]),B(x,".".concat(ZE,"value"),"text").attr("className","".concat(ZE,"value")).call(function(t){p?t.node().attr(M(M(M({x:k+(p.spacing||0),y:0,tip:"",text:(null==p?void 0:p.content)||"",textAlign:"left"},p.style||{}),JE(p.style,c.state)),{textBaseline:"middle"})):t.remove()}).node()),E=(fg(l)||(g=null!=g&&g.destroyed?null:g,m=null!=m&&m.destroyed?null:m,n=l-w-(f+v),(g||m)&&"number"==typeof n&&(Number(n)<=0?(KE(g,""),KE(m,"")):g&&m?(a=g.getLocalBounds(),i=m.getLocalBounds(),n<(r=2*a.halfExtents[0])+(E=2*i.halfExtents[0])+(i=r&&E?i.min[0]-a.max[0]:0)&&(o=(a=D([.5*n,.5*n],2))[0],a=a[1],s=_=!0,r<=o?(a=n-(r+i),_=!1):E<=a&&(o=n-(E+i),s=!1),_&&(KE(g,Gx(g.style.text,o,Vx(g))),m.attr("x",Number(g.style.x)+o+i)),s&&KE(m,Gx(m.style.text,a,Vx(m))))):n<2*(r=g||m).getLocalBounds().halfExtents[0]&&KE(r,Gx(r.style.text,n,Vx(r))))),x.getLocalBounds()),_=Math.max(2*E.halfExtents[0]+v+f,this.styles.itemWidth||0);fg(l)||(_=Math.min(l,_)),B(this,".".concat(ZE,"background"),"rect").attr("className","".concat(ZE,"background")).style("x",E.min[0]-f).style("y",0).style("width",_).style("height",y).style("zIndex",-1).call(L,u).call(L,JE(u,this.state))},e_.defaultOptions={style:{id:"",value:{},itemMarker:{size:8,symbol:"circle",style:{fill:"#d3d2d3",fillOpacity:1,lineWidth:0,active:{cursor:"pointer"}}},itemName:{spacing:4,style:{fontFamily:"sans-serif",fill:"#646464",fontSize:12,opacity:1,active:{cursor:"pointer"}}},itemValue:{spacing:4,style:{fontFamily:"sans-serif",fill:"#646464",opacity:1,fontSize:12,active:{cursor:"pointer"}}}}};var QE,t_=e_;function e_(t){t=QE.call(this,P({},e_.defaultOptions,t))||this;return t.state="default",t.state=t.style.state||"selected",t}function n_(t,o,a){void 0===a&&(a=0);var s=0,c=0,l=0;return t.reduce(function(t,e){var n=D(e.getLocalBounds().halfExtents,2),r=n[0],n=n[1],i="horizontal"===o?[t,0]:[0,t];return e.setLocalPosition(i[0],i[1]),c=Math.max(c,2*n),l=Math.max(l,2*r),(s="horizontal"===o?t+2*r:t+2*n)+a},0),{totalSize:s,maxItemWidth:l,maxItemHeight:c}}uE.registerSymbol("left",function(t,e,n){return[["M",t-n*Math.sin(Math.PI/3),e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]}),uE.registerSymbol("right",function(t,e,n){return[["M",t-n,e-n],["L",t+n*Math.sin(Math.PI/3),e],["L",t-n,e+n],["Z"]]}),uE.registerSymbol("up",function(t,e,n){return[["M",t-n,e+n],["L",t,e-n*Math.sin(Math.PI/3)],["L",t+n,e+n],["Z"]]}),uE.registerSymbol("down",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t,e+n*Math.sin(Math.PI/3)],["Z"]]});yo(o_,r_=lh),o_.prototype.connectedCallback=function(){this.container=this.appendChild(new dh),this.clipView=new wh({style:{path:[]}}),this.render(),this.bindEvents()},o_.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),this.render()},Object.defineProperty(o_.prototype,"styles",{get:function(){return P({},o_.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),o_.prototype.render=function(){this.renderButtonGroup();var t=this.style.items,t=void 0===t?[]:t;this.items=sw(this.container).selectAll(".legend-item").data(t||[],function(t,e){return t.id||e}).join(function(t){return t.append(function(t){return new t_({id:t.id,className:"legend-item",style:t})})},function(t){return t.each(function(t){this.update(t)})},function(t){return t.remove()}).nodes(),this.adjustLayout()},o_.prototype.bindEvents=function(){this.prevButton.addEventListener("pointerdown",this.prev.bind(this)),this.nextButton.addEventListener("pointerdown",this.next.bind(this))},o_.prototype.ifHorizontal=function(t,e){return"vertical"===this.style.orient?"function"==typeof e?e():e:"function"==typeof t?t():t},o_.prototype.renderButtonGroup=function(){var t=this.styles,e=t.pageButtonStyle,n=void 0===e?{}:e,e=t.pageTextStyle,t=B(this,".page-button-group",function(){return new dh({className:"page-button-group"})}).node(),r="page-prev-button",i="page-next-button";this.prevButton=B(t,"#".concat(r),function(){return new uE({})}).attr("id",r).attr("className","page-button").attr("zIndex",2).call(function(t){t.node().update(n)}).node(),B(t,".page-info","text").attr("className","page-info").call(L,e),this.nextButton=B(t,"#".concat(i),function(){return new uE({})}).attr("id",i).attr("className","page-button").attr("zIndex",2).call(function(t){t.node().update(n)}).node(),this.updatePageButtonSymbol()},Object.defineProperty(o_.prototype,"pageInfoBounds",{get:function(){var t,e,n,r,i=this.querySelector(".page-info");return i?(r=(t=this.styles).pageFormatter,t=t.pageInfoSpacing,e=i.style.visibility,i.style.visibility="hidden",i.style.text=r(1,this.styles.items.length),n=(r=D(i.getLocalBounds().halfExtents,2))[0],r=r[1],i.style.visibility=e,{width:2*(n+t),height:2*(r+t)}):{width:0,height:0}},enumerable:!1,configurable:!0}),o_.prototype.layoutButton=function(t){var e,n=this.style.pageInfoSpacing,r=this.pageInfoBounds.height,n=this.pageInfoBounds.width+2*(void 0===n?0:n),i=D(this.querySelector(".page-button-group").childNodes,3),o=i[0],a=i[1],i=i[2];"horizontal"===t?(t=2*o.getLocalBounds().halfExtents[0],e=2*i.getLocalBounds().halfExtents[0],o.style.x=t/2,i.style.x=t+n+e/2,a.style.x=(Number(o.style.x)+Number(i.style.x))/2,o.style.y=0,i.style.y=0,a.style.y=0):(t=2*o.getLocalBounds().halfExtents[1],n=2*i.getLocalBounds().halfExtents[1],o.style.y=-(r+t)/2,i.style.y=(r+n)/2,a.style.y=0,e=this.pageInfoBounds.width/2,o.style.x=e,i.style.x=e,a.style.x=e)},o_.prototype.showButtonGroup=function(){this.querySelector(".page-button-group").style.visibility="visible"},o_.prototype.resetPageCfg=function(){this.querySelector(".page-button-group").style.visibility="hidden",this.container.style.clipPath=null,this.currPage=void 0,this.maxPages=void 0,this.pageOffsets=[],this.container.style.transform="translate(0,0)",this.clipView&&(this.clipView.style.transform="translate(0,0)")},o_.prototype.adjustLayout=function(){var t,e,n,r;this.resetPageCfg(),this.items.length<=1||(t=(n=D(Qx(this.style.spacing),2))[0],n=n[1],t=this.ifHorizontal(t,n),t=(n=n_(this.items,this.style.orient||"horizontal",t)).totalSize,e=n.maxItemWidth,n=n.maxItemHeight,r=this.ifHorizontal(this.style.maxWidth,this.style.maxHeight),!fg(r)&&r!==1/0&&r<t&&(this.style.autoWrap&&"vertical"!==this.style.orient?(this.layoutButton("vertical"),this.adjustHorizontalWrap(e,n,r)):(this.layoutButton("horizontal"),this.adjustFlip(e,n,r))))},o_.prototype.adjustFlip=function(t,e,n){this.showButtonGroup();var r=this.querySelector(".page-button-group"),i=this.style.pageSpacing,o=this.prevButton.style.size||o_.defaultOptions.style.pageButtonSize,a=r.getLocalBounds(),s=2*a.halfExtents[0],a=2*a.halfExtents[1],e=D(this.ifHorizontal([n-(s+i),e],[t,n-(a+i)]),2),c=e[0],l=e[1];this.clipView.style.path="M-1,0 L".concat(c,",0 L").concat(c,",").concat(l," L-1,").concat(l," Z"),this.container.style.clipPath=this.clipView,r.style.x=this.ifHorizontal(n-s,0),r.style.y=this.ifHorizontal(l/2-1,l+o+i);for(var u="x"===this.ifHorizontal("x","y")?0:1,h=[0],f=1,d=0;d<this.items.length;d++){var p=this.items[d].getLocalBounds(),y=p.min;p.max[u]-kg(h)>this.ifHorizontal(c,l)+4&&(0!==y[u]&&h.push(y[u]),f+=1)}this.maxPages=f,this.currPage=1,this.pageOffsets=h,this.updatePageNavigatorState()},o_.prototype.adjustHorizontalWrap=function(t,l,e){this.showButtonGroup();var n,r=this.querySelector(".page-button-group"),i=this.style,o=i.pageSpacing,o=void 0===o?0:o,a=i.cols,i=this.pageInfoBounds.width,u=this.style.maxRows||2,s=r.getLocalBounds(),s=Math.max(2*s.halfExtents[0],i),i=e-(s+o),c=l*u;function h(t,e){for(var n=1,r=0,i=[0],o=0;o<e.length;o++){var a=e[o],s=a.getLocalBounds(),c=s.min;s.max[0]-r>t&&(n+=1,r=c[0],n%u==1&&i.push((n-1)*l)),a.setLocalPosition(c[0]-r,(n-1)*l)}return i}a&&u&&(a*u<=this.items.length&&(i=e),n=e/a),this.clipView.style.path="M-1,0 L".concat(i,",0 L").concat(i,",").concat(c," L-1,").concat(c," Z"),this.container.style.clipPath=this.clipView;var f=[];if(a&&n)for(var d=D(Qx(this.style.spacing),1)[0],p=0,y=0,g=0;g<this.items.length;g+=a){y=0,(p+=1)%u==1&&f.push(Math.floor(p/u)*c);for(var v=0;v<a&&g+v<this.items.length;v++)this.items[g+v].update({x:y,y:(p-1)*l,maxItemWidth:n-d}),y+=n}else 1===(f=h(i,this.items)).length&&(d=(o=D(Qx(this.style.spacing),2))[0],i=o[1],y=this.ifHorizontal(d,i),n_(this.items,this.style.orient||"horizontal",y),h(e,this.items));this.maxPages=f.length,this.currPage=1,this.pageOffsets=f,this.maxPages<=1?this.resetPageCfg():(r.style.x=e-s,r.style.y=c/2-2,this.updatePageNavigatorState())},o_.prototype.updatePageNavigatorState=function(){this.updatePageInfo(),this.currPage===this.maxPages?this.nextButton.setState("disabled"):this.nextButton.setState("default"),1===this.currPage?this.prevButton.setState("disabled"):this.prevButton.setState("default")},o_.prototype.updatePageButtonSymbol=function(){var t=this.style.autoWrap,t=this.ifHorizontal(t?1:0,1);this.prevButton.update({symbol:["left","up"][t]}),this.nextButton.update({symbol:["right","down"][t]})},o_.prototype.updatePageInfo=function(){var t=this.styles.pageFormatter;sw(this).select(".page-info").style("text",this.currPage&&this.maxPages?t(this.currPage,this.maxPages):"")},o_.prototype.finished=function(){var e=this;return this.finishedPromise||(this.finishedPromise=new Promise(function(t){e.resolveFinishedPromise=function(){e.finishedPromise=null,t(e.currPage)}})),"idle"===this.playState&&this.resolveFinishedPromise(),this.finishedPromise},o_.prototype.prev=function(){var t,e;this.maxPages&&this.currPage&&(t=this.style.loop,(e=this.currPage-1)<1&&(e=t?this.maxPages:1),this.goTo(e))},o_.prototype.next=function(){var t,e,n;this.maxPages&&this.currPage&&(t=this.style.loop,e=this.maxPages,n=this.currPage+1,this.goTo(n=e<n?t?1:e:n))},o_.prototype.goTo=function(t){var e,n,r,i,o=this;t!==this.currPage&&"idle"===this.playState&&(e=(i=this.style).effect,n=i.duration,i=i.autoWrap,r=(i=D(this.ifHorizontal(i?[0,-this.pageOffsets[t-1]]:[-this.pageOffsets[t-1],0],[0,-this.pageOffsets[t-1]]),2))[0],i=i[1],this.playState="running",this.clipView.animate([{transform:this.clipView.style.transform},{transform:"translate(".concat(-r,"px,").concat(-i,"px)")}],{duration:n,easing:e,fill:"both"}),this.container.animate([{transform:this.container.style.transform},{transform:"translate(".concat(r,"px,").concat(i,"px)")}],{duration:n,easing:e,fill:"both"}),Promise.all(this.clipView.getAnimations().map(function(t){return t.finished})).then(function(){o.currPage=t,o.updatePageNavigatorState(),o.resolveFinishedPromise(),o.playState="idle"}),this.finished())},o_.defaultOptions={style:{spacing:[4,0],effect:"easeQuadInOut",duration:320,maxRows:2,maxCols:2,pageButtonSize:10,pageInfoSpacing:2,pageFormatter:function(t,e){return"".concat(t,"/").concat(e)},pageButtonStyle:{size:10,margin:0,padding:0,markerStyle:{fill:"black",cursor:"pointer",disabled:{fill:"#d9d9d9",cursor:"not-allowed"}},backgroundStyle:{cursor:"pointer",fill:"transparent",disabled:{cursor:"not-allowed"}}},pageTextStyle:{fontSize:12,textBaseline:"middle",textAlign:"center"}}};var r_,i_=o_;function o_(t){t=r_.call(this,P({},o_.defaultOptions,t))||this;return t.items=[],t.maxPages=void 0,t.currPage=void 0,t.pageOffsets=[],t.playState="idle",t}function a_(t){var e=t.items,i=t.maxWidth,o=t.maxItemWidth,a=t.itemMarker,s=t.itemName,c=t.itemValue,n=t.reverse,l=t.itemWidth,u=t.itemHeight,h=t.itemPadding,f=t.itemBackgroundStyle,d=e.slice();return n&&d.reverse(),d.map(function(t,e){return{id:t.id||"legend-item-".concat(e),state:t.state||"default",value:t,maxItemWidth:mg([null!=o?o:Number.MAX_VALUE,null!=i?i:Number.MAX_VALUE]),itemMarker:(r=hg(a)?a(t,e,d):a,P({},WE,{symbol:t.marker,style:{fill:t.color,stroke:t.color}},r)),itemName:(r=P({},{formatter:function(){return t.name}},s),n=r.formatter,r=N(r,["formatter"]),P({},HE,{content:n(t,e,d)},r)),itemValue:(n=P({},{formatter:function(){return t.value}},c),r=n.formatter,n=N(n,["formatter"]),P({},VE,{content:r(t,e,d)},n)),itemWidth:l,itemHeight:u,padding:h,backgroundStyle:f};var n,r})}yo(l_,s_=r),l_.prototype.render=function(e,t){var n=e.padding,r=e.title,i=e.inset,o=e.orient,a=void 0===o?"horizontal":o,s=e.spacing,c=e.autoWrap,l=e.maxRows,u=e.maxWidth,h=e.maxHeight,f=e.cols,d=e.pageNavigator,o=e.backgroundStyle,o=void 0===o?{}:o,n=D(Qx(n),4),p=n[0],y=n[1],g=n[2],n=n[3],v=zE(t,"legend-container",n,p),m=FE(v,r),r=(null==r?void 0:r.spacing)||0,i=D(Qx(i),4),b=i[0],i=i[3],m=BE(m),i=(B(zE(v,"legend-inner-group",m.left+i,m.bottom+b+r),".category-items",function(){return new i_({})}).attr("className","category-items").call(function(t){t.node().update(M({orient:a,items:a_(e),spacing:s,autoWrap:c,maxRows:l,maxWidth:u,maxHeight:h,cols:f},d||{}))}).node(),v.getLocalBounds()),m=i.min,b=i.max,r=b[0]-m[0],v=b[1]-m[1];GE(t,"legend-background",Math.min(r+y+n,u||Number.MAX_VALUE),Math.min(v+p+g,h||Number.MAX_VALUE),o)},l_.prototype.getItem=function(t){return this.querySelector("[id=".concat(t,"]"))},l_.prototype.setItemState=function(t,e,n){void 0===n&&(n=!0),null!=(t=this.getItem(t))&&t.setState(e,n)},l_.prototype.getItemsStates=function(){return this.querySelectorAll(".legend-item").map(function(t){return{id:t.id,state:t.getState()}})};var s_,c_=l_;function l_(t){return s_.call(this,P({},YE,t))||this}function u_(t,e,n){return"horizontal"===(t=void 0===t?"horizontal":t)?e:n}Aw.registerSymbol("hiddenHandle",function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]}),Aw.registerSymbol("verticalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=t+.4*r;return[["M",t,e],["L",o,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",o,e-i],["Z"],["M",o,e+(n=n/6)],["L",t+r-2,e+n],["M",o,e-n],["L",t+r-2,e-n]]}),Aw.registerSymbol("horizontalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=e+.4*r;return[["M",t,e],["L",t-i,o],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,o],["Z"],["M",t-(n=n/6),o],["L",t-n,e+r-2],["M",t+n,o],["L",t+n,e+r-2]]});yo(d_,h_=lh),d_.prototype.connectedCallback=function(){this.draw()},d_.prototype.attributeChangedCallback=function(){this.draw()},d_.prototype.draw=function(){this.updateBackground(),this.updateTrack()},d_.prototype.updateBackground=function(){var t=this.style.backgroundColor;this.path.style.path=this.getRailPath(),this.path.attr({fill:t,fillOpacity:.45})},d_.prototype.updateTrack=function(){var t=this.style.fill;this.track.style.path=this.getRailPath(),this.track.style.clipPath=this.getClipPath(),this.track.style.fill=t},Object.defineProperty(d_.prototype,"box",{get:function(){var t=this.style,e=t.orient,n=t.size,t=t.length;return u_(e,[t,n],[n,t])},enumerable:!1,configurable:!0}),d_.prototype.getRailPath=function(){var t=this.style.type,e=D(this.box,2),n=e[0],e=e[1];return"size"===t?[["M",0,e],["L",0+n,0],["L",0+n,e]]:[["M",0,e],["L",0,0],["L",0+n,0],["L",0+n,e]]},d_.prototype.getClipPath=function(){var t,e,n,r,i=this.style,o=i.orient,i=i.selection;return i?(r=(t=D(this.box,2))[0],t=t[1],n=(i=D(i,2))[0],i=i[1],e=u_(o,n*r,0),n=u_(o,0,n*t),r=u_(o,i*r,r),o=u_(o,t,i*t),new wh({style:{path:[["M",e,n],["L",e,o],["L",r,o],["L",r,n]]}})):null};var h_,f_=d_;function d_(t){t=h_.call(this,vw({},{style:UE},t=void 0===t?{}:t))||this;return t.path=t.appendChild(new wh({className:"rail-path"})),t.track=t.appendChild(new wh({className:"rail-path"})),t}yo(g_,p_=r),g_.prototype.render=function(t,e){var n=t.textStyle,r=t.visibility,i=t.symbol,o=t.size,a=t.fill,s=t.stroke,c=t.lineWidth;i&&"hidden"!==r?(B(e,".handle",function(){return new Aw({})}).attr("className","handle").call(function(t){t.node().update({symbol:i,size:o,fill:a,stroke:s,lineWidth:c})}),B(e,".handle-text","text").attr("className","handle-text").call(L,n)):(null!=(t=e.querySelector(".handle"))&&t.remove(),null!=(r=e.querySelector(".handle-text"))&&r.remove())};var p_,y_=g_;function g_(){return null!==p_&&p_.apply(this,arguments)||this}yo(b_,v_=lh),b_.prototype.connectedCallback=function(){this.init(),this.bindEvents()},b_.prototype.attributeChangedCallback=function(t,e,n){"textStyle"!==t&&"padding"!==t&&"position"!==t||this.init()},b_.prototype.hide=function(){this.style.visibility="hidden"},b_.prototype.show=function(){this.style.visibility="visible"},b_.prototype.init=function(){var t=this.style,e=t.textStyle;"top"===t.position?this.text.attr(M({textAlign:"center"},e)):this.text.attr(M({textAlign:"left"},e))},b_.prototype.updateBackground=function(){var t,e,n=this.text.getLocalBounds(),r=n.min,n=n.max,i=Math.min(n[0]-r[0],40),r=[r[0]-4,r[1]-2,r[0]+i+4,n[1]+2],o=(i=this.style.position,r=(n=D(n=r,4))[0],e=n[1],o=n[2],n=n[3],"top"===i?[["M",r,n],["L",r,e],["L",o,e],["L",o,n],["L",r+(i=o-r)/2+(t=Eg(10,i/3,i/2))/2,n],["L",r+i/2,n+4],["L",r+i/2-t/2,n],["L",r,n]]:[["M",r,e],["L",o,e],["L",o,n],["L",r,n],["L",r,e+(i=n-e)/2+(t=Eg(6,i/3,i/2))/2],["L",r-4,e+i/2],["L",r,e+i/2-t/2],["L",r,e]]);this.background.style.path=o},b_.prototype.bindEvents=function(){var t=this;this.text.addEventListener(S.BOUNDS_CHANGED,function(){t.updateBackground()})};var v_,m_=b_;function b_(t){t=v_.call(this,vw({},{style:{visibility:"hidden"}},t=void 0===t?{}:t))||this;return t.background=t.appendChild(new wh({style:{lineCap:"round",fill:"#262626",lineWidth:1,stroke:"#333"}})),t.text=t.appendChild(new Ah({style:{text:"",fill:"#fff",fontSize:10,textBaseline:"middle"}})),t}function x_(t,e){var t=D(function(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(r<=e&&e<=i)return[r,i]}return[e,e]}(t,e),2),n=t[0],t=t[1];return{tick:(n+t)/2<e?t:n,range:[n,t]}}function w_(t,e,n,r,i){var o=D(u_(t,["dx","dy"],["dy","dx"]),2),a=o[0],o=o[1],s={};return s[a]=e,s[o]="start"===n?-i:r+i,s.textAlign=u_(t,"center","start"===n?"right":"left"),s.textBaseline=u_(t,"start"===n?"bottom":"top","middle"),s}function k_(t,e){var n,s,c,l,r,i,o,u=t.min,h=t.max,a=t.handle,f=t.orient,d=void 0===f?"horizontal":f;return null===t.label||a?[]:(s=vw({size:24,length:200},UE,t.rail||{}),f=vw({},qE,t.label||{}),c=f.align,l=f.spacing,"rail"===c?(t=(a=D(u_(d,["dx","dy"],["dy","dx"]),2))[0],f=a[1],r=(a=D(u_(d,["right","left"],["center","center"]),2))[0],a=a[1],i=(o=D(u_(d,["middle","middle"],["bottom","top"]),2))[0],o=o[1],[((n={id:"legend-label-0",text:"".concat(u)})[t]=-l,n[f]=s.size/2,n.textAlign=r,n.textBaseline=i,n),((r={id:"legend-label-1",text:"".concat(h)})[t]=s.length+l,r[f]=s.size/2,r.textAlign=a,r.textBaseline=o,r)]):e.map(function(t,e){a=t,n=u,r=h,i=s;var n,r,i,o=(o=void 0!==o&&o)?a*(r-n)/i.length:Ux((a-n)*(n<r?i.length/(r-n):0),2),a=w_(d,o,c,s.size,l);return M({id:"legend-label-".concat(e),text:"".concat(t)},a)}))}var E_=Bg(function(t){return t.sort(function(t,e){return t-e})},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)});yo(A_,__=r),A_.prototype.render=function(t,e){var n=t.padding,r=t.title,i=t.inset,o=(t.orient,t.backgroundStyle),o=void 0===o?{}:o,a=t.maxWidth,s=t.maxHeight,c=t.label,n=D(Qx(n),4),l=n[0],u=n[1],h=n[2],n=n[3],f=zE(e,"legend-container",n,l),d=FE(f,r),r=(null==r?void 0:r.spacing)||0,i=D(Qx(i),4),p=i[0],i=i[3],d=BE(d),i=zE(f,"legend-inner-group",d.left+i,d.bottom+p+r),d=k_(t,this.ticks),p=(Gk(i,"legend-label",d,c,{fill:"#2C3542",fillOpacity:.65,fontWeight:"normal"}),this.drawInner(),f.getLocalBounds()),r=p.min,t=p.max,i=t[0]-r[0],d=t[1]-r[1];GE(e,"legend-background",Math.min(i+u+n,a||Number.MAX_VALUE),Math.min(d+l+h,s||Number.MAX_VALUE),o)},A_.prototype.drawInner=function(){this.drawRail(),this.drawHandles(),this.createIndicator()},Object.defineProperty(A_.prototype,"orient",{get:function(){return this.style.orient||"horizontal"},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"selection",{get:function(){var t=this.style,e=t.min,n=t.max;return[t.start||e,t.end||n]},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"labelsCfg",{get:function(){var t=this.style.label;return vw({},qE,t||{})},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"railCfg",{get:function(){var t=this.style.rail;return vw({size:24,length:200},UE,t||{})},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"handleCfg",{get:function(){var t=this.style,e=t.handle,t=t.label;return vw({},XE,e||{},{textStyle:this.labelsCfg.style,spacing:this.labelsCfg.spacing,visibility:e&&null!==t?"visible":"hidden"})},enumerable:!1,configurable:!0}),A_.prototype.ifHorizontal=function(t,e){return u_(this.orient,"function"==typeof t?t():t,"function"==typeof e?e():e)},Object.defineProperty(A_.prototype,"color",{get:function(){var t,e,i,o,a,n=this.style.color,n=Array.from(void 0===n?[]:n),r=n.length;return r?this.railCfg.chunked?(t=this.ticks,e=this.orient,i=Array.from(n),o=i.length,a=t.length,t.reduce(function(t,e,n){var r=i[n%o];return t+" ".concat(n/(a-1),":").concat(r).concat(n<a-1?" ".concat((n+1)/(a-1),":").concat(r):"")},"l(".concat("horizontal"===e?"0":"270",")"))):n.reduce(function(t,e,n){return t+" ".concat(n/(r-1),":").concat(e)},"l(".concat(this.ifHorizontal("0","270"),")")):""},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"slidable",{get:function(){return!!this.style.handle},enumerable:!1,configurable:!0}),Object.defineProperty(A_.prototype,"ticks",{get:function(){var t=this.style,e=t.min,t=t.max;return E_(vo(vo([e],D(this.railCfg.ticks||[]),!1),[t],!1))},enumerable:!1,configurable:!0}),A_.prototype.drawRail=function(){var t=this.style,e=t.orient,n=t.min,t=t.max,r=D(this.selection,2),i=r[0],r=r[1],o=this.querySelector(".legend-inner-group");this.rail=sw(this.rail||o.appendChild(new f_)).attr("className","legend-rail").call(L,M(M({},this.railCfg),{fill:this.color,orient:e})).style("selection",this.slidable?[(i-n)/(t-n),(r-n)/(t-n)]:void 0).node()},A_.prototype.drawHandles=function(){var t=D(this.selection,2),e=t[0],t=t[1];this.startHandle=this.drawHandle("start",e),this.endHandle=this.drawHandle("end",t)},A_.prototype.drawHandle=function(t,e){var n=this,r=this.labelsCfg,i=r.align,r=r.spacing,o=this.railCfg.size,a=this.handleCfg.size,s=this.getOffset(e),c=w_(this.orient,s,i,o,-a/3),l=c.dx,u=c.dy,h=w_(this.orient,s,i,o,"start"===i?r:a/3+r),c="start"===t?this.startHandle:this.endHandle,s=this.querySelector(".legend-inner-group");return sw(c||s.appendChild(new y_({}))).attr("className","legend-handle-".concat(t)).call(function(t){return t.node().update(M(M({},n.handleCfg),{x:l,y:u,symbol:n.ifHorizontal("horizontalHandle","verticalHandle"),textStyle:M({text:"".concat(null!=e?e:""),x:+h.dx-+l,y:+h.dy-+u,textAlign:h.textAlign,textBaseline:h.textBaseline},n.handleCfg.textStyle)}))}).node()},A_.prototype.createIndicator=function(){this.indicator=this.appendChild(new m_({zIndex:2,className:"legend-indicator",style:{position:this.ifHorizontal("top","right")}}))},A_.prototype.bindEvents=function(){var n=this,t=new Map;t.set("rail",this.rail),t.set("start",this.startHandle),t.set("end",this.endHandle),t.forEach(function(t,e){t.addEventListener("mousedown",n.onDragStart(e)),t.addEventListener("touchstart",n.onDragStart(e))}),this.startHandle.addEventListener("mouseover",function(){return n.updateMouse()}),this.endHandle.addEventListener("mouseover",function(){return n.updateMouse()}),this.rail.addEventListener("mousemove",this.onHovering),this.addEventListener("mouseout",this.hideIndicator)},A_.prototype.showIndicator=function(t,e){var n,r,i,o,a,s,c;void 0===e&&(e="".concat(t)),"number"!=typeof t?this.hideIndicator():(this.indicator.show(),c=this.querySelector(".legend-container"),n=(r=this.style).min,r=r.max,t=Eg(t,n,r),n=this.ifHorizontal(this.getOffset(t),this.railCfg.size+12),r=this.ifHorizontal(-14,this.getOffset(t)),i=(t=this.rail.getBBox()).x,t=t.y,o=(a=c.getBBox()).x,a=a.y,s=(c=D(c.getLocalPosition(),2))[0],c=c[1],this.indicator.style.x=i-o+s+n,this.indicator.style.y=t-a+c+r,this.indicator.style.textStyle={text:e})},A_.prototype.hideIndicator=function(){var t;null!=(t=this.indicator)&&t.hide()},A_.prototype.onDragEnd=function(){this.style.cursor="default",this.removeEventListener("mousemove",this.onDragging),this.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd)},A_.prototype.updateMouse=function(){this.style.slidable&&(this.style.cursor="grabbing")},A_.prototype.setSelection=function(t,e){this.updateSelection(t,e)},A_.prototype.updateSelection=function(t,e,n){void 0===n&&(n=!1);var r,i,o,a,s,c=D(this.selection,2),l=c[0],c=c[1],t=D([t,e],2),e=t[0],t=t[1],n=(n&&(e+=l,t+=c),this.style),l=n.min,c=n.max,u=D((n=[l,c],l=[e,t],c=this.selection,void 0===r&&(r=4),i=(n=D(n,2))[0],n=n[1],o=(l=D(l,2))[0],l=l[1],a=(c=D(c,2))[0],c=c[1],l=(o=D([o,l],2))[0],s=(o=o[1])-l,o<l&&(l=(u=D([o,l],2))[0],o=u[1]),n-i<s?[i,n]:l<i?a===i&&c===o?[i,o]:[i,s+i]:n<o?c===n&&a===l?[l,n]:[n-s,n]:[Ux(l,r),Ux(o,r)]),2),e=u[0],t=u[1];this.update({start:e,end:t}),this.dispatchSelection()},Object.defineProperty(A_.prototype,"step",{get:function(){var t=this.attributes,e=t.step,n=t.min,t=t.max;return Lg(e)?Ux(.01*(t-n),0):e},enumerable:!1,configurable:!0}),A_.prototype.getTickValue=function(t){return this.railCfg.chunked?x_(this.ticks,t).tick:(e=this.step,(n=this.style.min)+Math.round((t-n)/e)*e);var e,n},A_.prototype.getValueByCanvasPoint=function(t,e){var n=this.style,r=n.min,n=n.max,i=D(this.rail.getPosition(),2),o=i[0],i=i[1],o=this.ifHorizontal(o,i),i=this.ifHorizontal.apply(this,vo([],D(iw(t)),!1));return Eg(this.getOffset(i-o,!0)+r,r,n)},A_.prototype.getOffset=function(t,e){var n=this.style,r=n.min,n=n.max;return(e=void 0!==e&&e)?t*(n-r)/this.railCfg.length:Ux((t-r)*(r<n?this.railCfg.length/(n-r):0),2)},A_.prototype.dispatchSelection=function(){var t=new Gu("valueChanged",{detail:{value:this.selection}});this.dispatchEvent(t)},A_.prototype.dispatchIndicated=function(t,e){t=new Gu("onIndicated",{detail:{value:t,range:e}});this.dispatchEvent(t)},g([kw(20)],A_.prototype,"dispatchSelection",null),g([kw(20)],A_.prototype,"dispatchIndicated",null);var __,M_,S_,T_,O_=A_;function A_(t){var o=__.call(this,vw({type:"continuous-legend"},$E,t))||this;return o.onHovering=function(t){t.stopPropagation();var e,t=o.getValueByCanvasPoint(t);Gg(o.attributes,["rail","chunked"])?(e=x_(o.ticks,t).range,o.showIndicator((e[0]+e[1])/2,"".concat(e[0],"-").concat(e[1])),o.dispatchIndicated(t,e)):(e=o.getTickValue(t),o.showIndicator(e),o.dispatchIndicated(e))},o.onDragStart=function(e){return function(t){t.stopPropagation(),o.slidable&&(o.target=e,o.prevValue=o.getTickValue(o.getValueByCanvasPoint(t)),o.addEventListener("mousemove",o.onDragging),o.addEventListener("touchmove",o.onDragging),o.addEventListener("mouseleave",o.onDragEnd),o.addEventListener("mouseup",o.onDragEnd),document.addEventListener("mouseup",o.onDragEnd),document.addEventListener("touchend",o.onDragEnd))}},o.onDragging=function(t){var e=o.target,n=(o.updateMouse(),D(o.selection,2)),r=n[0],n=n[1],t=o.getTickValue(o.getValueByCanvasPoint(t)),i=t-o.prevValue;"start"===e?r!==t&&o.updateSelection(t,n):"end"===e?n!==t&&o.updateSelection(r,t):"rail"===e&&0!=i&&(o.prevValue=t,o.updateSelection(i,i,!0))},o}function P_(t){M_||(M_=document.createElement("table"),T_=document.createElement("tr"),S_=/^\s*<(\w+|!)[^>]*>/,T_={tr:document.createElement("tbody"),tbody:M_,thead:M_,tfoot:M_,td:T_,th:T_,"*":document.createElement("div")});var e=S_.test(t)&&RegExp.$1,e=(e&&e in T_||(e="*"),T_[e]),t=(t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,e.innerHTML=""+t,e.childNodes[0]);return t&&e.contains(t)&&e.removeChild(t),t}var N_,Mt="tooltip",C_="tooltip-title",L_="tooltip-list",K="tooltip-list-item",l="tooltip-list-item-name",J="tooltip-list-item-marker",n="tooltip-list-item-name-label",dt="tooltip-list-item-value",jt="tooltip-crosshair-x",a="tooltip-crosshair-y",ut={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},Te=((u={})[".".concat(Mt)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},u[".".concat(C_)]={color:"rgba(0, 0, 0, 0.45)"},u[".".concat(L_)]={margin:"0px","list-style-type":"none",padding:"0px"},u[".".concat(K)]={"list-style-type":"none","margin-top":"12px",display:"flex","line-height":"1em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},u[".".concat(J)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},u[".".concat(l)]={display:"flex","align-items":"center","max-width":"216px"},u[".".concat(n)]=M({flex:1},ut),u[".".concat(dt)]=M({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},ut),u[".".concat(jt)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},u[".".concat(a)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},u),I_=(yo(j_,N_=r),Object.defineProperty(j_.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(j_.prototype,"position",{set:function(t){var t=D(t,2),e=t[0],t=t[1];this.attr({x:e,y:t}),this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(j_.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(j_.prototype,"items",{get:function(){var t=this.attributes.items;return this.sort(this.filter(t.map(function(t,e){var n=t.name,n=void 0===n?"":n,r=t.value,i=t.color,i=void 0===i?"black":i,o=t.index,t=N(t,["name","value","color","index"]);return M({name:n,value:r,color:i,index:void 0===o?e:o},t)})))},enumerable:!1,configurable:!0}),Object.defineProperty(j_.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes.template.item,r=[];return this.items.forEach(function(t){var n;r.push(P_((n=t,(t=e)&&n?t.replace(/\\?\{([^{}]+)\}/g,function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===n[e]?"":n[e]}):t)))}),r},enumerable:!1,configurable:!0}),Object.defineProperty(j_.prototype,"customContent",{get:function(){var t=this.attributes.customContent;return xg(t)?uw(t):Ig(t)?t:hg(t)?uw(t(this.attributes.items)):void 0},enumerable:!1,configurable:!0}),j_.prototype.render=function(t,e){this.updateHTMLTooltipElement(),this.updatePosition()},j_.prototype.update=function(t){this.attr(P({},this.attributes,t)),this.render(this.attributes,this)},j_.prototype.clear=function(){this.element.innerHTML=""},j_.prototype.destroy=function(){var t;null!=(t=this.element)&&t.remove(),null!=(t=this.customContent)&&t.remove()},j_.prototype.show=function(){this.visibility="visible",this.element.style.visibility="visible"},j_.prototype.hide=function(){this.visibility="hidden",this.element.style.visibility="hidden"},j_.prototype.initShape=function(){var t=this.attributes.template.container;this.element=P_(t),!this.id&&""===this.id||this.element.setAttribute("id",this.id)},j_.prototype.updateHTMLTooltipElement=function(){var e,r,t=this.attributes.title,n=this.element,i=this.customContent,t=(this.clear(),i?n.appendChild(i):(i=this.attributes.template.title,n.innerHTML=i,n.getElementsByClassName(C_)[0].innerHTML=t,i=this.HTMLTooltipItemsElements,(e=document.createElement("ul")).className=L_,i.forEach(function(t){e.appendChild(t)}),this.element.appendChild(e)),this.attributes.style);r=n,Object.entries(t).forEach(function(t){var t=D(t,2),e=t[0],n=t[1];vo([r],D(r.querySelectorAll(e)),!1).filter(function(t){return t.matches(e)}).forEach(function(t){t&&(t.style.cssText+=Object.entries(n).reduce(function(t,e){return"".concat(t).concat(e.join(":"),";")},""))})}),this.element.style.visibility=this.visibility},j_.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,e=D(e.offset,2),i=e[0],o=e[1],e=(t||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},t=this.elementSize,s=t.width,c=t.height,l=[-s/2,-c/2];return e.forEach(function(t){var e=D(l,2),n=e[0],e=e[1],t=D(a[t],2),r=t[0],t=t[1];l=[n+(s/2+i)*r,e+(c/2+o)*t]}),l},j_.prototype.setOffsetPosition=function(t){var t=D(t,2),e=t[0],t=t[1],n=this.attributes,r=n.x,i=n.y,n=n.container,o=n.x,n=n.y;this.element.style.left="".concat(r+o+e,"px"),this.element.style.top="".concat(i+n+t,"px")},j_.prototype.updatePosition=function(){this.throttleUpdatePosition()},j_.prototype.autoPosition=function(t){var e,n,r,i,o,a,s,t=D(t,2),c=t[0],t=t[1],l=this.attributes,u=l.x,h=l.y,f=l.autoPosition,l=l.bounding;return f?(e=(f=this.element).offsetWidth,f=f.offsetHeight,h=(u=D([u+c,h+t],2))[0],u=u[1],n=this.attributes.position,r={left:"right",right:"left",top:"bottom",bottom:"top"},s=l.x,i=l.y,o={left:h<s,right:s+l.width<h+e,top:u<i,bottom:i+l.height<u+f},a=[],n.split("-").forEach(function(t){a.push(o[t]?r[t]:t)}),s=a.join("-"),this.getRelativeOffsetFromCursor(s)):[c,t]},j_.prototype.filter=function(t){var e=this.attributes.filterBy;return e?t.filter(e):t},j_.prototype.sort=function(t){var e=this.attributes.sortBy;return e?t.sort(e):t},j_.tag="tooltip",j_.defaultOptions={style:{x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],follow:!0,enterable:!1,autoPosition:!0,items:[],throttleFrequency:50,container:{x:0,y:0},bounding:{x:0,y:0,width:0,height:0},template:{container:'<div class="'.concat(Mt,'"></div>'),title:'<div class="'.concat(C_,'"></div>'),item:'<li class="'.concat(K,'" data-index={index}>\n        <span class="').concat(l,'">\n          <span class="').concat(J,'" style="background:{color}"></span>\n          <span class="').concat(n,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(dt,'" title="{value}">{value}</span>\n      </li>')},style:Te}},j_);function j_(t){var e=N_.call(this,P({},j_.defaultOptions,t))||this;return e.visibility="visible",e.throttleUpdatePosition=Vg(function(){e.setOffsetPosition(e.autoPosition(e.getRelativeOffsetFromCursor()))},e.attributes.throttleFrequency,{}),e.visibility=e.attributes.visibility,e.initShape(),e.render(e.attributes,e),e}var R_,D_={default:{sizeStyle:{width:44,height:22,radius:11},tagStyle:{textStyle:{fontSize:12,lineHeight:16,fill:"#fff"},padding:0},markerStyle:{size:11}},small:{sizeStyle:{width:28,height:16,radius:8},tagStyle:{textStyle:{fontSize:10,lineHeight:14,fill:"#fff"},padding:0},markerStyle:{size:8}},mini:{sizeStyle:{width:20,height:14,radius:7},tagStyle:{textStyle:{fontSize:7,lineHeight:10,fill:"#fff"},padding:0},markerStyle:{size:7}}};function B_(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!0);var r=Number(t.style.height)-2*e;return{x:n?Number(t.style.width)+Number(t.style.x)-e-r:Number(t.style.x)+e,y:Number(t.style.y)+e,width:r,height:r,radius:r/2}}function F_(t){return R_.call(this,P({},F_.defaultOptions,t))||this}yo(F_,R_=r),F_.prototype.render=function(t,e){var i=this,n=t.size,n=void 0===n?"default":n,o=t.spacing,r=t.disabled,a=t.checked,s=t.unCheckedChildren,t=t.checkedChildren,e=B(e,".switch-content","g").attr("className","switch-content").node(),c=e.getLocalBounds(),n=Gg(D_,n,D_.default),l=n.sizeStyle,u=n.tagStyle,h=r?"no-drop":"pointer",n=a?"#1890FF":"#00000040",f=l,d=a?t:s,p=((t||s)&&B(e,".switch-tag",function(){return new Cw({})}).attr("className","switch-tag").call(function(t){var e,t=t.node(),n=(t.update(P({cursor:h,backgroundStyle:null,text:!1,marker:!1},u,d)),null==t?void 0:t.getLocalBounds()),r=n.max,n=n.min,i=r[0]-n[0]+l.radius,r=r[1]-n[1],n=Math.max(i+l.height+2,l.width);f=M(M({},l),{width:n}),t.update((t={x:c.min[0],y:c.min[1],width:n,height:f.height},n={width:i,height:r},i=f.radius,r=a,e=n.width,n=n.height,void 0===i&&(i=0),{x:(r=void 0===a?!0:r)?Number(t.x)+i:Number(t.width)+Number(t.x)-e,y:Number(t.y)+(Number(t.height)-n)/2}))}),B(e,".switch-background","rect").attr("className","switch-background").style("zIndex",(e.style.zIndex||0)-1).style("x",c.min[0]).style("y",c.min[1]).style("fill",n).style("cursor",h).style("fillOpacity",r?.4:1).call(L,f).node()),y=B(e,".switch-background-stroke","rect").attr("className","switch-background-stroke").style("zIndex",(e.style.zIndex||0)-2).style("x",c.min[0]).style("y",c.min[1]).style("stroke",n).style("lineWidth",0).call(L,f).node();B(e,".switch-handle","rect").attr("className","switch-handle").style("fill","#fff").style("cursor",h).call(function(t){var e,t=t.node(),n=B_(p,o,a),r=B_(p,o,!a);t.attr("x")&&!$g(n,r)&&i.checked!==a?(t.attr(r),null!=(e=t.getAnimations()[0])&&e.cancel(),null!=(e=y.getAnimations()[0])&&e.cancel(),t.animate([{x:r.x},{x:n.x}],{duration:120,fill:"both"}),y.animate([{lineWidth:0,strokeOpacity:.5},{lineWidth:14,strokeOpacity:0}],{duration:400,easing:"ease-on"})):t.attr(n)}),this.checked=!!a},F_.defaultOptions={type:F_.tag="switch",style:{x:0,y:0,spacing:2,checked:!0,disabled:!1}};var z_,s={text:"",type:"primary",height:20,width:20,buttonStyle:{default:{lineWidth:0,fill:"#fff"},active:{fill:"#fff"},disabled:{fill:"#fff"}},markerStyle:{default:{fill:"black",size:10},disabled:{fill:"#8c8c8c"}}};function G_(t){var t=z_.call(this,P({},G_.defaultOptions,t))||this,e=(t.playState="idle",t.attributes),n=e.view,e=e.initPageNum;return t.currPage=e,t.view=n,t.init(),t}yo(G_,z_=r),Object.defineProperty(G_.prototype,"finished",{get:function(){var e=this;return this.finishedPromise||(this.finishedPromise=new Promise(function(t){e.resolveFinishedPromise=function(){e.finishedPromise=null,t(e.currPage)}})),"idle"===this.playState&&this.resolveFinishedPromise(),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"maxPages",{get:function(){var t=this.attributes,e=t.pageWidth,n=t.pageHeight,r=t.orient,i=t.pageLimit;return t.pageCallback||i!==1/0?i:"horizontal"===r?Math.ceil(this.width/e):Math.ceil(this.height/n)},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"view",{get:function(){return this.fullView},set:function(t){var e=this.attributes,n=e.width,e=e.height;t.setLocalPosition(0,0),this.fullView=t,n&&e||(e=(n=cw(t)).width,t=n.height,this.width=e,this.height=t)},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"width",{get:function(){var t=this.attributes.width;return t||this.viewWidth},set:function(t){this.viewWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"height",{get:function(){var t=this.attributes.height;return t||this.viewHeight},set:function(t){this.viewHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"btnPosition",{get:function(){var t;return null!=(t=this.style.button)&&t.position?this.style.button.position:"horizontal"===this.style.orient?"right":"bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"defaultShape",{get:function(){return["left","right","left-right"].includes(this.btnPosition)?["left","right"]:["up","down"]},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"buttonCfg",{get:function(){var t=D(this.defaultShape,2),e=t[0],t=t[1],n=this.attributes.button,r=n.prev,n=n.next;return{prev:M({marker:e},r),next:M({marker:t},n)}},enumerable:!1,configurable:!0}),G_.prototype.render=function(t,e){},G_.prototype.init=function(){this.initShape(),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},G_.prototype.update=function(t){var e=t.view;e&&(this.view&&(this.view.style.clipPath=null,this.removeChild(this.view)),this.currPage=this.attributes.initPageNum,this.view=e,this.view.style.clipPath=this.clipView,this.appendChild(this.view),this.view.toBack()),this.attr(P({},this.attributes,t)),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},G_.prototype.clear=function(){this.view&&(this.view.style.clipPath=null,this.removeChild(this.view)),this.fullView=void 0,this.removeChildren()},G_.prototype.destroy=function(){this.removeChildren(),z_.prototype.destroy.call(this)},G_.prototype.goTo=function(t){var e,n,r,i,o,a,s,c,l,u,h=this;return"idle"===this.playState&&(e=(n=this.attributes).effect,n=n.duration,r=(l=this.calcRelativePagingOffset(t)).viewFromX,i=l.viewFromY,o=l.viewToX,a=l.viewToY,u=l.clipFromX,s=l.clipFromY,c=l.clipToX,l=l.clipToY,this.playState="running",this.clipView.animate([{transform:"translate(".concat(u,"px, ").concat(s,"px)")},{transform:"translate(".concat(c,"px, ").concat(l,"px)")}],{duration:n,easing:e,fill:"both"}),null!=(u=this.view.animate([{transform:"translate(".concat(r,"px, ").concat(i,"px)")},{transform:"translate(".concat(o,"px, ").concat(a,"px)")}],{duration:n,easing:e,fill:"both"}))&&u.finished.then(function(){h.currPage=t,h.updateButtonState(),h.resolveFinishedPromise(),h.playState="idle"})),this.finished},G_.prototype.prev=function(){var t=this.attributes.loop,e=this.currPage-1;return e<1&&(e=t?this.maxPages:1),this.goTo(e)},G_.prototype.next=function(){var t=this.attributes.loop,e=this.maxPages,n=this.currPage+1;return this.goTo(n=e<n?t?1:e:n)},G_.prototype.initShape=function(){this.clipView=new Th({name:"clipView",style:{x:0,y:0,width:0,height:0}}),this.view.style.clipPath=this.clipView,this.appendChild(this.view),this.view.toBack();var t=D(this.defaultShape,2),e=t[0],t=t[1];this.prevButton=new Fw({name:"prevButton",style:M(M({},G_.defaultOptions.style.button.prev),{marker:e,onClick:this.prev.bind(this)})}),this.appendChild(this.prevButton),this.nextButton=new Fw({name:"nextButton",style:M(M({},G_.defaultOptions.style.button.next),{marker:t,onClick:this.next.bind(this)})}),this.appendChild(this.nextButton),this.paginationGroup=new dh({name:"paginationGroup"}),this.appendChild(this.paginationGroup)},G_.prototype.updateView=function(){var t=this.getClipViewSpace(this.currPage),e=t.width,t=t.height;this.clipView.attr({width:e,height:t}),this.view.setLocalPosition(0,0),this.clipView.setLocalPosition(0,0)},G_.prototype.updateButton=function(){var t=this.buttonCfg,e=t.prev,t=t.next;e&&this.prevButton.update(e),t&&this.nextButton.update(t)},G_.prototype.updateButtonState=function(){this.attributes.loop?(this.nextButton.setState("default"),this.prevButton.setState("default")):(this.nextButton.setState(this.currPage===this.maxPages?"disabled":"default"),this.prevButton.setState(1===this.currPage?"disabled":"default"))},G_.prototype.getClipViewSpace=function(t){var e=this.attributes,n=e.orient,r=e.pageWidth,i=e.pageHeight,e=e.pageCallback,o={x:0,y:0,width:r,height:i},a=this.maxPages;return e?M(M({},o),e(t)):(a<t||t<1||("vertical"===n?o.y=(t-1)*i:"horizontal"===n&&(o.x=(t-1)*r)),o)},G_.prototype.absolute2Relative=function(t,e){var n=this.currPage,n=this.getClipViewSpace(n);return[t+n.x,e+n.y]},G_.prototype.getViewPosition=function(t){var e=this.getClipViewSpace(1),n=e.x,e=e.y,t=this.getClipViewSpace(t),n=D([-t.x+n,-t.y+e],2);return{x:n[0],y:n[1]}},G_.prototype.getRelativeViewPosition=function(t){var t=this.getViewPosition(t),e=t.x,t=t.y,e=D(this.absolute2Relative(e,t),2);return{x:e[0],y:e[1]}},G_.prototype.calcRelativePagingOffset=function(t){var e=D(this.absolute2Relative.apply(this,vo([],D(this.view.getLocalPosition().slice(0,2)),!1)),2),n=e[0],e=e[1],t=this.getRelativeViewPosition(t),r=t.x,t=t.y,i=D([-n,-e],2),o=i[0],i=i[1],a=D([-r,-t],2);return{viewFromX:n,viewFromY:e,viewToX:r,viewToY:t,clipFromX:o,clipFromY:i,clipToX:a[0],clipToY:a[1]}},G_.prototype.adjustLayout=function(){this.adjustButton()},G_.prototype.adjustButton=function(){var t,e=this.attributes,n=e.button,r=e.pageWidth,e=e.pageHeight,i=this.btnPosition,n=(null==n?void 0:n.spacing)||0,o=cw(this.prevButton),a=o.width,o=o.height,s=cw(this.nextButton),c=s.width,s=s.height,l=0,u=0,h=0,f=0;"left-right"===i?(l=-(n+a),u=(e-o)/2,h=n+r,f=(e-s)/2):"top-bottom"===i?(l=(r-a)/2,u=-(n+o),h=(r-c)/2,f=n+e):"top"===i?(l=(r-n)/2-a,u=-(n+(t=vg([o,s]))),h=(r+n)/2,f=-(n+t)):"bottom"===i?(l=(r-n)/2-a,h=(r+n)/2,f=u=n+e):"left"===i?(l=(h=-(n+c))-(n+a),f=u=(e-(t=vg([o,s])))/2):"right"===i&&(h=(l=n+r)+a,f=u=(e-(t=vg([o,s])))/2),this.prevButton.setLocalPosition(l,u),this.nextButton.setLocalPosition(h,f)},G_.defaultOptions={type:G_.tag="page-navigator",style:{x:0,y:0,effect:"linear",duration:200,orient:"horizontal",initPageNum:1,pageLimit:1/0,loop:!1,button:{prev:M({spacing:0},s),next:M({spacing:0},s),style:{default:{},active:{},disabled:{}},spacing:5},pagination:{type:"currTotal",style:{default:{},active:{}},separator:"/",spacing:5}}},Aw.registerSymbol("left",function(t,e,n){return[["M",t-n,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]}),Aw.registerSymbol("right",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]}),Aw.registerSymbol("up",function(t,e,n){return[["M",t-n,e+n],["L",t,e-n],["L",t+n,e+n],["Z"]]}),Aw.registerSymbol("down",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t,e+n],["Z"]]});var W_,h={text:{text:""},lineStyle:{stroke:"#416180",strokeOpacity:.45,lineWidth:1,lineDash:[5,5]}},o=vw({},h,{type:"line",text:{position:"start",align:"center",verticalAlign:"bottom"}}),t=vw({},h,{type:"circle",defaultRadius:0}),pt=vw({},h,{type:"polygon",defaultRadius:0,startAngle:0}),e=(yo(H_,W_=r),Object.defineProperty(H_.prototype,"localPointer",{get:function(){var t=D(this.getPosition(),2),e=t[0],t=t[1],n=D(this.pointer,2);return[n[0]-e,n[1]-t]},enumerable:!1,configurable:!0}),Object.defineProperty(H_.prototype,"tagCfg",{get:function(){var t=this.attributes.text;return t.position,N(t,["position"])},enumerable:!1,configurable:!0}),Object.defineProperty(H_.prototype,"crosshairCfg",{get:function(){var t=this.attributes.lineStyle;return M(M({},t),{path:this.crosshairPath})},enumerable:!1,configurable:!0}),H_.prototype.render=function(t,e){var n=this,e=B(e,".crosshair-group","g").attr("className","crosshair-group").node();this.shapesGroup=e,this.tagShape=B(e,".crosshair-tag",function(){return new Cw({className:"crosshair-tag",style:n.tagCfg})}).node(),this.crosshairShape=B(e,".crosshair-path","path").attr("className","crosshair-path").call(L,this.crosshairCfg).node(),this.adjustLayout()},H_.prototype.update=function(t){this.attr(P({},this.attributes,t=void 0===t?{}:t)),this.render(this.attributes,this)},H_.prototype.setPointer=function(t){this.pointer=t},H_.defaultOptions={type:H_.tag="crosshair-base",style:h},H_);function H_(t){return W_.call(this,P({},H_.defaultOptions,t))||this}yo(U_,V_=e),Object.defineProperty(U_.prototype,"crosshairPath",{get:function(){var t=this.attributes,e=D(t.startPos,2),n=e[0],e=e[1],t=D(t.endPos,2);return[["M",0,0],["L",t[0]-n,t[1]-e],["Z"]]},enumerable:!1,configurable:!0}),Object.defineProperty(U_.prototype,"localPointer",{get:function(){var t,e,n;return this.pointer?(t=(e=D(this.getPosition(),2))[0],e=e[1],[(n=D(this.pointer,2))[0]-t,n[1]-e]):this.attributes.startPos},enumerable:!1,configurable:!0}),Object.defineProperty(U_.prototype,"isVertical",{get:function(){var t=this.attributes,e=D(t.startPos,2),n=e[0],e=e[1],t=D(t.endPos,2),r=t[0],t=t[1];return n===r&&e!==t},enumerable:!1,configurable:!0}),Object.defineProperty(U_.prototype,"tagShapeSpace",{get:function(){var t=cw(this.tagShape);return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),U_.prototype.update=function(t){V_.prototype.update.call(this,t)},U_.prototype.setPointer=function(t){V_.prototype.setPointer.call(this,t),this.adjustPosition()},U_.prototype.setText=function(t){this.tagShape.update({text:t}),this.adjustTag()},U_.prototype.adjustLayout=function(){this.adjustPosition(),this.adjustTag()},U_.prototype.adjustPosition=function(){var t=D(this.localPointer,2),e=t[0],t=t[1],n=D(this.attributes.startPos,2),r=n[0],n=n[1],r=this.getOrientVal([r,t],[e,n]);this.shapesGroup.setLocalPosition(r)},U_.prototype.adjustTag=function(){var t,e,n=this.attributes,r=n.text,i=D(n.startPos,2),o=i[0],i=i[1],n=D(n.endPos,2),a=n[0],n=n[1];r&&""!==r?(this.tagShape.show(),r=r.position,e=(t=this.tagShapeSpace).width,t=t.height,o=(a=D(this.getOrientVal({start:[-e/2,t/2],end:[a-o+e/2,t/2]},{start:[0,0],end:[0,n-i+t]})[r],2))[0],e=a[1],this.tagShape.setLocalPosition(o,e)):this.tagShape.hide()},U_.prototype.getOrientVal=function(t,e){return this.isVertical?e:t},U_.defaultOptions={type:U_.tag="line-crosshair",style:o},g([kw(20)],U_.prototype,"setPointer",null);var V_,Y_=U_;function U_(t){return V_.call(this,vw({},U_.defaultOptions,t))||this}yo(Z_,q_=e),Object.defineProperty(Z_.prototype,"crosshairPath",{get:function(){return this.createCirclePath()},enumerable:!1,configurable:!0}),Z_.prototype.update=function(t){q_.prototype.update.call(this,t)},Z_.prototype.setPointer=function(t){var t=D(t,2),e=t[0],t=t[1],e=(q_.prototype.setPointer.call(this,[e,t]),D(this.localPointer,2)),t=e[0],e=e[1],n=D(this.attributes.center,2),r=n[0],n=n[1],t=this.createCirclePath(Math.pow(Math.pow(t-r,2)+Math.pow(e-n,2),.5));this.crosshairShape.attr({path:t})},Z_.prototype.adjustLayout=function(){this.tagShape.hide()},Z_.prototype.createCirclePath=function(t){var e=this.attributes,n=D(e.center,2),r=n[0],n=n[1],e=e.defaultRadius;return _w(r,n,t||e)},Z_.defaultOptions={type:Z_.tag="circle-crosshair",style:t},g([kw(20)],Z_.prototype,"setPointer",null);var q_,X_,$_=Z_;function Z_(t){return q_.call(this,vw({},Z_.defaultOptions,t))||this}function K_(t){return X_.call(this,vw({},K_.defaultOptions,t))||this}yo(K_,X_=e),Object.defineProperty(K_.prototype,"crosshairPath",{get:function(){return this.createPolygonPath()},enumerable:!1,configurable:!0}),K_.prototype.update=function(t){X_.prototype.update.call(this,t)},Object.defineProperty(K_.prototype,"points",{get:function(){for(var t,e,n,r,i,o,a=this.attributes,s=a.startAngle,c=a.sides,l=2*Math.PI/c,u=[1,0],h=[],f=0;f<c;f+=1)h.push((t=[0,0],e=u,n=[0,0],r=s/180*Math.PI+l*f,o=i=void 0,i=e[0]-n[0],e=e[1]-n[1],o=Math.sin(r),r=Math.cos(r),t[0]=i*r-e*o+n[0],t[1]=i*o+e*r+n[1],t));return h},enumerable:!1,configurable:!0}),K_.prototype.setPointer=function(t){var t=D(t,2),e=t[0],t=t[1],e=(X_.prototype.setPointer.call(this,[e,t]),D(this.localPointer,2)),t=e[0],e=e[1],n=this.attributes.center,r=D(this.intersection([t,e]),2),i=r[0],r=r[1];i&&r&&(t=ww(n,[t,e])/ww(n,[i,r]),e=this.createPolygonPath(t),this.crosshairShape.attr({path:e}))},K_.prototype.adjustLayout=function(){this.tagShape.hide()},K_.prototype.createPolygonPath=function(r){var t=this.attributes,i=t.defaultRadius,t=D(t.center,2),o=t[0],a=t[1],t=this.points.map(function(t,e){var t=D(t,2),t=D(co([0,0],[t[0],t[1]],r||i),2),n=t[0],t=t[1];return[0===e?"M":"L",o+n,a+t]});return t.push(["Z"]),t},K_.prototype.intersection=function(t){for(var e,n,r,i,o,a,s,c,t=D(t,2),l=t[0],u=t[1],h=this.points,t=D(this.attributes.center,2),f=t[0],d=t[1],p=1;p<=h.length;p+=1){var y=D(h[p-1],2),g=y[0],y=y[1],v=D(h[p%h.length],2),m=v[0],v=v[1],g=(i=[f,d],g=[g+f,y+d],y=[m+f,v+d],c=s=a=o=v=m=void 0,v=(r=D(r=[l,u],2))[0],r=r[1],o=(i=D(i,2))[0],i=i[1],a=(g=D(g,2))[0],g=g[1],s=(y=D(y,2))[0],y=y[1],c=[],(y-g)*(o-v)==(i-r)*(s-a)?(i-r)*(a-v)==(g-r)*(o-v)&&(bw(v,o,r,i,a,g)&&xw(c,a,g),bw(v,o,r,i,s,y)&&xw(c,s,y),bw(a,s,g,y,v,r)&&xw(c,v,r),bw(a,s,g,y,o,i)&&xw(c,o,i)):(m=(v*(i-r)+g*(o-v)-r*(o-v)-a*(i-r))/((s-a)*(i-r)-(o-v)*(y-g)),0<=(y=(a*(y-g)+r*(s-a)-g*(s-a)-v*(y-g))/((o-v)*(y-g)-(s-a)*(i-r)))&&y<=1&&0<=m&&m<=1&&(c[0]=v+y*(o-v),c[1]=r+y*(i-r))),c);0!==g.length&&(e=(s=D(g,2))[0],n=s[1])}return[e,n]},K_.defaultOptions={type:K_.tag="polygon-crosshair",style:pt},g([kw(20)],K_.prototype,"setPointer",null);yo(eM,J_=O),Object.defineProperty(eM.prototype,"decorationType",{get:function(){var t=this.attributes.type;return t&&"none"!==t&&dg(t)?t.map(function(t){return dg(t)?t:[t,"solid"]}):"none"},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"doubleSpacing",{get:function(){return 2*this.attributes.style.lineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"hangingRate",{get:function(){return this.attributes.hangingRate},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"dashedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[2*t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"dottedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"solidCfg",{get:function(){return{lineDash:[0,0]}},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"decorationCfg",{get:function(){var r=this,i=this.attributes.style,t=this.decorationType;return"none"===t?[]:t.map(function(t){var e,t=D(t,2),n=t[0],t=t[1];return"wavy"===t?M({path:r.getWavyPath(n)},i):"double"===t?M({path:r.getDoubleLinePath(n)},i):(e={solid:r.solidCfg,dashed:r.dashedCfg,dotted:r.dottedCfg},M(M({path:r.getLinePath(n)},i),e[t]))})},enumerable:!1,configurable:!0}),eM.prototype.update=function(t){var e=this;this.attr(vw({},this.attributes,t)),this.clear(),this.decorationCfg.forEach(function(t){e.appendChild(new wh({style:t}))})},eM.prototype.clear=function(){this.removeChildren()},eM.prototype.getLinePos=function(t){var e=D(this.hangingRate,3),n=e[0],r=e[1],e=e[2],i=this.attributes,o=i.height,i=i.fontSize,a=D([0,0],2),s=a[0],a=a[1],a=("overline"===t?(s=(n=D([0,o*n-i/2],2))[0],n):"line-through"===t?(s=(n=D([0,o*r],2))[0],n):(s=(t=D([0,o*e+i/2],2))[0],t))[1];return[s,a]},eM.prototype.getLinePath=function(t){var e=this.attributes.width,t=D(this.getLinePos(t),2),n=t[0],t=t[1];return[["M",n,t],["L",n+e,t]]},eM.prototype.getDoubleLinePath=function(t){var e,n=this.doubleSpacing,r=this.attributes.width,i=D(this.getLinePos(t),2),o=i[0],i=i[1],a=D([0,0],2),s=a[0],a=a[1];return"line-through"===t&&(s=(e=D([-.5,.5],2))[0],a=e[1]),"underline"===t?(s=(e=D([0,1],2))[0],a=e[1]):"overline"===t&&(s=(e=D([1,0],2))[0],a=e[1]),[["M",o,i+n*s],["L",o+r,i+n*s],["M",o,i+n*a],["L",o+r,i+n*a]]},eM.prototype.getWavyPath=function(t){return[]},eM.tag="decoration",eM.defaultOptions={style:{width:0,height:0,type:"none",hangingRate:[.5,.55,.5],style:{lineWidth:1,stroke:"#000"}}};var J_,Q_,tM=eM;function eM(t){t=J_.call(this,vw({},eM.defaultOptions,t))||this;return t.update({}),t}function nM(t){t=Q_.call(this,vw({},nM.defaultOptions,t))||this;return t.init(),t}yo(nM,Q_=r),Object.defineProperty(nM.prototype,"textWidth",{get:function(){var e=this;return vg(this.renderText.split("\n").map(function(t){return Wx(t,e.font)}))||0},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"textHeight",{get:function(){return cw(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"width",{get:function(){var t=this.attributes.width;return"auto"===t||void 0===t||0===t?this.textWidth:t},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"height",{get:function(){var t=this.attributes.height;return _g(t)&&0!==t?t:cw(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"lineHeight",{get:function(){var t=this.attributes,e=t.lineHeight,t=t.fontSize;return e&&0!==e?e:t},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"capitalizeWord",{get:function(){return this.attributes.text.split("\n").map(function(t){return t.split(" ").map(function(t){return Yx(t,"capitalize")}).join(" ")}).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"text",{get:function(){var t=this.attributes,e=t.transform,t=t.text;return"capitalize"===e?this.capitalizeWord:Yx(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"ellipsisText",{get:function(){var e=this,t=this.text,n=this.attributes,r=n.width,n=n.overflow,i="ellipsis"===n?"...":n;return t.split("\n").map(function(t){return Gx(t,_g(r)?r:1/0,e.font,i)}).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"renderText",{get:function(){var t=this.attributes.width,e=this.attributes.overflow;return e&&!["none","clip","wrap"].includes(e)&&_g(t)?this.ellipsisText:this.text},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"verticalAlign",{get:function(){return this.attributes.verticalAlign},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"font",{get:function(){return Wg(this.attributes,["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","letterSpacing","leading"])},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"fontColor",{get:function(){return this.attributes.fontColor},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"wordWrap",{get:function(){return"wrap"===this.attributes.overflow},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"wordWrapWidth",{get:function(){var t=this.width;return this.wordWrap?t:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"textCfg",{get:function(){var t=this.renderText,e=this.lineHeight,n=this.wordWrap,r=this.wordWrapWidth,i=this.fontColor;return M(M(M({},ew),this.font),{fill:i,wordWrap:n,lineHeight:e,wordWrapWidth:r,text:t,textAlign:"start",textBaseline:"middle"})},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"backgroundCfg",{get:function(){var t=this.width,e=this.height,n=this.attributes.backgroundStyle;return M({x:0,y:0,width:t,height:e},n)},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"decorationLineWidth",{get:function(){var t=this.attributes.fontSize;return Math.floor(2*Math.log10(t))},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"decorationCfg",{get:function(){var t=this.attributes,e=t.decoration,n=t.fontSize,r=this.decorationLineWidth,i=this.fontColor;return this.textShape.getLineBoundingRects().map(function(t){return vw({},{fontSize:n,style:{stroke:i,lineWidth:r}},e,t)})},enumerable:!1,configurable:!0}),Object.defineProperty(nM.prototype,"clipRectCfg",{get:function(){var t=this.height;return{width:this.attributes.width,height:t}},enumerable:!1,configurable:!0}),nM.prototype.init=function(){this.initShape(),this.update({})},nM.prototype.update=function(t){this.attr(vw({},this.attributes,t)),this.render()},nM.prototype.render=function(){var e=this;this.clear(),this.backgroundShape.attr(this.backgroundCfg),this.textShape.attr(this.textCfg),this.layout(),this.decorationGroup.removeChildren(),this.decorationCfg.forEach(function(t){e.decorationGroup.appendChild(new tM({style:t}))})},nM.prototype.clear=function(){var t;(this.backgroundShape.style.clipPath=null)!=(t=this.clipRect)&&t.destroy()},nM.prototype.initShape=function(){this.backgroundShape=new Th({name:"background",style:{width:0,height:0}}),this.decorationGroup=new dh({name:"decoration-group"}),this.textShape=new Ah({name:"text",style:this.textCfg}),this.textShape.appendChild(this.decorationGroup),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape)},nM.prototype.overflow=function(){var t=this.wordWrap,e=this.attributes,n=e.width,e=e.overflow;e&&"none"!==e&&!t&&_g(n)&&"clip"===e&&(this.clipRect=new Th({name:"clip-rect",style:this.clipRectCfg}),this.backgroundShape.style.clipPath=this.clipRect)},nM.prototype.adjustTextAlign=function(){var t=this.textWidth,e=this.attributes,n=e.width,e=e.textAlign;_g(n)&&(n=0,n="start"===e?0:"center"===e?(this.width-t)/2:this.width-t,this.textShape.attr({x:n}))},nM.prototype.adjustVerticalAlign=function(){var t=this.verticalAlign,e=this.textHeight,n=0,n="top"===t?e/2:"middle"===t?this.height/2:this.height-e/2;this.textShape.attr({y:n})},nM.prototype.layout=function(){this.adjustTextAlign(),this.adjustVerticalAlign(),this.overflow()},nM.defaultOptions={type:nM.tag="paragraph",style:{text:"",fontColor:"#000",fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fontVariant:"normal",letterSpacing:0,leading:0,fontStyle:"normal",decoration:{type:"none",style:{}},overflow:"none",backgroundStyle:{},transform:"none",tooltip:!1,tooltipWait:300}};var rM,Q=M(M({},ew),{fill:"rgba(0,0,0,0.45)",fontSize:10,textAlign:"start",textBaseline:"middle",overflow:"clip"}),iM={default:{width:12,height:12,radius:2,stroke:"#dadada",lineWidth:1,fill:"#ffffff",cursor:"pointer"},selected:{width:12,height:12,radius:2,stroke:"#3471F9",lineWidth:1,fill:"#3471F9",cursor:"pointer"}},oM={path:[["M",3,6],["L","5","8.5"],["L","8.5","4"]],lineWidth:1,cursor:"pointer"};function aM(t){return rM.call(this,P({},aM.defaultOptions,t))||this}yo(aM,rM=r),aM.prototype.render=function(t,e){var n=t.label,r=t.boxStyle,i=t.checkedStyle,o=t.checked,t=t.spacing,o=(this.checked=!!o,B(e,".checkbox-content","g").attr("className","checkbox-content").node()),e=Dg({},this.checked?iM.selected:iM.default,r),r=Dg({},oM,i),t=(this.checkboxBoxShape=B(o,".checkbox-box","rect").attr("className","checkbox-box").style("zIndex",(o.style.zIndex||0)-1).call(L,e).node(),B(this.checkboxBoxShape,".checkbox-checked","path").attr("className","checkbox-box-checked").style("stroke","#ffffff").call(L,r),i=this.checkboxBoxShape,e=Number(t),{x:(r=i.getLocalBounds()).halfExtents[0]?r.max[0]+(e||0):i.style.x,y:r.halfExtents[1]?(r.min[1]+r.max[1])/2:i.style.y}),e=t.x,r=t.y;B(o,".checkbox-label","text").attr("className","checkbox-label").style("x",e).style("y",r).call(L,n)},aM.defaultOptions={type:aM.tag="checkbox",style:{x:0,y:0,label:M({text:""},Q),spacing:4,checked:!1}};var sM="gui-poptip",cM="gui-poptip-arrow",lM="gui-poptip-text",uM=((i={})[".".concat(sM)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},i[".".concat(lM)]={"text-align":"center"},i[".".concat(sM,"[data-position='top']")]={transform:"translate(-50%, -100%)"},i[".".concat(sM,"[data-position='left']")]={transform:"translate(-100%, -50%)"},i[".".concat(sM,"[data-position='right']")]={transform:"translate(0, -50%)"},i[".".concat(sM,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},i[".".concat(sM,"[data-position='top-left']")]={transform:"translate(0,-100%)"},i[".".concat(sM,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},i[".".concat(sM,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},i[".".concat(sM,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},i[".".concat(sM,"[data-position='right-top']")]={transform:"translate(0, 0)"},i[".".concat(sM,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},i[".".concat(sM,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},i[".".concat(sM,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},i[".".concat(cM)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},i[".".concat(sM,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},i["[data-position='top'] .".concat(cM)]={bottom:"-2px"},i[".".concat(sM,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},i["[data-position='left'] .".concat(cM)]={right:"-2px"},i[".".concat(sM,"[data-position='right']")]={transform:"translate(5px, -50%)"},i["[data-position='right'] .".concat(cM)]={left:"-2px"},i[".".concat(sM,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},i["[data-position='bottom'] .".concat(cM)]={top:"-2px"},i[".".concat(sM,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},i["[data-position='top-left'] .".concat(cM)]={left:"10px",bottom:"-2px"},i[".".concat(sM,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},i["[data-position='top-right'] .".concat(cM)]={right:"10px",bottom:"-2px"},i[".".concat(sM,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},i["[data-position='left-top'] .".concat(cM)]={right:"-2px",top:"8px"},i[".".concat(sM,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},i["[data-position='left-bottom'] .".concat(cM)]={right:"-2px",bottom:"8px"},i[".".concat(sM,"[data-position='right-top']")]={transform:"translate(5px, 0)"},i["[data-position='right-top'] .".concat(cM)]={left:"-2px",top:"8px"},i[".".concat(sM,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},i["[data-position='right-bottom'] .".concat(cM)]={left:"-2px",bottom:"8px"},i[".".concat(sM,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},i["[data-position='bottom-left'] .".concat(cM)]={top:"-2px",left:"8px"},i[".".concat(sM,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},i["[data-position='bottom-right'] .".concat(cM)]={top:"-2px",right:"8px"},i),hM=void 0;var fM;function dM(t){var e=t&&document.getElementById(t);return e||((e=document.createElement("div")).setAttribute("id",t),document.body.appendChild(e)),e}function pM(t){var n,r;return n=dM,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r=r||n.apply(hM,t)}(t)}function yM(t){t=fM.call(this,P({style:{id:"gui-poptip"}},yM.defaultOptions,t))||this;return t.visibility="visible",t.map=new Map,t.domStyles="",t.initShape(),t.render(t.attributes,t),t}yo(yM,fM=r),Object.defineProperty(yM.prototype,"visible",{get:function(){return"visible"===this.visibility},enumerable:!1,configurable:!0}),yM.prototype.render=function(t,e){this.visibility=this.style.visibility,this.updatePoptipElement()},yM.prototype.update=function(t){this.attr(P({},this.style,t)),this.render(this.attributes,this)},yM.prototype.bind=function(s,c){var l,t,e,u=this;s&&(l=this.style.text,e=function(){u.hideTip()},s.addEventListener("mousemove",t=function(t){var e=s,n=u.style,r=l,i=(c&&(a=(i="function"==typeof c?c.call(null,t):c).html,o=i.target,i=N(i,["html","target"]),n=Dg({},u.style,i),!o&&!1!==o||(e=o),"string"==typeof a&&(r=a)),n.position),o=n.arrowPointAtCenter,a=n.follow,n=n.offset;e?(e=(t=D(function(t,e,n,r,i,o){if(void 0===i&&(i=!1),o=void 0===o?!1:o)return[t,e];var a=(o=n.getBoundingClientRect()).x,s=o.y,c=o.width,l=o.height;switch(r){case"top":return i?[a+c/2,s]:[t,s];case"left":return i?[a,s+l/2]:[a,e];case"bottom":return i?[a+c/2,s+l]:[t,s+l];case"right":return i?[a+c,s+l/2]:[a+c,e];case"top-right":case"right-top":return[a+c,s];case"left-bottom":case"bottom-left":return[a,s+l];case"right-bottom":case"bottom-right":return[a+c,s+l];default:return[a,s]}}(t.clientX,t.clientY,e,i,o,a),2))[0],o=t[1],u.showTip(e,o,{text:r,position:i,offset:n})):u.hideTip()}),s.addEventListener("mouseleave",e),this.map.set(s,[t,e]))},yM.prototype.unbind=function(t){var e,n;this.map.has(t)&&(e=(n=D(this.map.get(t)||[],2))[0],n=n[1],e&&t.removeEventListener("mousemove",e),n&&t.removeEventListener("mouseleave",n),this.map.delete(t))},yM.prototype.clear=function(){this.container.innerHTML=""},yM.prototype.destroy=function(){var t,e=this;vo([],D(this.map.keys()),!1).forEach(function(t){return e.unbind(t)}),null!=(t=this.container)&&t.remove()},yM.prototype.showTip=function(t,e,n){var r,i=Gg(n,"text");i&&"string"!=typeof i||(this.applyStyles(),t&&e&&n&&(r=n.offset,(n=n.position)&&this.container.setAttribute("data-position",n),this.setOffsetPosition(t,e,r),"string"==typeof i&&(n=this.container.querySelector(".".concat(lM)))&&(n.innerHTML=i),this.visibility="visible",this.container.style.visibility="visible"))},yM.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},yM.prototype.getContainer=function(){return this.container},yM.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(sM).concat(t?" ".concat(t):"")},yM.prototype.initShape=function(){var t=this,e=this.style.id;this.container=pM(e),this.container.setAttribute("class",this.getClassName()),this.container.addEventListener("mousemove",function(){return t.showTip()}),this.container.addEventListener("mouseleave",function(){return t.hideTip()})},yM.prototype.updatePoptipElement=function(){var t=this.container,e=(this.clear(),this.style),n=e.id,r=e.template,e=e.text,n=(this.container.setAttribute("id",n),this.container.setAttribute("class",this.getClassName()),'<span class="'.concat(cM,'"></span>'));t.innerHTML=n,xg(r)?t.innerHTML+=r:r&&Ig(r)&&t.appendChild(r),e&&(t.getElementsByClassName(lM)[0].textContent=e),this.applyStyles(),this.container.style.visibility=this.visibility},yM.prototype.applyStyles=function(){var t,e=vw({},uM,this.style.domStyles),e=Object.entries(e).reduce(function(t,e){var e=D(e,2),n=e[0],e=e[1],e=Object.entries(e).reduce(function(t,e){var e=D(e,2),n=e[0],e=e[1];return"".concat(t).concat(n,": ").concat(e,";")},"");return"".concat(t).concat(n,"{").concat(e,"}")},"");this.domStyles!==e&&(this.domStyles=e,(t=this.container.querySelector("style"))&&this.container.removeChild(t),(t=document.createElement("style")).innerHTML=e,this.container.appendChild(t))},yM.prototype.setOffsetPosition=function(t,e,n){var n=D(n=void 0===n?this.style.offset:n,2),r=n[0],n=n[1],n=void 0===n?0:n;this.container.style.left="".concat(t+(void 0===r?0:r),"px"),this.container.style.top="".concat(e+n,"px")},yM.tag="poptip",yM.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:uM,template:'<div class="'.concat(lM,'"></div>')}};class gM extends lh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawText(),this.drawBackground(),this.drawConnector(),this.drawPoints()}get endPoint(){var t,e=this.style["connector"];return Array.isArray(null==e?void 0:e.path)&&e.path.length?([[,e,t]]=e.path.slice(-1),{x:e,y:t}):{x:0,y:0}}drawText(){var t=this.attributes,e=t["textAlign"],t=N(t,["class","connector","startMarker","endMarker","background","transform","textAlign"]),{x:n,y:r}=this.endPoint;this.textShape=C(this.textShape||this.appendChild(new Ah({}))).call(A,t).style("x",+n).style("y",+r).style("textAlign",e||(n<0?"right":0<n?"left":"center")).node()}drawBackground(){var t,e,n,r,i,o,a,s,c,l=this.style["background"];l?(t=l.padding,l=N(l,["padding"]),[t=0,e=0,n=t,r=e]=t||[],i=this.getEulerAngles(),{min:[o,a],halfExtents:[s,c]}=(this.setEulerAngles(0),this.textShape.getLocalBounds()),this.setEulerAngles(i),this.background=C(this.background||this.appendChild(new Th({}))).style("zIndex",-1).style("x",o-r).style("y",a-t).style("width",2*s+r+e).style("height",2*c+t+n).call(A,l).node()):(this.background&&(this.removeChild(this.background),this.background.destroy()),this.background=void 0)}drawConnector(){var t,e=this.style["connector"];e?(t=e.path||function(t){var{min:[t,e],max:[n,r]}=t.getLocalBounds();let i=0,o=0;return 0<t&&(i=t),n<0&&(i=n),0<e&&(o=e),r<0&&(o=r),[["M",0,0],["L",i,o]]}(this.background||this.textShape),this.connector=C(this.connector||this.appendChild(new wh({}))).style("zIndex",-1).style("stroke","black").style("lineWidth",1).call(A,e).style("path",t).node()):(this.connector&&(this.removeChild(this.connector),this.connector.destroy()),this.connector=void 0)}drawPoints(){var{startMarker:t,endMarker:e}=this.style;this.drawStartMarker(t),this.drawEndMarker(e&&Object.assign(Object.assign({},e),this.endPoint))}drawStartMarker(t){var e=this.startMarkerPoint;t?(e||(this.startMarkerPoint=this.appendChild(new Aw({style:{symbol:"circle",size:4}}))),this.startMarkerPoint.update(t)):(e&&(this.removeChild(e),e.destroy()),this.startMarkerPoint=void 0)}drawEndMarker(t){var e=this.endMarkerPoint;t?(e||(this.endMarkerPoint=this.appendChild(new Aw({style:{symbol:"circle",size:4}}))),this.endMarkerPoint.update(t)):(e&&(this.removeChild(e),e.destroy()),this.endMarkerPoint=void 0)}}const vM=t=>{const h=N(t,[]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),{fill:i,stroke:o,fontSize:a}=r,r=N(r,["fill","stroke","fontSize"]),{color:e,text:s="",fontSize:a=a,rotate:c=0,transform:l=""}=e,[[t,u]]=t;return C(new gM({})).call(A,r).style("x",t).style("y",u).style("text",String(s)).style("stroke",e||o).style("fill",e||i).style("fontSize",a).style("transform",l+`rotate(${+c}deg)`).call(A,h).node()}};vM.props={defaultEnterAnimation:"fadeIn"};class mM extends lh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawMarker(),this.drawText()}drawMarker(){const t=this.attributes,{size:s=24}=t,e=N(t,["class","size","textStyle"]);this.badgeMarker=this.badgeMarker||this.appendChild(new Aw({})),this.badgeMarker.className="badge-marker",this.badgeMarker.update(Object.assign(Object.assign({symbol:()=>{var t=s/2,e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,i]=[-e,e-n],[o,a]=[0,0],[e,n]=[e,e-n];return[["M",r,i],["A",t,t,0,1,1,e,n],["L",o,a],["Z"]]}},e),{size:s,x:0,y:0}))}drawText(){var t=function(t){var{min:t,max:e}=t.getLocalBounds();return{x:(t[0]+e[0])/2,y:(t[1]+e[1])/2}}(this.badgeMarker),{text:e="",textStyle:n}=this.style;this.badgeText=this.badgeText||this.appendChild(new Ah({})),C(this.badgeText).attr("className","badge-text").style("x",t.x).style("y",t.y).style("text",e).style("textAlign","center").style("textBaseline","middle").style("fill","#333").style("fontSize",10).call(A,n||{}).node()}}const bM=t=>{const c=N(t,[]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),{fill:i,stroke:o=i}=r,a=N(r,["fill","stroke"]),{color:r,text:e=""}=e,[[t,s]]=t;return C(new mM({})).call(A,a).style("x",t).style("y",s).style("text",String(e)).style("stroke",r||o).style("fill",r||i).call(A,c).node()}},xM=(bM.props={defaultEnterAnimation:"fadeIn"},ix(t=>{var{areaPath:e,connectPath:n,areaStyle:r,connectStyle:i}=t.attributes;C(t).maybeAppend("connect-path",()=>new wh({})).style("d",n).call(A,i),C(t).maybeAppend("area-path",()=>new wh({})).style("d",e).call(A,r)}));const wM=t=>{const{curve:u,gradient:h=!1,defined:f=t=>!Number.isNaN(t)&&null!=t,connectNulls:d=!1}=t,p=N(t,["curve","gradient","defined","connectNulls"]);return(t,e,l,n)=>{var{mark:r,shape:i,defaultShape:o}=e,n=K2(n,r,i,o),r=n["fill"],i=N(n,["fill"]),{color:o=r,seriesColor:n,seriesX:r,seriesY:a}=e,s=(e=e,qv(s=l)?(e=e["transform"],`translate(${(s=s.getCenter())[0]}, ${s[1]}) `+(e||"")):""),e=h&&n?X2(n,r,a,h):o;const c=Object.assign(Object.assign(Object.assign(Object.assign({},i),{stroke:e,fill:e}),s&&{transform:s}),p);var[n,r]=function(e,n){var r=[],i=[],o=[];let a=!1,s=null;var c=e.length/2;for(let t=0;t<c;t++){var l,u,h=e[t],f=e[t+c];[...h,...f].some(t=>!n(t))?a=!0:(r.push(h),i.push(f),a&&s&&(a=!1,[l,u]=s,o.push([l,h,u,f])),s=[h,f])}return[r.concat(i),o]}(t,f),a=j2(p,"connect"),o=!!r.length,i=t=>C(new wh({})).style("d",t).call(A,c).node();return qv(l)?(e=t=>{const n=l.getCenter(),r=t.slice(0,t.length/2),i=t.slice(t.length/2);return t=u2().curve(h2),e=t.curve,o=t.lineX0,a=t.lineX1,s=t.lineY0,c=t.lineY1,t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return p2(o())},delete t.lineX0,t.lineEndAngle=function(){return p2(a())},delete t.lineX1,t.lineInnerRadius=function(){return p2(s())},delete t.lineY0,t.lineOuterRadius=function(){return p2(c())},delete t.lineY1,t.curve=function(t){return arguments.length?e(d2(t)):e()._curve},t.angle((t,e)=>z2(D2(r[e],n))).outerRadius((t,e)=>B2(r[e],n)).innerRadius((t,e)=>B2(i[e],n)).defined((t,e)=>[...r[e],...i[e]].every(f)).curve(u)(i);var e,o,a,s,c},!o||d&&!Object.keys(a).length?i(e(n)):o&&!d?i(e(t)):C(new xM).style("areaStyle",c).style("connectStyle",Object.assign(Object.assign({},a),p)).style("areaPath",e(t)).style("connectPath",r.map(e).join("")).node()):(s=t=>{const n=t.slice(0,t.length/2),r=t.slice(t.length/2);return u2().x((t,e)=>n[e][0]).y1((t,e)=>n[e][1]).y0((t,e)=>r[e][1]).defined((t,e)=>[...n[e],...r[e]].every(f)).curve(u)(n)},!o||d&&!Object.keys(a).length?i(s(n)):o&&!d?i(s(t)):C(new xM).style("areaStyle",c).style("connectStyle",Object.assign(Object.assign({},a),p)).style("areaPath",s(t)).style("connectPath",r.map(s).join("")).node())}},kM=(wM.props={defaultEnterAnimation:"fadeIn"},o=>(t,e,n,r)=>{var i=qv(n)?M2:a2;return wM(Object.assign({curve:i},o))(t,e,n,r)}),EM=(kM.props=Object.assign({},wM.props),t=>{const{alpha:o=.5}=t,a=N(t,["alpha"]);return(t,e,n,r)=>{var i=qv(n)?E2:w2;return wM(Object.assign({curve:i.alpha(o)},a))(t,e,n,r)}}),_M=(EM.props=Object.assign({},wM.props),i=>(t,e,n,r)=>wM(Object.assign({curve:T2},i))(t,e,n,r)),MM=(_M.props=Object.assign({},wM.props),t=>{const c=t["arrow"],l=N(t,["arrow"]);return(t,e,n,r)=>{var i,{mark:o,shape:a,defaultShape:s}=e,r=K2(r,o,a,s),o=r["stroke"],a=N(r,["stroke"]),{color:s=o,transform:r}=e,[e,o]=t,t=Db();return t.moveTo(...e),t.lineTo(...o),c&&([e,i]=U2(e,o,c),t.moveTo(...o),t.lineTo(...e),t.moveTo(...o),t.lineTo(...i)),C(new wh).call(A,a).style("d",t.toString()).style("stroke",s).style("transform",r).call(A,l).node()}}),SM=(MM.props={defaultEnterAnimation:"fadeIn"},t=>{const s=N(t,[]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),i=r["stroke"],o=N(r,["stroke"]),{color:a=i,transform:r}=e,[e,i]=t,t=Db();return t.moveTo(e[0],e[1]),t.bezierCurveTo(e[0]/2+i[0]/2,e[1],e[0]/2+i[0]/2,i[1],i[0],i[1]),C(new wh).call(A,o).style("d",t.toString()).style("stroke",a).style("transform",r).call(A,s).node()}});SM.props={defaultEnterAnimation:"fadeIn"};const TM=t=>{const{cornerRatio:u=1/3}=t,h=N(t,["cornerRatio"]);return(t,e,n,r)=>{var i,o,{mark:a,shape:s,defaultShape:c}=e,r=K2(r,a,s,c),a=r["stroke"],s=N(r,["stroke"]),{color:c=a,transform:r}=e,[e,a]=t,l=(t=e,e=a,a=n,n=u,o=Db(),qv(a)?(i=B2(t,l=a.getCenter()),i=(B2(e,l)-i)*n+i,o.moveTo(t[0],t[1]),q2(o,t,e,l,i)):Uv(a)?(o.moveTo(t[0],t[1]),o.lineTo(t[0]+(e[0]-t[0])*n,t[1]),o.lineTo(t[0]+(e[0]-t[0])*n,e[1])):(o.moveTo(t[0],t[1]),o.lineTo(t[0],t[1]+(e[1]-t[1])*n),o.lineTo(e[0],t[1]+(e[1]-t[1])*n)),o.lineTo(e[0],e[1]),o);return C(new wh).call(A,s).style("d",l.toString()).style("stroke",c).style("transform",r).call(A,h).node()}},OM=(TM.props={defaultEnterAnimation:"fadeIn"},t=>{const u=N(t,[]);return(t,e,n,r)=>{var i,o,a,{mark:s,shape:c,defaultShape:l}=e,r=K2(r,s,c,l),s=r["stroke"],c=N(r,["stroke"]),{color:l=s,transform:r}=e,[e,s]=t,t=Db();return t.moveTo(e[0],e[1]),qv(n)?(n=n.getCenter(),t.quadraticCurveTo(n[0],n[1],s[0],s[1])):([[n,i],[o,a]]=[e,s],q2(t,e,s,[(n+o)/2,(i+a)/2],B2(e,s)/2)),C(new wh).call(A,c).style("d",t.toString()).style("stroke",l).style("transform",r).call(A,u).node()}}),AM=(OM.props={defaultEnterAnimation:"fadeIn"},t=>{const c=N(t,[]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),i=r["stroke"],o=N(r,["stroke"]),{color:a=i,src:r="",size:e=32,transform:i=""}=e,[[t,s]]=t,t=t-Number(e)/2,s=s-Number(e)/2;return C(new vh).call(A,o).style("x",t).style("y",s).style("width",e).style("height",e).style("img",r).style("stroke",a).style("transform",i).call(A,c).node()}});AM.props={defaultEnterAnimation:"fadeIn"};const PM=t=>{const c=N(t,[]);return(t,e,n,r)=>{var{mark:e,shape:i,defaultShape:o,color:a,transform:s}=e,r=K2(r,e,i,o),{fill:e,stroke:i}=r,o=N(r,["fill","stroke"]),r=function(i,t){const o=Db();if(qv(t)){const a=t.getCenter();t=[...i,i[0]];const s=t.map(t=>B2(t,a));return t.forEach((t,e)=>{var n,r;0===e?o.moveTo(t[0],t[1]):(n=s[e],r=i[e-1],void 0!==(e=s[e-1])&&Math.abs(n-e)<1e-10?q2(o,r,t,a,n):o.lineTo(t[0],t[1]))}),o.closePath(),o}return Y2(o,i)}(t,n);return C(new wh).call(A,o).style("d",r.toString()).style("stroke",a||i).style("fill",a||e).style("transform",s).call(A,c).node()}};PM.props={defaultEnterAnimation:"fadeIn"};const NM=t=>{const c=N(t,[]);return(t,e,n,r)=>{var{mark:e,shape:i,defaultShape:o,color:a,transform:s}=e,r=K2(r,e,i,o),{fill:e,stroke:i}=r,o=N(r,["fill","stroke"]),r=function(t,e){var n,[t,r,i,o]=t,a=Db();return qv(e)?(n=B2(e=e.getCenter(),t),a.moveTo(t[0],t[1]),a.quadraticCurveTo(e[0],e[1],i[0],i[1]),q2(a,i,o,e,n),a.quadraticCurveTo(e[0],e[1],r[0],r[1]),q2(a,r,t,e,n),a.closePath()):(a.moveTo(t[0],t[1]),a.bezierCurveTo(t[0]/2+i[0]/2,t[1],t[0]/2+i[0]/2,i[1],i[0],i[1]),a.lineTo(o[0],o[1]),a.bezierCurveTo(o[0]/2+r[0]/2,o[1],o[0]/2+r[0]/2,r[1],r[0],r[1]),a.lineTo(t[0],t[1]),a.closePath()),a}(t,n);return C(new wh).call(A,o).style("d",r.toString()).style("fill",a||e).style("stroke",a||i).style("transform",s).call(A,c).node()}};NM.props={defaultEnterAnimation:"fadeIn"};const CM=t=>{const g=N(t,[]);return(t,e,n,r)=>{var i,o,a,s,c,l,u,{mark:e,shape:h,defaultShape:f,color:d,transform:p}=e,r=K2(r,e,h,f),{fill:e,stroke:h}=r,f=N(r,["fill","stroke"]),y=(r=t,t=n,n=Db(),qv(t)?([i,o]=t=t.getCenter(),a=F2(D2(r[0],t)),s=F2(D2(r[1],t)),y=B2(t,r[2]),c=B2(t,r[3]),l=B2(t,r[8]),u=B2(t,r[10]),t=B2(t,r[11]),n.moveTo(...r[0]),n.arc(i,o,y,a,s),n.arc(i,o,y,s,a,!0),n.moveTo(...r[2]),n.lineTo(...r[3]),n.moveTo(...r[4]),n.arc(i,o,c,a,s),n.lineTo(...r[6]),n.arc(i,o,u,s,a,!0),n.closePath(),n.moveTo(...r[8]),n.arc(i,o,l,a,s),n.arc(i,o,l,s,a,!0),n.moveTo(...r[10]),n.lineTo(...r[11]),n.moveTo(...r[12]),n.arc(i,o,t,a,s),n.arc(i,o,t,s,a,!0)):(n.moveTo(...r[0]),n.lineTo(...r[1]),n.moveTo(...r[2]),n.lineTo(...r[3]),n.moveTo(...r[4]),n.lineTo(...r[5]),n.lineTo(...r[6]),n.lineTo(...r[7]),n.closePath(),n.moveTo(...r[8]),n.lineTo(...r[9]),n.moveTo(...r[10]),n.lineTo(...r[11]),n.moveTo(...r[12]),n.lineTo(...r[13])),n);return C(new wh).call(A,f).style("d",y.toString()).style("stroke",d||h).style("fill",d||e).style("transform",p).call(A,g).node()}};CM.props={defaultEnterAnimation:"fadeIn"};const LM=t=>{const s=N(t,[]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),{stroke:i,lineWidth:o}=r,a=N(r,["stroke","lineWidth"]),{color:r=i,size:i=o}=e,t=(o=t,qv(t=n)?(t=t.getCenter(),r2()({startAngle:0,endAngle:2*Math.PI,outerRadius:B2(o[0],t),innerRadius:B2(o[1],t)})):l2().x(t=>t[0]).y(t=>t[1])(o)),o=(o=n,n=e.transform,qv(o)?([o,e]=o.getCenter(),`translate(${o}, ${e}) `+(n||"")):n);return C(new wh({})).call(A,a).style("d",t).style("stroke",r).style("lineWidth",i).style("transform",o).call(A,s).node()}};LM.props={defaultEnterAnimation:"fadeIn"};class IM extends lh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawPath(),this.drawEndMarker()}drawPath(){var t=this.attributes,e=t["connectorPath"],t=N(t,["connectorPath","class"]);this.connector=C(this.connector||this.appendChild(new wh({}))).style("path",e).call(A,t).node()}drawEndMarker(){var{stroke:t,endMarker:e={}}=this.style,{r:n=4}=e,e=N(e,["r"]);this.endMarker=this.endMarker||this.appendChild(new Aw({})),this.endMarker.update(Object.assign({size:2*n,fill:t},e))}}function jM(t,e,n){return[["M",t-n,e+2*n],["L",t,e],["L",t+n,e+2*n],["Z"]]}function RM(t,e,n){return[["M",t,e],["L",t-n,e-2*n],["L",t+n,e-2*n],["Z"]]}function DM(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}const BM=t=>{const{direction:c="upward",offset:l=12,endMarker:u}=t,h=N(t,["direction","offset","endMarker"]);return(t,e,n,r)=>{var{mark:i,shape:o,defaultShape:a}=e,r=K2(r,i,o,a),{fill:i,stroke:o=i,endMarker:a}=r,i=N(r,["fill","stroke","endMarker"]),{color:r,transform:e}=e,n=function(t,e,n,r){var[e,i]=e;return Uv(t)?[e,[t="downward"===n?Math.min(e[0],i[0])-r:Math.max(e[0],i[0])+r,e[1]],[t,i[1]],i]:(t="downward"===n?Math.max(e[1],i[1])+r:Math.min(e[1],i[1])-r,[e,[e[0],t],[i[0],t],i])}(n,t,c,l),t=(t=n,l2().x(t=>t[0]).y(t=>t[1])(t)),[,,,s]=n,a=P({},a,u);return C(new IM({})).call(A,i).style("connectorPath",t).style("stroke",r||o).style("transform",e).style("endMarker",Object.assign({x:s[0],y:s[1],symbol:function(t){var[,,t,e]=t;return e[0]<t[0]?DM:t[1]>e[1]?jM:RM}(n)},a)).call(A,h).node()}};function FM(t,e){return void 0===t?null:"number"==typeof t?t:(t=+t.replace("%",""),Number.isNaN(t)?null:t/100*e)}function zM(t,e,o,n){var r=o["bounds"];const[[a,s],[i,c]]=r,l=i-a,u=c-s;r=t=>{var{x:e,y:n}=t,r=FM(o.x,l),i=FM(o.y,u);return Object.assign(Object.assign({},t),{x:(r||e)+a,y:(i||n)+s})};return r("left"===t?{x:0,y:u/2,textAnchor:"start",textBaseline:"middle"}:"right"===t?{x:l,y:u/2,textAnchor:"end",textBaseline:"middle"}:"top"===t?{x:l/2,y:0,textAnchor:"center",textBaseline:"top"}:"bottom"===t?{x:l/2,y:u,textAnchor:"center",textBaseline:"bottom"}:"top-left"===t?{x:0,y:0,textAnchor:"start",textBaseline:"top"}:"top-right"===t?{x:l,y:0,textAnchor:"end",textBaseline:"top"}:"bottom-left"===t?{x:0,y:u,textAnchor:"start",textBaseline:"bottom"}:"bottom-right"===t?{x:l,y:u,textAnchor:"end",textBaseline:"bottom"}:"inside"===t?{x:l/2,y:u/2,textAnchor:"center",textBaseline:"middle"}:{})}function GM(t,e,n,r){var{y:i,y1:o}=n,{startAngle:e,endAngle:i,innerRadius:o,outerRadius:a}=Z2(r,e,[i,o]),e=(e+i)/2,i=r.getCenter(),{radius:r=.5}=n,n=("inside"===t?o+(a-o)*r:a)+("inside"===t?0:12);return{x:i[0]+Math.sin(e)*n,y:i[1]-Math.cos(e)*n,textAlign:"center",textBaseline:"middle"}}function WM(t,e,n,r){var i=n["bounds"];return 1===i.length?([i]=i=(i=n).bounds,{x:i[0],y:i[1]}):(Zv(r)?GM:zM)(t,e,n,r)}BM.props={defaultEnterAnimation:"fadeIn"};var HM=Object.freeze({__proto__:null,top:WM,bottom:WM,right:WM,left:WM,topLeft:WM,topRight:WM,bottomLeft:WM,bottomRight:WM,inside:WM,outside:WM,area:function(t,e,n,r){var i=e.length/2;const o=e.slice(0,i),a=e.slice(i);var e=Dv(o,(t,e)=>Math.abs(t[1]-a[e][1])),i=(c=t=>[o[t][0],(o[t][1]+a[t][1])/2])(e=Math.max(Math.min(e,i-2),1)),s=c(e-1),c=F2(D2(c(e+1),s))/Math.PI*180;return{x:i[0],y:i[1],transform:`rotate(${c}deg)`,textAlign:"center",textBaseline:"middle"}}});function VM(t,e,n,r){var i,o=e["position"],o=(i=n,void 0!==(o=o)?o:Zv(i)?"inside":Uv(i)?"right":"top");return Object.assign(Object.assign({},HM[o.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})](o,t,e,n)),r["inside"===o?"innerLabel":"label"])}const YM=t=>(t,e,n,r)=>{var i=e["text"],o=N(e,["text","x","y"]),t=VM(t,e,n,r);return C(new Ah).call(A,t).style("text",""+i).call(A,o).node()},UM=(YM.props={},t=>{var e="#5B8FF9";return Object.assign({},{defaultColor:e,defaultCategory10:"category10",defaultCategory20:"category20",defaultSize:1,elementActiveStroke:"black",label:{fill:"#424E66",fontSize:12},innerLabel:{fill:"rgba(255,255,255,0.85)",fontSize:12},enter:{duration:300,fill:"both",delay:0},title:{fill:"#1D2129",fontSize:14,fontWeight:"bold"},subtitle:{fill:"#424E66",fontSize:10},line:{line:{stroke:e,strokeOpacity:1,lineWidth:1}},point:{point:{r:3,fill:e,fillOpacity:.95,lineWidth:0},hollow:{r:3,stroke:e,strokeOpacity:.95,lineWidth:1},plus:{r:3,stroke:e,strokeOpacity:.95,lineWidth:3},diamond:{r:3,stroke:e,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fill:e,fillOpacity:.95},hollow:{stroke:e,strokeOpacity:1,lineWidth:2}},area:{area:{fill:e,fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fill:e,fillOpacity:.95}},cell:{rect:{fill:e,fillOpacity:.95}},link:{link:{stroke:e,strokeOpacity:1}},vector:{vector:{fill:e,stroke:e,fillOpacity:1}},box:{box:{fill:e,fillOpacity:.95,stroke:e,lineWidth:2}},text:{text:{fill:"#1D2129",fontSize:12}},lineX:{line:{stroke:"#416180",strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:"#416180",strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:"#416180",fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:"#416180",fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:"#416180",strokeOpacity:.45,lineWidth:1,endMarker:{fillOpacity:.85}}},interaction:{active:{line:{line:{lineWidth:3}},interval:{rect:{stroke:"black"}},area:{area:{fillOpacity:.5}}},inactive:{area:{area:{fillOpacity:.3}}},selected:{},disabled:{}}},t)});function qM(t,e){var n;return(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:[1<(n=t.slice(0,e)).length?n[0]+n.slice(2):n,+t.slice(e+1)]}UM.props={};var XM,$M=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ZM(t){var e;if(e=$M.exec(t))return new KM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});throw new Error("invalid format: "+t)}function KM(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function JM(t,e){var n,e=qM(t,e);return e?(n=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+n:n.length>e+1?n.slice(0,e+1)+"."+n.slice(e+1):n+new Array(e-n.length+2).join("0")):t+""}ZM.prototype=KM.prototype,KM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var QM={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>JM(100*t,e),r:JM,s:function(t,e){var n,r,i=qM(t,e);return i?(n=i[0],(i=(i=i[1])-(XM=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1)===(r=n.length)?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+qM(t,Math.max(0,e+i-1))[0]):t+""},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tS(t){return t}var eS,nS=Array.prototype.map,rS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iS(t){var e,s,c,k=void 0===t.grouping||void 0===t.thousands?tS:(s=nS.call(t.grouping,Number),c=t.thousands+"",function(t,e){for(var n=t.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[i=(i+1)%s.length];return r.reverse().join(c)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",E=void 0===t.decimal?".":t.decimal+"",_=void 0===t.numerals?tS:(e=nS.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),o=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"−":t.minus+"",S=void 0===t.nan?"NaN":t.nan+"";function a(t){var l=(t=ZM(t)).fill,u=t.align,h=t.sign,e=t.symbol,f=t.zero,d=t.width,p=t.comma,y=t.precision,g=t.trim,v=t.type,m=("n"===v?(p=!0,v="g"):QM[v]||(void 0===y&&(y=12),g=!0,v="g"),(f||"0"===l&&"="===u)&&(f=!0,l="0",u="="),"$"===e?r:"#"===e&&/[boxX]/.test(v)?"0"+v.toLowerCase():""),b="$"===e?i:/[%p]/.test(v)?o:"",x=QM[v],w=/[defgprs%]/.test(v);function n(t){var e,n,r,i=m,o=b;if("c"===v)o=x(t)+o,t="";else{var a=(t=+t)<0||1/t<0;if(t=isNaN(t)?S:x(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t}(t)),i=((a=a&&0==+t&&"+"!==h?!1:a)?"("===h?h:M:"-"===h||"("===h?"":h)+i,o=("s"===v?rS[8+XM/3]:"")+o+(a&&"("===h?")":""),w)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){o=(46===r?E+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!f&&(t=k(t,1/0));var s=i.length+t.length+o.length,c=s<d?new Array(d-s+1).join(l):"";switch(p&&f&&(t=k(c+t,c.length?d-o.length:1/0),c=""),u){case"<":t=i+t+o+c;break;case"=":t=i+c+t+o;break;case"^":t=c.slice(0,s=c.length>>1)+i+t+o+c.slice(s);break;default:t=c+i+t+o}return _(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=ZM(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor((t=e,((t=qM(Math.abs(t)))?t[1]:NaN)/3)))),r=Math.pow(10,-e),i=rS[8+e/3];return function(t){return n(r*t)+i}}}}function oS(t){var{innerWidth:t,innerHeight:e}=t.getOptions();return[t,e]}function aS(o,t,e,n,r,i,a,s){void 0===e&&void 0===i||o.update(Object.assign(Object.assign({},e&&{tickCount:e}),i&&{tickMethod:i})),e=t,t=i;var c,t=(i=o).getTicks?i.getTicks():t?([l,c]=Sv(e,t=>+t),i=i.getOptions()["tickCount"],t(l,c,i)):e,l=r?t.filter(r):t;const u=(null==(c=o.getFormatter)?void 0:c.call(o))||n,h=function(t,e){var{innerWidth:e,innerHeight:n,insetTop:r,insetBottom:i,insetLeft:o,insetRight:a}=e.getOptions(),[t,r,i]="left"===t||"right"===t?[r,i,n]:[o,a,e];const s=new q1({domain:[0,1],range:[t/i,1-r/i]});return t=>s.map(t)}(a,s);return qv(s)||Uv(s)?(i=l.map((t,e,n)=>{var r,i=(null==(i=o.getBandWidth)?void 0:i.call(o,t))/2||0,i=h(o.map(t)+i);return{value:Uv(s)&&null!=(r=o.getTicks)&&r.call(o)?1-i:i,text:u(t,e,n)}}),(e=(e=s).getOptions().transformations).some(([t])=>t.startsWith("reflect"))&&e.some(([t])=>t.startsWith("transpose"))&&"arcY"===a?i.map(({value:t,text:e})=>({value:1-t,text:e})):i):l.map((t,e,n)=>{var r=(null==(r=o.getBandWidth)?void 0:r.call(o,t))/2||0;return{value:h(o.map(t)+r),text:""+u(t,e,n)}})}function sS(t,e,n,r,i){var o;return qv(o=n)&&Uv(o)||$v(n)?[]:t.map(t=>{t=function(t,e,n,r,i){var[r,o]=r,[i,a]=i,[n,s]=oS(n);let c,l,u,h;return"bottom"===e||"top"===e?(c=l=r+(i-r)*t,u=o,h="bottom"===e?o-s:o+s):(u=h=o+(a-o)*t,c=r,l="left"===e?r+n:r-n),[[c,u],[l,h]]}(t.value,e,n,r,i);return{points:qv(n)?[t[0]]:t}})}f=iS({thousands:",",grouping:[3],currency:["$",""]}),eS=f.format,f.formatPrefix;const cS=t=>{const{position:u,tickFormatter:h=t=>""+t,tickFilter:f,tickCount:d,tickMethod:p}=t,y=N(t,["position","tickFormatter","tickFilter","tickCount","tickMethod"]);return(t,e,n,r)=>{var{domain:e,bbox:i}=e,{x:i,y:o,width:a,height:s}=i,i=[i+a/2,o+s/2],o=aS(t,e,d,h,f,p,u,n),t=Math.min(a,s)/2,[e,a]=function(t){var[,t,e]=(t=t.getOptions()["transformations"]).find(t=>"polar"===t[0]);return[180*+t/Math.PI,180*+e/Math.PI]}(n),[s,c]=function(t){var[,,,t,e]=(t=t.getOptions()["transformations"]).find(t=>"polar"===t[0]);return[+t,+e]}(n),{grid:l=!1}=y,l=l?function(t,e,n,r,i,o,a){const[s,c]=e;var[e,a]=oS(a),e=Math.min(e,a)/2;const l=i*e,u=o*e;return t.map(({value:t})=>{var t=(r-n)*t+n,e=Math.cos(t*Math.PI/180),t=Math.sin(t*Math.PI/180);return{points:[[s+l*e,c+l*t],[s+u*e,c+u*t]]}})}(o,i,e,a,s,c,n):[];return new lE({style:P({},{center:i,radius:t,startAngle:e,endAngle:a,ticks:o,verticalFactor:"arc"===u?1:-1,axisLine:{style:{lineWidth:0,strokeOpacity:0}},grid:{items:l,lineStyle:{stroke:"#1b1e23",strokeOpacity:.1,lineDash:[0,0]}},tickLine:{len:4,style:{lineWidth:1,stroke:"#BFBFBF"}},label:{align:"arcInner"===u?"radial":"tangential",tickPadding:2}})})}},lS=t=>{const{position:m,title:b,tickFormatter:x=t=>""+t,direction:w="left",tickCount:k,tickFilter:E,tickMethod:_}=t,M=N(t,["position","title","tickFormatter","direction","tickCount","tickFilter","tickMethod"]);return(t,e,n,r)=>{var{domain:e,bbox:i}=e,{startPos:o,endPos:a,labelOffset:s,titlePosition:c,titlePadding:l,titleRotate:u,verticalFactor:h,titleOffsetY:f,label:d=!0,labelAlign:p,axisLine:y,tickLine:g=!0}=function(t,e,n){var{x:n,y:r,width:i,height:o}=n;return"bottom"===t?{startPos:[n,r],endPos:[n+i,r],labelOffset:8,titlePosition:"end",titlePadding:2,titleRotate:0,verticalFactor:1}:"left"===t||"centerHorizontal"===t?{startPos:[n+i,r],endPos:[n+i,r+o],titlePosition:"center",titlePadding:6,titleRotate:-90,labelAlign:"end",labelOffset:4,verticalFactor:-1}:"right"===t?{startPos:[n,r],endPos:[n,r+o],titlePosition:"center",titlePadding:16,titleRotate:-90,labelAlign:"start",labelOffset:4,verticalFactor:1}:"arcY"===t?{startPos:[n,r],endPos:[n+i,r+o],titlePosition:"start",titlePadding:4,titleOffsetY:-5,titleRotate:0,labelOffset:"left"===e?4:"right"===e?-4:0,verticalFactor:-1,labelAlign:"center"===e?"center":"right"===e?"start":void 0,axisLine:!1}:{startPos:[n,r+o],endPos:[n+i,r+o],titlePosition:"end",titlePadding:2,titleRotate:0,labelOffset:4,verticalFactor:-1}}(m,w,i),e=aS(t,e,k,x,E,_,m,n),c="arcY"===m||t.getTicks?c:"center",[,v]=n.getCenter(),{grid:t=!!t.getTicks}=M,t=t?sS(e,m,n,o,a):[],n=j2(M,"line");return new Qk({style:P(Object.assign({startPos:o,endPos:a,verticalFactor:h,ticks:e,label:d?Object.assign(Object.assign({tickPadding:s,autoHide:!1,autoRotate:!0},j2(M,"label")),{style:Object.assign(Object.assign({},p&&{textAlign:p}),j2(M,"label"))}):null,axisLine:y||Object.keys(n).length?{stroke:"#BFBFBF",style:n}:null,grid:Object.assign({items:t,lineStyle:{stroke:"#1b1e23",strokeOpacity:.05,lineDash:[0,0]}},"arcY"===m&&{type:"circle",center:[i.x,v+i.y],closed:!0}),tickLine:g?{len:4,style:Object.assign({lineWidth:1,stroke:"#BFBFBF"},j2(M,"tick"))}:null},b&&{title:{content:(o=b,Array.isArray(o)?o.join(", "):o),titleAnchor:c,style:Object.assign({fontWeight:"bold",fillOpacity:1,dy:f,textAnchor:c},j2(M,"title")),titlePadding:l,rotate:u}}))})}},uS=t=>{const{position:i,tickFormatter:e=t=>""+t}=t;var n="string"==typeof e?eS(e):e;const o=Object.assign(Object.assign({},t),{tickFormatter:n});return(t,e,n,r)=>("arc"===i||"arcInner"===i?cS:lS)(o)(t,e,n,r)},hS=(uS.props={defaultPosition:"left",defaultSize:45,defaultOrder:0},t=>uS(t)),fS=(hS.props=Object.assign(Object.assign({},uS.props),{defaultPosition:"bottom"}),t=>uS(t)),dS=(fS.props=Object.assign(Object.assign({},uS.props),{defaultPosition:"left"}),t=>{const{position:l,tickFormatter:u=t=>""+t,dx:h=0,dy:f=0,title:d,cols:p=void 0,autoWrap:y=!1}=t,g=N(t,["position","tickFormatter","dx","dy","title","cols","autoWrap"]);return(e,t,n,r)=>{var{domain:t,bbox:i}=t,{x:i,y:o,width:a,height:s}=i,t=t.map(t=>({id:t,name:u(t),color:e.map(t)})),c=y&&p?a/p:void 0,t=P({},Object.assign(Object.assign({items:t,x:i+h,y:o+f,orient:["right","left","arcCenter"].includes(l)?"vertical":"horizontal",maxWidth:a,maxHeight:s,autoWrap:y,maxItemWidth:c,itemWidth:c,spacing:[8,0],itemName:{style:{fontSize:12,fillOpacity:1,fill:"#000",fontWeight:"lighter",active:{fillOpacity:.8},inactive:{fill:"#d8d8d8"},unchecked:{fill:"#d8d8d8"}}}},d&&{title:{content:Array.isArray(d)?d[0]:d,style:{fontSize:12,fontWeight:"bold",fillOpacity:1}}}),{itemMarker:{size:8,symbol:"circle",style:{fillOpacity:1,inactive:{fillOpacity:.2},unchecked:{fill:"#d8d8d8",stroke:"#d8d8d8"}}},itemBackgroundStyle:{fill:"transparent"}}),Object.assign({},g));return new c_({className:"category-legend",style:t})}}),pS=(dS.props={defaultPosition:"top",defaultOrder:1,defaultSize:40},t=>{const l=t["title"];return(e,t,n,r)=>{var{domain:t,bbox:i}=t,{x:i,y:o}=i,a=(null==(a=e.getTicks)?void 0:a.call(e))||[],[s,c]=t;return new O_({style:Object.assign(Object.assign({x:i,y:o,rail:{length:120,size:12,ticks:a},min:s,max:c,indicator:null,handle:null},l&&{title:{content:Array.isArray(l)?l[0]:l,style:{fontSize:12}}}),{color:t.map(t=>e.map(t))})})}});function yS(e){return class extends lh{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,e;null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)}update(t={}){var e;this.attr(P({},this.attributes,t)),null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)}}}function gS(t,e,n){return t.querySelector(e)?C(t).select(e):C(t).append(n)}pS.props={defaultPosition:"top",defaultOrder:1,defaultSize:40};const vS=yS({render(t,e){const{text:n,style:r,subtitle:i,subtitleStyle:o}=t;t=gS(e,".title","text").attr("className","title").style("fontSize",14).style("textBaseline","top").style("text",n).call(A,r||{}).node().getLocalBounds();gS(e,".sub-title","text").attr("className","sub-title").style("y",t.max[1]+((null===o||void 0===o?void 0:o.spacing)||0)).style("fontSize",12).style("textBaseline","top").call(t=>{if(!i)return t.node().remove();t.node().attr(Object.assign({text:i},o))})}}),mS=t=>{const{text:o,style:a,subtitle:s,subtitleStyle:c}=t;return(t,e,n,r)=>{var{x:e,y:i}=e.bbox;return new vS({style:P({},{style:r.title,subtitleStyle:r.subtitle},{x:e,y:i,style:a,text:o,subtitle:s,subtitleStyle:c})})}};mS.props={defaultPosition:"top",defaultOrder:2,defaultSize:30};class bS{constructor(t){this.$value=t}static of(t){return new bS(t)}call(t,...e){return this.$value=t(this.$value,...e),this}value(){return this.$value}}function xS(t,e,n){return bS.of({}).call(wS,t).call(wS,e).call(wS,n).value()}function wS(t,e){for(var[n,r]of Object.entries(e))void 0!==r&&(t[n]=e[n]);return t}function kS(t,e){var n={};for(const i of e){var r=t.style[i];r&&(n[i]=r)}return n}const ES=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"],_S=u=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],{transform:a,fillOpacity:s,strokeOpacity:c,opacity:l}=o.style,[r,t]=Uv(r)?[[0,t],"scale(1, 0.0001)"]:[[0,0],"scale(0.0001, 1)"],t=[{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0},{transform:(a+" "+t).trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l,offset:.01},{transform:(a+" scale(1, 1)").trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l}],a=(o.setOrigin(r),o.animate(t,xS(i,n,u)));return a.finished.then(()=>o.setOrigin(0,0)),a}},MS=u=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],{transform:a,fillOpacity:s,strokeOpacity:c,opacity:l}=o.style,[r,t]=Uv(r)?[[0,t],"scale(1, 0.0001)"]:[[0,0],"scale(0.0001, 1)"],s=[{transform:(a+" scale(1, 1)").trimStart()},{transform:(a+" "+t).trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l,offset:.99},{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0}],c=(o.setOrigin(r),o.animate(s,xS(i,n,u)));return c.finished.then(()=>o.setOrigin(0,0)),c}},SS=u=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],{transform:a,fillOpacity:s,strokeOpacity:c,opacity:l}=o.style,[r,t]=Uv(r)?[[0,0],"scale(0.0001, 1)"]:[[0,t],"scale(1, 0.0001)"],t=[{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0},{transform:(a+" "+t).trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l,offset:.01},{transform:(a+" scale(1, 1)").trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l}],a=(o.setOrigin(r),o.animate(t,xS(i,n,u)));return a.finished.then(()=>o.setOrigin(0,0)),a}},TS=u=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],{transform:a,fillOpacity:s,strokeOpacity:c,opacity:l}=o.style,[r,t]=Uv(r)?[[0,0],"scale(0.0001, 1)"]:[[0,t],"scale(1, 0.0001)"],s=[{transform:(a+" scale(1, 1)").trimStart()},{transform:(a+" "+t).trimStart(),fillOpacity:s,strokeOpacity:c,opacity:l,offset:.99},{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0}],c=(o.setOrigin(r),o.animate(s,xS(i,n,u)));return c.finished.then(()=>o.setOrigin(0,0)),c}},OS=c=>(t,e,n,r,i)=>{var[t]=t,{fillOpacity:o,strokeOpacity:a,opacity:s}=t.style;return t.animate([{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:o,strokeOpacity:a,opacity:s}],xS(i,n,c))},AS=(OS.props={},c=>(t,e,n,r,i)=>{var[t]=t,{fillOpacity:o,strokeOpacity:a,opacity:s}=t.style;return t.animate([{fillOpacity:o,strokeOpacity:a,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}],xS(i,n,c))});function PS(t,e){var[n,r,i,t]=function(t){var{min:t,max:e}=t.getLocalBounds(),[t,n]=t,[e,r]=e;return[t,n,e-t,r-n]}(t),o=Math.ceil(Math.sqrt(e/(t/i))),a=[],s=t/Math.ceil(e/o);let c=0,l=e;for(;0<l;){var u=Math.min(l,o),h=i/u;for(let t=0;t<u;t++){var f=n+t*h,d=r+c*s;a.push(function(t){var[t,e,n,r]=t;return`
    M ${t} ${e}
    L ${t+n} ${e}
    L ${t+n} ${e+r}
    L ${t} ${e+r}
    Z
  `}([f,d,h,s]))}l-=u,c+=1}return a}function NS(t,e,n,r){var i=qc(e),o=qc(n);return void 0===i||void 0===o?null:(i=[Object.assign({path:i},kS(e,ES)),Object.assign({path:o},kS(n,ES))],e=t.animate(i,r),t.style.transform="scale(1, 1)",t.style.transform="none",e)}AS.props={};const CS=y=>(t,e,n,r,i)=>{[o="pack"]=[y.split];var o="function"==typeof o?o:PS,i=xS(i,n,y),n=t["length"],a=e["length"];if(1===n&&1===a||1<n&&1<a)return[s]=t,[l]=e,NS(s,s,l,i);if(1===n&&1<a){var[s]=t;{var c=s,l=e,u=i,s=o;c.style.visibility="hidden";const d=s(c,l.length);return l.map((t,e)=>{return NS(t,new wh({style:{path:d[e],fill:c.style.fill}}),t,u)})}}if(1<n&&1===a){var[n]=e;{var a=t,h=n,f=i;const p=(e=o)(h,a.length);var{fillOpacity:e,strokeOpacity:t,opacity:n}=h.style,e=h.animate([{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:e,strokeOpacity:t,opacity:n}],f);return[...a.map((t,e)=>{return NS(t,t,new wh({style:{path:p[e],fill:h.style.fill}}),f)}),e]}}return null},LS=(CS.props={},y=>{return Hs({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:x.NUMBER}),(t,e,n,r,i)=>{const[o]=t;if(!qv(r))return _S(y)(t,e,n,r,i);const a=r.getCenter();var{__data__:t,style:e}=o,{radius:e=0}=e,{points:t,y:s,y1:c}=t;const l=r2().cornerRadius(e),u=Z2(r,t,[s,c]),{startAngle:h,endAngle:f}=u,d=new wh({}),p=t=>{d.attr({d:l(t),transform:`translate(${a[0]}, ${a[1]})`});t=qc(d);return d.style.transform="none",t};e=[{waveInArcAngle:h+1e-4},{waveInArcAngle:f}],r=o.animate(e,xS(i,n,y));return r.onframe=function(){o.style.path=p(Object.assign(Object.assign({},u),{endAngle:Number(o.style.waveInArcAngle)}))},r.onfinish=function(){o.style.path=p(Object.assign(Object.assign({},u),{endAngle:f}))},r}}),IS=(LS.props={},()=>t=>{var{event:e,shared:n}=t,{target:e,offsetX:r,offsetY:i}=e,o=(e||{})["className"];return n.mouseX=r,n.mouseY=i,o&&o.includes("element")?n.selectedElements=[e]:n.selectedElements=[],t}),jS=(IS.props={},t=>{const i=t["multiple"];return t=>{var{event:e,shared:n}=t,e=e.composedPath().find(t=>"legend-item"===t.className),r=i&&n.triggerInfo||[];return e&&r.push({id:e.id,scaleType:"color"}),n.triggerInfo=r,t}});jS.props={};var c="object"==typeof j&&j&&j.Object===Object&&j,ut="object"==typeof self&&self&&self.Object===Object&&self,jt=c||ut||Function("return this")(),a=jt.Symbol,u=Object.prototype,RS=u.hasOwnProperty,DS=u.toString,BS=a?a.toStringTag:void 0;var FS=Object.prototype.toString;var zS="[object Null]",GS="[object Undefined]",WS=a?a.toStringTag:void 0;function HS(t){if(null==t)return void 0===t?GS:zS;if(WS&&WS in Object(t)){var e=t,n=RS.call(e,BS),r=e[BS];try{var i=!(e[BS]=void 0)}catch(t){}var o=DS.call(e);return i&&(n?e[BS]=r:delete e[BS]),o}return FS.call(t)}function VS(t){return null!=t&&"object"==typeof t}var YS=Array.isArray;function US(t){return t}var qS="[object AsyncFunction]",XS="[object Function]",$S="[object GeneratorFunction]",ZS="[object Proxy]";function KS(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}var JS=/^(?:0|[1-9]\d*)$/;var QS=9007199254740991;function tT(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=QS}function eT(t){return null!=t&&tT(t.length)&&!function(t){var e;if(e=typeof t,null!=t&&("object"==e||"function"==e))return(e=HS(t))==XS||e==$S||e==qS||e==ZS}(t)}var nT=Object.prototype;function rT(t){return VS(t)&&"[object Arguments]"==HS(t)}var Mt=Object.prototype,iT=Mt.hasOwnProperty,oT=Mt.propertyIsEnumerable,aT=rT(function(){return arguments}())?rT:function(t){return VS(t)&&iT.call(t,"callee")&&!oT.call(t,"callee")};var K="object"==typeof I&&I&&!I.nodeType&&I,l=K&&"object"==typeof module&&module&&!module.nodeType&&module,J=l&&l.exports===K?jt.Buffer:void 0,sT=(J?J.isBuffer:void 0)||function(){return!1},cT={};cT["[object Float32Array]"]=cT["[object Float64Array]"]=cT["[object Int8Array]"]=cT["[object Int16Array]"]=cT["[object Int32Array]"]=cT["[object Uint8Array]"]=cT["[object Uint8ClampedArray]"]=cT["[object Uint16Array]"]=cT["[object Uint32Array]"]=!0,cT["[object Arguments]"]=cT["[object Array]"]=cT["[object ArrayBuffer]"]=cT["[object Boolean]"]=cT["[object DataView]"]=cT["[object Date]"]=cT["[object Error]"]=cT["[object Function]"]=cT["[object Map]"]=cT["[object Number]"]=cT["[object Object]"]=cT["[object RegExp]"]=cT["[object Set]"]=cT["[object String]"]=cT["[object WeakMap]"]=!1;var lT,n="object"==typeof I&&I&&!I.nodeType&&I,uT=n&&"object"==typeof module&&module&&!module.nodeType&&module,hT=uT&&uT.exports===n&&c.process,dt=function(){try{var t=uT&&uT.require&&uT.require("util").types;return t?t:hT&&hT.binding&&hT.binding("util")}catch(t){}}(),Te=dt&&dt.isTypedArray,fT=Te?(lT=Te,function(t){return lT(t)}):function(t){return VS(t)&&tT(t.length)&&!!cT[HS(t)]},dT=Object.prototype.hasOwnProperty;function pT(t,e){var n,r,i,o,a=YS(t),s=!a&&aT(t),c=!a&&!s&&sT(t),l=!a&&!s&&!c&&fT(t),u=a||s||c||l,h=u?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],f=h.length;for(n in t)!e&&!dT.call(t,n)||u&&("length"==n||c&&("offset"==n||"parent"==n)||l&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||(o=void 0,o=typeof(r=n),(i=null==(i=f)?9007199254740991:i)&&("number"==o||"symbol"!=o&&JS.test(r))&&-1<r&&r%1==0&&r<i))||h.push(n);return h}yT=Object.keys,gT=Object;var yT,gT,vT=function(t){return yT(gT(t))},mT=Object.prototype.hasOwnProperty;function bT(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||nT))return vT(t);var e,n,r,i=[];for(r in Object(t))mT.call(t,r)&&"constructor"!=r&&i.push(r);return i}function xT(t){return(eT(t)?pT:bT)(t)}var wT,kT=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[wT?a:++r];if(!1===e(i[s],s,i))break}return t};ET=function(t,e){return t&&kT(t,e,xT)};var ET,_T,MT=function(t,e){if(null!=t){if(!eT(t))return ET(t,e);for(var n=t.length,r=_T?n:-1,i=Object(t);(_T?r--:++r<n)&&!1!==e(i[r],r,i););}return t};function ST(t,e){(YS(t)?KS:MT)(t,"function"==typeof(t=e)?t:US)}function TT(t,e,n){return e<=t&&t<=n}function OT(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function AT(t,e,n){var r=!1,i=t.length;if(!(i<=2)){for(var o,a,s,c=0;c<i;c++){var l=t[c],u=t[(c+1)%i];if(a=u,((s=[e,n])[0]-(o=l)[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&Math.min(o[0],a[0])<=s[0]&&s[0]<=Math.max(o[0],a[0])&&Math.min(o[1],a[1])<=s[1]&&s[1]<=Math.max(o[1],a[1]))return 1;0<OT(l[1]-n)!=0<OT(u[1]-n)&&OT(e-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r}}function PT(t){for(var e,n,r=[],i=t.length,o=0;o<i-1;o++){var a=t[o],s=t[o+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(e=t[0],n=t[i-1],r.push({from:{x:n[0],y:n[1]},to:{x:e[0],y:e[1]}})),r}function NT(t,l){var u=!1;return ST(t,function(t){if(e=t.from,t=t.to,n=l.from,r=l.to,i=n.x-e.x,o=n.y-e.y,a=t.x-e.x,t=t.y-e.y,s=r.x-n.x,r=r.y-n.y,c=null,.001*(a*a+t*t)*(s*s+r*r)<(n=a*r-t*s)*n&&(TT(r=(i*r-o*s)/n,0,1)&&TT((i*t-o*a)/n,0,1)&&(c={x:e.x+r*a,y:e.y+r*t})),c)return!(u=!0);var e,n,r,i,o,a,s,c}),u}function CT(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function LT(e,n){var t,r,i,o,a;return!(e.length<2||n.length<2)&&(t=CT(e),o=CT(n),t=t,!((o=o).minX>t.maxX||o.maxX<t.minX||o.minY>t.maxY||o.maxY<t.minY)&&(r=!1,ST(n,function(t){if(AT(e,t[0],t[1]))return!(r=!0)}),!!r||(ST(e,function(t){if(AT(n,t[0],t[1]))return!(r=!0)}),!!r||(i=PT(e),o=PT(n),a=!1,ST(o,function(t){if(NT(i,t))return!(a=!0)}),a))))}function IT(t){return t.selectAll(".element").nodes().map(n=>{const r=n["__data__"],{seriesX:i=[],seriesY:o=[],seriesTooltip:a=[],seriesTitle:s=[]}=r;return i.length?i.map((t,e)=>Object.assign(Object.assign({},n),{__data__:Object.assign(Object.assign({},r),{x:i[e],y:o[e],title:s[e],tooltip:a[e]})})):n}).flat()}function jT(t,e,n,r="x"){let i=n;if(e.getRange){var o=e.getRange();for(let t=0;t<o.length;t++){var a=o[t],s=e.invert(a),c=e.getBandWidth(s),s=(e.getStep(s)-c)/2;if(a-s<=n&&n<a+c+s){i=a;break}}}return i?Vv(t,({__data__:t})=>Math.pow(t[r]-i,2)):null}const RT=t=>{const{trigger:E,filterBy:_,multiple:M,toggle:S}=t;return t=>{const{event:e,shared:n,selection:r,scale:i,transientLayer:o,coordinate:a}=t;var s,c,l,u,h,f=IT(r),{selectedElements:d=[]}=n;n.selectedElements=[];let p=[];if("axis"===E){var[y,g]=r.select(".plot").node().getBounds().min,{offsetX:v,offsetY:m}=e,[v]=a.invert([v-y,m-g]);const x=jT(f,i.x,v);p=x?f.filter(({__data__:{x:t}})=>t===x.__data__.x):[]}else if("triggerInfo"===E){var{triggerInfo:y=[]}=n;p=(l=i,u=y,f.filter(t=>{var e=t["__data__"];for(const r of u){var n=l[r.scaleType];if(n&&n.invert(e[r.scaleType])===r.id)return!0}}))}else if("rect-mask"===E){const w=o.selectAll(".mask").nodes();p=f.filter(n=>w.some(t=>{return e=n.getRenderBounds(),!((t=t.getRenderBounds()).min[0]>e.max[0]||t.max[0]<e.min[0]||t.min[1]>e.max[1]||t.max[1]<e.min[1]);var e}))}else if("polygon-mask"===E){const k=o.selectAll(".mask").nodes();p=f.filter(r=>k.some(({__data__:{points:t}})=>{var{min:e,max:n}=r.getLocalBounds();return LT(t,[e,[e[0],n[1]],n,[n[0],e[1]]])}))}else{m=e["target"],g=(m||{})["className"];g&&g.includes("element")&&(v=C(m).node()["__data__"],p=_?(s=_,c=v[_],r.selectAll(".element").nodes().filter(({__data__:t})=>t[s]===c)):[m])}[h,y=[]]=[p,d];const b=y.filter(e=>h.find(({__data__:{key:t}})=>t===e.__data__.key)).map(t=>t.__data__.key);return n.selectedElements=p,M&&d.forEach(t=>{b.includes(t.__data__.key)||n.selectedElements.push(t)}),S&&(n.selectedElements=n.selectedElements.filter(t=>!b.includes(t.__data__.key))),t}},DT=(RT.props={},t=>{const a=t["from"];return t=>{const{shared:e,selection:n,scale:r}=t,i=n.select(".category-legend").node();var o;return"triggerInfo"===a?e.selectedLegendItems=e.triggerInfo.map(({id:t})=>i.getItem(t)):"selectedElements"===a&&(o=e.selectedElements.map(({__data__:{color:t}})=>r.color.invert(t)),e.selectedLegendItems=o.map(t=>i.getItem(t))),t}}),BT=(DT.props={},t=>{const n=t["state"];return t=>{var e=t["shared"];return e.currentState=n,t}}),FT=(BT.props={},t=>{const{clear:s,start:c}=t;return t=>{var e,{shared:n,selection:r,event:i}=t,[r,o]=r.select(".plot").node().getBounds().min,{offsetX:i,offsetY:a}=i;return s?n.points=[]:({points:e=[]}=n,e=[...e],i=[i-r,a-o],c?n.points=[...e,[i]]:((r=e.splice(-1,1)[0]||[]).push(i),n.points=[...e,r])),t}}),zT=(FT.props={},t=>{const i=t["clear"];return t=>{var{shared:e,event:n}=t,{offsetX:n,offsetY:r}=n;return i?e.currentPoint=null:e.currentPoint=[n,r],t}});zT.props={};const GT=t=>{const l=t["dim"];return t=>{const{shared:e,coordinate:c}=t;var{points:n=[]}=e;return e.regions=n.map(i=>{{var o=c,a=l,o=o.getOptions(),s=wg(i),i=kg(i);let t=Math.min(s[0],i[0]),e=Math.min(s[1],i[1]),n=Math.abs(i[0]-s[0]),r=Math.abs(i[1]-s[1]);return"x"===a?(e=o.y,r=o.height):"y"===a&&(t=o.x,n=o.width),{x1:t,y1:e,x2:t+n,y2:e+r}}}),t}},WT=(GT.props={},s=>t=>{var{shared:e,theme:n,selectionLayer:r}=t;const{selectedElements:i=[]}=e;e=n.elementActiveStroke;const{color:o=e,border:a}=s;n=i.map(t=>t.__data__);return r.selectAll(".highlight-element").remove(),r.selectAll(".highlight-element").data(n,t=>t.key).join(t=>t.append((t,e)=>i[e].cloneNode()).style("lineWidth",function(){return void 0!==a?a:+this.style.lineWidth||1}).style("stroke",o).attr("className","highlight-element")),t});function HT(t,e,n,r){n.includes(e)?(t.style.fillOpacity=1,t.style.lineWidth=+t.style.lineWidth||1,t.style.stroke=r):(t.style.fillOpacity=.45,t.style.stroke="transparent")}WT.props={};const VT=c=>{const l=c["clear"];return t=>{var{shared:e,selection:n,theme:r,selectionLayer:i}=t,{selectedElements:e=[]}=e,r=r["elementActiveStroke"];const{color:o=r}=c,a=e.map(t=>t.__data__),s=n.selectAll(".element").each(function(){this.style.originVisibility||(this.style.originVisibility=this.style.visibility||"visible"),this.style.visibility=a.length?"hidden":this.style.originVisibility}).nodes();r=a.length?s.map(t=>t.__data__):[];return i.selectAll(".highlight-element").data(l?[]:r,(t,e)=>e).join(t=>t.append((t,e)=>s[e].cloneNode(!0)).attr("className","highlight-element").style("visibility","visible").each(function(t){HT(this,t,a,o)}),t=>t.each(function(t){HT(this,t,a,o)}),t=>t.remove()),t}};function YT(t){t.selectAll(".tooltip-crosshairs").each(function(){this.hide()})}function UT(t){t.selectAll(".tooltip-markers").each(function(){this.hide()})}function qT(t){t.selectAll(".tooltip").each(function(){this.hide()}),YT(t),UT(t)}function XT(t,e,n={}){var r,i,o,{transientLayer:t,coordinate:a}=t;e?(r=n.follow,n=N(n,["follow"]),{x:e,y:i,items:o}=e,a=function(t,e,n){let r,i;var o,a,s,{type:n="y",line:c={lineDash:[4,4],lineWidth:1},text:l=!1}=n;return qv(t)?(o=B2(a=t.getCenter(),e),i={id:"circle-y",center:a,defaultRadius:o,type:"circle",text:l,lineStyle:c},r={id:"line-x",startPos:[a[0],a[1]],endPos:e,text:l,lineStyle:c}):({x:o,y:a,width:t,height:s}=t.getOptions(),r={id:"line-x",startPos:[o,e[1]],endPos:[o+t,e[1]],text:l,lineStyle:c},i={id:"line-y",startPos:[e[0],a],endPos:[e[0],a+s],text:l,lineStyle:c}),"x"===n?[r]:"xy"===n?[r,i]:[i]}(a,r?[e,i]:[o[0].x,o[0].y],n),t.selectAll(".tooltip-crosshairs").data(a,(t,e)=>e).join(t=>t.append(t=>{var e=t["type"],t=N(t,["type"]);return new("circle"===e?$_:Y_)({className:"tooltip-crosshairs",style:t})}),t=>t.each(function(t){this.update(t),this.show()}),t=>t.remove())):YT(t)}function $T(t,e){return Object.entries(t).filter(([t])=>t.startsWith(e)).map(([,t])=>t)}function ZT(t,e){var n;return(null==(n=null==t?void 0:t.getBandWidth)?void 0:n.call(t,t.invert(e)))||0}function KT(t,e,n,r){const{shared:i,scale:l,coordinate:u}=t;var{mouseX:t,mouseY:o,selectedElements:a}=i;const s=r["defaultColor"],c=l["x"];r=a.map(t=>{const i=t["__data__"],{seriesX:o=[],seriesY:a=[],seriesTooltip:s=[],seriesTitle:c=[]}=i;var e;return o.length?o.map((t,e)=>{var[n,r]=u.map([o[e],a[e]]);return{x:n,y:r,datum:Object.assign(Object.assign({},i),{x:o[e],title:c[e],tooltip:s[e]})}}):([t,e]=function(t,e,n){var r=$T(t,"x"),t=$T(t,"y");const i=e["x"];return e=r.reduce((t,e)=>t+e+ZT(i,e)/2,0),n.map([e/r.length,Math.min.apply(null,t)])}(i,l,u),{x:t,y:e,datum:i})}).flat();const h=u.invert([e,n])[0],f=Vv(r,({datum:{x:t}})=>Math.pow(t+ZT(c,t)/2-h,2));return f&&(a=r.filter(({datum:{x:t}})=>t===f.datum.x).map(t=>{const{datum:e,x:r,y:i}=t,{color:o=s,title:a}=e;return Object.entries(e).filter(([t])=>t.startsWith("tooltip")).map(([t,e])=>{var{field:t,title:t=t}=l[t].getOptions(),n="object"==typeof e&&!(e instanceof Date);return{x:r,y:i,title:a,color:o,name:t,value:n?e.value:void 0===e?e:""+e}}).filter(({value:t})=>void 0!==t)}).flat()).length?{x:t,y:o,title:a[0].title,items:a}:null}VT.props={};const JT=t=>{const{showCrosshairs:d,showMarkers:p}=t,y=N(t,["showCrosshairs","showMarkers"]);return t=>{var e,n,r,i,o,a,{scale:s,coordinate:c,theme:l,selection:u,shared:h,transientLayer:f}=t,s=s["tooltip"];return void 0===s?qT(f):({mouseX:s,mouseY:h}=h,n=(u=u.select(".plot").node()).getRootNode().defaultView.getConfig().container,{x:c,y:r,width:i,height:o}=c.getOptions(),[u,e]=u.getBounds().min,n=function(t,e,n){let r=t.select(".tooltip").node();return r||(r=new I_({className:"tooltip",style:{container:{x:0,y:0},items:[],bounding:n,position:"bottom-right",offset:[10,10],style:{".tooltip":{"max-width":"170px"},".tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}}}}),t.append(()=>r),e.appendChild(r.HTMLTooltipElement)),r}(f,n,{x:u+c,y:e+r,width:i,height:o}),(c=KT(t,s-u,h-e,l))?({title:r,items:i}=c,n.update({x:s,y:h,title:r,position:"bottom-right",offset:[14,10],items:i}),n.show()):qT(f),[o,u,a={}]=[t,p?c:null,y.markers],o=o.transientLayer,u?(u=(u=u.items).map(t=>{var{x:t,y:e,color:n}=t;return Object.assign({cx:t,cy:e,fill:n,r:3,stroke:"#fff",lineWidth:1.5,zIndex:1},a)}),o.selectAll(".tooltip-markers").data(u,(t,e)=>e).join(t=>t.append(t=>new sh({className:"tooltip-markers",style:t})),t=>t.each(function(t){this.attr(t),this.show()}),t=>t.remove())):UT(o),XT(t,d?c:null,y.crosshairs)),t}},QT=(JT.props={},()=>t=>{var{shared:e,update:n}=t,e=e["updatedOptions"];return n(e),t}),t5=(QT.props={},t=>{const u=t["reset"];return t=>{const{shared:n,scale:e,options:r}=t;var i=n["selectedElements"];n.originTransform||(n.originTransform=r.marks[0].data.transform||[]);const o=e["x"],a=!!o.getBandWidth,s=i.map(t=>t.__data__.title),c=Math.min.apply(null,s),l=Math.max.apply(null,s);return n.updatedOptions=(()=>{if(u)r.marks[0].data.transform=n.originTransform;else if(0<s.length){var t=[...n.originTransform],e=o.getOptions()["field"];t.push({type:"filterBy",fields:[e],callback:t=>a?s.includes(t):t>=c&&t<=l});const s=r.marks[0]["data"];Array.isArray(s)?r.marks[0].data={value:s,transform:t}:r.marks[0].data.transform=t}return r})(),t}});function e5(t,e,n){n.includes(e)?t.style.visibility=t.style.originVisibility:t.style.visibility="hidden"}t5.props={};const n5=()=>t=>{var{shared:e,selection:n,selectionLayer:r}=t,{selectedElements:e=[]}=e;const i=e.map(t=>t.__data__),o=n.selectAll(".element").each(function(){this.style.originVisibility||(this.style.originVisibility=this.style.visibility||"visible"),this.style.visibility=i.length?"hidden":this.style.originVisibility}).nodes();e=i.length?o.map(t=>t.__data__):[];return r.selectAll(".filtered-element").data(e,(t,e)=>e).join(t=>t.append((t,e)=>o[e].cloneNode(!0)).attr("className","filtered-element").each(function(t){e5(this,t,i)}),t=>t.each(function(t){e5(this,t,i)}),t=>t.remove()),t};n5.props={};const r5=t=>{const{items:a,state:s="active"}=t;return t=>{var e,n,{shared:r,selection:i}=t;if(a.includes("legendItem")){var{selectedLegendItems:r=[]}=r;const o=i.select(".category-legend").node();"highlight"===s?(e=o,i=r,n=(null==e?void 0:e.getItemsStates())||[],i.length?(n.forEach(({id:t})=>e.setItemState(t,"inactive",!0)),i.forEach(t=>t.setState("inactive",!1))):n.forEach(({id:t})=>e.setItemState(t,"inactive",!1))):(((null===o||void 0===o?void 0:o.getItemsStates())||[]).forEach(({id:t})=>o.setItemState(t,s,!1)),r.forEach(t=>t.setState(s,!0)))}return t}},i5=(r5.props={},p=>t=>{const{event:e,selection:n,shared:r,options:i}=t;var{updatedOptions:o={}}=r,{offsetX:a,offsetY:s}=e,{min:[c,l],max:[u,h]}=n.select(".main").node().getBounds();if(a<c||u<a||(s<l||h<s))r.updatedOptions=P({},i);else{const f=a-c,d=s-l;r.updatedOptions=P(o,(()=>{var t,e,{coordinate:n=[]}=i,r=n.findIndex(t=>t.type.startsWith("fisheye"));return-1!==r?(t=n[r],t=Object.assign(Object.assign(Object.assign({},t),p),{type:"fisheye",focusX:f,focusY:d,isVisual:!0}),(e=[...n]).splice(r,1,t),n[r]=t,Object.assign(Object.assign({},i),{coordinate:e})):Object.assign(Object.assign({},i),{coordinate:[...n,Object.assign(Object.assign({type:"fisheye"},p),{focusX:f,focusY:d,isVisual:!0}),{type:"cartesian"}]})})())}return t}),o5=(i5.props={},t=>{const r=t["cursor"];return t=>{var{selection:e,event:n}=t,n=n["target"];return e.node().getRootNode().defaultView.getContextService().getDomElement().style.cursor=r||(null==(e=n.style)?void 0:e.cursor),t}});o5.props={};const a5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",se:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize"};const s5=t=>{const{maskType:i,fill:o="#C5D4EB",fillOpacity:s=.3}=t;return t=>{var{shared:e,transientLayer:n}=t,{regions:e=[],points:r=[]}=e,r=("polygon"===i?r:e.map(t=>{var{x1:t,y1:e,x2:n,y2:r}=t;return[[t,e],[n,e],[n,r],[t,r]]})).map((t,e)=>({draggable:!0,d:Y2(Db(),t).toString(),fill:o,fillOpacity:s,stroke:o,lineWidth:.5,points:t,cursor:"move",index:e}));n.selectAll(".mask").data(r,(t,e)=>e).join(t=>t.append(t=>new wh({className:"mask",style:t})),t=>t.each(function(t){this.attr(t),this.dispatchEvent(new Gu("maskChange"))}),t=>t.remove());const a="polygon"===(r=i)?[]:"rectX"===r?["w","e"]:"rectY"===r?["n","s"]:["n","e","s","w","ne","se","sw","nw"];r=e.map((t,e)=>{const{x1:n,y1:r,x2:i,y2:o}=t;return a.map(t=>({draggable:!0,x:t.includes("e")?i-3:n-3,y:t.includes("s")?o-3:r-3,width:"n"===t||"s"===t?i-n+6:6,height:"e"===t||"w"===t?o-r+6:6,className:"handle handle-"+t,fill:"transparent",type:t,cursor:a5[t],index:e}))}).flat();return n.selectAll(".handle").data(r,(t,e)=>e).join(t=>t.append(t=>{var e=t["className"],t=N(t,["className"]);return new Th({className:e,style:t})}),t=>t.each(function(t){this.attr(t)}),t=>t.remove()),t}},c5=(s5.props={},yS({render(t,e){var{text:t,textStyle:n,fill:r,stroke:i,padding:o=[],radius:a}=t,[o,s=o,c=o,l=s]=o,{min:t,halfExtents:n}=gS(e,".button-text","text").attr("className","button-text").style("x",l).style("y",o+(n.fontSize||12)/2).style("fontSize",12).style("textAlign","end").style("textBaseline","middle").style("fill","#3080d0").style("text",t).style("z-index",1).call(A,n).node().getLocalBounds(),u=2*n[0],n=2*n[1];gS(e,".button-rect","rect").attr("className","button-rect").style("x",t[0]-l).style("y",t[1]-o).style("width",u+l+s).style("height",n+o+c).style("radius",a).style("fill",r).style("stroke",i).style("z-index",0)}}));const l5=t=>{const{hide:i,fill:o="#f7f7f7",stroke:a="#ccc",padding:s=[4,5,4,5],text:c="Reset",radius:l=4,textStyle:u={},position:h}=t;return t=>{var{transientLayer:e,coordinate:n}=t,r={text:c,fill:o,stroke:a,textStyle:u,padding:s,radius:l},n=function(t,e,n){var{x:e,y:r,width:i}=e.getOptions(),[n,n=n]=n,o=[8,4];return"top-left"===t?{x:e+o[0],y:r+o[1],textStyle:{textAlign:"start"}}:{x:e+i-o[0]-n,y:r+o[1],textStyle:{textAlign:"end"}}}(h,n,s),r=P({},r,n);return e.selectAll(".button").data(i?[]:[r],(t,e)=>e).join(t=>t.append(t=>new c5({className:"button",style:t})),t=>t.each(function(t){this.update(t)}),t=>t.remove()),t}},u5=(l5.props={},{selection:1,n:0,e:1,s:0,w:-1,nw:-1,ne:1,se:1,sw:-1}),h5={selection:1,n:-1,e:0,s:1,w:0,nw:-1,ne:-1,se:1,sw:1},f5=()=>t=>{var{shared:i,event:o}=t,{target:o,offsetX:a,offsetY:s}=o,[c=a,l=s]=i.currentPoint||[];if(o){const u=a-c,h=s-l;a=o.style["index"];if(2<=(null==(c=i.points[a])?void 0:c.length)&&0<=a){s=i.points[a];if(o.className.includes("handle")){l=o.style["type"],c=u5[l],o=h5[l];let[t,e]=wg(s),[n,r]=kg(s);c<0&&(n=Math.max(t+=u,n)),0<c&&(t=Math.min(t,n+=u)),o<0&&(r=Math.max(e+=h,r)),0<o&&(e=Math.min(e,r+=h)),i.points[a]=[[t,e],[n,r]]}else i.points[a]=s.map(([t,e])=>[t+u,e+h])}}return t},d5=(f5.props={},t=>{const{clear:l,fill:u="#CCD6EC",fillOpacity:h=.3}=t;return t=>{var{coordinate:n,event:r,scale:i,selection:o,transientLayer:e}=t;if(!qv(n)){var i=i.x,[a,s]=o.select(".plot").node().getBounds().min,{offsetX:r,offsetY:c}=r,[r]=n.invert([r-a,c-s]),a=[],c=jT(IT(o),i,r);if(!l&&c){s=c.__data__["x"],o=i.invert(s);let t=.01,e=.01;i.getBandWidth&&(r=i.getBandWidth(o),c=(i.getStep(o)-r)/2,t=c,e=r+c);var[i,o]=n.map([s-t,0]),[r,c]=n.map([s+e,1]);a.push({x:i,y:o,width:r-i,height:c-o})}return e.style("zIndex",-1).selectAll(".active-region").data(a,(t,e)=>e).join(t=>t.append("rect").attr("className","active-region").style("fill",u).style("fillOpacity",h).each(function(t){this.attr(t)}),t=>t.each(function(t){this.attr(t)}),t=>t.remove()),t}}}),p5=(d5.props={},t=>{const r=t["tip"];return t=>{var{shared:e,event:n}=t,n=n["target"];return e.tip=null!==r&&void 0!==r?r:n.style.tip,t}}),y5=(p5.props={},(t="",e="")=>`<div style="
background-color:rgba(0,0,0,0.75);color:#fff;width:max-content;padding:4px;font-size:12px;border-radius:2.5px;
box-shadow:0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05);${e||""}
">${t||""}</div>`),g5=(h={})=>{const f=h["htmlStyle"];return t=>{var{transientLayer:e,selection:n,shared:r}=t,{mouseX:r,mouseY:i,tip:o}=r,[n,a]=n.select(".plot").node().getBounds().min,[s,c]=[8,8];let l=r-n+s,u=i-a+c;void 0!==h.x&&(l=h.x-n),void 0!==h.y&&(u=h.y-a);r=e.node();return o?gS(r,".tip-popover",()=>new yh({className:"tip-popover",style:{innerHTML:y5("",f)}})).style("x",l).style("y",u).style("innerHTML",y5(o,f)):null!=(s=r.querySelector(".tip-popover"))&&s.remove(),t}},v5=(g5.props={},()=>({actions:[{action:"enter",events:["plot:mouseenter"]},{action:"hover",events:["plot:mousemove"]},{action:"leave",events:["plot:mouseleave"]}]})),m5=()=>({actions:[{action:"enter",events:["plot:touchstart"]},{action:"hover",events:["plot:touchmove"]},{action:"leave",events:["plot:touchend"]}]});function b5(r,t={"action.surfacePointSelection":IS,"action.elementSelection":RT,"action.recordState":BT,"action.recordPoint":FT,"action.recordCurrentPoint":zT,"action.recordRegion":GT,"action.activeElement":WT,"action.highlightElement":VT,"action.filterElement":n5,"action.legendItemSelection":DT,"action.triggerInfoSelection":jS,"action.setItemState":r5,"action.tooltip":JT,"action.fisheyeFocus":i5,"action.plot":QT,"action.filter":t5,"action.cursor":o5,"action.mask":s5,"action.button":l5,"action.move":f5,"action.activeRegion":d5,"action.recordTip":p5,"action.poptip":g5,"interactor.mousePosition":v5,"interactor.touchPosition":m5}){const[i]=x5("interactor",t),[y]=x5("action",t);return t=>{var{start:t=[],end:e=[],interactors:n=[]}=r(t);const d=[...t,...e],p=Pv(n.map(i).flatMap(({actions:t})=>t.flatMap(({action:e,events:t})=>t.map(t=>[t,e]))),t=>t[1]);return(t,e)=>{const n=function(t,e){var{view:t,update:n,container:r,options:i}=t,r=C(r),o=r.select(".plot").append("g").attr("className","selection").style("fill","transparent"),a=r.select(".plot").append("g").attr("className","transient").style("fill","transparent");return Object.assign(Object.assign({},t),{update:n,options:i,selection:r,selectionLayer:o,transientLayer:a,viewInstances:e,shared:{}})}(t,e);var r=n["selection"];for(const{trigger:c,isEnable:l=()=>!0,action:u,throttle:h}of d){var i,o=[u].flat(1).map(t=>"object"==typeof t?t:{type:t}).map(y);const f=(h?t=>Vg(t,h.wait,h):t=>t)(N2(o));for([i]of p.get(c)||[[c]]){var[a,s]=i.includes(":")?i.split(":"):[null,i];(a?r.selectAll("."+a):r).on(s,t=>{t=Object.assign({event:t},n);l(t)&&f(t)})}}}}}function x5(e,n){const r=t=>{return"string"!=typeof t?t:n[t=e+"."+t]||C2("Unknown Component: "+t)};return[t=>{var e=t["type"],t=N(t,["type"]);return r(e)(Object.assign({},t))},r]}const w5=b5(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",action:[{type:"elementSelection"},Object.assign({type:"activeElement"},t)]}],end:[{trigger:"leave",action:[{type:"elementSelection"},Object.assign({type:"activeElement"},t)]}]}));w5.props={};const k5=b5((t={})=>{var{singleMode:e=!1}=t;return{start:[{trigger:"plot:pointerdown",action:[{type:"elementSelection",multiple:!e,toggle:!0},Object.assign({type:"activeElement",border:2},t)]}]}});k5.props={};const E5=b5(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",action:[{type:"surfacePointSelection"},{type:"elementSelection",trigger:null!=t&&t.shared?"axis":"item"},Object.assign({type:"tooltip"},t)],throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"leave",action:[{type:"elementSelection",clear:!0},Object.assign({type:"tooltip",hide:!0},t)]}]}));E5.props={};const _5=b5(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",throttle:{wait:50,leading:!0,trailing:!1},action:[Object.assign({type:"fisheyeFocus"},t),{type:"plot"}]}],end:[{trigger:"leave",action:[Object.assign({type:"fisheyeFocus"},t),{type:"plot"}]}]}));_5.props={};const M5=b5(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));M5.props={};const S5=b5(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t),{type:"legendItemSelection",from:"selectedElements"},{type:"setItemState",items:["legendItem"],state:"highlight"}]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t),{type:"legendItemSelection",from:"selectedElements"},{type:"setItemState",items:["legendItem"],state:"highlight"}]}]}));S5.props={};const T5=b5(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection",filterBy:"x"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));T5.props={};const O5=b5(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection",filterBy:"color"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));O5.props={};const A5=b5(t=>({start:[{trigger:"legend-item:pointermove",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"active"},{type:"elementSelection",trigger:"triggerInfo"},{type:"activeElement"}]}],end:[{trigger:"legend-item:pointerleave",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"active"},{type:"elementSelection",trigger:"triggerInfo"},{type:"activeElement"}]}]}));A5.props={};const P5=b5(t=>({start:[{trigger:"legend-item:pointermove",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"highlight"},{type:"elementSelection",trigger:"triggerInfo"},{type:"highlightElement"}]}],end:[{trigger:"legend-item:pointerleave",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"highlight"},{type:"elementSelection",trigger:"triggerInfo"},{type:"highlightElement"}]}]}));function N5(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("button"))}P5.props={};const C5=b5(t=>{var t=t["brushType"],e="polygon"===t?"polygon":"rect",n="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointermove",isEnable:t=>!N5(t),action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointermove",isEnable:t=>N5(t),action:[{type:"cursor",cursor:"pointer"},{type:"button"}]},{trigger:"plot:pointermove",isEnable:t=>"filtered"===t.shared.currentState&&!N5(t),action:[{type:"button",fill:"#f7f7f7"}]},{trigger:"plot:pointerdown",isEnable:t=>!N5(t),action:[{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:n},{type:"recordState",state:"brushing"}]},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordPoint"},{type:"recordRegion",dim:n},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",isEnable:t=>!N5(t),action:[{type:"recordState",state:null},{type:"elementSelection",trigger:e+"-mask"},{type:"filter"},{type:"plot"},{type:"recordState",state:"filtered"},{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"},{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"},{type:"button"}]},{trigger:"plot:click",isEnable:t=>N5(t),action:[{type:"button",hide:!0},{type:"filter",reset:!0},{type:"plot"},{type:"recordState",state:null}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]}]}});function L5(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("mask"))}function I5(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("handle"))}function j5(t){return!L5(t)&&!I5(t)}function R5(t){return L5(t)||I5(t)}C5.props={};const D5=b5(t=>{var{brushType:t,multiple:e}=t,n="polygon"===t?"polygon":"rect",r="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointermove",isEnable:t=>j5(t),action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointermove",isEnable:t=>!j5(t),action:[{type:"cursor"}]},{trigger:"plot:pointerdown",isEnable:t=>j5(t),action:[e?null:{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:r},{type:"recordState",state:"brushing"}].filter(t=>!!t)},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState&&!L5(t),action:[{type:"recordPoint"},{type:"recordRegion",dim:r},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:n+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordState",state:null}]},{trigger:"plot:dragstart",isEnable:t=>R5(t),action:[{type:"recordCurrentPoint"}]},{trigger:"plot:drag",isEnable:t=>R5(t)&&t.shared.currentPoint,action:[{type:"move"},{type:"recordRegion",dim:r},{type:"mask",maskType:t},{type:"recordCurrentPoint"}]},{trigger:"plot:dragend",isEnable:t=>R5(t),action:[{type:"recordCurrentPoint",clear:!0}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]},{trigger:"plot:click",isEnable:t=>2===t.event.detail&&!L5(t),action:[{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"},{type:"elementSelection",trigger:n+"-mask"},{type:"highlightElement"}]}]}});D5.props={};const B5=b5(t=>{var t=t["brushType"],e="polygon"===t?"polygon":"rect",n="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointerenter",action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointerdown",action:[{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:n},{type:"recordState",state:"brushing"}]},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordPoint"},{type:"recordRegion",dim:n},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",action:[{type:"recordState",state:null},{type:"elementSelection",trigger:e+"-mask"},{type:"filterElement"},{type:"highlightElement",clear:!0},{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]}]}});B5.props={};const F5=b5((t={})=>({start:[{trigger:"plot:mousemove",action:[Object.assign({type:"activeRegion"},t)]},{trigger:"plot:mouseleave",action:[{type:"activeRegion",clear:!0}]}]}));F5.props={};const z5=b5(t=>({start:[{trigger:"mousemove",throttle:{wait:50,leading:!0,trailing:!1},action:[{type:"surfacePointSelection"},{type:"recordTip"},Object.assign({type:"poptip"},t)]}]}));function G5(n){return(t,...e)=>P({},n(t,...e),t)}function W5(n){return(t,...e)=>P({},t,n(t,...e))}function H5(t,e){var n;return t?Array.isArray(t)?t:({value:n=e}=t,t=N(t,["value"]),Object.assign(Object.assign({},t),{value:n})):e}z5.props={};const V5=()=>t=>{var e=t["children"];if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:i,height:o,data:a}=t;return e.map(t=>{var e=t["data"],t=N(t,["data"]);return Object.assign(Object.assign({},t),{data:H5(e,a),x:n,y:r,width:i,height:o})})},Y5=(V5.props={},()=>e=>{var n=e["children"];if(!Array.isArray(n))return[];var{direction:t="row",ratio:r=n.map(()=>1),padding:i=0,data:o}=e,[a,s,c,l]="col"===t?["y","height","width","x"]:["x","width","height","y"];const u=r.reduce((t,e)=>t+e),h=e[s]-i*(n.length-1);var f=r.map(t=>h*(t/u)),d=[];let p=e[a]||0;for(let t=0;t<f.length;t+=1){var y=n[t],g=y["data"],y=N(y,["data"]),g=H5(g,o);d.push(Object.assign({[a]:p,[s]:f[t],[l]:e[l]||0,[c]:e[c],data:g},y)),p+=f[t]+i}return d}),U5=(Y5.props={},()=>t=>{var e=t["children"],t=N(t,["children"]);if(!Array.isArray(e))return[];const{data:o,scale:a={},axis:s={},legend:c={}}=t,n=N(t,["data","scale","axis","legend"]);t=e.map(t=>{var{data:e,scale:n={},axis:r={},legend:i={}}=t,t=N(t,["data","scale","axis","legend"]);return Object.assign({data:H5(e,o),scale:P({},a,n),axis:!(!r||!s)&&P({},s,r),legend:!(!i||!c)&&P({},c,i)},t)});return[Object.assign(Object.assign({},n),{marks:t,type:"standardView"})]}),q5=(U5.props={},()=>t=>{var{width:e,height:n,paddingLeft:r,paddingRight:i,paddingTop:o,paddingBottom:a,padding:s,inset:c,insetLeft:l,insetTop:u,insetRight:h,insetBottom:f,data:d,coordinate:p,theme:y,component:g,interaction:v,x:m,y:b,key:x,frame:w,title:k,labelTransform:E}=t,t=N(t,["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","data","coordinate","theme","component","interaction","x","y","key","frame","title","labelTransform"]);return[{type:"standardView",x:m,y:b,key:x,width:e,height:n,padding:s,paddingLeft:r,paddingRight:i,paddingTop:o,inset:c,insetLeft:l,insetTop:u,insetRight:h,insetBottom:f,paddingBottom:a,theme:y,coordinate:p,component:g,interaction:v,frame:w,title:k,labelTransform:E,marks:[Object.assign(Object.assign({},t),{key:x+"-0",data:d})]}]}),X5=(q5.props={},G5(t=>{const{encode:e,data:i,scale:o,shareSize:a=!1}=t;var{x:t,y:n}=e,r=(e,t)=>{if(void 0===e||!a)return{};const n=Pv(i,t=>t[e]);var t=(null==(t=null===o||void 0===o?void 0:o[t])?void 0:t.domain)||Array.from(n.keys()),r=t.map(t=>n.has(t)?n.get(t).length:1);return{domain:t,flex:r}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,guide:void 0===t?null:{position:"top"}},void 0===t&&{paddingInner:0}),r(t,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,guide:void 0===n?null:{position:"right"}},void 0===n&&{paddingInner:0}),r(n,"y"))}}})),$5=G5(t=>{const{data:e,scale:n}=t;var r=[t];let i,o;for(;r.length;){const{children:c,encode:l={},scale:n={}}=r.shift();var a=l["color"],s=n["color"];void 0!==a&&(i=a),void 0!==s&&(o=s),Array.isArray(c)&&r.push(...c)}var t=Object.assign({},o);o&&(o.guide=null);return{encode:{color:i},scale:{color:P({},t,{domain:void 0!==(t=null==(t=null===n||void 0===n?void 0:n.color)?void 0:t.domain)?t:void 0!==i?Array.from(new Set(e.map(t=>t[i]))):void 0,field:i,type:"ordinal"})}}}),Z5=G5(()=>({animate:{enter:{type:"fadeIn"}}})),K5=W5(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),J5=W5(()=>({type:"cell"})),Q5=W5(l=>{var t=l["data"];return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{var{data:t,encode:e}=l;const{x:n,y:r}=e,i=n?Array.from(new Set(t.map(t=>t[n]))):[],o=r?Array.from(new Set(t.map(t=>t[r]))):[];if(i.length&&o.length){var a=[];for(const s of i)for(const c of o)a.push({[n]:s,[r]:c});return a}return i.length?i.map(t=>({[n]:t})):o.length?o.map(t=>({[r]:t})):void 0}}]}}}),tO=W5((t,l=function(t){t=t.points;return G2(t)},w=function(o){return(t,e)=>{var{rowIndex:t,rowValuesLength:n,columnIndex:r,columnValuesLength:i}=t;return t!==n-1?eO(o,e):(t=e.length?void 0:null,P({title:r===i-1&&void 0,cell:t},o))}},k=function(r){return(t,e)=>{var{rowIndex:t,columnIndex:n}=t;return 0!==n?eO(r,e):(n=e.length?void 0:null,P({title:0===t&&void 0,cell:n},r))}},E={})=>{const{data:e,encode:n,children:u,scale:r,x:_=0,y:M=0,shareData:h=!1}=t,S=e["value"],{x:T,y:O}=n;t=r.color;const A=t["domain"];return{children:(t,e,n)=>{const{x:r,y:i}=e,{paddingLeft:p,paddingTop:y}=n,{domain:o,field:a}=r.getOptions(),{domain:s,field:c}=i.getOptions();e=H2(t);const g=t.map(l);n=t.map(({x:t,y:e})=>[r.invert(t),i.invert(e)]);const v=n.map(([n,r])=>t=>{var{[a]:t,[c]:e}=t,t=void 0===T||t===n,e=void 0===O||e===r;return t&&e}).map(t=>S.filter(t)),m=h?Rv(v,t=>t.length):void 0,b=n.map(([t,e])=>({columnField:a,columnIndex:o.indexOf(t),columnValue:t,columnValuesLength:o.length,rowField:c,rowIndex:s.indexOf(e),rowValue:e,rowValuesLength:s.length})),x=b.map(t=>Array.isArray(u)?u:[u(t)].flat(1));return e.flatMap(s=>{const[c,l,u,h]=g[s],f=b[s],d=v[s];return x[s].map(t=>{var{scale:e,key:n,facet:r=!0}=t,t=N(t,["scale","key","facet"]),i=null==(i=null==e?void 0:e.y)?void 0:i.guide,o=null==(o=null==e?void 0:e.x)?void 0:o.guide,a={x:{tickCount:T?5:void 0},y:{tickCount:O?5:void 0}},r=r?d:S,o={x:{guide:nO(o,w)(f,r)},y:{guide:nO(i,k)(f,r)},color:{guide:null,domain:A}};return Object.assign(Object.assign({key:n+"-"+s,data:r,x:c+p+_,y:l+y+M,width:u,height:h,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!r.length,dataDomain:m,scale:P(a,e,o)},t),E)})})}}});function eO(t,e){return e.length?P({title:!1,tickLine:null,label:null,subTickLine:null},t):null}function nO(t,e){return"function"==typeof t?t:null===t?()=>null:e(t)}const rO=()=>t=>{return[bS.of(t).call(J5).call($5).call(Z5).call(X5).call(K5).call(Q5).call(tO).value()]},iO=(rO.props={},G5(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}))),oO=W5(t=>{const{data:k,children:l,x:E=0,y:_=0}=t;return{children:(t,e,n)=>{const{x:r,y:i}=e,{paddingLeft:g,paddingTop:v}=n,{domain:o,field:a}=r.getOptions(),{domain:s,field:c}=i.getOptions();e=H2(t);const m=t.map(({points:t})=>G2(t)),b=t.map(({x:t,y:e})=>[r.invert(t),i.invert(e)]),x=b.map(([t,e])=>({columnField:a,columnIndex:o.indexOf(t),columnValue:t,columnValuesLength:o.length,rowField:c,rowIndex:s.indexOf(e),rowValue:e,rowValuesLength:s.length})),w=x.map(t=>Array.isArray(l)?l:[l(t)].flat(1));return e.flatMap(c=>{const[l,u,h,f]=m[c],[d,p]=b[c],y=x[c];return w[c].map(t=>{var n,r,{scale:e,key:i,encode:o}=t,t=N(t,["scale","key","encode"]),a=null==(a=null==e?void 0:e.y)?void 0:a.guide,s=null==(s=null==e?void 0:e.x)?void 0:s.guide,s={x:{guide:("function"==typeof(r=s)?r:null===r?()=>null:(t,e)=>{var{rowIndex:t,rowValuesLength:n}=t;if(t!==n-1)return eO(r,e)})(y,k)},y:{guide:("function"==typeof(n=a)?n:null===n?()=>null:(t,e)=>{t=t.columnIndex;if(0!==t)return eO(n,e)})(y,k)}};return Object.assign({data:k,key:i+"-"+c,x:l+g+E,y:u+v+_,width:h,height:f,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:P({color:{guide:null},x:{guide:{title:{titleAnchor:"center"}},tickCount:5,facet:!1},y:{guide:{title:{titleAnchor:"center"}},tickCount:5,facet:!1}},e,s),encode:P({},o,{x:d,y:p})},t)})})}}}),aO=t=>{var e=t["encode"],t=N(t,["encode"]),{position:n=[],x:r=n,y:i=[...n].reverse()}=e,n=N(e,["position","x","y"]),o=[];for(const a of[r].flat(1))for(const s of[i].flat(1))o.push({$x:a,$y:s});return Object.assign(Object.assign({},t),{data:o,encode:Object.assign(Object.assign({},n),{x:"$x",y:"$y"})})};const sO=()=>t=>{return[bS.of(t).call(J5).call($5).call(oO).call(aO).call(Z5).call(K5).call(iO).value()]},cO=G5(t=>({scale:{x:{guide:{type:"axisX"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),lO=G5(t=>({coordinate:[{type:"polar"}]})),uO=t=>{var e=t["encode"],t=N(t,["encode"]),e=e["position"];return Object.assign(Object.assign({},t),{encode:{x:e}})};function hO(t){return t=>null}function fO(t){var t=t["points"],[t,e,n,r]=t,i=B2(t,r),t=D2(t,r),r=D2(e,n),r=(e=r,r=F2(r=t),e=F2(e),r<e?e-r:2*Math.PI-(r-e)),e=1/Math.sin(r/2),i=i/(1+e),o=i*Math.sqrt(2),[n,a]=n,t=z2(t)+r/2,r=i*e;return[n+r*Math.sin(t)-o/2,a+r*Math.cos(t)-o/2,o,o]}const dO=()=>t=>{return[bS.of(t).call(J5).call(uO).call($5).call(lO).call(Q5).call(tO,fO,hO,hO,{frame:!1}).call(Z5).call(K5).call(cO).value()]};const pO=()=>t=>{const{children:e=[],duration:o=1e3,iterationCount:c=1,direction:l="normal",easing:a="ease-in-out-sine"}=t,u=e.length;if(!Array.isArray(e)||0===u)return[];const n=e[0]["key"],h=e.map(t=>Object.assign(Object.assign({},t),{key:n})).map(t=>{for(var e=o,n=a,r=[t];r.length;){var i=r.pop(),i=(i.animate=P({enter:{duration:e},update:{duration:e,type:"morphing",easing:n,fill:"both"},exit:{duration:e}},i.animate||{}),i)["children"];Array.isArray(i)&&r.push(...i)}return t});return function*(){let t=0,e;for(;"infinite"===c||t<c;){n=l,o=t,a=u,s=void 0,s=[0,a],a=[1-a,1];var[n,r]="normal"===n?s:"reverse"===n?a:"alternate"===n?o%2==0?s:a:"reverse-alternate"===n?o%2==0?a:s:void 0;for(let t=n;t<r;t+=1){var i=Math.abs(t);e!==i&&(yield h[i]),e=i}t++}var o,a,s}},yO=(pO.props={},()=>(t,e,n)=>{var r=t.length;if(0===r)return[];var{innerWidth:i,innerHeight:o}=n;let c=Math.ceil(Math.sqrt(e/(o/i))),l=i/c,u=Math.ceil(e/c),a=u*l;for(;a>o;)c+=1,l=i/c,u=Math.ceil(e/c),a=u*l;const h=o-u*l,f=u<=1?0:h/(u-1),[d,p]=u<=1?[(i-r*l)/(r-1),(o-l)/2]:[0,0];return t.map((t,e)=>{var[t,n,r,i]=G2(t),o=e%c,e=Math.floor(e/c),a=o*l,s=(u-e-1)*l+h,r=l/r,i=l/i;return`translate(${a-t+d*o}, ${s-n-f*e-p}) scale(${r}, ${i})`})});function gO(t,e){if(null!==t)return{type:"column",value:t,field:e}}function vO(t,e){if(null!==t)return{type:"column",value:t,field:e,visual:!0}}function mO(t,e){return new Array(t.length).fill(e)}function bO(t,e){var t=t[e];return t?({value:e,field:t=null}=t,[e,t]):[null,null]}function xO(t,...e){for(const i of e){if("string"!=typeof i)return[i,null];var[n,r]=bO(t,i);if(null!==n)return[n,r]}return[null,null]}yO.props={};const wO=()=>(t,e)=>{var n=e["encode"],n=n["y1"];return void 0!==n?[t,e]:[t,P({},e,{encode:{y1:gO(mO(t,0))}})]};function kO(t,e,n){const r=n["encode"],i=(n=t,(Array.isArray(n)?n:[n]).map(t=>{return[t,null==(t=bO(r,t))?void 0:t[0]]}).filter(([,t])=>I2(t)));return Array.from(Pv(e,e=>i.map(([,t])=>t[e]).join("-")).values())}function EO(t){var o,r;return Array.isArray(t)?(o=t,(i,t,e)=>(n,r)=>o.reduce((t,e)=>0!==t?t:_v(i[n][e],i[r][e]),0)):"function"==typeof t?(r=t,(e,t,n)=>PO(t=>r(e[t]))):"series"===t?SO:"value"===t?TO:"sum"===t?OO:"maxIndex"===t?AO:()=>null}function _O(t,e){for(const n of t)n.sort(e)}function MO(t,e){return(null==e?void 0:e.domain)||Array.from(new Set(t))}function SO(t,e,n){return PO(t=>n[t])}function TO(t,e,n){return PO(t=>e[t])}function OO(t,n,e){t=H2(t),t=Array.from(Pv(t,t=>e[+t]).entries());const r=new Map(t.map(([t,e])=>[t,e.reduce((t,e)=>t+ +n[e])]));return PO(t=>r.get(e[t]))}function AO(t,n,e){t=H2(t),t=Array.from(Pv(t,t=>e[+t]).entries());const r=new Map(t.map(([t,e])=>[t,Dv(e,t=>n[t])]));return PO(t=>r.get(e[t]))}function PO(n){return(t,e)=>_v(n(t),n(e))}wO.props={};const NO=(t={})=>{const{groupBy:k="x",orderBy:E=null,reverse:_=!1,y:M="y",series:S=!0}=t;return(t,e)=>{var{data:n,encode:r}=e,[i,o]=bO(r,"y"),[a,s]=bO(r,"y1"),[r]=S?xO(r,"series","color"):bO(r,"color"),c=kO(k,t,e),n=EO(E)(n,i,r),l=(n&&_O(c,n),new Array(t.length)),u=new Array(t.length),h=new Array(t.length);for(const m of c){_&&m.reverse();var f=a?+a[m[0]]:0,d=[],p=[];for(const b of m){var y=h[b]=+i[b]-f;y<0?p.push(b):0<=y&&d.push(b)}let t=f;for(const x of p.reverse()){var g=h[x];t=l[x]=(u[x]=t)+g}let e=f;for(const w of d){var v=h[w];0<v?e=l[w]=(u[w]=e)+v:l[w]=u[w]=e}}r="y"===M?l:u;return[t,P({},e,{encode:{y:gO(r,o),y1:gO(u,s)}})]}};function CO(t){t=t.type;return"string"==typeof t&&["stackY","dodgeX","groupX"].includes(t)}NO.props={};const LO=o=>(t,e,n)=>{var{encode:r,transform:i=[]}=e;return i.some(CO)||({x:i,y:r}=r,void 0===i||void 0===r)?[t,e]:(i=o["series"],r=i?["x","series"]:"x",NO({groupBy:r})(t,e,n))},IO=(LO.props={},()=>(t,e)=>{var n=e["encode"],r=n["title"];return void 0!==r?[t,e]:([r,n]=bO(n,"x"),[t,P({},e,{encode:{title:gO(r,n)}})])}),jO=(IO.props={},t=>{const o=t["channel"];return(t,e)=>{const i=e["encode"];var n=i["tooltip"];return void 0!==n?[t,e]:(n=Object.entries(i).filter(([t])=>t.startsWith(o)).flatMap(([t])=>{var e=new RegExp(o+"(\\d*)").exec(t)[1],[n,r]=bO(i,t),t=[[t,gO(n)]];return n&&null!==r&&t.push(["tooltip"+e,gO(n,r)]),t}),[t,P({},e,{encode:Object.fromEntries(n)})])}}),RO=(jO.props={},()=>jO({channel:"position"})),DO=(RO.props={},()=>jO({channel:"y"})),BO=(DO.props={},()=>(t,e)=>{var n=e["encode"],n=n["x"];return void 0!==n?[t,e]:[t,P({},e,{encode:{x:gO(mO(t,0))},scale:{x:{guide:null}}})]}),FO=(BO.props={},()=>(t,e)=>{var n=e["encode"],n=n["y"];return void 0!==n?[t,e]:[t,P({},e,{encode:{y:gO(mO(t,0))},scale:{y:{guide:null}}})]}),zO=(FO.props={},()=>(t,e)=>{var n=e["encode"],n=n["size"];return void 0!==n?[t,e]:[t,P({},e,{encode:{size:vO(mO(t,3))}})]}),GO=(zO.props={},()=>(t,e)=>{var n=e["encode"],r=n["key"],n=N(n,["key"]);if(void 0!==r)return[t,e];const i=Object.values(n).map(({value:t})=>t);r=t.map(e=>i.filter(Array.isArray).map(t=>t[e]).join("-"));return[t,P({},e,{encode:{key:gO(r)}})]}),WO=(GO.props={},()=>(t,e)=>{var n=e["encode"],{series:r,color:i}=n;return void 0!==r||void 0===i?[t,e]:([r,i]=bO(n,"color"),[t,P({},e,{encode:{series:gO(r,i)}})])}),HO=(WO.props={},()=>(t,e)=>{var n=e["data"];return!Array.isArray(n)||n.some(pg)?[t,e]:[t,P({},e,{encode:{y:gO(n)}})]}),VO=(HO.props={},()=>(t,e)=>{var n=e["data"];return!Array.isArray(n)||n.some(pg)?[t,e]:[t,P({},e,{encode:{x:gO(n)}})]}),YO=(VO.props={},()=>(t,e)=>{var n=e["encode"],r=n["y1"];return r?[t,e]:([r]=bO(n,"y"),[t,P({},e,{encode:{y1:gO([...r])}})])}),UO=(YO.props={},()=>(t,e)=>{var n=e["encode"],r=n["x1"];return r?[t,e]:([r]=bO(n,"x"),[t,P({},e,{encode:{x1:gO([...r])}})])}),qO=(UO.props={},()=>(t,e)=>[t,P({scale:{x:{padding:0},y:{padding:0}}},e)]),XO=(qO.props={},(t={})=>{const{groupBy:l="x",reverse:u=!1,orderBy:h,padding:f}=t;return N(t,["groupBy","reverse","orderBy","padding"]),(t,e)=>{var{data:n,encode:r,scale:i}=e,i=i["series"],[o]=bO(r,"y"),[r]=xO(r,"series","color"),a=MO(r,i),i=kO(l,t,e),n=EO(h)(n,o,r),s=(n&&_O(i,n),new Array(t.length));for(const c of i){u&&c.reverse();for(let t=0;t<c.length;t++)s[c[t]]=a[t]}return[t,P({},e,{scale:{series:{domain:a,paddingInner:f}},encode:{series:gO(s)}})]}}),$O=(XO.props={},t=>{const{by:d=["x"]}=t;return(n,t)=>{const e=t["encode"];var r=e["enterDuration"];if(void 0===r)return[n,t];r=d.map(t=>[t,bO(e,t)[0]]);if(0===r.length)return[n,t];let i=[n];for(const[,h]of r){var o=[];for(const n of i){var a=Array.from(Pv(n,t=>h[t]).values());o.push(...a)}i=o}const[s]=bO(e,"enterDuration");var[c]=xO(e,"enterDelay",mO(n,0)),l=new Array(n.length);for(let t=0,e=0;t<i.length;t++){const n=i[t];var u=Rv(n,t=>+s[t]);for(const f of n)l[f]=+c[f]+e;e+=u}return[n,P({},t,{encode:{enterDuration:vO(s),enterDelay:vO(l)}})]}});$O.props={};const ZO=(t={})=>{const{groupBy:h="x",basis:f="max"}=t;return(e,t)=>{const n=t["encode"];var r=N(n,["x"]);const i=Object.entries(r).filter(([t])=>t.startsWith("y")).map(([t])=>[t,bO(n,t)[0]]);var o=i.map(([t])=>[t,new Array(e.length)]),r=kO(h,e,t),a={min:Bv,max:Rv,first:t=>t[0],last:t=>t[t.length-1],mean:Wv,median:Hv,sum:Yv,deviation:Mv}[f]||Rv;for(const e of r){var s=a(e.flatMap(e=>i.map(([,t])=>+t[e])));for(const u of e)for(let t=0;t<i.length;t++){var[,c]=i[t],[,l]=o[t];l[u]=+c[u]/s}}return[e,P({},t,{encode:Object.fromEntries(o.map(([t,e])=>[t,gO(e,bO(n,t)[1])]))})]}};function KO(t,e,n){return null===t?[-.5,.5]:(t=MO(t,e),[-(e=new R1({domain:t,range:[0,1],padding:n}).getBandWidth())/2,e/2])}function JO(t,e,n){return e*(1-t)+n*t}ZO.props={};const QO=(t={})=>{const{padding:e=0,paddingX:c=e,paddingY:l=e,random:u=Math.random}=t;return(t,e)=>{var{encode:n,scale:r}=e,{x:r,y:i}=r,[o]=bO(n,"x"),[n]=bO(n,"y");const a=KO(o,r,c),s=KO(n,i,l);o=t.map(()=>JO(u(),...s)),r=t.map(()=>JO(u(),...a));return[t,P({scale:{x:{padding:.5},y:{padding:.5}}},e,{encode:{dy:gO(o),dx:gO(r)}})]}},t3=(QO.props={},(t={})=>{const{padding:o=0,random:a=Math.random}=t;return(t,e)=>{var{encode:n,scale:r}=e,r=r["x"],[n]=bO(n,"x");const i=KO(n,r,o);n=t.map(()=>JO(a(),...i));return[t,P({scale:{x:{padding:.5}}},e,{encode:{dx:gO(n)}})]}}),e3=(t3.props={},(t={})=>{const{groupBy:y="x"}=t;return(e,t)=>{const n=t["encode"];var r=N(n,["x"]);const i=Object.entries(r).filter(([t])=>t.startsWith("y")).map(([t])=>[t,bO(n,t)[0]]);var o=i.map(([t])=>[t,new Array(e.length)]),a=kO(y,e,t),s=new Array(a.length);for(let t=0;t<a.length;t++){const e=a[t];var[c,l]=Sv(e.flatMap(e=>i.map(([,t])=>+t[e])));s[t]=(c+l)/2}var u=Math.max(...s);for(let t=0;t<a.length;t++){var h=u-s[t];const e=a[t];for(const p of e)for(let t=0;t<i.length;t++){var[,f]=i[t],[,d]=o[t];d[p]=+f[p]+h}}return[e,P({},t,{encode:Object.fromEntries(o.map(([t,e])=>[t,gO(e,bO(n,t)[1])]))})]}}),n3=(e3.props={},(t={})=>{const{groupBy:u="x",series:h=!0}=t;return(t,e)=>{var n=e["encode"];const[r]=bO(n,"y");var[,i]=bO(n,"y1"),n=(h?xO(n,"series","color"):bO(n,"color"),kO(u,t,e)),o=new Array(t.length);for(const l of n){var a=l.map(t=>+r[t]);for(let n=0;n<l.length;n++){var s=l[n],c=Math.max(...a.filter((t,e)=>e!==n));o[s]=r[s]>c?c:r[s]}}return[t,P({},e,{encode:{y1:gO(o,i)}})]}});function r3(t,e){return[t[0]]}function i3(t,e){return[t[t.length-1]]}function o3(t,e){return[t[Dv(t,t=>e[t])]]}function a3(t,e){return[t[function(t,e){let n,r=-1,i=-1;if(void 0===e)for(const a of t)++i,null!=a&&(n>a||void 0===n&&a>=a)&&(n=a,r=i);else for(var o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}(t,t=>e[t])]]}n3.props={};const s3=(t={})=>{const{groupBy:s="series"}=t,c=N(t,["groupBy"]);return(t,e)=>{var n=e["encode"],t=kO(s,t,e),[r,i]=Object.entries(c)[0];const[o]=bO(n,r),a="function"==typeof(n=i)?n:{first:r3,last:i3,max:o3,min:a3}[n]||r3;return[t.flatMap(t=>a(t,o)),e]}},c3=(s3.props={},(t={})=>{var e=t["selector"],t=N(t,["selector"]);return s3(Object.assign({x:e},t))}),l3=(c3.props={},(t={})=>{var e=t["selector"],t=N(t,["selector"]);return s3(Object.assign({y:e},t))});function u3(e){return t=>null===t?e:e+" of "+t}function h3(){return[(t,e)=>Wv(t,t=>+e[t]),u3("mean")]}function f3(){return[(t,e)=>Hv(t,t=>+e[t]),u3("median")]}function d3(){return[(t,e)=>Rv(t,t=>+e[t]),u3("max")]}function p3(){return[(t,e)=>Bv(t,t=>+e[t]),u3("min")]}function y3(){return[(t,e)=>t.length,u3("count")]}function g3(){return[(t,e)=>Yv(t,t=>+e[t]),u3("sum")]}function v3(){return[(t,e)=>e[t[0]],u3("first")]}function m3(){return[(t,e)=>e[t[t.length-1]],u3("last")]}l3.props={};const b3=(t={})=>{var n;const{channel:e=["x","y"],groupBy:i=(n=e,(t,e)=>kO(n,t,e))}=t,o=N(t,["channel","groupBy"]);return(t,e)=>{const{data:a,encode:s}=e,c=i(t,e);var t=Object.entries(o).map(([t,e])=>{const[n,r]=function(t){if("function"==typeof t)return[t,null];var e={mean:h3,max:d3,count:y3,first:v3,last:m3,sum:g3,min:p3,median:f3}[t];if(e)return e();throw new Error(`Unknown reducer: ${t}.`)}(e),[i,o]=bO(s,t);return[t,gO(c.map(t=>n(t,null!==i&&void 0!==i?i:a)),(null==r?void 0:r(o))||o)]}),n=Object.keys(s).map(t=>{const[e,n]=bO(s,t);return[t,gO(c.map(t=>e[t[0]]),n)]}),r=c.map(t=>a[t[0]]);return[H2(c),P({},e,{data:r,encode:Object.fromEntries([...n,...t])})]}},x3=(b3.props={},(t={})=>b3(Object.assign(Object.assign({},t),{channel:["x","color"]}))),w3=(x3.props={},(t={})=>b3(Object.assign(Object.assign({},t),{channel:["y","color"]}))),k3=(w3.props={},(t={})=>b3(Object.assign(Object.assign({},t),{channel:["y","color"]})));k3.props={};const E3=(t={})=>{const{reverse:o=!1,slice:a,channel:s}=t,c=N(t,["reverse","slice","channel"]);return(t,e)=>{var n=e["encode"];const[r]=bO(n,s);var n=jv(t,function(t,e,n){const{by:r=t,reducer:i="max"}=e,[o]=bO(n,r);if("function"==typeof i)return t=>i(t,o);if("max"===i)return t=>Rv(t,t=>+o[t]);if("min"===i)return t=>Bv(t,t=>+o[t]);if("sum"===i)return t=>Yv(t,t=>+o[t]);if("first"===i)return t=>o[t[0]];if("last"===i)return t=>o[t[t.length-1]];throw new Error("Unknown reducer: "+i)}(s,c,n),t=>r[t]),i=(o&&n.reverse(),"number"==typeof a?[0,a]:a),i=a?n.slice(...i):n;return[t,P(e,{scale:{[s]:{domain:i}}})]}},_3=(E3.props={},(t={})=>E3(Object.assign(Object.assign({},t),{channel:"x"}))),M3=(_3.props={},(t={})=>E3(Object.assign(Object.assign({},t),{channel:"color"}))),S3=(M3.props={},(t={})=>E3(Object.assign(Object.assign({},t),{channel:"y"})));S3.props={};const T3=(t={})=>{const{field:a,channel:s="y",reducer:c="sum"}=t;return(t,e)=>{var{data:n,encode:r}=e;const[i]=bO(r,"x");var o,n=a?(n=n,"string"==typeof(o=a)?n.map(t=>t[o]):n.map(o)):bO(r,s)[0],r=function(e,n){if("function"==typeof e)return t=>e(t,n);if("sum"===e)return t=>Yv(t,t=>+n[t]);throw new Error("Unknown reducer: "+e)}(c,n),r=(n=[t=>i[t]],Nv(t,Array.from,r,n).map(t=>t[1]));return[t,P({},e,{scale:{x:{flex:r}}})]}};T3.props={};var O3={},A3={},P3=34,N3=10,C3=13;function L3(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function I3(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function j3(t,e){var t=t+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function R3(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+j3(-e,6):9999<e?"+"+j3(e,6):j3(e,4))+"-"+j3(t.getUTCMonth()+1,2)+"-"+j3(t.getUTCDate(),2)+(o?"T"+j3(n,2)+":"+j3(r,2)+":"+j3(i,2)+"."+j3(o,3)+"Z":i?"T"+j3(n,2)+":"+j3(r,2)+":"+j3(i,2)+"Z":r||n?"T"+j3(n,2)+":"+j3(r,2)+"Z":"")}function D3(r){var e=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function n(r,t){var e,n=[],i=r.length,o=0,a=0,s=i<=0,c=!1;function l(){if(s)return A3;if(c)return c=!1,O3;var t,e,n=o;if(r.charCodeAt(n)===P3){for(;o++<i&&r.charCodeAt(o)!==P3||r.charCodeAt(++o)===P3;);return(t=o)>=i?s=!0:(e=r.charCodeAt(o++))===N3?c=!0:e===C3&&(c=!0,r.charCodeAt(o)===N3&&++o),r.slice(n+1,t-1).replace(/""/g,'"')}for(;o<i;){if((e=r.charCodeAt(t=o++))===N3)c=!0;else if(e===C3)c=!0,r.charCodeAt(o)===N3&&++o;else if(e!==h)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(r.charCodeAt(i-1)===N3&&--i,r.charCodeAt(i-1)===C3&&--i;(e=l())!==A3;){for(var u=[];e!==O3&&e!==A3;)u.push(e),e=l();t&&null==(u=t(u,a++))||n.push(u)}return n}function i(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(r)})}function o(t){return t.map(a).join(r)}function a(t){return null==t?"":t instanceof Date?R3(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,o){var a,s;return(t=n(t,function(t,e){if(a)return a(t,e-1);var n,r,i;s=t,a=o?(r=o,i=L3(n=t),function(t,e){return r(i(t),e,n)}):L3(t)})).columns=s||[],t},parseRows:n,format:function(t,e){return[(e=null==e?I3(t):e).map(a).join(r)].concat(i(t,e)).join("\n")},formatBody:function(t,e){return i(t,e=null==e?I3(t):e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}function B3(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;F3&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const F3=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),z3=t=>{const{value:n,format:r=n.split(".").pop(),delimiter:i=",",autoType:o=!0}=t;return()=>go(void 0,void 0,void 0,function*(){var t,e=yield fetch(n);if("csv"===r)return t=yield e.text(),D3(i).parse(t,o?B3:P2);if("json"===r)return yield e.json();throw new Error(`Unknown format: ${r}.`)})};z3.props={};const G3=t=>{const{fields:o,as:n=[]}=t;return t=>{if(!o||(e=o,0===Object.keys(e).length))return t;var e;const[r="key",i="value"]=n;return t.reduce((e,n)=>{for(let t=0;t<o.length;t++)e.push(Object.assign(Object.assign({},n),{[r]:o[t],[i]:n[o[t]]}));return e},[])}};function W3(t,r){return t.map(t=>{var e,n;return Array.isArray(t)?([e,n=r]=t,[e,n]):[t,r]})}function H3(t){return null!=t&&!Number.isNaN(t)}G3.props={};const V3=t=>{var{fields:t=[]}=t;const e=W3(t,H3);return t=>t.filter(n=>e.every(([t,e=H3])=>e(n[t])))};function Y3(t,e,n){return Math.min(n,Math.max(e,t))}V3.props={};const U3=i=>t=>{const{fields:e=[]}=i;let{start:n=0,end:r=t.length}=i;n=Y3(n,0,t.length-1),r=Y3(r,1,t.length),n>r&&([n,r]=[r,n]);return t.filter((t,e)=>e>=n&&e<r).map(n=>e.reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{}))},q3=(U3.props={},t=>{t=t.fields;return U3({fields:t})});q3.props={};const X3=t=>{const r=t["map"];return t=>{var e;return r&&(e=r,0!==Object.keys(e).length)?t.map(t=>Object.entries(t).reduce((t,[e,n])=>(t[r[e]||e]=n,t),{})):t}},$3=(X3.props={},t=>{var{fields:t=[]}=t;const e=W3(t,!0);return t=>{return[...t].sort((r,i)=>e.reduce((t,[e,n=!0])=>0!==t?t:n?r[e]<i[e]?-1:+(r[e]!==i[e]):r[e]>i[e]?-1:+(r[e]!==i[e]),0))}}),Z3=($3.props={},t=>{const e=t["value"];return()=>e}),K3=(Z3.props={},t=>{const{callback:e=P2}=t;return t=>e(t)}),J3=(K3.props={},t=>{const{callback:e=P2}=t;return t=>Array.isArray(t)?t.map(e):t});function Q3(t,e){return t.parent===e.parent?1:2}function tA(t,e){return t+e.x}function eA(t,e){return Math.max(t,e.y)}function nA(){var s=Q3,c=1,l=1,u=!1;function e(e){var r,i=0,t=(e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(tA,0)/e.length,t.y=1+n.reduce(eA,0)):(t.x=r?i+=s(t,r):0,t.y=0,r=t)}),function(t){for(var e;e=t.children;)t=e[0];return t}(e)),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),o=t.x-s(t,n)/2,a=n.x+s(n,t)/2;return e.eachAfter(u?function(t){t.x=(t.x-e.x)*c,t.y=(e.y-t.y)*l}:function(t){t.x=(t.x-o)/(a-o)*c,t.y=(1-(e.y?t.y/e.y:1))*l})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=!1,c=+t[0],l=+t[1],e):u?null:[c,l]},e.nodeSize=function(t){return arguments.length?(u=!0,c=+t[0],l=+t[1],e):u?[c,l]:null},e}function rA(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;0<=--r;)e+=n[r].value;else e=1;t.value=e}function iA(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=aA)):void 0===e&&(e=oA);for(var n,r,i,o,a,t=new lA(t),s=[t];n=s.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;0<=o;--o)s.push(r=i[o]=new lA(i[o])),r.parent=n,r.depth=n.depth+1;return t.eachBefore(cA)}function oA(t){return t.children}function aA(t){return Array.isArray(t)?t[1]:null}function sA(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function cA(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function lA(t){this.data=t,this.depth=this.height=0,this.parent=null}function uA(t,e){return t.parent===e.parent?1:2}function hA(t){var e=t.children;return e?e[0]:t.t}function fA(t){var e=t.children;return e?e[e.length-1]:t.t}function dA(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function pA(){var f=uA,c=1,l=1,u=null;function e(t){var e,n,r,i,o,a,s=function(t){for(var e,n,r,i,o,a=[t=new dA(t,0)];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;0<=i;--i)a.push(n=e.children[i]=new dA(r[i],i)),n.parent=e;return(t.parent=new dA(null,0)).children=[t],t}(t);return s.eachAfter(h),s.parent.m=-s.z,s.eachBefore(d),u?t.eachBefore(p):((r=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>r.depth&&(r=t)}),s=e===n?1:f(e,n)/2,i=s-e.x,o=c/(n.x+s+i),a=l/(r.depth||1),t.eachBefore(function(t){t.x=(t.x+i)*o,t.y=t.depth*a})),t}function h(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e){for(var i,o=0,a=0,s=t.children,c=s.length;0<=--c;)(i=s[c]).z+=o,i.m+=o,o+=i.s+(a+=i.c);e=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+f(t._,r._),t.m=t.z-e):t.z=e}else r&&(t.z=r.z+f(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,o=t,a=e,s=i.parent.children[0],c=i.m,l=o.m,u=a.m,h=s.m;a=fA(a),i=hA(i),a&&i;)s=hA(s),(o=fA(o)).a=t,0<(r=a.z+u-i.z-c+f(a._,i._))&&(function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(a,t,n),t,r),c+=r,l+=r),u+=a.m,c+=i.m,h+=s.m,l+=o.m;a&&!fA(o)&&(o.t=a,o.m+=u-l),i&&!hA(s)&&(s.t=i,s.m+=c-h,n=t)}return n}(t,r,t.parent.A||n[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function p(t){t.x*=c,t.y=t.depth*l}return e.separation=function(t){return arguments.length?(f=t,e):f},e.size=function(t){return arguments.length?(u=!1,c=+t[0],l=+t[1],e):u?null:[c,l]},e.nodeSize=function(t){return arguments.length?(u=!0,c=+t[0],l=+t[1],e):u?[c,l]:null},e}J3.props={},lA.prototype=iA.prototype={constructor:lA,count:function(){return this.eachAfter(rA)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],c=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++c,this);return this},eachBefore:function(t,e){for(var n,r,i,o=[this],a=-1;n=o.pop();)if(t.call(e,n,++a,this),r=n.children)for(i=r.length-1;0<=i;--i)o.push(r[i]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(i){return this.eachAfter(function(t){for(var e=+i(t.data)||0,n=t.children,r=n&&n.length;0<=--r;)e+=n[r].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return iA(this).eachBefore(sA)},[Symbol.iterator]:function*(){var t,e,n,r,i,o=[this];do{for(e=o.reverse(),o=[];t=e.pop();)if(yield t,n=t.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length)}},dA.prototype=Object.create(lA.prototype);const yA=h=>u=>t=>{const{field:e="value",nodeSize:n,separation:r,sortBy:i,as:o=["x","y"]}=u,[a,s]=o;var t=iA(t,t=>t.children).sum(t=>t[e]).sort(i),c=h();c.size([1,1]),n&&c.nodeSize(n),r&&c.separation(r),c(t);const l=[];t.each(t=>{t[a]=t.x,t[s]=t.y,t.name=t.data.name,l.push(t)});c=t.links();return c.forEach(t=>{t[a]=[t.source[a],t.target[a]],t[s]=[t.source[s],t.target[s]]}),{nodes:l,edges:c}},gA=t=>yA(nA)(t),vA=(gA.props={},t=>yA(pA)(t));function mA(t){return t.target.depth}function bA(t,e){return t.sourceLinks.length?t.depth:e-1}function xA(t){return function(){return t}}function wA(t,e){return EA(t.source,e.source)||t.index-e.index}function kA(t,e){return EA(t.target,e.target)||t.index-e.index}function EA(t,e){return t.y0-e.y0}function _A(t){return t.value}function MA(t){return t.index}function SA(t){return t.nodes}function TA(t){return t.links}function OA(t,e){t=t.get(e);if(t)return t;throw new Error("missing: "+e)}function AA({nodes:t}){for(const n of t){let t=n.y0,e=t;for(const r of n.sourceLinks)r.y0=t+r.width/2,t+=r.width;for(const i of n.targetLinks)i.y1=e+i.width/2,e+=i.width}}function PA(){let x=0,w=0,k=1,E=1,_=24,M=8,S,T=MA,O=bA,A,P,N,C=SA,L=TA,I=6;function e(e){e={nodes:C(e),links:L(e)};{var{nodes:i,links:t}=e;i.forEach((t,e)=>{t.index=e,t.sourceLinks=[],t.targetLinks=[]});const y=new Map(i.map(t=>[T(t),t]));if(t.forEach((t,e)=>{t.index=e;let{source:n,target:r}=t;"object"!=typeof n&&(n=t.source=OA(y,n)),"object"!=typeof r&&(r=t.target=OA(y,r)),n.sourceLinks.push(t),r.targetLinks.push(t)}),null!=N)for(var{sourceLinks:n,targetLinks:r}of i)n.sort(N),r.sort(N)}t=e.nodes;for(const g of t)g.value=void 0===g.fixedValue?Math.max(Yv(g.sourceLinks,_A),Yv(g.targetLinks,_A)):g.fixedValue;{var o=e.nodes,a=o.length;let t=new Set(o),n=new Set,r=0;for(;t.size;){if(t.forEach(t=>{t.depth=r;for(var{target:e}of t.sourceLinks)n.add(e)}),++r>a)throw new Error("circular link");t=n,n=new Set}if(A){var s,c=Math.max(Rv(o,t=>t.depth)+1,0);for(let t=0;t<o.length;t++)(s=o[t]).depth=A.call(null,s,c)}}{var l=(i=e.nodes).length;let t=new Set(i),n=new Set,r=0;for(;t.size;){if(t.forEach(t=>{t.height=r;for(var{source:e}of t.targetLinks)n.add(e)}),++r>l)throw new Error("circular link");t=n,n=new Set}}var u=function({nodes:t}){var e=Math.max(Rv(t,t=>t.depth)+1,0),n=(k-x-_)/(e-1),r=new Array(e).fill(0).map(()=>[]);for(const o of t){var i=Math.max(0,Math.min(e-1,Math.floor(O.call(null,o,e))));o.layer=i,o.x0=x+i*n,o.x1=o.x0+_,r[i]?r[i].push(o):r[i]=[o]}if(P)for(const a of r)a.sort(P);return r}(e),t=(S=Math.min(M,(E-w)/(Rv(u,t=>t.length)-1)),u),h=Bv(t,t=>(E-w-(t.length-1)*S)/Yv(t,_A));for(const v of t){let e=w;for(const m of v){m.y0=e,m.y1=e+m.value*h,e=m.y1+S;for(const b of m.sourceLinks)b.width=b.value*h}e=(E-e+S)/(v.length+1);for(let t=0;t<v.length;++t){var f=v[t];f.y0+=e*(t+1),f.y1+=e*(t+1)}!function(t){if(void 0===N)for(var{sourceLinks:e,targetLinks:n}of t)e.sort(kA),n.sort(wA)}(v)}for(let t=0;t<I;++t){var d=Math.pow(.99,t),p=Math.max(1-d,(t+1)/I);!function(n,r,i){for(let t=n.length,e=t-2;0<=e;--e){var o,a=n[e];for(const l of a){let t=0,e=0;for(var{target:s,value:c}of l.sourceLinks){c=c*(s.layer-l.layer);t+=function(t,e){let n=e.y0-(e.targetLinks.length-1)*S/2;for(var{source:r,width:i}of e.targetLinks){if(r===t)break;n+=i+S}for(var{target:o,width:a}of t.sourceLinks){if(o===e)break;n-=a}return n}(l,s)*c,e+=c}0<e&&(o=(t/e-l.y0)*r,l.y0+=o,l.y1+=o,R(l))}void 0===P&&a.sort(EA),a.length&&j(a,i)}}(u,d,p),!function(n,r,i){for(let t=1,e=n.length;t<e;++t){var o,a=n[t];for(const l of a){let t=0,e=0;for(var{source:s,value:c}of l.targetLinks){c=c*(l.layer-s.layer);t+=function(t,e){let n=t.y0-(t.sourceLinks.length-1)*S/2;for(var{target:r,width:i}of t.sourceLinks){if(r===e)break;n+=i+S}for(var{source:o,width:a}of e.targetLinks){if(o===t)break;n-=a}return n}(s,l)*c,e+=c}0<e&&(o=(t/e-l.y0)*r,l.y0+=o,l.y1+=o,R(l))}void 0===P&&a.sort(EA),a.length&&j(a,i)}}(u,d,p)}return AA(e),e}function j(t,e){var n=t.length>>1,r=t[n];o(t,r.y0-S,n-1,e),i(t,r.y1+S,1+n,e),o(t,E,t.length-1,e),i(t,w,0,e)}function i(t,e,n,r){for(;n<t.length;++n){var i=t[n],o=(e-i.y0)*r;1e-6<o&&(i.y0+=o,i.y1+=o),e=i.y1+S}}function o(t,e,n,r){for(;0<=n;--n){var i=t[n],o=(i.y1-e)*r;1e-6<o&&(i.y0-=o,i.y1-=o),e=i.y0-S}}function R({sourceLinks:t,targetLinks:e}){if(void 0===N){for(const{source:{sourceLinks:t}}of e)t.sort(kA);for(const{target:{targetLinks:e}}of t)e.sort(wA)}}return e.update=function(t){return AA(t),t},e.nodeId=function(t){return arguments.length?(T="function"==typeof t?t:xA(t),e):T},e.nodeAlign=function(t){return arguments.length?(O="function"==typeof t?t:xA(t),e):O},e.nodeDepth=function(t){return arguments.length?(A=t,e):A},e.nodeSort=function(t){return arguments.length?(P=t,e):P},e.nodeWidth=function(t){return arguments.length?(_=+t,e):_},e.nodePadding=function(t){return arguments.length?(M=S=+t,e):M},e.nodes=function(t){return arguments.length?(C="function"==typeof t?t:xA(t),e):C},e.links=function(t){return arguments.length?(L="function"==typeof t?t:xA(t),e):L},e.linkSort=function(t){return arguments.length?(N=t,e):N},e.size=function(t){return arguments.length?(x=w=0,k=+t[0],E=+t[1],e):[k-x,E-w]},e.extent=function(t){return arguments.length?(x=+t[0][0],k=+t[1][0],w=+t[0][1],E=+t[1][1],e):[[x,w],[k,E]]},e.iterations=function(t){return arguments.length?(I=+t,e):I},e}vA.props={};const NA={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},CA={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Bv(t.sourceLinks,mA)-1:0},justify:bA};const LA=h=>t=>{var{nodeId:e,nodeSort:n,nodeAlign:r,nodeWidth:i,nodePadding:o,nodeDepth:a,nodes:s,links:c,linkSort:l,iterations:u}=Object.assign({},NA,h),c=PA().nodeSort(n).linkSort(l).links(c).nodes(s).nodeWidth(i).nodePadding(o).nodeDepth(a).nodeAlign("string"==(l=typeof(n=r))?CA[n]||bA:"function"==l?n:bA).iterations(u).extent([[0,0],[1,1]]),s=("function"==typeof e&&c.nodeId(e),c(t)),{nodes:i,links:o}=s;return{nodes:i.map(t=>{var{x0:e,x1:n,y0:r,y1:i}=t;return Object.assign(Object.assign({},t),{x:[e,n,n,e],y:[r,r,i,i]})}),links:o.map(t=>{var{source:e,target:n}=t,e=e.x1,n=n.x0,r=t.width/2;return Object.assign(Object.assign({},t),{x:[e,e,n,n],y:[t.y0+r,t.y0-r,t.y1+r,t.y1-r]})})}};LA.props={};var IA=Object.freeze({__proto__:null,weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,e){return(""+t.id).localeCompare(""+e.id)},name:function(t,e){return(""+t.name).localeCompare(""+e.name)}});const jA={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function RA(t){const{y:l,thickness:u,weight:h,marginRatio:f,id:d,source:p,target:y,sourceWeight:g,targetWeight:v,sortBy:m}=Object.assign(Object.assign({},jA),t);return function(t){var e=t.nodes.map(t=>Object.assign({},t)),t=t.edges.map(t=>Object.assign({},t));{var n=e,r=t;r.forEach(t=>{t.source=p(t),t.target=y(t),t.sourceWeight=g(t),t.targetWeight=v(t)});const i=Pv(r,t=>t.source),o=Pv(r,t=>t.target);n.forEach(t=>{t.id=d(t);var e=i.has(t.id)?i.get(t.id):[],n=o.has(t.id)?o.get(t.id):[];t.frequency=e.length+n.length,t.value=Yv(e,t=>t.sourceWeight)+Yv(n,t=>t.targetWeight)})}if(r=e,(n="function"==typeof m?m:IA[m])&&r.sort(n),!(n=(r=e).length))throw C2("Invalid nodes: it's empty!");if(h){const a=f/(2*n),s=r.reduce((t,e)=>t+e.value,0);r.reduce((t,e)=>{e.weight=e.value/s,e.width=e.weight*(1-f),e.height=u;var n=a+t,r=n+e.width,i=l-u/2,o=i+u;return e.x=[n,r,r,n],e.y=[i,i,o,o],t+e.width+2*a},0)}else{const c=1/n;r.forEach((t,e)=>{t.x=(e+.5)*c,t.y=l})}return function(t,e){const r=new Map(t.map(t=>[t.id,t]));if(!h)return e.forEach(t=>{var e=p(t),n=y(t),e=r.get(e),n=r.get(n);e&&n&&(t.x=[e.x,n.x],t.y=[e.y,n.y])});e.forEach(t=>{t.x=[0,0,0,0],t.y=[l,l,l,l]});const s=Pv(e,t=>t.source),c=Pv(e,t=>t.target);t.forEach(n=>{const{width:r,value:i,id:t}=n;var e=s.get(t)||[],o=c.get(t)||[];let a=0;e.map(t=>{var e=t.sourceWeight/i*r;t.x[0]=n.x[0]+a,t.x[1]=n.x[0]+a+e,a+=e}),o.forEach(t=>{var e=t.targetWeight/i*r;t.x[3]=n.x[0]+a,t.x[2]=n.x[0]+a+e,a+=e})})}(e,t),{nodes:e,edges:t}}}const DA=e=>t=>RA(e)(t),BA=(DA.props={},Math.PI/180),FA=64,zA=2048;function GA(t){return t.text}function WA(){return"serif"}function HA(){return"normal"}function VA(t){return t.value}function YA(){return 90*~~(2*Math.random())}function UA(){return 1}function qA(){}function XA(t,a,r,s){if(!a.sprite){var c=t.context,l=t.ratio;c.clearRect(0,0,(FA<<5)/l,zA/l);let i=0,o=0,n=0;var u,h,f,d,e=r.length;for(--s;++s<e;){a=r[s],c.save(),c.font=a.style+" "+a.weight+" "+~~((a.size+1)/l)+"px "+a.font;let t=c.measureText(a.text+"m").width*l,e=a.size<<1;if(a.rotate?(d=Math.sin(a.rotate*BA),f=Math.cos(a.rotate*BA),u=t*f,h=t*d,f=e*f,d=e*d,t=Math.max(Math.abs(u+d),Math.abs(u-d))+31>>5<<5,e=~~Math.max(Math.abs(h+f),Math.abs(h-f))):t=t+31>>5<<5,e>n&&(n=e),i+t>=FA<<5&&(i=0,o+=n,n=0),o+e>=zA)break;c.translate((i+(t>>1))/l,(o+(e>>1))/l),a.rotate&&c.rotate(a.rotate*BA),c.fillText(a.text,0,0),a.padding&&(c.lineWidth=2*a.padding,c.strokeText(a.text,0,0)),c.restore(),a.width=t,a.height=e,a.xoff=i,a.yoff=o,a.x1=t>>1,a.y1=e>>1,a.x0=-a.x1,a.y0=-a.y1,a.hasText=!0,i+=t}for(var p=c.getImageData(0,0,(FA<<5)/l,zA/l).data,y=[];0<=--s;)if((a=r[s]).hasText){var g=a.width,v=g>>5;let n=a.y1-a.y0;for(let t=0;t<n*v;t++)y[t]=0;if(null==(i=a.xoff))return;o=a.yoff;let r=0,t=-1;for(let e=0;e<n;e++){for(let t=0;t<g;t++){var m=v*e+(t>>5),b=p[(o+e)*(FA<<5)+(i+t)<<2]?1<<31-t%32:0;y[m]|=b,r|=b}r?t=e:(a.y0++,n--,e--,o++)}a.y1=a.y0+t,a.sprite=y.slice(0,(a.y1-a.y0)*v)}}}function $A(t){const e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function ZA(t){var e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function KA(){return document.createElement("canvas")}function JA(t){return"function"==typeof t?t:function(){return t}}const QA={archimedean:$A,rectangular:function(t){const n=4*t[0]/t[1];let r=0,i=0;return function(t){var e=t<0?-1:1;switch(Math.sqrt(1+4*e*t)-e&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4}return[r,i]}}};function tP(){let b=[256,256],r=GA,i=WA,p=VA,y=HA,g=YA,v=UA,x=$A,w=Math.random,m=qA,k=[],E=null,_=1/0;const M=HA,S=KA,T={};return T.start=function(){const[o,a]=b,s=((t=S()).width=t.height=1,e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2),t.width=(FA<<5)/e,t.height=zA/e,(t=t.getContext("2d")).fillStyle=t.strokeStyle="red",t.textAlign="center",{context:t,ratio:e}),c=T.board||ZA((b[0]>>5)*b[1]),l=k.length,u=[],h=k.map(function(t,e,n){return t.text=r.call(this,t,e,n),t.font=i.call(this,t,e,n),t.style=M.call(this,t,e,n),t.weight=y.call(this,t,e,n),t.rotate=g.call(this,t,e,n),t.size=~~p.call(this,t,e,n),t.padding=v.call(this,t,e,n),t}).sort(function(t,e){return e.size-t.size});var t,e;let f=-1,d=T.board?[{x:0,y:0},{x:o,y:a}]:void 0;function n(){for(var t,e,n,r=Date.now();Date.now()-r<_&&++f<l;){var i=h[f];i.x=o*(w()+.5)>>1,i.y=a*(w()+.5)>>1,XA(s,i,h,f),i.hasText&&function(i,t,e){var n=t.x,r=t.y,o=Math.sqrt(b[0]*b[0]+b[1]*b[1]),a=x(b),s=w()<.5?1:-1;let c,l=-s,u,h;for(;(c=a(l+=s))&&(u=~~c[0],h=~~c[1],!(Math.min(Math.abs(u),Math.abs(h))>=o));)if(t.x=n+u,t.y=r+h,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>b[0]||t.y+t.y1>b[1])&&(!e||!function(t,n,r){var i=t.sprite,o=t.width>>5,e=t.x-(o<<4),a=127&e,s=32-a,c=t.y1-t.y0;let l=(t.y+t.y0)*(r>>=5)+(e>>5),u;for(let e=0;e<c;e++){for(let t=u=0;t<=o;t++)if((u<<s|(t<o?(u=i[e*o+t])>>>a:0))&n[l+t])return 1;l+=r}}(t,i,b[0]))&&(!e||function(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}(t,e))){var f=t.sprite,d=t.width>>5,p=b[0]>>5,y=t.x-(d<<4),g=127&y,v=32-g,m=t.y1-t.y0;let n,r=(t.y+t.y0)*p+(y>>5);for(let e=0;e<m;e++){for(let t=n=0;t<=d;t++)i[r+t]|=n<<v|(t<d?(n=f[e*d+t])>>>g:0);r+=p}return delete t.sprite,1}return}(c,i,d)&&(m.call(null,"word",{cloud:T,word:i}),u.push(i),d?T.hasImage||(t=d,e=i,n=void 0,n=t[0],t=t[1],e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>t.x&&(t.x=e.x+e.x1),e.y+e.y1>t.y&&(t.y=e.y+e.y1)):d=[{x:i.x+i.x0,y:i.y+i.y0},{x:i.x+i.x1,y:i.y+i.y1}],i.x-=b[0]>>1,i.y-=b[1]>>1)}T._tags=u,T._bounds=d,f>=l&&(T.stop(),m.call(null,"end",{cloud:T,words:u,bounds:d}))}return E&&clearInterval(E),E=setInterval(n,0),n(),T},T.stop=function(){return E&&(clearInterval(E),E=null),T},T.createMask=t=>{var e=document.createElement("canvas"),[n,r]=b;if(n&&r){var i=n>>5,o=ZA((n>>5)*r),e=(e.width=n,e.height=r,e.getContext("2d")),a=(e.drawImage(t,0,0,t.width,t.height,0,0,n,r),e.getImageData(0,0,n,r).data);for(let e=0;e<r;e++)for(let t=0;t<n;t++){var s=i*e+(t>>5),c=e*n+t<<2,c=250<=a[c]&&250<=a[1+c]&&250<=a[2+c]?1<<31-t%32:0;o[s]|=c}T.board=o,T.hasImage=!0}},T.timeInterval=function(t){_=null==t?1/0:t},T.words=function(t){k=t},T.size=function(t=[]){b=[+t[0],+t[1]]},T.text=function(t){r=JA(t)},T.font=function(t){i=JA(t)},T.fontWeight=function(t){y=JA(t)},T.rotate=function(t){g=JA(t)},T.spiral=function(t){x=QA[t]||t},T.fontSize=function(t){p=JA(t)},T.padding=function(t){v=JA(t)},T.random=function(t){w=JA(t)},T.on=function(t){m=JA(t)},T}const eP={size:[500,500],fontSize:[14,28]};function nP(r){return new Promise((t,e)=>{if(r instanceof HTMLImageElement)t(r);else if("string"==typeof r){const n=new Image;n.crossOrigin="anonymous",n.src=r,n.onload=()=>t(n),void(n.onerror=()=>{console.error(`'image ${r} load failed !!!'`),e()})}else e()})}const rP=f=>h=>go(void 0,void 0,void 0,function*(){var i,o,t=Object.assign({},eP,f),e=tP(),e=(i=e,o=t,yield{set(t,e,n){return void 0!==o[t]&&(e=e?e.call(null,o[t]):o[t],n?n.call(null,e):"function"==typeof i[t]?i[t](e):i[t]=e),this},setAsync(e,n,r){return go(this,void 0,void 0,function*(){var t;return void 0!==o[e]&&(t=n?yield n.call(null,o[e]):o[e],r?r.call(null,t):"function"==typeof i[e]?i[e](t):i[e]=t),this})}}.set("fontSize",t=>{var e=h.map(t=>t.value),n=t,t=[Bv(e),Rv(e)];if("function"==typeof n)return n;if(Array.isArray(n)){const[r,i]=n;if(!t)return()=>(i+r)/2;const[o,a]=t;return a===o?()=>(i+r)/2:({value:t})=>(i-r)/(a-o)*(t-o)+r}return()=>n}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",nP,e.createMask),e.words([...h]),e.start());const[r,a]=t.size;var t=[{x:0,y:0},{x:r,y:a}],{_bounds:e=t,_tags:t,hasImage:n}=e,t=t.map(t=>{var{x:e,y:n}=t,t=N(t,["x","y"]);return Object.assign(Object.assign({},t),{x:e+r/2,y:n+a/2})}),[{x:e,y:s},{x:c,y:l}]=e,u={text:"",value:0,opacity:0,fontSize:0};return t.push(Object.assign(Object.assign({},u),{x:n?0:e,y:n?0:s}),Object.assign(Object.assign({},u),{x:n?r:c,y:n?a:l})),t});function iP(t){var{min:t,max:e}=t.getRenderBounds(),[t,n]=t,[e,r]=e;return[[t,n],[t,r],[e,r],[e,n]]}rP.props={};const oP=()=>n=>{var r=[];n.sort((t,e)=>t.style.priority-e.style.priority);for(let t=0;t<n.length;t++){var i=n[t];let e=!(i.style.visibility="visible");for(let t=0;t<r.length;t++){var o=r[t];if(LT(iP(i),iP(o))){i.style.visibility="hidden",e=!0;break}}e||r.push(i)}return n};function aP(){const n=new Map;return[t=>n.get(t),(t,e)=>n.set(t,e)]}const sP=t=>{const{maxIter:k=10,maxError:E=.1,padding:_=1}=t;return i=>{var e=i.length;if(!(e<=1)){const[y,g]=aP(),[v,m]=aP();var o,a,s,c,[l,t]=aP(),[u,n]=aP();for(const b of i){var{min:r,max:h}=b.getRenderBounds();const[x,y]=r;var[r,h]=h;g(b,y),m(b,y),t(b,h-y),n(b,[x,r])}for(let t=0;t<k;t++){i.sort((t,e)=>_v(v(t),v(e)));let r=0;for(let n=0;n<e-1;n++){var f=i[n];let t=n+1,e;for(;(e=i[t])&&([[o,a],[s,c]]=[u(f),u(e)],!(o<c&&s<a));)t+=1;if(e){const y=v(f);var d=l(f),p=v(e),d=p-(y+d);d<_&&(d=(_-d)/2,r=Math.max(r,d),m(f,y-d),m(e,p+d))}}if(r<E)break}for(const w of i)w.style.y+=v(w)-y(w)}return i}};function cP(){return{"data.fetch":z3,"data.inline":Z3,"data.sortBy":$3,"data.filterBy":V3,"data.pick":q3,"data.rename":X3,"data.subset":U3,"data.fold":G3,"data.custom":K3,"data.map":J3,"data.cluster":gA,"data.tree":vA,"data.sankey":LA,"data.arc":DA,"data.wordCloud":rP,"transform.maybeZeroY1":wO,"transform.maybeZeroX":BO,"transform.maybeStackY":LO,"transform.maybeTitleX":IO,"transform.maybeTooltipY":DO,"transform.maybeTooltipPosition":RO,"transform.maybeSeries":WO,"transform.maybeZeroPadding":qO,"transform.stackY":NO,"transform.dodgeX":XO,"transform.jitter":QO,"transform.jitterX":t3,"transform.symmetryY":e3,"transform.diffY":n3,"transform.stackEnter":$O,"transform.normalizeY":ZO,"transform.select":s3,"transform.selectX":c3,"transform.selectY":l3,"transform.groupX":x3,"transform.groupY":w3,"transform.groupColor":k3,"transform.group":b3,"transform.maybeSize":zO,"transform.maybeZeroY":FO,"transform.maybeKey":GO,"transform.sortX":_3,"transform.sortY":S3,"transform.sortColor":M3,"transform.flexX":T3,"transform.maybeTupleY":HO,"transform.maybeTupleX":VO,"transform.maybeIdentityY":YO,"transform.maybeIdentityX":UO,"coordinate.cartesian":Qg,"coordinate.polar":tv,"coordinate.helix":ev,"coordinate.transpose":nv,"coordinate.theta":av,"coordinate.reflect":rv,"coordinate.reflectX":iv,"coordinate.reflectY":ov,"coordinate.parallel":cv,"coordinate.fisheye":lv,"coordinate.fisheyeX":uv,"coordinate.fisheyeY":hv,"coordinate.radial":sv,"encode.constant":fv,"encode.field":pv,"encode.transform":dv,"encode.column":yv,"mark.interval":kv,"mark.rect":Ev,"mark.line":Qv,"mark.point":tm,"mark.text":em,"mark.cell":nm,"mark.area":rm,"mark.link":im,"mark.image":om,"mark.polygon":am,"mark.box":sm,"mark.vector":cm,"mark.lineX":um,"mark.lineY":lm,"mark.connector":hm,"mark.range":pm,"mark.rangeX":ym,"mark.rangeY":gm,"palette.category10":vm,"palette.category20":mm,"palette.sequentialBlue":bm,"palette.sequentialDarkBlue":xm,"palette.sequentialGreen":wm,"palette.sequentialDarkGreen":km,"palette.sequentialGrey":Em,"palette.sequentialOrange":_m,"palette.sequentialPink":Mm,"palette.sequentialRed":Sm,"palette.sequentialYellow":Tm,"palette.sequentialPurple":Om,"palette.sequentialYellowOrange":Am,"palette.sequentialYellowGreen":Pm,"palette.sequentialPinkPurple":Nm,"palette.sequentialGreenBlue":Cm,"palette.divergingGreenYellow":Lm,"palette.divergingRedBlue":Im,"palette.divergingGreenRed":jm,"palette.divergingRedPurple":Rm,"scale.linear":xb,"scale.ordinal":wb,"scale.band":bb,"scale.identity":kb,"scale.point":Eb,"scale.time":_b,"scale.log":Mb,"scale.pow":Sb,"scale.sqrt":Pb,"scale.threshold":Tb,"scale.quantile":Ob,"scale.quantize":Ab,"scale.sequential":Nb,"shape.interval.rect":Q2,"shape.interval.hollow":tx,"shape.interval.funnel":ex,"shape.interval.pyramid":rx,"shape.rect.rect":Q2,"shape.rect.hollow":tx,"shape.cell.cell":Q2,"shape.cell.hollow":tx,"shape.line.line":sx,"shape.line.hv":lx,"shape.line.vh":ux,"shape.line.hvh":hx,"shape.line.smooth":cx,"shape.point.bowtie":yx,"shape.point.cross":gx,"shape.point.diamond":vx,"shape.point.hexagon":mx,"shape.point.hollowBowtie":bx,"shape.point.hollowDiamond":xx,"shape.point.hollowHexagon":wx,"shape.point.hollow":kx,"shape.point.hollowSquare":Ex,"shape.point.hollowTriangle":_x,"shape.point.hollowTriangleDown":Mx,"shape.point.hyphen":Sx,"shape.point.line":Tx,"shape.point.plus":Ox,"shape.point.point":Ax,"shape.point.square":Px,"shape.point.tick":Nx,"shape.point.triangle":Cx,"shape.point.triangleDown":Lx,"shape.text.text":vM,"shape.area.area":kM,"shape.area.smooth":EM,"shape.area.step":_M,"shape.link.smooth":SM,"shape.link.vhv":TM,"shape.link.arc":OM,"shape.link.link":MM,"shape.image.image":AM,"shape.polygon.polygon":PM,"shape.polygon.ribbon":NM,"shape.box.box":CM,"shape.vector.vector":Ix,"shape.label.label":YM,"shape.text.badge":bM,"shape.lineX.line":LM,"shape.lineY.line":LM,"shape.connector.connector":BM,"shape.range.range":Q2,"shape.rangeX.range":Q2,"shape.rangeY.range":Q2,"theme.light":UM,"component.axisX":hS,"component.axisY":fS,"component.legendCategory":dS,"component.legendContinuous":pS,"component.title":mS,"animation.scaleInX":_S,"animation.scaleOutX":MS,"animation.scaleInY":SS,"animation.scaleOutY":TS,"animation.waveIn":LS,"animation.fadeIn":OS,"animation.fadeOut":AS,"animation.morphing":CS,"interaction.elementActive":w5,"interaction.elementSelected":k5,"interaction.elementHighlight":M5,"interaction.elementHighlightByX":T5,"interaction.elementHighlightByColor":O5,"interaction.elementListHighlight":S5,"interaction.legendActive":A5,"interaction.legendHighlight":P5,"interaction.tooltip":E5,"interaction.fisheye":_5,"interaction.brush":C5,"interaction.brushHighlight":D5,"interaction.brushVisible":B5,"interaction.activeRegion":F5,"interaction.ellipsisText":z5,"composition.layer":V5,"composition.flex":Y5,"composition.mark":q5,"composition.view":U5,"composition.square":rO,"composition.matrix":sO,"composition.circle":dO,"composition.keyframe":pO,"adjust.pack":yO,"labelTransform.hideOverlap":oP,"labelTransform.dodgeY":sP}}function lP(e,n){const r=t=>{return"string"!=typeof t?t:n[t=e+"."+t]||C2("Unknown Component: "+t)};return[t=>{var e=t["type"],t=N(t,["type"]);return r(e)(Object.assign({},t))},r]}function k(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}s=k("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),h=k("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),o=k("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t=k("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),e=k("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),pt=k("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Q=k("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),i=k("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),r=k("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f=k("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function uP(t,e,n){(t.prototype=e.prototype=n).constructor=t}function hP(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function fP(){}var dP=1/.7,ut="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pP=/^#([0-9a-f]{3,8})$/,yP=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),gP=new RegExp(`^rgb\\(${a},${a},${a}\\)$`),vP=new RegExp(`^rgba\\(${ut},${ut},${ut},${u}\\)$`),mP=new RegExp(`^rgba\\(${a},${a},${a},${u}\\)$`),bP=new RegExp(`^hsl\\(${u},${a},${a}\\)$`),xP=new RegExp(`^hsla\\(${u},${a},${a},${u}\\)$`),wP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kP(){return this.rgb().formatHex()}function EP(){return this.rgb().formatRgb()}function _P(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pP.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?MP(e):3===n?new AP(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?SP(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?SP(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=yP.exec(t))?new AP(e[1],e[2],e[3],1):(e=gP.exec(t))?new AP(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=vP.exec(t))?SP(e[1],e[2],e[3],e[4]):(e=mP.exec(t))?SP(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=bP.exec(t))?jP(e[1],e[2]/100,e[3]/100,1):(e=xP.exec(t))?jP(e[1],e[2]/100,e[3]/100,e[4]):wP.hasOwnProperty(t)?MP(wP[t]):"transparent"===t?new AP(NaN,NaN,NaN,0):null}function MP(t){return new AP(t>>16&255,t>>8&255,255&t,1)}function SP(t,e,n,r){return new AP(t=r<=0?e=n=NaN:t,e,n,r)}function TP(t){return(t=t instanceof fP?t:_P(t))?new AP((t=t.rgb()).r,t.g,t.b,t.opacity):new AP}function OP(t,e,n,r){return 1===arguments.length?TP(t):new AP(t,e,n,null==r?1:r)}function AP(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function PP(){return"#"+IP(this.r)+IP(this.g)+IP(this.b)}function NP(){var t=CP(this.opacity);return(1===t?"rgb(":"rgba(")+LP(this.r)+`, ${LP(this.g)}, `+LP(this.b)+(1===t?")":`, ${t})`)}function CP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function LP(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function IP(t){return((t=LP(t))<16?"0":"")+t.toString(16)}function jP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new DP(t,e,n,r)}function RP(t){var e,n,r,i,o,a,s,c;return t instanceof DP?new DP(t.h,t.s,t.l,t.opacity):(t=t instanceof fP?t:_P(t))?t instanceof DP?t:(e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=NaN,c=((o=Math.max(e,n,r))+i)/2,(s=o-i)?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=0<c&&c<1?0:a,new DP(a,s,c,t.opacity)):new DP}function DP(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function BP(t){return(t=(t||0)%360)<0?t+360:t}function FP(t){return Math.max(0,Math.min(1,t||0))}function zP(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}uP(fP,_P,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kP,formatHex:kP,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return RP(this).formatHsl()},formatRgb:EP,toString:EP}),uP(AP,OP,hP(fP,{brighter(t){return t=null==t?dP:Math.pow(dP,t),new AP(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new AP(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new AP(LP(this.r),LP(this.g),LP(this.b),CP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PP,formatHex:PP,formatHex8:function(){return"#"+IP(this.r)+IP(this.g)+IP(this.b)+IP(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:NP,toString:NP})),uP(DP,function(t,e,n,r){return 1===arguments.length?RP(t):new DP(t,e,n,null==r?1:r)},hP(fP,{brighter(t){return t=null==t?dP:Math.pow(dP,t),new DP(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new DP(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new AP(zP(240<=t?t-240:120+t,n,e),zP(t,n,e),zP(t<120?240+t:t-120,n,e),this.opacity)},clamp(){return new DP(BP(this.h),FP(this.s),FP(this.l),CP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var t=CP(this.opacity);return(1===t?"hsl(":"hsla(")+BP(this.h)+`, ${100*FP(this.s)}%, ${100*FP(this.l)}%`+(1===t?")":`, ${t})`)}}));const GP=Math.PI/180,WP=180/Math.PI;var HP=1.78277,VP=-.29227,YP=-.90649,UP=1.97294,qP=UP*YP,XP=UP*HP,$P=HP*VP- -.14861*YP;function ZP(t,e,n,r){return 1===arguments.length?(i=t)instanceof KP?new KP(i.h,i.s,i.l,i.opacity):(o=(i=i instanceof AP?i:TP(i)).r/255,a=i.g/255,c=i.b/255,c=(UP*(a-(o=($P*c+qP*o-XP*a)/($P+qP-XP)))-VP*(a=c-o))/YP,new KP((c=(s=Math.sqrt(c*c+a*a)/(UP*o*(1-o)))?Math.atan2(c,a)*WP-120:NaN)<0?c+360:c,s,o,i.opacity)):new KP(t,e,n,null==r?1:r);var i,o,a,s,c}function KP(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}uP(KP,ZP,hP(fP,{brighter(t){return t=null==t?dP:Math.pow(dP,t),new KP(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new KP(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*GP,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),t=Math.sin(t);return new AP(255*(e+n*(-.14861*r+HP*t)),255*(e+n*(VP*r+YP*t)),255*(e+UP*r*n),this.opacity)}}));var JP=t=>()=>t;function QP(e,n){return function(t){return e+t*n}}function t4(o){return 1==(o=+o)?e4:function(t,e){return e-t?(n=t,r=e,i=o,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):JP(isNaN(t)?e:t);var n,r,i}}function e4(t,e){var n=e-t;return n?QP(t,n):JP(isNaN(t)?e:t)}!function t(e){var a=t4(e);function n(e,t){var n=a((e=OP(e)).r,(t=OP(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=e4(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);n4=function(s){var c=s.length-1;return function(t){var e,n=t<=0?t=0:1<=t?c-(t=1):Math.floor(t*c),r=s[n],i=s[n+1],o=0<n?s[n-1]:2*r-i,a=n<c-1?s[n+2]:2*i-r;return((1-3*(t=(t-n/c)*c)+3*(n=t*t)-(e=n*t))*o+(4-6*n+3*e)*r+(1+3*t+3*n-3*e)*i+e*a)/6}};var n4,r4=function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a=0;a<n;++a)e=OP(t[a]),r[a]=e.r||0,i[a]=e.g||0,o[a]=e.b||0;return r=n4(r),i=n4(i),o=n4(o),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e+""}};function i4(s){return function t(a){function e(e,t){var n=s((e=ZP(e)).h,(t=ZP(t)).h),r=e4(e.s,t.s),i=e4(e.l,t.l),o=e4(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(Math.pow(t,a)),e.opacity=o(t),e+""}}return a=+a,e.gamma=t,e}(1)}i4(function(t,e){var n=e-t;return n?QP(t,180<n||n<-180?n-360*Math.round(n/360):n):JP(isNaN(t)?e:t)});var Mt=i4(e4),l=t=>r4(t[t.length-1]),K=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(k),jt=l(K),J=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(k),n=l(J),c=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(k),dt=l(c),Te=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(k),ut=l(Te),a=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(k),u=l(a),o4=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(k),a4=l(o4),s4=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(k),c4=l(s4),l4=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(k),u4=l(l4),h4=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(k),f4=l(h4),d4=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(k),p4=l(d4),y4=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(k),g4=l(y4),v4=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(k),m4=l(v4),b4=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(k),x4=l(b4),w4=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(k),k4=l(w4),E4=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(k),_4=l(E4),M4=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(k),S4=l(M4),T4=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(k),O4=l(T4),A4=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(k),P4=l(A4),N4=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(k),C4=l(N4),L4=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(k),I4=l(L4),j4=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(k),R4=l(j4),D4=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(k),B4=l(D4),F4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(k),z4=l(F4),G4=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(k),W4=l(G4),H4=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(k),V4=l(H4),Y4=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(k),U4=l(Y4),q4=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(k),l=l(q4);var X4=Mt(ZP(300,.5,0),ZP(-240,.5,1)),$4=Mt(ZP(-100,.75,.35),ZP(80,1.5,.8)),Mt=Mt(ZP(260,.75,.35),ZP(80,1.5,.8)),Z4=ZP();var K4=OP(),J4=Math.PI/3,Q4=2*Math.PI/3;function tN(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var eN=tN(k("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),nN=tN(k("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rN=tN(k("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),iN=tN(k("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),oN=Object.freeze({__proto__:null,schemeCategory10:s,schemeAccent:h,schemeDark2:o,schemePaired:t,schemePastel1:e,schemePastel2:pt,schemeSet1:Q,schemeSet2:i,schemeSet3:r,schemeTableau10:f,interpolateBrBG:jt,schemeBrBG:K,interpolatePRGn:n,schemePRGn:J,interpolatePiYG:dt,schemePiYG:c,interpolatePuOr:ut,schemePuOr:Te,interpolateRdBu:u,schemeRdBu:a,interpolateRdGy:a4,schemeRdGy:o4,interpolateRdYlBu:c4,schemeRdYlBu:s4,interpolateRdYlGn:u4,schemeRdYlGn:l4,interpolateSpectral:f4,schemeSpectral:h4,interpolateBuGn:p4,schemeBuGn:d4,interpolateBuPu:g4,schemeBuPu:y4,interpolateGnBu:m4,schemeGnBu:v4,interpolateOrRd:x4,schemeOrRd:b4,interpolatePuBuGn:k4,schemePuBuGn:w4,interpolatePuBu:_4,schemePuBu:E4,interpolatePuRd:S4,schemePuRd:M4,interpolateRdPu:O4,schemeRdPu:T4,interpolateYlGnBu:P4,schemeYlGnBu:A4,interpolateYlGn:C4,schemeYlGn:N4,interpolateYlOrBr:I4,schemeYlOrBr:L4,interpolateYlOrRd:R4,schemeYlOrRd:j4,interpolateBlues:B4,schemeBlues:D4,interpolateGreens:z4,schemeGreens:F4,interpolateGreys:W4,schemeGreys:G4,interpolatePurples:V4,schemePurples:H4,interpolateReds:U4,schemeReds:Y4,interpolateOranges:l,schemeOranges:q4,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:X4,interpolateRainbow:function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Z4.h=360*t-100,Z4.s=1.5-1.5*e,Z4.l=.8-.9*e,Z4+""},interpolateWarm:$4,interpolateCool:Mt,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,K4.r=255*(e=Math.sin(t))*e,K4.g=255*(e=Math.sin(t+J4))*e,K4.b=255*(e=Math.sin(t+Q4))*e,K4+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:eN,interpolateMagma:nN,interpolateInferno:rN,interpolatePlasma:iN});function aN(t,e,n){for(;t<e;)t+=2*Math.PI;for(;n<t;)t-=2*Math.PI;return t}function sN(t,e,n,r,i){var o=t[0],t=t[1],a=oi();return o=[o,t],(t=a)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=o[0],t[7]=o[1],t[8]=1,t}function cN(t,e,n,r,i){var o=new q1({range:[e,e+r]}),a=new q1({range:[n,n+i]});return{transform:function(t){var e=t[0],t=t[1];return[o.map(e),a.map(t)]},untransform:function(t){var e=t[0],t=t[1];return[o.invert(e),a.invert(t)]}}}function lN(t,e,n,r,i){return(0,t[0])(e,n,r,i)}function uN(t,e,n,r,i){return t[0]}function hN(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],t=t[3],c=new q1({range:[s,t]}),l=new q1({range:[o,a]}),u=1<(s=i/r)?1:s,h=1<s?1/s:1;return{transform:function(t){var e=t[0],t=t[1],e=l.map(e),t=c.map(t);return[.5*(t*Math.cos(e)*u)+.5,.5*(t*Math.sin(e)*h)+.5]},untransform:function(t){var e=t[0],t=t[1],e=2*(e-.5)/u,t=2*(t-.5)/h,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),t=aN(Math.atan2(t,e),o,a);return[l.invert(t),c.invert(n)]}}}function fN(t,e,n,r,i){return{transform:function(t){var e=t[0];return[t[1],e]},untransform:function(t){var e=t[0];return[t[1],e]}}}function dN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return bN.apply(void 0,xN([[-1,-1]],e,!1))}function pN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return bN.apply(void 0,xN([[-1,1]],e,!1))}function yN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return bN.apply(void 0,xN([[1,-1]],e,!1))}function gN(t,e,n,r,i){var o,t=t[0],a=oi();return a=a,t=t,o=Math.sin(t),t=Math.cos(t),a[0]=t,a[1]=o,a[2]=0,a[3]=-o,a[4]=t,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function vN(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],c=(t[3]-s)/(+a/(2*Math.PI)+1),l=c/(2*Math.PI),u=new q1({range:[s,s+.99*c]}),h=new q1({range:[o,a]}),f=1<(t=i/r)?1:t,d=1<t?1/t:1;return{transform:function(t){var e=t[0],t=t[1],e=h.map(e),t=u.map(t);return[.5*(Math.cos(e)*(l*e+t)*f)+.5,.5*(Math.sin(e)*(l*e+t)*d)+.5]},untransform:function(t){var e=t[0],t=t[1],e=2*(e-.5)/f,t=2*(t-.5)/d,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),t=aN(Math.atan2(t,e)+Math.floor(n/c)*Math.PI*2,o,a),e=n-l*t;return[h.invert(t),u.invert(e)]}}}function mN(t,e,n,r,i){var s=t[0],c=t[1],o=t[2],t=t[3],l=new q1({range:[o,t]});return{transform:function(t){for(var e=[],n=t.length,r=new X1({domain:new Array(n).fill(0).map(function(t,e){return e}),range:[s,c]}),i=0;i<n;i++){var o=t[i],a=r.map(i),o=l.map(o);e.push(a,o)}return e},untransform:function(t){for(var e=[],n=0;n<t.length;n+=2){var r=t[n+1];e.push(l.invert(r))}return e}}}var bN=function(t,e,n,r,i){var o=t[0],t=t[1],a=oi();return o=[o,t],(t=a)[0]=o[0],t[1]=0,t[2]=0,t[3]=0,t[4]=o[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xN=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function wN(t){return 1/Math.tan(t)}function kN(t,e,n,r,i){var o=wN(t[0]);return{transform:function(t){var e=t[0],t=t[1];return[e+t*o,t]},untransform:function(t){var e=t[0],t=t[1];return[e-t*o,t]}}}function EN(t,e,n,r,i){var o=wN(t[0]);return{transform:function(t){var e=t[0];return[e,t[1]+e*o]},untransform:function(t){var e=t[0];return[e,t[1]-e*o]}}}function _N(t,e,n,r,i){var o=t<e,i=(o?e-r:i-e)||i-r,r=o?-1:1;return r*i*(n+1)/(n+i/((t-e)*r))+e}function MN(t,e,n,r,i){var o=t<e,i=(o?e-r:i-e)||i-r;return i/(i*(n+1)/(t-e)-n*(o?-1:1))+e}function SN(t,e,n){return n?new q1({range:[0,1],domain:[0,e]}).map(t):t}function TN(t,e,n,r,i){var o=t[0],a=t[1],t=t[2],s=SN(o,r,void 0!==t&&t);return{transform:function(t){var e=t[0],t=t[1];return[_N(e,s,a,0,1),t]},untransform:function(t){var e=t[0],t=t[1];return[MN(e,s,a,0,1),t]}}}function ON(t,e,n,r,i){var o=t[0],a=t[1],t=t[2],s=SN(o,i,void 0!==t&&t);return{transform:function(t){return[t[0],_N(t[1],s,a,0,1)]},untransform:function(t){return[t[0],MN(t[1],s,a,0,1)]}}}function AN(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],c=t[3],t=t[4],l=SN(o,r,t=void 0!==t&&t),u=SN(a,i,t);return{transform:function(t){var e=t[0],t=t[1];return[_N(e,l,s,0,1),_N(t,u,c,0,1)]},untransform:function(t){var e=t[0],t=t[1];return[MN(e,l,s,0,1),MN(t,u,c,0,1)]}}}function PN(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],c=t[3],t=void 0!==(t=t[4])&&t,l=new q1({range:[0,r]}),u=new q1({range:[0,i]}),h=t?o:l.map(o),f=t?a:u.map(a);return{transform:function(t){var e=t[0],t=t[1],n=l.map(e)-h,r=u.map(t)-f,i=Math.sqrt(n*n+r*r);return s<i?[e,t]:(e=_N(i,0,c,0,s),t=Math.atan2(r,n),i=h+e*Math.cos(t),r=f+e*Math.sin(t),[l.invert(i),u.invert(r)])},untransform:function(t){var e=t[0],t=t[1],n=l.map(e)-h,r=u.map(t)-f,i=Math.sqrt(n*n+r*r);return s<i?[e,t]:(e=MN(i,0,c,0,s),t=Math.atan2(r,n),i=h+e*Math.cos(t),r=f+e*Math.sin(t),[l.invert(i),u.invert(r)])}}}var NN=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},CN=(LN.prototype.update=function(t){this.options=P({},this.options,t),this.recoordinate()},LN.prototype.clone=function(){return new LN(this.options)},LN.prototype.getOptions=function(){return this.options},LN.prototype.clear=function(){this.update({transformations:[]})},LN.prototype.getSize=function(){var t=this.options;return[t.width,t.height]},LN.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y;return[(2*e+t.width)/2,(2*n+t.height)/2]},LN.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:NN(NN([],n,!0),[NN([],t,!0)],!1)}),this},LN.prototype.map=function(t){return this.output(t)},LN.prototype.invert=function(t){return this.input(t)},LN.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},LN.prototype.compose=function(t){for(var e=(t=void 0===t?!1:t)?NN([],this.options.transformations,!0).reverse():this.options.transformations,n=t?function(t){return t.untransform}:function(t){return t.transform},r=[],o=[],i=function(t,e){return o.push((e=void 0===e?!0:e)?(i=t,function(t){for(var e=[],n=0;n<t.length-1;n+=2){var r=[t[n],t[n+1]],r=i(r);e.push.apply(e,r)}return e}):t);var i},a=0,s=e;a<s.length;a++){var c,l,u,h,f=s[a],d=f[0],f=f.slice(1),p=this.transformers[d];p&&(c=(h=this.options).x,l=h.y,u=h.width,h=h.height,p=p(NN([],f,!0),c,l,u,h),(f=p)instanceof Float32Array||f instanceof Array?r.push(p):(r.length&&(i(this.createMatrixTransform(r,t)),r.splice(0,r.length)),i(n(p)||Ug,"parallel"!==d)))}return r.length&&i(this.createMatrixTransform(r,t)),function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce(function(e,n){return function(t){return n(e(t))}},t):Ug}.apply(void 0,o)},LN.prototype.createMatrixTransform=function(t,e){var n,r,i,o,a,s,c,l,u,h,f,d,p=oi();return e&&t.reverse(),t.forEach(function(t){return ai(p,p,t)}),e&&(e=t=p,(d=new ii(9))[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],d[4]=e[4],d[5]=e[5],d[6]=e[6],d[7]=e[7],d[8]=e[8],d=(e=d)[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=(e=e[8])*o-a*c,(f=d*l+n*(u=-e*i+a*s)+r*(h=c*i-o*s))&&(t[0]=l*(f=1/f),t[1]=(-e*n+r*c)*f,t[2]=(a*n-r*o)*f,t[3]=u*f,t[4]=(e*d-r*s)*f,t[5]=(-a*d+r*i)*f,t[6]=h*f,t[7]=(-c*d+n*s)*f,t[8]=(o*d-n*i)*f)),function(t){t=[t[0],t[1],1];return Hi(t,t,p),[t[0],t[1]]}},LN);function LN(t){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:cN,translate:sN,custom:lN,matrix:uN,polar:hN,transpose:fN,scale:bN,"shear.x":kN,"shear.y":EN,reflect:dN,"reflect.x":pN,"reflect.y":yN,rotate:gN,helix:vN,parallel:mN,fisheye:AN,"fisheye.x":TN,"fisheye.y":ON,"fisheye.circular":PN},this.update(t)}function IN(t){return void 0!==t.find(t=>"polar"===t.type)}function jN(t){return void 0!==t.find(t=>"helix"===t.type)}function RN(t){return t.filter(({type:t})=>"transpose"===t).length%2==1}function DN(t){return void 0!==t.find(t=>"theta"===t.type)}function BN(t){return void 0!==t.find(t=>"radial"===t.type)}function FN(t,e,n,r,i,o,a){var s,c,l,u=t["scaleName"],t=function(t,e,n,r,i,o){var{name:a,field:s}=t,{field:s=s,guide:c={}}=e,l=function(t,e){var{scale:t,name:n,value:r,visual:i}=t,{type:e,domain:o,range:a}=e;return i?"identity":void 0!==e?e:void 0!==t?t:function(t){return t.some(t=>"object"==typeof t&&!(t instanceof Date)&&null!==t)}(r)?"identity":"string"==typeof a?"linear":2<(o||a||[]).length?VN(n):void 0===o?UN(r)?VN(n):qN(r)?"time":"linear":UN(o)?VN(n):qN(r)?"time":"linear"}(t,e);if("string"!=typeof l)return e;var u=function(t,e,n){var r=e["value"],e=n["domain"];if(void 0!==e)return e;var{domainMax:i,domainMin:o}=n;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"threshold":var[a,s]=function(t,e){var{zero:e=!1}=e;if(0===t.length)return[];let n=1/0,r=-1/0;for(const i of t)I2(i)&&(n=Math.min(n,+i),r=Math.max(r,+i));return e?[Math.min(0,n),r]:[n,r]}(r,n);return[o||a,i||s];case"band":case"ordinal":case"point":return YN(r);case"quantile":return function(t){return YN(t).sort()}(r);case"sequential":var[a,s]=function(t){var[t,e]=Sv(t,t=>+t);return[t<0?-e:t,e]}(r);return[o||a,i||s];default:return[]}}(l,t,e);return Object.assign(Object.assign(Object.assign({},e),function(t,e,n,r){var i=e["name"];switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return function(t){var{interpolate:e=_1,nice:n=!1,tickCount:r=10}=t;return Object.assign(Object.assign({},t),{interpolate:e,nice:n,tickCount:r})}(n);case"band":case"point":return function(t,e,n,r){if(void 0!==r.padding||void 0!==r.paddingInner||void 0!==r.paddingOuter)return r;var t=function(t,e,n){return"enterDelay"===e||"enterDuration"===e?0:"band"!==t?"point"===t?.5:0:DN(n)?0:.1}(t,e,n),{paddingInner:e=t,paddingOuter:n=t}=r;return Object.assign(Object.assign({},r),{paddingInner:e,paddingOuter:n,padding:t,unknown:NaN})}(t,i,r,n);case"sequential":return function(t){const{palette:e,offset:n}=t,r=jg(e),i=oN["interpolate"+r];if(i)return{interpolator:n?t=>i(n(t)):i};throw new Error("Unknown palette: "+r)}(n);default:return n}}(l,t,e,n)),{domain:u,range:function(t,e,n,r,i,o,a){var s=n["range"];if("string"==typeof s)return s.split("-");if(void 0!==s)return s;var c=e["name"],{rangeMin:l,rangeMax:u}=n;switch(t){case"linear":case"time":case"log":case"sqrt":var h=HN(e,n,r,o,a),[h,f]=function(t,e){return"enterDelay"===t?[0,1e3]:"enterDuration"==t?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:"color"===t?[e[0],function(t){return t[t.length-1]}(e)]:"size"===t?[1,10]:[0,1]}(c,h);return[l||h,u||f];case"band":case"point":return[l||0,u||1];case"ordinal":h=HN(e,n,r,o,a);return"color"===c?h:i;case"sequential":return;default:return[]}}(l,t,e,u,r,i,o),guide:c,name:a,field:s,type:l})}(t,e,n,r,i,a),e=t["independent"];return e?t:o.has(u)?(n=o.get(u),r=t,{type:a,domain:e,range:s}=i=n,{type:r,domain:c,range:l}=r,"string"==typeof a&&"string"==typeof r&&(i.type=function(t,e){return $N(t,e,"linear","identity")?"identity":$N(t,e,"band","point")?"band":t}(a,r),i.domain=function(t,e,n){switch(t){case"linear":case"pow":case"log":return ZN(e,n);case"band":case"ordinal":return KN(e,n);default:return e}}(a,e,c),i.range=function(t,e,n){switch(t){case"linear":case"band":case"pow":case"log":return ZN(e,n);case"ordinal":return KN(e,n);default:return e}}(a,s,l)),n):(o.set(u,t),t)}function zN(t,e){var t=t.map(t=>t[e]).filter(({facet:t=!0})=>t),n=t.flatMap(t=>t.domain),r=t.every(GN)?Sv(n):t.every(WN)?Array.from(new Set(n)):null;if(null!==r)for(const i of t)i.domain=r}function GN(t){t=t.type;return"string"==typeof t&&["linear","log","pow","time"].includes(t)}function WN(t){t=t.type;return"string"==typeof t&&["band","point","ordinal"].includes(t)}function HN(t,e,n,r,i){var[i]=lP("palette",i),t=t["value"],{defaultCategory10:r,defaultCategory20:o}=r,t=V2(t).length<=r.length?r:o,{palette:r,offset:o}=e;return function(t,n,r=t=>t){if(!t)return null;var t=jg(t),e=oN["scheme"+t];if(!e)return null;if(!e.some(Array.isArray))return e;e=e[n.length];if(e)return e;const i=oN["interpolate"+t];return n.map((t,e)=>i(r(e/n.length)))}(r,n,o)||i({type:r||t})}function VN(t){return(t=t).startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")?"point":"ordinal"}function YN(t){return Array.from(new Set(t))}function UN(t){return t.some(t=>{t=typeof t;return"string"==t||"boolean"==t})}function qN(t){return t.some(t=>t instanceof Date)}function XN(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||"enterDelay"===t||"enterDuration"===t||"updateDelay"===t||"updateDuration"===t||"exitDelay"===t||"exitDuration"===t}function $N(t,e,n,r){return t===n&&e===r||t===r&&e===n}function ZN(t,e){var[t,n]=t,[e,r]=e;return[Math.min(+t,+e),Math.max(+n,+r)]}function KN(t,e){return Array.from(new Set([...t,...e]))}function JN(t,e,n){var{scale:r={},transform:i=[]}=e,e=N(e,["scale","transform"]);return[t,Object.assign(Object.assign({},e),{scale:r,transform:i})]}function QN(t,i,o){return go(this,void 0,void 0,function*(){var t=o["library"],e=i["data"],[t]=lP("data",t),n=function(t){if(Array.isArray(t))return{type:"inline",value:t};var{type:e="inline"}=t,t=N(t,["type"]);return Object.assign(Object.assign({},t),{type:e})}(e),{transform:r=[]}=n,n=yield N2([N(n,["transform"]),...r].map(t))(e);return[Array.isArray(n)?H2(n):[],Object.assign(Object.assign({},i),{data:n})]})}function t6(t,e,n){var r=e["encode"];if(!r)return[t,e];var i,o,a={};for([i,o]of Object.entries(r))if(Array.isArray(o))for(let t=0;t<o.length;t++)a[""+i+(0===t?"":t)]=o[t];else a[i]=o;return[t,Object.assign(Object.assign({},e),{encode:a})]}function e6(t,e,n){const{encode:r,data:i}=e;var o;return r?(o=W2(r,t=>{var e,n;return function(t){if("object"!=typeof t||t instanceof Date)return;t=t.type;return I2(t)}(t)?t:(e=i,{type:"function"==typeof(n=t)?"transform":"string"!=typeof n||void 0===(null==(e=null==e?void 0:e[0])?void 0:e[n])?"constant":"field",value:t})}),[t,Object.assign(Object.assign({},e),{encode:o})]):[t,e]}function n6(t,e,n){var r=e["encode"];return r?(r=W2(r,(t,e)=>{var n=t["type"];return"constant"!==n||XN(e)?t:Object.assign(Object.assign({},t),{visual:!0})}),[t,Object.assign(Object.assign({},e),{encode:r})]):[t,e]}function r6(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];n=n.library;const o=function(t){const[n]=lP("encode",t);return(t,e)=>void 0===e||void 0===t?null:Object.assign(Object.assign({},e),{type:"column",value:n(e)(t),field:function(t){var{type:t,value:e}=t;return"field"===t&&"string"==typeof e?e:null}(e)})}(n);n=W2(r,t=>o(i,t));return[t,Object.assign(Object.assign({},e),{encode:n})]}function i6(c,t,e){var n,r=t["encode"],i=N(t,["encode"]);return r?(n=(r=Object.entries(r)).filter(([,t])=>{t=t.value;return Array.isArray(t[0])}).flatMap(([n,t])=>{var r=[[n,new Array(c.length).fill(void 0)]];const i=t["value"],o=N(t,["value"]);for(let e=0;e<i.length;e++){var a=i[e];if(Array.isArray(a))for(let t=0;t<a.length;t++){var s=r[t]||[""+n+t,new Array(c).fill(void 0)];s[1][e]=a[t],r[t]=s}}return r.map(([t,e])=>[t,Object.assign({type:"column",value:e},o)])}),r=Object.fromEntries([...r,...n]),[c,Object.assign(Object.assign({},i),{encode:r})]):[c,t]}function o6(t,e,n){const{axis:r={},legend:i={}}=e,o=(t,e)=>{return"boolean"==typeof t?t?{}:null:void 0===(t=t[e])||t?t:null};var a="object"==typeof r?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return P(e,{scale:Object.assign(Object.assign({},Object.fromEntries(a.map(t=>[t,{guide:o(r,t)}]))),{color:{guide:o(i,"color")},size:{guide:o(i,"size")}})}),[t,e]}function a6(d,p,y,g,v,m){return go(this,void 0,void 0,function*(){var[t,e]=yield function(s,c,l){return go(this,void 0,void 0,function*(){var t=l["library"],[t]=lP("transform",t),{preInference:e=[],postInference:n=[]}=c,{transform:r=[]}=s,e=[JN,QN,t6,e6,n6,r6,i6,o6,...e.map(t),...r.map(t),...n.map(t)];let i=[],o=s;for(const a of e)[i,o]=yield a(i,o,l);return[i,o]})}(d,p,{library:m}),{data:n,encode:r,scale:i={}}=e;if(!1===Array.isArray(n))return null;n=p.channels;const o=Pv(Object.entries(r).filter(([,t])=>I2(t)),([t])=>{return null==(t=/([^\d]+)\d*$/.exec(t))?void 0:t[1]}),a=n.filter(t=>{var{name:t,required:e}=t;if(o.has(t))return!0;if(e)throw new Error(`Missing encoding for channel: ${t}.`);return!1}).flatMap(a=>{var t=a["name"];return o.get(t).map(t=>{var{independent:e=!1,name:n,scaleName:r}=i=a,i=N(i,["independent","name","scaleName"]),[t,o]=t;return Object.assign(Object.assign(Object.assign({},i),o),{name:t,scaleName:null!=r?r:e?t:n})})});var s={},{coordinate:c=[]}=v,r=Pv(a,t=>t.scaleName);for(const[f,a]of r.entries()){var l=p["shapes"],u=function(t){var e={};for(const i of t){var{value:n=[]}=e,{value:r=[]}=i;Object.assign(e,i),e.value=[...n,...r]}return e.field=V2(t.flatMap(t=>t.field).filter(I2)),e}(a),{[f]:h={}}=i;s[f]=FN(u,h,c,l,g,y,m)}return[Object.assign(Object.assign({},e),{scale:s}),Object.assign(Object.assign({},p),{channels:a,index:t})]})}function s6(t,n,e){var r,{component:i=[],coordinate:o=[],title:a,theme:s}=n,[,c]=lP("component",e),e=t.filter(({guide:t,name:e})=>null!==t&&(!function(t){var{marks:t=[]}=t;return t.some(t=>"object"==typeof t.adjust)}(n)||!XN(e))),l=[...i];a&&(t=c("title")["props"],{defaultPosition:i,defaultOrder:t,defaultSize:r}=t,s=function(t){var{size:t,text:e,subtitle:n,style:r,subtitleStyle:i}=t;if(t)return t;r=null!=(t=null==r?void 0:r.fontSize)?t:14,t=null!=(t=null==i?void 0:i.fontSize)?t:12,i=(null==i?void 0:i.spacing)||0;return(e?r+4:0)+(n?t+i:0)}(P({size:r},s,r="string"==typeof a?{text:a}:a)),l.push(Object.assign({type:"title",position:i,order:t,size:s},r)));for(const x of e){var u=function(t,e){var{name:t,guide:n,type:r}=t,n=n["type"];if(void 0!==n)return n;if("color"===t)switch(r){case"ordinal":return"legendCategory";case"linear":return"legendContinuous";default:return null}return RN(e)&&IN(e)||jN(e)||DN(e)?null:t.startsWith("x")?RN(e)?"axisY":"axisX":t.startsWith("y")?RN(e)?"axisX":"axisY":t.startsWith("position")&&!IN(e)?"axisY":null}(x,o);if(null!==u){var h=c(u)["props"],{defaultPosition:f,defaultSize:d,defaultOrder:p}=h,{guide:h,name:y,field:g}=x;for(const w of Array.isArray(h)?h:[h]){var v=function(t,e,n,r,i){n=["left","right","top","bottom","centerHorizontal","center"].includes(r.position)?r.position:n;{if("axisY"===e&&function(t){return void 0!==t.find(t=>"parallel"===t.type)}(i))return null===(t=/position(\d*)/g.exec(t))?n:(t=+t[1],RN(i)?0==t?"top":"centerVertical":0==t?n:"centerHorizontal");if("axisX"===e&&IN(i)&&!RN(i)||"axisY"===e&&IN(i)&&RN(i)||"axisY"===e&&DN(i)||"axisY"===e&&jN(i)||"axisY"===e&&BN(i))return"bottom"===r.position?"arcInner":"arc";if(IN(i)&&("axisX"===e||"axisY"===e))return"arcY";if(BN(i)&&"axisX"===e)return"arcY";if("axisX"===e&&function(t){return void 0!==t.find(t=>"reflect"===t.type)}(i)||"axisX"===e&&function(t){return void 0!==t.find(t=>"reflectY"===t.type)}(i))return"top";if("string"==typeof e&&e.startsWith("legend")&&IN(i)&&"center"===r.position)return"arcCenter"}return n}(y,u,f,w,o),{size:m=d,order:b=p}=w;l.push(Object.assign(Object.assign({title:g},w),{position:v,order:b,size:m,type:u,scale:x}))}}}return l}function c6(t,e,n,r){var[i]=lP("scale",r),[r]=lP("component",r),{scale:o,bbox:a}=t,t=N(t,["scale","bbox"]),i=o?i(o):null,{field:o,domain:s}=o||{},o={field:o,domain:s,bbox:a};return r(t)(i,o,e,n)}function l6(t,e){var t=function(t,e){var n=Pv(t,t=>t.position),{padding:t,paddingLeft:e=t,paddingRight:r=t,paddingBottom:i=t,paddingTop:t=t}=e,o={paddingBottom:i,paddingLeft:e,paddingTop:t,paddingRight:r};for(const c of["left","right","top","bottom"]){var a="padding"+function(t){return t.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}(c);if(void 0===o[a])if(n.has(c)){const t=n.get(c);var s=t.reduce((t,{size:e})=>t+e,0);o[a]=s}else o[a]=30}return o}(t,e),{paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:o}=t,{width:e,height:a,x:s=0,y:c=0,inset:l=0,insetLeft:u=l,insetTop:h=l,insetBottom:f=l,insetRight:l=l}=e;return Object.assign(Object.assign({},t),{width:e,height:a,insetLeft:u,insetTop:h,insetBottom:f,insetRight:l,innerWidth:e-n-r,innerHeight:a-i-o,x:s,y:c})}function u6(t,e,n){var R=Pv(t,t=>t.position),{paddingLeft:t,paddingRight:n,paddingTop:r,paddingBottom:i,innerHeight:o,innerWidth:a,height:D,width:B}=n,F={top:[t,0,a,r,0,!0,_v],right:[B-n,r,n,o,1,!1,_v],bottom:[t,D-i,a,i,0,!1,_v],left:[0,r,t,o,1,!0,_v],centerHorizontal:[t,r,a,o,-1,null,null],centerVertical:[t,r,a,o,-1,null,null],arc:[t,r,a,o,-1,null,null],arcY:[t,r,a,o,-1,null,null],arcInner:[t,r,a,o,-1,null,null],center:[t,r,a,o,-1,null,null],arcCenter:[t,r,a,o,-1,null,null]};for(const[j,t]of R.entries()){var s=F[j];if("centerHorizontal"===j)!function(e,t,n){const[r,i,,o]=n,a=new Array(e.length+1).fill(0),s=t.map(a),c=s.filter((t,e)=>e%2==0).map(t=>t+r);for(let t=0;t<e.length;t++){var l=e[t];const r=c[t];var u=c[t+1]-r;l.bbox={x:r,y:i,width:u,height:o}}}(t,e,s);else if("centerVertical"===j)!function(e,t,n){const[r,i,o]=n,a=new Array(e.length+1).fill(0),s=t.map(a),c=s.filter((t,e)=>e%2==1).map(t=>t+i);for(let t=0;t<e.length;t++){var l=e[t];const i=c[t];var u=c[t+1]-i;l.bbox={x:r,y:i,width:o,height:u}}}(t,e,s);else if("arc"===j){d=f=h=u=l=c=void 0;var c=t,l=s,[u,h,f,d]=l;for(let t=0;t<c.length;t++)c[t].bbox={x:u,y:h,width:f,height:d}}else if("arcY"===j){k=w=v=x=l=b=m=v=g=y=v=l=p=void 0;var p=t,l=e,[y,g,,v]=v=s,[m,b]=l.getCenter(),[l,x]=h6(l),w=b-x*(v=v/2),k=(x-l)*v;for(let t=0;t<p.length;t++)p[t].bbox={x:m+y,y:w+g,width:0,height:k}}else if("arcInner"===j){A=O=T=x=b=S=v=x=M=_=x=b=E=void 0;var E=t,b=e,[_,M,,x]=x=s,[v,S]=b.getCenter(),[b]=h6(b),T=b*(x=x/2),O=v-T,A=S-T;for(let t=0;t<E.length;t++)E[t].bbox={x:_+O,y:M+A,width:2*T,height:2*T}}else if("arcCenter"===j){W=G=I=S=L=z=C=N=N=S=P=void 0;var P=t,S=e,[N,C,z,L]=N=s,[S]=h6(S),I=L/2*S/Math.sqrt(2),G=N+z/2,W=C+L/2;for(let t=0;t<P.length;t++)P[t].bbox={x:G-I,y:W-I,width:2*I,height:2*I}}else!function(n,t){const[e,r,i,o,a,s,c]=t,[l,u,h,f,d,p,y,g]=0===a?["y",r,"x",e,"height",o,"width",i]:["x",e,"y",r,"width",i,"height",o],v=(n.sort((t,e)=>c(t.order,e.order)),s?u+p:u);for(let t=0,e=v;t<n.length;t++){var m=n[t],b=m["size"];m.bbox={[l]:s?e-b:e,[h]:f,[d]:b,[y]:g},e+=b*(s?-1:1)}}(t,s)}}function h6(t){var t=t.getOptions()["transformations"],[,,,t,e]=t.find(t=>"polar"===t[0]);return[t,e]}const f6="main-layer",d6="label-layer",p6="element",y6="view",g6="plot",v6="component",m6="label";function b6(O,A,P){return go(this,void 0,void 0,function*(){const[n]=lP("composition",P);var[t]=lP("interaction",P);const e=new Set(Object.keys(P).map(t=>{return null==(t=/mark\.(.*)/.exec(t))?void 0:t[1]}).filter(I2)),r=t=>{t=t.type;return"string"==typeof t&&e.has(t)?"mark":t};const i=t=>"standardView"===r(t);var o=t=>{var e;return i(t)?[t]:(e=r(t),n({type:e})(t))},a=[];const s=new Map;for(var c=new Map,l=[O],u=[];l.length;){var h=l.shift();if(i(h)){var f=c.get(h),[f,d]=f?E6(f,h,P):yield w6(h,P),p=(s.set(f,h),a.push(f),d.flatMap(o));if(l.push(...p),p.every(i)){var y=yield Promise.all(p.map(t=>k6(t,P)));zN(f=(f=y).flatMap(t=>Array.from(t.keys())).map(t=>t.scale),"x"),zN(f,"y");for(let t=0;t<p.length;t++){var g=p[t],v=y[t];c.set(g,v)}}}else{d="mark"===r(h)?h:yield function(r,i){return go(this,void 0,void 0,function*(){var t={library:i},e=r["data"],n=N(r,["data"]);return null==e?r:([,{data:e}]=yield QN(0,{data:e},t),Object.assign({data:e},n))})}(h,P),f=o(d);Array.isArray(f)?l.push(...f):"function"==typeof f&&u.push(f())}}const m=new Map,b=[];A.selectAll("."+y6).data(a,t=>t.key).join(t=>t.append("g").attr("className",y6).attr("id",t=>t.key).call(x6).each(function(t){_6(t,C(this),b,P),m.set(t,this)}),t=>t.call(x6).each(function(t){_6(t,C(this),b,P)}),t=>t.remove()),A.selectAll(".view").each(function(t){var e,n,r=t,i=C(this),o=(b,P),[a]=lP("labelTransform",o),{markState:t,labelTransform:s}=r,c=i.select("."+d6).node();for([e,n]of t.entries()){var{labels:l=[],key:u}=e;const d=function(t,e,n,r){const[s]=lP("shape",r),c=t["data"],{data:i,defaultLabelShape:l}=e,u=i.map(t=>t.points),{theme:h,coordinate:f}=n;return t=>{const{index:i,points:e}=t,o=c[i];var{formatter:n=t=>""+t}=t,t=W2(N(t,["formatter"]),t=>{return e=o,t=t,n=i,r=c,"function"==typeof t?t(e,n,r):"string"==typeof t&&void 0!==e[t]?e[t]:t;var e,n,r}),{shape:r=l,text:a}=t,t=N(t,["shape","text"]),n="string"==typeof n?eS(n):n,n=Object.assign(Object.assign({},t),{text:n(a)});return s(Object.assign({type:"label."+r},t))(e,n,f,h,u)}}(e,n,r,o);var h=i.select("#"+u);for(let u=0;u<l.length;u++){const p=l[u],{transform:y=[]}=p,g=N(p,["transform"]);var f=h.selectAll(".element").nodes().flatMap(t=>{{var n=g,r=u,t,e;const{seriesIndex:i,seriesKey:o,points:a,key:s,index:c}=t.__data__,l=function(t){const e=t.cloneNode(),n=t.getAnimations(),r=(e.style.visibility="hidden",n.forEach(t=>{t=t.effect.getKeyframes();e.attr(t[t.length-1])}),t.parentNode.appendChild(e),e.getLocalBounds()),{min:i,max:o}=(e.destroy(),r);return[i,o]}(t);return i?(t=function(t){t=t.selector;if(!t)return null;if("function"==typeof t)return t;if("first"===t)return t=>[t[0]];if("last"===t)return t=>[t[t.length-1]];throw new Error("Unknown selector: "+t)}(n),e=i.map((t,e)=>Object.assign(Object.assign({},n),{key:o[e]+"-"+r,bounds:[a[e]],index:t,points:a})),t?t(e):e):[Object.assign(Object.assign({},n),{key:s,bounds:l,index:c,points:a})]}}),f=C(c).selectAll("."+m6).data(f,t=>t.key).join(t=>t.append(d).attr("class",m6),t=>t.each(function(t){L2(this,d(t))}),t=>t.remove()).nodes();(function(t){return t.reduce((e,n)=>t=>n(e(t)),P2)})(y.map(a))(f)}}s&&s(i.selectAll(".label").nodes())});var x=Array.from(m.entries()).map(([t,e])=>({view:t,container:e,options:s.get(t),update:function(i,o){return r=>go(this,void 0,void 0,function*(){var[t,e]=yield w6(r,o);_6(t,i,[],o);for(const n of e)b6(n,i,o)})}(C(e),P)}));for(const M of x){const O=M["options"];var w=O["interaction"];for(const S of function(t=[]){const n=[...t];return["tooltip","ellipsisText"].forEach(e=>{t.find(t=>t.type===e)||n.push({type:e})}),n}(w))t(S)(M,x)}const{width:k,height:E}=O;for(const T of u){var _=new Promise(e=>go(this,void 0,void 0,function*(){for(const t of T)yield b6(Object.assign({width:k,height:E},t),A,P);e()}));b.push(_)}return Promise.all(b)})}function x6(t){t.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function w6(t,e){return go(this,void 0,void 0,function*(){return E6(yield k6(t,e),t,e)})}function k6(u,h){return go(this,void 0,void 0,function*(){var[t]=lP("theme",h),[,e]=lP("mark",h),{theme:n,marks:r}=u,i=t(T6(n)),o=new Map,a=new Map;for(const l of r){var s,{type:c=C2("G2Mark type is required.")}=l,c=e(c)["props"],c=yield a6(l,c,a,i,u,h);c&&([c,s]=c,o.set(c,s))}return o})}function E6(t,e,n){var[r]=lP("mark",n);const[i]=lP("scale",n);var o,a,[s]=lP("adjust",n),[c]=lP("theme",n),{key:l,frame:u,theme:h}=e,c=c(T6(h)),h=Array.from(t.keys()),h=new Set(h.flatMap(t=>Object.values(t.scale))),h=s6(Array.from(h),e,n),f=l6(h,e),d=function(t,e,n){var[n]=lP("coordinate",n),{innerHeight:r,innerWidth:i,insetLeft:o,insetTop:a,insetRight:s,insetBottom:c}=t,{coordinate:e=[]}=e,e=(e=e).find(t=>"cartesian"===t.type)?e:[...e,{type:"cartesian"}];return new CN(Object.assign(Object.assign({},t),{x:o,y:a,width:i-o-s,height:r-c-a,transformations:e.map(n).flat()}))}(f,e,n),p=(u6(h,d,f),{}),y=[];for([o,a]of t.entries()){var{scale:g,children:v,dataDomain:m,adjust:b}=o,{index:x,channels:w}=a,g=W2(g,t=>{var e=t["relations"],[e]=function(a){if(!a||!Array.isArray(a))return[P2,P2];let s,c;return[t=>{s=t.map.bind(t),c=null==(e=t.invert)?void 0:e.bind(t);const r=a.filter(([t])=>"function"==typeof t);var e=a.filter(([t])=>"function"!=typeof t);const i=new Map(e);if(t.map=t=>{for(var[e,n]of r)if(e(t))return n;return i.has(t)?i.get(t):s(t)},c){const n=new Map(e.map(([t,e])=>[e,t])),o=new Map(r.map(([t,e])=>[e,t]));t.invert=t=>o.has(t)?t:n.has(t)?n.get(t):c(t)}return t},t=>(null!==s&&(t.map=s),null!==c&&(t.invert=c),t)]}(e);return e(i(t))});Object.assign(p,g);const k=function(t,e){var n,r,i,o={};for({scaleName:n,value:r,name:i}of t){const a=e[n];o[i]=r.map(t=>a.map(t))}return o}(w,g),[E,_,M]=function([e,n,t]){if(t)return[e,n,t];var r=[],i=[];for(let t=0;t<e.length;t++){var o=e[t],a=n[t];a.every(([t,e])=>I2(t)&&I2(e))&&(r.push(o),i.push(a))}return[r,i]}(r(o)(x,g,k,d));w=m||E.length;const S=b?s(b)(_,w,f):[];x=E.map((t,e)=>{var n={points:_[e],transform:S[e],index:t};for(const[r,i]of Object.entries(k))n[r]=i[t],M&&(n["series"+jg(r)]=M[e].map(t=>i[t]));return M&&(n.seriesIndex=M[e]),n}),m=(a.data=x,a.index=E,null==v?void 0:v(x,g,f));y.push(...m||[])}return[{layout:f,theme:c,coordinate:d,components:h,markState:t,key:l,frame:u,scale:p},y]}function _6(v,m,b,x){go(this,void 0,void 0,function*(){const{components:t,theme:n,layout:e,markState:r,coordinate:i,key:o,frame:a=!1}=v;m.selectAll("."+v6).data(t,(t,e)=>t.type+"-"+e).join(t=>t.append("g").style("zIndex",({zIndex:t})=>t||-1).attr("className",v6).append(t=>c6(t,i,n,x)),t=>t.each(function(t){var t=c6(t,i,n,x)["attributes"],[e]=this.childNodes;e.update(Object.assign({},t))})),m.selectAll("."+g6).data([e],()=>o).join(t=>t.append("rect").attr("className",g6).style("fill","transparent").call(P6,a).call(O6).call(N6,Array.from(r.keys())),t=>t.call(O6).call(N6,Array.from(r.keys())));for(var[s,c]of r.entries()){var l=c["data"];const{key:o,class:f}=s,d=function(i,t,e,n){const[o]=lP("shape",n),{defaultShape:a,data:r}=t,s=r.map(t=>t.points),{theme:c,coordinate:l}=e,{type:u,style:h}=i;return(t,e)=>{var{shape:n=a,points:r}=t,t=N(t,["shape","points"]),t=Object.assign(Object.assign({},t),{shape:n,mark:u,defaultShape:a,index:e});return o(Object.assign(Object.assign({},h),{type:A6(i,n)}))(r,t,l,c,s)}}(s,c,v,x),p=(u=s,h=c,M6("enter",u,h,v,x)),y=(u=s,h=c,M6("update",u,h,v,x)),g=(u=s,h=c,M6("exit",u,h,v,x));s=function(t,e,n){t=t.node().parentElement;return t.findAll(t=>t.style.facet===e).flatMap(t=>t.getElementsByClassName(n))}(m,f,"element"),c=m.select("#"+o).selectAll("."+p6).selectFacetAll(s).data(l,t=>t.key,t=>t.groupKey).join(t=>t.append(d).attr("className",p6).transition(function(t){return p(t,[this])}),e=>e.call(t=>{const c=t.parent(),l=function(n){const r=new Map;return t=>{var e;return r.has(t)?r.get(t):(e=n(t),r.set(t,e),e)}}(t=>{var[t,e]=t.getBounds().min;return[t,e]});e.transition(function(t,e){n=this,r=c,i=l,n.__facet__&&(o=n.parentNode.parentNode,s=r.parentNode,[o,a]=i(o),[i,s]=i(s),o=`translate(${o-i}, ${a-s})`,i=n.style.transform,n.style.transform=(("none"===i?"":i)+" "+o).trimStart(),r.append(n));var n,r,i,o,a=d(t,e),s=y(t,[this],[a]);return null===s&&L2(this,a),s})}),t=>t.transition(function(t){return g(t,[this])}).remove(),t=>t.append(d).attr("className",p6).transition(function(t){var e=this["__fromElements__"],t=y(t,e,[this]);return new R2(e,null,this.parentNode).transition(t).remove(),t}),t=>t.transition(function(t){var e=new R2([],this.__toData__,this.parentNode).append(d).attr("className",p6).nodes();return y(t,[this],e)}).remove()).transitions();b.push(...c)}var u,h})}function M6(a,t,e,n,r){var[,i]=lP("shape",r);const[s]=lP("animation",r);r=e.defaultShape;const{theme:o,coordinate:c}=n;e=`default${jg(a)}Animation`;const{[e]:l}=i(A6(t,r)).props,{[a]:u={}}=t.animate||{},{[a]:h={}}=o;return(t,e,n)=>{var{[a+"Type"]:t,[a+"Delay"]:r,[a+"Duration"]:i,[a+"Easing"]:o}=t,t=Object.assign({type:t||l},u);return t.type?(t=s(t)(e,n,{delay:r,duration:i,easing:o},c,h),Array.isArray(t)?Promise.all(t.map(S6)):S6(t)):null}}function S6(t){return t.finished.then(()=>{t.cancel()})}function T6(t={type:"light"}){var{type:e="light"}=t;return Object.assign(Object.assign({},t),{type:e})}function O6(t){t.style("x",t=>t.paddingLeft).style("y",t=>t.paddingTop).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function A6(t,e){t=t.type;return t+"."+e}function P6(t,e){e&&t.style("lineWidth",1).style("stroke","black")}function N6(t,e){const n=t=>void 0!==t.class?""+t.class:"";t.selectAll("."+f6).data(e,t=>t.key).join(t=>t.append("g").attr("className",f6).attr("id",t=>t.key).style("facet",n).style("fill","transparent"),t=>t.style("facet",n),t=>t.remove()),t.select("."+d6).node()||t.append("g").attr("className",d6)}function C6(t,e={},n){const{width:r=640,height:i=480}=t,o=function(t){for(var t=P({},t),e=new Map([[t,null]]),n=new Map([[null,-1]]),r=[t];r.length;){var i,o,a=r.shift(),{children:s=[]}=(void 0===a.key&&(o=e.get(a),i=n.get(a),o=null===o?"0":o.key+"-"+i,a.key=o),a);if(Array.isArray(s))for(let t=0;t<s.length;t++){var c=s[t];e.set(c,a),n.set(c,t),r.push(c)}}return t}(t),{canvas:a=(t=r,c=i,l=new Ky,l.registerPlugin(new sg),new If({width:t,height:c,container:document.createElement("div"),renderer:l})),library:s=cP()}=e;var c,l;e.canvas=a,e.library=s;const u=C(a.document.documentElement);return a.ready.then(()=>b6(Object.assign(Object.assign({},o),{width:r,height:i}),u,s)).then(n),"string"==typeof(t=a.getConfig().container)?document.getElementById(t):t}class L6{constructor(t={},e){this.parentNode=null,this.children=[],this.index=0,this.type=e,this.value=t}map(t=t=>t){t=t(this.value);return this.value=t,this}attr(e,n){return 1===arguments.length?this.value[e]:this.map(t=>(t[e]=n,t))}append(t){t=new t({});return t.children=[],t.parentNode=this,t.index=this.children.length,this.children.push(t),t}call(t,...e){return t(this.map(),...e),this}}function I6(t,{name:e,key:n=e}){t.prototype[e]=function(t){return 0===arguments.length?this.attr(n):this.attr(n,t)}}function j6(t,{name:e,key:n=e}){t.prototype[e]=function(t){return 0===arguments.length?this.attr(n):Array.isArray(t)?this.attr(n,t):(t=[...this.attr(n)||[],t],this.attr(n,t))}}function R6(t,{name:e,key:r=e}){t.prototype[e]=function(t,e){var n;return 0===arguments.length?this.attr(r):1===arguments.length?this.attr(r,t):((n=this.attr(r)||{})[t]=e,this.attr(r,n))}}function D6(r){return t=>{for(const n of r){var e=n["type"];"value"===e?I6(t,n):"array"===e?j6(t,n):"object"===e?R6(t,n):"node"===e?function(t,{name:e,ctor:n}){t.prototype[e]=function(){return this.append(n)}}(t,n):"container"===e&&function(t,{name:e,ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}(t,n)}return t}}function B6(t){return Object.entries(t).map(([t,e])=>({type:"node",name:t,ctor:e}))}s=[{name:"encode",type:"object"},{name:"scale",type:"object"},{name:"data",type:"value"},{name:"key",type:"value"},{name:"class",type:"value"},{name:"transform",type:"array"},{name:"style",type:"object"},{name:"animate",type:"object"},{name:"frame",type:"value"},{name:"facet",type:"value"},{name:"adjust",type:"value"},{name:"coordinate",type:"array"},{name:"interaction",type:"array"},{name:"paddingLeft",type:"value"},{name:"paddingRight",type:"value"},{name:"paddingBottom",type:"value"},{name:"paddingTop",type:"value"},{name:"label",type:"array",key:"labels"},{name:"axis",type:"object"},{name:"legend",type:"object"}];let F6=class extends L6{constructor(){super({},"interval")}},z6=(F6=g([D6(s)],F6),class extends L6{constructor(){super({},"rect")}}),G6=(z6=g([D6(s)],z6),class extends L6{constructor(){super({},"point")}}),W6=(G6=g([D6(s)],G6),class extends L6{constructor(){super({},"area")}}),H6=(W6=g([D6(s)],W6),class extends L6{constructor(){super({},"line")}}),V6=(H6=g([D6(s)],H6),class extends L6{constructor(){super({},"cell")}}),Y6=(V6=g([D6(s)],V6),class extends L6{constructor(){super({},"vector")}}),U6=(Y6=g([D6(s)],Y6),class extends L6{constructor(){super({},"link")}}),q6=(U6=g([D6(s)],U6),class extends L6{constructor(){super({},"polygon")}});q6=g([D6(s)],q6);h=g([D6(s)],class extends L6{constructor(){super({},"image")}});let X6=class extends L6{constructor(){super({},"text")}},$6=(X6=g([D6(s)],X6),class extends L6{constructor(){super({},"box")}}),Z6=($6=g([D6(s)],$6),class extends L6{constructor(){super({},"lineX")}}),K6=(Z6=g([D6(s)],Z6),class extends L6{constructor(){super({},"lineY")}}),J6=(K6=g([D6(s)],K6),class extends L6{constructor(){super({},"range")}}),Q6=(J6=g([D6(s)],J6),class extends L6{constructor(){super({},"rangeX")}}),tC=(Q6=g([D6(s)],Q6),class extends L6{constructor(){super({},"rangeY")}}),eC=(tC=g([D6(s)],tC),class extends L6{constructor(){super({},"connector")}});eC=g([D6(s)],eC);o={interval:F6,rect:z6,point:G6,area:W6,line:H6,cell:V6,vector:Y6,link:U6,polygon:q6,image:h,text:X6,box:$6,lineX:Z6,lineY:K6,range:J6,rangeX:Q6,rangeY:tC,connector:eC};let nC=class extends L6{constructor(){super({},"view")}},rC=(nC=g([D6([{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"coordinate"},{type:"array",name:"interaction"},{type:"object",name:"theme"},...B6(o)])],nC),class extends L6{constructor(){super({},"layer")}}),iC=(rC=g([D6([{type:"value",name:"data"},{type:"value",name:"key"},...B6(o)])],rC),class extends L6{constructor(){super({},"flex")}}),oC=(iC=g([D6([{type:"value",name:"data"},{type:"value",name:"key"},{type:"value",name:"padding"},{type:"value",name:"ratio"},{type:"value",name:"direction"},...B6(o)])],iC),class extends L6{constructor(){super({},"square")}}),aC=(oC=g([D6([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},{type:"value",name:"shareData"},{type:"value",name:"shareSize"},...B6(o)])],oC),class extends L6{constructor(){super({},"circle")}}),sC=(aC=g([D6([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},...B6(o)])],aC),class extends L6{constructor(){super({},"matrix")}}),cC=(sC=g([D6([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},...B6(o)])],sC),class extends L6{constructor(){super({},"keyframe")}});cC=g([D6([{type:"value",name:"key"},{type:"value",name:"direction"},{type:"value",name:"easing"},{type:"value",name:"iterationCount"},{type:"value",name:"duration"},...B6(o)])],cC);var lC={view:nC,layer:rC,flex:iC,square:oC,circle:aC,matrix:sC,keyframe:cC};for(const dC of Object.values(lC))D6(B6(lC))(dC);const uC=cP();function hC(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function fC(t){var e,t=null!==(t=t).type?t:((e=t.children[t.children.length-1]).attr("width",t.attr("width")),e.attr("height",t.attr("height")),e.attr("paddingLeft",t.attr("paddingLeft")),e.attr("paddingTop",t.attr("paddingTop")),e.attr("paddingBottom",t.attr("paddingBottom")),e.attr("paddingRight",t.attr("paddingRight")),e),n=[t],r=new Map;for(r.set(t,hC(t));n.length;){const t=n.pop();var i=r.get(t);for(const s of t.children){var o=hC(s),{children:a=[]}=i;a.push(o),n.push(s),r.set(s,o),i.children=a}}return r.get(t)}t=[{name:"data",type:"value"},{name:"coordinate",type:"array"},{name:"interaction",type:"array"},{name:"theme",type:"object"},{name:"title",type:"object"},{name:"key",type:"value"},{name:"transform",type:"array"},{name:"theme",type:"object"},...B6(o),...Object.entries(lC).map(([t,e])=>({type:"container",name:t,ctor:e}))];I.Chart=class extends L6{constructor(t={}){var e=t["container"];super(N(t,["container"]),"view"),this._container=void 0===(t=e)?document.createElement("div"):"string"==typeof t?document.getElementById(t):t,this._context={library:uC}}render(){var e,t=fC(this),{width:n=640,height:r=480,renderer:i,plugins:o}=t,{canvas:o=([n,r,i,e=new Ky,o=[]]=[document.createElement("div"),n,r,i,o],o.push(new sg),o.forEach(t=>e.registerPlugin(t)),new If({container:n,width:r,height:i,renderer:e}))}=this._context,n=(this._context.canvas=o,C6(t,this._context));return n.parentNode!==this._container&&this._container.append(n),this}options(){return fC(this)}node(){return this._container}context(){return this._context}},I.Chart=g([D6(t)],I.Chart),I.createLibrary=cP,I.register=function(t,e){Object.assign(uC,{[t]:e})},I.render=C6,Object.defineProperty(I,"__esModule",{value:!0})});
