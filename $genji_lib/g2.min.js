!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).G2={})}(this,function(w){"use strict";var R=function(t,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function I(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function t(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function j(n,r){return function(t,e){r(t,e,n)}}function e(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function F(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})}function D(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},z={},r={},o=(o=r,Object.defineProperty(o,"__esModule",{value:!0}),o.NON_CUSTOM_TAG_KEYS=o.POST_CONSTRUCT=o.DESIGN_PARAM_TYPES=o.PARAM_TYPES=o.TAGGED_PROP=o.TAGGED=o.MULTI_INJECT_TAG=o.INJECT_TAG=o.OPTIONAL_TAG=o.UNMANAGED_TAG=o.NAME_TAG=o.NAMED_TAG=void 0,o.NAMED_TAG="named",o.NAME_TAG="name",o.UNMANAGED_TAG="unmanaged",o.OPTIONAL_TAG="optional",o.INJECT_TAG="inject",o.MULTI_INJECT_TAG="multi_inject",o.TAGGED="inversify:tagged",o.TAGGED_PROP="inversify:tagged_props",o.PARAM_TYPES="inversify:paramtypes",o.DESIGN_PARAM_TYPES="design:paramtypes",o.POST_CONSTRUCT="post_construct",o.NON_CUSTOM_TAG_KEYS=[o.INJECT_TAG,o.MULTI_INJECT_TAG,o.NAME_TAG,o.UNMANAGED_TAG,o.NAMED_TAG,o.OPTIONAL_TAG],{}),V={},G={},H=(Object.defineProperty(G,"__esModule",{value:!0}),G.TargetTypeEnum=G.BindingTypeEnum=G.BindingScopeEnum=void 0,G.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},G.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},G.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},{}),W=(Object.defineProperty(H,"__esModule",{value:!0}),H.id=void 0,0);H.id=function(){return W++},Object.defineProperty(V,"__esModule",{value:!0}),V.Binding=void 0;var U=G,Y=H;function q(t,e){this.id=Y.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=U.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}q.prototype.clone=function(){var t=new q(this.serviceIdentifier,this.scope);return t.activated=t.scope===U.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},V.Binding=q;var a={},X=(Object.defineProperty(a,"__esModule",{value:!0}),a.STACK_OVERFLOW=a.CIRCULAR_DEPENDENCY_IN_FACTORY=a.POST_CONSTRUCT_ERROR=a.MULTIPLE_POST_CONSTRUCT_METHODS=a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=a.ARGUMENTS_LENGTH_MISMATCH=a.INVALID_DECORATOR_OPERATION=a.INVALID_TO_SELF_VALUE=a.INVALID_FUNCTION_BINDING=a.INVALID_MIDDLEWARE_RETURN=a.NO_MORE_SNAPSHOTS_AVAILABLE=a.INVALID_BINDING_TYPE=a.NOT_IMPLEMENTED=a.CIRCULAR_DEPENDENCY=a.UNDEFINED_INJECT_ANNOTATION=a.MISSING_INJECT_ANNOTATION=a.MISSING_INJECTABLE_ANNOTATION=a.NOT_REGISTERED=a.CANNOT_UNBIND=a.AMBIGUOUS_MATCH=a.KEY_NOT_FOUND=a.NULL_ARGUMENT=a.DUPLICATED_METADATA=a.DUPLICATED_INJECTABLE_DECORATOR=void 0,a.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",a.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",a.NULL_ARGUMENT="NULL argument",a.KEY_NOT_FOUND="Key Not Found",a.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",a.CANNOT_UNBIND="Could not unbind serviceIdentifier:",a.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",a.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",a.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",a.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},a.CIRCULAR_DEPENDENCY="Circular dependency found:",a.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",a.INVALID_BINDING_TYPE="Invalid binding type:",a.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",a.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",a.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",a.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",a.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",a.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",a.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",a.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},a.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},a.STACK_OVERFLOW="Maximum call stack size exceeded",{}),Z=(Object.defineProperty(X,"__esModule",{value:!0}),X.MetadataReader=void 0,r);function K(){}K.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(Z.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(Z.TAGGED,t)||{}}},K.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(Z.TAGGED_PROP,t)||[]},X.MetadataReader=K;var $={},J={},s=(Object.defineProperty(J,"__esModule",{value:!0}),J.BindingCount=void 0,J.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1},{}),Q=(Object.defineProperty(s,"__esModule",{value:!0}),s.isStackOverflowExeption=void 0,a);s.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===Q.STACK_OVERFLOW};var l={},tt=(Object.defineProperty(l,"__esModule",{value:!0}),l.circularDependencyToException=l.listMetadataForTarget=l.listRegisteredBindingsForServiceIdentifier=l.getServiceIdentifierAsString=l.getFunctionName=void 0,a);function et(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function nt(t){return function t(e,n){void 0===n&&(n=[]);var r=et(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}function rt(t){var e;return t.name||((e=(t=t.toString()).match(/^function\s*([^\s(]+)/))?e[1]:"Anonymous function: "+t)}l.getServiceIdentifierAsString=et,l.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="";return 0!==(n=n(t,e)).length&&(r="\nRegistered bindings:",n.forEach(function(t){var e="Object";null!==t.implementationType&&(e=rt(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r},l.circularDependencyToException=function n(t){t.childRequests.forEach(function(t){var e;if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(t,t.serviceIdentifier))throw e=nt(t),new Error(tt.CIRCULAR_DEPENDENCY+" "+e);n(t)})},l.listMetadataForTarget=function(t,e){var n,r;return e.isTagged()||e.isNamed()?(n="",r=e.getNamedTag(),e=e.getCustomTags(),null!==r&&(n+=r.toString()+"\n"),null!==e&&e.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n):" "+t},l.getFunctionName=rt;var it={},ot=(Object.defineProperty(it,"__esModule",{value:!0}),it.Context=void 0,H);function at(t){this.id=ot.id(),this.container=t}at.prototype.addPlan=function(t){this.plan=t},at.prototype.setCurrentRequest=function(t){this.currentRequest=t},it.Context=at;var st={},lt=(Object.defineProperty(st,"__esModule",{value:!0}),st.Metadata=void 0,r);function ut(t,e){this.key=t,this.value=e}ut.prototype.toString=function(){return this.key===lt.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},st.Metadata=ut;function ct(t,e){this.parentContext=t,this.rootRequest=e}var u={},ht=(Object.defineProperty(u,"__esModule",{value:!0}),u.Plan=void 0,u.Plan=ct,{}),dt={},pt={},ft=(Object.defineProperty(pt,"__esModule",{value:!0}),pt.tagProperty=pt.tagParameter=pt.decorate=void 0,a),yt=r;function gt(t,e,n,r,i){var o={},a="number"==typeof i,i=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(ft.INVALID_DECORATOR_OPERATION);a=(o=Reflect.hasOwnMetadata(t,e)?Reflect.getMetadata(t,e):o)[i];if(Array.isArray(a))for(var s=0,l=a;s<l.length;s++){var u=l[s];if(u.key===r.key)throw new Error(ft.DUPLICATED_METADATA+" "+u.key.toString())}else a=[];a.push(r),o[i]=a,Reflect.defineMetadata(t,o,e)}function vt(t,e){Reflect.decorate(t,e)}pt.tagParameter=function(t,e,n,r){gt(yt.TAGGED,t,e,r,n)},pt.tagProperty=function(t,e,n){gt(yt.TAGGED_PROP,t.constructor,e,n)},pt.decorate=function(t,e,n){var r,i;"number"==typeof n?vt([(r=n,i=t,function(t,e){i(t,e,r)})],e):"string"==typeof n?Reflect.decorate([t],e,n):vt([t],e)},Object.defineProperty(dt,"__esModule",{value:!0}),dt.inject=dt.LazyServiceIdentifer=void 0;var mt=a,bt=r,xt=st,wt=pt;function kt(t){this._cb=t}kt.prototype.unwrap=function(){return this._cb()},dt.LazyServiceIdentifer=kt,dt.inject=function(i){return function(t,e,n){if(void 0===i)throw new Error(mt.UNDEFINED_INJECT_ANNOTATION(t.name));var r=new xt.Metadata(bt.INJECT_TAG,i);"number"==typeof n?wt.tagParameter(t,e,n,r):wt.tagProperty(t,e,r)}};var c={},_t={},h=(Object.defineProperty(_t,"__esModule",{value:!0}),_t.QueryableString=void 0,St.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},St.prototype.endsWith=function(t){var t=t.split("").reverse().join(""),e=this.str.split("").reverse().join("");return this.startsWith.call({str:e},t)},St.prototype.contains=function(t){return-1!==this.str.indexOf(t)},St.prototype.equals=function(t){return this.str===t},St.prototype.value=function(){return this.str},St);function St(t){this.str=t}_t.QueryableString=h,Object.defineProperty(c,"__esModule",{value:!0}),c.Target=void 0;var Et,Tt,Mt,Ot,Pt,Ct,At,Nt=r,Lt=H,It=st,Rt=_t;function jt(t,e,n,r){this.id=Lt.id(),this.type=t,this.serviceIdentifier=n,this.name=new Rt.QueryableString(e||""),this.metadata=new Array;t=null;"string"==typeof r?t=new It.Metadata(Nt.NAMED_TAG,r):r instanceof It.Metadata&&(t=r),null!==t&&this.metadata.push(t)}function Dt(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw a=Mt.MISSING_INJECTABLE_ANNOTATION+" "+e+".",new Error(a);var a=i.userGeneratedMetadata,i=Object.keys(a),s=0===n.length&&0<i.length,l=i.length>n.length,r=function(t,e,n,r,i){for(var o=[],a=0;a<i;a++){var s=function(t,e,n,r,i){var i=i[t.toString()]||[],o=Bt(i),a=!0!==o.unmanaged,r=r[t],s=o.inject||o.multiInject;(r=s||r)instanceof Tt.LazyServiceIdentifer&&(r=r.unwrap());if(a){var s=r===Object,a=r===Function,l=void 0===r,s=s||a||l;if(!e&&s)throw a=Mt.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".",new Error(a);l=new At.Target(Ot.TargetTypeEnum.ConstructorArgument,o.targetName,r);return l.metadata=i,l}return null}(a,t,e,n,r);null!==s&&o.push(s)}return o}(r,e,o,a,(s||l?i:n).length),e=function t(e,n){var r=e.getPropertiesMetadata(n);var i=[];var o=Object.keys(r);for(var a=0,s=o;a<s.length;a++){var l=s[a],u=r[l],c=Bt(r[l]),l=c.targetName||l,c=c.inject||c.multiInject,l=new At.Target(Ot.TargetTypeEnum.ClassProperty,l,c);l.metadata=u,i.push(l)}o=Object.getPrototypeOf(n.prototype).constructor;o!==Object&&(n=t(e,o),i=Et(Et([],i),n));return i}(t,n);return Et(Et([],r),e)}function Bt(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[Pt.INJECT_TAG],multiInject:e[Pt.MULTI_INJECT_TAG],targetName:e[Pt.NAME_TAG],unmanaged:e[Pt.UNMANAGED_TAG]}}jt.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++)if(n[e].key===t)return!0;return!1},jt.prototype.isArray=function(){return this.hasTag(Nt.MULTI_INJECT_TAG)},jt.prototype.matchesArray=function(t){return this.matchesTag(Nt.MULTI_INJECT_TAG)(t)},jt.prototype.isNamed=function(){return this.hasTag(Nt.NAMED_TAG)},jt.prototype.isTagged=function(){return this.metadata.some(function(e){return Nt.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})})},jt.prototype.isOptional=function(){return this.matchesTag(Nt.OPTIONAL_TAG)(!0)},jt.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===Nt.NAMED_TAG})[0]:null},jt.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return Nt.NON_CUSTOM_TAG_KEYS.every(function(t){return e.key!==t})}):null},jt.prototype.matchesNamedTag=function(t){return this.matchesTag(Nt.NAMED_TAG)(t)},jt.prototype.matchesTag=function(i){var o=this;return function(t){for(var e=0,n=o.metadata;e<n.length;e++){var r=n[e];if(r.key===i&&r.value===t)return!0}return!1}},c.Target=jt,h=ht,Et=n&&n.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Object.defineProperty(h,"__esModule",{value:!0}),h.getFunctionName=h.getBaseClassDependencyCount=h.getDependencies=void 0,Tt=dt,Mt=a,Ot=G,Pt=r,Ct=l,Object.defineProperty(h,"getFunctionName",{enumerable:!0,get:function(){return Ct.getFunctionName}}),At=c,h.getDependencies=function(t,e){return Dt(t,Ct.getFunctionName(e),e,!1)},h.getBaseClassDependencyCount=function t(e,n){var r,i,n=Object.getPrototypeOf(n.prototype).constructor;return n!==Object?(r=(i=Dt(e,Ct.getFunctionName(n),n,!0)).map(function(t){return t.metadata.filter(function(t){return t.key===Pt.UNMANAGED_TAG})}),r=[].concat.apply([],r).length,0<(i=i.length-r)?i:t(e,n)):0};var _t={},Ft=(Object.defineProperty(_t,"__esModule",{value:!0}),_t.Request=void 0,H);function zt(t,e,n,r,i){this.id=Ft.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}zt.prototype.addChildRequest=function(t,e,n){t=new zt(t,this.parentContext,this,e,n);return this.childRequests.push(t),t},_t.Request=zt,Object.defineProperty($,"__esModule",{value:!0}),$.getBindingDictionary=$.createMockRequest=$.plan=void 0;var Vt=J,Gt=a,Ht=G,Wt=r,Ut=s,Yt=l,qt=it,Xt=st,Zt=u,Kt=ht,$t=_t,Jt=c;function Qt(t){return t._bindingDictionary}function te(t,e,n,r,i){var o=ee(n.container,i.serviceIdentifier),a=[];return o.length===Vt.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=ee(n.container,i.serviceIdentifier)),a=e?o:o.filter(function(t){var e=new $t.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)}),function(t,e,n,r){switch(e.length){case Vt.BindingCount.NoBindingsAvailable:if(n.isOptional())return;throw i=Yt.getServiceIdentifierAsString(t),o=Gt.NOT_REGISTERED,o=(o+=Yt.listMetadataForTarget(i,n))+Yt.listRegisteredBindingsForServiceIdentifier(r,i,ee),new Error(o);case Vt.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return;case Vt.BindingCount.MultipleBindingsAvailable:default:var i,o;if(n.isArray())return;throw i=Yt.getServiceIdentifierAsString(t),o=Gt.AMBIGUOUS_MATCH+" "+i,o+=Yt.listRegisteredBindingsForServiceIdentifier(r,i,ee),new Error(o)}}(i.serviceIdentifier,a,i,n.container),a}function ee(t,e){var n=[],r=Qt(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=ee(t.parent,e)),n}$.getBindingDictionary=Qt,$.plan=function(t,e,n,r,i,o,a,s){void 0===s&&(s=!1);var l,e=new qt.Context(e),u=(r=r,u=i,l="",o=o,a=a,n=(n=n)?Wt.MULTI_INJECT_TAG:Wt.INJECT_TAG,n=new Xt.Metadata(n,u),r=new Jt.Target(r,l,u,n),void 0!==o&&(l=new Xt.Metadata(o,a),r.metadata.push(l)),r);try{return function i(o,t,e,a,n,s){var r,l;null===n?(r=te(o,t,a,null,s),l=new $t.Request(e,a,null,r,s),e=new Zt.Plan(a,l),a.addPlan(e)):(r=te(o,t,a,n,s),l=n.addChildRequest(s.serviceIdentifier,r,s)),r.forEach(function(t){var e=null;if(s.isArray())e=l.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;e=l}if(t.type===Ht.BindingTypeEnum.Instance&&null!==t.implementationType){var n=Kt.getDependencies(o,t.implementationType);if(!a.container.options.skipBaseClassChecks){var r=Kt.getBaseClassDependencyCount(o,t.implementationType);if(n.length<r)throw r=Gt.ARGUMENTS_LENGTH_MISMATCH(Kt.getFunctionName(t.implementationType)),new Error(r)}n.forEach(function(t){i(o,!1,t.serviceIdentifier,a,e,t)})}})}(t,s,i,e,null,u),e}catch(t){throw Ut.isStackOverflowExeption(t)&&e.plan&&Yt.circularDependencyToException(e.plan.rootRequest),t}},$.createMockRequest=function(t,e,n,r){return n=new Jt.Target(Ht.TargetTypeEnum.Variable,"",e,new Xt.Metadata(n,r)),r=new qt.Context(t),new $t.Request(e,r,null,[],n)};var h={},J={},ne=n&&n.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},re=(Object.defineProperty(J,"__esModule",{value:!0}),J.resolveInstance=void 0,a),ie=G,oe=r;J.resolveInstance=function(t,e,n){var r,i,o=null,e=(o=0<e.length?(a=e.filter(function(t){return null!==t.target&&t.target.type===ie.TargetTypeEnum.ConstructorArgument}).map(n),o=new(t.bind.apply(t,ne([void 0],a))),r=o,a=n,i=(n=(n=e).filter(function(t){return null!==t.target&&t.target.type===ie.TargetTypeEnum.ClassProperty})).map(a),n.forEach(function(t,e){t=t.target.name.value(),e=i[e];r[t]=e}),r):new t,t),a=o;if(Reflect.hasMetadata(oe.POST_CONSTRUCT,e)){n=Reflect.getMetadata(oe.POST_CONSTRUCT,e);try{a[n.value]()}catch(t){throw new Error(re.POST_CONSTRUCT_ERROR(e.name,t.message))}}return o},Object.defineProperty(h,"__esModule",{value:!0}),h.resolve=void 0;var ae=a,se=G,le=s,ue=l,ce=J,he=function(e,n,t){try{return t()}catch(t){throw le.isStackOverflowExeption(t)?new Error(ae.CIRCULAR_DEPENDENCY_IN_FACTORY(e,n.toString())):t}},de=function(s){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,n=t.childRequests,r=t.target&&t.target.isArray(),i=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(r&&i)return n.map(function(t){return de(s)(t)});r=null;if(!t.target.isOptional()||0!==e.length){var o,a=e[0],i=a.scope===se.BindingScopeEnum.Singleton,e=a.scope===se.BindingScopeEnum.Request;if(i&&a.activated)return a.cache;if(e&&null!==s&&s.has(a.id))return s.get(a.id);if(a.type===se.BindingTypeEnum.ConstantValue)r=a.cache,a.activated=!0;else if(a.type===se.BindingTypeEnum.Function)r=a.cache,a.activated=!0;else if(a.type===se.BindingTypeEnum.Constructor)r=a.implementationType;else if(a.type===se.BindingTypeEnum.DynamicValue&&null!==a.dynamicValue)r=he("toDynamicValue",a.serviceIdentifier,function(){return a.dynamicValue(t.parentContext)});else if(a.type===se.BindingTypeEnum.Factory&&null!==a.factory)r=he("toFactory",a.serviceIdentifier,function(){return a.factory(t.parentContext)});else if(a.type===se.BindingTypeEnum.Provider&&null!==a.provider)r=he("toProvider",a.serviceIdentifier,function(){return a.provider(t.parentContext)});else{if(a.type!==se.BindingTypeEnum.Instance||null===a.implementationType)throw o=ue.getServiceIdentifierAsString(t.serviceIdentifier),new Error(ae.INVALID_BINDING_TYPE+" "+o);r=ce.resolveInstance(a.implementationType,n,de(s))}return"function"==typeof a.onActivation&&(r=a.onActivation(t.parentContext,r)),i&&(a.cache=r,a.activated=!0),e&&null!==s&&!s.has(a.id)&&s.set(a.id,r),r}}};h.resolve=function(t){return de(t.plan.rootRequest.requestScope)(t.plan.rootRequest)};function pe(t,e){return null!==(t=t.parentRequest)&&(!!e(t)||pe(t,e))}function fe(n){return function(e){function t(t){return null!==t&&null!==t.target&&t.target.matchesTag(n)(e)}return t.metaData=new ge.Metadata(n,e),t}}var it={},u={},ht={},_t={},c={},s={},J={},ye=(Object.defineProperty(J,"__esModule",{value:!0}),J.typeConstraint=J.namedConstraint=J.taggedConstraint=J.traverseAncerstors=void 0,r),ge=st,ye=(J.traverseAncerstors=pe,(J.taggedConstraint=fe)(ye.NAMED_TAG)),ve=(J.namedConstraint=ye,J.typeConstraint=function(n){return function(t){var e=null;return null!==t&&(e=t.bindings[0],"string"==typeof n?e.serviceIdentifier===n:(e=t.bindings[0].implementationType,n===e))}},Object.defineProperty(s,"__esModule",{value:!0}),s.BindingWhenSyntax=void 0,c),me=J;function be(t){this._binding=t}be.prototype.when=function(t){return this._binding.constraint=t,new ve.BindingOnSyntax(this._binding)},be.prototype.whenTargetNamed=function(t){return this._binding.constraint=me.namedConstraint(t),new ve.BindingOnSyntax(this._binding)},be.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new ve.BindingOnSyntax(this._binding)},be.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=me.taggedConstraint(t)(e),new ve.BindingOnSyntax(this._binding)},be.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return me.typeConstraint(e)(t.parentRequest)},new ve.BindingOnSyntax(this._binding)},be.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return me.namedConstraint(e)(t.parentRequest)},new ve.BindingOnSyntax(this._binding)},be.prototype.whenParentTagged=function(e,n){return this._binding.constraint=function(t){return me.taggedConstraint(e)(n)(t.parentRequest)},new ve.BindingOnSyntax(this._binding)},be.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return me.traverseAncerstors(t,me.typeConstraint(e))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!me.traverseAncerstors(t,me.typeConstraint(e))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return me.traverseAncerstors(t,me.namedConstraint(e))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!me.traverseAncerstors(t,me.namedConstraint(e))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenAnyAncestorTagged=function(e,n){return this._binding.constraint=function(t){return me.traverseAncerstors(t,me.taggedConstraint(e)(n))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenNoAncestorTagged=function(e,n){return this._binding.constraint=function(t){return!me.traverseAncerstors(t,me.taggedConstraint(e)(n))},new ve.BindingOnSyntax(this._binding)},be.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return me.traverseAncerstors(t,e)},new ve.BindingOnSyntax(this._binding)},be.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!me.traverseAncerstors(t,e)},new ve.BindingOnSyntax(this._binding)},s.BindingWhenSyntax=be,Object.defineProperty(c,"__esModule",{value:!0}),c.BindingOnSyntax=void 0;var xe=s;function we(t){this._binding=t}we.prototype.onActivation=function(t){return this._binding.onActivation=t,new xe.BindingWhenSyntax(this._binding)},c.BindingOnSyntax=we,Object.defineProperty(_t,"__esModule",{value:!0}),_t.BindingWhenOnSyntax=void 0;var ke=c,_e=s;function Se(t){this._binding=t,this._bindingWhenSyntax=new _e.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new ke.BindingOnSyntax(this._binding)}Se.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},Se.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},Se.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Se.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},Se.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},Se.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},Se.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},Se.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},Se.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},Se.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},Se.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},Se.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},Se.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},Se.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},Se.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},Se.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},_t.BindingWhenOnSyntax=Se,Object.defineProperty(ht,"__esModule",{value:!0}),ht.BindingInSyntax=void 0;var Ee=G,Te=_t;function Me(t){this._binding=t}Me.prototype.inRequestScope=function(){return this._binding.scope=Ee.BindingScopeEnum.Request,new Te.BindingWhenOnSyntax(this._binding)},Me.prototype.inSingletonScope=function(){return this._binding.scope=Ee.BindingScopeEnum.Singleton,new Te.BindingWhenOnSyntax(this._binding)},Me.prototype.inTransientScope=function(){return this._binding.scope=Ee.BindingScopeEnum.Transient,new Te.BindingWhenOnSyntax(this._binding)},ht.BindingInSyntax=Me,Object.defineProperty(u,"__esModule",{value:!0}),u.BindingInWhenOnSyntax=void 0;var Oe=ht,Pe=c,Ce=s;function Ae(t){this._binding=t,this._bindingWhenSyntax=new Ce.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new Pe.BindingOnSyntax(this._binding),this._bindingInSyntax=new Oe.BindingInSyntax(t)}Ae.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},Ae.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},Ae.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},Ae.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},Ae.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},Ae.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Ae.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},Ae.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},Ae.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},Ae.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},Ae.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},Ae.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},Ae.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},Ae.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},Ae.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},Ae.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},Ae.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},Ae.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},Ae.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},u.BindingInWhenOnSyntax=Ae,Object.defineProperty(it,"__esModule",{value:!0}),it.BindingToSyntax=void 0;var Ne=a,Le=G,Ie=u,Re=_t;function je(t){this._binding=t}je.prototype.to=function(t){return this._binding.type=Le.BindingTypeEnum.Instance,this._binding.implementationType=t,new Ie.BindingInWhenOnSyntax(this._binding)},je.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+Ne.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},je.prototype.toConstantValue=function(t){return this._binding.type=Le.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Le.BindingScopeEnum.Singleton,new Re.BindingWhenOnSyntax(this._binding)},je.prototype.toDynamicValue=function(t){return this._binding.type=Le.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new Ie.BindingInWhenOnSyntax(this._binding)},je.prototype.toConstructor=function(t){return this._binding.type=Le.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=Le.BindingScopeEnum.Singleton,new Re.BindingWhenOnSyntax(this._binding)},je.prototype.toFactory=function(t){return this._binding.type=Le.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=Le.BindingScopeEnum.Singleton,new Re.BindingWhenOnSyntax(this._binding)},je.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(Ne.INVALID_FUNCTION_BINDING);t=this.toConstantValue(t);return this._binding.type=Le.BindingTypeEnum.Function,this._binding.scope=Le.BindingScopeEnum.Singleton,t},je.prototype.toAutoFactory=function(e){return this._binding.type=Le.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Le.BindingScopeEnum.Singleton,new Re.BindingWhenOnSyntax(this._binding)},je.prototype.toProvider=function(t){return this._binding.type=Le.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=Le.BindingScopeEnum.Singleton,new Re.BindingWhenOnSyntax(this._binding)},je.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},it.BindingToSyntax=je;ye={},Object.defineProperty(ye,"__esModule",{value:!0}),ye.ContainerSnapshot=void 0,De.of=function(t,e){var n=new De;return n.bindings=t,n.middleware=e,n},ht=De;function De(){}ye.ContainerSnapshot=ht;var c={},Be=(Object.defineProperty(c,"__esModule",{value:!0}),c.Lookup=void 0,a);function Fe(){this._map=new Map}Fe.prototype.getMap=function(){return this._map},Fe.prototype.add=function(t,e){if(null==t)throw new Error(Be.NULL_ARGUMENT);if(null==e)throw new Error(Be.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},Fe.prototype.get=function(t){if(null==t)throw new Error(Be.NULL_ARGUMENT);t=this._map.get(t);if(void 0!==t)return t;throw new Error(Be.KEY_NOT_FOUND)},Fe.prototype.remove=function(t){if(null==t)throw new Error(Be.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(Be.KEY_NOT_FOUND)},Fe.prototype.removeByCondition=function(n){var r=this;this._map.forEach(function(t,e){t=t.filter(function(t){return!n(t)});0<t.length?r._map.set(e,t):r._map.delete(e)})},Fe.prototype.hasKey=function(t){if(null==t)throw new Error(Be.NULL_ARGUMENT);return this._map.has(t)},Fe.prototype.clone=function(){var n=new Fe;return this._map.forEach(function(t,e){t.forEach(function(t){return n.add(e,t.clone())})}),n},Fe.prototype.traverse=function(n){this._map.forEach(function(t,e){n(e,t)})},c.Lookup=Fe;var ze=n&&n.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},Ve=n&&n.__generator||function(r,i){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,a=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=i.call(r,l)}catch(t){e=[6,t],a=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},Ge=n&&n.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},He=(Object.defineProperty(o,"__esModule",{value:!0}),o.Container=void 0,V),We=a,Ue=G,Ye=r,qe=X,Xe=$,Ze=h,Ke=it,$e=H,Je=l,Qe=ye,tn=c;function en(t){this._appliedMiddleware=[];t=t||{};if("object"!=typeof t)throw new Error(""+We.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=Ue.BindingScopeEnum.Transient;else if(t.defaultScope!==Ue.BindingScopeEnum.Singleton&&t.defaultScope!==Ue.BindingScopeEnum.Transient&&t.defaultScope!==Ue.BindingScopeEnum.Request)throw new Error(""+We.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+We.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+We.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=$e.id(),this._bindingDictionary=new tn.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new qe.MetadataReader}en.merge=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=new en,t=Ge([t,e],n).map(function(t){return Xe.getBindingDictionary(t)}),o=Xe.getBindingDictionary(i);return t.forEach(function(t){var n;n=o,t.traverse(function(t,e){e.forEach(function(t){n.add(t.serviceIdentifier,t.clone())})})}),i},en.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},en.prototype.loadAsync=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return ze(this,void 0,void 0,function(){var e,n,r,i,o;return Ve(this,function(t){switch(t.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=a,t.label=1;case 1:return n<r.length?(i=r[n],o=e(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)]):[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},en.prototype.unload=function(){for(var r=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){function e(t){return t.moduleId===n}var n;n=t.id;r._bindingDictionary.removeByCondition(e)})},en.prototype.bind=function(t){var e=this.options.defaultScope||Ue.BindingScopeEnum.Transient,e=new He.Binding(t,e);return this._bindingDictionary.add(t,e),new Ke.BindingToSyntax(e)},en.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},en.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(We.CANNOT_UNBIND+" "+Je.getServiceIdentifierAsString(e))}},en.prototype.unbindAll=function(){this._bindingDictionary=new tn.Lookup},en.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return e=!e&&this.parent?this.parent.isBound(t):e},en.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,Ye.NAMED_TAG,e)},en.prototype.isBoundTagged=function(t,e,n){var r,i,o=!1;return this._bindingDictionary.hasKey(t)&&(r=this._bindingDictionary.get(t),i=Xe.createMockRequest(this,t,e,n),o=r.some(function(t){return t.constraint(i)})),o=!o&&this.parent?this.parent.isBoundTagged(t,e,n):o},en.prototype.snapshot=function(){this._snapshots.push(Qe.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},en.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(We.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},en.prototype.createChild=function(t){t=new en(t||this.options);return t.parent=this,t},en.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware||this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},en.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},en.prototype.get=function(t){return this._get(!1,!1,Ue.TargetTypeEnum.Variable,t)},en.prototype.getTagged=function(t,e,n){return this._get(!1,!1,Ue.TargetTypeEnum.Variable,t,e,n)},en.prototype.getNamed=function(t,e){return this.getTagged(t,Ye.NAMED_TAG,e)},en.prototype.getAll=function(t){return this._get(!0,!0,Ue.TargetTypeEnum.Variable,t)},en.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,Ue.TargetTypeEnum.Variable,t,e,n)},en.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,Ye.NAMED_TAG,e)},en.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach(function(t){e.applyMiddleware(t)}),e.get(t)},en.prototype._getContainerModuleHelpersFactory=function(){function r(t,e){t._binding.moduleId=e}var i=this;return function(t){return{bindFunction:function(t){t=i.bind.bind(i)(t);return r(t,n),t},isboundFunction:function(t){return i.isBound.bind(i)(t)},rebindFunction:(e=n=t,function(t){t=i.rebind.bind(i)(t);return r(t,e),t}),unbindFunction:function(t){i.unbind.bind(i)(t)}};var e,n}},en.prototype._get=function(t,e,n,r,i,o){var a=null,t={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(t)))throw new Error(We.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(t);return a},en.prototype._planAndResolve=function(){var n=this;return function(t){var e=Xe.plan(n._metadataReader,n,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints),e=t.contextInterceptor(e);return Ze.resolve(e)}},o.Container=en;function nn(t){this.id=rn.id(),this.registry=t}var s={},rn=(Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncContainerModule=s.ContainerModule=void 0,H),u=(s.ContainerModule=function(t){this.id=rn.id(),this.registry=t},s.AsyncContainerModule=nn,{}),on=(Object.defineProperty(u,"__esModule",{value:!0}),u.injectable=void 0,a),an=r;u.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(an.PARAM_TYPES,t))throw new Error(on.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(an.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(an.PARAM_TYPES,e,t),t}};var _t={},sn=(Object.defineProperty(_t,"__esModule",{value:!0}),_t.tagged=void 0,st),ln=pt;_t.tagged=function(i,o){return function(t,e,n){var r=new sn.Metadata(i,o);"number"==typeof n?ln.tagParameter(t,e,n,r):ln.tagProperty(t,e,r)}};var ht={},un=(Object.defineProperty(ht,"__esModule",{value:!0}),ht.named=void 0,r),cn=st,hn=pt;ht.named=function(i){return function(t,e,n){var r=new cn.Metadata(un.NAMED_TAG,i);"number"==typeof n?hn.tagParameter(t,e,n,r):hn.tagProperty(t,e,r)}};var n={},dn=(Object.defineProperty(n,"__esModule",{value:!0}),n.optional=void 0,r),pn=st,fn=pt;n.optional=function(){return function(t,e,n){var r=new pn.Metadata(dn.OPTIONAL_TAG,!0);"number"==typeof n?fn.tagParameter(t,e,n,r):fn.tagProperty(t,e,r)}};var V={},yn=(Object.defineProperty(V,"__esModule",{value:!0}),V.unmanaged=void 0,r),gn=st,vn=pt;V.unmanaged=function(){return function(t,e,n){var r=new gn.Metadata(yn.UNMANAGED_TAG,!0);vn.tagParameter(t,e,n,r)}};var $={},mn=(Object.defineProperty($,"__esModule",{value:!0}),$.multiInject=void 0,r),bn=st,xn=pt;$.multiInject=function(i){return function(t,e,n){var r=new bn.Metadata(mn.MULTI_INJECT_TAG,i);"number"==typeof n?xn.tagParameter(t,e,n,r):xn.tagProperty(t,e,r)}};var h={},wn=(Object.defineProperty(h,"__esModule",{value:!0}),h.targetName=void 0,r),kn=st,_n=pt;h.targetName=function(i){return function(t,e,n){var r=new kn.Metadata(wn.NAME_TAG,i);_n.tagParameter(t,e,n,r)}};var it={},Sn=(Object.defineProperty(it,"__esModule",{value:!0}),it.postConstruct=void 0,a),En=r,Tn=st;it.postConstruct=function(){return function(t,e,n){e=new Tn.Metadata(En.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(En.POST_CONSTRUCT,t.constructor))throw new Error(Sn.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(En.POST_CONSTRUCT,e,t.constructor)}};var ye={},c=(Object.defineProperty(ye,"__esModule",{value:!0}),ye.multiBindToService=void 0,ye.multiBindToService=function(r){return function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.forEach(function(t){return r.bind(t).toService(n)})}}},z),Mn=(Object.defineProperty(c,"__esModule",{value:!0}),c.multiBindToService=c.getServiceIdentifierAsString=c.typeConstraint=c.namedConstraint=c.taggedConstraint=c.traverseAncerstors=c.decorate=c.id=c.MetadataReader=c.postConstruct=c.targetName=c.multiInject=c.unmanaged=c.optional=c.LazyServiceIdentifer=c.inject=c.named=c.tagged=c.injectable=c.ContainerModule=c.AsyncContainerModule=c.TargetTypeEnum=c.BindingTypeEnum=c.BindingScopeEnum=c.Container=c.METADATA_KEY=void 0,c.METADATA_KEY=r,o),On=(Object.defineProperty(c,"Container",{enumerable:!0,get:function(){return Mn.Container}}),G),Pn=(Object.defineProperty(c,"BindingScopeEnum",{enumerable:!0,get:function(){return On.BindingScopeEnum}}),Object.defineProperty(c,"BindingTypeEnum",{enumerable:!0,get:function(){return On.BindingTypeEnum}}),Object.defineProperty(c,"TargetTypeEnum",{enumerable:!0,get:function(){return On.TargetTypeEnum}}),s),Cn=(Object.defineProperty(c,"AsyncContainerModule",{enumerable:!0,get:function(){return Pn.AsyncContainerModule}}),Object.defineProperty(c,"ContainerModule",{enumerable:!0,get:function(){return Pn.ContainerModule}}),u),An=(Object.defineProperty(c,"injectable",{enumerable:!0,get:function(){return Cn.injectable}}),_t),Nn=(Object.defineProperty(c,"tagged",{enumerable:!0,get:function(){return An.tagged}}),ht),Ln=(Object.defineProperty(c,"named",{enumerable:!0,get:function(){return Nn.named}}),dt),In=(Object.defineProperty(c,"inject",{enumerable:!0,get:function(){return Ln.inject}}),Object.defineProperty(c,"LazyServiceIdentifer",{enumerable:!0,get:function(){return Ln.LazyServiceIdentifer}}),n),Rn=(Object.defineProperty(c,"optional",{enumerable:!0,get:function(){return In.optional}}),V),jn=(Object.defineProperty(c,"unmanaged",{enumerable:!0,get:function(){return Rn.unmanaged}}),$),Dn=(Object.defineProperty(c,"multiInject",{enumerable:!0,get:function(){return jn.multiInject}}),h),Bn=(Object.defineProperty(c,"targetName",{enumerable:!0,get:function(){return Dn.targetName}}),it),Fn=(Object.defineProperty(c,"postConstruct",{enumerable:!0,get:function(){return Bn.postConstruct}}),X),zn=(Object.defineProperty(c,"MetadataReader",{enumerable:!0,get:function(){return Fn.MetadataReader}}),H),Vn=(Object.defineProperty(c,"id",{enumerable:!0,get:function(){return zn.id}}),pt),Gn=(Object.defineProperty(c,"decorate",{enumerable:!0,get:function(){return Vn.decorate}}),J),Hn=(Object.defineProperty(c,"traverseAncerstors",{enumerable:!0,get:function(){return Gn.traverseAncerstors}}),Object.defineProperty(c,"taggedConstraint",{enumerable:!0,get:function(){return Gn.taggedConstraint}}),Object.defineProperty(c,"namedConstraint",{enumerable:!0,get:function(){return Gn.namedConstraint}}),Object.defineProperty(c,"typeConstraint",{enumerable:!0,get:function(){return Gn.typeConstraint}}),l),Wn=(Object.defineProperty(c,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return Hn.getServiceIdentifierAsString}}),ye),Un=(Object.defineProperty(c,"multiBindToService",{enumerable:!0,get:function(){return Wn.multiBindToService}}),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});function Yn(){throw new Error("setTimeout has not been defined")}function qn(){throw new Error("clearTimeout has not been defined")}var Xn=Yn,Zn=qn;function Kn(e){if(Xn===setTimeout)return setTimeout(e,0);if((Xn===Yn||!Xn)&&setTimeout)return(Xn=setTimeout)(e,0);try{return Xn(e,0)}catch(t){try{return Xn.call(null,e,0)}catch(t){return Xn.call(this,e,0)}}}"function"==typeof Un.setTimeout&&(Xn=setTimeout),"function"==typeof Un.clearTimeout&&(Zn=clearTimeout);var $n,Jn=[],Qn=!1,tr=-1;function er(){Qn&&$n&&(Qn=!1,$n.length?Jn=$n.concat(Jn):tr=-1,Jn.length&&nr())}function nr(){if(!Qn){for(var t=Kn(er),e=(Qn=!0,Jn.length);e;){for($n=Jn,Jn=[];++tr<e;)$n&&$n[tr].run();tr=-1,e=Jn.length}$n=null,Qn=!1,!function(e){if(Zn===clearTimeout)return clearTimeout(e);if((Zn===qn||!Zn)&&clearTimeout)return(Zn=clearTimeout)(e);try{Zn(e)}catch(t){try{return Zn.call(null,e)}catch(t){return Zn.call(this,e)}}}(t)}}function rr(t,e){this.fun=t,this.array=e}rr.prototype.run=function(){this.fun.apply(null,this.array)};function ir(){}a=ir,st=ir,r=ir,o=ir,G=ir,s=ir,u=ir;var or=Un.performance||{},ar=or.now||or.mozNow||or.msNow||or.oNow||or.webkitNow||function(){return(new Date).getTime()};var sr=new Date;var lr,d,ur,cr,hr,dr={nextTick:function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Jn.push(new rr(t,e)),1!==Jn.length||Qn||Kn(nr)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:a,addListener:st,once:r,off:o,removeListener:G,removeAllListeners:s,emit:u,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*ar.call(or),n=Math.floor(e),e=Math.floor(e%1*1e9);return t&&(n-=t[0],(e-=t[1])<0&&(n--,e+=1e9)),[n,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-sr)/1e3}};function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yr(t,e,n){return e&&fr(t.prototype,e),n&&fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){return e.lifecycle===d.Lifecycle.singleton?t.inSingletonScope():t.inTransientScope()}function mr(t,e){t.whenTargetNamed(wr(e))}function br(t,e){return e.bind(kr(t))}function xr(t,e){if(e.isBound(kr(t)))try{return e.rebind(kr(t))}catch(t){}return e.bind(kr(t))}function wr(t){return cr.isDefinedToken(t)?t.symbol:t}function kr(t){return cr.isDefinedToken(t)?t.symbol:t}lr={},function(){var s,l,u,c,r,t,i,h,o,e="object"==typeof Un?Un:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=O(lr);function d(t,e,n){var r=o.get(t);if(v(r)){if(!n)return;r=new i,o.set(t,r)}t=r.get(e);if(v(t)){if(!n)return;t=new i,r.set(e,t)}return t}function a(t,e,n){e=d(e,n,!1);return!v(e)&&!!e.has(t)}function p(t,e,n){e=d(e,n,!1);if(!v(e))return e.get(t)}function f(t,e,n,r){d(n,r,!0).set(t,e)}function y(t,e){var n=[],t=d(t,e,!1);if(v(t))return n;for(var r,i,o=function(t){var e=E(t,u);if(_(e)){e=e.call(t);if(b(e))return e}throw new TypeError}(t.keys()),a=0;;){var s=function(t){t=t.next();return!t.done&&t}(o);if(!s)return n.length=a,n;s=s.value;try{n[a]=s}catch(t){try{i=void 0,(i=(r=o).return)&&i.call(r)}finally{throw t}}a++}}function g(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function v(t){return void 0===t}function m(t){return null===t}function b(t){return"object"==typeof t?null!==t:"function"==typeof t}function x(t,e){switch(g(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===e?"string":5===e?"number":"default",n=E(t,l);if(void 0===n){var r=t;if("string"===(a="default"==e?"number":e)){a=r.toString;if(_(a))if(!b(o=a.call(r)))return o;var i=r.valueOf;if(_(i))if(!b(o=i.call(r)))return o}else{i=r.valueOf;if(_(i))if(!b(o=i.call(r)))return o;var o,a=r.toString;if(_(a))if(!b(o=a.call(r)))return o}throw new TypeError}i=n.call(t,e);if(b(i))throw new TypeError;return i}function w(t){t=x(t,3);return"symbol"==typeof t?t:""+t}function k(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"function"==typeof t}function S(t){return"function"==typeof t}function E(t,e){t=t[e];if(null!=t){if(_(t))return t;throw new TypeError}}function T(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===r)return e;if(e!==r)return e;var n=t.prototype,n=n&&Object.getPrototypeOf(n);if(null==n||n===Object.prototype)return e;n=n.constructor;return"function"!=typeof n||n===t?e:n}function M(t){return t.__=void 0,delete t.__,t}function O(n,r){return function(t,e){"function"!=typeof n[t]&&Object.defineProperty(n,t,{configurable:!0,writable:!0,value:e}),r&&r(t,e)}}void 0===e.Reflect?e.Reflect=lr:n=O(e.Reflect,n),e=n,s=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,l=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",u=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",n="function"==typeof Object.create,t={__proto__:[]}instanceof Array,c={create:n?function(){return M(Object.create(null))}:t?function(){return M({__proto__:null})}:function(){return M({})},has:(n=!n&&!t)?function(t,e){return s.call(t,e)}:function(t,e){return e in t},get:n?function(t,e){return s.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},r=Object.getPrototypeOf(Function),t="object"==typeof dr&&dr.env&&"true"===dr.env.REFLECT_METADATA_USE_MAP_POLYFILL,i=t||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var i={},n=[],t=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[u]=function(){return this},t.prototype.next=function(){var t,e=this._index;return 0<=e&&e<this._keys.length?(t=this._selector(this._keys[e],this._values[e]),e+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:t,done:!1}):{value:void 0,done:!0}},t.prototype.throw=function(t){throw 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),t},t.prototype.return=function(t){return 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),{value:t,done:!0}},t}();function e(){this._keys=[],this._values=[],this._cacheKey=i,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return 0<=this._find(t,!1)},e.prototype.get=function(t){t=this._find(t,!1);return 0<=t?this._values[t]:void 0},e.prototype.set=function(t,e){t=this._find(t,!0);return this._values[t]=e,this},e.prototype.delete=function(t){var e=this._find(t,!1);if(0<=e){for(var n=this._keys.length,r=e+1;r<n;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=i,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=i,this._cacheIndex=-2},e.prototype.keys=function(){return new t(this._keys,this._values,r)},e.prototype.values=function(){return new t(this._keys,this._values,o)},e.prototype.entries=function(){return new t(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[u]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e;function r(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}():Map,h=t||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new i}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[u]=function(){return this.keys()},t}():Set,o=new(t||"function"!=typeof WeakMap?function(){var i=16,e=c.create(),n=r();function t(){this._key=r()}return t.prototype.has=function(t){t=o(t,!1);return void 0!==t&&c.has(t,this._key)},t.prototype.get=function(t){t=o(t,!1);return void 0!==t?c.get(t,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){t=o(t,!1);return void 0!==t&&delete t[this._key]},t.prototype.clear=function(){this._key=r()},t;function r(){for(var t;t="@@WeakMap@@"+function(){for(var t=function(t){return"function"!=typeof Uint8Array?a(new Array(t),t):"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t)}(i),e=(t[6]=79&t[6]|64,t[8]=191&t[8]|128,""),n=0;n<i;++n){var r=t[n];4!==n&&6!==n&&8!==n||(e+="-"),r<16&&(e+="0"),e+=r.toString(16).toLowerCase()}return e}(),c.has(e,t););return e[t]=!0,t}function o(t,e){if(!s.call(t,n)){if(!e)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}}():WeakMap),e("decorate",function(t,e,n,r){{if(v(n)){if(k(t)&&S(e))return function(t,e){for(var n=t.length-1;0<=n;--n){var r=(0,t[n])(e);if(!v(r)&&!m(r)){if(!S(r))throw new TypeError;e=r}}return e}(t,e)}else if(k(t)&&b(e)&&(b(r)||v(r)||m(r)))return m(r)&&(r=void 0),n=w(n),function(t,e,n,r){for(var i=t.length-1;0<=i;--i){var o=(0,t[i])(e,n,r);if(!v(o)&&!m(o)){if(!b(o))throw new TypeError;r=o}}return r}(t,e,n,r);throw new TypeError}}),e("metadata",function(n,r){return function(t,e){if(!b(t))throw new TypeError;if(!v(e)&&!function(t){switch(g(t)){case 3:case 4:return 1;default:return}}(e))throw new TypeError;f(n,r,t,e)}}),e("defineMetadata",function(t,e,n,r){if(!b(n))throw new TypeError;v(r)||(r=w(r));return f(t,e,n,r)}),e("hasMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return function t(e,n,r){var i=a(e,n,r);if(i)return!0;i=T(n);if(!m(i))return t(e,i,r);return!1}(t,e,n)}),e("hasOwnMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return a(t,e,n)}),e("getMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return function t(e,n,r){var i=a(e,n,r);if(i)return p(e,n,r);i=T(n);if(!m(i))return t(e,i,r);return}(t,e,n)}),e("getOwnMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));return p(t,e,n)}),e("getMetadataKeys",function(t,e){if(!b(t))throw new TypeError;v(e)||(e=w(e));return function t(e,n){var r=y(e,n);e=T(e);if(null===e)return r;e=t(e,n);if(e.length<=0)return r;if(r.length<=0)return e;var i=new h;var o=[];for(var a=0,s=r;a<s.length;a++){var l=s[a];i.has(l)||(i.add(l),o.push(l))}for(var u=0,c=e;u<c.length;u++){l=c[u];i.has(l)||(i.add(l),o.push(l))}return o}(t,e)}),e("getOwnMetadataKeys",function(t,e){if(!b(t))throw new TypeError;v(e)||(e=w(e));return y(t,e)}),e("deleteMetadata",function(t,e,n){if(!b(e))throw new TypeError;v(n)||(n=w(n));var r=d(e,n,!1);return!v(r)&&(!!r.delete(t)&&(0<r.size||((t=o.get(e)).delete(n),0<t.size||o.delete(e)),!0))})}(),(ur=d=d||{}).defineToken=function(t){return new ur.DefinedToken(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{multiple:!0})},_t=yr(function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,i=t;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;r=n.multiple,i=void 0!==r&&r;this.name=e,this.symbol=Symbol(this.name),this.multiple=i}),ur.DefinedToken=_t,ur.isModule=function(t){return!!t&&"object"===pr(t)&&"id"in t},(ht=_t=ur.Lifecycle||(ur.Lifecycle={})).singleton="singleton",ht.transient="transient",ur.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),ur.DefaultOption={lifecycle:_t.transient},(hr=cr=cr||{}).toArray=function(t){return Array.isArray(t)?t:void 0===t?[]:[t]},hr.isClass=function(t){return!!(t&&"function"==typeof t&&"prototype"in t)},hr.isDefinedToken=function(t){return!!(t&&"object"===pr(t)&&"symbol"in t&&"multiple"in t)},hr.isInjectOption=function(t){return!!(t&&"object"===pr(t)&&"token"in t)},hr.isNamedToken=function(t){return!!(t&&"object"===pr(t)&&"token"in t&&"named"in t)},hr.isMultipleEnabled=function(t){return hr.isDefinedToken(t)&&t.multiple};dt=new z.Container;function _r(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Sr(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):_r(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function Er(t){var e=0<arguments.length&&void 0!==t?t:{},n=z.injectable();return function(t){Reflect.defineMetadata(d.ClassOptionSymbol,Sr(Sr({},e),{},{target:t}),t),n(t)}}function p(t){return Er(Sr(Sr({},0<arguments.length&&void 0!==t?t:{}),{},{lifecycle:d.Lifecycle.singleton}))}function f(t){return z.inject(kr(t))}var Tr=Symbol("SyringeOptionSymbol");function Mr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Or(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Mr(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function Pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cr=function(){function u(t,e,n){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.register=void 0,this.mutiple=void 0,this.register=t,this.token=e,this.option=n,this.rawToken=cr.isNamedToken(e)?e.token:e,this.named=cr.isNamedToken(e)?e.named:void 0,this.mutiple=!!this.named||cr.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}var t,e,n;return t=u,n=[{key:"resolveTarget",value:function(t,e){var n,r,i,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{try{var a=Reflect.getMetadata(Tr,e);a&&u.resolveOption(t,a)}catch(t){}cr.isClass(e)&&(o.useClass?((n=cr.toArray(o.useClass)).unshift(e),o.useClass=n):o.useClass=[e]);try{r=Reflect.getMetadata(d.ClassOptionSymbol,e)}catch(t){}(r=Or(Or({},r||{}),o)).token?((i=cr.toArray(r.token)).unshift(e),r.token=i):r.token=[e],u.resolveOption(t,r)}catch(t){}}},{key:"resolveOption",value:function(e,t){t=Or(Or({},u.globalConfig),t),n=cr.toArray(t.token),r=cr.toArray(t.useClass),i=cr.toArray(t.useDynamic),o=cr.toArray(t.useFactory),a=cr.toArray(t.contrib),s=t.lifecycle||d.Lifecycle.transient,n={token:n,useClass:r,lifecycle:0<a.length?d.Lifecycle.singleton:s,contrib:a,useDynamic:i,useFactory:o},"useValue"in t&&(n.useValue=t.useValue);var n,r,i,o,a,s,l=n;(0!==l.useClass.length||0!==l.useDynamic.length||0!==l.useFactory.length||"useValue"in l)&&l.token.forEach(function(t){new u(e,t,Or({},l)).resolve()})}}],(e=[{key:"resolve",value:function(){var t,e=this,n=this.register;(t=n)&&"object"===gr(t)&&"bind"in t&&"unbind"in t&&"rebind"in t&&"isBound"in t&&(this.mutiple?this.resolveMutilple(n):(this.resolveMono(n),!this.named&&0<this.option.contrib.length&&this.option.contrib.forEach(function(t){(cr.isMultipleEnabled(t)?br:xr)(t,n).toService(e.generalToken)})))}},{key:"resolveMono",value:function(t){return"useValue"in this.option?xr(this.generalToken,t).toConstantValue(this.option.useValue):0<this.option.useDynamic.length?(e=this.option.useDynamic[this.option.useDynamic.length-1],vr(xr(this.generalToken,t).toDynamicValue(function(t){t=qr.getContainer(t.container);return e({container:t})}),this.option)):0<this.option.useFactory.length?(n=this.option.useFactory[this.option.useFactory.length-1],xr(this.generalToken,t).toFactory(function(t){t=qr.getContainer(t.container);return n({container:t})})):0<this.option.useClass.length?(r=this.option.useClass[this.option.useClass.length-1],vr(xr(this.generalToken,t).to(r),this.option)):void 0;var e,n,r}},{key:"resolveMutilple",value:function(n){var r=this,t=this.option.useClass.map(function(t){return vr(br(r.generalToken,n).to(t),r.option)}),e=this.option.useDynamic.map(function(e){return vr(br(r.generalToken,n).toDynamicValue(function(t){t=qr.getContainer(t.container);return e({container:t})}),r.option)}),i=this.option.useFactory.map(function(e){return br(r.generalToken,n).toFactory(function(t){t=qr.getContainer(t.container);return e({container:t})})}),o="useValue"in this.option?br(this.generalToken,n).toConstantValue(this.option.useValue):void 0;this.named&&(t.forEach(function(t){return r.named&&mr(t,r.named)}),e.forEach(function(t){return r.named&&mr(t,r.named)}),i.forEach(function(t){return r.named&&mr(t,r.named)}),o&&mr(o,this.named))}}])&&Pr(t.prototype,e),n&&Pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(),Ar=(Cr.globalConfig=d.DefaultOption,d.defineToken("ContributionProvider"));function Nr(t){return function(t){if(Array.isArray(t))return Lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ir(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Rr(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Ir(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dr=function(){function r(t,e,n){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=e,this.serviceIdentifier=t,n&&(this.option=Rr(Rr({},this.option),n))}var t,e,n;return t=r,(e=[{key:"setServices",value:function(t){for(var e,n=[],r=this.container;r;)r.isBound(this.serviceIdentifier)&&(e=r.getAll(this.serviceIdentifier),n.push.apply(n,Nr(e))),r=t?r.parent:void 0;return n}},{key:"getContributions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Rr(Rr({},this.option),t),e=t.cache,t=t.recursive;return e&&void 0!==this.services||(this.services=this.setServices(!!t)),this.services}}])&&jr(t.prototype,e),n&&jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Br(t,e,n){t({token:{token:Ar,named:e},useDynamic:function(t){return new Dr(e,t.container,n)},lifecycle:d.Lifecycle.singleton})}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zr=function(){function e(t){var a=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=void 0,this.inversifyModule=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,this.inversifyRegister=function(t,e,n,r){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};cr.isInjectOption(t)?Cr.resolveOption(o,t):Cr.resolveTarget(o,t,e)}var o={bind:t,unbind:e,isBound:n,rebind:r};a.baseRegistry&&a.baseRegistry(i),a.optionCollection&&a.optionCollection.forEach(function(t){return i(t)})},this.baseRegistry=t,this.inversifyModule=new z.ContainerModule(this.inversifyRegister),this.id=this.inversifyModule.id}var t,n,r;return t=e,(n=[{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){return e.options.push(t)}),this}},{key:"contribution",value:function(){for(var r=this,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){return r.options.push({token:{token:Ar,named:e=t},useDynamic:function(t){return new Dr(e,t.container,n)},lifecycle:d.Lifecycle.singleton});var e,n}),this}}])&&Fr(t.prototype,n),r&&Fr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vr(t){return t&&"inversifyModule"in t}function Gr(t){return new zr(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(r){return function(t,e,n){z.named(wr(r))(t,e,n),f(Ar)(t,e,n)}}var Ur,Yr=new Map,qr=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,this.container=t||new z.Container,n.setContainer(this.container,this)}var t,e,r;return t=n,r=[{key:"setContainer",value:function(t,e){return Yr.set(t.id,e)}},{key:"getContainer",value:function(t){var e=Yr.get(t.id);return e||(e=new n(t),n.setContainer(t,e),e)}},{key:"config",value:function(t){Cr.globalConfig=t}}],(e=[{key:"load",value:function(t,e){var n=this;return e||!this.loadedModules.includes(t.id)?(Vr(t)&&this.container.load(t.inversifyModule),this.loadedModules.push(t.id),{dispose:function(){n.unload(t)}}):(console.warn("Unsupported module."),{dispose:function(){}})}},{key:"unload",value:function(e){Vr(e)&&(this.container.unload(e.inversifyModule),this.loadedModules=this.loadedModules.filter(function(t){return t!==e.id}))}},{key:"remove",value:function(t){return this.container.unbind(kr(t))}},{key:"get",value:function(t){return this.container.get(kr(t))}},{key:"getNamed",value:function(t,e){return this.container.getNamed(kr(t),wr(e))}},{key:"getAll",value:function(t){return this.container.getAll(kr(t))}},{key:"getAllNamed",value:function(t,e){return this.container.getAllNamed(kr(t),wr(e))}},{key:"isBound",value:function(t){return this.container.isBound(kr(t))}},{key:"isBoundNamed",value:function(t,e){return this.container.isBoundNamed(kr(t),wr(e))}},{key:"createChild",value:function(){var t=new n(this.container.createChild());return t.parent=this,t}},{key:"register",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};cr.isInjectOption(t)?Cr.resolveOption(this.container,t):Cr.resolveTarget(this.container,t,e)}}])&&Hr(t.prototype,e),r&&Hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}(),Xr=new qr(dt);Xr.register.bind(Xr);function Zr(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){600<i-r&&(a=i-r+1,c=n-r+1,l=Math.log(a),s=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*s*(a-s)/a)*(c-a/2<0?-1:1),u=Math.max(r,Math.floor(n-c*s/a+l)),c=Math.min(i,Math.floor(n+(a-c)*s/a+l)),t(e,n,u,c,o));var a,s,l,u,c,h=e[n],d=r,p=i;for(Kr(e,r,n),0<o(e[i],h)&&Kr(e,r,i);d<p;){for(Kr(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;0<o(e[p],h);)p--}0===o(e[r],h)?Kr(e,r,p):Kr(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||$r)}function Kr(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function $r(t,e){return t<e?-1:e<t?1:0}(n=Ur=Ur||{}).Provider=Ar,n.register=Br;class Jr{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(si(e,n)){const a=this.toBBox,s=[];for(;n;){for(let t=0;t<n.children.length;t++){var i=n.children[t],o=n.leaf?a(i):i;si(e,o)&&(n.leaf?r.push(i):ai(e,o)?this._all(i,r):s.push(i))}n=s.pop()}}return r}collides(e){let n=this.data;if(si(e,n)){const o=[];for(;n;){for(let t=0;t<n.children.length;t++){var r=n.children[t],i=n.leaf?this.toBBox(r):r;if(si(e,i)){if(n.leaf||ai(e,i))return!0;o.push(r)}}n=o.pop()}}return!1}load(e){if(e&&e.length)if(e.length<this._minEntries)for(let t=0;t<e.length;t++)this.insert(e[t]);else{let t=this._build(e.slice(),0,e.length-1,0);var n;this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(n=this.data,this.data=t,t=n),this._insert(t,this.data.height-t.height-1,!0)):this.data=t}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=li([]),this}remove(i,o){if(i){let t=this.data;var a=this.toBBox(i);const l=[],u=[];let e,n,r;for(;t||l.length;){if(t||(t=l.pop(),n=l[l.length-1],e=u.pop(),r=!0),t.leaf){var s=function(e,n,r){if(!r)return n.indexOf(e);for(let t=0;t<n.length;t++)if(r(e,n[t]))return t;return-1}(i,t.children,o);if(-1!==s)return t.children.splice(s,1),l.push(t),this._condense(l),this}r||t.leaf||!ai(t,a)?n?(e++,t=n.children[e],r=!1):t=null:(l.push(t),u.push(e),e=0,t=(n=t).children[0])}}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)(t.leaf?e:n).push(...t.children),t=n.pop();return e}_build(n,t,r,i){var e=r-t+1;let o=this._maxEntries,a;if(e<=o)Qr(a=li(n.slice(t,r+1)),this.toBBox);else{i||(i=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,i-1))),(a=li([])).leaf=!1,a.height=i;var s=Math.ceil(e/o),l=s*Math.ceil(Math.sqrt(o));ui(n,t,r,l,this.compareMinX);for(let e=t;e<=r;e+=l){var u=Math.min(e+l-1,r);ui(n,e,u,s,this.compareMinY);for(let t=e;t<=u;t+=s){var c=Math.min(t+s-1,u);a.children.push(this._build(n,t,c,i-1))}}Qr(a,this.toBBox)}return a}_chooseSubtree(i,o,t,a){for(;;){if(a.push(o),o.leaf||a.length-1===t)break;let e=1/0,n=1/0,r;for(let t=0;t<o.children.length;t++){var s=o.children[t],l=ii(s),u=(c=i,u=s,(Math.max(u.maxX,c.maxX)-Math.min(u.minX,c.minX))*(Math.max(u.maxY,c.maxY)-Math.min(u.minY,c.minY))-l);u<n?(n=u,e=l<e?l:e,r=s):u===n&&l<e&&(e=l,r=s)}o=r||o.children[0]}var c,u;return o}_insert(t,e,n){var n=n?t:this.toBBox(t),r=[];const i=this._chooseSubtree(n,this.data,e,r);for(i.children.push(t),ei(i,n);0<=e&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)}_split(t,e){const n=t[e];var r=n.children.length,i=this._minEntries,i=(this._chooseSplitAxis(n,i,r),this._chooseSplitIndex(n,i,r));const o=li(n.children.splice(i,n.children.length-i));o.height=n.height,o.leaf=n.leaf,Qr(n,this.toBBox),Qr(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,e){this.data=li([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Qr(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,o=1/0,a=1/0;for(let t=n;t<=r-n;t++){var s=ti(e,0,t,this.toBBox),l=ti(e,t,r,this.toBBox),u=(h=s,u=l,c=p=d=void 0,d=Math.max(h.minX,u.minX),p=Math.max(h.minY,u.minY),c=Math.min(h.maxX,u.maxX),h=Math.min(h.maxY,u.maxY),Math.max(0,c-d)*Math.max(0,h-p)),c=ii(s)+ii(l);u<o?(o=u,i=t,a=c<a?c:a):u===o&&c<a&&(a=c,i=t)}var h,u,d,p,c;return i||r-n}_chooseSplitAxis(t,e,n){var r=t.leaf?this.compareMinX:ni,i=t.leaf?this.compareMinY:ri;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}_allDistMargin(e,n,r,t){e.children.sort(t);const i=this.toBBox;var o=ti(e,0,n,i),a=ti(e,r-n,r,i);let s=oi(o)+oi(a);for(let t=n;t<r-n;t++){var l=e.children[t];ei(o,e.leaf?i(l):l),s+=oi(o)}for(let t=r-n-1;t>=n;t--){var u=e.children[t];ei(a,e.leaf?i(u):u),s+=oi(a)}return s}_adjustParentBBoxes(e,n,r){for(let t=r;0<=t;t--)ei(n[t],e)}_condense(n){for(let t=n.length-1,e;0<=t;t--)0===n[t].children.length?0<t?(e=n[t-1].children).splice(e.indexOf(n[t]),1):this.clear():Qr(n[t],this.toBBox)}}function Qr(t,e){ti(t,0,t.children.length,e,t)}function ti(e,n,r,i,o){(o=o||li(null)).minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let t=n;t<r;t++){var a=e.children[t];ei(o,e.leaf?i(a):a)}return o}function ei(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function ni(t,e){return t.minX-e.minX}function ri(t,e){return t.minY-e.minY}function ii(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function oi(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ai(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function si(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function li(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ui(t,e,n,r,i){const o=[e,n];for(;o.length;){var a;(n=o.pop())-(e=o.pop())<=r||(Zr(t,a=e+Math.ceil((n-e)/r/2)*r,e,n,i),o.push(e,a,a,n))}}var ci=1e-6,hi="undefined"!=typeof Float32Array?Float32Array:Array;function di(){var t=new hi(9);return hi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var pi=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],e=e[8],h=n[0],d=n[1],p=n[2],f=n[3],y=n[4],g=n[5],v=n[6],m=n[7],n=n[8];return t[0]=h*r+d*a+p*u,t[1]=h*i+d*s+p*c,t[2]=h*o+d*l+p*e,t[3]=f*r+y*a+g*u,t[4]=f*i+y*s+g*c,t[5]=f*o+y*l+g*e,t[6]=v*r+m*a+n*u,t[7]=v*i+m*s+n*c,t[8]=v*o+m*l+n*e,t};function fi(){var t=new hi(16);return hi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function yi(t){var e=new hi(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vi(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,y){var g=new hi(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=h,g[12]=d,g[13]=p,g[14]=f,g[15]=y,g}function mi(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],y=e[13],g=e[14],e=e[15],v=n*s-r*a,m=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,k=i*u-o*l,_=c*y-h*f,S=c*g-d*f,E=c*e-p*f,T=h*g-d*y,M=h*e-p*y,O=d*e-p*g,P=v*O-m*M+b*T+x*E-w*S+k*_;return P?(t[0]=(s*O-l*M+u*T)*(P=1/P),t[1]=(i*M-r*O-o*T)*P,t[2]=(y*k-g*w+e*x)*P,t[3]=(d*w-h*k-p*x)*P,t[4]=(l*E-a*O-u*S)*P,t[5]=(n*O-i*E+o*S)*P,t[6]=(g*b-f*k-e*m)*P,t[7]=(c*k-d*b+p*m)*P,t[8]=(a*M-s*E+u*_)*P,t[9]=(r*E-n*M-o*_)*P,t[10]=(f*w-y*b+e*v)*P,t[11]=(h*b-c*w-p*v)*P,t[12]=(s*S-a*T-l*_)*P,t[13]=(n*T-r*S+i*_)*P,t[14]=(y*m-f*x-g*v)*P,t[15]=(c*x-h*m+d*v)*P,t):null}function xi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],y=e[12],g=e[13],v=e[14],e=e[15],m=n[0],b=n[1],x=n[2],w=n[3];return t[0]=m*r+b*s+x*h+w*y,t[1]=m*i+b*l+x*d+w*g,t[2]=m*o+b*u+x*p+w*v,t[3]=m*a+b*c+x*f+w*e,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*r+b*s+x*h+w*y,t[5]=m*i+b*l+x*d+w*g,t[6]=m*o+b*u+x*p+w*v,t[7]=m*a+b*c+x*f+w*e,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*r+b*s+x*h+w*y,t[9]=m*i+b*l+x*d+w*g,t[10]=m*o+b*u+x*p+w*v,t[11]=m*a+b*c+x*f+w*e,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*r+b*s+x*h+w*y,t[13]=m*i+b*l+x*d+w*g,t[14]=m*o+b*u+x*p+w*v,t[15]=m*a+b*c+x*f+w*e,t}function wi(t,e,n){var r,i,o,a,s,l,u,c,h,d,p,f,y=n[0],g=n[1],n=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*n+e[12],t[13]=e[1]*y+e[5]*g+e[9]*n+e[13],t[14]=e[2]*y+e[6]*g+e[10]*n+e[14],t[15]=e[3]*y+e[7]*g+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*y+s*g+h*n+e[12],t[13]=i*y+l*g+d*n+e[13],t[14]=o*y+u*g+p*n+e[14],t[15]=a*y+c*g+f*n+e[15]),t}function ki(t,e,n){var r=n[0],i=n[1],n=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _i(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[4],o=e[5],a=e[6],s=e[7],l=e[8],u=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*n+l*r,t[5]=o*n+u*r,t[6]=a*n+c*r,t[7]=s*n+h*r,t[8]=l*n-i*r,t[9]=u*n-o*r,t[10]=c*n-a*r,t[11]=h*n-s*r,t}function Si(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[0],o=e[1],a=e[2],s=e[3],l=e[8],u=e[9],c=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n-l*r,t[1]=o*n-u*r,t[2]=a*n-c*r,t[3]=s*n-h*r,t[8]=i*r+l*n,t[9]=o*r+u*n,t[10]=a*r+c*n,t[11]=s*r+h*n,t}function Ei(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Ti(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3],a=r+r,s=i+i,l=o+o,u=r*a,c=r*s,r=r*l,h=i*s,i=i*l,o=o*l,a=e*a,s=e*s,e=e*l;return t[0]=1-(h+o),t[1]=c+e,t[2]=r-s,t[3]=0,t[4]=c-e,t[5]=1-(u+o),t[6]=i+a,t[7]=0,t[8]=r+s,t[9]=i-a,t[10]=1-(u+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Mi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Oi(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],e=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,u,e),t}function Pi(t,e){var n=new hi(3),r=(Oi(n,e),1/n[0]),i=1/n[1],n=1/n[2],o=e[0]*r,a=e[1]*i,s=e[2]*n,l=e[4]*r,u=e[5]*i,c=e[6]*n,r=e[8]*r,i=e[9]*i,e=e[10]*n,n=o+u+e,h=0;return 0<n?(h=2*Math.sqrt(1+n),t[3]=.25*h,t[0]=(c-i)/h,t[1]=(r-s)/h,t[2]=(a-l)/h):u<o&&e<o?(h=2*Math.sqrt(1+o-u-e),t[3]=(c-i)/h,t[0]=.25*h,t[1]=(a+l)/h,t[2]=(r+s)/h):e<u?(h=2*Math.sqrt(1+u-o-e),t[3]=(r-s)/h,t[0]=(a+l)/h,t[1]=.25*h,t[2]=(c+i)/h):(h=2*Math.sqrt(1+e-o-u),t[3]=(a-l)/h,t[0]=(r+s)/h,t[1]=(c+i)/h,t[2]=.25*h),t}function Ci(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],e=e[3],l=o+o,u=a+a,c=s+s,h=o*l,d=o*u,o=o*c,p=a*u,a=a*c,s=s*c,l=e*l,u=e*u,e=e*c,c=r[0],f=r[1],r=r[2],y=i[0],g=i[1],i=i[2],v=(1-(p+s))*c,m=(d+e)*c,c=(o-u)*c,d=(d-e)*f,e=(1-(h+s))*f,s=(a+l)*f,f=(o+u)*r,o=(a-l)*r,u=(1-(h+p))*r;return t[0]=v,t[1]=m,t[2]=c,t[3]=0,t[4]=d,t[5]=e,t[6]=s,t[7]=0,t[8]=f,t[9]=o,t[10]=u,t[11]=0,t[12]=n[0]+y-(v*y+d*g+f*i),t[13]=n[1]+g-(m*y+e*g+o*i),t[14]=n[2]+i-(c*y+s*g+u*i),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n+n,a=r+r,s=i+i,n=n*o,l=r*o,r=r*a,u=i*o,c=i*a,i=i*s,o=e*o,a=e*a,e=e*s;return t[0]=1-r-i,t[1]=l+e,t[2]=u-a,t[3]=0,t[4]=l-e,t[5]=1-n-i,t[6]=c+o,t[7]=0,t[8]=u+a,t[9]=c-o,t[10]=1-n-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ni(t,e,n,r,i){e=1/Math.tan(e/2);return t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(n=1/(r-i)),t[14]=2*i*r*n):(t[10]=-1,t[14]=-2*r),t}function Li(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t}var Ii=Li;function Ri(t,e,n,r){var i,o,a,s,l=e[0],u=e[1],e=e[2],c=r[0],h=r[1],r=r[2],d=n[0],p=n[1],n=n[2];return Math.abs(l-d)<ci&&Math.abs(u-p)<ci&&Math.abs(e-n)<ci?mi(t):(n=e-n,i=h*(n*=s=1/Math.hypot(d=l-d,p=u-p,n))-r*(p*=s),r=r*(d*=s)-c*n,c=c*p-h*d,(s=Math.hypot(i,r,c))?(i*=s=1/s,r*=s,c*=s):c=r=i=0,h=p*c-n*r,o=n*i-d*c,a=d*r-p*i,(s=Math.hypot(h,o,a))?(h*=s=1/s,o*=s,a*=s):a=o=h=0,t[0]=i,t[1]=h,t[2]=d,t[3]=0,t[4]=r,t[5]=o,t[6]=p,t[7]=0,t[8]=c,t[9]=a,t[10]=n,t[11]=0,t[12]=-(i*l+r*u+c*e),t[13]=-(h*l+o*u+a*e),t[14]=-(d*l+p*u+n*e),t[15]=1,t)}function ji(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var Di=Object.freeze({__proto__:null,create:fi,clone:yi,copy:gi,fromValues:vi,set:function(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,y,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=d,t[12]=p,t[13]=f,t[14]=y,t[15]=g,t},identity:mi,transpose:function(t,e){var n,r,i,o,a,s;return t===e?(n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},invert:bi,adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],y=e[13],g=e[14],e=e[15];return t[0]=s*(d*e-p*g)-h*(l*e-u*g)+y*(l*p-u*d),t[1]=-(r*(d*e-p*g)-h*(i*e-o*g)+y*(i*p-o*d)),t[2]=r*(l*e-u*g)-s*(i*e-o*g)+y*(i*u-o*l),t[3]=-(r*(l*p-u*d)-s*(i*p-o*d)+h*(i*u-o*l)),t[4]=-(a*(d*e-p*g)-c*(l*e-u*g)+f*(l*p-u*d)),t[5]=n*(d*e-p*g)-c*(i*e-o*g)+f*(i*p-o*d),t[6]=-(n*(l*e-u*g)-a*(i*e-o*g)+f*(i*u-o*l)),t[7]=n*(l*p-u*d)-a*(i*p-o*d)+c*(i*u-o*l),t[8]=a*(h*e-p*y)-c*(s*e-u*y)+f*(s*p-u*h),t[9]=-(n*(h*e-p*y)-c*(r*e-o*y)+f*(r*p-o*h)),t[10]=n*(s*e-u*y)-a*(r*e-o*y)+f*(r*u-o*s),t[11]=-(n*(s*p-u*h)-a*(r*p-o*h)+c*(r*u-o*s)),t[12]=-(a*(h*g-d*y)-c*(s*g-l*y)+f*(s*d-l*h)),t[13]=n*(h*g-d*y)-c*(r*g-i*y)+f*(r*d-i*h),t[14]=-(n*(s*g-l*y)-a*(r*g-i*y)+f*(r*l-i*s)),t[15]=n*(s*d-l*h)-a*(r*d-i*h)+c*(r*l-i*s),t},determinant:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],y=t[14],t=t[15];return(e*a-n*o)*(h*t-d*y)-(e*s-r*o)*(c*t-d*f)+(e*l-i*o)*(c*y-h*f)+(n*s-r*a)*(u*t-d*p)-(n*l-i*a)*(u*y-h*p)+(r*l-i*s)*(u*f-c*p)},multiply:xi,translate:wi,scale:ki,rotate:function(t,e,n,r){var i,o,a,s,l,u,c,h,d,p,f,y,g,v,m,b,x,w,k,_,S=r[0],E=r[1],r=r[2],T=Math.hypot(S,E,r);return T<ci?null:(S*=T=1/T,E*=T,r*=T,T=Math.sin(n),n=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7],p=e[8],f=e[9],y=e[10],g=e[11],m=S*E*(i=1-n)-r*T,b=E*E*i+n,x=r*E*i+S*T,w=S*r*i+E*T,k=E*r*i-S*T,_=r*r*i+n,t[0]=o*(n=S*S*i+n)+u*(v=E*S*i+r*T)+p*(r=r*S*i-E*T),t[1]=a*n+c*v+f*r,t[2]=s*n+h*v+y*r,t[3]=l*n+d*v+g*r,t[4]=o*m+u*b+p*x,t[5]=a*m+c*b+f*x,t[6]=s*m+h*b+y*x,t[7]=l*m+d*b+g*x,t[8]=o*w+u*k+p*_,t[9]=a*w+c*k+f*_,t[10]=s*w+h*k+y*_,t[11]=l*w+d*k+g*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:_i,rotateY:Si,rotateZ:function(t,e,n){var r=Math.sin(n),n=Math.cos(n),i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*n+l*r,t[1]=o*n+u*r,t[2]=a*n+c*r,t[3]=s*n+h*r,t[4]=l*n-i*r,t[5]=u*n-o*r,t[6]=c*n-a*r,t[7]=h*n-s*r,t},fromTranslation:Ei,fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,n){var r,i=n[0],o=n[1],n=n[2],a=Math.hypot(i,o,n);return a<ci?null:(i*=a=1/a,o*=a,n*=a,a=Math.sin(e),e=Math.cos(e),t[0]=i*i*(r=1-e)+e,t[1]=o*i*r+n*a,t[2]=n*i*r-o*a,t[3]=0,t[4]=i*o*r-n*a,t[5]=o*o*r+e,t[6]=n*o*r+i*a,t[7]=0,t[8]=i*n*r+o*a,t[9]=o*n*r-i*a,t[10]=n*n*r+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:Ti,fromQuat2:function(t,e){var n=new hi(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=r*r+i*i+o*o+a*a;return 0<h?(n[0]=2*(s*a+c*r+l*o-u*i)/h,n[1]=2*(l*a+c*i+u*r-s*o)/h,n[2]=2*(u*a+c*o+s*i-l*r)/h):(n[0]=2*(s*a+c*r+l*o-u*i),n[1]=2*(l*a+c*i+u*r-s*o),n[2]=2*(u*a+c*o+s*i-l*r)),Ti(t,e,n),t},getTranslation:Mi,getScaling:Oi,getRotation:Pi,fromRotationTranslationScale:function(t,e,n,r){var i=e[0],o=e[1],a=e[2],e=e[3],s=i*(c=i+i),l=i*(h=o+o),i=i*(d=a+a),u=o*h,o=o*d,a=a*d,c=e*c,h=e*h,e=e*d,d=r[0],p=r[1],r=r[2];return t[0]=(1-(u+a))*d,t[1]=(l+e)*d,t[2]=(i-h)*d,t[3]=0,t[4]=(l-e)*p,t[5]=(1-(s+a))*p,t[6]=(o+c)*p,t[7]=0,t[8]=(i+h)*r,t[9]=(o-c)*r,t[10]=(1-(s+u))*r,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:Ci,fromQuat:Ai,frustum:function(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t},perspectiveNO:Ni,perspective:Ni,perspectiveZO:function(t,e,n,r,i){return e=1/Math.tan(e/2),t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=i*(n=1/(r-i)),t[14]=i*r*n):(t[10]=-1,t[14]=-r),t},perspectiveFromFieldOfView:function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),e=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+e),l=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-e)*s*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},orthoNO:Li,ortho:Ii,orthoZO:function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),a=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=o*a,t[15]=1,t},lookAt:Ri,targetTo:function(t,e,n,r){var i=e[0],o=e[1],e=e[2],a=r[0],s=r[1],r=r[2],l=i-n[0],u=o-n[1],n=e-n[2],c=l*l+u*u+n*n,h=(0<c&&(l*=c=1/Math.sqrt(c),u*=c,n*=c),s*n-r*u);return 0<(c=h*h+(r=r*l-a*n)*r+(a=a*u-s*l)*a)&&(h*=c=1/Math.sqrt(c),r*=c,a*=c),t[0]=h,t[1]=r,t[2]=a,t[3]=0,t[4]=u*a-n*r,t[5]=n*h-l*a,t[6]=l*r-u*h,t[7]=0,t[8]=l,t[9]=u,t[10]=n,t[11]=0,t[12]=i,t[13]=o,t[14]=e,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:ji,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],y=t[13],g=t[14],t=t[15],v=e[0],m=e[1],b=e[2],x=e[3],w=e[4],k=e[5],_=e[6],S=e[7],E=e[8],T=e[9],M=e[10],O=e[11],P=e[12],C=e[13],A=e[14],e=e[15];return Math.abs(n-v)<=ci*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-m)<=ci*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-b)<=ci*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=ci*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=ci*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-k)<=ci*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-_)<=ci*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-S)<=ci*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-E)<=ci*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-T)<=ci*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-M)<=ci*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-O)<=ci*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(f-P)<=ci*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(y-C)<=ci*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-A)<=ci*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-e)<=ci*Math.max(1,Math.abs(t),Math.abs(e))},mul:xi,sub:ji});function v(){var t=new hi(3);return hi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Bi(t){var e=new hi(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Fi(t){var e=t[0],n=t[1],t=t[2];return Math.hypot(e,n,t)}function _(t,e,n){var r=new hi(3);return r[0]=t,r[1]=e,r[2]=n,r}function zi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Vi(t,e,n,r){t[0]=e,t[1]=n,t[2]=r}function Gi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Hi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Wi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ui(t,e){var n=e[0],r=e[1],i=e[2],n=n*n+r*r+i*i;0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function Yi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qi(t,e,n,r){var i=e[0],o=e[1],e=e[2];t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=e+r*(n[2]-e)}function Xi(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[3]*r+n[7]*i+n[11]*e+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*e+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*e+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*e+n[14])/o,t}function Zi(t,e,n){var r=e[0],i=e[1],e=e[2];t[0]=r*n[0]+i*n[3]+e*n[6],t[1]=r*n[1]+i*n[4]+e*n[7],t[2]=r*n[2]+i*n[5]+e*n[8]}function Ki(t,e){var n=t[0],r=t[1],t=t[2],i=e[0],o=e[1],e=e[2];return Math.abs(n-i)<=ci*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=ci*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=ci*Math.max(1,Math.abs(t),Math.abs(e))}var $i=Hi,Ji=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],e=e[2]-t[2];return Math.hypot(n,r,e)},Qi=Fi;function to(){var t=new hi(4);return hi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function eo(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*e,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*e,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*e,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*e,t}function no(){var t=new hi(4);return hi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ro(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function io(t,e,n){var r=e[0],i=e[1],o=e[2],e=e[3],a=n[0],s=n[1],l=n[2],n=n[3];return t[0]=r*n+e*a+i*l-o*s,t[1]=i*n+e*s+o*a-r*l,t[2]=o*n+e*l+r*s-i*a,t[3]=e*n-r*a-i*s-o*l,t}function oo(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n*n+r*r+i*i+e*e,o=o?1/o:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=e*o,t}function ao(t,e,n,r){var i=.5*Math.PI/180,i=(e*=i,n*=i,r*=i,Math.sin(e)),e=Math.cos(e),o=Math.sin(n),n=Math.cos(n),a=Math.sin(r),r=Math.cos(r);t[0]=i*n*r-e*o*a,t[1]=e*o*r+i*n*a,t[2]=e*n*a-i*o*r,t[3]=e*n*r+i*o*a}v(),to();var so=function(t,e,n,r){var i=new hi(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},lo=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},uo=io,co=function(t,e){var n=e[0],r=e[1],i=e[2],e=e[3],o=n*n+r*r+i*i+e*e;return 0<o&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=e*o,t};function ho(t,e){var n=new hi(2);return n[0]=t,n[1]=e,n}function po(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fo(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function yo(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function go(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function vo(t,e){var n=e[0]-t[0],e=e[1]-t[1];return Math.hypot(n,e)}function mo(t,e){var n=e[0],r=e[1],n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}v(),_(1,0,0),_(0,1,0),no(),no(),di();var bo,xo,wo=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},ko=(V=new hi(2),hi!=Float32Array&&(V[0]=0,V[1]=0),{exports:{}});function _o(){}function So(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Eo(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new So(n,r||t,i),r=xo?xo+e:e;return t._events[r]?t._events[r].fn?t._events[r]=[t._events[r],n]:t._events[r].push(n):(t._events[r]=n,t._eventsCount++),t}function To(t,e){0==--t._eventsCount?t._events=new _o:delete t._events[e]}function Mo(){this._events=new _o,this._eventsCount=0}function Oo(t,e,n){(t.prototype=e.prototype=n).constructor=t}function Po(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function Co(){}$=ko,bo=Object.prototype.hasOwnProperty,xo="~",Object.create&&(_o.prototype=Object.create(null),(new _o).__proto__||(xo=!1)),Mo.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)bo.call(t,e)&&n.push(xo?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},Mo.prototype.listeners=function(t){var t=xo?xo+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,i=new Array(r);n<r;n++)i[n]=e[n].fn;return i},Mo.prototype.listenerCount=function(t){t=xo?xo+t:t,t=this._events[t];return t?t.fn?1:t.length:0},Mo.prototype.emit=function(t,e,n,r,i,o){var a=xo?xo+t:t;if(!this._events[a])return!1;var s,l=this._events[a],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l.fn.apply(l.context,s)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(t,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,e);break;case 3:l[d].fn.call(l[d].context,e,n);break;case 4:l[d].fn.call(l[d].context,e,n,r);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[d].fn.apply(l[d].context,s)}return!0},Mo.prototype.on=function(t,e,n){return Eo(this,t,e,n,!1)},Mo.prototype.once=function(t,e,n){return Eo(this,t,e,n,!0)},Mo.prototype.removeListener=function(t,e,n,r){t=xo?xo+t:t;if(this._events[t])if(e){var i=this._events[t];if(i.fn)i.fn!==e||r&&!i.once||n&&i.context!==n||To(this,t);else{for(var o=0,a=[],s=i.length;o<s;o++)(i[o].fn!==e||r&&!i[o].once||n&&i[o].context!==n)&&a.push(i[o]);a.length?this._events[t]=1===a.length?a[0]:a:To(this,t)}}else To(this,t);return this},Mo.prototype.removeAllListeners=function(t){return t?(t=xo?xo+t:t,this._events[t]&&To(this,t)):(this._events=new _o,this._eventsCount=0),this},Mo.prototype.off=Mo.prototype.removeListener,Mo.prototype.addListener=Mo.prototype.on,Mo.prefixed=xo,$.exports=Mo.EventEmitter=Mo;var h="\\s*([+-]?\\d+)\\s*",it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",X="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ao=/^#([0-9a-f]{3,8})$/,No=new RegExp("^rgb\\("+[h,h,h]+"\\)$"),Lo=new RegExp("^rgb\\("+[X,X,X]+"\\)$"),Io=new RegExp("^rgba\\("+[h,h,h,it]+"\\)$"),Ro=new RegExp("^rgba\\("+[X,X,X,it]+"\\)$"),jo=new RegExp("^hsl\\("+[it,X,X]+"\\)$"),Do=new RegExp("^hsla\\("+[it,X,X,it]+"\\)$"),Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fo(){return this.rgb().formatHex()}function zo(){return this.rgb().formatRgb()}function Vo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ao.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Go(e):3===n?new Wo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ho(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ho(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=No.exec(t))?new Wo(e[1],e[2],e[3],1):(e=Lo.exec(t))?new Wo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Io.exec(t))?Ho(e[1],e[2],e[3],e[4]):(e=Ro.exec(t))?Ho(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=jo.exec(t))?Xo(e[1],e[2]/100,e[3]/100,1):(e=Do.exec(t))?Xo(e[1],e[2]/100,e[3]/100,e[4]):Bo.hasOwnProperty(t)?Go(Bo[t]):"transparent"===t?new Wo(NaN,NaN,NaN,0):null}function Go(t){return new Wo(t>>16&255,t>>8&255,255&t,1)}function Ho(t,e,n,r){return new Wo(t=r<=0?e=n=NaN:t,e,n,r)}function Wo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Uo(){return"#"+qo(this.r)+qo(this.g)+qo(this.b)}function Yo(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function qo(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Xo(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Ko(t,e,n,r)}function Zo(t){if(t instanceof Ko)return new Ko(t.h,t.s,t.l,t.opacity);if(!(t=t instanceof Co?t:Vo(t)))return new Ko;if(t instanceof Ko)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=0<l&&l<1?0:a,new Ko(a,s,l,t.opacity)}function Ko(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $o(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Jo(t){return t.map(function(t){return Array.isArray(t)?T([],t,!0):t})}function Qo(t,e){return function(t,n){if("off"===n)return Jo(t);var r="number"==typeof n&&1<=n?Math.pow(10,n):1;return t.map(function(t){var e=t.slice(1).map(Number).map(function(t){return n?Math.round(t*r)/r:Math.round(t)});return T([t[0]],e,!0)})}(t,e=void 0===e?"off":e).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")}Oo(Co,Vo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Fo,formatHex:Fo,formatHsl:function(){return Zo(this).formatHsl()},formatRgb:zo,toString:zo}),Oo(Wo,function(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof Co?i:Vo(i))?new Wo((i=i.rgb()).r,i.g,i.b,i.opacity):new Wo:new Wo(t,e,n,null==r?1:r);var i},Po(Co,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uo,formatHex:Uo,formatRgb:Yo,toString:Yo})),Oo(Ko,function(t,e,n,r){return 1===arguments.length?Zo(t):new Ko(t,e,n,null==r?1:r)},Po(Co,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ko(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ko(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new Wo($o(240<=t?t-240:120+t,n,e),$o(t,n,e),$o(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ta={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};var ea={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function na(t){return Array.isArray(t)&&t.every(function(t){var e=t[0].toLowerCase();return ea[e]===t.length-1&&"achlmqstvz".includes(e)})}function ra(t){return na(t)&&t.every(function(t){t=t[0];return t===t.toUpperCase()})}function ia(t){return ra(t)&&t.every(function(t){t=t[0];return"ACLMQZ".includes(t)})}function oa(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=ea[n]&&("m"===n&&2<r.length?(t.segments.push(T([e],r.splice(0,2),!0)),n="l",e="m"===e?"l":"L"):t.segments.push(T([e],r.splice(0,ea[n]),!0)),ea[n]););}function aa(t){return 48<=t&&t<=57}function sa(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function la(t){var e,n,r,i,o,a=t.max,s=t.pathValue,l=t.index,u=s.charCodeAt(l),c=ea[s[l].toLowerCase()];if(t.segmentStart=l,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return 1;default:return}}(u)){if(t.index+=1,sa(t),t.data=[],c)for(;;){for(var h=c;0<h;--h){if(97!=(32|u)||3!==h&&4!==h?function(t){var e,n,r=t.max,i=t.pathValue,o=t.index,a=o,s=!1,l=!1,u=!1;if(r<=a)t.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';else if(aa(n=43!==(n=i.charCodeAt(a))&&45!==n?n:i.charCodeAt(a+=1))||46===n){if(46!==n){if(e=48===n,n=i.charCodeAt(a+=1),e&&a<r&&n&&aa(n))return t.err="[path-util]: Invalid path value at index "+o+', "'+i[o]+'" illegal number';for(;a<r&&aa(i.charCodeAt(a));)a+=1,s=!0;n=i.charCodeAt(a)}if(46===n){for(u=!0,a+=1;aa(i.charCodeAt(a));)a+=1,l=!0;n=i.charCodeAt(a)}if(101===n||69===n){if(u&&!s&&!l)return t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" invalid float exponent';if(43!==(n=i.charCodeAt(a+=1))&&45!==n||(a+=1),!(a<r&&aa(i.charCodeAt(a))))return t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" invalid integer exponent';for(;a<r&&aa(i.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(o,a)}else t.err="[path-util]: Invalid path value at index "+a+', "'+i[a]+'" is not a number'}(t):(o=i=r=void 0,r=(n=t).index,i=n.pathValue,48===(o=i.charCodeAt(r))?(n.param=0,n.index+=1):49===o?(n.param=1,n.index+=1):n.err='[path-util]: invalid Arc flag "'+i[r]+'", expecting 0 or 1 at index '+r),t.err.length)return;t.data.push(t.param),sa(t),t.index<a&&44===s.charCodeAt(t.index)&&(t.index+=1,sa(t))}if(t.index>=t.max)break;if(!(48<=(e=s.charCodeAt(t.index))&&e<=57||43===e||45===e||46===e))break}oa(t)}else t.err='[path-util]: Invalid path value "'+s[l]+'" is not a path command'}var ua=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function ca(t){if(ra(t))return Jo(t);var t=function(t){if(na(t))return Jo(t);var e=new ua(t);for(sa(e);e.index<e.max&&!e.err.length;)la(e);return e.err||e.segments}(t),o=0,a=0,s=0,l=0;return t.map(function(t){var e=t.slice(1).map(Number),t=t[0],n=t.toUpperCase();if("M"===t)return o=e[0],a=e[1],["M",s=o,l=a];if(t!==n)switch(n){case"A":r=[n,e[0],e[1],e[2],e[3],e[4],e[5]+o,e[6]+a];break;case"V":r=[n,e[0]+a];break;case"H":r=[n,e[0]+o];break;default:var r=T([n],e.map(function(t,e){return t+(e%2?a:o)}),!0)}else r=T([n],e,!0);var i=r.length;switch(n){case"Z":o=s,a=l;break;case"H":o=r[1];break;case"V":a=r[1];break;default:o=r[i-2],a=r[i-1],"M"===n&&(s=o,l=a)}return r})}function ha(t){if(ia(t))return Jo(t);for(var e,n,r,i,o,a,s,l=ca(t),u=E({},ta),c=l.length,h=0;h<c;h+=1){l[h][0],l[h]=(e=l[h],n=u,s=a=p=o=d=i=r=void 0,r=e[0],i=n.x1,d=n.y1,o=n.x2,p=n.y2,a=e.slice(1).map(Number),s=e,"TQ".includes(r)||(n.qx=null,n.qy=null),"H"===r?s=["L",e[1],d]:"V"===r?s=["L",i,e[1]]:"S"===r?(e=2*d-p,s=T(["C",n.x1=2*i-o,n.y1=e],a,!0)):"T"===r?(p=2*i-n.qx,o=2*d-n.qy,s=T(["Q",n.qx=p,n.qy=o],a,!0)):"Q"===r&&(e=a[0],i=a[1],n.qx=e,n.qy=i),s);var d=l[h],p=d.length;u.x1=+d[p-2],u.y1=+d[p-1],u.x2=+d[p-4]||u.x1,u.y2=+d[p-3]||u.y1}return l}function da(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function pa(t,e,n){var r=t[0],t=t[1];return[r+(e[0]-r)*n,t+(e[1]-t)*n]}function fa(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function ya(t,e,n,r,i){var o=fa([t,e],[n,r]),a={x:0,y:0};return{length:o,point:a="number"==typeof i?i<=0?{x:t,y:e}:o<=i?{x:n,y:r}:{x:(i=pa([t,e],[n,r],i/o))[0],y:i[1]}:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function ga(t,e,n,r){var t=[t,e],e=[n,r],i=pa(t,e,.5),o=pa(e,i,.5),a=pa(i,o,.5),s=pa(o,a,.5),l=pa(a,s,.5),t=T(T(T(T(T([],t,!0),i,!0),a,!0),l,!0),[.5],!1),i=ya.apply(void 0,t).point,a=T(T(T(T(T([],l,!0),s,!0),o,!0),e,!0),[0],!1),t=ya.apply(void 0,a).point;return[i.x,i.y,t.x,t.y,n,r]}function va(t,e){var n,r=t[0],i=t.slice(1).map(Number),o=i[0],a=i[1],s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=o,e.y=a,t;case"A":return n=T([s,l],i,!0),T(["C"],function t(e,n,r,i,o,a,s,l,u,c){var h=120*Math.PI/180,d=Math.PI/180*(+o||0),p=[],f=(c?(x=c[0],w=c[1],m=c[2],b=c[3]):(e=(g=da(e,n,-d)).x,n=g.y,1<(f=(y=(e-(l=(g=da(l,u,-d)).x))/2)*y/(r*r)+(g=(n-(u=g.y))/2)*g/(i*i))&&(r*=f=Math.sqrt(f),i*=f),f=r*r,v=i*i,m=(a=(a===s?-1:1)*Math.sqrt(Math.abs((f*v-f*g*g-v*y*y)/(f*g*g+v*y*y))))*r*g/i+(e+l)/2,b=a*-i*y/r+(n+u)/2,x=Math.asin(((n-b)/i*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((u-b)/i*Math.pow(10,9)>>0)/Math.pow(10,9)),x=e<m?Math.PI-x:x,w=l<m?Math.PI-w:w,x<0&&(x=2*Math.PI+x),w<0&&(w=2*Math.PI+w),s&&w<x&&(x-=2*Math.PI),!s&&x<w&&(w-=2*Math.PI)),w-x),y=(Math.abs(f)>h&&(v=w,g=l,a=u,w=x+h*(s&&x<w?1:-1),p=t(l=m+r*Math.cos(w),u=b+i*Math.sin(w),r,i,o,0,s,g,a,[w,v,m,b])),f=w-x,Math.cos(x)),h=Math.sin(x),o=Math.cos(w),s=Math.sin(w),g=Math.tan(f/4),a=4/3*r*g,v=4/3*i*g,m=[e,n],b=[e+a*h,n-v*y],x=[l+a*s,u-v*o],w=[l,u];if(b[0]=2*m[0]-b[0],b[1]=2*m[1]-b[1],c)return T(T(T(T([],b,!0),x,!0),w,!0),p,!0);for(var k=[],_=0,S=(p=T(T(T(T([],b,!0),x,!0),w,!0),p,!0)).length;_<S;_+=1)k[_]=_%2?da(p[_-1],p[_],d).y:da(p[_],p[_+1],d).x;return k}.apply(void 0,n),!0);case"Q":return e.qx=o,e.qy=a,n=T([s,l],i,!0),T(["C"],function(t,e,n,r,i,o){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}.apply(void 0,n),!0);case"L":return T(["C"],ga(s,l,o,a),!0);case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:T(["C"],ga(s,l,u,c),!0)}return t}function ma(t,e){var n;if(void 0===e&&(e=!1),ia(n=t)&&n.every(function(t){t=t[0];return"MC".includes(t)}))return n=Jo(t),e?[n,[]]:n;for(var r,i=ha(t),o=E({},ta),a=[],s="",l=i.length,u=[],c=0;c<l;c+=1){i[c]&&(s=i[c][0]),a[c]=s;var h=va(i[c],o),d=(i[c]=h,g=y=f=p=d=void 0,i),p=a,f=c;if(7<d[f].length){d[f].shift();for(var y=d[f],g=f;y.length;)p[f]="A",d.splice(g+=1,0,["C"].concat(y.splice(0,6)));d.splice(f,1)}l=i.length,"Z"===s&&u.push(c),r=(h=i[c]).length,o.x1=+h[r-2],o.y1=+h[r-1],o.x2=+h[r-4]||o.x1,o.y2=+h[r-3]||o.y1}return e?[i,u]:i}function ba(t,e){var n=t.x,t=t.y,r=e.x,e=e.y,i=n*r+t*e,o=Math.sqrt((Math.pow(n,2)+Math.pow(t,2))*(Math.pow(r,2)+Math.pow(e,2)));return(n*e-t*r<0?-1:1)*Math.acos(i/o)}function xa(t,e,n,r,i,o,a,s,l,u){for(var c="number"==typeof u,h=0,d=[m=t,b=e,h],p=[m,b],f={x:0,y:0},y=[{x:m,y:b}],g=(c&&u<=0&&(f={x:m,y:b}),0);g<=100;g+=1){var v,m=(v=function(t,e,n,r,i,o,a,s,l,u){var c=Math.abs,h=Math.sin,d=Math.cos,p=Math.sqrt,f=Math.PI,n=c(n),c=c(r),r=f/180*((i%360+360)%360);if(t===s&&e===l)return{x:t,y:e};if(0===n||0===c)return ya(t,e,s,l,u).point;var i=(t-s)/2,y=(e-l)/2,i={x:d(r)*i+h(r)*y,y:-h(r)*i+d(r)*y};return 1<(y=Math.pow(i.x,2)/Math.pow(n,2)+Math.pow(i.y,2)/Math.pow(c,2))&&(n*=p(y),c*=p(y)),y=(Math.pow(n,2)*Math.pow(c,2)-Math.pow(n,2)*Math.pow(i.y,2)-Math.pow(c,2)*Math.pow(i.x,2))/(Math.pow(n,2)*Math.pow(i.y,2)+Math.pow(c,2)*Math.pow(i.x,2)),o=(o!==a?1:-1)*p(y=y<0?0:y),p=n*i.y/c*o,y=-c*i.x/n*o,o=d(r)*p-h(r)*y+(t+s)/2,t=h(r)*p+d(r)*y+(e+l)/2,e=ba({x:1,y:0},s={x:(i.x-p)/n,y:(i.y-y)/c}),l=ba(s,{x:(-i.x-p)/n,y:(-i.y-y)/c}),!a&&0<l?l-=2*f:a&&l<0&&(l+=2*f),s=e+(l%=2*f)*u,p=n*d(s),i=c*h(s),{x:d(r)*p-h(r)*i+o,y:h(r)*p+d(r)*i+t}}(t,e,n,r,i,o,a,s,l,g/100)).x,b=v.y,y=y.concat({x:m,y:b});h+=fa(p,[m,b]),p=[m,b],c&&u<=h&&u>d[2]&&(v=(h-u)/(h-d[2]),f={x:p[0]*(1-v)+d[0]*v,y:p[1]*(1-v)+d[1]*v}),d=[m,b,h]}return{length:h,point:f=c&&h<=u?{x:s,y:l}:f,min:{x:Math.min.apply(Math,y.map(function(t){return t.x})),y:Math.min.apply(Math,y.map(function(t){return t.y}))},max:{x:Math.max.apply(Math,y.map(function(t){return t.x})),y:Math.max.apply(Math,y.map(function(t){return t.y}))}}}function wa(t,e,n,r,i,o,a,s,l){for(var u,c,h,d,p,f,y,g,v,m,b="number"==typeof l,x=t,w=e,k=0,_=[x,w,k],S=[x,w],E={x:0,y:0},T=[{x:x,y:w}],M=(b&&l<=0&&(E={x:x,y:w}),0);M<=30;M+=1)u=t,c=e,h=n,d=r,p=i,f=o,y=a,g=s,m=void 0,m=1-(v=M/30),u={x:Math.pow(m,3)*u+3*Math.pow(m,2)*v*h+3*m*Math.pow(v,2)*p+Math.pow(v,3)*y,y:Math.pow(m,3)*c+3*Math.pow(m,2)*v*d+3*m*Math.pow(v,2)*f+Math.pow(v,3)*g},T=T.concat({x:x=u.x,y:w=u.y}),k+=fa(S,[x,w]),S=[x,w],b&&l<=k&&l>_[2]&&(h=(k-l)/(k-_[2]),E={x:S[0]*(1-h)+_[0]*h,y:S[1]*(1-h)+_[1]*h}),_=[x,w,k];return{length:k,point:E=b&&k<=l?{x:a,y:s}:E,min:{x:Math.min.apply(Math,T.map(function(t){return t.x})),y:Math.min.apply(Math,T.map(function(t){return t.y}))},max:{x:Math.max.apply(Math,T.map(function(t){return t.x})),y:Math.max.apply(Math,T.map(function(t){return t.y}))}}}function ka(t,e,n,r,i,o,a){for(var s,l,u,c,h,d,p,f,y="number"==typeof a,g=t,v=e,m=0,b=[g,v,m],x=[g,v],w={x:0,y:0},k=[{x:g,y:v}],_=(y&&a<=0&&(w={x:g,y:v}),0);_<=30;_+=1)s=t,l=e,u=n,c=r,h=i,d=o,f=void 0,f=1-(p=_/30),s={x:Math.pow(f,2)*s+2*f*p*u+Math.pow(p,2)*h,y:Math.pow(f,2)*l+2*f*p*c+Math.pow(p,2)*d},k=k.concat({x:g=s.x,y:v=s.y}),m+=fa(x,[g,v]),x=[g,v],y&&a<=m&&a>b[2]&&(u=(m-a)/(m-b[2]),w={x:x[0]*(1-u)+b[0]*u,y:x[1]*(1-u)+b[1]*u}),b=[g,v,m];return{length:m,point:w=y&&m<=a?{x:i,y:o}:w,min:{x:Math.min.apply(Math,k.map(function(t){return t.x})),y:Math.min.apply(Math,k.map(function(t){return t.y}))},max:{x:Math.max.apply(Math,k.map(function(t){return t.x})),y:Math.max.apply(Math,k.map(function(t){return t.y}))}}}function _a(t,e){for(var n,r,i,o=ha(t),a="number"==typeof e,s=[],l=0,u=0,c=0,h=0,d=[],p=[],f=0,y={x:0,y:0},g=y,v=y,m=y,b=0,x=0,w=o.length;x<w;x+=1)s=(n="M"===(r=(i=o[x])[0]))?s:T([l,u],i.slice(1),!0),n?(g=y={x:c=i[1],y:h=i[2]},f=0,a&&e<.001&&(m=y)):"L"===r?(f=(n=ya.apply(void 0,T(T([],s,!1),[(e||0)-b],!1))).length,y=n.min,g=n.max,v=n.point):"A"===r?(f=(n=xa.apply(void 0,T(T([],s,!1),[(e||0)-b],!1))).length,y=n.min,g=n.max,v=n.point):"C"===r?(f=(n=wa.apply(void 0,T(T([],s,!1),[(e||0)-b],!1))).length,y=n.min,g=n.max,v=n.point):"Q"===r?(f=(n=ka.apply(void 0,T(T([],s,!1),[(e||0)-b],!1))).length,y=n.min,g=n.max,v=n.point):"Z"===r&&(f=(n=ya.apply(void 0,T(T([],s=[l,u,c,h],!1),[(e||0)-b],!1))).length,y=n.min,g=n.max,v=n.point),a&&b<e&&e<=b+f&&(m=v),p=T(T([],p,!0),[g],!1),d=T(T([],d,!0),[y],!1),b+=f,l=(n="Z"!==r?i.slice(-2):[c,h])[0],u=n[1];return{length:b,point:m=a&&b<=e?{x:l,y:u}:m,min:{x:Math.min.apply(Math,d.map(function(t){return t.x})),y:Math.min.apply(Math,d.map(function(t){return t.y}))},max:{x:Math.max.apply(Math,p.map(function(t){return t.x})),y:Math.max.apply(Math,p.map(function(t){return t.y}))}}}function Sa(t){var n,r=0,i=0;return ma(t).map(function(t){var e;return"M"!==t[0]?(n=function(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}.apply(void 0,T([r,i],t.slice(1),!1)),e=t.slice(-2),r=e[0],i=e[1],n):(r=t[1],i=t[2],0)}).reduce(function(t,e){return t+e},0)}function Ea(t){return 0<=Sa(t)}function Ta(t){return t.map(function(t,e,n){var r,i,o,a,n=e&&n[e-1].slice(-2).concat(t.slice(1)),s=e?wa.apply(void 0,n).length:0,n=e?s?(void 0===r&&(r=.5),n=(e=n).slice(0,2),i=e.slice(2,4),o=e.slice(4,6),e=e.slice(6,8),n=pa(n,i,r),i=pa(i,o,r),o=pa(o,e,r),a=pa(n,i,r),i=pa(i,o,r),r=pa(a,i,r),[["C"].concat(n,a,r),["C"].concat(i,o,e)]):[t,t]:[t];return{s:t,ss:n,l:s}})}function Ma(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function Oa(t,e){var n=Math.min.apply(Math,t),r=Math.min.apply(Math,e);return{x:n,y:r,width:Math.max.apply(Math,t)-n,height:Math.max.apply(Math,e)-r}}var Pa={box:function(t,e,n,r){return Oa([t,n],[e,r])},length:Ma,pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?Ma(t,e,i,o):(n-t)*(n-t)+(r-e)*(r-e)<a?Ma(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){n=[n-t,r-e];if((r=n)[0]===(a=[0,0])[0]&&r[1]===a[1])return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var r=[-n[1],n[0]],a=(mo(r,r),[i-t,o-e]);return Math.abs(a[0]*r[0]+a[1]*r[1])},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function Ca(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],a=Ma(i[0],i[1],o[0],o[1]);n.push({from:i,to:o,length:a}),e+=a}return{segments:n,totalLength:e}}var Aa={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return Oa(e,n)},length:function(t){var e=t;if(e.length<2)return 0;for(var n=0,r=0;r<e.length-1;r++){var i=e[r],o=e[r+1];n+=Ma(i[0],i[1],o[0],o[1])}return n},pointAt:function(t,e){var n=e;if(1<n||n<0||t.length<2)return null;var e=Ca(t),r=e.segments,i=e.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var l=r[s],u=l.from,c=l.to,l=l.length/i;if(o<=n&&n<=o+l){a=Pa.pointAt(u[0],u[1],c[0],c[1],(n-o)/l);break}o+=l}return a},pointDistance:function(t,e,n){for(var r=t,i=e,o=n,a=1/0,s=0;s<r.length-1;s++){var l=r[s],u=r[s+1],l=Pa.pointDistance(l[0],l[1],u[0],u[1],i,o);l<a&&(a=l)}return a},tangentAngle:function(t,e){var n=e;if(1<n||n<0||t.length<2)return 0;for(var r=(t=Ca(t)).segments,i=t.totalLength,o=0,a=0,s=0;s<r.length;s++){var l=r[s],u=l.from,c=l.to,l=l.length/i;if(o<=n&&n<=o+l){a=Math.atan2(c[1]-u[1],c[0]-u[0]);break}o+=l}return a}};var Na,La,Ia=function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0},H=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ra=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},ja=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],y=t[14],t=t[15];return(e*a-n*o)*(h*t-d*y)-(e*s-r*o)*(c*t-d*f)+(e*l-i*o)*(c*y-h*f)+(n*s-r*a)*(u*t-d*p)-(n*l-i*a)*(u*y-h*p)+(r*l-i*s)*(u*f-c*p)},Da=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],y=e[13],g=e[14],e=e[15],v=n*s-r*a,m=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,k=i*u-o*l,_=c*y-h*f,S=c*g-d*f,E=c*e-p*f,T=h*g-d*y,M=h*e-p*y,O=d*e-p*g,P=v*O-m*M+b*T+x*E-w*S+k*_;return P?(P=1/P,t[0]=(s*O-l*M+u*T)*P,t[1]=(i*M-r*O-o*T)*P,t[2]=(y*k-g*w+e*x)*P,t[3]=(d*w-h*k-p*x)*P,t[4]=(l*E-a*O-u*S)*P,t[5]=(n*O-i*E+o*S)*P,t[6]=(g*b-f*k-e*m)*P,t[7]=(c*k-d*b+p*m)*P,t[8]=(a*M-s*E+u*_)*P,t[9]=(r*E-n*M-o*_)*P,t[10]=(f*w-y*b+e*v)*P,t[11]=(h*b-c*w-p*v)*P,t[12]=(s*S-a*T-l*_)*P,t[13]=(n*T-r*S+i*_)*P,t[14]=(y*m-f*x-g*v)*P,t[15]=(c*x-h*m+d*v)*P,t):null},Ba=function(t,e){{var n,r,i,o,a,s;t===e?(n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15])}return t},Fa={length:function(t){var e=t[0],n=t[1],t=t[2];return Math.sqrt(e*e+n*n+t*t)},normalize:function(t,e){var n=e[0],r=e[1],i=e[2],n=n*n+r*r+i*i;0<n&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n);return t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},cross:function(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[0],a=n[1],n=n[2];return t[0]=i*n-e*a,t[1]=e*o-r*n,t[2]=r*a-i*o,t}},za=H(),Va=H(),Ga=[0,0,0,0],y=[[0,0,0],[0,0,0],[0,0,0]],Ha=[0,0,0];function Wa(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}let Ua=1;const Ya="object"==typeof self&&self.self==self?self:"object"==typeof Un&&Un.global==Un?Un:{},qa=Date.now();let Xa={},Za=Date.now();const Ka=t=>"string"!=typeof t?t=>{if("function"!=typeof t)throw new TypeError(t+" is not a function");const n=Date.now(),e=n-Za,r=16<e?0:16-e,i=Ua++;return Xa[i]=t,1<Object.keys(Xa).length||setTimeout(()=>{Za=n;const e=Xa;Xa={},Object.keys(e).forEach(t=>e[t](Ya.performance&&"function"==typeof Ya.performance.now?Ya.performance.now():Date.now()-qa))},r),i}:""===t?Ya.requestAnimationFrame:Ya[t+"RequestAnimationFrame"],$a=((t,e)=>{let n=0;for(;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}})(["","webkit","moz","ms","o"],t=>!!Ka(t)),Ja=Ka($a),Qa="string"!=typeof(pt=$a)?t=>{delete Xa[t]}:""===pt?Ya.cancelAnimationFrame:Ya[pt+"CancelAnimationFrame"]||Ya[pt+"CancelRequestAnimationFrame"];function S(){S=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function ts(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function es(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){ts(r,e,n,i,o,"next",t)}function o(t){ts(r,e,n,i,o,"throw",t)}i(void 0)})}}function ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rs(t,e,n){e&&ns(t.prototype,e),n&&ns(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function is(){return(is=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function g(t,e){t.prototype=Object.create(e.prototype),os(t.prototype.constructor=t,e)}function os(t,e){return(os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function as(t,e,n){return(as=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){}}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);e=new(Function.bind.apply(t,r));return n&&os(e,n.prototype),e}).apply(null,arguments)}function ss(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}function ls(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function us(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cs(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return us(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?us(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Ya.requestAnimationFrame=Ja,Ya.cancelAnimationFrame=Qa,"undefined"!=typeof module&&module.exports&&(module.exports={requestAnimationFrame:Ja,cancelAnimationFrame:Qa}),(J=Na=Na||{}).Layout="layout",J.IntrinsicSizes="intrinsic-sizes",(l=La=La||{}).LAYOUT="display",l.LEFT="left",l.TOP="top",l.BOTTOM="bottom",l.RIGHT="right",l.WIDTH="width",l.HEIGHT="height",l.MIN_WIDTH="minWidth",l.MAX_WIDTH="maxWidth",l.MIN_HEIGHT="minHeight",l.MAX_HEIGHT="maxHeight",l.BOX_SIZING="boxSizing",l.PADDING="padding",l.PADDING_TOP="paddingTop",l.PADDING_BOTTOM="paddingBottom",l.PADDING_START="paddingLeft",l.PADDING_END="paddingRight",l.MARGIN="margin",l.MARGIN_TOP="marginTop",l.MARGIN_BOTTOM="marginBottom",l.MARGIN_START="marginLeft",l.MARGIN_END="marginRight",l.BORDER="border",l.BORDER_TOP="borderTop",l.BORDER_BOTTOM="borderBottom",l.BORDER_START="borderLeft",l.BORDER_END="borderRight",l.FLEX_DIRECTION="flexDirection",l.FLEX_WRAP="flexWrap",l.FLEX_FLOW="flexFlow",l.ALIGN_ITEMS="alignItems",l.ALIGN_CONTENT="alignContent",l.JUSTIFY_CONTENT="justifyContent",l.FLEX="flex",l.ALIGN_SELF="alignSelf",l.FLEX_SHRINK="flexShrink",l.FLEX_BASIS="flexBasis",l.FLEX_GROW="flexGrow",l.OFFSET_WIDTH="offsetWidth",l.OFFSET_HEIGHT="offsetHeight",l.ORDER="order";var hs=1,ye=function(){function t(t){void 0===t&&(t=new Map),this.id=void 0,this.style=void 0,this.dirty=void 0,this.parent=void 0,this.children=void 0,this.internalIntrisicSizes=void 0,this.computedLayout=void 0,this.measureFn=void 0,this.id=hs++,this.style=t,this.parent=void 0,this.children=[],this.dirty=!1}var e=t.prototype;return e.setMeasure=function(t){this.measureFn=t},e.setIntrisicSizes=function(t){this.internalIntrisicSizes=t},e.addChild=function(t){var e;null!=(e=this.children)&&e.push(t)},e.insertChild=function(t,e){this.children.splice(t,0,e)},e.removeChild=function(e){var t=null==(t=this.children)?void 0:t.findIndex(function(t){return t.id===e.id});this.removeChildAtIndex(t)},e.removeChildAtIndex=function(t){this.children.splice(t,1)},e.replaceChildAtIndex=function(t,e){this.children.splice(t,1,e)},e.setStyle=function(t,e){this.style.set(t,e)},e.getStyle=function(){for(var n=this,r=new Map,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(function(t){var e=n.style.get(t);e&&r.set(t,e)}),r},e.getAllStyle=function(){return this.style},e.markDirty=function(){this.dirty=!0},e.idDirty=function(){return this.dirty},e.getSize=function(){var t;return{width:null!=(t=null==(t=this.style.get(La.WIDTH))?void 0:t.value)?t:0,height:null!=(t=null==(t=this.style.get(La.HEIGHT))?void 0:t.value)?t:0}},e.computeLayout=function(){var t=es(S().mark(function t(){var e;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getSize(),t.next=3,Gp.computeLayout(this,{availableInlineSize:e.width,availableBlockSize:e.height,fixedInlineSize:e.width,fixedBlockSize:e.height,percentageInlineSize:e.width,percentageBlockSize:e.height,data:void 0});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.setComputedLayout=function(t){this.computedLayout=t},e.getComputedLayout=function(){return this.computedLayout},e.getAllComputedLayout=function(){},e.toString=function(){return"LayoutObject "+this.id},rs(t,[{key:"intrisicSizes",get:function(){return this.internalIntrisicSizes}},{key:"childCount",get:function(){return this.children.length}}]),t}(),ds=d.defineToken("LayoutContextFactory"),ps=d.defineToken("LayoutContextOptions"),fs=0,ys=function(){function t(t){this.options=void 0,this.contextId=void 0,this.workQueue=[],this.mode=void 0,this.layoutChildrenFactory=void 0,this.fragmentResultFactory=void 0,this.layoutFragmentFactory=void 0,this.options=t,this.contextId=""+fs++,this.mode=t.mode,this.layoutChildrenFactory=t.layoutChildrenFactory,this.fragmentResultFactory=t.fragmentResultFactory,this.layoutFragmentFactory=t.layoutFragmentFactory}var e=t.prototype;return e.appendWorkTask=function(t){this.workQueue.push(t)},e.clearWorkQueue=function(){this.workQueue=[]},t}(),ys=t([p(),j(0,f(ps)),e("design:paramtypes",[Object])],ys),gs=d.defineToken("FragmentResultFactory"),vs=d.defineToken("FragmentResultOptions"),ms=d.defineToken("contextNode"),bs=function(t,e,n){this._layoutContext=void 0,this._node=void 0,this.options=void 0,this.layoutContext=void 0,this.inlineSize=void 0,this.blockSize=void 0,this.node=void 0,this.childFragments=void 0,this.data=void 0,this._layoutContext=t,this._node=e,this.options=n,this.layoutContext=t,this.inlineSize=null==n?void 0:n.inlineSize,this.blockSize=null==n?void 0:n.blockSize,this.childFragments=null==n?void 0:n.childFragments,this.data=n.data,this.node=e};function xs(t){if(!t)throw new Error}function ws(t,e){if(t===e)throw new Error}function ks(t){return void 0===t}function M(t){return null==t}function _s(t){return"number"==typeof t}function Ss(t){return"function"==typeof t}function Es(t){return"boolean"==typeof t}function Ts(t){return"[object Object]"===Object.prototype.toString.call(t)}var bs=t([Er(),j(0,f(ys)),j(1,f(ms)),j(2,f(vs)),e("design:paramtypes",[ys,ye,Object])],bs),Ms={},Os=0;function Ps(b,e,x,n){if(!(0<=b&&b<=1&&0<=x&&x<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===e&&x===n)return function(t){return t};for(var w=new(Is?Float32Array:Array)(11),t=0;t<11;++t)w[t]=Bs(.1*t,b,x);function r(t){for(var e=0,n=1;10!==n&&w[n]<=t;++n)e+=.1;var r=e+.1*((t-w[--n])/(w[n+1]-w[n])),i=Fs(r,b,x);if(.001<=i){for(var o=t,a=r,s=b,l=x,u=0;u<As;++u){var c=Fs(a,s,l);if(0===c)return a;a-=(Bs(a,s,l)-o)/c}return a}if(0===i)return r;for(var h,d,p=t,f=e,y=e+.1,g=b,v=x,m=0;0<(h=Bs(d=f+(y-f)/2,g,v)-p)?y=d:f=d,Math.abs(h)>Ns&&++m<Ls;);return d}return function(t){return 0===t||1===t?t:Bs(r(t),e,n)}}var Cs="undefined"!=typeof window&&void 0!==window.document,As=4,Ns=1e-7,Ls=10,Is="function"==typeof Float32Array,Rs=function(t,e){return 1-3*e+3*t},js=function(t,e){return 3*e-6*t},Ds=function(t){return 3*t},Bs=function(t,e,n){return((Rs(e,n)*t+js(e,n))*t+Ds(e))*t},Fs=function(t,e,n){return 3*Rs(e,n)*t*t+2*js(e,n)*t+Ds(e)};function zs(t,e,n){return n?Math.min(t,e)===t?e:Math.max(t,n)===t?n:t:Math.max(t,e)===e?t:e}function Vs(t){return void 0===t?0:360<t||t<-360?t%360:t}function Gs(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),_s(t)?_(t,e,n):Array.isArray(t)&&3===t.length?Bi(t):_(t[0],t[1]||e,t[2]||n)}function Hs(t){return t*(Math.PI/180)}function Ws(t){return t*(180/Math.PI)}function Us(t,e){return 16===e.length?(n=t,r=e,a=.5*Math.PI,s=(u=Oi(v(),r))[0],l=u[1],u=u[2],(c=Math.asin(-r[2]/s))<a?-a<c?(i=Math.atan2(r[6]/l,r[10]/u),o=Math.atan2(r[1]/s,r[0]/s)):(o=0,i=-Math.atan2(r[4]/l,r[5]/l)):(o=0,i=Math.atan2(r[4]/l,r[5]/l)),n[0]=i,n[1]=c,n[2]=o,n):(a=t,s=(u=e)[0],r=u[1],l=u[2],u=u[3],.499995*(n=s*s+(i=r*r)+(c=l*l)+(o=u*u))<(t=s*u-r*l)?(a[0]=Math.PI/2,a[1]=2*Math.atan2(r,s),a[2]=0):t<-.499995*n?(a[0]=-Math.PI/2,a[1]=2*Math.atan2(r,s),a[2]=0):(a[0]=Math.asin(2*(s*l-u*r)),a[1]=Math.atan2(2*(s*u+r*l),1-2*(c+o)),a[2]=Math.atan2(2*(s*r+l*u),1-2*(i+c))),a);var n,r,i,o,a,s,l,u,c}function Ys(t,e,n,r,i){var o,a,s,l,u=Math.cos(t),t=Math.sin(t);return o=r*u,a=i*t,r=-r*t,t=i*u,u=i=0,e=e,n=n,s=1,(l=new hi(9))[0]=o,l[1]=a,l[2]=i,l[3]=r,l[4]=t,l[5]=u,l[6]=e,l[7]=n,l[8]=s,l}function qs(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i);e*i-n*r<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(i*=1/a);r=Ws(Math.atan2(n,e));return[t[6],t[7],o,a,r]}function Xs(t){return Math.pow(t,2)}function Zs(t){return Math.pow(t,3)}function Ks(t){return Math.pow(t,4)}function $s(t){return Math.pow(t,5)}function Js(t){return Math.pow(t,6)}function Qs(t){return 1-Math.cos(t*Math.PI/2)}function tl(t){return 1-Math.sqrt(1-t*t)}function el(t){return t*t*(3*t-2)}function nl(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}function rl(t,e){var n=(e=e=void 0===e?[]:e)[0],e=void 0===(e=e[1])?.5:e,n=zs(Number(void 0===n?1:n),1,10),e=zs(Number(e),.1,2);return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-e/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/e)}function il(t,e,n){var r=(e=e=void 0===e?[]:e)[0],i=void 0===(i=e[1])?100:i,o=void 0===(o=e[2])?10:o,e=void 0===(e=e[3])?0:e,r=zs(void 0===r?1:r,.1,1e3),i=zs(i,.1,1e3),o=zs(o,.1,1e3),e=zs(e,.1,1e3),a=Math.sqrt(i/r),i=(o=o/(2*Math.sqrt(i*r)))<1?a*Math.sqrt(1-o*o):0,r=o<1?(o*a-e)/i:-e+a,e=n?n*t/1e3:t,e=o<1?Math.exp(-e*o*a)*(+Math.cos(i*e)+r*Math.sin(i*e)):(1+r*e)*Math.exp(-e*a);return 0===t||1===t?t:1-e}function ol(t,e){var e=e=void 0===e?[]:e,n=void 0===(n=e[0])?10:n;return("start"==e[1]?Math.ceil:Math.floor)(zs(t,0,1)*n)/n}function al(t,e){var n=(e=e=void 0===e?[]:e)[0],r=e[1],i=e[2],e=e[3];return Ps(n,r,i,e)(t)}function sl(r){return function(t,e,n){return 1-r(1-t,e=void 0===e?[]:e,n)}}function ll(r){return function(t,e,n){return void 0===e&&(e=[]),t<.5?r(2*t,e,n)/2:1-r(-2*t+2,e,n)/2}}function ul(r){return function(t,e,n){return void 0===e&&(e=[]),t<.5?(1-r(1-2*t,e,n))/2:(r(2*t-1,e,n)+1)/2}}function cl(){var n=this;this.resolve=void 0,this.reject=void 0,this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var c=Ps(.42,0,1,1),hl={steps:ol,"step-start":function(t){return ol(t,[1,"start"])},"step-end":function(t){return ol(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":al,ease:function(t){return al(t,[.25,.1,.25,1])},in:c,out:sl(c),"in-out":ll(c),"out-in":ul(c),"in-quad":Xs,"out-quad":sl(Xs),"in-out-quad":ll(Xs),"out-in-quad":ul(Xs),"in-cubic":Zs,"out-cubic":sl(Zs),"in-out-cubic":ll(Zs),"out-in-cubic":ul(Zs),"in-quart":Ks,"out-quart":sl(Ks),"in-out-quart":ll(Ks),"out-in-quart":ul(Ks),"in-quint":$s,"out-quint":sl($s),"in-out-quint":ll($s),"out-in-quint":ul($s),"in-expo":Js,"out-expo":sl(Js),"in-out-expo":ll(Js),"out-in-expo":ul(Js),"in-sine":Qs,"out-sine":sl(Qs),"in-out-sine":ll(Qs),"out-in-sine":ul(Qs),"in-circ":tl,"out-circ":sl(tl),"in-out-circ":ll(tl),"out-in-circ":ul(tl),"in-back":el,"out-back":sl(el),"in-out-back":ll(el),"out-in-back":ul(el),"in-bounce":nl,"out-bounce":sl(nl),"in-out-bounce":ll(nl),"out-in-bounce":ul(nl),"in-elastic":rl,"out-elastic":sl(rl),"in-out-elastic":ll(rl),"out-in-elastic":ul(rl),spring:il,"spring-in":il,"spring-out":sl(il),"spring-in-out":ll(il),"spring-out-in":ul(il)},dl=function(t){return("-"===(t=(t=t).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})).charAt(0)?t.substring(1):t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()};function pl(t,e){if(Cs)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var fl={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};yl={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},gl="";var yl,gl,vl=function(t){return gl=t,bl()};function ml(t){throw new Error(gl+": "+t)}function bl(){var t=Pl(xl);return 0<gl.length&&ml("Invalid input not EOF"),t}function xl(){return wl("linear-gradient",yl.linearGradient,_l)||wl("repeating-linear-gradient",yl.repeatingLinearGradient,_l)||wl("radial-gradient",yl.radialGradient,Sl)||wl("repeating-radial-gradient",yl.repeatingRadialGradient,Sl)||wl("conic-gradient",yl.conicGradient,Sl)}function wl(n,t,r){return kl(t,function(t){var e=r();return e&&!Rl(yl.comma)&&ml("Missing comma before color stops"),{type:n,orientation:e,colorStops:Pl(Cl)}})}function kl(t,e){t=Rl(t);if(t)return Rl(yl.startCall)||ml("Missing ("),e=e(t),Rl(yl.endCall)||ml("Missing )"),e}function _l(){return Il("directional",yl.sideOrCorner,1)||Il("angular",yl.angleValue,1)}function Sl(){var t,e,n=El();return n&&((t=[]).push(n),e=gl,Rl(yl.comma)&&((n=El())?t.push(n):gl=e)),t}function El(){var t,e=function(){var t=Il("shape",/^(circle)/i,0);t&&(t.style=Ll()||Tl());return t}()||function(){var t=Il("shape",/^(ellipse)/i,0);t&&(t.style=Nl()||Tl());return t}();return e?e.at=Ml():(t=Tl())?(e=t,(t=Ml())&&(e.at=t)):(t=Ol())&&(e={type:"default-radial",at:t}),e}function Tl(){return Il("extent-keyword",yl.extentKeywords,1)}function Ml(){var t;if(Il("position",/^at/,0))return(t=Ol())||ml("Missing positioning value"),t}function Ol(){var t={x:Nl(),y:Nl()};if(t.x||t.y)return{type:"position",value:t}}function Pl(t){var e=t(),n=[];if(e)for(n.push(e);Rl(yl.comma);)(e=t())?n.push(e):ml("One extra comma");return n}function Cl(){var t=Il("hex",yl.hexColor,1)||kl(yl.rgbaColor,function(){return{type:"rgba",value:Pl(Al)}})||kl(yl.rgbColor,function(){return{type:"rgb",value:Pl(Al)}})||Il("literal",yl.literalColor,0);return t||ml("Expected color definition"),t.length=Nl(),t}function Al(){return Rl(yl.number)[1]}function Nl(){return Il("%",yl.percentageValue,1)||Il("position-keyword",yl.positionKeywords,1)||Ll()}function Ll(){return Il("px",yl.pixelValue,1)||Il("em",yl.emValue,1)}function Il(t,e,n){e=Rl(e);if(e)return{type:t,value:e[n]}}function Rl(t){var e=/^[\n\r\t\s]+/.exec(gl),e=(e&&jl(e[0].length),t.exec(gl));return e&&jl(e[0].length),e}function jl(t){gl=gl.substring(t)}(a=b=b||{}).COORDINATE="<coordinate>",a.COLOR="<color>",a.PAINT="<paint>",a.NUMBER="<number>",a.ANGLE="<angle>",a.OPACITY_VALUE="<opacity-value>",a.SHADOW_BLUR="<shadow-blur>",a.LENGTH="<length>",a.PERCENTAGE="<percentage>",a.LENGTH_PERCENTAGE="<length> | <percentage>",a.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",a.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",a.LIST_OF_POINTS="<list-of-points>",a.PATH="<path>",a.FILTER="<filter>",a.Z_INDEX="<z-index>",a.OFFSET_PATH="<offset-path>",a.OFFSET_DISTANCE="<offset-distance>",a.CLIP_PATH="<clip-path>",a.TRANSFORM="<transform>",a.TRANSFORM_ORIGIN="<transform-origin>",a.TEXT="<text>",a.TEXT_TRANSFORM="<text-transform>";function Dl(t){return t}var Bl=d.defineToken("StyleValueRegistry");function Fl(n,r){return function(t){if(1<=t)return 1;var e=1/n;return(t+=r*e)-t%e}}var st="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",zl=new RegExp("cubic-bezier\\("+st+","+st+","+st+","+st+"\\)"),Vl=/steps\(\s*(\d+)\s*\)/,Gl=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Hl(t){var e=zl.exec(t);if(e)return Ps.apply(void 0,e.slice(1).map(Number));e=Vl.exec(t);if(e)return Fl(Number(e[1]),0);e=Gl.exec(t);return e?Fl(Number(e[1]),{start:1,middle:.5,end:0}[e[2]]):hl[dl(t)]||hl.linear}function Wl(t){return Math.abs((0!==(e=t).duration&&0!==e.iterations?("auto"===e.duration?0:Number(e.duration))*(null!=(e=e.iterations)?e:1):0)/(t.playbackRate||1));var e}var Ul=0,Yl=1,ql=2,Xl=3;function Zl(t,e,n){var r=function(t,e,n){if(null===e)return Ul;var r=n.endTime;return e<Math.min(n.delay,r)?Yl:e>=Math.min(n.delay+t+n.endDelay,r)?ql:Xl}(t,e,n),t=function(t,e,n,r,i){switch(r){case Yl:return"backwards"===e||"both"===e?0:null;case Xl:return n-i;case ql:return"forwards"===e||"both"===e?t:null;case Ul:return null}}(t,n.fill,e,r,n.delay);if(null===t)return null;var i,o,e="auto"===n.duration?0:n.duration,a=(o=e,a=r,s=n.iterations,i=t,l=n.iterationStart,0===o?a!==Yl&&(l+=s):l+=i/o,l),s=(s=a,i=n.iterationStart,o=r,l=n.iterations,t=t,e=e,i=0!==(i=s===1/0?i%1:s%1)||o!==ql||0===l||0===t&&0!==e?i:1),e=(o=n.iterations,l=s,t=a,r===ql&&o===1/0?1/0:1===l?Math.floor(t)-1:Math.floor(t)),l=(i=n.direction,a=e,r=s,"normal"!==(o=i)&&"reverse"!==i&&(a=a,"alternate-reverse"===i&&(a+=1),o=a!==1/0&&a%2!=0?"reverse":"normal"),"normal"===o?r:1-r);return n.currentIteration=e,n.progress=l,n.easingFunction(l)}function Kl(a,s){if("function"!=typeof a||null!=s&&"function"!=typeof s)throw new TypeError("Expected a function");function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s?s.apply(this,e):e[0],i=l.cache;if(i.has(r))return i.get(r);var o=a.apply(this,e);return l.cache=i.set(r,o)||i,o}return l.cache=new(Kl.Cache||Map),l}Kl.Cache=Map;var $l=Kl(function(t){return(t=void 0===t?"":t).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})});function Jl(t){return!M(t)&&"string"==typeof t}function Ql(t,e,n){var o=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r]){var o;tu(i)&&(o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:Hl(t[r].easing)||e.easingFunction,value:t[r][i]},n[i]=n[i]||[],n[i].push(o))}return n}(t,e),a=function(t,e){var n,r=[];for(n in t)for(var i=t[n],o=0;o<i.length-1;o++){var a=o,s=o+1,l=i[a].computedOffset,u=i[s].computedOffset,c=l,h=u;0===o&&(c=-1/0,0===u&&(s=a)),o===i.length-2&&(h=1/0,1===l&&(a=s)),r.push({applyFrom:c,applyTo:h,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:n,interpolation:function(t,e,n,r){var i=e,o=n,a=Xr.get(Bl),t=a.getMetadata(t);if(t&&t.syntax&&t.interpolable){a=a.getPropertySyntax(t.syntax);if(a){a.parser&&(i=a.parser(e,r),o=a.parser(n,r));var s,t=a.mixer(i,o,r);if(t)return s=eu.apply(void 0,t),function(t){return 0===t?e:1===t?n:s(t)}}}return eu(!1,!0,function(t){return t?n:e})}(n,i[a].value,i[s].value,e)})}return r.sort(function(t,e){return t.startOffset-e.startOffset}),r}(o,n);return function(r,i){if(null!==i)a.filter(function(t){return i>=t.applyFrom&&i<t.applyTo}).forEach(function(t){var e=i-t.startOffset,n=t.endOffset-t.startOffset,e=0==n?0:t.easingFunction(e/n);r.style[t.property]=t.interpolation(e)});else for(var t in o)tu(t)&&(r.style[t]=null)}}function tu(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var eu=function(e,n,r){return function(t){return r(function t(e,n,r){if("number"==typeof e&&"number"==typeof n)return e*(1-r)+n*r;if("boolean"==typeof e&&"boolean"==typeof n||"string"==typeof e&&"string"==typeof n)return r<.5?e:n;if(Array.isArray(e)&&Array.isArray(n)&&e.length===n.length){for(var i=[],o=0;o<e.length;o++)i.push(t(e[o],n[o],r));return i}throw new Error("Mismatched interpolation arguments "+e+":"+n)}(e,n,t))}};var O,nu={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign",values:{middle:"center"}},src:{alias:"img"}},ru=Kl(function(t){var t=$l(t),e=nu[t];return[t=(null==e?void 0:e.alias)||t,e]});function iu(t,e){var t=ru(t),n=t[0],t=t[1];return[n,Jl(e)&&(null==t||null==(n=t.values)?void 0:n[e])||e]}(r=O=O||{}).GROUP="g",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh";var ou=d.defineToken("CanvasConfig");function au(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,i=e*i,a=n-t,t=n+t,s=r-e,e=r+e;return[["M",a,r],["C",a,r-i,n-o,s,n,s],["C",n+o,s,t,r-i,t,r],["C",t,r+i,n+o,e,n,e],["C",n-o,e,a,r+i,a,r],["Z"]]}function su(t,e){void 0===e&&(e=!0);var n,r,i,o,a,s,l,u,c,h,d=[];switch(t.nodeName){case O.LINE:var p=t.parsedStyle,f=p.x1,y=p.y1,g=p.x2,p=p.y2,d=[["M",f.value,y.value],["L",g.value,p.value]];break;case O.CIRCLE:var f=t.parsedStyle,y=f.r,g=f.cx,p=f.cy;d=au(y.value,y.value,g.value,p.value);break;case O.ELLIPSE:f=t.parsedStyle,y=f.rx,g=f.ry,p=f.cx,f=f.cy;d=au(y.value,g.value,p.value,f.value);break;case O.POLYLINE:case O.POLYGON:y=t.parsedStyle.points;g=y.points,p=t.nodeName===O.POLYGON,g=g.map(function(t,e){return[0===e?"M":"L",t[0],t[1]]}),p&&g.push(["Z"]),d=g;break;case O.RECT:var f=t.parsedStyle,v=f.width,m=f.height,y=f.x,b=f.y,f=f.radius,x=f&&f.some(function(t){return 0!==t.value});n=v.value,r=m.value,y=y.value,b=b.value,x=x&&f.map(function(t){return zs(t.value,0,Math.min(Math.abs(v.value)/2,Math.abs(m.value)/2))}),d=x?(o=(f=0<n?1:-1)+(k=0<r?1:-1)!=0?1:0,[["M",f*(i=x[0])+y,b],["L",n-f*(w=x[1])+y,b],w?["A",w,w,0,0,o,n+y,k*w+b]:null,["L",n+y,r-k*(w=x[2])+b],w?["A",w,w,0,0,o,n+y-f*w,r+b]:null,["L",y+f*(w=x[3]),r+b],w?["A",w,w,0,0,o,y,r+b-k*w]:null,["L",y,k*i+b],i?["A",i,i,0,0,o,f*i+y,b]:null,["Z"]].filter(function(t){return t})):[["M",y,b],["L",y+n,b],["L",y+n,b+r],["L",y,b+r],["Z"]];break;case O.PATH:var x=t.parsedStyle.path,w=x.curve,k=x.zCommandIndexes;d=[].concat(w),k.forEach(function(t,e){d.splice(t+e,1,["Z"])})}if(d.length)return a=d,s=t,(l=void 0===(l=e)?!0:l)&&(u=s.getLocalTransform()),e=(s=s.parsedStyle).defX,c=void 0===e?0:e,h=void 0===(e=s.defY)?0:e,a.reduce(function(t,e){var n,r,i,o="";return"M"===e[0]||"L"===e[0]?(i=_(e[1]-c,e[2]-h,0),l&&Xi(i,i,u),o=""+e[0]+i[0]+","+i[1]):"Z"===e[0]?o=e[0]:"C"===e[0]?(i=_(e[1]-c,e[2]-h,0),n=_(e[3]-c,e[4]-h,0),r=_(e[5]-c,e[6]-h,0),l&&(Xi(i,i,u),Xi(n,n,u),Xi(r,r,u)),o=""+e[0]+i[0]+","+i[1]+","+n[0]+","+n[1]+","+r[0]+","+r[1]):"A"===e[0]&&(i=_(e[6]-c,e[7]-h,0),l&&Xi(i,i,u),o=""+e[0]+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+","+i[0]+","+i[1]),t+o},"")}function lu(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)}function uu(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)}function cu(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)}function hu(t){return bu.setup(this,t),bu.create(t)}function du(t){return wu.setup(this,t),wu.create(t)}function pu(){throw new Error("tapAsync is not supported on a SyncHook")}function fu(){throw new Error("tapPromise is not supported on a SyncHook")}function yu(t){return _u.setup(this,t),_u.create(t)}function gu(){throw new Error("tapAsync is not supported on a SyncWaterfallHook")}function vu(){throw new Error("tapPromise is not supported on a SyncWaterfallHook")}function mu(t){return Eu.setup(this,t),Eu.create(t)}var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=void 0),this.name=void 0,this.taps=void 0,this.promise=void 0,this._promise=void 0,this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=lu,this.call=lu,this._callAsync=uu,this.callAsync=uu,this._promise=cu,this.promise=cu,this._x=void 0}var e=t.prototype;return e.compile=function(t){throw new Error("Abstract: should be overridden")},e._createCall=function(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})},e._tap=function(t,e,n){if("string"==typeof e)e={name:e.trim()};else if("object"!=typeof e||null===e)throw new Error("Invalid tap options");if("string"!=typeof e.name||""===e.name)throw new Error("Missing name for tap");e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)},e.tap=function(t,e){this._tap("sync",t,e)},e.tapAsync=function(t,e){this._tap("async",t,e)},e.tapPromise=function(t,e){this._tap("promise",t,e)},e._runRegisterInterceptors=function(t){for(var e=cs(this.interceptors);!(n=e()).done;){var n=n.value;!n.register||void 0!==(n=n.register(t))&&(t=n)}return t},e.withOptions=function(e){function n(t){return Object.assign({},e,"string"==typeof t?{name:t}:t)}var r=this;return{name:this.name,tap:function(t,e){return r.tap(n(t),e)},tapAsync:function(t,e){return r.tapAsync(n(t),e)},tapPromise:function(t,e){return r.tapPromise(n(t),e)},isUsed:function(){return r.isUsed()},withOptions:function(t){return r.withOptions(n(t))}}},e.isUsed=function(){return 0<this.taps.length||0<this.interceptors.length},e._resetCompilation=function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise},e._insert=function(t){this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));for(var e,n=0,r=("number"==typeof t.stage&&(n=t.stage),this.taps.length);0<r;){r--;var i=this.taps[r],o=(this.taps[r+1]=i).stage||0;if(e){if(e.has(i.name)){e.delete(i.name);continue}if(0<e.size)continue}if(!(n<o)){r++;break}}this.taps[r]=t},t}(),G=function(){function t(t){this.config=t,this.options=void 0,this._args=void 0}var e=t.prototype;return e.create=function(t){var e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"throw "+t+";\n"},onResult:function(t){return"return "+t+";\n"},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"_callback("+t+");\n"},onResult:function(t){return"_callback(null, "+t+");\n"},onDone:function(){return"_callback();\n"}}));break;case"promise":var n=!1,r=this.contentWithInterceptors({onError:function(t){return n=!0,"_error("+t+");\n"},onResult:function(t){return"_resolve("+t+");\n"},onDone:function(){return"_resolve();\n"}}),i="",i=(i+='"use strict";\n')+this.header()+"return new Promise((function(_resolve, _reject) {\n";n&&(i+="var _sync = true;\nfunction _error(_err) {\nif(_sync)\n_resolve(Promise.resolve().then((function() { throw _err; })));\nelse\n_reject(_err);\n};\n"),i+=r,n&&(i+="_sync = false;\n"),i+="}));\n",e=new Function(this.args(),i)}return this.deinit(),e},e.setup=function(t,e){t._x=e.taps.map(function(t){return t.fn})},e.init=function(t){this.options=t,this._args=t.args.slice()},e.deinit=function(){this.options=void 0,this._args=void 0},e.contentWithInterceptors=function(t){var r=this;if(0<this.options.interceptors.length){for(var i=t.onError,o=t.onResult,n=t.onDone,e="",a=0;a<this.options.interceptors.length;a++){var s=this.options.interceptors[a];s.call&&(e+=this.getInterceptor(a)+".call("+this.args({before:s.context?"_context":void 0})+");\n")}return e+=this.content(Object.assign(t,{onError:i&&function(t){for(var e="",n=0;n<r.options.interceptors.length;n++)r.options.interceptors[n].error&&(e+=r.getInterceptor(n)+".error("+t+");\n");return e+=i(t)},onResult:o&&function(t){for(var e="",n=0;n<r.options.interceptors.length;n++)r.options.interceptors[n].result&&(e+=r.getInterceptor(n)+".result("+t+");\n");return e+=o(t)},onDone:n&&function(){for(var t="",e=0;e<r.options.interceptors.length;e++)r.options.interceptors[e].done&&(t+=r.getInterceptor(e)+".done();\n");return t+=n()}}))}return this.content(t)},e.header=function(){var t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",0<this.options.interceptors.length&&(t+="var _taps = this.taps;\nvar _interceptors = this.interceptors;\n"),t},e.needContext=function(){for(var t,e=cs(this.options.taps);!(t=e()).done;)if(t.value.context)return!0;return!1},e.callTap=function(t,e){for(var n=e.onError,r=e.onResult,i=e.onDone,o=e.rethrowIfPossible,a="",s=!1,l=0;l<this.options.interceptors.length;l++){var u=this.options.interceptors[l];u.tap&&(s||(a+="var _tap"+t+" = "+this.getTap(t)+";\n",s=!0),a+=this.getInterceptor(l)+".tap("+(u.context?"_context, ":"")+"_tap"+t+");\n")}a+="var _fn"+t+" = "+this.getTapFn(t)+";\n";var c=this.options.taps[t];switch(c.type){case"sync":o||(a=a+"var _hasError"+t+" = false;\ntry {\n"),a+=r?"var _result"+t+" = _fn"+t+"("+this.args({before:c.context?"_context":void 0})+");\n":"_fn"+t+"("+this.args({before:c.context?"_context":void 0})+");\n",o||(a=(a=(a=a+"} catch(_err) {\n_hasError"+t+" = true;\n")+n("_err"))+"}\nif(!_hasError"+t+") {\n"),r&&(a+=r("_result"+t)),i&&(a+=i()),o||(a+="}\n");break;case"async":var h=(h=(h="")+(r?"(function(_err"+t+", _result"+t+") {\n":"(function(_err"+t+") {\n")+("if(_err"+t+") {\n"))+n("_err"+t)+"} else {\n";r&&(h+=r("_result"+t)),i&&(h+=i()),a+="_fn"+t+"("+this.args({before:c.context?"_context":void 0,after:h=h+"}\n"+"})"})+");\n";break;case"promise":a=(a=(a=(a+="var _hasResult"+t+" = false;\n")+("var _promise"+t+" = _fn"+t+"("+this.args({before:c.context?"_context":void 0})+");\n"))+("if (!_promise"+t+" || !_promise"+t+".then)\n")+("  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise"+t+" + ')');\n"))+("_promise"+t+".then((function(_result"+t+") {\n")+("_hasResult"+t+" = true;\n"),r&&(a+=r("_result"+t)),i&&(a+=i()),a=(a=a+("}), function(_err"+t+") {\n")+("if(_hasResult"+t+") throw _err"+t+";\n"))+n("_err"+t)+"});\n"}return a},e.callTapsSeries=function(t){var o=this,a=t.onError,s=t.onResult,e=t.resultReturns,l=t.onDone,n=t.doneReturns,u=t.rethrowIfPossible;if(0===this.options.taps.length)return l();for(var c=this.options.taps.findIndex(function(t){return"sync"!==t.type}),h=e||n,d="",p=l,f=0,r=function(t){function e(t){return t?"":l()}var n=t,r=(p!==l&&("sync"!==o.options.taps[n].type||20<f++)&&(f=0,d=(d+="function _next"+n+"() {\n")+p()+"}\n",p=function(){return(h?"return ":"")+"_next"+n+"();\n"}),p),i=o.callTap(n,{onError:function(t){return a(n,t,r,e)},onResult:s&&function(t){return s(n,t,r,e)},onDone:!s&&r,rethrowIfPossible:u&&(c<0||n<c)});p=function(){return i}},i=this.options.taps.length-1;0<=i;i--)r(i);return d+=p()},e.callTapsLooping=function(t){var e=t.onError,n=t.onDone,t=t.rethrowIfPossible;if(0===this.options.taps.length)return n();var o=this.options.taps.every(function(t){return"sync"===t.type}),r="";o||(r+="var _looper = (function() {\nvar _loopAsync = false;\n");for(var r=(r+="var _loop;\n")+"do {\n"+"_loop = false;\n",i=0;i<this.options.interceptors.length;i++){var a=this.options.interceptors[i];a.loop&&(r+=this.getInterceptor(i)+".loop("+this.args({before:a.context?"_context":void 0})+");\n")}return r=r+this.callTapsSeries({onError:e,onResult:function(t,e,n,r){var i=(i="")+("if("+e+" !== undefined) {\n")+"_loop = true;\n";return o||(i+="if(_loopAsync) _looper();\n"),i=(i=i+r(!0)+"} else {\n")+n()+"}\n"},onDone:n&&function(){var t="";return(t+="if(!_loop) {\n")+n()+"}\n"},rethrowIfPossible:t&&o})+"} while(_loop);\n",o||(r+="_loopAsync = true;\n});\n_looper();\n"),r},e.callTapsParallel=function(t){var e=this,o=t.onError,a=t.onResult,s=t.onDone,l=t.rethrowIfPossible,t=t.onTap,u=void 0===t?function(t,e){return e()}:t;if(this.options.taps.length<=1)return this.callTapsSeries({onError:o,onResult:a,onDone:s,rethrowIfPossible:l});for(var c="",n=(c=(c+="do {\n")+("var _counter = "+this.options.taps.length+";\n"),s&&(c=(c+="var _done = (function() {\n")+s()+"});\n"),function(n){function r(){return s?"if(--_counter === 0) _done();\n":"--_counter;"}function i(t){return t||!s?"_counter = 0;\n":"_counter = 0;\n_done();\n"}c=(c+="if(_counter <= 0) break;\n")+u(n,function(){return e.callTap(n,{onError:function(t){var e="";return(e+="if(_counter > 0) {\n")+o(n,t,r,i)+"}\n"},onResult:a&&function(t){var e="";return(e+="if(_counter > 0) {\n")+a(n,t,r,i)+"}\n"},onDone:!a&&r,rethrowIfPossible:l})},r,i)}),r=0;r<this.options.taps.length;r++)n(r);return c+="} while(false);\n"},e.args=function(t){var t=void 0===t?{}:t,e=t.before,t=t.after,n=this._args;return e&&(n=[e].concat(n)),0===(n=t?n.concat(t):n).length?"":n.join(", ")},e.getTapFn=function(t){return"_x["+t+"]"},e.getTap=function(t){return"_taps["+t+"]"},e.getInterceptor=function(t){return"_interceptors["+t+"]"},t}(),bu=new(function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.content=function(t){var i=t.onError,t=t.onDone;return this.callTapsParallel({onError:function(t,e,n,r){return i(e)+r(!0)},onDone:t})},e}(G)),xu=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).compile=hu,t._call=void 0,t.call=void 0,t}return g(t,n),t}(o),wu=new(function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.content=function(t){var i=this,o=t.onError,e=t.onResult;return t.onDone,this.callTapsSeries({onError:function(t,e,n,r){return o(e)+r(!0)},onResult:function(t,e,n){var r="";return(r+="if("+e+" !== undefined) {\n")+(i._args[0]+" = "+e+";\n")+"}\n"+n()},onDone:function(){return e(i._args[0])}})},e}(G)),ku=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).compile=du,t._call=void 0,t.call=void 0,t}return g(t,n),t}(o),_u=new(function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.content=function(t){var n=t.onError,e=t.onDone,t=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onDone:e,rethrowIfPossible:t})},e}(G)),Su=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).tapAsync=pu,t.tapPromise=fu,t.compile=yu,t}return g(t,n),t}(o),Eu=new(function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.content=function(t){var i=this,n=t.onError,e=t.onResult,r=t.resultReturns,t=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onResult:function(t,e,n){var r="";return(r+="if("+e+" !== undefined) {\n")+(i._args[0]+" = "+e+";\n")+"}\n"+n()},onDone:function(){return e(i._args[0])},doneReturns:r,rethrowIfPossible:t})},e}(G)),Tu=function(n){function t(t,e){return(t=n.call(this,t=void 0===t?[]:t,e=void 0===e?void 0:e)||this).tapAsync=gu,t.tapPromise=vu,t.compile=mu,t}return g(t,n),t}(Su),Mu=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Ou(e){return void 0===e&&(e=0),new Promise(function(t){setTimeout(function(){t()},e)})}var Pu,P,Cu,Au,Nu,Lu,Iu=d.defineToken("LayoutChildrenFactory"),Ru=d.defineToken("LayoutChildrenOptions"),ju=function(){function t(t,e){this._layoutContext=void 0,this.options=void 0,this.node=void 0,this.styleMap=void 0,this.layoutContext=void 0,this._layoutContext=t,this.options=e,this.layoutContext=t,this.node=e.node,this.styleMap=e.node.getAllStyle()}var e=t.prototype;return e.intrinsicSizes=function(){var t=new cl;return this.layoutContext.appendWorkTask({layoutChild:this,taskType:Na.IntrinsicSizes,deferred:t}),t.promise},e.layoutNextFragment=function(t){if(this.layoutContext.mode===Na.IntrinsicSizes)throw new Error("Not Supported: cant call layoutNextFragment in intrinsicSizes");var e=new cl;return this.layoutContext.appendWorkTask({layoutConstraints:t,layoutChild:this,taskType:Na.Layout,deferred:e}),e.promise},t}(),ju=t([Er(),j(0,f(ys)),j(1,f(Ru)),e("design:paramtypes",[ys,Object])],ju),Du=d.defineToken("LayoutEdgesFactory"),Bu=d.defineToken("LayoutEdgesOptions"),Fu=[0,0,0,0],zu=function(t){this.options=void 0,this.inlineStart=void 0,this.inlineEnd=void 0,this.blockStart=void 0,this.blockEnd=void 0,this.inline=void 0,this.block=void 0;var t=(this.options=t).node.getAllStyle(),e=null!=(e=null==(e=t.get(La.PADDING_TOP))?void 0:e.value)?e:0,n=null!=(n=null==(n=t.get(La.PADDING_END))?void 0:n.value)?n:0,r=null!=(r=null==(r=t.get(La.PADDING_BOTTOM))?void 0:r.value)?r:0,i=null!=(i=null==(i=t.get(La.PADDING_START))?void 0:i.value)?i:0,o=null!=(o=null==(o=t.get(La.PADDING_TOP))?void 0:o.value)?o:0,a=null!=(a=null==(a=t.get(La.PADDING_END))?void 0:a.value)?a:0,s=null!=(s=null==(s=t.get(La.PADDING_BOTTOM))?void 0:s.value)?s:0,t=null!=(t=null==(t=t.get(La.PADDING_START))?void 0:t.value)?t:0;this.blockStart=e+Fu[0]+o,this.inlineStart=n+Fu[1]+a,this.blockEnd=r+Fu[2]+s,this.inlineEnd=i+Fu[3]+t,this.block=this.blockStart+this.blockEnd,this.inline=this.inlineStart+this.inlineEnd},zu=t([Er(),j(0,f(Bu)),e("design:paramtypes",[Object])],zu),Vu=((s=function(){function t(){this.registry=new Map}var e=t.prototype;return e.hasLayout=function(t){return this.registry.has(t)},e.getLayout=function(t){if(this.hasLayout(t=void 0===t?"absolute":t))return this.registry.get(t);throw new Error("invalid layout property: "+t)},e.updateLayout=function(t,e){this.registry.set(t,e)},e.registerLayout=function(t,e){if(""===t)throw new TypeError("layout name cant't be empty");if(Pu.reservedLayout.includes(t))throw new Error("layout name '"+t+"' is a system reserved layout name, please use another name");if(this.hasLayout(t))throw new Error("layout '"+t+"' already exist.");this.registry.set(t,e)},e.deleteLayout=function(t){this.registry.delete(t)},rs(t,[{key:"size",get:function(){return this.registry.size}}]),t}()).reservedLayout=[],Pu=s),Vu=Pu=t([p()],Vu),Gu=function(){function t(t,e,n){this._layoutRegistry=void 0,this._layoutContextFactory=void 0,this._layoutEdgesFactory=void 0,this.layoutRegistry=void 0,this.layoutContextFactory=void 0,this.layoutEdgesFactory=void 0,this._layoutRegistry=t,this._layoutContextFactory=e,this._layoutEdgesFactory=n,this.layoutRegistry=t,this.layoutContextFactory=e,this.layoutEdgesFactory=n}var e=t.prototype;return e.computeLayout=function(){var n=es(S().mark(function t(e,n){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.determineIntrinsicSizes(e,e.children);case 2:return t.next=4,this.calculateLayout(e,e.children,n);case 4:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),e.determineAllIntrinsicSizes=function(){var e=es(S().mark(function t(e){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),e.getLayoutDefinitionName=function(t){t=t.getAllStyle().get(La.LAYOUT);if(t)return t.value;throw new Error("layout property not found")},e.determineIntrinsicSizes=function(){var n=es(S().mark(function t(e,n){var r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getLayoutDefinitionName(e),t.next=3,this.invokeIntrinsicSizesCallback(r,e,n);case 3:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),e.invokeIntrinsicSizesCallback=function(){var r=es(S().mark(function t(e,n,r){var i,o,a,s,l;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=this.layoutRegistry.getLayout(e),a=new l,i=this.layoutContextFactory({mode:Na.IntrinsicSizes}),l=l.inputProperties,l=void 0===l?[]:l,o=[],r.forEach(function(t){t=i.layoutChildrenFactory({node:t});o.push(t)}),s=this.layoutEdgesFactory({node:n}),l=n.getStyle.apply(n,l),a=a.intrinsicSizes(o,s,l),(s=this.runWorkQueue(a,i.workQueue)).next(),t.next=13,Ou();case 13:l=s.next().value,i.clearWorkQueue(),n.setIntrisicSizes(l);case 16:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.calculateLayout=function(){var r=es(S().mark(function t(e,n,r){var i;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getLayoutDefinitionName(e),t.next=3,this.invokeLayoutCallback(i,e,n,r);case 3:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.invokeLayoutCallback=function(){var i=es(S().mark(function t(e,n,r,i){var o,a,s,l,u,c;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=this.layoutRegistry.getLayout(e),c=new l,o=this.layoutContextFactory({mode:Na.Layout}),l=l.inputProperties,l=void 0===l?[]:l,a=[],r.forEach(function(t){t=o.layoutChildrenFactory({node:t});a.push(t)}),s=this.layoutEdgesFactory({node:n}),l=n.getStyle.apply(n,l),c=c.layout(a,s,i,l),(s=this.runWorkQueue(c,o.workQueue)).next(),t.next=13,Ou();case 13:l=s.next().value,o.clearWorkQueue(),u=l instanceof bs?l:o.fragmentResultFactory(l),c=o.layoutFragmentFactory({inlineSize:u.inlineSize,blockSize:u.blockSize,data:u.data}),n.setComputedLayout(c),r.forEach(function(t,e){t.setComputedLayout(u.childFragments[e])});case 19:case"end":return t.stop()}},t,this)}));return function(t,e,n,r){return i.apply(this,arguments)}}(),e.runWorkQueue=S().mark(function t(e,n){var r,i=this;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(t){if(t.isRejected||t.isFulfilled)return t;var e,n=!0,r=!1,i=!1,t=t.then(function(t){return n=!(i=!0),e=t},function(t){throw n=!(r=!0),t});return t.isFulfilled=function(){return i},t.isPending=function(){return n},t.isRejected=function(){return r},t.getFullFilledValue=function(){return e},t}(e),0<n.length&&r.isPending()&&n.forEach(function(t){var e,n,r;t.taskType===Na.IntrinsicSizes&&(e=t.layoutChild,n=t.deferred,e=e.node,n.resolve(i.getNodeIntrisicSizes(e))),t.taskType===Na.Layout&&(n=t.layoutChild,e=t.deferred,t=t.layoutConstraints,r=n.node,n=n.layoutContext,r=i.getNodeFragment(r,t),e.resolve(n.layoutFragmentFactory(r)))}),void(t.next=4);case 4:if(r.isFulfilled()){t.next=6;break}throw new Error("promise not fullfilled!");case 6:return t.abrupt("return",r.getFullFilledValue());case 7:case"end":return t.stop()}},t)}),e.getNodeIntrisicSizes=function(t){var e,n=t.getAllStyle();return{minContentInlineSize:(null==(e=n.get(La.MIN_WIDTH))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.minContentInlineSize)||(null==(e=n.get(La.WIDTH))?void 0:e.value)||0,maxContentInlineSize:(null==(e=n.get(La.MAX_WIDTH))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.maxContentInlineSize)||(null==(e=n.get(La.WIDTH))?void 0:e.value)||0,minContentBlockSize:(null==(e=n.get(La.MIN_HEIGHT))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.minContentBlockSize)||(null==(e=n.get(La.HEIGHT))?void 0:e.value)||0,maxContentBlockSize:(null==(e=n.get(La.MAX_HEIGHT))?void 0:e.value)||(null==(e=t.intrisicSizes)?void 0:e.maxContentBlockSize)||(null==(t=n.get(La.HEIGHT))?void 0:t.value)||0}},e.getNodeFragment=function(t,e){var n;return{inlineSize:(null==(n=t.getComputedLayout())?void 0:n.inlineSize)||(null==(n=t.getAllStyle().get(La.MIN_WIDTH))?void 0:n.value)||(null==(n=t.getAllStyle().get(La.WIDTH))?void 0:n.value)||0,blockSize:(null==(n=t.getComputedLayout())?void 0:n.blockSize)||(null==(n=t.getAllStyle().get(La.MIN_HEIGHT))?void 0:n.value)||(null==(n=t.getAllStyle().get(La.HEIGHT))?void 0:n.value)||0,data:e.data}},t}(),Gu=t([p(),j(0,f(Vu)),j(1,f(ds)),j(2,f(Du)),e("design:paramtypes",[Vu,Function,Function])],Gu),Hu=d.defineToken("LayoutFragmentFactory"),Wu=d.defineToken("LayoutFragmentOptions"),Uu=function(t,e){this._layoutContext=void 0,this.options=void 0,this.layoutContext=void 0,this.inlineSize=void 0,this.blockSize=void 0,this.inlineOffset=void 0,this.blockOffset=void 0,this.data=void 0,this._layoutContext=t,this.options=e,this.layoutContext=t,this.inlineSize=e.inlineSize,this.blockSize=e.blockSize,this.inlineOffset=0,this.blockOffset=0,this.data=e.data},Uu=t([Er(),j(0,f(ys)),j(1,f(Wu)),e("design:paramtypes",[ys,Object])],Uu),Yu=((u=P=P||{})[u.kUnknown=0]="kUnknown",u[u.kNumber=1]="kNumber",u[u.kPercentage=2]="kPercentage",u[u.kEms=3]="kEms",u[u.kExs=4]="kExs",u[u.kPixels=5]="kPixels",u[u.kCentimeters=6]="kCentimeters",u[u.kMillimeters=7]="kMillimeters",u[u.kInches=8]="kInches",u[u.kPoints=9]="kPoints",u[u.kPicas=10]="kPicas",u[u.kQuarterMillimeters=11]="kQuarterMillimeters",u[u.kViewportWidth=12]="kViewportWidth",u[u.kViewportHeight=13]="kViewportHeight",u[u.kViewportInlineSize=14]="kViewportInlineSize",u[u.kViewportBlockSize=15]="kViewportBlockSize",u[u.kViewportMin=16]="kViewportMin",u[u.kViewportMax=17]="kViewportMax",u[u.kSmallViewportWidth=18]="kSmallViewportWidth",u[u.kSmallViewportHeight=19]="kSmallViewportHeight",u[u.kSmallViewportInlineSize=20]="kSmallViewportInlineSize",u[u.kSmallViewportBlockSize=21]="kSmallViewportBlockSize",u[u.kSmallViewportMin=22]="kSmallViewportMin",u[u.kSmallViewportMax=23]="kSmallViewportMax",u[u.kLargeViewportWidth=24]="kLargeViewportWidth",u[u.kLargeViewportHeight=25]="kLargeViewportHeight",u[u.kLargeViewportInlineSize=26]="kLargeViewportInlineSize",u[u.kLargeViewportBlockSize=27]="kLargeViewportBlockSize",u[u.kLargeViewportMin=28]="kLargeViewportMin",u[u.kLargeViewportMax=29]="kLargeViewportMax",u[u.kDynamicViewportWidth=30]="kDynamicViewportWidth",u[u.kDynamicViewportHeight=31]="kDynamicViewportHeight",u[u.kDynamicViewportInlineSize=32]="kDynamicViewportInlineSize",u[u.kDynamicViewportBlockSize=33]="kDynamicViewportBlockSize",u[u.kDynamicViewportMin=34]="kDynamicViewportMin",u[u.kDynamicViewportMax=35]="kDynamicViewportMax",u[u.kContainerWidth=36]="kContainerWidth",u[u.kContainerHeight=37]="kContainerHeight",u[u.kContainerInlineSize=38]="kContainerInlineSize",u[u.kContainerBlockSize=39]="kContainerBlockSize",u[u.kContainerMin=40]="kContainerMin",u[u.kContainerMax=41]="kContainerMax",u[u.kRems=42]="kRems",u[u.kChs=43]="kChs",u[u.kUserUnits=44]="kUserUnits",u[u.kDegrees=45]="kDegrees",u[u.kRadians=46]="kRadians",u[u.kGradians=47]="kGradians",u[u.kTurns=48]="kTurns",u[u.kMilliseconds=49]="kMilliseconds",u[u.kSeconds=50]="kSeconds",u[u.kHertz=51]="kHertz",u[u.kKilohertz=52]="kKilohertz",u[u.kDotsPerPixel=53]="kDotsPerPixel",u[u.kDotsPerInch=54]="kDotsPerInch",u[u.kDotsPerCentimeter=55]="kDotsPerCentimeter",u[u.kFraction=56]="kFraction",u[u.kInteger=57]="kInteger",u[u.kQuirkyEms=58]="kQuirkyEms",(ht=Cu=Cu||{})[ht.kUNumber=0]="kUNumber",ht[ht.kUPercent=1]="kUPercent",ht[ht.kULength=2]="kULength",ht[ht.kUAngle=3]="kUAngle",ht[ht.kUTime=4]="kUTime",ht[ht.kUFrequency=5]="kUFrequency",ht[ht.kUResolution=6]="kUResolution",ht[ht.kUOther=7]="kUOther",0,(_t=Au=Au||{})[_t.kYes=0]="kYes",_t[_t.kNo=1]="kNo",(dt=Nu=Nu||{})[dt.kYes=0]="kYes",dt[dt.kNo=1]="kNo",[{name:"em",unit_type:P.kEms},{name:"px",unit_type:P.kPixels},{name:"deg",unit_type:P.kDegrees},{name:"rad",unit_type:P.kRadians},{name:"grad",unit_type:P.kGradians},{name:"ms",unit_type:P.kMilliseconds},{name:"s",unit_type:P.kSeconds},{name:"rem",unit_type:P.kRems},{name:"turn",unit_type:P.kTurns}]);(n=Lu=Lu||{})[n.kUnknownType=0]="kUnknownType",n[n.kUnparsedType=1]="kUnparsedType",n[n.kKeywordType=2]="kKeywordType",n[n.kUnitType=3]="kUnitType",n[n.kSumType=4]="kSumType",n[n.kProductType=5]="kProductType",n[n.kNegateType=6]="kNegateType",n[n.kInvertType=7]="kInvertType",n[n.kMinType=8]="kMinType",n[n.kMaxType=9]="kMaxType",n[n.kClampType=10]="kClampType",n[n.kTransformType=11]="kTransformType",n[n.kPositionType=12]="kPositionType",n[n.kURLImageType=13]="kURLImageType",n[n.kColorType=14]="kColorType",n[n.kUnsupportedColorType=15]="kUnsupportedColorType";var qu,Xu,Zu=function(){function t(){}t.parse=function(t,e){return[][0]},t.parseAll=function(t,e){return[]},t.unitFromName=function(t){return t?"number"===t?P.kNumber:"percent"===t||"%"===t?P.kPercentage:this.stringToUnitType(t):P.kUnknown},t.unitTypeToUnitCategory=function(t){switch(t){case P.kNumber:case P.kInteger:return Cu.kUNumber;case P.kPercentage:return Cu.kUPercent;case P.kPixels:case P.kCentimeters:case P.kMillimeters:case P.kQuarterMillimeters:case P.kInches:case P.kPoints:case P.kPicas:case P.kUserUnits:return Cu.kULength;case P.kMilliseconds:case P.kSeconds:return Cu.kUTime;case P.kDegrees:case P.kRadians:case P.kGradians:case P.kTurns:return Cu.kUAngle;case P.kHertz:case P.kKilohertz:return Cu.kUFrequency;case P.kDotsPerPixel:case P.kDotsPerInch:case P.kDotsPerCentimeter:return Cu.kUResolution;default:return Cu.kUOther}},t.unitTypeToString=function(t){switch(t){case P.kNumber:case P.kInteger:case P.kUserUnits:return"";case P.kPercentage:return"%";case P.kEms:case P.kQuirkyEms:return"em";case P.kRems:return"rem";case P.kPixels:return"px";case P.kDegrees:return"deg";case P.kRadians:return"rad";case P.kGradians:return"grad";case P.kMilliseconds:return"ms";case P.kSeconds:return"s";case P.kTurns:return"turn"}return""},t.stringToUnitType=function(e){return Yu.find(function(t){return t.name===e}).unit_type},t.canonicalUnitTypeForCategory=function(t){switch(t){case Cu.kUNumber:return P.kNumber;case Cu.kULength:return P.kPixels;case Cu.kUPercent:return P.kPercentage;case Cu.kUTime:return P.kSeconds;case Cu.kUAngle:return P.kDegrees;case Cu.kUFrequency:return P.kHertz;case Cu.kUResolution:return P.kDotsPerPixel;default:return P.kUnknown}},t.conversionToCanonicalUnitsScaleFactor=function(t){var e=1;switch(t){case P.kPixels:case P.kUserUnits:case P.kDegrees:case P.kSeconds:case P.kHertz:break;case P.kMilliseconds:e=.001;break;case P.kCentimeters:case P.kDotsPerCentimeter:case P.kMillimeters:case P.kQuarterMillimeters:case P.kInches:case P.kDotsPerInch:case P.kPoints:case P.kPicas:break;case P.kRadians:e=180/Math.PI;break;case P.kGradians:e=.9;break;case P.kTurns:e=360;break;case P.kKilohertz:e=1e3}return e},t.isAngle=function(t){return t===P.kDegrees||t===P.kRadians||t===P.kGradians||t===P.kTurns},t.isViewportPercentageLength=function(t){return t>=P.kViewportWidth&&t<=P.kDynamicViewportMax},t.isContainerPercentageLength=function(t){return t>=P.kContainerWidth&&t<=P.kContainerMax},t.isLength=function(t){return t>=P.kEms&&t<=P.kUserUnits||t==P.kQuirkyEms},t.isRelativeUnit=function(t){return t===P.kPercentage||t===P.kEms||t===P.kExs||t===P.kRems||t===P.kChs||this.isViewportPercentageLength(t)||this.isContainerPercentageLength(t)},t.isTime=function(t){return t===P.kSeconds||t===P.kMilliseconds},t.isFrequency=function(t){return t==P.kHertz||t==P.kKilohertz},t.isResolution=function(t){return t>=P.kDotsPerPixel&&t<=P.kDotsPerCentimeter},t.isFlex=function(t){return t===P.kFraction};var e=t.prototype;return e.toString=function(){return this.buildCSSText(Au.kNo,Nu.kNo,"")},e.isNumericValue=function(){return this.getType()>=Lu.kUnitType&&this.getType()<=Lu.kClampType},t}(),V=function(n){function t(t){var e=n.call(this)||this;return e.colorSpace=void 0,e.colorSpace=t,e}g(t,n);var e=t.prototype;return e.getType=function(){return Lu.kColorType},e.to=function(t){return this},t}(Zu),Ku=function(n){function t(t){var e=n.call(this)||this;return e.value=void 0,e.value=t,e}g(t,n);var e=t.prototype;return e.clone=function(){return new t(this.value)},e.getType=function(){return Lu.kKeywordType},e.buildCSSText=function(t,e,n){return n+this.value},t}(Zu);($=qu=qu||{}).kAdd="+",$.kSubtract="-",$.kMultiply="*",$.kDivide="/",$.kMin="min",$.kMax="max",$.kClamp="clamp",$.kInvalid="",(h=Xu=Xu||{})[h.kLength=0]="kLength",h[h.kAngle=1]="kAngle",h[h.kTime=2]="kTime",h[h.kFrequency=3]="kFrequency",h[h.kResolution=4]="kResolution",h[h.kFlex=5]="kFlex",h[h.kPercent=6]="kPercent",h[h.kNumBaseTypes=7]="kNumBaseTypes";var $u=function(){function t(t,e){void 0===t&&(t=P.kNumber),void 0===e&&(e=1),this.exponents=[],this.numNonZeroEntries=0,this.percentHint=Xu.kPercent,this.hasPercentHint=!1,this.exponents=new Array(Xu.kNumBaseTypes).fill(0),t!==P.kNumber&&this.setExponent(function(t){switch(ws(t,P.kNumber),t){case P.kEms:case P.kExs:case P.kPixels:case P.kCentimeters:case P.kMillimeters:case P.kQuarterMillimeters:case P.kInches:case P.kPoints:case P.kPicas:case P.kUserUnits:case P.kViewportWidth:case P.kViewportHeight:case P.kViewportInlineSize:case P.kViewportBlockSize:case P.kViewportMin:case P.kViewportMax:case P.kSmallViewportWidth:case P.kSmallViewportHeight:case P.kSmallViewportInlineSize:case P.kSmallViewportBlockSize:case P.kSmallViewportMin:case P.kSmallViewportMax:case P.kLargeViewportWidth:case P.kLargeViewportHeight:case P.kLargeViewportInlineSize:case P.kLargeViewportBlockSize:case P.kLargeViewportMin:case P.kLargeViewportMax:case P.kDynamicViewportWidth:case P.kDynamicViewportHeight:case P.kDynamicViewportInlineSize:case P.kDynamicViewportBlockSize:case P.kDynamicViewportMin:case P.kDynamicViewportMax:case P.kContainerWidth:case P.kContainerHeight:case P.kContainerInlineSize:case P.kContainerBlockSize:case P.kContainerMin:case P.kContainerMax:case P.kRems:case P.kChs:return Xu.kLength;case P.kMilliseconds:case P.kSeconds:return Xu.kTime;case P.kDegrees:case P.kRadians:case P.kGradians:case P.kTurns:return Xu.kAngle;case P.kHertz:case P.kKilohertz:return Xu.kFrequency;case P.kDotsPerPixel:case P.kDotsPerInch:case P.kDotsPerCentimeter:return Xu.kResolution;case P.kFraction:return Xu.kFlex;case P.kPercentage:return Xu.kPercent;default:return Xu.kLength}}(t),e)}var e=t.prototype;return e.applyPercentHint=function(t){ws(t,Xu.kPercent),this.setExponent(t,this.exponent(t)+this.exponent(Xu.kPercent)),this.setExponent(Xu.kPercent,0),this.percentHint=t,this.hasPercentHint=!0},e.hasNonZeroEntries=function(){return 0<this.numNonZeroEntries},e.isOnlyNonZeroEntry=function(t,e){return ws(e,0),1===this.numNonZeroEntries&&this.exponent(t)===e},e.exponent=function(t){return this.exponents[t]},e.setExponent=function(t,e){var n=this.exponents[t];0==n&&0!==e?this.numNonZeroEntries++:0!==n&&0==e&&this.numNonZeroEntries--,this.exponents[t]=e},t.negateExponents=function(t){return t.exponents.forEach(function(t){return-1*t}),t},e.matchesBaseType=function(t){return ws(t,Xu.kPercent),this.isOnlyNonZeroEntry(t,1)&&!this.hasPercentHint},e.matchesPercentage=function(){return this.isOnlyNonZeroEntry(Xu.kPercent,1)},e.matchesBaseTypePercentage=function(t){return ws(t,Xu.kPercent),this.isOnlyNonZeroEntry(t,1)||this.isOnlyNonZeroEntry(Xu.kPercent,1)},e.matchesNumber=function(){return!this.hasNonZeroEntries()&&!this.hasPercentHint},e.matchesNumberPercentage=function(){return!this.hasNonZeroEntries()||this.isOnlyNonZeroEntry(Xu.kPercent,1)},t.add=function(t,e,n){if(!t.hasPercentHint||!e.hasPercentHint||t.percentHint==e.percentHint){t.hasPercentHint?e.applyPercentHint(t.percentHint):e.hasPercentHint&&t.applyPercentHint(e.percentHint);var r=t.percentHint,i=e.percentHint;if(r!==i)throw new Error;for(var o=0;o<Xu.kNumBaseTypes;++o){var a=o;if(t.exponents[o]!==e.exponents[o]&&(a!==Xu.kPercent&&(t.applyPercentHint(a),e.applyPercentHint(a)),t.exponents[o]!==e.exponents[o]))return t}}return t},t.multiply=function(t,e,n){if(!t.hasPercentHint||!e.hasPercentHint||t.percentHint==e.percentHint){t.hasPercentHint?e.applyPercentHint(t.percentHint):e.hasPercentHint&&t.applyPercentHint(e.percentHint);for(var r=0;r<Xu.kNumBaseTypes;++r){var i=r;t.setExponent(i,t.exponent(i)+e.exponent(i))}}return t},t}(),Ju=function(n){function p(t){var e=n.call(this)||this;return e.type_=void 0,e.type_=t,e}g(p,n),p.fromNumberish=function(t){return"number"==typeof t?new C(t,P.kNumber):t},p.fromPercentish=function(t){return"number"==typeof t?new C(100*t,P.kPercentage):t};var t=p.prototype;return t.getType=function(){return Lu.kUnknownType},t.equals=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qu(n).every(function(t){return e.equals(t)})},t.add=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Qu(e),i=(tc(Lu.kSumType,r,this),nc(r,qu.kAdd));return i||cc.create(r)},t.sub=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(r=Qu(e)).map(function(t){return t.negate()}),i=(tc(Lu.kSumType,r,this),nc(r,qu.kAdd));return i||cc.create(r)},t.mul=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Qu(e),i=(tc(Lu.kProductType,r,this),rc(r));return i||hc.create(r)},t.div=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(r=Qu(e)).map(function(t){return t.invert()}),i=(tc(Lu.kProductType,r,this),rc(r));return i||hc.create(r)},t.min=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Qu(e),i=(tc(Lu.kMinType,r,this),nc(r,qu.kMin));return i||lc.create(r)},t.max=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Qu(e),i=(tc(Lu.kMaxType,r,this),nc(r,qu.kMax));return i||uc.create(r)},t.to=function(t){var e=this.sumValue();if(0===e.length||1!==e.length)return null;e=ec(e[0]);return e?(t="string"==typeof t?C.unitFromName(t):t,e.convertTo(t)):null},t.toSum=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(!p.isValidUnit(p.unitFromName(o)))return null}var a=this.sumValue();if(!a.length)return null;for(var s=[],l=cs(a);!(u=l()).done;){var u=ec(u.value);if(!u)return null;s.push(u)}if(0===e.length)return s.sort(function(t,e){return t.unit-e.unit}),xs(!!(a=cc.create(s))),a;for(var c=[],h=0,d=e;h<d.length;h++)!function(){var t=d[h],r=p.unitFromName(t),t=(xs(p.isValidUnit(r)),s.reduce(function(t,e,n){return e&&(e=e.convertTo(r))&&(t+=e.value,s[n]=null),t},0));c.push(new C(t,r))}();if(s.some(function(t){return!!t}))throw new Error("There were leftover terms that were not converted");return cc.create(c)},t.type=function(){var t={length:0,angle:0,time:0,frequency:0,resolution:0,flex:0,percent:0,percentHint:"length"},e=this.type_.exponent(Xu.kLength);return e&&(t.length=e),(e=this.type_.exponent(Xu.kAngle))&&(t.angle=e),(e=this.type_.exponent(Xu.kTime))&&(t.time=e),(e=this.type_.exponent(Xu.kFrequency))&&(t.frequency=e),(e=this.type_.exponent(Xu.kResolution))&&(t.resolution=e),(e=this.type_.exponent(Xu.kFlex))&&(t.flex=e),(e=this.type_.exponent(Xu.kPercent))&&(t.percent=e),this.type_.hasPercentHint&&(t.percentHint=function(t){switch(t){case Xu.kLength:return"length";case Xu.kAngle:return"angle";case Xu.kTime:return"time";case Xu.kFrequency:return"frequency";case Xu.kResolution:return"resolution";case Xu.kFlex:return"flex";case Xu.kPercent:return"percent"}return""}(this.type_.percentHint)),t},p.isValidUnit=function(t){return t!==P.kUserUnits&&!!(t===P.kNumber||t==P.kPercentage||this.isLength(t)||this.isAngle(t)||this.isTime(t)||this.isFrequency(t)||this.isResolution(t)||this.isFlex(t))},t.negate=function(){return oc.create(this)},t.invert=function(){return ic.create(this)},p}(Zu);function Qu(t){return t.map(Ju.fromNumberish)}function tc(t,e,n){xs(!!n),n.getType()===t?e.unshift.apply(e,n.numericValues()):e.unshift(n)}function ec(t){return 0===Object.keys(t.units).length?new C(t.value):1===Object.keys(t.units).length&&1===t.units[Object.keys(t.units)[0]]?new C(t.value,Number(Object.keys(t.units)[0])):null}function nc(t,e){xs(!!t.length);var n=t[0]instanceof C?t[0]:null;if(!n)return null;for(var r=n.value,i=1;i<t.length;i++){var o=t[i]instanceof C?t[i]:null;if(!o||o.unit!==n.unit)return null;e===qu.kAdd?r+=o.value:e===qu.kMax?r=Math.max(r,o.value):e===qu.kMin&&(r=Math.min(r,o.value))}return new C(r,n.unit)}function rc(t){xs(!!t.length);for(var e=P.kNumber,n=1,r=0;r<t.length;r++){var i=t[r]instanceof C?t[r]:null;if(!i)return null;if(i.unit!==P.kNumber){if(e!==P.kNumber)return null;e=i.unit}n*=i.value}return new C(n,e)}var C=function(r){function s(t,e){var n,e="string"==typeof(e=void 0===e?P.kNumber:e)?s.unitFromName(e):e;return xs(s.isValidUnit(e)),(n=r.call(this,new $u(e))||this).unit=void 0,n.value=void 0,n.unit=e,n.value=t,n}g(s,r),s.toCanonicalUnit=function(t){return this.canonicalUnitTypeForCategory(this.unitTypeToUnitCategory(t))},s.toCanonicalUnitIfPossible=function(t){var e=this.toCanonicalUnit(t);return e===P.kUnknown?t:e},s.formatInfinityOrNaN=function(t,e){void 0===e&&(e="");return(Number.isFinite(t)?(xs(Number.isNaN(t)),"NaN"):0<t?"infinity":"-infinity")+e},s.formatNumber=function(t,e){return t+(e=void 0===e?"":e)};var t=s.prototype;return t.clone=function(){return new s(this.value,this.unit)},t.convertTo=function(t){if(this.unit===t)return new s(this.value,this.unit);var e=s.toCanonicalUnit(this.unit);if(e!==s.toCanonicalUnit(t)||e===P.kUnknown)return null;e=Zu.conversionToCanonicalUnitsScaleFactor(this.unit)/Zu.conversionToCanonicalUnitsScaleFactor(t);return new s(this.value*e,t)},t.equals=function(t){return this.value===t.value&&this.unit===t.unit},t.getType=function(){return Lu.kUnitType},t.sumValue=function(){var t=[],e={};return this.unit!==P.kNumber&&(e[s.toCanonicalUnitIfPossible(this.unit)]=1),t.push({value:this.value*Zu.conversionToCanonicalUnitsScaleFactor(this.unit),units:e}),t},t.negate=function(){return new s(-this.value,this.unit)},t.invert=function(){return this.unit===P.kNumber?0===this.value?null:new s(1/this.value,this.unit):ic.create(this)},t.buildCSSText=function(t,e,n){switch(this.unit){case P.kUnknown:break;case P.kInteger:i=Number(this.value).toFixed(0);break;case P.kNumber:case P.kPercentage:case P.kEms:case P.kQuirkyEms:case P.kExs:case P.kRems:case P.kChs:case P.kPixels:case P.kCentimeters:case P.kDotsPerPixel:case P.kDotsPerInch:case P.kDotsPerCentimeter:case P.kMillimeters:case P.kQuarterMillimeters:case P.kInches:case P.kPoints:case P.kPicas:case P.kUserUnits:case P.kDegrees:case P.kRadians:case P.kGradians:case P.kMilliseconds:case P.kSeconds:case P.kHertz:case P.kKilohertz:case P.kTurns:case P.kFraction:case P.kViewportWidth:case P.kViewportHeight:case P.kViewportInlineSize:case P.kViewportBlockSize:case P.kViewportMin:case P.kViewportMax:case P.kSmallViewportWidth:case P.kSmallViewportHeight:case P.kSmallViewportInlineSize:case P.kSmallViewportBlockSize:case P.kSmallViewportMin:case P.kSmallViewportMax:case P.kLargeViewportWidth:case P.kLargeViewportHeight:case P.kLargeViewportInlineSize:case P.kLargeViewportBlockSize:case P.kLargeViewportMin:case P.kLargeViewportMax:case P.kDynamicViewportWidth:case P.kDynamicViewportHeight:case P.kDynamicViewportInlineSize:case P.kDynamicViewportBlockSize:case P.kDynamicViewportMin:case P.kDynamicViewportMax:case P.kContainerWidth:case P.kContainerHeight:case P.kContainerInlineSize:case P.kContainerBlockSize:case P.kContainerMin:case P.kContainerMax:var r,i,o=this.value,a=s.unitTypeToString(this.unit);i=o<-999999||999999<o?(r=s.unitTypeToString(this.unit),!Number.isFinite(o)||Number.isNaN(o)?s.formatInfinityOrNaN(o,r):s.formatNumber(o,r)):""+o+a}return n+=i},s}(Ju),X=function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.isUnitValue=function(){return!1},e}(Ju),ic=function(n){function e(t,e){e=n.call(this,e)||this;return e.value=void 0,e.operator="invert",e.value=t,e}g(e,n),e.create=function(t){return new e(t,$u.negateExponents(t.type_))};var t=e.prototype;return t.clone=function(){return new e(this.value,this.type_)},t.getType=function(){return Lu.kInvertType},t.equals=function(t){return t.getType()===Lu.kInvertType&&this.value.equals(t.value)},t.sumValue=function(){var e=this.value.sumValue();return 0===e.length||1!==e.length||0===e[0].value?null:(Object.keys(e[0].units).forEach(function(t){e[0].units[t]*=-1}),e[0].value=1/e[0].value,e)},t.buildCSSText=function(t,e,n){return e==Nu.kNo&&(n+=t===Au.kYes?"(":"calc("),n=this.value.buildCSSText(Au.kYes,Nu.kNo,n+="1 / "),e===Nu.kNo&&(n+=")"),n},e}(X),oc=function(n){function e(t,e){e=n.call(this,e)||this;return e.value=void 0,e.operator="negate",e.value=t,e}g(e,n),e.create=function(t){return new e(t,t.type_)};var t=e.prototype;return t.clone=function(){return new e(this.value,this.type_)},t.getType=function(){return Lu.kNegateType},t.equals=function(t){return t.getType()===Lu.kNegateType&&this.value.equals(t.value)},t.sumValue=function(){var t=this.value.sumValue();return 0===t.length?null:(t.forEach(function(t){t.value*=-1}),t)},t.buildCSSText=function(t,e,n){return e==Nu.kNo&&(n+=t===Au.kYes?"(":"calc("),n=this.value.buildCSSText(Au.kYes,Nu.kNo,n+="-"),e===Nu.kNo&&(n+=")"),n},e}(X);function ac(t,e){for(var n=t[0].type_,r=1;r<t.length;r++)n=e(n,t[r].type_,!1);return n}var sc,it=function(n){function t(t,e){e=n.call(this,e)||this;return e.values=void 0,e.values=t,e}g(t,n);var e=t.prototype;return e.numericValues=function(){return this.values},e.equals=function(n){return this.getType()===n.getType()&&this.values.every(function(t,e){return t.equals(n.values[e])})},t}(X),lc=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="min",t}g(e,i),e.create=function(t){return new e(t,ac(t,$u.add))};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return Lu.kMinType},t.sumValue=function(){var t=this.numericValues()[0].sumValue();if(!t.length)return null;for(var e=cs(this.numericValues());!(n=e()).done;){var n=n.value.sumValue();if(!n.length||JSON.stringify(n[0].units)!==JSON.stringify(t[0].units))return null;n[0].value<t[0].value&&(t=n)}return t},t.buildCSSText=function(t,e,n){n+="min(";for(var r,i=!0,o=cs(this.numericValues());!(r=o()).done;)i||(n+=", "),i=!1,n=r.value.buildCSSText(Au.kYes,Nu.kYes,n);return n+=")"},e}(it),uc=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="max",t}g(e,i),e.create=function(t){return new e(t,ac(t,$u.add))};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return Lu.kMaxType},t.sumValue=function(){var t=this.numericValues()[0].sumValue();if(!t.length)return null;for(var e=cs(this.numericValues());!(n=e()).done;){var n=n.value.sumValue();if(!n.length||JSON.stringify(n[0].units)!==JSON.stringify(t[0].units))return null;n[0].value<t[0].value&&(t=n)}return t},t.buildCSSText=function(t,e,n){n+="max(";for(var r,i=!0,o=cs(this.numericValues());!(r=o()).done;)i||(n+=", "),i=!1,n=r.value.buildCSSText(Au.kYes,Nu.kYes,n);return n+=")"},e}(it),cc=function(i){function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="sum",t}g(e,i),e.create=function(t){return new e(t,ac(t,$u.add))},e.numericTypeFromUnitMap=function(n){var r=new $u;return Object.keys(n).forEach(function(t){var e=n[t];r=$u.multiply(r,new $u(Number(t),e),!1),xs(!0)}),r},e.canCreateNumericTypeFromSumValue=function(t){var e=this,n=(xs(!!t.length),this.numericTypeFromUnitMap(t[0].units));return t.every(function(t){return $u.add(n,e.numericTypeFromUnitMap(t.units),!1),!0})};var t=e.prototype;return t.clone=function(){return new e(this.values,this.type_)},t.getType=function(){return Lu.kSumType},t.sumValue=function(){var n=[];return this.numericValues().forEach(function(t){t=t.sumValue();if(!t.length)return null;t.forEach(function(e){var t=n.findIndex(function(t){return JSON.stringify(t.units)===JSON.stringify(e.units)});-1===t?n.push(is({},e)):n[t].value+=e.value})}),e.canCreateNumericTypeFromSumValue(n)?n:null},t.buildCSSText=function(t,e,n){e==Nu.kNo&&(n+=t===Au.kYes?"(":"calc(");var r=this.numericValues();n=r[0].buildCSSText(Au.kYes,Nu.kNo,n);for(var i=1;i<r.length;i++){var o=r[i];n=o.getType()===Lu.kNegateType?(n+=" - ",o.value.buildCSSText(Au.kYes,Nu.kNo,n)):(n+=" + ",o.buildCSSText(Au.kYes,Nu.kNo,n))}return e===Nu.kNo&&(n+=")"),n},e}(it),hc=function(i){function o(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).operator="product",t}g(o,i),o.create=function(t){return new o(t,ac(t,$u.multiply))},o.multiplyUnitMaps=function(n,r){return Object.keys(r).forEach(function(t){ws(r[t].value,0);var e=t in n?n[t].value:0;e+r[t].value===0?delete n[t]:n[t]=e+r[t].value}),n};var t=o.prototype;return t.clone=function(){return new o(this.values,this.type_)},t.getType=function(){return Lu.kProductType},t.sumValue=function(){var e=[{value:1,units:{}}];return this.numericValues().forEach(function(t){var n=t.sumValue();if(!n.length)return null;var r=[];e.forEach(function(e){n.forEach(function(t){r.push({value:e.value*t.value,units:o.multiplyUnitMaps(e.units,t.units)})})}),e=r}),e},t.buildCSSText=function(t,e,n){e==Nu.kNo&&(n+=t===Au.kYes?"(":"calc(");var r=this.numericValues();n=r[0].buildCSSText(Au.kYes,Nu.kNo,n);for(var i=1;i<r.length;i++){var o=r[i];n=o.getType()===Lu.kInvertType?(n+=" / ",o.value.buildCSSText(Au.kYes,Nu.kNo,n)):(n+=" * ",o.buildCSSText(Au.kYes,Nu.kNo,n))}return e===Nu.kNo&&(n+=")"),n},o}(it),dc=new C(0,"px"),pc=new C(0,"deg"),fc=function(a){function t(t,e,n,r,i){var o;return void 0===r&&(r=1),void 0===i&&(i=!1),(o=a.call(this,"rgb")||this).r=void 0,o.g=void 0,o.b=void 0,o.alpha=void 0,o.isNone=void 0,o.r=t,o.g=e,o.b=n,o.alpha=r,o.isNone=i,o}g(t,a);var e=t.prototype;return e.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},e.buildCSSText=function(t,e,n){return n+("rgba("+this.r+","+this.g+","+this.b+","+this.alpha)+")"},t}(V),yc=((H=sc=sc||{})[H.Constant=0]="Constant",H[H.LinearGradient=1]="LinearGradient",H[H.RadialGradient=2]="RadialGradient",function(r){function t(t,e){var n=r.call(this)||this;return n.type=void 0,n.value=void 0,n.type=t,n.value=e,n}g(t,r);var e=t.prototype;return e.clone=function(){return new t(this.type,this.value)},e.buildCSSText=function(t,e,n){return n},e.getType=function(){return Lu.kColorType},t}(Zu)),gc=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,vc=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,mc=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,bc=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;var xc={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},wc=Kl(function(t){t="angular"===t.type?Number(t.value):xc[t.value]||0;return t}),kc=Kl(function(t){var e,n=.5,r=.5;return"position"===(null==t?void 0:t.type)&&(e=(t=t.value).x,t=t.y,"position-keyword"===(null==e?void 0:e.type)&&("left"===e.value?n=0:"center"===e.value?n=.5:"right"===e.value?n=1:"top"===e.value?r=0:"bottom"===e.value&&(r=1)),"position-keyword"===(null==t?void 0:t.type)&&("left"===t.value?n=0:"center"===t.value?r=.5:"right"===t.value?n=1:"top"===t.value?r=0:"bottom"===t.value&&(r=1)),"%"===(null==e?void 0:e.type)&&(n=Number(e.value)/100),"%"===(null==t?void 0:t.type)&&(r=Number(e.value)/100)),{cx:n,cy:r}}),_c=Kl(function(d){if(-1<d.indexOf("linear")||-1<d.indexOf("radial"))return vl(d).map(function(t){for(var e=t.type,n=t.orientation,t=t.colorStops,r=t,i=r.length,o=(r[i-1].length=null!=(h=r[i-1].length)?h:{type:"%",value:"100"},1<i&&(r[0].length=null!=(h=r[0].length)?h:{type:"%",value:"0"}),0),a=Number(r[0].length.value),s=1;s<i;s++){var l,u=null==(l=r[s].length)?void 0:l.value;if(!M(u)&&!M(a)){for(var c=1;c<s-o;c++)r[o+c].length={type:"%",value:""+(a+(Number(u)-a)*c/(s-o))};o=s,a=Number(u)}}var h=t.map(function(t){return[Number(t.length.value)/100,(e=(t=t).type,t=t.value,"hex"===e?"#"+t:"literal"===e?t:"rgb"===e?"rgb("+t.join(",")+")":"rgba("+t.join(",")+")")];var e});return"linear-gradient"===e?new yc(sc.LinearGradient,{angle:n?wc(n):0,steps:h,hash:d}):"radial-gradient"===e&&"shape"===(n=n||[{type:"shape",value:"circle"}])[0].type&&"circle"===n[0].value?(e=(t=kc(n[0].at)).cx,n=t.cy,new yc(sc.RadialGradient,{cx:e,cy:n,steps:h,hash:d})):void 0});var t=d[0];if("("===d[1]||"("===d[2])if("l"===t){var e=gc.exec(d);if(e)return n=(null==(n=e[2].match(bc))?void 0:n.map(function(t){return t.split(":")}))||[],[new yc(sc.LinearGradient,{angle:parseFloat(e[1]),steps:n.map(function(t){var e=t[0],t=t[1];return[Number(e),t]}),hash:d})]}else if("r"===t){e=function(t){var e=vc.exec(t);if(e)return{cx:.5,cy:.5,steps:((null==(e=e[4].match(bc))?void 0:e.map(function(t){return t.split(":")}))||[]).map(function(t){var e=t[0],t=t[1];return[Number(e),t]}),hash:t};return null}(d);if(e){if(!Jl(e))return[new yc(sc.RadialGradient,e)];d=e}}else if("p"===t){var n=d;if(n=mc.exec(n)){var r=n[1],n=n[2];switch(r){case"a":r="repeat";break;case"x":r="repeat-x";break;case"y":r="repeat-y";break;default:r="no-repeat"}return{image:n,repetition:r}}return null}});function Sc(t){return Ts(t)&&t.image}var Ec=Kl(function(t){if(Sc(t))return is({repetition:"repeat"},t);if("transparent"===(t=M(t)?"":t))return new fc(0,0,0,0);var e=_c(t="currentColor"===t?"black":t);if(e)return e;e=Vo(t),t=[0,0,0,0];return null!==e&&(t[0]=e.r||0,t[1]=e.g||0,t[2]=e.b||0,t[3]=e.opacity),as(fc,t)});function Tc(t,e){if(t instanceof fc&&e instanceof fc)return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(zs(e[n],0,255));return e[3]=zs(e[3],0,1),"rgba("+e.join(",")+")"}]}var Mc,Oc=function(){function g(t,e){this.center=void 0,this.halfExtents=void 0,this.min=v(),this.max=v(),this.update(t,e)}g.isEmpty=function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]};var t=g.prototype;return t.update=function(t,e){this.center=zi(v(),t||v()),this.halfExtents=zi(v(),e||_(0,0,0)),this.min=$i(this.min,this.center,this.halfExtents),this.max=Gi(this.max,this.center,this.halfExtents)},t.setMinMax=function(t,e){Gi(this.center,e,t),Wi(this.center,this.center,.5),$i(this.halfExtents,e,t),Wi(this.halfExtents,this.halfExtents,.5),zi(this.min,t),zi(this.max,e)},t.getMin=function(){return this.min},t.getMax=function(){return this.max},t.add=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p,f,y;g.isEmpty(t)||(g.isEmpty(this)?this.setMinMax(t.getMin(),t.getMax()):(n=(e=this.center)[0],f=e[1],o=e[2],i=(r=this.halfExtents)[0],h=r[1],a=r[2],l=(d=t.center)[0],y=d[1],d=d[2],u=(t=t.halfExtents)[0],(p=y-(c=t[1]))<(s=f-h)&&(s=p),(p=f+h)<(f=y+c)&&(p=f),(y=d-(h=t[2]))<(c=o-a)&&(c=y),(f=o+a)<(t=d+h)&&(f=t),e[0]=.5*((o=(y=l-u)<(o=n-i)?y:o)+(a=(a=n+i)<(d=l+u)?d:a)),e[1]=.5*(s+p),e[2]=.5*(c+f),r[0]=.5*(a-o),r[1]=.5*(p-s),r[2]=.5*(f-c),this.min[0]=o,this.min[1]=s,this.min[2]=c,this.max[0]=a,this.max[1]=p,this.max[2]=f))},t.setFromTransformedAABB=function(t,e){var n=this.center,r=this.halfExtents,i=t.center,t=t.halfExtents,o=e[0],a=e[4],s=e[8],l=e[1],u=e[5],c=e[9],h=e[2],d=e[6],p=e[10],f=Math.abs(o),y=Math.abs(a),g=Math.abs(s),v=Math.abs(l),m=Math.abs(u),b=Math.abs(c),x=Math.abs(h),w=Math.abs(d),k=Math.abs(p);Vi(n,e[12]+o*i[0]+a*i[1]+s*i[2],e[13]+l*i[0]+u*i[1]+c*i[2],e[14]+h*i[0]+d*i[1]+p*i[2]),Vi(r,f*t[0]+y*t[1]+g*t[2],v*t[0]+m*t[1]+b*t[2],x*t[0]+w*t[1]+k*t[2]),this.min=$i(this.min,n,r),this.max=Gi(this.max,n,r)},t.intersects=function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),t=t.getMin();return n[0]<=r[0]&&e[0]>=t[0]&&n[1]<=r[1]&&e[1]>=t[1]&&n[2]<=r[2]&&e[2]>=t[2]},t.intersection=function(t){if(!this.intersects(t))return null;var e,n,r=new g,i=(n=v(),i=this.getMin(),e=t.getMin(),n[0]=Math.max(i[0],e[0]),n[1]=Math.max(i[1],e[1]),n[2]=Math.max(i[2],e[2]),n);return e=v(),n=this.getMax(),t=t.getMax(),e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),r.setMinMax(i,e),r},t.containsPoint=function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])},t.getNegativeFarPoint=function(t){return 273===t.pnVertexFlag?zi(v(),this.min):272===t.pnVertexFlag?_(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?_(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?_(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?_(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?_(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?_(this.max[0],this.max[1],this.min[2]):_(this.max[0],this.max[1],this.max[2])},t.getPositiveFarPoint=function(t){return 273===t.pnVertexFlag?zi(v(),this.max):272===t.pnVertexFlag?_(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?_(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?_(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?_(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?_(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?_(this.min[0],this.min[1],this.max[2]):_(this.min[0],this.min[1],this.min[2])},g}(),Pc=(v(),function(){function t(t,e){this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=e||_(0,1,0),this.updatePNVertexFlag()}var e=t.prototype;return e.updatePNVertexFlag=function(){this.pnVertexFlag=(Number(0<=this.normal[0])<<8)+(Number(0<=this.normal[1])<<4)+Number(0<=this.normal[2])},e.distanceToPoint=function(t){return Yi(t,this.normal)-this.distance},e.normalize=function(){var t=1/Qi(this.normal);Wi(this.normal,this.normal,t),this.distance*=t},e.intersectsLine=function(t,e,n){var r=this.distanceToPoint(t),r=r/(r-this.distanceToPoint(e)),i=0<=r&&r<=1;return i&&n&&qi(n,t,e,r),i},t}()),Cc=((pt=Mc=Mc||{})[pt.OUTSIDE=4294967295]="OUTSIDE",pt[pt.INSIDE=0]="INSIDE",pt[pt.INDETERMINATE=2147483647]="INDETERMINATE",function(){function t(t){if(this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new Pc)}return t.prototype.extractFromVPMatrix=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],y=t[14],t=t[15];Vi(this.planes[0].normal,i-e,l-o,d-u),this.planes[0].distance=t-p,Vi(this.planes[1].normal,i+e,l+o,d+u),this.planes[1].distance=t+p,Vi(this.planes[2].normal,i+n,l+a,d+c),this.planes[2].distance=t+f,Vi(this.planes[3].normal,i-n,l-a,d-c),this.planes[3].distance=t-f,Vi(this.planes[4].normal,i-r,l-s,d-h),this.planes[4].distance=t-y,Vi(this.planes[5].normal,i+r,l+s,d+h),this.planes[5].distance=t+y,this.planes.forEach(function(t){t.normalize(),t.updatePNVertexFlag()})},t}()),Ac=(v(),v(),v(),v(),v(),function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var e=t.prototype;return e.clone=function(){return new t(this.x,this.y)},e.copyFrom=function(t){this.x=t.x,this.y=t.y},t}()),Nc=function(){function t(t,e,n,r){this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,this.x=t,this.y=e,this.width=n,this.height=r,this.left=t,this.right=t+n,this.top=e,this.bottom=e+r}return t.prototype.toJSON=function(){},t}();function Lc(t,e){if(M(e))return new C(0,"px");if(e=(""+e).trim().toLowerCase(),isFinite(Number(e))){if(0<="px".search(t))return new C(Number(e),"px");if(0<="deg".search(t))return new C(Number(e),"deg")}var n=[],r=(e=e.replace(t,function(t){return n.push(t),"U"+t}),"U("+t.source+")");return n.map(function(t){return new C(Number(e.replace(new RegExp("U"+t,"g"),"").replace(new RegExp(r,"g"),"*0")),t)})[0]}function Ic(t){return Lc(new RegExp("px","g"),t)}function Rc(t){return _s(t)?new C(t,"px"):Lc(new RegExp("px|%|em|rem","g"),t)}function jc(t){return Lc(new RegExp("deg|rad|grad|turn","g"),t)}function Dc(t,e,n,r,i){void 0===i&&(i=0);var o="",a=t.value||0,s=e.value||0,l=C.toCanonicalUnit(t.unit),u=t.convertTo(l),l=e.convertTo(l);return u&&l?(a=u.value,s=l.value,o=C.unitTypeToString(t.unit)):(C.isLength(t.unit)||C.isLength(e.unit))&&(a=Vc(t,i,n),s=Vc(e,i,n),o="px"),[a,s,function(t){return(t=r?Math.max(t,0):t)+o}]}function Bc(t){var e=0;return t.unit===P.kDegrees?e=t.value:t.unit===P.kRadians?e=Ws(Number(t.value)):t.unit===P.kTurns&&(e=360*Number(t.value)),e}function Fc(t){return Jl(t)?t.split(" ").map(function(t){return Rc(t)}):t.map(function(t){return Rc(t.toString())})}function zc(t,e,n){var r;if(t.length===e.length)return r=t[0].unit,[t.map(function(t){return t.value}),e.map(function(t){return t.value}),function(t){return t.map(function(t){return new C(t,r)}).join(" ")}]}function Vc(t,e,n){return t.unit===P.kPixels?Number(t.value):t.unit===P.kPercentage&&n?(n=n.nodeName===O.GROUP?n.getLocalBounds():n.getGeometryBounds(),r=0,Oc.isEmpty(n)||(r=2*n.halfExtents[e]),Number(t.value)/100*r):0;var r}function Gc(t){return t.toString()}function Hc(t){return"number"==typeof t?new C(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?new C(Number(t)):new C(0)}function Wc(t,e){return[t.value,e.value,Gc]}function Uc(n,r){return function(t,e){return[t.value,e.value,function(t){return Gc(zs(t,n,r))}]}}var Yc=Kl(function(e){var n;try{if(Array.isArray(e)&&0===e.length)throw new Error;n=ha(e)}catch(t){n=ha(""),console.error("[g]: Invalid SVG Path definition: "+e)}var e=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(n),t=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];"M"===a?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):"Z"===a?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return 0<r.length&&n.push(r),{polygons:e,polylines:n}}(n),r=t.polygons,t=t.polylines,i=ma(n,!0),o=i[0],i=i[1],a=function(t){for(var e=[],n=null,r=0,i=t.length,o=0;o<i;o++){var a=t[o],s=t[o+1],l=a[0],u={command:l,prePoint:n,params:a,startTangent:null,endTangent:null},c=("M"===l&&(r=o),a.length),n=[a[c-2],a[c-1]],c=(u.currentPoint=n,e[r]&&(c=n,h=e[r].currentPoint,c[0]===h[0]&&c[1]===h[1])&&(e[r].prePoint=u.prePoint),s?[s[s.length-2],s[s.length-1]]:null),h=(u.nextPoint=c,u.prePoint);"C"===l&&(s=[a[1],a[2]],c=[a[3],a[4]],u.startTangent=[h[0]-s[0],h[1]-s[1]],u.endTangent=[n[0]-c[0],n[1]-c[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[s[0]-c[0],s[1]-c[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[c[0]-s[0],c[1]-s[1]])),e.push(u)}return e}(o),s=function(t){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var e=(t=_a(t)).length,n=(r=t.min).x,r=r.y,i=(t=t.max).x,t=t.y,o=i-n,a=t-r;return{length:e,width:o,height:a,x:n,y:r,x2:i,y2:t,cx:n+o/2,cy:r+a/2,cz:Math.max(o,a)+Math.min(o,a)/2}}(n),l=s.x,u=s.y,c=s.width,h=s.height;return{absolutePath:n,hasArc:e,segments:a,polygons:r,polylines:t,curve:o,totalLength:s.length,zCommandIndexes:i,rect:new Nc(Number.isFinite(l)?l:0,Number.isFinite(u)?u:0,Number.isFinite(c)?c:0,Number.isFinite(h)?h:0)}},function(t){return Jl(t)?t:Qo(t)});function qc(t,e){t=Yc(t);return e&&(e.parsedStyle.defX=t.rect.x,e.parsedStyle.defY=t.rect.y),t}function Xc(t,e,n){var r,i,o,a,s,l,u,c,h,t=t.curve,e=e.curve,d=[t,e],e=Ea((d=t.length!==e.length?function t(e,n,r){var i,e=Ta(e),n=Ta(n),o=e.length,a=n.length,s=e.filter(function(t){return t.l}).length,l=n.filter(function(t){return t.l}).length,s=e.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/s||0,l=n.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/l||0,u=r||Math.max(o,a),c=[s,l],h=[u-o,u-a],r=[e,n].map(function(t,n){return t.l===u?t.map(function(t){return t.s}):t.map(function(t,e){return i=e&&h[n]&&t.l>=c[n],h[n]-=i?1:0,i?t.ss:[t.s]}).flat()});return r[0].length===r[1].length?r:t(r[0],r[1],u)}(t,e):d)[0])!==Ea(d[1])?(r=d[0],t=r.slice(1).map(function(t,e,n){return(e?n[e-1].slice(-2):r[0].slice(1)).concat(t.slice(1))}).map(function(n){return n.map(function(t,e){return n[n.length-e-2*(1-e%2)]})}).reverse(),[["M"].concat(t[0].slice(0,2))].concat(t.map(function(t){return["C"].concat(t.slice(2))}))):Jo(d[0]);return[e,(i=d[1],o=e,u=i.length-1,c=[],h=0,s=(a=i).length,l=s-1,(t=a.map(function(t,r){return a.map(function(t,e){var n=r+e;return 0===e||a[n]&&"M"===a[n][0]?(e=a[n],["M"].concat(e.slice(-2))):(s<=n&&(n-=l),a[n])})})).forEach(function(t,n){i.slice(1).forEach(function(t,e){h+=fa(i[(n+e)%u].slice(-2),o[e%u].slice(-2))}),c[n]=h,h=0}),t[c.indexOf(Math.min.apply(null,c))]),function(t){return t}]}function Zc(t,e){var n,r,i=Jl(t)?t.split(" ").map(function(t){var t=t.split(","),e=t[0],t=t[1];return[Number(e),Number(t)]}):t,o=[],a=0,s=Aa.length(i),t=(i.forEach(function(t,e){i[e+1]&&((n=[0,0])[0]=a/s,r=Pa.length(t[0],t[1],i[e+1][0],i[e+1][1]),a+=r,n[1]=a/s,o.push(n))}),Math.min.apply(Math,i.map(function(t){return t[0]}))),l=Math.min.apply(Math,i.map(function(t){return t[1]}));return e&&(e.parsedStyle.defX=t,e.parsedStyle.defY=l),{points:i,totalLength:s,segments:o}}var Kc=function(t){return Lc(/deg|rad|grad|turn|px|%/g,t)},$c=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Jc(t){if("none"!==(t=(t=void 0===t?"":t).toLowerCase().trim()))for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,-1<$c.indexOf(e[1])&&r.push({name:e[1],params:e[2].split(" ").map(function(t){return Kc(t)||Ec(t)})}),n.lastIndex===t.length)return r}return[]}var J=function(t){return new C(t)},Qc=null;function th(t){return function(e){var n=0;return t.map(function(t){return t===Qc?e[n++]:t})}}function eh(t){return t}var nh={matrix:["NNNNNN",[Qc,Qc,0,0,Qc,Qc,0,0,0,0,1,0,Qc,Qc,0,1],eh],matrix3d:["NNNNNNNNNNNNNNNN",eh],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",th([Qc,Qc,J(1)]),eh],scalex:["N",th([Qc,J(1),J(1)]),th([Qc,J(1)])],scaley:["N",th([J(1),Qc,J(1)]),th([J(1),Qc])],scalez:["N",th([J(1),J(1),Qc])],scale3d:["NNN",eh],skew:["Aa",null,eh],skewx:["A",null,th([Qc,pc])],skewy:["A",null,th([pc,Qc])],translate:["Tt",th([Qc,Qc,dc]),eh],translatex:["T",th([Qc,dc,dc]),th([Qc,dc])],translatey:["T",th([dc,Qc,dc]),th([dc,Qc])],translatez:["L",th([dc,dc,Qc])],translate3d:["TTL",eh]};function rh(t){if("none"!==(t=(t||"none").toLowerCase().trim()))for(var e,n=/\s*(\w+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];var i=e.index+e[0].length,o=e[1],a=nh[o];if(!a)return[];var s=e[2].split(","),l=a[0];if(l.length<s.length)return[];for(var u=[],c=0;c<l.length;c++){var h=s[c],d=l[c],p=void 0;if(void 0===(p=h?{A:function(t){return"0"===t.trim()?pc:jc(t)},N:Hc,T:Rc,L:Ic}[d.toUpperCase()](h):{a:pc,n:u[0],t:dc}[d]))return[];u.push(p)}if(r.push({t:o,d:u}),n.lastIndex===t.length)return r}return[]}function ih(t){switch(t.t){case"rotatex":return i=Hs(Bc(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Hs(Bc(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Hs(Bc(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Hs(Bc(t.d[3])),o=e*e+n*n+r*r,o=(0==o?(e=1,r=n=0):1!=o&&(e/=o=Math.sqrt(o),n/=o,r/=o),Math.sin(i/2)),a=o*Math.cos(i/2),o=o*o;return[1-2*(n*n+r*r)*o,2*(e*n*o+r*a),2*(e*r*o-n*a),0,2*(e*n*o-r*a),1-2*(e*e+r*r)*o,2*(n*r*o+e*a),0,2*(e*r*o+n*a),2*(n*r*o-e*a),1-2*(e*e+n*n)*o,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":a=Hs(Bc(t.d[0])),o=Hs(Bc(t.d[1]));return[1,Math.tan(o),0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Hs(Bc(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Hs(Bc(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Vc(t.d[0],0,null)||0,n=Vc(t.d[1],0,null)||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Vc(t.d[0],0,null)||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=Vc(t.d[0],0,null)||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=Vc(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Vc(t.d[0],0,null)||0,n=Vc(t.d[1],0,null)||0,r=Vc(t.d[2],0,null)||0,1];case"perspective":o=Vc(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,o?-1/o:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(t){return t.value})}}function oh(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function ah(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return function(t,e,n,r,i,o){if(e=e||[0,0,0],n=n||[0,0,0],r=r||[0,0,0],i=i||[0,0,0,1],o=o||[0,0,0,1],!Ia(za,t))return;if(Ra(Va),Va[3]=0,Va[7]=0,Va[11]=0,Va[15]=1,Math.abs(ja(Va)<1e-8))return;var a,s,t=za[3],l=za[7],u=za[11],c=za[12],h=za[13],d=za[14],p=za[15];if(0!==t||0!==l||0!==u){if(Ga[0]=t,Ga[1]=l,Ga[2]=u,Ga[3]=p,!Da(Va,Va))return;Ba(Va,Va),t=i,l=Va,p=(u=Ga)[0],a=u[1],s=u[2],u=u[3],t[0]=l[0]*p+l[4]*a+l[8]*s+l[12]*u,t[1]=l[1]*p+l[5]*a+l[9]*s+l[13]*u,t[2]=l[2]*p+l[6]*a+l[10]*s+l[14]*u,t[3]=l[3]*p+l[7]*a+l[11]*s+l[15]*u}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=c,e[1]=h,e[2]=d,t=za,(p=y)[0][0]=t[0],p[0][1]=t[1],p[0][2]=t[2],p[1][0]=t[4],p[1][1]=t[5],p[1][2]=t[6],p[2][0]=t[8],p[2][1]=t[9],p[2][2]=t[10],n[0]=Fa.length(y[0]),Fa.normalize(y[0],y[0]),r[0]=Fa.dot(y[0],y[1]),Wa(y[1],y[1],y[0],1,-r[0]),n[1]=Fa.length(y[1]),Fa.normalize(y[1],y[1]),r[0]/=n[1],r[1]=Fa.dot(y[0],y[2]),Wa(y[2],y[2],y[0],1,-r[1]),r[2]=Fa.dot(y[1],y[2]),Wa(y[2],y[2],y[1],1,-r[2]),n[2]=Fa.length(y[2]),Fa.normalize(y[2],y[2]),r[1]/=n[2],r[2]/=n[2],Fa.cross(Ha,y[1],y[2]),Fa.dot(y[0],Ha)<0)for(var f=0;f<3;f++)n[f]*=-1,y[f][0]*=-1,y[f][1]*=-1,y[f][2]*=-1;o[0]=.5*Math.sqrt(Math.max(1+y[0][0]-y[1][1]-y[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-y[0][0]+y[1][1]-y[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-y[0][0]-y[1][1]+y[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+y[0][0]+y[1][1]+y[2][2],0)),y[2][1]>y[1][2]&&(o[0]=-o[0]),y[0][2]>y[2][0]&&(o[1]=-o[1]),y[1][0]>y[0][1]&&(o[2]=-o[2])}(0===(t=t).length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(ih).reduce(oh),e,n,r,i,o),[[e,n,r,o,i]]}var sh=function(t,e,n,r,i){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a=0;a<4;a++)o[a][3]=i[a];for(var s=0;s<3;s++)for(var l=0;l<3;l++)o[3][s]+=t[l]*o[l][s];var u=r[0],c=r[1],h=r[2],r=r[3],d=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],h=(d[0][0]=1-2*(c*c+h*h),d[0][1]=2*(u*c-h*r),d[0][2]=2*(u*h+c*r),d[1][0]=2*(u*c+h*r),d[1][1]=1-2*(u*u+h*h),d[1][2]=2*(c*h-u*r),d[2][0]=2*(u*h-c*r),d[2][1]=2*(c*h+u*r),d[2][2]=1-2*(u*u+c*c),o=lh(o,d),[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);n[2]&&(h[2][1]=n[2],o=lh(o,h)),n[1]&&(h[2][1]=0,h[2][0]=n[0],o=lh(o,h)),n[0]&&(h[2][0]=0,h[1][0]=n[0],o=lh(o,h));for(var p=0;p<3;p++)for(var f=0;f<3;f++)o[p][f]*=e[p];return 0==(r=o)[0][2]&&0==r[0][3]&&0==r[1][2]&&0==r[1][3]&&0==r[2][0]&&0==r[2][1]&&1==r[2][2]&&0==r[2][3]&&0==r[3][2]&&1==r[3][3]?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])};function lh(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)n[r][i]+=e[r][o]*t[o][i];return n}function uh(t){return t.toFixed(6).replace(".000000","")}function ch(e,n){var r,i;return e.decompositionPair!==n&&(e.decompositionPair=n,r=ah(e)),n.decompositionPair!==e&&(n.decompositionPair=e,i=ah(n)),null===r[0]||null===i[0]?[[!1],[!0],function(t){return(t?n:e)[0].d}]:(r[0].push(0),i[0].push(1),[r,i,function(t){var e=function(t,e,n){r=zs(r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e),-1,1);var r,i=[];if(1===r)i=t;else for(var o=Math.acos(r),a=+Math.sin(n*o)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}(r[0][3],i[0][3],t[5]);return sh(t[0],t[1],t[2],e,t[4]).map(uh).join(",")}])}function hh(t){return t.replace(/[xy]/,"")}function dh(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var ph=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function fh(r,i,t){var e=!1;if(!r.length||!i.length){r.length||(e=!0,r=i,i=[]);for(var n=0;n<r.length;n++)!function(t){var t=r[t],e=t.t,t=t.d,n="scale"===e.substring(0,5)?1:0;i.push({t:e,d:t.map(function(t){return"number"==typeof t?new C(n):new C(n,t.unit)})})}(n)}var o=[],a=[],s=[];if(r.length!==i.length)var l=ch(r,i),o=[l[0]],a=[l[1]],s=[["matrix",[l[2]]]];else for(var u=0;u<r.length;u++){var c=r[u].t,h=i[u].t,d=r[u].d,p=i[u].d,f=nh[c],y=nh[h],g=void 0;if(ph(c,h)){var v=ch([r[u]],[i[u]]);o.push(v[0]),a.push(v[1]),s.push(["matrix",[v[2]]])}else{if(c===h)g=c;else if(f[2]&&y[2]&&hh(c)===hh(h))g=hh(c),d=f[2](d),p=y[2](p);else{if(!f[1]||!y[1]||dh(c)!==dh(h)){v=ch(r,i);o=[v[0]],a=[v[1]],s=[["matrix",[v[2]]]];break}g=dh(c),d=f[1](d),p=y[1](p)}for(var m=[],b=[],x=[],w=0;w<d.length;w++){var k=(d[w].unit===P.kNumber?Wc:Dc)(d[w],p[w],t,!1,w);m[w]=k[0],b[w]=k[1],x.push(k[2])}o.push(m),a.push(b),s.push([g,x])}}return e&&(l=o,o=a,a=l),[o,a,function(t){return t.map(function(t,n){t=t.map(function(t,e){return s[n][1][e](t)}).join(",");return"matrix"===s[n][0]&&16===t.split(",").length&&(s[n][0]="matrix3d"),"matrix3d"===s[n][0]&&6===t.split(",").length&&(s[n][0]="matrix"),s[n][0]+"("+t+")"}).join(" ")}]}function yh(t){if(Jl(t)){if("text-anchor"===t)return[new C(0,"px"),new C(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[Rc(gh(e[0])),Rc(gh(e[1]))]}return[new C(t[0]||0,"px"),new C(t[1]||0,"px")]}function gh(t){return"center"===t?"50%":"left"===t||"top"===t?"0":"right"===t||"bottom"===t?"100%":t}function vh(){this.contentBounds=void 0,this.renderBounds=void 0}function mh(){this.aabb=void 0}function bh(){this.bounds=void 0,this.boundsDirty=!0,this.renderBounds=void 0,this.renderBoundsDirty=!0,this.dirtyRenderBounds=void 0,this.dirty=!1}function xh(){this.dirty=!1,this.sorted=void 0,this.lastSortedIndex=void 0,this.renderOrder=0}function wh(){this.dirtyFlag=!1,this.localDirtyFlag=!1,this.frozen=!1,this.localPosition=_(0,0,0),this.localRotation=so(0,0,0,1),this.localScale=_(1,1,1),this.localTransform=fi(),this.localSkew=ho(0,0),this.position=_(0,0,0),this.rotation=so(0,0,0,1),this.scaling=_(1,1,1),this.worldTransform=fi(),this.origin=_(0,0,0)}var m,kh,_h=d.defineToken("CSSPropertySyntaxFactory"),Sh=d.defineToken("CSSProperty"),Eh=function(){function t(){this.parser=jc,this.mixer=Dc}return t.prototype.calculator=function(t,e,n,r){return new C(Bc(n),"deg")},t}(),Eh=t([p({token:{token:Sh,named:b.ANGLE}})],Eh),Th=((l=m=m||{}).DESTROY="destroy",l.ATTR_MODIFIED="DOMAttrModified",l.INSERTED="DOMNodeInserted",l.CHILD_INSERTED="child-inserted",l.REMOVED="removed",l.CHILD_REMOVED="child-removed",l.MOUNTED="DOMNodeInsertedIntoDocument",l.UNMOUNTED="DOMNodeRemovedFromDocument",l.BOUNDS_CHANGED="bounds-changed",l.RENDER_ORDER_CHANGED="render-order-changed",l.CULLED="culled",function(){function e(t){this.type=void 0,this.eventPhase=e.prototype.NONE,this.target=void 0,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.currentTarget=void 0,this.defaultPrevented=!1,this.timeStamp=void 0,this.nativeEvent=void 0,this.originalEvent=void 0,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.manager=void 0,this.detail=void 0,this.layer=new Ac,this.page=new Ac,this.canvas=new Ac,this.viewport=new Ac,this.path=void 0,this.view=void 0,this.which=void 0,this.returnValue=void 0,this.srcElement=void 0,this.composed=!1,this.isTrusted=void 0,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}var t=e.prototype;return t.composedPath=function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},t.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.initEvent=function(){},t.initUIEvent=function(){},rs(e,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"propagationPath",get:function(){return this.composedPath()}}]),e}()),Mh=function(r){function t(t,e){var n=r.call(this,null)||this;return n.type=t,n.detail=e,Object.assign(ls(n),e),n}return g(t,r),t}(Th),ye=function(){function t(){this.emitter=new ko.exports.EventEmitter}var e=t.prototype;return e.on=function(t,e,n){return this.addEventListener(t,e,n),this},e.addEventListener=function(t,e,n){var r,i,o,a=Es(n)&&n||Ts(n)&&n.capture,n=Ts(n)&&n.once,s=Ss(e)?void 0:e,l=!1,u="";return-1<t.indexOf(":")&&(i=(r=t.split(":"))[0],t=r[1],u=i,l=!0),t=a?t+"capture":t,e=Ss(e)?e:e.handleEvent,l&&(o=e,e=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(null==(t=n[0].target)?void 0:t.name)===u&&o.apply(void 0,n)}),n?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this},e.off=function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this},e.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.removeEventListener=function(t,e,n){var r,n=Es(n)&&n||Ts(n)&&n.capture,i=Ss(e)?void 0:e;return e=Ss(e)?e:null==(r=e)?void 0:r.handleEvent,this.emitter.off(t=n?t+"capture":t,e,i),this},e.emit=function(t,e){this.dispatchEvent(new Mh(t,e))},e.dispatchEvent=function(t){if(t instanceof Th)return(e=this.document?this:this.defaultView||(null==(e=this.ownerDocument)?void 0:e.defaultView))&&(t.manager=e.getEventService()||null,t.defaultPrevented=!1,t.path=[],t.target=this,null!=(e=t.manager)&&e.dispatchEvent(t)),!t.defaultPrevented;var e;throw new Error("DisplayObject cannot propagate events outside of the Federated Events API")},t}(),Oh=function(i){function p(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}g(p,i),p.isNode=function(t){return!!t.childNodes};var t=p.prototype;return t.getRootNode=function(t){return void 0===t&&(t={}),this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this},t.hasChildNodes=function(){return 0<this.childNodes.length},t.isDefaultNamespace=function(t){throw new Error("Method not implemented.")},t.lookupNamespaceURI=function(t){throw new Error("Method not implemented.")},t.lookupPrefix=function(t){throw new Error("Method not implemented.")},t.normalize=function(){throw new Error("Method not implemented.")},t.isEqualNode=function(t){return this===t},t.isSameNode=function(t){return this.isEqualNode(t)},t.compareDocumentPosition=function(t){if(t===this)return 0;if(!(t instanceof p))throw new TypeError("Node.compareDocumentPosition: Argument 1 does not implement interface Node.");for(var e=[i=t],n=[o=this];null!=(r=i.parentNode)?r:o.parentNode;)var r,i=i.parentNode?(e.push(i.parentNode),i.parentNode):i,o=o.parentNode?(n.push(o.parentNode),o.parentNode):o;if(i!==o)return p.DOCUMENT_POSITION_DISCONNECTED|p.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|p.DOCUMENT_POSITION_PRECEDING;var a=e.length>n.length?e:n,s=a===e?n:e;if(a[a.length-s.length]===s[0])return a===e?p.DOCUMENT_POSITION_CONTAINED_BY|p.DOCUMENT_POSITION_FOLLOWING:p.DOCUMENT_POSITION_CONTAINS|p.DOCUMENT_POSITION_PRECEDING;for(var l=a.length-s.length,u=s.length-1;0<=u;u--){var c,h=s[u],d=a[l+u];if(d!==h)return(c=h.parentNode.childNodes).indexOf(h)<c.indexOf(d)?s===e?p.DOCUMENT_POSITION_PRECEDING:p.DOCUMENT_POSITION_FOLLOWING:a===e?p.DOCUMENT_POSITION_PRECEDING:p.DOCUMENT_POSITION_FOLLOWING}return p.DOCUMENT_POSITION_FOLLOWING},t.contain=function(t){return this.contains(t)},t.contains=function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e},t.getAncestor=function(t){for(var e=this;0<t&&e;)e=e.parentNode,t--;return e},t.forEach=function(e){e(this)||this.childNodes.forEach(function(t){t.forEach(e)})},rs(p,[{key:"textContent",get:function(){var t="";this.nodeName===O.TEXT&&(t+=this.style.text);for(var e=cs(this.childNodes);!(n=e()).done;){var n=n.value;n.nodeName===O.TEXT?t+=n.nodeValue:t+=n.textContent}return t},set:function(t){var e=this;this.childNodes.slice().forEach(function(t){e.removeChild(t,!0)}),this.nodeName===O.TEXT&&(this.style.text=""+t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return 0<this.childNodes.length?this.childNodes[0]:null}},{key:"lastChild",get:function(){return 0<this.childNodes.length?this.childNodes[this.childNodes.length-1]:null}}]),p}(ye),Ph=(Oh.DOCUMENT_POSITION_DISCONNECTED=1,Oh.DOCUMENT_POSITION_PRECEDING=2,Oh.DOCUMENT_POSITION_FOLLOWING=4,Oh.DOCUMENT_POSITION_CONTAINS=8,Oh.DOCUMENT_POSITION_CONTAINED_BY=16,Oh.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,kh=kh||{},kh[kh.Standard=0]="Standard",function(){function t(){this.strategy=kh.Standard,this.visibilityPlaneMask=-1,this.visible=!0,this.enable=!0}return t.prototype.isCulled=function(){return this.enable&&!this.visible},t}()),Ch=(Ph.tag="c-cullable",vh.tag="c-geometry",mh.tag="c-rbush-node",d.defineToken("RBushRoot")),Ah=(bh.tag="c-renderable",xh.tag="c-sortable",wh.tag="c-transform",function(u){function t(t,e,n,r,i,o,a,s){var l=u.call(this,null)||this;return l.relatedNode=void 0,l.prevValue=void 0,l.newValue=void 0,l.attrName=void 0,l.attrChange=void 0,l.prevParsedValue=void 0,l.newParsedValue=void 0,l.relatedNode=e,l.prevValue=n,l.newValue=r,l.attrName=i,l.attrChange=o,l.prevParsedValue=a,l.newParsedValue=s,l.type=t,l}return g(t,u),t}(Th)),Nh=(Ah.ADDITION=2,Ah.MODIFICATION=1,Ah.REMOVAL=3,0),Lh=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).sceneGraphService=Xr.get(Nd),t.entity=Nh++,t.renderable=new bh,t.cullable=new Ph,t.transformable=new wh,t.sortable=new xh,t.geometry=new vh,t.rBushNode=new mh,t.id=void 0,t.name=void 0,t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}g(t,i),t.isElement=function(t){return!!t.getAttribute};var e=t.prototype;return e.cloneNode=function(t){throw new Error("Method not implemented.")},e.appendChild=function(t,e){return this.sceneGraphService.attach(t,this,e),this.dispatchEvent(new Mh(m.CHILD_INSERTED,{child:t})),t.dispatchEvent(new Ah(m.INSERTED,this,"","","",0,"","")),t},e.insertBefore=function(t,e){return e?(e=this.childNodes.indexOf(e),this.appendChild(t,e-1)):this.appendChild(t),t},e.replaceChild=function(t,e,n){var r=this.childNodes.indexOf(e);return this.removeChild(e,n),this.appendChild(t,r),e},e.removeChild=function(t,e){return void 0===e&&(e=!0),t.dispatchEvent(new Ah(m.REMOVED,this,"","","",0,"","")),e&&(t.dispatchEvent(new Mh(m.DESTROY)),t.destroyed=!0),this.dispatchEvent(new Mh(m.CHILD_REMOVED,{child:t})),this.sceneGraphService.detach(t),e&&t.emitter.removeAllListeners(),t},e.removeChildren=function(e){var n=this;void 0===e&&(e=!0),this.childNodes.slice().forEach(function(t){n.removeChild(t,e)})},e.matches=function(t){return this.sceneGraphService.matches(t,this)},e.getElementById=function(t){return this.sceneGraphService.querySelector("#"+t,this)},e.getElementsByName=function(t){return this.sceneGraphService.querySelectorAll('[name="'+t+'"]',this)},e.getElementsByClassName=function(t){return this.sceneGraphService.querySelectorAll("."+t,this)},e.getElementsByTagName=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.querySelector=function(t){return this.sceneGraphService.querySelector(t,this)},e.querySelectorAll=function(t){return this.sceneGraphService.querySelectorAll(t,this)},e.closest=function(t){var e=this;do{if(this.sceneGraphService.matches(t,e))return e}while(null!==(e=e.parentElement));return null},e.find=function(e){var n=this,r=null;return this.forEach(function(t){return!(t===n||!e(t))&&(r=t,!0)}),r},e.findAll=function(e){var n=this,r=[];return this.forEach(function(t){t!==n&&e(t)&&r.push(t)}),r},e.after=function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t,e){var n;return null==(n=r.parentNode)?void 0:n.appendChild(t,i+e+1)})}},e.before=function(){if(this.parentNode){for(var t=this.parentNode.childNodes.indexOf(this),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n.slice(1);this.parentNode.appendChild(i,t),i.after.apply(i,o)}},e.replaceWith=function(){this.after.apply(this,arguments),this.remove()},e.append=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e.appendChild(t)})},e.prepend=function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t,e){return n.appendChild(t,e)})},e.replaceChildren=function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)},e.remove=function(t){return void 0===t&&(t=!0),this.parentNode?this.parentNode.removeChild(this,t):this},e.destroy=function(){this.dispatchEvent(new Mh(m.DESTROY)),this.remove(!1),this.emitter.removeAllListeners(),this.destroyed=!0},e.getGeometryBounds=function(){return this.sceneGraphService.getGeometryBounds(this)},e.getRenderBounds=function(){return this.sceneGraphService.getBounds(this,!0)},e.getBounds=function(){return this.sceneGraphService.getBounds(this)},e.getLocalBounds=function(){return this.sceneGraphService.getLocalBounds(this)},e.getBoundingClientRect=function(){return this.sceneGraphService.getBoundingClientRect(this)},e.getClientRects=function(){return[this.getBoundingClientRect()]},e.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.getAttributeNames=function(){return Object.keys(this.attributes)},e.getAttribute=function(t){var e=this.attributes[t];return void 0===e&&(t=iu(t.toString(),"")[0],e=this.attributes[t]),M(e)?null:e},e.hasAttribute=function(t){return this.getAttributeNames().includes(t)},e.hasAttributes=function(){return!!this.getAttributeNames().length},e.removeAttribute=function(t){this.setAttribute(t,null),delete this.attributes[t]},e.setAttribute=function(t,e,n){this.attributes[t]=e},e.getAttributeNS=function(t,e){throw new Error("Method not implemented.")},e.getAttributeNode=function(t){throw new Error("Method not implemented.")},e.getAttributeNodeNS=function(t,e){throw new Error("Method not implemented.")},e.hasAttributeNS=function(t,e){throw new Error("Method not implemented.")},e.removeAttributeNS=function(t,e){throw new Error("Method not implemented.")},e.removeAttributeNode=function(t){throw new Error("Method not implemented.")},e.setAttributeNS=function(t,e,n){throw new Error("Method not implemented.")},e.setAttributeNode=function(t){throw new Error("Method not implemented.")},e.setAttributeNodeNS=function(t){throw new Error("Method not implemented.")},e.toggleAttribute=function(t,e){throw new Error("Method not implemented.")},rs(t,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(t){return""!==t})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){var t;return this.parentNode?(t=this.parentNode.childNodes.indexOf(this),this.parentNode.childNodes[t+1]||null):null}},{key:"previousSibling",get:function(){var t;return this.parentNode?(t=this.parentNode.childNodes.indexOf(this),this.parentNode.childNodes[t-1]||null):null}}]),t}(Oh),Ih=function(){function t(){this.pool={},this.htmlPool=[]}var e=t.prototype;return e.getByEntity=function(t){return this.pool[t]},e.add=function(t,e){(this.pool[t]=e).nodeName===O.HTML&&this.htmlPool.push(e)},e.remove=function(t){var e=this.pool[t];delete this.pool[t],e.nodeName===O.HTML&&(t=this.htmlPool.indexOf(e),this.htmlPool.splice(t,1))},e.getHTMLs=function(){return this.htmlPool},t}(),Ih=t([p()],Ih),Rh={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},jh=function(i){function t(t){var r=i.call(this)||this;return r.config=void 0,r.styleValueRegistry=Xr.get(Bl),r.isCustomElement=!1,r.activeAnimations=[],r.mutationEvent=new Ah(m.ATTR_MODIFIED,ls(r),null,null,null,Ah.MODIFICATION,null,null),r.config=t,r.config.interactive=null!=(t=r.config.capture)?t:r.config.interactive,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||O.GROUP,r.config.style=is({},Rh,r.config.style,r.config.attrs),null!=r.config.visible&&(r.config.style.visibility=!1===r.config.visible?"hidden":"visible"),null!=r.config.interactive&&(r.config.style.pointerEvents=!1===r.config.interactive?"none":"auto"),r.style=new Proxy(is({},r.attributes,{setProperty:function(t,e){r.setAttribute(t,e)},getPropertyValue:function(t){return r.getAttribute(t)},removeProperty:function(t){r.removeAttribute(t)},item:function(){return""}}),{get:function(t,e){return void 0!==t[e]?t[e]:r.getAttribute(e)},set:function(t,e,n){return r.setAttribute(e,n),!0}}),r.initAttributes(r.config.style),Xr.get(Ih).add(r.entity,ls(r)),r}g(t,i);var e=t.prototype;return e.destroy=function(){i.prototype.destroy.call(this),Xr.get(Ih).remove(this.entity),this.getAnimations().forEach(function(t){t.cancel()})},e.cloneNode=function(e){var n=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:is({},this.attributes)});return n.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(t){t=t.cloneNode(e);n.appendChild(t)}),n},e.initAttributes=function(t){var e=this.renderable;this.styleValueRegistry.processProperties(this,t=void 0===t?{}:t),e.dirty=!0},e.setAttribute=function(t,e,n){void 0===n&&(n=!1);var t=iu(t,e),r=t[0],t=t[1];ks(e)||!n&&t===this.attributes[r]||(this.internalSetAttribute(r,t),i.prototype.setAttribute.call(this,r,t))},e.internalSetAttribute=function(t,e,n){var r,i=this,o=(void 0===n&&(n={}),this.renderable),a=this.attributes[t],s=this.parsedStyle[t];this.styleValueRegistry.processProperties(this,((r={})[t]=e,r),n),this.parsedStyle.clipPathTargets&&this.parsedStyle.clipPathTargets.length&&this.parsedStyle.clipPathTargets.forEach(function(t){i.sceneGraphService.dirtifyToRoot(t),t.dispatchEvent(new Ah(m.ATTR_MODIFIED,t,i,i,"clipPath",Ah.MODIFICATION,i,i)),t.isCustomElement&&t.isConnected&&t.attributeChangedCallback&&t.attributeChangedCallback("clipPath",i,i)}),o.dirty=!0,this.mutationEvent.prevValue=a,this.mutationEvent.newValue=e,this.mutationEvent.attrName=t,this.mutationEvent.prevParsedValue=s,this.mutationEvent.newParsedValue=this.parsedStyle[t],this.dispatchEvent(this.mutationEvent),this.isCustomElement&&this.isConnected&&this.attributeChangedCallback&&this.attributeChangedCallback(t,a,e)},e.getBBox=function(){var t=this.getBounds(),e=t.getMin(),n=e[0],e=e[1],t=t.getMax(),r=t[0],t=t[1];return new Nc(n,e,r-n,t-e)},e.setOrigin=function(t,e,n){return this.sceneGraphService.setOrigin(this,Gs(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},e.getOrigin=function(){return this.sceneGraphService.getOrigin(this)},e.setPosition=function(t,e,n){return this.sceneGraphService.setPosition(this,Gs(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},e.setLocalPosition=function(t,e,n){return this.sceneGraphService.setLocalPosition(this,Gs(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},e.translate=function(t,e,n){return this.sceneGraphService.translate(this,Gs(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},e.translateLocal=function(t,e,n){return this.sceneGraphService.translateLocal(this,Gs(t,e=void 0===e?0:e,n=void 0===n?0:n)),this},e.getPosition=function(){return this.sceneGraphService.getPosition(this)},e.getLocalPosition=function(){return this.sceneGraphService.getLocalPosition(this)},e.scale=function(t,e,n){return this.scaleLocal(t,e,n)},e.scaleLocal=function(t,e,n){return"number"==typeof t&&(t=Gs(t,e=e||t,n=n||t)),this.sceneGraphService.scaleLocal(this,t),this},e.setLocalScale=function(t,e,n){return"number"==typeof t&&(t=Gs(t,e=e||t,n=n||t)),this.sceneGraphService.setLocalScale(this,t),this},e.getLocalScale=function(){return this.sceneGraphService.getLocalScale(this)},e.getScale=function(){return this.sceneGraphService.getScale(this)},e.getEulerAngles=function(){var t=Us(v(),this.sceneGraphService.getWorldTransform(this));return t[0],t[1],Ws(t[2])},e.getLocalEulerAngles=function(){var t=Us(v(),this.sceneGraphService.getLocalRotation(this));return t[0],t[1],Ws(t[2])},e.setEulerAngles=function(t){return this.sceneGraphService.setEulerAngles(this,0,0,t),this},e.setLocalEulerAngles=function(t){return this.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},e.rotateLocal=function(t,e,n){return M(e)&&M(n)?this.sceneGraphService.rotateLocal(this,0,0,t):this.sceneGraphService.rotateLocal(this,t,e,n),this},e.rotate=function(t,e,n){return M(e)&&M(n)?this.sceneGraphService.rotate(this,0,0,t):this.sceneGraphService.rotate(this,t,e,n),this},e.setRotation=function(t,e,n,r){return this.sceneGraphService.setRotation(this,t,e,n,r),this},e.setLocalRotation=function(t,e,n,r){return this.sceneGraphService.setLocalRotation(this,t,e,n,r),this},e.setLocalSkew=function(t,e){return this.sceneGraphService.setLocalSkew(this,t,e),this},e.getRotation=function(){return this.sceneGraphService.getRotation(this)},e.getLocalRotation=function(){return this.sceneGraphService.getLocalRotation(this)},e.getLocalSkew=function(){return this.sceneGraphService.getLocalSkew(this)},e.getLocalTransform=function(){return this.sceneGraphService.getLocalTransform(this)},e.getWorldTransform=function(){return this.sceneGraphService.getWorldTransform(this)},e.setLocalTransform=function(t){return this.sceneGraphService.setLocalTransform(this,t),this},e.resetLocalTransform=function(){this.sceneGraphService.resetLocalTransform(this)},e.getAnimations=function(){return this.activeAnimations},e.animate=function(t,e){var n,r=null==(r=this.ownerDocument)?void 0:r.timeline;return this.parsedStyle.clipPathTargets&&this.parsedStyle.clipPathTargets.length&&(r=null==(n=this.parsedStyle.clipPathTargets[0].ownerDocument)?void 0:n.timeline),delete this.parsedStyle.transform,r?r.play(new wd(this,t,e)):null},e.show=function(){this.style.visibility="visible"},e.hide=function(){this.style.visibility="hidden"},e.isVisible=function(){var t;return"visible"===(null==(t=this.parsedStyle)||null==(t=t.visibility)?void 0:t.value)},e.isInteractive=function(){var t;return"none"!==(null==(t=this.parsedStyle)||null==(t=t.pointerEvents)?void 0:t.value)},e.isCulled=function(){return!(!this.cullable||!this.cullable.isCulled())},e.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,this.parentNode.children.map(function(t){return Number(t.style.zIndex)}))+1),this},e.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,this.parentNode.children.map(function(t){return Number(t.style.zIndex)}))-1),this},e.getCount=function(){return this.childElementCount},e.getParent=function(){return this.parentElement},e.getChildren=function(){return this.children},e.getFirst=function(){return this.firstElementChild},e.getLast=function(){return this.lastElementChild},e.getChildByIndex=function(t){return this.children[t]||null},e.add=function(t,e){return this.appendChild(t,e)},e.setClip=function(t){this.style.clipPath=t},e.getClip=function(){return this.style.clipPath||null},e.set=function(t,e){this.config[t]=e},e.get=function(t){return this.config[t]},e.getConfig=function(){return this.config},e.attr=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1];return i?Ts(i)?(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])}),this):2===n.length?(this.setAttribute(i,o),this):this.attributes[i]:this.attributes},e.moveTo=function(t,e,n){return this.setPosition(t,e=void 0===e?0:e,n=void 0===n?0:n),this},e.move=function(t,e,n){return this.setPosition(t,e=void 0===e?0:e,n=void 0===n?0:n),this},e.setZIndex=function(t){return this.style.zIndex=t,this},e.getMatrix=function(t){var t=t||this.getWorldTransform(),e=Mi(v(),t),n=e[0],e=e[1],r=Oi(v(),t),i=r[0],r=r[1],t=Pi(no(),t),t=Us(v(),t),o=t[0],t=(t[1],t[2]);return Ys(o||t,n,e,i,r)},e.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.setMatrix=function(t){var t=qs(t),e=t[0],n=t[1],r=t[2],i=t[3],t=t[4];this.setEulerAngles(t).setPosition(e,n).setLocalScale(r,i)},e.setLocalMatrix=function(t){var t=qs(t),e=t[0],n=t[1],r=t[2],i=t[3],t=t[4];this.setLocalEulerAngles(t).setLocalPosition(e,n).setLocalScale(r,i)},rs(t,[{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}}]),t}(Lh),Dh=["style"],Bh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Dh),e=n.call(this,is({style:is({x:"",y:""},e)},t))||this;return e.isCustomElement=!0,e}return g(t,n),t}(jh),Fh=["style"],zh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Fh);return n.call(this,is({type:O.CIRCLE,style:is({cx:"",cy:"",r:""},e)},t))||this}return g(t,n),t}(jh),Vh=["style"],Gh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Vh);return n.call(this,is({type:O.ELLIPSE,style:is({cx:"",cy:"",rx:"",ry:""},e)},t))||this}return g(t,n),t}(jh),Hh=["style"],Wh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Hh);return n.call(this,is({type:O.GROUP,style:is({x:"",y:"",width:"",height:""},e)},t))||this}return g(t,n),t}(jh),Uh=["style"],Yh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Uh);return n.call(this,is({type:O.IMAGE,style:is({x:"",y:"",img:"",width:"",height:""},e)},t))||this}return g(t,n),t}(jh),qh=["style"],Xh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,qh);return n.call(this,is({type:O.LINE,style:is({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0,isBillboard:!1},e)},t))||this}g(t,n);var e=t.prototype;return e.getPoint=function(t){var e=this.parsedStyle,n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.defX,e=e.defY,n=Pa.pointAt(n.value,r.value,i.value,o.value,t),r=n.x,i=n.y,o=Xi(v(),_(r-a,i-e,0),this.getLocalTransform());return new Ac(o[0],o[1])},e.getTotalLength=function(){var t=this.parsedStyle,e=t.x1,n=t.y1,r=t.x2,t=t.y2;return Pa.length(e.value,n.value,r.value,t.value)},t}(jh),Zh=["style"],Kh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Zh);return n.call(this,is({type:O.PATH,style:is({path:"",miterLimit:""},e)},t))||this}g(t,n);var e=t.prototype;return e.getTotalLength=function(){return this.parsedStyle.path.totalLength},e.getPoint=function(t){var e=this.parsedStyle,n=e.defX,r=e.defY,e=e.path,i=e.totalLength,e=_a(e.absolutePath,t*i).point,t=e.x,i=e.y,e=Xi(v(),_(t-n,i-r,0),this.getLocalTransform());return new Ac(e[0],e[1])},e.getStartTangent=function(){var t,e,n=this.parsedStyle.path.segments,r=[];return 1<n.length&&(t=n[0].currentPoint,e=n[1].currentPoint,r=[],(n=n[1].startTangent)?r.push([t[0]-n[0],t[1]-n[1]]):r.push([e[0],e[1]]),r.push([t[0],t[1]])),r},e.getEndTangent=function(){var t,e,n=this.parsedStyle.path.segments,r=n.length,i=[];return 1<r&&(t=n[r-2].currentPoint,e=n[r-1].currentPoint,i=[],(n=n[r-1].endTangent)?i.push([e[0]-n[0],e[1]-n[1]]):i.push([t[0],t[1]]),i.push([e[0],e[1]])),i},t}(jh),$h=["style"],Jh=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,$h);return n.call(this,is({type:O.POLYGON,style:is({points:"",miterLimit:""},e)},t))||this}return g(t,n),t}(jh),Qh=["style"],td=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,Qh);return n.call(this,is({type:O.POLYLINE,style:is({points:"",miterLimit:""},e)},t))||this}g(t,n);var e=t.prototype;return e.getTotalLength=function(){return this.parsedStyle.points.totalLength},e.getPoint=function(n){var t=this.parsedStyle,e=t.defX,r=t.defY,t=t.points,i=t.points,t=t.segments,o=0,a=0,t=(t.forEach(function(t,e){n>=t[0]&&n<=t[1]&&(o=(n-t[0])/(t[1]-t[0]),a=e)}),Pa.pointAt(i[a][0],i[a][1],i[a+1][0],i[a+1][1],o)),i=t.x,t=t.y,i=Xi(v(),_(i-e,t-r,0),this.getLocalTransform());return new Ac(i[0],i[1])},e.getStartTangent=function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.getEndTangent=function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},t}(jh),ed=["style"],nd=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,ed);return n.call(this,is({type:O.RECT,style:is({x:"",y:"",width:"",height:"",radius:""},e)},t))||this}return g(t,n),t}(jh),rd=["style"],id=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,rd);return n.call(this,is({type:O.TEXT,style:is({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",whiteSpace:"pre",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},e)},t))||this}g(t,n);var e=t.prototype;return e.getComputedTextLength=function(){var t;return(null==(t=this.parsedStyle.metrics)?void 0:t.maxLineWidth)||0},e.getLineBoundingRects=function(){var t;return(null==(t=this.parsedStyle.metrics)?void 0:t.lineMetrics)||[]},t}(jh),od=["style"],ad=function(n){function t(t){var t=void 0===t?{}:t,e=t.style,t=ss(t,od),e=n.call(this,is({type:O.HTML,style:is({x:"",y:"",width:"auto",height:"auto",innerHTML:""},e)},t))||this;return e.cullable.enable=!1,e}g(t,n);var e=t.prototype;return e.getDomElement=function(){return this.parsedStyle.$el},e.getBoundingClientRect=function(){return this.parsedStyle.$el.getBoundingClientRect()},e.getClientRects=function(){return[this.getBoundingClientRect()]},e.getBounds=function(){var t,e,n=this.getBoundingClientRect(),r=null==(r=this.ownerDocument)||null==(r=r.defaultView)?void 0:r.getContextService().getBoundingClientRect();return r?(t=n.left-r.left,r=n.top-r.top,(e=new Oc).setMinMax(_(t,r,0),_(t+n.width,r+n.height,0)),e):null},e.getLocalBounds=function(){if(this.parentNode){var t,e=bi(fi(),this.parentNode.getWorldTransform()),n=this.getBounds();if(!Oc.isEmpty(n))return(t=new Oc).setFromTransformedAABB(n,e),t}return this.getBounds()},t}(jh),sd=function(i){function t(t,e,n,r){t=i.call(this,t)||this;return t.currentTime=void 0,t.timelineTime=void 0,t.currentTime=n,t.timelineTime=r,t.target=e,t.type="finish",t.bubbles=!1,t.currentTarget=e,t.defaultPrevented=!1,t.eventPhase=t.AT_TARGET,t.timeStamp=Date.now(),t.currentTime=n,t.timelineTime=r,t}return g(t,i),t}(Th),ld=0,ud=function(){function t(t,e){this.effect=void 0,this.timeline=void 0,this.id=void 0,this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this.oldPlayState=void 0,this._holdTime=void 0,this.readyPromise=void 0,this.finishedPromise=void 0,this.resolveReadyPromise=void 0,this.rejectReadyPromise=void 0,this.resolveFinishedPromise=void 0,this.rejectFinishedPromise=void 0,this.onfinish=void 0,this.oncancel=void 0,this.onframe=void 0,this._currentTime=0,this._startTime=void 0,this._playbackRate=1,this._inEffect=void 0,this._inTimeline=!0,this.onremove=void 0,((this.effect=t).animation=this).timeline=e,this.id=""+ld++,this._inEffect=!!this.effect.update(0),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}var e=t.prototype;return e.updatePromises=function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},e.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()},e.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()},e.finish=function(){this.updatePromises(),this._idle||(this.currentTime=0<this._playbackRate?this.totalDuration:0,this._startTime=this.totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.cancel=function(){this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()},e.updatePlaybackRate=function(t){this.playbackRate=t},e.targetAnimations=function(){var t;return(null==(t=this.effect)?void 0:t.target).getAnimations()},e.markTarget=function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)},e.unmarkTarget=function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)},e.tick=function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))},e.rewind=function(){if(0<=this.playbackRate)this.currentTime=0;else{if(!(this.totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this.totalDuration}},e.persist=function(){throw new Error("Method not implemented.")},e.addEventListener=function(t,e,n){throw new Error("Method not implemented.")},e.removeEventListener=function(t,e,n){throw new Error("Method not implemented.")},e.dispatchEvent=function(t){throw new Error("Method not implemented.")},e.commitStyles=function(){throw new Error("Method not implemented.")},e.ensureAlive=function(){var t;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null==(t=this.effect)||!t.update(-1)):this._inEffect=!(null==(t=this.effect)||!t.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))},e.tickCurrentTime=function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=0<this._playbackRate?this.totalDuration:0),this.ensureAlive())},e.fireEvents=function(t){var e,n=this;this._isFinished?this._finishedFlag||(this.onfinish&&(e=new sd(null,this,this.currentTime,t),setTimeout(function(){n.onfinish&&n.onfinish(e)})),this._finishedFlag=!0):(this.onframe&&"running"===this.playState&&(t=new sd(null,this,this.currentTime,t),this.onframe(t)),this._finishedFlag=!1)},rs(t,[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(t,e){n.resolveReadyPromise=function(){t(n)},n.rejectReadyPromise=function(){e(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(t,e){n.resolveFinishedPromise=function(){t(n)},n.rejectFinishedPromise=function(){e(new Error)}}),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;t=Number(t),isNaN(t)||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null==(e=this.timeline)?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:"startTime",get:function(){return this._startTime},set:function(t){null!==t&&(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle||(this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){var e;t!==this._playbackRate&&(this.updatePromises(),e=this.currentTime,this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises())}},{key:"_isFinished",get:function(){return!this._idle&&(0<this._playbackRate&&Number(this._currentTime)>=this.totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){var t;return Number(null==(t=this.effect)?void 0:t.getComputedTiming().endTime)}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}}]),t}();function cd(t,e){return Number(t.id)-Number(e.id)}var hd=function(){function t(t){var n=this;this.document=void 0,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.frameId=void 0,this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(e){var t=n.rafCallbacks;n.rafCallbacks=[],e<Number(n.currentTime)&&(e=Number(n.currentTime)),n.animations.sort(cd),n.animations=n.tick(e,!0,n.animations)[0],t.forEach(function(t){t[1](e)}),n.applyPendingEffects()},this.document=t}var e=t.prototype;return e.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.isTicking=function(){return this.inTick},e.play=function(t){t=new ud(t,this);return this.animations.push(t),this.restartWebAnimationsNextTick(),t.updatePromises(),t.play(),t.updatePromises(),t},e.applyDirtiedAnimation=function(t){var e=this;this.inTick||(t.markTarget(),(t=t.targetAnimations()).sort(cd),this.tick(Number(this.currentTime),!1,t.slice())[1].forEach(function(t){t=e.animations.indexOf(t);-1!==t&&e.animations.splice(t,1)}),this.applyPendingEffects())},e.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){null!=t&&t.applyInterpolations()}),this.pendingEffects=[]},e.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return"finished"!==t.playState&&"idle"!==t.playState})},e.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.rAF=function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e},e.requestAnimationFrame=function(e){var n=this;return this.rAF(function(t){n.updateAnimationsPromises(),e(t),n.updateAnimationsPromises()})},e.tick=function(n,r,t){var i=this,o=(this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1,[]),a=[],s=[],l=[];return t.forEach(function(t){t.tick(n,r),t._inEffect?(a.push(t.effect),t.markTarget()):(o.push(t.effect),t.unmarkTarget()),t._needsTick&&(i.ticking=!0);var e=t._inEffect||t._needsTick;((t._inTimeline=e)?s:l).push(t)}),(t=this.pendingEffects).push.apply(t,o),(t=this.pendingEffects).push.apply(t,a),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[s,l]},t}(),dd=function(e){function t(){var t=e.call(this)||this,r=(t.defaultView=null,t.documentElement=void 0,t.timeline=void 0,t.ownerDocument=null,t.nodeName="document",t.timeline=new hd(ls(t)),{});return Ap.forEach(function(t){var e=t.name,n=t.inherited,t=t.defaultValue;n&&t&&(r[e]=Ss(t)?t(O.GROUP):t)}),t.documentElement=new Wh({id:"g-root",style:r}),t.documentElement.ownerDocument=ls(t),t.documentElement.parentNode=ls(t),t.childNodes=[t.documentElement],t}g(t,e);var n=t.prototype;return n.createElement=function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t),t=(n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?id:Wh),new n(e));return t.ownerDocument=this,t},n.createElementNS=function(t,e,n){return this.createElement(e,n)},n.cloneNode=function(t){throw new Error("Method not implemented.")},n.destroy=function(){try{this.documentElement.destroy()}catch(t){}this.timeline.destroy()},n.elementFromPoint=function(){var n=es(S().mark(function t(e,n){var r,i,o,a,s,l;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.defaultView.canvas2Viewport({x:e,y:n}),r=i.x,i=i.y,a=this.defaultView.getConfig(),o=a.width,a=a.height,r<0||i<0||o<r||a<i)return t.abrupt("return",null);t.next=4;break;case 4:return o=this.defaultView.viewport2Client({x:r,y:i}),a=o.x,s=o.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:r,viewportY:i,clientX:a,clientY:s},picked:[]});case 7:return s=t.sent,l=s.picked,t.abrupt("return",l&&l[0]||this.documentElement);case 10:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),n.elementsFromPoint=function(){var n=es(S().mark(function t(e,n){var r,i,o,a,s,l;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.defaultView.canvas2Viewport({x:e,y:n}),r=i.x,i=i.y,a=this.defaultView.getConfig(),o=a.width,a=a.height,r<0||i<0||o<r||a<i)return t.abrupt("return",[]);t.next=4;break;case 4:return o=this.defaultView.viewport2Client({x:r,y:i}),a=o.x,s=o.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:r,viewportY:i,clientX:a,clientY:s},picked:[]});case 7:return s=t.sent,(l=s.picked)[l.length-1]!==this.documentElement&&l.push(this.documentElement),t.abrupt("return",l);case 11:case"end":return t.stop()}},t,this)}));return function(t,e){return n.apply(this,arguments)}}(),n.appendChild=function(t,e){throw new Error("Use document.documentElement instead.")},n.insertBefore=function(t,e){throw new Error("Use document.documentElement instead.")},n.removeChild=function(t,e){throw new Error("Use document.documentElement instead.")},n.replaceChild=function(t,e,n){throw new Error("Use document.documentElement instead.")},n.append=function(){throw new Error("Use document.documentElement instead.")},n.prepend=function(){throw new Error("Use document.documentElement instead.")},n.getElementById=function(t){return this.documentElement.getElementById(t)},n.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},n.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},n.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},n.querySelector=function(t){return this.documentElement.querySelector(t)},n.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},n.find=function(t){return this.documentElement.find(t)},n.findAll=function(t){return this.documentElement.findAll(t)},rs(t,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}}]),t}(Oh),pd=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).altKey=void 0,t.button=void 0,t.buttons=void 0,t.ctrlKey=void 0,t.metaKey=void 0,t.relatedTarget=void 0,t.shiftKey=void 0,t.client=new Ac,t.movement=new Ac,t.offset=new Ac,t.global=new Ac,t.screen=new Ac,t}g(t,i);var e=t.prototype;return e.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.initMouseEvent=function(){throw new Error("Method not implemented.")},rs(t,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"x",get:function(){return this.clientX}},{key:"y",get:function(){return this.clientY}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}}]),t}(Th),fd=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).pointerId=void 0,t.width=0,t.height=0,t.isPrimary=!1,t.pointerType=void 0,t.pressure=void 0,t.tangentialPressure=void 0,t.tiltX=void 0,t.tiltY=void 0,t.twist=void 0,t}g(t,i);var e=t.prototype;return e.getCoalescedEvents=function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]},e.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t}(pd),yd=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).deltaMode=void 0,t.deltaX=void 0,t.deltaY=void 0,t.deltaZ=void 0,t.DOM_DELTA_LINE=0,t.DOM_DELTA_PAGE=1,t.DOM_DELTA_PIXEL=2,t}return g(t,i),t}(pd),gd=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Dl,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.playbackRate=void 0,this.effect=void 0,this.composite=void 0,this.activeDuration=void 0,this.endTime=void 0,this.currentIteration=null,this.progress=null}return rs(t,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=Hl(t),this._easing=t}}]),t}();function vd(t,i){if(null===t)return[];for(var e=(t=Array.isArray(t)?t:function(t){var e,n=[];for(e in t)if(!(e in["easing","offset","composite"]))for(var r,i=t[e],o=(i=Array.isArray(i)?i:[i]).length,a=0;a<o;a++)n[a]||(r={},"offset"in t&&(r.offset=Number(t.offset)),"easing"in t&&(r.easing=t.easing),"composite"in t&&(r.composite=t.composite),n[a]=r),void 0!==i[a]&&null!==i[a]&&(n[a][e]=i[a]);return n.sort(function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)}),n}(t)).map(function(t){var e,n={};for(e in null!=i&&i.composite&&(n.composite="auto"),t){var r=t[e];if("offset"===e){if(null!==r){if(r=Number(r),!isFinite(r))throw new Error("Keyframe offsets must be numbers.");if(r<0||1<r)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=r}}else if("composite"===e&&-1===["replace","add","accumulate","auto"].indexOf(r))throw new Error(r+" compositing is not supported");n[e]=r}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==i?void 0:i.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n}),n=!0,r=-1/0,o=0;o<e.length;o++){var a=e[o].offset;if(M(a))n=!1;else{if(a<r)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=a}}if(e=e.filter(function(t){return 0<=Number(t.offset)&&Number(t.offset)<=1}),!n)for(var s=e.length,l=(e[s-1].computedOffset=Number(null!=(t=e[s-1].offset)?t:1),1<s&&(e[0].computedOffset=Number(null!=(t=e[0].offset)?t:0)),0),u=Number(e[0].computedOffset),c=1;c<s;c++){var h=e[c].computedOffset;if(!M(h)&&!M(u)){for(var d=1;d<c-l;d++)e[l+d].computedOffset=u+(Number(h)-u)*d/(c-l);l=c,u=Number(h)}}return e}var md="backwards|forwards|both|none".split("|"),bd="reverse|alternate|alternate-reverse".split("|");function xd(t,e){var n,r,i;return t=function(t){"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t});return t}(null!=(r=t)?r:{duration:"auto"}),n=t,r=e,i=new gd,r&&(i.fill="both",i.duration="auto"),"number"!=typeof n||isNaN(n)?void 0!==n&&Object.keys(n).forEach(function(t){void 0===n[t]||null===n[t]||"auto"===n[t]||!("number"!=typeof i[t]&&"duration"!==t||"number"==typeof n[t]&&!isNaN(n[t]))||"fill"===t&&-1===md.indexOf(n[t])||"direction"===t&&-1===bd.indexOf(n[t])||(i[t]=n[t])}):i.duration=n,i}var wd=function(){function t(t,e,n){var r=this;this.composite="replace",this.iterationComposite="replace",this.target=void 0,this.animation=void 0,this.timing=void 0,this.computedTiming=void 0,this.normalizedKeyframes=void 0,this.timeFraction=void 0,this.interpolations=void 0,this.target=t,this.timing=xd(n,!1),(this.timing.effect=this).timing.activeDuration=Wl(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=vd(e,this.timing),this.interpolations=Ql(this.normalizedKeyframes,this.timing,this.target),this.computedTiming=new Proxy(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?r.animation&&r.animation.currentTime||null:"currentIteration"===e?r.animation&&"running"===r.animation.playState?t.currentIteration||0:null:"progress"===e?r.animation&&"running"===r.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}})}var e=t.prototype;return e.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.update=function(t){return null!==t&&(this.timeFraction=Zl(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)},e.getKeyframes=function(){return this.normalizedKeyframes},e.setKeyframes=function(t){this.normalizedKeyframes=vd(t)},e.getComputedTiming=function(){return this.computedTiming},e.getTiming=function(){return this.timing},e.updateTiming=function(e){var n=this;Object.keys(e||{}).forEach(function(t){n.timing=e[t]})},t}(),kd=function(){function t(){this.registry={},this.define(O.CIRCLE,zh),this.define(O.ELLIPSE,Gh),this.define(O.RECT,nd),this.define(O.IMAGE,Yh),this.define(O.LINE,Xh),this.define(O.GROUP,Wh),this.define(O.PATH,Kh),this.define(O.POLYGON,Jh),this.define(O.POLYLINE,td),this.define(O.TEXT,id),this.define(O.HTML,ad)}var e=t.prototype;return e.define=function(t,e){this.registry[t]=e},e.get=function(t){return this.registry[t]},t}(),_d=d.defineToken("SceneGraphSelectorFactory"),Sd=d.defineToken("SceneGraphSelector",{multiple:!1}),Ed=/\[\s*(.*)=(.*)\s*\]/,Td=function(){function t(){}var e=t.prototype;return e.selectOne=function(e,n){var t,r,i,o=this;return e.startsWith(".")?n.find(function(t){return-1<((null==t?void 0:t.classList)||[]).indexOf(o.getIdOrClassname(e))}):e.startsWith("#")?n.find(function(t){return t.id===o.getIdOrClassname(e)}):e.startsWith("[")?(t=this.getAttribute(e),r=t.name,i=t.value,r?n.find(function(t){return n!==t&&("name"===r?t.name===i:o.attributeToString(t,r)===i)}):null):n.find(function(t){return n!==t&&t.nodeName===e})},e.selectAll=function(e,n){var t,r,i,o=this;return e.startsWith(".")?n.findAll(function(t){return n!==t&&-1<((null==t?void 0:t.classList)||[]).indexOf(o.getIdOrClassname(e))}):e.startsWith("#")?n.findAll(function(t){return n!==t&&t.id===o.getIdOrClassname(e)}):e.startsWith("[")?(t=this.getAttribute(e),r=t.name,i=t.value,r?n.findAll(function(t){return n!==t&&("name"===r?t.name===i:o.attributeToString(t,r)===i)}):[]):n.findAll(function(t){return n!==t&&t.nodeName===e})},e.is=function(t,e){var n,r;return t.startsWith(".")?e.className===this.getIdOrClassname(t):t.startsWith("#")?e.id===this.getIdOrClassname(t):t.startsWith("[")?(n=(r=this.getAttribute(t)).name,r=r.value,"name"===n?e.name===r:this.attributeToString(e,n)===r):e.nodeName===t},e.getIdOrClassname=function(t){return t.substring(1)},e.getAttribute=function(t){var t=t.match(Ed),e="",n="";return t&&2<t.length&&(e=t[1].replace(/"/g,""),n=t[2].replace(/"/g,"")),{name:e,value:n}},e.attributeToString=function(t,e){if(!t.getAttribute)return"";t=t.getAttribute(e);return!M(t)&&t.toString?t.toString():""},t}();function Md(t,e){var n=Number(t.style.zIndex),r=Number(e.style.zIndex);if(n===r){var i=t.parentNode;if(i)return(i=i.childNodes||[]).indexOf(t)-i.indexOf(e)}return n-r}var Od,Pd,Cd,Ad,Td=t([p({token:Sd})],Td),Nd=d.defineToken("SceneGraphService"),Ld=function(){function t(){var a,i,o,s,l,y=this;this.sceneGraphSelectorFactory=void 0,this.pendingEvents=[],this.boundsChangedEvent=new Mh(m.BOUNDS_CHANGED),this.rotate=(a=no(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));var i,o,n=t.transformable;null!==t.parentNode&&t.parentNode.transformable?(ao(r=no(),e[0],e[1],e[2]),i=y.getRotation(t),o=y.getRotation(t.parentNode),lo(a,o),oo(a,a),io(r,a,r),io(n.localRotation,r,i),co(n.localRotation,n.localRotation),y.dirtifyLocal(t,n)):y.rotateLocal(t,e)}),this.rotateLocal=(i=no(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));n=t.transformable;ao(i,e[0],e[1],e[2]),uo(n.localRotation,n.localRotation,i),y.dirtifyLocal(t,n)}),this.setEulerAngles=(o=no(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));n=t.transformable;null!==t.parentNode&&t.parentNode.transformable?(ao(n.localRotation,e[0],e[1],e[2]),r=y.getRotation(t.parentNode),lo(o,oo(no(),r)),uo(n.localRotation,n.localRotation,o),y.dirtifyLocal(t,n)):y.setLocalEulerAngles(t,e)}),this.translateLocal=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));var i,o,a,s,l,u,c,h,d,p,f,n=t.transformable;Ki(e,v())||(i=r=e,o=n.localRotation,a=o[0],s=o[1],l=o[2],o=o[3],u=i[0],c=i[1],i=i[2],f=s*(p=a*c-s*u)-l*(d=l*u-a*i),l=l*(h=s*i-l*c)-a*p,a=a*d-s*h,d*=s=2*o,p*=s,l*=2,a*=2,r[0]=u+(h*=s)+(f*=2),r[1]=c+d+l,r[2]=i+p+a,Gi(n.localPosition,n.localPosition,e),y.dirtifyLocal(t,n))},this.setPosition=(s=fi(),function(t,e){var n,r=t.transformable;e=_(e[0],e[1],e[2]||0),Ki(y.getPosition(t),e)||(r.position=e,null!==t.parentNode&&t.parentNode.transformable?(n=t.parentNode.transformable,gi(s,n.worldTransform),bi(s,s),Xi(r.localPosition,e,s)):zi(r.localPosition,e),y.dirtifyLocal(t,r))}),this.translate=(l=v(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),Ki(e="number"==typeof e?_(e,n,r):e,v())||(Gi(l,y.getPosition(t),e),y.setPosition(t,l))}),this.setRotation=function(){var a=no();return function(t,e,n,r,i){var o=t.transformable;"number"==typeof e&&(e=so(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable?(n=y.getRotation(t.parentNode),lo(a,n),oo(a,a),io(o.localRotation,a,e),co(o.localRotation,o.localRotation),y.dirtifyLocal(t,o)):y.setLocalRotation(t,e)}}}var e=t.prototype;return e.matches=function(t,e){return this.sceneGraphSelectorFactory().is(t,e)},e.querySelector=function(t,e){return this.sceneGraphSelectorFactory().selectOne(t,e)},e.querySelectorAll=function(t,e){return this.sceneGraphSelectorFactory().selectAll(t,e)},e.attach=function(t,e,n){t.parentNode&&this.detach(t),t.parentNode=e,M(n)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(n,0,t);n=e.sortable,n&&(n.dirty=!0),e=t.transformable;e&&this.dirtifyWorld(t,e),e.frozen&&this.unfreezeParentToRoot(t)},e.detach=function(t){var e,n;t.parentNode&&(e=t.transformable,(n=t.parentNode.sortable)&&(n.dirty=!0),-1<(n=t.parentNode.childNodes.indexOf(t))&&t.parentNode.childNodes.splice(n,1),e&&this.dirtifyWorld(t,e),t.parentNode=null)},e.getOrigin=function(t){return t.transformable.origin},e.setOrigin=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));n=t.transformable;Ki(e,n.origin)||((r=n.origin)[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtifyLocal(t,n))},e.setLocalEulerAngles=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=_(e,n,r));n=t.transformable;ao(n.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(t,n)},e.setLocalPosition=function(t,e){var n=t.transformable;e=_(e[0],e[1],e[2]||0),Ki(n.localPosition,e)||(zi(n.localPosition,e),this.dirtifyLocal(t,n))},e.scaleLocal=function(t,e){var n,r,i=t.transformable;n=i.localScale,r=i.localScale,e=_(e[0],e[1],e[2]||1),n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],this.dirtifyLocal(t,i)},e.setLocalScale=function(t,e){var n=t.transformable,e=_(e[0],e[1],e[2]||n.localScale[2]);Ki(e,n.localScale)||(zi(n.localScale,e),this.dirtifyLocal(t,n))},e.setLocalRotation=function(t,e,n,r,i){"number"==typeof e&&(e=so(e,n,r,i));n=t.transformable;lo(n.localRotation,e),this.dirtifyLocal(t,n)},e.setLocalSkew=function(t,e,n){"number"==typeof e&&(e=ho(e,n));var r,n=t.transformable;r=n.localSkew,e=e,r[0]=e[0],r[1]=e[1],this.dirtifyLocal(t,n)},e.dirtifyLocal=function(t,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))},e.dirtifyWorld=function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)},e.triggerPendingEvents=function(){function r(t,e){i.has(t.entity)||(n.boundsChangedEvent.detail=e,t.dispatchEvent(n.boundsChangedEvent),i.add(t.entity))}var n=this,i=new Set;this.pendingEvents.forEach(function(t){var e=t[0],n=t[1];n.affectChildren?e.forEach(function(t){r(t,n)}):r(e,n)}),this.pendingEvents=[]},e.dirtifyToRoot=function(t,e){void 0===e&&(e=!1);var n=t;for(n.renderable&&(n.renderable.dirty=!0);n;){var r=n.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0),n=n.parentNode}this.pendingEvents.push([t,{affectChildren:e}])},e.getPosition=function(t){var e=t.transformable;return Mi(e.position,this.getWorldTransform(t,e))},e.getRotation=function(t){var e=t.transformable;return Pi(e.rotation,this.getWorldTransform(t,e))},e.getScale=function(t){var e=t.transformable;return Oi(e.scaling,this.getWorldTransform(t,e))},e.getWorldTransform=function(t,e){return((e=void 0===e?t.transformable:e).localDirtyFlag||e.dirtyFlag)&&(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e)),e.worldTransform},e.getLocalPosition=function(t){return t.transformable.localPosition},e.getLocalRotation=function(t){return t.transformable.localRotation},e.getLocalScale=function(t){return t.transformable.localScale},e.getLocalSkew=function(t){return t.transformable.localSkew},e.calcLocalTransform=function(t){Ci(t.localTransform,t.localRotation,t.localPosition,_(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||((e=mi(fi()))[4]=Math.tan(t.localSkew[0]),e[1]=Math.tan(t.localSkew[1]),xi(t.localTransform,t.localTransform,e));var e=Ci(fi(),so(0,0,0,1),v(),t.localScale,t.origin);xi(t.localTransform,t.localTransform,e)},e.getLocalTransform=function(t){t=t.transformable;return t.localDirtyFlag&&(this.calcLocalTransform(t),t.localDirtyFlag=!1),t.localTransform},e.setLocalTransform=function(t,e){var n=Mi(v(),e),r=Pi(no(),e),e=Oi(v(),e);this.setLocalScale(t,e),this.setLocalPosition(t,n),this.setLocalRotation(t,r)},e.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.getTransformedGeometryBounds=function(t,e){var n,e=this.getGeometryBounds(t,e=void 0===e?!1:e);return Oc.isEmpty(e)?null:((n=new Oc).setFromTransformedAABB(e,this.getWorldTransform(t)),n)},e.getGeometryBounds=function(t,e){t=t.geometry;return((e=void 0===e?!1:e)?t.renderBounds:t.contentBounds||null)||new Oc},e.getBounds=function(t,e){var n=this,r=(void 0===e&&(e=!1),t.renderable);if(!r.boundsDirty&&!e&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&e&&r.renderBounds)return r.renderBounds;var i,o=this.getTransformedGeometryBounds(t,e),a=(t.childNodes.forEach(function(t){t=n.getBounds(t,e);t&&(o?o.add(t):(o=new Oc).update(t.center,t.halfExtents))}),t.parsedStyle.clipPath);return a&&((a=this.getTransformedGeometryBounds(a,!0))&&(i=new Oc).setFromTransformedAABB(a,this.getWorldTransform(t)),o?i&&(o=i.intersection(o)):o=i),o&&(e?r.renderBounds=o:r.bounds=o),e?r.renderBoundsDirty=!1:r.boundsDirty=!1,o||new Oc},e.getLocalBounds=function(t){if(t.parentNode){var e,n=fi(),r=(t.parentNode.transformable&&(n=bi(fi(),this.getWorldTransform(t.parentNode))),this.getBounds(t));if(!Oc.isEmpty(r))return(e=new Oc).setFromTransformedAABB(r,n),e}return this.getBounds(t)},e.getBoundingClientRect=function(t){var e,n,r,i=this.getGeometryBounds(t),i=(Oc.isEmpty(i)||(r=new Oc).setFromTransformedAABB(i,this.getWorldTransform(t)),null==(i=t.ownerDocument)||null==(t=i.defaultView)?void 0:t.getContextService().getBoundingClientRect());return r?(e=(t=r.getMin())[0],t=t[1],n=(r=r.getMax())[0],r=r[1],new Nc(e+((null==i?void 0:i.left)||0),t+((null==i?void 0:i.top)||0),n-e,r-t)):new Nc((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)},e.dirtifyWorldInternal=function(t,e){var n=this;e.dirtyFlag||(e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach(function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}),(e=t.renderable)&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0))},e.syncHierarchy=function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}},e.sync=function(t,e){var n;e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag&&(n=(t=t.parentNode)&&t.transformable,null!==t&&n?xi(e.worldTransform,n.worldTransform,e.localTransform):gi(e.worldTransform,e.localTransform),e.dirtyFlag=!1)},e.unfreezeParentToRoot=function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}},t}(),Id=(t([f(_d),e("design:type",Function)],Ld.prototype,"sceneGraphSelectorFactory",void 0),Ld=t([p({token:Nd})],Ld),d.defineToken("ContextService",{multiple:!1})),Rd=((c=Od=Od||{})[c.CAMERA_CHANGED=0]="CAMERA_CHANGED",c[c.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",c[c.NONE=2]="NONE",d.defineToken("RenderingContext")),jd=d.defineToken("DefaultCamera");(a=Pd=Pd||{})[a.ORBITING=0]="ORBITING",a[a.EXPLORING=1]="EXPLORING",a[a.TRACKING=2]="TRACKING",(st=Cd=Cd||{})[st.DEFAULT=0]="DEFAULT",st[st.ROTATIONAL=1]="ROTATIONAL",st[st.TRANSLATIONAL=2]="TRANSLATIONAL",st[st.CINEMATIC=3]="CINEMATIC",(r=Ad=Ad||{})[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE";var Dd="updated",Bd=Math.PI/180,Fd=180/Math.PI,zd=function(r){function a(t,e){var n;return void 0===t&&(t=Pd.EXPLORING),void 0===e&&(e=Cd.DEFAULT),(n=r.call(this)||this).canvas=void 0,n.matrix=fi(),n.right=_(1,0,0),n.up=_(0,1,0),n.forward=_(0,0,1),n.position=_(0,0,1),n.focalPoint=_(0,0,0),n.distanceVector=_(0,0,-1),n.distance=1,n.azimuth=0,n.elevation=0,n.roll=0,n.relAzimuth=0,n.relElevation=0,n.relRoll=0,n.dollyingStep=0,n.maxDistance=1/0,n.minDistance=-1/0,n.zoom=1,n.rotateWorld=!1,n.fov=30,n.near=.1,n.far=1e3,n.aspect=1,n.left=void 0,n.rright=void 0,n.top=void 0,n.bottom=void 0,n.projectionMatrix=fi(),n.projectionMatrixInverse=fi(),n.jitteredProjectionMatrix=void 0,n.view=void 0,n.enableUpdate=!0,n.type=Pd.EXPLORING,n.trackingMode=Cd.DEFAULT,n.projectionMode=Ad.PERSPECTIVE,n.frustum=new Cc,n.landmarks=[],n.landmarkAnimationID=void 0,n.orthoMatrix=fi(),n.setType(t,e),n}g(a,r);var t=a.prototype;return t.isOrtho=function(){return this.projectionMode===Ad.ORTHOGRAPHIC},t.getProjectionMode=function(){return this.projectionMode},t.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.getFrustum=function(){return this.frustum},t.getPosition=function(){return this.position},t.getFocalPoint=function(){return this.focalPoint},t.getDollyingStep=function(){return this.dollyingStep},t.getNear=function(){return this.near},t.getFar=function(){return this.far},t.getZoom=function(){return this.zoom},t.getOrthoMatrix=function(){return this.orthoMatrix},t.getView=function(){return this.view},t.setEnableUpdate=function(t){this.enableUpdate=t},t.setType=function(t,e){return this.type=t,this.type===Pd.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Pd.TRACKING&&void 0!==e&&this.setTrackingMode(e),this},t.setProjectionMode=function(t){return this.projectionMode=t,this},t.setTrackingMode=function(t){if(this.type!==Pd.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},t.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},t.getViewTransform=function(){return bi(fi(),this.matrix)},t.getWorldTransform=function(){return this.matrix},t.jitterProjectionMatrix=function(t,e){t=Ei(fi(),[t,e,0]);this.jitteredProjectionMatrix=xi(fi(),t,this.projectionMatrix)},t.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.setMatrix=function(t){return this.matrix=t,this._update(),this},t.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},t.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},t.setNear=function(t){return this.projectionMode===Ad.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},t.setFar=function(t){return this.projectionMode===Ad.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},t.setViewOffset=function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===Ad.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.clearViewOffset=function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Ad.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.setZoom=function(t){return this.zoom=t,this.projectionMode===Ad.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ad.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.setPerspective=function(t,e,n,r){this.projectionMode=Ad.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var i,o,a,s,n=this.near*Math.tan(.5*Bd*this.fov)/this.zoom,e=2*n,r=this.aspect*e,l=-.5*r;return null!=(i=this.view)&&i.enabled&&(i=this.view.fullWidth,o=this.view.fullHeight,l+=this.view.offsetX*r/i,n-=this.view.offsetY*e/o,r*=this.view.width/i,e*=this.view.height/o),i=this.projectionMatrix,l=(o=l)+r,n=(r=n)-e,e=this.far,a=2*t/(r-n),s=(l+o)/(l-o),r=(r+n)/(r-n),n=-(e+t)/(e-t),e=-2*e*t/(e-t),i[0]=2*t/(l-o),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=s,i[9]=r,i[10]=n,i[11]=-1,i[12]=0,i[13]=0,i[14]=e,i[15]=0,ki(this.projectionMatrix,this.projectionMatrix,_(1,-1,1)),bi(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.setOrthographic=function(t,e,n,r,i,o){this.projectionMode=Ad.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var a,e=(this.rright-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.rright+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,n=n+e,e=r+t,r=r-t;return null!=(t=this.view)&&t.enabled&&(t=(this.rright-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(s+=t*this.view.offsetX)+t*this.view.width,r=(e-=a*this.view.offsetY)-a*this.view.height),Ii(this.projectionMatrix,s,n,r,e,i,o),ki(this.projectionMatrix,this.projectionMatrix,_(1,-1,1)),bi(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.setPosition=function(t,e,n){t=Gs(t,e=void 0===e?this.position[1]:e,n=void 0===n?this.position[2]:n);return this._setPosition(t),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.setFocalPoint=function(t,e,n){void 0===e&&(e=this.focalPoint[1]),void 0===n&&(n=this.focalPoint[2]);var r,i=_(0,1,0);return this.focalPoint=Gs(t,e,n),this.trackingMode===Cd.CINEMATIC&&(t=(r=Hi(v(),this.focalPoint,this.position))[0],e=r[1],n=r[2],r=Fi(r),e=Math.asin(e/r)*Fd,r=90+Math.atan2(n,t)*Fd,Si(n=fi(),n,r*Bd),_i(n,n,e*Bd),i=Xi(v(),[0,1,0],n)),bi(this.matrix,Ri(fi(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.getDistance=function(){return this.distance},t.setDistance=function(t){var e,n,r;return this.distance===t||t<0||(this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100,e=v(),t=this.distance,n=this.forward,r=this.focalPoint,e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate()),this},t.setMaxDistance=function(t){return this.maxDistance=t,this},t.setMinDistance=function(t){return this.minDistance=t,this},t.setAzimuth=function(t){return this.azimuth=Vs(t),this.computeMatrix(),this._getAxes(),this.type===Pd.ORBITING||this.type===Pd.EXPLORING?this._getPosition():this.type===Pd.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.getAzimuth=function(){return this.azimuth},t.setElevation=function(t){return this.elevation=Vs(t),this.computeMatrix(),this._getAxes(),this.type===Pd.ORBITING||this.type===Pd.EXPLORING?this._getPosition():this.type===Pd.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.getElevation=function(){return this.elevation},t.setRoll=function(t){return this.roll=Vs(t),this.computeMatrix(),this._getAxes(),this.type===Pd.ORBITING||this.type===Pd.EXPLORING?this._getPosition():this.type===Pd.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.getRoll=function(){return this.roll},t.rotate=function(t,e,n){if(this.relElevation=Vs(e),this.relAzimuth=Vs(t),this.relRoll=Vs(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Pd.EXPLORING){e=ro(no(),[1,0,0],(this.rotateWorld?1:-1)*this.relElevation*Bd),t=ro(no(),[0,1,0],(this.rotateWorld?1:-1)*this.relAzimuth*Bd),n=ro(no(),[0,0,1],this.relRoll*Bd),t=io(no(),t,e),t=io(no(),t,n),e=Ai(fi(),t);wi(this.matrix,this.matrix,[0,0,-this.distance]),xi(this.matrix,this.matrix,e),wi(this.matrix,this.matrix,[0,0,this.distance])}else{if(90<Math.abs(this.elevation))return this;this.computeMatrix()}return this._getAxes(),this.type===Pd.ORBITING||this.type===Pd.EXPLORING?this._getPosition():this.type===Pd.TRACKING&&this._getFocalPoint(),this._update(),this},t.pan=function(t,e){t=Gs(t,e,0),e=Bi(this.position);return Gi(e,e,Wi(v(),this.right,t[0])),Gi(e,e,Wi(v(),this.up,t[1])),this._setPosition(e),this.triggerUpdate(),this},t.dolly=function(t){var e=this.forward,n=Bi(this.position),t=(this.dollyingStep,this.distance+t*this.dollyingStep),t=Math.max(Math.min(t,this.maxDistance),this.minDistance)-this.distance;return n[0]+=t*e[0],n[1]+=t*e[1],n[2]+=t*e[2],this._setPosition(n),this.type===Pd.ORBITING||this.type===Pd.EXPLORING?this._getDistance():this.type===Pd.TRACKING&&Gi(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this},t.createLandmark=function(t,e){var e=e=void 0===e?{}:e,n=e.position,n=void 0===n?this.position:n,r=e.focalPoint,r=void 0===r?this.focalPoint:r,i=e.roll,e=e.zoom,o=new a,n=(o.setType(this.type,void 0),o.setPosition(n[0],n[1]||this.position[1],n[2]||this.position[2]),o.setFocalPoint(r[0],r[1]||this.focalPoint[1],r[2]||this.focalPoint[2]),o.setRoll(i||this.roll),o.setZoom(e||this.zoom),{name:t,matrix:yi(o.matrix),right:Bi(o.right),up:Bi(o.up),forward:Bi(o.forward),position:Bi(o.position),focalPoint:Bi(o.focalPoint),distanceVector:Bi(o.distanceVector),distance:o.distance,dollyingStep:o.dollyingStep,azimuth:o.azimuth,elevation:o.elevation,roll:o.roll,relAzimuth:o.relAzimuth,relElevation:o.relElevation,relRoll:o.relRoll,zoom:o.zoom});return this.landmarks.push(n),n},t.gotoLandmark=function(e,t){var n,s,r,i,l,u,c,h,d,p,f,y,g=this,o=(void 0===t&&(t={}),Jl(e)?this.landmarks.find(function(t){return t.name===e}):e);o&&(n=void 0===(n=(t=_s(t)?{duration:t}:t).easing)?"linear":n,r=t.duration,s=void 0===r?100:r,r=void 0===(r=t.easingFunction)?void 0:r,t=t.onfinish,i=void 0===t?void 0:t,l=.01,0===s?(this.syncFromLandmark(o),i&&i()):(void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID),u=o.position,c=o.focalPoint,h=o.zoom,d=o.roll,p=r||Hl(n),y=function(){g.setFocalPoint(c),g.setPosition(u),g.setRoll(d),g.setZoom(h),g.computeMatrix(),g.triggerUpdate(),i&&i()},this.canvas.requestAnimationFrame(function t(e){var n,r,i,o,a,e=e-(f=void 0===f?e:f);s<e?y():(n=p(e/s),r=v(),i=v(),o=1,a=0,qi(r,g.focalPoint,c,n),qi(i,g.position,u,n),a=g.roll*(1-n)+d*n,o=g.zoom*(1-n)+h*n,g.setFocalPoint(r),g.setPosition(i),g.setRoll(a),g.setZoom(o),Ji(r,c)+Ji(i,u)<=l?y():(g.computeMatrix(),g.triggerUpdate(),e<s&&(g.landmarkAnimationID=g.canvas.requestAnimationFrame(t))))})))},t._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.computeMatrix=function(){var t=ro(no(),[0,0,1],this.roll*Bd),e=(mi(this.matrix),ro(no(),[1,0,0],(this.rotateWorld&&this.type!==Pd.TRACKING||this.type===Pd.TRACKING?1:-1)*this.elevation*Bd)),n=ro(no(),[0,1,0],(this.rotateWorld&&this.type!==Pd.TRACKING||this.type===Pd.TRACKING?1:-1)*this.azimuth*Bd),n=io(no(),n,e),n=io(no(),n,t),e=Ai(fi(),n);this.type===Pd.ORBITING||this.type===Pd.EXPLORING?(wi(this.matrix,this.matrix,this.focalPoint),xi(this.matrix,this.matrix,e),wi(this.matrix,this.matrix,[0,0,this.distance])):this.type===Pd.TRACKING&&(wi(this.matrix,this.matrix,this.position),xi(this.matrix,this.matrix,e))},t._setPosition=function(t,e,n){this.position=Gs(t,e,n);t=this.matrix;t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1,this._getOrthoMatrix()},t._getAxes=function(){zi(this.right,Gs(eo(to(),[1,0,0,0],this.matrix))),zi(this.up,Gs(eo(to(),[0,1,0,0],this.matrix))),zi(this.forward,Gs(eo(to(),[0,0,1,0],this.matrix))),Ui(this.right,this.right),Ui(this.up,this.up),Ui(this.forward,this.forward)},t._getAngles=function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=Fi(this.distanceVector);0===r?(this.elevation=0,this.azimuth=0):this.type===Pd.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fd,this.azimuth=Math.atan2(-t,-n)*Fd):(this.elevation=-Math.asin(e/r)*Fd,this.azimuth=-Math.atan2(-t,-n)*Fd)},t._getPosition=function(){zi(this.position,Gs(eo(to(),[0,0,0,1],this.matrix))),this._getDistance()},t._getFocalPoint=function(){var t,e;Zi(this.distanceVector,[0,0,-this.distance],(t=di(),e=this.matrix,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)),Gi(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t._getDistance=function(){this.distanceVector=Hi(v(),this.focalPoint,this.position),this.distance=Fi(this.distanceVector),this.dollyingStep=this.distance/100},t._getOrthoMatrix=function(){var t,e;this.projectionMode===Ad.ORTHOGRAPHIC&&(t=this.position,e=ro(no(),[0,0,1],-this.roll*Math.PI/180),Ci(this.orthoMatrix,e,_((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),_(this.zoom,this.zoom,1),t))},t.triggerUpdate=function(){var t;this.enableUpdate&&(t=this.getViewTransform(),t=xi(fi(),this.getPerspective(),t),this.getFrustum().extractFromVPMatrix(t),this.emit(Dd))},t.syncFromLandmark=function(t){this.matrix=gi(this.matrix,t.matrix),this.right=zi(this.right,t.right),this.up=zi(this.up,t.up),this.forward=zi(this.forward,t.forward),this.position=zi(this.position,t.position),this.focalPoint=zi(this.focalPoint,t.focalPoint),this.distanceVector=zi(this.distanceVector,t.distanceVector),this.azimuth=t.azimuth,this.elevation=t.elevation,this.roll=t.roll,this.relAzimuth=t.relAzimuth,this.relElevation=t.relElevation,this.relRoll=t.relRoll,this.dollyingStep=t.dollyingStep,this.distance=t.distance,this.zoom=t.zoom},a}(ko.exports.EventEmitter),Vd=d.defineToken("RenderingPluginContribution"),Gd=function(){function t(){this.renderingPluginProvider=void 0,this.canvasConfig=void 0,this.renderingContext=void 0,this.sceneGraphService=void 0,this.styleValueRegistry=void 0,this.camera=void 0,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.renderOrderChangedEvent=new Mh(m.RENDER_ORDER_CHANGED),this.hooks={init:new xu,dirtycheck:new Tu(["object"]),cull:new Tu(["object","camera"]),beginFrame:new Su([]),beforeRender:new Su(["objectToRender"]),render:new Su(["objectToRender"]),afterRender:new Su(["objectToRender"]),endFrame:new Su([]),destroy:new Su([]),pick:new ku(["result"]),pointerDown:new Su(["event"]),pointerUp:new Su(["event"]),pointerMove:new Su(["event"]),pointerOut:new Su(["event"]),pointerOver:new Su(["event"]),pointerWheel:new Su(["event"]),pointerCancel:new Su(["event"])}}var e=t.prototype;return e.init=function(){var t=es(S().mark(function t(){var e=this;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.renderingPluginProvider.getContributions({cache:!1}).forEach(function(t){t.apply(e)}),t.next=3,this.hooks.init.promise();case 3:this.inited=!0;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.getStats=function(){return this.stats},e.disableDirtyRectangleRendering=function(){return!this.canvasConfig.renderer.getConfig().enableDirtyRectangleRendering||this.renderingContext.renderReasons.has(Od.CAMERA_CHANGED)},e.render=function(t){var e=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.sceneGraphService.syncHierarchy(this.renderingContext.root),this.sceneGraphService.triggerPendingEvents(),this.renderingContext.renderReasons.size&&this.inited&&(this.renderDisplayObject(this.renderingContext.root,t),this.hooks.beginFrame.call(),this.renderingContext.renderListCurrentFrame.forEach(function(t){e.hooks.beforeRender.call(t),e.hooks.render.call(t),e.hooks.afterRender.call(t)}),this.hooks.endFrame.call(),this.renderingContext.renderListCurrentFrame=[],this.renderingContext.renderReasons.clear())},e.renderDisplayObject=function(t,e){var n=this,r=e.renderer.getConfig(),i=r.enableDirtyCheck,r=r.enableCulling,i=(this.styleValueRegistry.recalc(t),i?this.hooks.dirtycheck.call(t):t),i=(!i||(r=r?this.hooks.cull.call(i,this.camera):i)&&(this.stats.rendered++,this.renderingContext.renderListCurrentFrame.push(r)),t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++,t.sortable),r=!1;i.dirty&&(i.sorted=t.childNodes.slice().sort(Md),i.dirty=!(r=!0)),(i.sorted||t.childNodes).forEach(function(t){n.renderDisplayObject(t,e)}),r&&t.forEach(function(t){n.renderOrderChangedEvent.detail={renderOrder:t.sortable.renderOrder},t.dispatchEvent(n.renderOrderChangedEvent)})},e.destroy=function(){this.inited=!1,this.hooks.destroy.call()},e.dirtify=function(){this.renderingContext.renderReasons.add(Od.DISPLAY_OBJECT_CHANGED)},t}(),Hd=(t([Wr(Vd),e("design:type",Object)],Gd.prototype,"renderingPluginProvider",void 0),t([f(ou),e("design:type",Object)],Gd.prototype,"canvasConfig",void 0),t([f(Rd),e("design:type",Object)],Gd.prototype,"renderingContext",void 0),t([f(Nd),e("design:type",Object)],Gd.prototype,"sceneGraphService",void 0),t([f(Bl),e("design:type",Object)],Gd.prototype,"styleValueRegistry",void 0),t([f(jd),e("design:type",zd)],Gd.prototype,"camera",void 0),Gd=t([p()],Gd),function(r){function t(){for(var d,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(d=r.call.apply(r,[this].concat(e))||this).renderingContext=void 0,d.contextService=void 0,d.canvasConfig=void 0,d.displayObjectPool=void 0,d.rootTarget=void 0,d.cursor="default",d.mappingTable={},d.mappingState={trackingData:{}},d.eventPool=new Map,d.pickHandler=void 0,d.onPointerDown=function(){var e=es(S().mark(function t(e){var n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.createPointerEvent(e);case 4:n=t.sent,d.dispatchEvent(n,"pointerdown"),"touch"===n.pointerType?d.dispatchEvent(n,"touchstart"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(r=2===n.button,d.dispatchEvent(n,r?"rightdown":"mousedown")),d.trackingData(e.pointerId).pressTargetsByButton[e.button]=n.composedPath(),d.freeEvent(n);case 10:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onPointerUp=function(){var e=es(S().mark(function t(e){var n,r,i,o,a,s,l;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:return n=performance.now(),t.next=5,d.createPointerEvent(e);case 5:if(r=t.sent,d.dispatchEvent(r,"pointerup"),"touch"===r.pointerType?d.dispatchEvent(r,"touchend"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(i=2===r.button,d.dispatchEvent(r,i?"rightup":"mouseup")),i=d.trackingData(e.pointerId),s=d.findMountedTarget(i.pressTargetsByButton[e.button]),(l=s)&&!r.composedPath().includes(s)){for(o=s;o&&!r.composedPath().includes(o);)r.currentTarget=o,d.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?d.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(a=2===r.button,d.notifyTarget(r,a?"rightupoutside":"mouseupoutside")),Oh.isNode(o)&&(o=o.parentNode);delete i.pressTargetsByButton[e.button],l=o}l&&((s=d.clonePointerEvent(r,"click")).target=l,s.path=[],i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:s.target,timeStamp:n}),(l=i.clicksByButton[e.button]).target===s.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=s.target,l.timeStamp=n,s.detail=l.clickCount,null!=(l=r.detail)&&l.preventClick||("mouse"===s.pointerType||"touch"===s.pointerType?d.dispatchEvent(s,"click"):d.dispatchEvent(s,"pointertap")),d.freeEvent(s)),d.freeEvent(r);case 14:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onPointerMove=function(){var e=es(S().mark(function t(e){var n,r,i,o,a,s,l,u,c,h;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.createPointerEvent(e);case 4:if(n=t.sent,r="mouse"===n.pointerType||"pen"===n.pointerType,i=d.trackingData(e.pointerId),o=d.findMountedTarget(i.overTargets),i.overTargets&&o!==n.target)return l="mousemove"===e.type?"mouseout":"pointerout",t.next=12,d.createPointerEvent(e,l,o||void 0);t.next=23;break;case 12:if(a=t.sent,d.dispatchEvent(a,"pointerout"),r&&d.dispatchEvent(a,"mouseout"),n.composedPath().includes(o)){t.next=22;break}return t.next=18,d.createPointerEvent(e,"pointerleave",o||void 0);case 18:for((s=t.sent).eventPhase=s.AT_TARGET;s.target&&!n.composedPath().includes(s.target);)s.currentTarget=s.target,d.notifyTarget(s),r&&d.notifyTarget(s,"mouseleave"),Oh.isNode(s.target)&&(s.target=s.target.parentNode);d.freeEvent(s);case 22:d.freeEvent(a);case 23:if(o===n.target){t.next=38;break}l="mousemove"===e.type?"mouseover":"pointerover",u=d.clonePointerEvent(n,l),d.dispatchEvent(u,"pointerover"),r&&d.dispatchEvent(u,"mouseover"),c=o&&Oh.isNode(o)&&o.parentNode;case 29:if(!c||c===(Oh.isNode(d.rootTarget)&&d.rootTarget.parentNode)){t.next=35;break}if(c===n.target)return t.abrupt("break",35);t.next=32;break;case 32:c=c.parentNode,t.next=29;break;case 35:if(!c||c===(Oh.isNode(d.rootTarget)&&d.rootTarget.parentNode)){for((h=d.clonePointerEvent(n,"pointerenter")).eventPhase=h.AT_TARGET;h.target&&h.target!==o&&h.target!==(Oh.isNode(d.rootTarget)&&d.rootTarget.parentNode);)h.currentTarget=h.target,d.notifyTarget(h),r&&d.notifyTarget(h,"mouseenter"),Oh.isNode(h.target)&&(h.target=h.target.parentNode);d.freeEvent(h)}d.freeEvent(u);case 38:d.dispatchEvent(n,"pointermove"),"touch"===n.pointerType&&d.dispatchEvent(n,"touchmove"),r&&(d.dispatchEvent(n,"mousemove"),d.cursor=d.getCursor(n.target)),i.overTargets=n.composedPath(),d.freeEvent(n);case 43:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onPointerOut=function(){var e=es(S().mark(function t(e){var n,r,i,o,a;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:if((n=d.trackingData(e.pointerId)).overTargets)return r="mouse"===e.pointerType||"pen"===e.pointerType,i=d.findMountedTarget(n.overTargets),t.next=8,d.createPointerEvent(e,"pointerout",i||void 0);t.next=19;break;case 8:return o=t.sent,d.dispatchEvent(o),r&&d.dispatchEvent(o,"mouseout"),t.next=13,d.createPointerEvent(e,"pointerleave",i||void 0);case 13:for((a=t.sent).eventPhase=a.AT_TARGET;a.target&&a.target!==(Oh.isNode(d.rootTarget)&&d.rootTarget.parentNode);)a.currentTarget=a.target,d.notifyTarget(a),r&&d.notifyTarget(a,"mouseleave"),Oh.isNode(a.target)&&(a.target=a.target.parentNode);n.overTargets=null,d.freeEvent(o),d.freeEvent(a);case 19:d.cursor=null;case 20:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onPointerOver=function(){var e=es(S().mark(function t(e){var n,r,i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:return n=d.trackingData(e.pointerId),t.next=5,d.createPointerEvent(e);case 5:for(r=t.sent,i="mouse"===r.pointerType||"pen"===r.pointerType,d.dispatchEvent(r,"pointerover"),i&&d.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(d.cursor=d.getCursor(r.target)),(o=d.clonePointerEvent(r,"pointerenter")).eventPhase=o.AT_TARGET;o.target&&o.target!==(Oh.isNode(d.rootTarget)&&d.rootTarget.parentNode);)o.currentTarget=o.target,d.notifyTarget(o),i&&d.notifyTarget(o,"mouseenter"),Oh.isNode(o.target)&&(o.target=o.target.parentNode);n.overTargets=r.composedPath(),d.freeEvent(r),d.freeEvent(o);case 16:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onPointerUpOutside=function(){var e=es(S().mark(function t(e){var n,r,i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof fd){t.next=2;break}return t.abrupt("return");case 2:return n=d.trackingData(e.pointerId),r=d.findMountedTarget(n.pressTargetsByButton[e.button]),t.next=6,d.createPointerEvent(e);case 6:if(i=t.sent,r){for(o=r;o;)i.currentTarget=o,d.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||d.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Oh.isNode(o)&&(o=o.parentNode);delete n.pressTargetsByButton[e.button]}d.freeEvent(i);case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d.onWheel=function(){var e=es(S().mark(function t(e){var n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof yd){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.createWheelEvent(e);case 4:n=t.sent,d.dispatchEvent(n),d.freeEvent(n);case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),d}g(t,r);var e=t.prototype;return e.init=function(){this.rootTarget=this.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)},e.client2Viewport=function(t){var e=this.contextService.getBoundingClientRect();return new Ac(t.x-((null==e?void 0:e.left)||0),t.y-((null==e?void 0:e.top)||0))},e.viewport2Client=function(t){var e=this.contextService.getBoundingClientRect();return new Ac(t.x+((null==e?void 0:e.left)||0),t.y+((null==e?void 0:e.top)||0))},e.viewport2Canvas=function(t){var e=t.x,t=t.y,n=this.rootTarget.defaultView.getCamera(),r=this.canvasConfig,i=r.width,r=r.height,o=n.getPerspectiveInverse(),n=n.getWorldTransform(),n=xi(fi(),n,o),o=_(e/i*2-1,2*(1-t/r)-1,0);return Xi(o,o,n),new Ac(o[0],o[1])},e.canvas2Viewport=function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),e=e.getViewTransform(),n=xi(fi(),n,e),e=_(t.x,t.y,0),t=(Xi(e,e,n),this.canvasConfig),n=t.width,t=t.height;return new Ac((e[0]+1)/2*n,(1-(e[1]+1)/2)*t)},e.setPickHandler=function(t){this.pickHandler=t},e.addEventMapping=function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(function(t,e){return t.priority-e.priority})},e.mapEvent=function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for "+t.type)}},e.dispatchEvent=function(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.emit(e||t.type,t)},e.propagate=function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;1<=r;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=i+1;o<n.length;o++)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.propagationPath=function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)e.unshift(n.document);else{for(var r=0;r<2048&&t!==this.rootTarget;r++)Oh.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);n&&e.push(n)}return e},e.hitTest=function(){var e=es(S().mark(function t(e){var n,r,i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.viewportX,r=e.viewportY,o=this.canvasConfig,i=o.width,o=o.height,n<0||r<0||i<n||o<r)return t.abrupt("return",null);t.next=4;break;case 4:return t.next=6,this.pickHandler(e);case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1=this.rootTarget;case 9:if(t.t0=t.t1,t.t0){t.next=12;break}t.t0=null;case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.isNativeEventFromCanvas=function(t){var e=this.contextService.getDomElement(),n=null==(n=t.nativeEvent)?void 0:n.target;if(n){if(n===e)return!0;if(e&&e.contains)return e.contains(n)}return!!t.nativeEvent.composedPath&&-1<t.nativeEvent.composedPath().indexOf(e)},e.getExistedHTML=function(t){if(t.nativeEvent.composedPath)for(var e=cs(this.displayObjectPool.getHTMLs());!(n=e()).done;){var n=n.value;if(-1<t.nativeEvent.composedPath().indexOf(n))return n}return null},e.pickTarget=function(){var e=es(S().mark(function t(e){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.createPointerEvent=function(){var r=es(S().mark(function t(e,n,r){var i,o;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.allocateEvent(fd),this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,o=this.getExistedHTML(i),null==r){t.next=11;break}t.t0=r,t.next=20;break;case 11:if(t.t1=o,t.t1){t.next=19;break}if(t.t2=this.isNativeEventFromCanvas(i),t.t2)return t.next=17,this.pickTarget(i);t.next=18;break;case 17:t.t2=t.sent;case 18:t.t1=t.t2;case 19:t.t0=t.t1;case 20:return i.target=t.t0,"string"==typeof n&&(i.type=n),t.abrupt("return",i);case 23:case"end":return t.stop()}},t,this)}));return function(t,e,n){return r.apply(this,arguments)}}(),e.createWheelEvent=function(){var e=es(S().mark(function t(e){var n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.allocateEvent(yd),this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,r=this.getExistedHTML(n),t.t0=r,t.t0){t.next=15;break}if(t.t1=this.isNativeEventFromCanvas(n),t.t1)return t.next=13,this.pickTarget(n);t.next=14;break;case 13:t.t1=t.sent;case 14:t.t0=t.t1;case 15:return n.target=t.t0,t.abrupt("return",n);case 17:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.clonePointerEvent=function(t,e){var n=this.allocateEvent(fd);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n},e.copyPointerData=function(t,e){t instanceof fd&&e instanceof fd&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)},e.copyMouseData=function(t,e){t instanceof pd&&e instanceof pd&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset))},e.copyWheelData=function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ},e.copyData=function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)},e.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);t=this.eventPool.get(t).pop()||new t(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=[],t.target=null,t},e.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)},e.notifyTarget=function(t,e){e=null!=(n=e)?n:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?e+"capture":e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)},e.notifyListeners=function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)},e.findMountedTarget=function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;0<=n;n--){var r=t[n];if(!(r===this.rootTarget||Oh.isNode(r)&&r.parentNode===e))break;e=t[n]}return e},e.getCursor=function(t){for(var e=t;e;){var n=Lh.isElement(e)&&e.getAttribute("cursor");if(n)return n;e=Oh.isNode(e)&&e.parentNode}},t}(ko.exports.EventEmitter)),Wd=(t([f(Rd),e("design:type",Object)],Hd.prototype,"renderingContext",void 0),t([f(Id),e("design:type",Object)],Hd.prototype,"contextService",void 0),t([f(ou),e("design:type",Object)],Hd.prototype,"canvasConfig",void 0),t([f(Ih),e("design:type",Ih)],Hd.prototype,"displayObjectPool",void 0),t([z.postConstruct(),e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],Hd.prototype,"init",null),Hd=t([p()],Hd),function(){function t(){this.canvas=void 0,this.context=void 0}var e=t.prototype;return e.getOrCreateCanvas=function(t){if(!this.canvas){if(t)this.canvas=t,this.context=this.canvas.getContext("2d");else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d"),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}this.canvas.width=10,this.canvas.height=10}return this.canvas},e.getOrCreateContext=function(t){return this.context||this.getOrCreateCanvas(t),this.context},t}()),Wd=t([p()],Wd),Ud={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Yd=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,qd=new RegExp(/[!%),.:;?\]}'""]/.source+"|"+/[!),.:;?\]}'""]/.source+"|"+/[)\]'"?!:;,.]/.source+"|"+/[!%),.:;?\]}'"]/.source),Xd=new RegExp(/[$('"]/.source+"|"+/[([{'"]/.source+"|"+/[(['"...]/.source+"|"+/[$([{'"#]/.source),Zd=function(){function t(){var n=this;this.cache={},this.offscreenCanvas=void 0,this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!Xd.exec(e)&&!qd.exec(t))},this.trimByKinsokuShorui=function(t){var e=[].concat(t),n=e[e.length-2];if(!n)return t;t=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=t+e[e.length-1],e}}var e=t.prototype;return e.measureFont=function(t,e){if(this.cache[t])return this.cache[t];for(var n={ascent:0,descent:0,fontSize:0},r=this.offscreenCanvas.getOrCreateCanvas(e),e=this.offscreenCanvas.getOrCreateContext(e),i=(e.font=t,Ud.MetricsString+Ud.BaselineSymbol),o=Math.ceil(e.measureText(i).width),a=Math.ceil(e.measureText(Ud.BaselineSymbol).width),s=Ud.HeightMultiplier*a,a=a*Ud.BaselineMultiplier|0,l=(r.width=o,r.height=s,e.fillStyle="#f00",e.fillRect(0,0,o,s),e.font=t,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(i,0,a),e.getImageData(0,0,o||1,s||1).data),r=l.length,u=4*o,c=0,h=0,d=!1,c=0;c<a;++c){for(var p=0;p<u;p+=4)if(255!==l[h+p]){d=!0;break}if(d)break;h+=u}for(n.ascent=a-c,h=r-u,d=!1,c=s;a<c;--c){for(var f=0;f<u;f+=4)if(255!==l[h+f]){d=!0;break}if(d)break;h-=u}return n.descent=c-a,n.fontSize=n.ascent+n.descent,this.cache[t]=n},e.measureText=function(t,e,n){var r=e.fontSize,i=e.wordWrap,o=e.lineHeight,a=e.lineWidth,s=e.textBaseline,l=e.textAlign,u=e.letterSpacing,c=e.leading,c=void 0===c?0:c,h=function(t){for(var e=t.fontSize,n=t.fontFamily,r=t.fontStyle,i=t.fontVariant,t=t.fontWeight,e=_s(e)?e+"px":e.toString(),o=Jl(n)?n.split(","):[n.value],a=o.length-1;0<=a;a--){var s=o[a].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&Mu.indexOf(s)<0&&(s='"'+s+'"'),o[a]=s}return r+" "+i+" "+t+" "+e+" "+o.join(",")}(e),d=this.measureFont(h,n),p=(0===d.fontSize&&(d.fontSize=r.value,d.ascent=r.value),this.offscreenCanvas.getOrCreateContext(n));p.font=h;for(var f=(i?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),y=new Array(f.length),g=0,v=0;v<f.length;v++){var m=p.measureText(f[v]).width+(f[v].length-1)*u.value;y[v]=m,g=Math.max(g,m)}var r=g+a.value,b=o.value||d.fontSize+a.value,i=Math.max(b,d.fontSize+a.value)+(f.length-1)*(b+c),x=0;return"middle"===s.value?x=-i/2:"bottom"===s.value||"alphabetic"===s.value||"ideographic"===s.value?x=-i:"top"!==s.value&&"hanging"!==s.value||(x=0),{font:h,width:r,height:i,lines:f,lineWidths:y,lineHeight:b+=c,maxLineWidth:g,fontProperties:d,lineMetrics:y.map(function(t,e){var n=0;return"center"===l.value?n-=t/2:"right"!==l.value&&"end"!==l.value||(n-=t),new Nc(n-a.value/2,x+e*b,t+a.value,b)})}},e.wordWrap=function(i,t,e){function o(t){return a.getFromCache(t,r.value,d,s)}var a=this,n=t.wordWrapWidth,n=void 0===n?0:n,r=t.letterSpacing,s=this.offscreenCanvas.getOrCreateContext(e),l=n+r.value,u=[],c=0,h=0,d={};return Array.from(i).forEach(function(t,e){var n=i[e-1],e=i[e+1],r=o(t);if(a.isNewline(t))h=0,u[++c]="";else{if(0<h&&l<h+r){if(h=0,u[++c]="",a.isBreakingSpace(t))return;a.canBreakInLastChar(t)||(u=a.trimToBreakable(u),h=a.sumTextWidthByCache(u[c]||"",d)),a.shouldBreakByKinsokuShorui(t,e)&&(u=a.trimByKinsokuShorui(u),h+=o(n||""))}h+=r,u[c]=(u[c]||"")+t}}),u.join("\n")},e.isBreakingSpace=function(t){return"string"==typeof t&&0<=Ud.BreakingSpaces.indexOf(t.charCodeAt(0))},e.isNewline=function(t){return"string"==typeof t&&0<=Ud.Newlines.indexOf(t.charCodeAt(0))},e.trimToBreakable=function(t){var e,t=[].concat(t),n=t[t.length-2],r=this.findBreakableIndex(n);return-1!==r&&n&&(e=n.slice(r,r+1),e=r+(this.isBreakingSpace(e)?0:1),t[t.length-1]+=n.slice(r+1,n.length),t[t.length-2]=n.slice(0,e)),t},e.canBreakInLastChar=function(t){return!t||!Yd.test(t)},e.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(t,e){if(n[e])return t+n[e];throw Error("cannot count the word without cache")},0)},e.findBreakableIndex=function(t){for(var e=t.length-1;0<=e;e--)if(!Yd.test(t[e]))return e;return-1},e.getFromCache=function(t,e,n,r){var i=n[t];return"number"!=typeof i&&(e=t.length*e,i=r.measureText(t).width+e,n[t]=i),i},t}(),Kd=(t([f(Wd),e("design:type",Wd)],Zd.prototype,"offscreenCanvas",void 0),Zd=t([p()],Zd),d.defineToken("GeometryUpdaterFactory")),$d=d.defineToken("GeometryAABBUpdater"),Jd=function(){function t(){}return t.prototype.update=function(t,e){t=t.r;return{width:2*t.value,height:2*t.value}},t}(),Jd=t([p({token:{token:$d,named:O.CIRCLE}})],Jd),Qd=function(){function t(){}return t.prototype.update=function(t,e){var n=t.rx,t=t.ry;return{width:2*n.value,height:2*t.value}},t}(),Qd=t([p({token:{token:$d,named:O.ELLIPSE}})],Qd),tp=function(){function t(){}return t.prototype.update=function(t,e){var n=t.img,r=t.width,t=t.height,i=0,o=0;return r instanceof C&&r.unit===P.kPixels&&(i=r.value),t instanceof C&&t.unit===P.kPixels&&(o=t.value),n&&!Jl(n)&&(i=i||n.width,o=o||n.height),r instanceof C&&(r.value=i),t instanceof C&&(t.value=o),{width:i,height:o}},t}(),tp=t([p({token:[{token:$d,named:O.RECT},{token:$d,named:O.IMAGE},{token:$d,named:O.GROUP}]})],tp),ep=function(){function t(){this.textService=void 0}var e=t.prototype;return e.isReadyToMeasure=function(t,e){var n=t.text,r=t.textAlign,i=t.textBaseline,o=t.fontSize,a=t.fontStyle,s=t.fontWeight,l=t.fontVariant,t=t.lineWidth;return n&&o&&a&&s&&l&&r&&i&&t},e.update=function(t,e){var n=t.text,r=t.textAlign,i=t.lineWidth,o=t.textBaseline,a=t.dx,s=t.dy,l=((null==e||null==(l=e.ownerDocument)||null==(l=l.defaultView)?void 0:l.getConfig())||{}).offscreenCanvas;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var e=this.textService.measureText(n,t,l),n=(t.metrics=e).width,l=e.height,u=e.lineHeight,e=e.fontProperties,n=_(n/2,l/2,0),l=[0,1],c=0,r=("center"===r.value?(c=i.value/2,l=[.5,1]):"right"!==r.value&&"end"!==r.value||(c=i.value,l=[1,1]),0);return"middle"===o.value?r=n[1]:"top"===o.value||"hanging"===o.value?r=2*n[1]:"alphabetic"===o.value?r=u-e.ascent:"bottom"!==o.value&&"ideographic"!==o.value||(r=0),a&&(c+=a.value),s&&(r+=s.value),t.anchor=[new C(l[0]),new C(l[1]),new C(0)],{width:2*n[0],height:2*n[1],offsetX:c,offsetY:r}},t}(),np=(t([f(Zd),e("design:type",Zd)],ep.prototype,"textService",void 0),ep=t([p({token:{token:$d,named:O.TEXT}})],ep),function(){function t(){}return t.prototype.update=function(t){var e=t.x1,n=t.y1,r=t.x2,t=t.y2,i=Math.min(e.value,r.value),e=Math.max(e.value,r.value),r=Math.min(n.value,t.value);return{width:e-i,height:Math.max(n.value,t.value)-r}},t}()),np=t([p({token:{token:$d,named:O.LINE}})],np),rp=function(){function t(){}return t.prototype.update=function(t){var t=t.points.points,e=Math.min.apply(Math,t.map(function(t){return t[0]})),n=Math.max.apply(Math,t.map(function(t){return t[0]})),r=Math.min.apply(Math,t.map(function(t){return t[1]}));return{width:n-e,height:Math.max.apply(Math,t.map(function(t){return t[1]}))-r}},t}(),rp=t([p({token:[{token:$d,named:O.POLYLINE},{token:$d,named:O.POLYGON}]})],rp),ip=function(){function t(){}return t.prototype.update=function(t){t=t.path.rect;return{width:t.width,height:t.height}},t}(),ip=t([p({token:{token:$d,named:O.PATH}})],ip),op=function(){function t(){this.sceneGraphService=void 0}return t.prototype.calculator=function(t,e,n,r){var i;return n instanceof Ku&&(n=null),e&&e!==n&&e.parsedStyle.clipPathTargets&&(i=e.parsedStyle.clipPathTargets.indexOf(r),e.parsedStyle.clipPathTargets.splice(i,1)),n&&(n.parsedStyle.clipPathTargets||(n.parsedStyle.clipPathTargets=[]),n.parsedStyle.clipPathTargets.push(r)),this.sceneGraphService.dirtifyToRoot(r),n},t}(),ap=(t([f(Nd),e("design:type",Object)],op.prototype,"sceneGraphService",void 0),op=t([p({token:{token:Sh,named:b.CLIP_PATH}})],op),function(){function t(){this.parser=Ec,this.mixer=Tc}return t.prototype.calculator=function(t,e,n,r){return n instanceof Ku?new fc(0,0,0,0,"none"===n.value):n},t}()),ap=t([p({token:[{token:Sh,named:b.PAINT},{token:Sh,named:b.COLOR}]})],ap),sp=function(){function t(){this.parser=Jc}return t.prototype.calculator=function(t,e,n){return n instanceof Ku?[]:n},t}();function lp(t){t=t.parsedStyle.fontSize;return t&&!C.isRelativeUnit(t.unit)?t.clone():null}function up(){this.container=void 0}var cp,hp,dp,pp,fp,sp=t([p({token:{token:Sh,named:b.FILTER}})],sp),yp=function(){function t(){this.parser=Rc,this.mixer=Dc}return t.prototype.calculator=function(t,e,n,r,i){if(!C.isRelativeUnit(n.unit))return n.clone();if(n.unit===P.kPercentage)return new C(0,"px");if(n.unit===P.kEms){if(r.parentNode){var o=lp(r.parentNode);if(o)return o.value*=n.value,o;i.addUnresolveProperty(r,t)}return new C(0,"px")}if(n.unit===P.kRems){if(null!=r&&(null!=(o=r.ownerDocument)&&o.documentElement)){o=lp(r.ownerDocument.documentElement);if(o)return o.value*=n.value,o;i.addUnresolveProperty(r,t)}return new C(0,"px")}},t}(),yp=t([p({token:[{token:Sh,named:b.LENGTH_PERCENTAGE},{token:Sh,named:b.LENGTH}]})],yp),gp=function(){function t(){this.mixer=zc}return t.prototype.parser=function(t){t=Fc(_s(t)?[t]:t),t=1===t.length?[t[0],t[0]]:[t[0],t[1]];return t},t}(),gp=t([p({token:{token:Sh,named:b.LENGTH_PERCENTAGE_12}})],gp),vp=function(){function t(){this.mixer=zc}return t.prototype.parser=function(t){t=Fc(_s(t)?[t]:t),t=1===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:3===t.length?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]];return t},t}(),vp=t([p({token:{token:Sh,named:b.LENGTH_PERCENTAGE_14}})],vp),mp=function(t){function e(){return t.apply(this,arguments)||this}return g(e,t),e.prototype.postProcessor=function(t){var e,n,r;switch(t.nodeName){case O.CIRCLE:case O.ELLIPSE:var i=t.parsedStyle,o=i.cx,i=i.cy;M(o)||(l=o.value),M(i)||(u=i.value);break;case O.LINE:var o=t.parsedStyle,i=o.x1,a=o.x2,s=o.y1,o=o.y2,l=Math.min(i.value,a.value),u=Math.min(s.value,o.value),c=0;break;case O.RECT:case O.IMAGE:case O.GROUP:case O.HTML:case O.TEXT:M(t.parsedStyle.x)||(l=t.parsedStyle.x.value),M(t.parsedStyle.y)||(u=t.parsedStyle.y.value)}t.nodeName!==O.PATH&&t.nodeName!==O.POLYLINE&&t.nodeName!==O.POLYGON&&(t.parsedStyle.defX=l||0,t.parsedStyle.defY=u||0),M(l)&&M(u)&&M(c)||(e=(r=t.getLocalPosition())[0],n=r[1],r=r[2],t.setLocalPosition(M(l)?e:l,M(u)?n:u,M(c)?r:c))},e}(yp),mp=t([p({token:{token:Sh,named:b.COORDINATE}})],mp),bp=function(){this.mixer=Wc,this.parser=Hc},bp=t([p({token:{token:Sh,named:b.NUMBER}})],bp),xp=function(){function t(){this.parser=Hc,this.mixer=Uc(0,1)}return t.prototype.postProcessor=function(t){var e;!t.attributes.offsetPath||(e=t.attributes.offsetPath.nodeName)!==O.LINE&&e!==O.PATH&&e!==O.POLYLINE||(e=t.attributes.offsetPath.getPoint(t.parsedStyle.offsetDistance.value))&&t.setLocalPosition(e.x,e.y)},t}(),xp=t([p({token:{token:Sh,named:b.OFFSET_DISTANCE}})],xp),wp=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){var i;return e&&e!==n&&e.style.offsetPathTargets&&(i=e.style.offsetPathTargets.indexOf(r),e.style.offsetPathTargets.splice(i,1)),n&&(n.style.offsetPathTargets||(n.style.offsetPathTargets=[]),n.style.offsetPathTargets.push(r)),n},t}(),wp=t([p({token:{token:Sh,named:b.OFFSET_PATH}})],wp),kp=function(){this.parser=Hc,this.mixer=Uc(0,1)},kp=t([p({token:{token:Sh,named:b.OPACITY_VALUE}})],kp),_p=function(){function t(){this.parser=qc,this.mixer=Xc}var e=t.prototype;return e.calculator=function(t,e,n){return n instanceof Ku&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:[],totalLength:0,zCommandIndexes:[],rect:new Nc(0,0,0,0)}:n},e.postProcessor=function(t){var e,n;t.nodeName===O.PATH&&(e=(n=t.parsedStyle).defX,n=n.defY,t.setLocalPosition(void 0===e?0:e,void 0===n?0:n))},t}(),_p=t([p({token:{token:Sh,named:b.PATH}})],_p),Sp=function(){function t(){this.parser=Zc}return t.prototype.postProcessor=function(t){var e,n;t.nodeName!==O.POLYGON&&t.nodeName!==O.POLYLINE||(e=(n=t.parsedStyle).defX,n=n.defY,t.setLocalPosition(e,n))},t}(),Sp=t([p({token:{token:Sh,named:b.LIST_OF_POINTS}})],Sp),Ep=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).mixer=Uc(0,1/0),t}return g(t,i),t}(yp),Ep=t([p({token:{token:Sh,named:b.SHADOW_BLUR}})],Ep),Tp=function(){function t(){}var e=t.prototype;return e.calculator=function(t,e,n,r){return n instanceof Ku?"unset"===n.value?"":n.value:n},e.postProcessor=function(t){t.nodeValue=""+t.parsedStyle.text||""},t}(),Tp=t([p({token:{token:Sh,named:b.TEXT}})],Tp),Mp=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){var i,o=r.getAttribute("text");return o&&(i=o,"capitalize"===n.value?i=o.charAt(0).toUpperCase()+o.slice(1):"lowercase"===n.value?i=o.toLowerCase():"uppercase"===n.value&&(i=o.toUpperCase()),r.parsedStyle.text=i),n},t}(),Mp=t([p({token:{token:Sh,named:b.TEXT_TRANSFORM}})],Mp),Op=function(){function t(){this.parser=rh,this.mixer=fh}return t.prototype.postProcessor=function(l){var t=l.parsedStyle,e=t.transform,u=t.defX,c=t.defY;e&&e.length&&(l.resetLocalTransform(),l.setLocalPosition(u,c),e.forEach(function(t){var e,n,r,i,o,a,s=t.t,t=t.d;"scale"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[1,1],l.scaleLocal(o[0],o[1],1)):"scalex"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[1],l.scaleLocal(o[0],1,1)):"scaley"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[1],l.scaleLocal(1,o[0],1)):"scalez"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[1],l.scaleLocal(1,1,o[0])):"scale3d"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[1,1,1],l.scaleLocal(o[0],o[1],o[2])):"translate"===s?(o=t||[dc,dc],l.translateLocal(o[0].value,o[1].value,0)):"translatex"===s?(o=t||[dc],l.translateLocal(o[0].value,0,0)):"translatey"===s?(o=t||[dc],l.translateLocal(0,o[0].value,0)):"translatez"===s?(o=t||[dc],l.translateLocal(0,0,o[0].value)):"translate3d"===s?(o=t||[dc,dc,dc],l.translateLocal(o[0].value,o[1].value,o[2].value)):"rotate"===s?(o=t||[pc],l.rotateLocal(0,0,o[0].value)):"rotatex"===s?(o=t||[pc],l.rotateLocal(o[0].value,0,0)):"rotatey"===s?(o=t||[pc],l.rotateLocal(0,o[0].value,0)):"rotatez"===s?(o=t||[pc],l.rotateLocal(0,0,o[0].value)):"rotate3d"!==s&&("skew"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[0,0],l.setLocalSkew(Hs(o[0]),Hs(o[1]))):"skewx"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[0],l.setLocalSkew(Hs(o[0]),l.getLocalSkew()[1])):"skewy"===s?(o=(null==t?void 0:t.map(function(t){return t.value}))||[0],l.setLocalSkew(l.getLocalSkew()[0],Hs(o[0]))):"matrix"===s?(a=(o=t.map(function(t){return t.value}))[0],e=o[1],n=o[2],r=o[3],i=o[4],o=o[5],l.setLocalTransform(vi(a,e,0,0,n,r,0,0,0,0,1,0,i+u,o+c,0,1))):"matrix3d"===s&&((a=vi.apply(Di,t.map(function(t){return t.value})))[12]+=u,a[13]+=c,l.setLocalTransform(a)))}))},t}(),Op=t([p({token:{token:Sh,named:b.TRANSFORM}})],Op),Pp=function(){this.parser=yh},Pp=t([p({token:{token:Sh,named:b.TRANSFORM_ORIGIN}})],Pp),Cp=function(){function t(){this.parser=Hc}return t.prototype.postProcessor=function(t){var e;t.parentNode&&(e=(t=t.parentNode).renderable,t=t.sortable,e&&(e.dirty=!0),t&&(t.dirty=!0))},t}(),Cp=t([p({token:{token:Sh,named:b.Z_INDEX}})],Cp),Ap=[{name:"display",keywords:["none"]},{name:"opacity",interpolable:!0,defaultValue:"1",syntax:b.OPACITY_VALUE},{name:"fillOpacity",interpolable:!0,inherited:!0,defaultValue:"1",syntax:b.OPACITY_VALUE},{name:"strokeOpacity",interpolable:!0,inherited:!0,defaultValue:"1",syntax:b.OPACITY_VALUE},{name:"fill",interpolable:!0,keywords:["none"],defaultValue:"none",syntax:b.PAINT},{name:"stroke",interpolable:!0,keywords:["none"],defaultValue:"none",syntax:b.PAINT},{name:"shadowType",keywords:["inner","outer","both"],defaultValue:"outer",layoutDependent:!0},{name:"shadowColor",interpolable:!0,syntax:b.COLOR},{name:"shadowOffsetX",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE},{name:"shadowOffsetY",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE},{name:"shadowBlur",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.SHADOW_BLUR},{name:"lineWidth",interpolable:!0,inherited:!0,defaultValue:"1",layoutDependent:!0,alias:["strokeWidth"],syntax:b.LENGTH_PERCENTAGE},{name:"increasedLineWidthForHitTesting",inherited:!0,defaultValue:"0",layoutDependent:!0,syntax:b.LENGTH_PERCENTAGE},{name:"lineJoin",inherited:!0,layoutDependent:!0,alias:["strokeLinejoin"],keywords:["miter","bevel","round"],defaultValue:"miter"},{name:"lineCap",inherited:!0,layoutDependent:!0,alias:["strokeLinecap"],keywords:["butt","round","square"],defaultValue:"butt"},{name:"lineDash",interpolable:!0,inherited:!0,keywords:["none"],alias:["strokeDasharray"],syntax:b.LENGTH_PERCENTAGE_12},{name:"lineDashOffset",interpolable:!0,inherited:!0,defaultValue:"0",alias:["strokeDashoffset"],syntax:b.LENGTH_PERCENTAGE},{name:"offsetPath",syntax:b.OFFSET_PATH},{name:"offsetDistance",interpolable:!0,syntax:b.OFFSET_DISTANCE},{name:"dx",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE},{name:"dy",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE},{name:"zIndex",independent:!0,interpolable:!0,defaultValue:"0",keywords:["auto"],syntax:b.Z_INDEX},{name:"visibility",keywords:["visible","hidden"],independent:!0,inherited:!0,defaultValue:"visible"},{name:"pointerEvents",inherited:!0,keywords:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"],defaultValue:"auto"},{name:"filter",independent:!0,layoutDependent:!0,keywords:["none"],defaultValue:"none",syntax:b.FILTER},{name:"clipPath",syntax:b.CLIP_PATH},{name:"transform",parsePriority:100,interpolable:!0,keywords:["none"],defaultValue:"none",syntax:b.TRANSFORM},{name:"transformOrigin",parsePriority:100,defaultValue:function(t){return t===O.CIRCLE||t===O.ELLIPSE?"center":t===O.TEXT?"text-anchor":"left top"},layoutDependent:!0,syntax:b.TRANSFORM_ORIGIN},{name:"anchor",parsePriority:99,defaultValue:function(t){return t===O.CIRCLE||t===O.ELLIPSE?"0.5 0.5":"0 0"},layoutDependent:!0,syntax:b.LENGTH_PERCENTAGE_12},{name:"cx",interpolable:!0,defaultValue:"0",syntax:b.COORDINATE},{name:"cy",interpolable:!0,defaultValue:"0",syntax:b.COORDINATE},{name:"r",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE},{name:"rx",interpolable:!0,layoutDependent:!0,defaultValue:"auto",syntax:b.LENGTH_PERCENTAGE},{name:"ry",interpolable:!0,layoutDependent:!0,defaultValue:"auto",syntax:b.LENGTH_PERCENTAGE},{name:"x",interpolable:!0,defaultValue:"0",syntax:b.COORDINATE},{name:"y",interpolable:!0,defaultValue:"0",syntax:b.COORDINATE},{name:"z",interpolable:!0,defaultValue:"0",syntax:b.COORDINATE},{name:"width",interpolable:!0,layoutDependent:!0,keywords:["auto","fit-content","min-content","max-content"],defaultValue:"auto",syntax:b.LENGTH_PERCENTAGE},{name:"height",interpolable:!0,layoutDependent:!0,keywords:["auto","fit-content","min-content","max-content"],defaultValue:"auto",syntax:b.LENGTH_PERCENTAGE},{name:"radius",interpolable:!0,layoutDependent:!0,defaultValue:"0",syntax:b.LENGTH_PERCENTAGE_14},{name:"x1",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"y1",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"z1",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"x2",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"y2",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"z2",interpolable:!0,layoutDependent:!0,syntax:b.COORDINATE},{name:"path",interpolable:!0,layoutDependent:!0,defaultValue:"",alias:["d"],syntax:b.PATH,parsePriority:50},{name:"points",layoutDependent:!0,syntax:b.LIST_OF_POINTS,parsePriority:50},{name:"text",layoutDependent:!0,defaultValue:"",syntax:b.TEXT,parsePriority:50},{name:"textTransform",layoutDependent:!0,inherited:!0,keywords:["capitalize","uppercase","lowercase","none"],defaultValue:"none",syntax:b.TEXT_TRANSFORM,parsePriority:51},{name:"font",layoutDependent:!0},{name:"fontSize",interpolable:!0,inherited:!0,defaultValue:"16px",layoutDependent:!0,syntax:b.LENGTH_PERCENTAGE},{name:"fontFamily",layoutDependent:!0,inherited:!0,defaultValue:"sans-serif"},{name:"fontStyle",layoutDependent:!0,inherited:!0,keywords:["normal","italic","oblique"],defaultValue:"normal"},{name:"fontWeight",layoutDependent:!0,inherited:!0,keywords:["normal","bold","bolder","lighter"],defaultValue:"normal"},{name:"fontVariant",layoutDependent:!0,inherited:!0,keywords:["normal","small-caps"],defaultValue:"normal"},{name:"lineHeight",layoutDependent:!0,syntax:b.LENGTH,interpolable:!0,defaultValue:"0"},{name:"letterSpacing",layoutDependent:!0,syntax:b.LENGTH,interpolable:!0,defaultValue:"0"},{name:"miterLimit",layoutDependent:!0,syntax:b.NUMBER,defaultValue:function(t){return t===O.PATH||t===O.POLYGON||t===O.POLYLINE?"4":"10"}},{name:"wordWrap",layoutDependent:!0},{name:"wordWrapWidth",layoutDependent:!0},{name:"leading",layoutDependent:!0},{name:"textBaseline",layoutDependent:!0,inherited:!0,keywords:["top","hanging","middle","alphabetic","ideographic","bottom"],defaultValue:"alphabetic"},{name:"textAlign",layoutDependent:!0,inherited:!0,keywords:["start","center","end","left","right"],defaultValue:"start"},{name:"whiteSpace",layoutDependent:!0}],Np=function(){function t(){this.dirty=!1,this.cache={},this.unresolvedProperties={},this.propertySyntaxFactory=void 0,this.sceneGraphService=void 0,this.cascadeProperties={}}var e=t.prototype;return e.init=function(){var e=this;Ap.forEach(function(t){e.registerMetadata(t)})},e.registerMetadata=function(e){var n=this;[e.name].concat(e.alias||[]).forEach(function(t){n.cache[t]=e})},e.unregisterMetadata=function(t){delete this.cache[t]},e.getMetadata=function(t){return this.cache[t]},e.getPropertySyntax=function(t){return this.propertySyntaxFactory(t)},e.processProperties=function(n,r,t){var i=this,t=t=void 0===t?{skipUpdateAttribute:!1,skipParse:!1}:t,o=t.skipUpdateAttribute,t=t.skipParse,a=!1,e=(Object.keys(r).forEach(function(t){var t=iu(t,r[t]),e=t[0],t=t[1];o||(n.attributes[e]=t),!a&&null!=(t=i.getMetadata(e))&&t.layoutDependent&&(a=!0)}),Object.keys(r).sort(function(t,e){return((null==(t=i.getMetadata(t))?void 0:t.parsePriority)||0)-((null==(t=i.getMetadata(e))?void 0:t.parsePriority)||0)})),s=(t||e.forEach(function(t){n.computedStyle[t]=i.parseProperty(t,n.attributes[t],n)}),!1);e.forEach(function(t){t in n.computedStyle&&(s=i.computeProperty(t,n.computedStyle[t],n))}),s?this.dirty=!0:(a&&this.updateGeometry(n),e.forEach(function(t){t in n.parsedStyle&&i.postProcessProperty(t,n)}),e.forEach(function(e){e in n.parsedStyle&&i.isPropertyInheritable(e)&&n.children.forEach(function(t){t.internalSetAttribute(e,null,{skipUpdateAttribute:!0,skipParse:!0})})}))},e.parseProperty=function(t,e,n){var r,t=this.getMetadata(t),i=e;return"unset"===(e=""!==e&&!M(e)?e:"unset")||"initial"===e||"inherit"===e?i=new Ku(e):t&&(r=t.keywords,t=(t=t.syntax)&&this.getPropertySyntax(t),r&&-1<r.indexOf(e)?i=new Ku(e):t&&t.parser&&(i=t.parser(e,n))),i},e.computeProperty=function(t,e,n){var r=this.getMetadata(t),i="g-root"===n.id,o=e instanceof Zu?e.clone():e;if(r){var a=r.syntax,s=r.inherited,r=r.defaultValue;if(e instanceof Ku){var l=e.value;if("initial"===(l="unset"===l?s&&!i?"inherit":"initial":l))M(r)||(e=this.parseProperty(t,Ss(r)?r(n.nodeName):r,n));else if("inherit"===l)return(s=this.tryToResolveProperty(n,t,{inherited:!0}))?(n.parsedStyle[t]=s,!1):(this.addUnresolveProperty(n,t),!0)}i=a&&this.getPropertySyntax(a);o=i&&i.calculator?(r=n.parsedStyle[t],i.calculator(t,r,e,n,this)):e}return n.parsedStyle[t]=o,!1},e.postProcessProperty=function(t,e){var t=this.getMetadata(t);t&&t.syntax&&((t=t.syntax&&this.getPropertySyntax(t.syntax))&&t.postProcessor&&t.postProcessor(e))},e.isPropertyResolved=function(t,e){return!this.unresolvedProperties[t.entity]||0===this.unresolvedProperties[t.entity].length||this.unresolvedProperties[t.entity].includes(e)},e.addUnresolveProperty=function(t,e){this.unresolvedProperties[t.entity]||(this.unresolvedProperties[t.entity]=[]),-1===this.unresolvedProperties[t.entity].indexOf(e)&&this.unresolvedProperties[t.entity].push(e)},e.tryToResolveProperty=function(t,e,n){var n=(n=void 0===n?{}:n).inherited;if(n&&(t.parentElement&&this.isPropertyResolved(t.parentElement,e)))return(!((n=t.parentElement.parsedStyle[e])instanceof Ku)||"unset"!==n.value&&"initial"!==n.value&&"inherit"!==n.value)&&(!(n instanceof C&&C.isRelativeUnit(n.unit))&&n);return!1},e.recalc=function(e){var n,t=this.unresolvedProperties[e.entity];t&&t.length&&(n={},t.forEach(function(t){n[t]=e.attributes[t]}),this.processProperties(e,n),delete this.unresolvedProperties[e.entity])},e.updateGeometry=function(t){var s,e,n,r,i,o,a,l,u,c,h,d,p,f,y,g,v,m=Xr.get(Kd)(t.nodeName);m&&((s=t.geometry).contentBounds||(s.contentBounds=new Oc),s.renderBounds||(s.renderBounds=new Oc),e=t.parsedStyle,f=(m=m.update(e,t)).width,v=m.height,h=void 0===(h=m.depth)?0:h,c=void 0===(c=m.offsetX)?0:c,u=void 0===(u=m.offsetY)?0:u,m=void 0===(m=m.offsetZ)?0:m,n=f<0,r=v<0,h=_(Math.abs(f)/2,Math.abs(v)/2,h/2),l=e.stroke,y=e.lineWidth,g=e.increasedLineWidthForHitTesting,p=e.shadowType,d=e.shadowColor,i=void 0===(i=e.filter)?[]:i,o=e.transformOrigin,a=e.anchor,t.nodeName===O.TEXT&&delete e.anchor,c=_((1-2*(a&&a[0].value||0))*f/2+c,(1-2*(a&&a[1].value||0))*v/2+u,(1-2*(a&&(null==(f=a[2])?void 0:f.value)||0))*h[2]+m),s.contentBounds.update(c,h),v=t.nodeName===O.POLYLINE||t.nodeName===O.POLYGON||t.nodeName===O.PATH?Math.SQRT2:.5,l&&!l.isNone&&Gi(h,h,_(u=(((null==y?void 0:y.value)||0)+((null==g?void 0:g.value)||0))*v,u,0)),s.renderBounds.update(c,h),d&&"inner"!==(null==p?void 0:p.value)&&(m=(f=s.renderBounds).min,l=f.max,y=e.shadowBlur,g=e.shadowOffsetX,v=e.shadowOffsetY,u=y&&y.value||0,c=g&&g.value||0,h=v&&v.value||0,d=m[0]-u+c,p=l[0]+u+c,f=m[1]-u+h,y=l[1]+u+h,m[0]=Math.min(m[0],d),l[0]=Math.max(l[0],p),m[1]=Math.min(m[1],f),l[1]=Math.max(l[1],y),s.renderBounds.setMinMax(m,l)),i.forEach(function(t){var e,n,r,i,o,a=t.name,t=t.params;"blur"===a?(i=t[0].value,s.renderBounds.update(s.renderBounds.center,Gi(s.renderBounds.halfExtents,s.renderBounds.halfExtents,_(i,i,0)))):"drop-shadow"===a&&(i=t[0].value,a=t[1].value,t=t[2].value,e=(n=s.renderBounds).min,n=n.max,r=e[0]-t+i,i=n[0]+t+i,o=e[1]-t+a,t=n[1]+t+a,e[0]=Math.min(e[0],r),n[0]=Math.max(n[0],i),e[1]=Math.min(e[1],o),n[1]=Math.max(n[1],t),s.renderBounds.setMinMax(e,n))}),a=e.anchor,g=(n?-1:1)*Vc(o[0],0,t),v=(r?-1:1)*Vc(o[1],1,t),g-=(n?-1:1)*(a&&a[0].value||0)*s.contentBounds.halfExtents[0]*2,v-=(r?-1:1)*(a&&a[1].value||0)*s.contentBounds.halfExtents[1]*2,t.setOrigin(g,v),this.sceneGraphService.dirtifyToRoot(t))},e.isPropertyInheritable=function(t){t=this.getMetadata(t);return!!t&&t.inherited},t}(),o=(t([f(_h),e("design:type",Function)],Np.prototype,"propertySyntaxFactory",void 0),t([f(Nd),e("design:type",Object)],Np.prototype,"sceneGraphService",void 0),t([z.postConstruct(),e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],Np.prototype,"init",null),Np=t([p({token:Bl})],Np),Gr(function(t){z.decorate(Er(),ko.exports.EventEmitter),t(Ih),t(Td),t({token:_d,useFactory:function(t){return function(){return t.container.get(Sd)}}}),t(Ld),t(Wd),t(Zd),t(Jd),t(Qd),t(tp),t(ep),t(np),t(rp),t(ip),t({token:Kd,useFactory:function(e){var n={};return function(t){return n[t]||e.container.isBoundNamed($d,t)&&(n[t]=e.container.getNamed($d,t)),n[t]}}}),t(bp),t(Eh),t(op),t(ap),t(sp),t(yp),t(gp),t(vp),t(mp),t(xp),t(wp),t(kp),t(_p),t(Sp),t(Ep),t(Tp),t(Mp),t(Op),t(Pp),t(Cp),t({token:_h,useFactory:function(e){var n={};return function(t){return n[t]||e.container.isBoundNamed(Sh,t)&&(n[t]=e.container.getNamed(Sh,t)),n[t]}}}),t(Np),t(Vu),t(Gu),t(zu),t({token:Du,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:Bu,useValue:t}),e.get(zu)}}}),t({token:ds,useFactory:function(o){return function(t){var e=o.container.createChild(),n=(e.register(ys),e.register(ju),e.register({token:Iu,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:Ru,useValue:t}),e.get(ju)}}}),e.register(bs),e.register({token:gs,useFactory:function(r){return function(t,e){var n=r.container.createChild();return n.register({token:vs,useValue:t}),n.register({token:ms,useValue:e}),n.get(bs)}}}),e.register(Uu),e.register({token:Hu,useFactory:function(n){return function(t){var e=n.container.createChild();return e.register({token:Wu,useValue:t}),e.get(Uu)}}}),e.get(Iu)),r=e.get(Hu),i=e.get(gs);return e.register({token:ps,useValue:is({},t,{layoutChildrenFactory:n,layoutFragmentFactory:r,fragmentResultFactory:i})}),e.get(ys)}}})})),G=function(){function t(t){this.plugins=[],this.config=void 0,this.config=is({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1},t)}var e=t.prototype;return e.registerPlugin=function(t){this.plugins.push(t)},e.unregisterPlugin=function(e){var t=this.plugins.findIndex(function(t){return t===e});-1<t&&this.plugins.splice(t,1)},e.getPlugins=function(){return this.plugins},e.getPlugin=function(e){return this.plugins.find(function(t){return t.name===e})},e.getConfig=function(){return this.config},e.setConfig=function(t){Object.assign(this.config,t)},t}(),Lp=d.defineToken("CullingStrategyContribution"),Ip=((s=function(){function t(){this.strategyProvider=void 0,this.renderingContext=void 0}return t.prototype.apply=function(t){var n=this,r=this.strategyProvider.getContributions();t.hooks.cull.tap(cp.tag,function(e){var t;return e&&(t=e.cullable,0===r.length?t.visible=-1<n.renderingContext.unculledEntities.indexOf(e.entity):t.visible=r.every(function(t){return t.isVisible(e)}),!t.isCulled()&&e.isVisible()?e:(e.dispatchEvent(new Mh(m.CULLED)),null))}),t.hooks.afterRender.tap(cp.tag,function(t){t.cullable.visibilityPlaneMask=-1})},t}()).tag="Culling",cp=s),Rp=(t([Wr(Lp),e("design:type",Object)],Ip.prototype,"strategyProvider",void 0),t([f(Rd),e("design:type",Object)],Ip.prototype,"renderingContext",void 0),Ip=cp=t([p({contrib:Vd})],Ip),(u=function(){function t(){}return t.prototype.apply=function(e){e.hooks.dirtycheck.tap(hp.tag,function(t){return t&&(t.renderable.dirty||e.disableDirtyRectangleRendering()?t:null)})},t}()).tag="DirtyCheck",hp=u),Rp=hp=t([p({contrib:Vd})],Rp),jp=((ht=function(){function t(){var o=this;this.canvasConfig=void 0,this.contextService=void 0,this.renderingService=void 0,this.renderingContext=void 0,this.eventService=void 0,this.autoPreventDefault=!1,this.rootPointerEvent=new fd(null),this.rootWheelEvent=new yd(null),this.onPointerMove=function(t){var e,n=null==(e=o.renderingContext.root)||null==(e=e.ownerDocument)?void 0:e.defaultView;if(!n.supportsTouchEvents||"touch"!==t.pointerType){for(var r=cs(o.normalizeToPointerEvent(t,n));!(i=r()).done;){var i=i.value,i=o.bootstrapEvent(o.rootPointerEvent,i,n);o.eventService.mapEvent(i)}o.setCursor(o.eventService.cursor)}}}var e=t.prototype;return e.apply=function(t){var o=this,a=this.renderingContext.root.ownerDocument.defaultView;this.eventService.setPickHandler(function(){var e=es(S().mark(function t(e){var n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.renderingService.hooks.pick.promise({position:e,picked:[],topmost:!0});case 2:return n=t.sent,n=n.picked,t.abrupt("return",n[0]||null);case 5:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),t.hooks.pointerWheel.tap(dp.tag,function(t){t=o.normalizeWheelEvent(t);o.eventService.mapEvent(t)}),t.hooks.pointerDown.tap(dp.tag,function(t){if(!a.supportsTouchEvents||"touch"!==t.pointerType){var e=o.normalizeToPointerEvent(t,a);!o.autoPreventDefault||!e[0].isNormalized||!t.cancelable&&"cancelable"in t||t.preventDefault();for(var n=cs(e);!(r=n()).done;){var r=r.value,r=o.bootstrapEvent(o.rootPointerEvent,r,a);o.eventService.mapEvent(r)}o.setCursor(o.eventService.cursor)}}),t.hooks.pointerUp.tap(dp.tag,function(t){if(!a.supportsTouchEvents||"touch"!==t.pointerType){for(var e=o.contextService.getDomElement(),n=e&&t.target&&t.target!==e&&e.contains&&!e.contains(t.target)?"outside":"",r=cs(o.normalizeToPointerEvent(t,a));!(i=r()).done;){var i=i.value,i=o.bootstrapEvent(o.rootPointerEvent,i,a);i.type+=n,o.eventService.mapEvent(i)}o.setCursor(o.eventService.cursor)}}),t.hooks.pointerMove.tap(dp.tag,this.onPointerMove),t.hooks.pointerOver.tap(dp.tag,this.onPointerMove),t.hooks.pointerOut.tap(dp.tag,this.onPointerMove)},e.bootstrapEvent=function(t,e,n){t.view=n,t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var n=this.eventService.client2Viewport(new Ac(e.clientX,e.clientY)),r=n.x,n=n.y,r=(t.viewport.x=r,t.viewport.y=n,this.eventService.viewport2Canvas(t.viewport)),n=r.x,r=r.y;return t.canvas.x=n,t.canvas.y=r,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=fl[t.type]||t.type),t},e.normalizeWheelEvent=function(t){var e=this.rootWheelEvent,n=(this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,this.eventService.client2Viewport(new Ac(t.clientX,t.clientY))),r=n.x,n=n.y,r=(e.viewport.x=r,e.viewport.y=n,this.eventService.viewport2Canvas(e.viewport)),n=r.x,r=r.y;return e.canvas.x=n,e.canvas.y=r,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e},e.transferMouseData=function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null},e.setCursor=function(t){this.contextService.applyCursorStyle(t||this.canvasConfig.cursor||"default")},e.normalizeToPointerEvent=function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];ks(i.button)&&(i.button=0),ks(i.buttons)&&(i.buttons=1),ks(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),ks(i.width)&&(i.width=i.radiusX||1),ks(i.height)&&(i.height=i.radiusY||1),ks(i.tiltX)&&(i.tiltX=0),ks(i.tiltY)&&(i.tiltY=0),ks(i.pointerType)&&(i.pointerType="touch"),ks(i.pointerId)&&(i.pointerId=i.identifier||0),ks(i.pressure)&&(i.pressure=i.force||.5),ks(i.twist)&&(i.twist=0),ks(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else e.isMouseEvent(t)?(ks((e=t).isPrimary)&&(e.isPrimary=!0),ks(e.width)&&(e.width=1),ks(e.height)&&(e.height=1),ks(e.tiltX)&&(e.tiltX=0),ks(e.tiltY)&&(e.tiltY=0),ks(e.pointerType)&&(e.pointerType="mouse"),ks(e.pointerId)&&(e.pointerId=1),ks(e.pressure)&&(e.pressure=.5),ks(e.twist)&&(e.twist=0),ks(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0,n.push(e)):n.push(t);return n},t}()).tag="Event",dp=ht),Dp=(t([f(ou),e("design:type",Object)],jp.prototype,"canvasConfig",void 0),t([f(Id),e("design:type",Object)],jp.prototype,"contextService",void 0),t([f(Gd),e("design:type",Gd)],jp.prototype,"renderingService",void 0),t([f(Rd),e("design:type",Object)],jp.prototype,"renderingContext",void 0),t([f(Hd),e("design:type",Hd)],jp.prototype,"eventService",void 0),jp=dp=t([p({contrib:Vd})],jp),[O.CIRCLE,O.ELLIPSE,O.IMAGE,O.RECT,O.LINE,O.POLYLINE,O.POLYGON,O.TEXT,O.PATH,O.HTML]),Bp=function(){function t(){this.camera=void 0}var e=t.prototype;return e.isVisible=function(t){var e=t.cullable;if(!e.enable)return!0;var n=t.getRenderBounds();if(Oc.isEmpty(n))return!1;var r=this.camera.getFrustum(),i=null==(i=t.parentNode)||null==(i=i.cullable)?void 0:i.visibilityPlaneMask;return e.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(t,n,i||Mc.INDETERMINATE,r.planes),e.visible=e.visibilityPlaneMask!==Mc.OUTSIDE,e.visible},e.computeVisibilityWithPlaneMask=function(t,e,n,r){if(n===Mc.OUTSIDE||n===Mc.INSIDE)return n;for(var i=Mc.INSIDE,o=-1<Dp.indexOf(t.nodeName),a=0,s=r.length;a<s;++a){var l=1<<a;if(0!=(n&l)&&(!o||4!==a&&5!==a)){var u=r[a],c=u.normal,u=u.distance;if(Yi(c,e.getPositiveFarPoint(r[a]))+u<0)return Mc.OUTSIDE;Yi(c,e.getNegativeFarPoint(r[a]))+u<0&&(i|=l)}}return i},t}(),Fp=(t([f(jd),e("design:type",zd)],Bp.prototype,"camera",void 0),Bp=t([p({contrib:Lp})],Bp),(_t=function(){function t(){this.renderingContext=void 0,this.styleValueRegistry=void 0,this.sceneGraphService=void 0,this.rBush=void 0,this.toSync=new Set}var e=t.prototype;return e.pushToSync=function(t){var e=this;t.forEach(function(t){e.toSync.add(t)})},e.apply=function(r){function e(t){t.target.renderable.dirty=!0,r.dirtify()}function n(t){var e=t.detail.affectChildren,n=t.target;e&&n.forEach(function(t){a.pushToSync([t])}),a.pushToSync(t.composedPath().slice(0,-2)),r.dirtify()}function i(t){var e=t.target;a.pushToSync(t.composedPath().slice(0,-2)),a.styleValueRegistry.recalc(e),a.sceneGraphService.dirtifyToRoot(e),r.dirtify()}function o(t){var e=t.target,n=e.rBushNode;n.aabb&&(a.rBush.remove(n.aabb),a.toSync.delete(e)),a.sceneGraphService.dirtifyToRoot(t.target),r.dirtify()}var a=this;r.hooks.init.tapPromise(pp.tag,es(S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.renderingContext.root.addEventListener(m.MOUNTED,i),a.renderingContext.root.addEventListener(m.UNMOUNTED,o),a.renderingContext.root.addEventListener(m.ATTR_MODIFIED,e),a.renderingContext.root.addEventListener(m.BOUNDS_CHANGED,n);case 4:case"end":return t.stop()}},t)}))),r.hooks.destroy.tap(pp.tag,function(){a.renderingContext.root.removeEventListener(m.MOUNTED,i),a.renderingContext.root.removeEventListener(m.UNMOUNTED,o),a.renderingContext.root.removeEventListener(m.ATTR_MODIFIED,e),a.renderingContext.root.removeEventListener(m.BOUNDS_CHANGED,n)}),r.hooks.endFrame.tap(pp.tag,function(){a.syncRTree()})},e.syncRTree=function(){var a=this,s=[];Array.from(this.toSync).filter(function(t){return t.isConnected}).forEach(function(t){var e,n,r,i=t.rBushNode,o=(i&&a.rBush.remove(i.aabb),t.getRenderBounds());o&&(e=(n=o.getMin())[0],n=n[1],r=(o=o.getMax())[0],o=o[1],i.aabb={id:t.entity,minX:e,minY:n,maxX:r,maxY:o}),i.aabb&&s.push(i.aabb)}),this.rBush.load(s),this.toSync.clear()},t}()).tag="Prepare",pp=_t),zp=(t([f(Rd),e("design:type",Object)],Fp.prototype,"renderingContext",void 0),t([f(Bl),e("design:type",Object)],Fp.prototype,"styleValueRegistry",void 0),t([f(Nd),e("design:type",Object)],Fp.prototype,"sceneGraphService",void 0),t([f(Ch),e("design:type",Jr)],Fp.prototype,"rBush",void 0),Fp=pp=t([p({contrib:Vd})],Fp),Gr(function(t){Ur.register(t,Vd,{cache:!1}),Ur.register(t,Lp,{cache:!1}),t({token:Ch,useValue:new Jr}),t(Gd),t(Hd),t(jp),t(Fp),t(Rp),t(Ip),t(Bp)})),Vp=((dt=fp=fp||{}).READY="ready",dt.BEFORE_RENDER="beforerender",dt.AFTER_RENDER="afterrender",dt.BEFORE_DESTROY="beforedestroy",dt.AFTER_DESTROY="afterdestroy",dt.RESIZE="resize",dt.DIRTY_RECTANGLE="dirtyrectangle",function(w){function t(t){var e=w.call(this)||this,n=(e.container=Xr.createChild(),e.document=void 0,e.customElements=void 0,e.requestAnimationFrame=void 0,e.cancelAnimationFrame=void 0,e.devicePixelRatio=void 0,e.supportsPointerEvents=void 0,e.supportsTouchEvents=void 0,e.isTouchEvent=void 0,e.isMouseEvent=void 0,e.Element=jh,e.frameId=void 0,e.eventService=void 0,e.renderingService=void 0,e.inited=!1,e.readyPromise=void 0,e.resolveReadyPromise=void 0,e.document=new dd,e.document.defaultView=ls(e),e.customElements=new kd,t.container),r=t.canvas,i=t.offscreenCanvas,o=t.width,a=t.height,s=t.devicePixelRatio,l=t.renderer,u=t.background,c=t.cursor,h=t.document,d=t.requestAnimationFrame,p=t.cancelAnimationFrame,f=t.createImage,y=t.supportsPointerEvents,g=t.supportsTouchEvents,v=t.isTouchEvent,t=t.isMouseEvent,m=(m=n,b=ls(e),m&&(m="string"==typeof m?m:m.id||Os++,Ms[m]&&Ms[m].destroy(),Ms[m]=b),o),b=a,x=s;return r&&(x=1<=(x=s||Cs&&window.devicePixelRatio||1)?Math.ceil(x):1,m=o||("auto"===(o=pl(s=r,"width"))?s.offsetWidth:parseFloat(o))||r.width/x,b=a||("auto"===(o=pl(s=r,"height"))?s.offsetHeight:parseFloat(o))||r.height/x),e.devicePixelRatio=x,e.requestAnimationFrame=null!=d?d:Ja.bind(globalThis),e.cancelAnimationFrame=null!=p?p:Qa.bind(globalThis),e.supportsTouchEvents=null!=g?g:"ontouchstart"in globalThis,e.supportsPointerEvents=null!=y?y:!!globalThis.PointerEvent,e.isTouchEvent=null!=v?v:function(t){return e.supportsTouchEvents&&t instanceof globalThis.TouchEvent},e.isMouseEvent=null!=t?t:function(t){return!globalThis.MouseEvent||t instanceof globalThis.MouseEvent&&(!e.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))},e.initRenderingContext({container:n,canvas:r,width:m,height:b,renderer:l,offscreenCanvas:i,devicePixelRatio:x,cursor:c||"default",background:u,createImage:f,document:h}),e.initDefaultCamera(m,b),es(S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initRenderer(l);case 2:e.dispatchEvent(new Mh(fp.READY)),e.readyPromise&&e.resolveReadyPromise();case 4:case"end":return t.stop()}},t)}))(),e}g(t,w);var e=t.prototype;return e.initRenderingContext=function(t){var e=this;this.container.register({token:ou,useValue:t}),this.container.register({token:Rd,useValue:{root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}),this.document.documentElement.addEventListener(m.CHILD_INSERTED,function(t){e.mountChildren(t.detail.child)}),this.document.documentElement.addEventListener(m.CHILD_REMOVED,function(t){e.unmountChildren(t.detail.child)})},e.initDefaultCamera=function(t,e){var t=(new zd).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),n=(t.canvas=this).container.get(Rd);t.on(Dd,function(){n.renderReasons.add(Od.CAMERA_CHANGED)}),this.container.register({token:jd,useValue:t})},e.getConfig=function(){return this.container.get(ou)},e.getContainer=function(){return this.container},e.getRoot=function(){return this.document.documentElement},e.getCamera=function(){return this.container.get(jd)},e.getContextService=function(){return this.container.get(Id)},e.getEventService=function(){return this.eventService},e.getRenderingService=function(){return this.renderingService},e.getRenderingContext=function(){return this.container.get(Rd)},e.getStats=function(){return this.getRenderingService().getStats()},e.destroy=function(t,e){void 0===t&&(t=!0),(e=void 0===e?!1:e)||this.dispatchEvent(new Mh(fp.BEFORE_DESTROY)),this.frameId&&(this.getConfig().cancelAnimationFrame||cancelAnimationFrame)(this.frameId);var n=this.getRoot();this.unmountChildren(n),t&&this.document.destroy(),this.getContextService().destroy(),this.getRenderingService().destroy(),e||this.dispatchEvent(new Mh(fp.AFTER_DESTROY))},e.changeSize=function(t,e){this.resize(t,e)},e.resize=function(t,e){var n=this.container.get(ou),n=(n.width=t,n.height=e,this.getContextService().resize(t,e),this.container.get(jd)),r=n.getProjectionMode();n.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),r===Ad.ORTHOGRAPHIC?n.setOrthographic(t/-2,t/2,e/2,e/-2,n.getNear(),n.getFar()):n.setAspect(t/e),this.dispatchEvent(new Mh(fp.RESIZE,{width:t,height:e}))},e.appendChild=function(t,e){return this.document.documentElement.appendChild(t,e)},e.insertBefore=function(t,e){return this.document.documentElement.insertBefore(t,e)},e.removeChild=function(t,e){return this.document.documentElement.removeChild(t,e=void 0===e?!0:e)},e.removeChildren=function(t){this.document.documentElement.removeChildren(t=void 0===t?!0:t)},e.render=function(){this.dispatchEvent(new Mh(fp.BEFORE_RENDER)),this.container.isBound(Gd)&&this.container.get(Gd).render(this.getConfig()),this.dispatchEvent(new Mh(fp.AFTER_RENDER))},e.run=function(){var e=this;(function t(){e.render(),e.frameId=requestAnimationFrame(t)})()},e.initRenderer=function(){var e=es(S().mark(function t(e){var n;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Renderer is required.");case 2:return this.inited=!1,this.readyPromise=void 0,this.loadCommonContainerModule(),this.loadRendererContainerModule(e),n=this.container.get(Id),this.renderingService=this.container.get(Gd),this.eventService=this.container.get(Hd),t.next=11,n.init();case 11:return t.next=13,this.renderingService.init();case 13:this.inited=!0,this.getRoot().forEach(function(t){t=t.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0,t.dirty=!0)}),this.mountChildren(this.getRoot()),e.getConfig().enableAutoRendering&&this.run();case 17:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.loadCommonContainerModule=function(){this.container.unload(zp),this.container.load(zp,!0)},e.loadRendererContainerModule=function(t){var e=this;t.getPlugins().forEach(function(t){t.container=e.container,t.init()})},e.setRenderer=function(){var e=es(S().mark(function t(e){var n,r;return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.getConfig()).renderer===e)return t.abrupt("return");t.next=3;break;case 3:return r=n.renderer,n.renderer=e,this.destroy(!1,!0),[].concat(null==r?void 0:r.getPlugins()).reverse().forEach(function(t){t.destroy()}),t.next=9,this.initRenderer(e);case 9:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),e.setCursor=function(t){this.container.get(ou).cursor=t,this.getContextService().applyCursorStyle(t)},e.unmountChildren=function(t){var e,n=this;this.inited&&(e=[],t.forEach(function(t){t.isConnected&&e.push(t)}),e.reverse().forEach(function(t){t instanceof Bh&&t.disconnectedCallback&&t.disconnectedCallback(),t.dispatchEvent(new Mh(m.UNMOUNTED)),t!==n.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1}))},e.mountChildren=function(t){var e=this;this.inited?t.forEach(function(t){t.isConnected||(t.ownerDocument=e.document,t.isConnected=!0,t.dispatchEvent(new Mh(m.MOUNTED)),t instanceof Bh&&t.connectedCallback&&t.connectedCallback())}):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName)},e.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.getPointByClient=function(t,e){return this.client2Viewport({x:t,y:e})},e.getClientByPoint=function(t,e){return this.viewport2Client({x:t,y:e})},rs(t,[{key:"ready",get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise(function(t){e.resolveReadyPromise=function(){t(e)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}}]),t}(ye)),Gp=(Xr.load(o),Xr.get(Gu)),Hp=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},Wp={}.toString,Up=function(t,e){return Wp.call(t)==="[object "+e+"]"},Yp=function(t){return Up(t,"Function")},qp=function(t){return null==t},Xp=function(t){return Array.isArray?Array.isArray(t):Up(t,"Array")},Zp=function(t){var e=typeof t;return null!==t&&"object"==e||"function"==e};function Kp(t,e){if(t)if(Xp(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(Zp(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}function $p(t){if(Xp(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])}function Jp(t){if(Xp(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])}var Qp=function(t){return"object"==typeof t&&null!==t},tf=function(t){if(!Qp(t)||!Up(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ef=function(t){return Up(t,"String")};function nf(t){if(Hp(t))return t[0]}function rf(t){if(Hp(t))return t[t.length-1]}function of(t,e,n){return t<e?e:n<t?n:t}function af(t){return Up(t,"Number")}var sf=1e-5;function lf(t,e,n){return void 0===n&&(n=sf),Math.abs(t-e)<n}var uf=function(t,e){if(Xp(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=Yp(e)?e(o):o[e];r<a&&(n=o,r=a)}return n}},cf=function(t,e){if(Xp(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=Yp(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},hf=Object.values?function(t){return Object.values(t)}:function(n){var r=[];return Kp(n,function(t,e){Yp(n)&&"prototype"===e||r.push(t)}),r},df=function(t){return qp(t)?"":t.toString()};function pf(t){return null===t}function ff(t){return void 0===t}function yf(t){return t instanceof Element||t instanceof HTMLDocument}var gf=function(t){t=df(t);return t.charAt(0).toUpperCase()+t.substring(1)};function vf(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function mf(t,e,n,r){return e&&vf(t,e),n&&vf(t,n),r&&vf(t,r),t}function bf(o,a){if(Yp(o))return s.cache=new Map,s;function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=a?a.apply(this,t):t[0],r=s.cache;if(r.has(n))return r.get(n);var i=o.apply(this,t);return r.set(n,i),i}throw new TypeError("Expected a function")}var xf=function(t){if("object"!=typeof t||null===t)return t;if(Xp(t))for(var e=[],n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=xf(t[n]):e[n]=t[n];else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=xf(t[i]):e[i]=t[i];return e},wf=5;function kf(t,e,n){for(var r=0,i=ef(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t}function _f(e,t){if(null===e||!tf(e))return{};var n={};return Kp(t,function(t){Af.call(e,t)&&(n[t]=e[t])}),n}function Sf(t,r){var n=function(t,e,n){return r.includes(n)||(t[n]=e),t},e={};if(!Xp(t)&&!tf(t))return t;var i=e;return Kp(t,function(t,e){i=n(i,t,e)}),i}function Ef(n,r,i){function o(){c=!1===i.leading?0:Date.now(),a=null,u=n.apply(s,l),a||(s=l=null)}function t(){var t=Date.now(),e=(c||!1!==i.leading||(c=t),r-(t-c));return s=this,l=arguments,e<=0||r<e?(a&&(clearTimeout(a),a=null),c=t,u=n.apply(s,l),a||(s=l=null)):a||!1===i.trailing||(a=setTimeout(o,e)),u}var a,s,l,u,c=0;return i=i||{},t.cancel=function(){clearTimeout(a),c=0,a=s=l=null},t}function Tf(){}function Mf(t){return t}var Of,A=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)!function t(e,n,r,i){for(var o in r=r||0,i=i||wf,n){var a;n.hasOwnProperty(o)&&(null!==(a=n[o])&&tf(a)?(tf(e[o])||(e[o]={}),r<i?t(e[o],a,r+1,i):e[o]=n[o]):Xp(a)?(e[o]=[],e[o]=e[o].concat(a)):void 0!==a&&(e[o]=a))}}(t,e[r]);return t},Pf=function(t,e){if(!Hp(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},Cf=function(t,e){if(t===e)return!0;if(t&&e&&!ef(t)&&!ef(e)){if(Hp(t)||Hp(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=Cf(t[r],e[r]));r++);return n}if(Qp(t)||Qp(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=Cf(t[i[r]],e[i[r]]));r++);return n}}return!1},Af=Object.prototype.hasOwnProperty;function Nf(t){return qp(t)?0:(Hp(t)?t:Object.keys(t)).length}var Lf=bf(function(t,e){var n=(e=void 0===e?{}:e).fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,e=e.fontVariant;return(Of=Of||document.createElement("canvas").getContext("2d")).font=[o,e,i,n+"px",r].join(" "),Of.measureText(ef(t)?t:"").width},function(t,e){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([t],hf(e=void 0===e?{}:e)).join("")});function If(t,e){return(If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rf=d.defineToken("PathGeneratorFactory"),jf=d.defineToken("PathGenerator");function Df(t,e){e=e.r;t.arc(e.value,e.value,e.value,0,2*Math.PI,!1)}function Bf(t,e){var n,r,i=e.rx,e=e.ry,i=i.value,e=e.value;t.ellipse?t.ellipse(i,e,i,e,0,0,2*Math.PI,!1):(n=e<i?i:e,r=e<i?1:i/e,e=e<i?e/i:1,t.save(),t.scale(r,e),t.arc(0,0,n,0,2*Math.PI))}function Ff(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.defX,a=void 0===a?0:a,e=e.defY,e=void 0===e?0:e;t.moveTo(n.value-a,r.value-e),t.lineTo(i.value-a,o.value-e)}function zf(t,e){var n=e.defX,r=void 0===n?0:n,n=e.defY,i=void 0===n?0:n,n=e.path,e=n.curve,n=n.zCommandIndexes,o=[].concat(e);n.forEach(function(t,e){o.splice(t+e,1,["Z"])});for(var a=0;a<o.length;a++){var s=o[a];switch(s[0]){case"M":t.moveTo(s[1]-r,s[2]-i);break;case"C":t.bezierCurveTo(s[1]-r,s[2]-i,s[3]-r,s[4]-i,s[5]-r,s[6]-i);break;case"Z":t.closePath()}}}function Vf(t,e){var n=e.defX,r=void 0===n?0:n,n=e.defY,i=void 0===n?0:n,o=e.points.points,a=o.length,n=o[0][0]-r,e=o[0][1]-i,s=o[a-1][0]-r,l=o[a-1][1]-i;t.moveTo(n,e);for(var u=0;u<a-1;u++){var c=o[u];t.lineTo(c[0]-r,c[1]-i)}t.lineTo(s,l)}function Gf(t,e){var n=e.defX,r=void 0===n?0:n,n=e.defY,i=void 0===n?0:n,o=e.points.points,a=o.length,n=o[0][0]-r,e=o[0][1]-i,s=o[a-1][0]-r,l=o[a-1][1]-i;t.moveTo(n,e);for(var u=0;u<a-1;u++){var c=o[u];t.lineTo(c[0]-r,c[1]-i)}t.lineTo(s,l)}function Hf(t,e){var n,r,i,o,a=e.radius,s=e.width,e=e.height,l=s.value,u=e.value;a&&a.some(function(t){return 0!==t.value})?(n=(s=0<s.value?1:-1)+(e=0<e.value?1:-1)==0,r=(a=a.map(function(t){return zs(t.value,0,Math.min(Math.abs(l)/2,Math.abs(u)/2))}))[0],i=a[1],o=a[2],a=a[3],t.moveTo(s*r,0),t.lineTo(l-s*i,0),0!==i&&t.arc(l-s*i,e*i,i,-e*Math.PI/2,0<s?0:Math.PI,n),t.lineTo(l,u-e*o),0!==o&&t.arc(l-s*o,u-e*o,o,0<s?0:Math.PI,0<e?Math.PI/2:1.5*Math.PI,n),t.lineTo(s*a,u),0!==a&&t.arc(s*a,u-e*a,a,0<e?Math.PI/2:-Math.PI/2,0<s?Math.PI:0,n),t.lineTo(0,e*r),0!==r&&t.arc(s*r,e*r,r,0<s?Math.PI:0,0<e?1.5*Math.PI:Math.PI/2,n)):t.rect(0,0,l,u)}var Wf=Gr(function(t){t({token:{token:jf,named:O.CIRCLE},useValue:Df}),t({token:{token:jf,named:O.ELLIPSE},useValue:Bf}),t({token:{token:jf,named:O.RECT},useValue:Hf}),t({token:{token:jf,named:O.LINE},useValue:Ff}),t({token:{token:jf,named:O.POLYLINE},useValue:Gf}),t({token:{token:jf,named:O.POLYGON},useValue:Vf}),t({token:{token:jf,named:O.PATH},useValue:zf}),t({token:Rf,useFactory:function(e){return function(t){return e.container.isBoundNamed(jf,t)?e.container.getNamed(jf,t):null}}})}),Uf=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-path-generator",t}t=i,(n=e).prototype=Object.create(t.prototype),If(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(Wf,!0)},n.destroy=function(){this.container.unload(Wf)},e}(up);function Yf(){Yf=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function qf(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Xf(t,e){return(Xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Zf,Kf="undefined"!=typeof Float32Array?Float32Array:Array;function $f(){var t=new Kf(16);return Kf!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Jf(){var t=new Kf(3);return Kf!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Qf(t,e,n){var r=new Kf(3);return r[0]=t,r[1]=e,r[2]=n,r}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),Jf(),n=new Kf(2),Kf!=Float32Array&&(n[0]=0,n[1]=0);var ty=d.defineToken("PointInPathPicker"),ey=(($=function(){function t(){var L=this;this.displayObjectPool=void 0,this.canvasConfig=void 0,this.offscreenCanvas=void 0,this.rBush=void 0,this.pathGeneratorFactory=void 0,this.pathGeneratorFactoryCache={},this.pointInPathPickerFactory=void 0,this.isHit=function(t,e,n){var r,i,o,a,s,l,u,c,h,d,p,f,y,g,v,m,b,x,w,k,_,S,E,T,M,O=L.pointInPathPickerFactory(t.nodeName);if(O){r=$f(),i=(n=n)[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=n[9],f=n[10],N=n[11],y=n[12],g=n[13],v=n[14],n=n[15];var P=(M=(m=i*u-o*l)*(P=f*n-N*v)-(b=i*c-a*l)*(T=p*n-N*g)+(C=i*h-s*l)*(E=p*v-f*g)+(x=o*c-a*u)*(S=d*n-N*y)-(A=o*h-s*u)*(_=d*v-f*y)+(w=a*h-s*c)*(k=d*g-p*y))?(r[0]=(u*P-c*T+h*E)*(M=1/M),r[1]=(a*T-o*P-s*E)*M,r[2]=(g*w-v*A+n*x)*M,r[3]=(f*A-p*w-N*x)*M,r[4]=(c*S-l*P-h*_)*M,r[5]=(i*P-a*S+s*_)*M,r[6]=(v*C-y*w-n*b)*M,r[7]=(d*w-f*C+N*b)*M,r[8]=(l*T-u*S+h*k)*M,r[9]=(o*S-i*T-s*k)*M,r[10]=(y*A-g*C+n*m)*M,r[11]=(p*C-d*A-N*m)*M,r[12]=(u*_-l*E-c*k)*M,r[13]=(i*E-o*_+a*k)*M,r[14]=(g*b-y*x-v*m)*M,r[15]=(d*x-p*b+f*m)*M,r):null,C=(w=Jf(),h=Qf(e[0],e[1],0),S=P,T=h[0],s=h[1],h=h[2],n=S[3]*T+S[7]*s+S[11]*h+S[15],w[0]=(S[0]*T+S[4]*s+S[8]*h+S[12])/(n=n||1),w[1]=(S[1]*T+S[5]*s+S[9]*h+S[13])/n,w[2]=(S[2]*T+S[6]*s+S[10]*h+S[14])/n,w),A=t.getGeometryBounds().halfExtents,N=t.parsedStyle.anchor;if(C[0]+=(N&&N[0].value||0)*A[0]*2,C[1]+=(N&&N[1].value||0)*A[1]*2,O(t,new Ac(C[0],C[1]),L.isPointInPath))return!0}return!1},this.isPointInPath=function(t,e){var n=L.offscreenCanvas.getOrCreateContext(L.canvasConfig.offscreenCanvas),r=(void 0===L.pathGeneratorFactoryCache[t.nodeName]&&(L.pathGeneratorFactoryCache[t.nodeName]=L.pathGeneratorFactory(t.nodeName)),L.pathGeneratorFactoryCache[t.nodeName]);return r&&(n.beginPath(),r(n,t.parsedStyle),n.closePath()),n.isPointInPath(e.x,e.y)}}return t.prototype.apply=function(t){var I=this;t.hooks.pick.tapPromise(Zf.tag,function(){s=Yf().mark(function t(_){var S,E,T,M,O,P,C,A,N,L;return Yf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:S=_.topmost,O=_.position,E=O.x,O=O.y,E=Qf(E,O,0),O=I.rBush.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]}),T=O.map(function(t){return t.id}),M=[],O.forEach(function(t){t=t.id,t=I.displayObjectPool.getByEntity(t);!t.isVisible()||t.isCulled()||!t.isInteractive()||t.parentNode&&-1===T.indexOf(t.parentNode.entity)||M.push(t)}),M.sort(function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder}),O=[],P=0,C=M;case 9:if(!(P<C.length)){t.next=36;break}if(A=C[P],N=A.getWorldTransform(),!I.isHit(A,E,N)){t.next=33;break}if(!(L=A.parsedStyle.clipPath)){t.next=27;break}if(e=$f(),n=N,r=L.getLocalTransform(),k=w=x=b=m=v=g=y=f=p=d=h=c=u=l=s=a=o=i=void 0,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=n[9],f=n[10],y=n[11],g=n[12],v=n[13],m=n[14],n=n[15],b=r[0],x=r[1],w=r[2],k=r[3],e[0]=b*i+x*l+w*d+k*g,e[1]=b*o+x*u+w*p+k*v,e[2]=b*a+x*c+w*f+k*m,e[3]=b*s+x*h+w*y+k*n,b=r[4],x=r[5],w=r[6],k=r[7],e[4]=b*i+x*l+w*d+k*g,e[5]=b*o+x*u+w*p+k*v,e[6]=b*a+x*c+w*f+k*m,e[7]=b*s+x*h+w*y+k*n,b=r[8],x=r[9],w=r[10],k=r[11],e[8]=b*i+x*l+w*d+k*g,e[9]=b*o+x*u+w*p+k*v,e[10]=b*a+x*c+w*f+k*m,e[11]=b*s+x*h+w*y+k*n,b=r[12],x=r[13],w=r[14],k=r[15],e[12]=b*i+x*l+w*d+k*g,e[13]=b*o+x*u+w*p+k*v,e[14]=b*a+x*c+w*f+k*m,e[15]=b*s+x*h+w*y+k*n,N=e,!I.isHit(L,E,N)){t.next=25;break}if(S)return _.picked=[A],t.abrupt("return",_);t.next=24;break;case 24:O.push(A);case 25:t.next=33;break;case 27:if(S)return _.picked=[A],t.abrupt("return",_);t.next=32;break;case 32:O.push(A);case 33:P++,t.next=9;break;case 36:return _.picked=O,t.abrupt("return",_);case 38:case"end":return t.stop()}var e,n,r,i,o,a,s,l,u,c,h,d,p,f,y,g,v,m,b,x,w,k},t)});var s,e=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){qf(r,e,n,i,o,"next",t)}function o(t){qf(r,e,n,i,o,"throw",t)}i(void 0)})};return function(t){return e.apply(this,arguments)}}())},t}()).tag="CanvasPicker",Zf=$);function ny(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function ry(t,e){return Math.abs(t-e)<.001}function iy(t,e){var n=Math.min.apply(Math,t),r=Math.min.apply(Math,e);return{x:n,y:r,width:Math.max.apply(Math,t)-n,height:Math.max.apply(Math,e)-r}}t([f(Ih),e("design:type",Ih)],ey.prototype,"displayObjectPool",void 0),t([f(ou),e("design:type",Object)],ey.prototype,"canvasConfig",void 0),t([f(Wd),e("design:type",Wd)],ey.prototype,"offscreenCanvas",void 0),t([f(Ch),e("design:type",Jr)],ey.prototype,"rBush",void 0),t([f(Rf),e("design:type",Function)],ey.prototype,"pathGeneratorFactory",void 0),t([f(ty),e("design:type",Function)],ey.prototype,"pointInPathPickerFactory",void 0);var ey=Zf=t([p({contrib:Vd})],ey),oy={box:function(t,e,n,r){return iy([t,n],[e,r])},length:ny,pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?ny(t,e,i,o):(n-t)*(n-t)+(r-e)*(r-e)<a?ny(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){n=[n-t,r-e];if((r=n)[0]===(a=[0,0])[0]&&r[1]===a[1])return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var a,s,r=[-n[1],n[0]],l=(s=(n=a=r)[0],l=n[1],0<(s=s*s+l*l)&&(s=1/Math.sqrt(s)),a[0]=n[0]*s,a[1]=n[1]*s,[i-t,o-e]);return Math.abs(l[0]*r[0]+l[1]*r[1])},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function ay(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function sy(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function ly(t,e,n,r){var i,o,r=-3*t+9*e-9*n+3*r,n=6*t-12*e+6*n,e=3*e-3*t,t=[];return ry(r,0)?ry(n,0)||0<=(i=-e/n)&&i<=1&&t.push(i):ry(e=n*n-4*r*e,0)?t.push(-n/(2*r)):0<e&&(o=(-n-(e=Math.sqrt(e)))/(2*r),0<=(i=(-n+e)/(2*r))&&i<=1&&t.push(i),0<=o&&o<=1&&t.push(o)),t}function uy(t,e,n,r,i,o,a,s,l){var u=ay(t,n,i,a,l),c=ay(e,r,o,s,l),h=oy.pointAt(t,e,n,r,l),n=oy.pointAt(n,r,i,o,l),r=oy.pointAt(i,o,a,s,l),i=oy.pointAt(h.x,h.y,n.x,n.y,l),o=oy.pointAt(n.x,n.y,r.x,r.y,l);return[[t,e,h.x,h.y,i.x,i.y,u,c],[u,c,o.x,o.y,r.x,r.y,a,s]]}function cy(t,e,n,r,i,o,a,s,l){if(0===l){for(var u=[t,n,i,a],c=[e,r,o,s],h=0,d=u.length,p=0;p<d;p++)h+=ny(u[p],c[p],u[(p+1)%d],c[(p+1)%d]);return h/2}t=uy(t,e,n,r,i,o,a,s,.5),e=[].concat(t[0],[l-1]),n=[].concat(t[1],[l-1]);return cy.apply(void 0,e)+cy.apply(void 0,n)}var hy={extrema:ly,box:function(t,e,n,r,i,o,a,s){for(var l=[t,a],u=[e,s],c=ly(t,n,i,a),h=ly(e,r,o,s),d=0;d<c.length;d++)l.push(ay(t,n,i,a,c[d]));for(var p=0;p<h.length;p++)u.push(ay(e,r,o,s,h[p]));return iy(l,u)},length:function(t,e,n,r,i,o,a,s){return cy(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,u,c){for(var h=[t,n,i,a],d=[e,r,o,s],t=l,p=ay,n=c,f=-1,y=1/0,g=[t,u],v=20,m=1/(v=n&&200<n?n/10:v),b=m/10,x=0;x<=v;x++){var w=x*m,k=[p.apply(void 0,h.concat([w])),p.apply(void 0,d.concat([w]))],k=ny(g[0],g[1],k[0],k[1]);k<y&&(f=w,y=k)}if(0===f)return{x:h[0],y:d[0]};if(1===f)return{x:h[(t=h.length)-1],y:d[t-1]};for(var y=1/0,_=0;_<32&&!(b<1e-4);_++){var S=f-b,E=f+b,T=[p.apply(void 0,h.concat([S])),p.apply(void 0,d.concat([S]))],T=ny(g[0],g[1],T[0],T[1]);0<=S&&T<y?(f=S,y=T):(S=[p.apply(void 0,h.concat([E])),p.apply(void 0,d.concat([E]))],T=ny(g[0],g[1],S[0],S[1]),E<=1&&T<y?(f=E,y=T):b*=.5)}return{x:p.apply(void 0,h.concat([f])),y:p.apply(void 0,d.concat([f]))}},pointDistance:function(t,e,n,r,i,o,a,s,l,u,c){t=this.nearestPoint(t,e,n,r,i,o,a,s,l,u,c);return ny(t.x,t.y,l,u)},interpolationAt:ay,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:ay(t,n,i,a,l),y:ay(e,r,o,s,l)}},divide:uy,tangentAngle:function(t,e,n,r,i,o,a,s,l){t=sy(t,n,i,a,l),n=sy(e,r,o,s,l);return(Math.atan2(n,t)+2*Math.PI)%(2*Math.PI)}};function dy(t,e,n,r){t-=n,n=e-r;return Math.sqrt(t*t+n*n)}function py(t,e,n,r,i,o){return t<=i&&i<=t+n&&e<=o&&o<=e+r}function fy(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<r||i<l)return!1;r={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return dy(r.x,r.y,a,s)<=o/2}function yy(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),h=i/2;return s-h<=o&&o<=l+h&&u-h<=a&&a<=c+h&&oy.pointToLine(t,e,n,r,o,a)<=i/2}function gy(t,e,n,r,i){var o=t.length;if(!(o<2)){for(var a=0;a<o-1;a++)if(yy(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){var i=t[0],s=t[o-1];if(yy(i[0],i[1],s[0],s[1],e,n,r))return!0}}return!1}var vy=1e-6;function my(t){return Math.abs(t)<vy?0:t<0?-1:1}function by(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o,a,s,l=0;l<i;l++){var u=t[l],c=t[(l+1)%i];if(a=c,((s=[e,n])[0]-(o=u)[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&Math.min(o[0],a[0])<=s[0]&&s[0]<=Math.max(o[0],a[0])&&Math.min(o[1],a[1])<=s[1]&&s[1]<=Math.max(o[1],a[1]))return!0;0<my(u[1]-n)!=0<my(c[1]-n)&&my(e-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(r=!r)}return r}function xy(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=by(t[i],e,n));i++);return r}function wy(t,e){var t=t.parsedStyle,n=t.r,r=t.fill,i=t.stroke,o=t.lineWidth,a=t.increasedLineWidthForHitTesting,t=t.clipPathTargets,n=n.value,o=(((null==o?void 0:o.value)||0)+((null==a?void 0:a.value)||0))/2,a=dy(n,n,e.x,e.y),e=!(null==t||!t.length),t=r&&!r.isNone,r=i&&!i.isNone;return t&&r||e?a<=n+o:t?a<=n:!!r&&(n-o<=a&&a<=n+o)}function ky(t,e,n,r){return t/(n*n)+e/(r*r)}function _y(t,e){var n=e.x,e=e.y,t=t.parsedStyle,r=t.rx,i=t.ry,o=t.fill,a=t.stroke,s=t.lineWidth,l=t.increasedLineWidthForHitTesting,t=t.clipPathTargets,t=!(null==t||!t.length),o=o&&!o.isNone,a=a&&!a.isNone,r=r.value,i=i.value,s=(((null==s?void 0:s.value)||0)+((null==l?void 0:l.value)||0))/2,l=(n-r)*(n-r),n=(e-i)*(e-i);return o&&a||t?ky(l,n,r+s,i+s)<=1:o?ky(l,n,r,i)<=1:!!a&&(1<=ky(l,n,r-s,i-s)&&ky(l,n,r+s,i+s)<=1)}function Sy(t,e){var t=t.parsedStyle,n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.lineWidth,s=t.increasedLineWidthForHitTesting,l=t.defX,t=t.defY;return yy(n.value,r.value,i.value,o.value,((null==a?void 0:a.value)||0)+((null==s?void 0:s.value)||0),e.x+(void 0===l?0:l),e.y+(void 0===t?0:t))}function Ey(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=r.increasedLineWidthForHitTesting,a=r.stroke,s=r.fill,l=r.defX,l=void 0===l?0:l,u=r.defY,u=void 0===u?0:u,c=r.clipPathTargets,r=r.path,s=s&&!s.isNone,a=a&&!a.isNone,h=r.segments,d=r.hasArc,p=r.polylines,f=r.polygons,r=r.totalLength,c=!(null==c||!c.length),y=!1;return y=(y=a||c?function(t,e,n,r,i){for(var o=!1,a=0;a<t.length;a++){var s=t[a],l=s.currentPoint,u=s.params,c=s.prePoint;switch(s.command){case"L":case"Z":o=yy(c[0],c[1],l[0],l[1],e,n,r);break;case"C":o=hy.pointDistance(c[0],c[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=e/2}if(o)break}return o}(h,((null==i?void 0:i.value)||0)+((null==o?void 0:o.value)||0),e.x+l,e.y+u,r):y)||!s&&!c?y:d?n(t,e):xy(f,e.x+l,e.y+u)||xy(p,e.x+l,e.y+u)}function Ty(t,e){var t=t.parsedStyle,n=t.stroke,r=t.fill,i=t.lineWidth,o=t.increasedLineWidthForHitTesting,a=t.points,s=t.defX,s=void 0===s?0:s,l=t.defY,l=void 0===l?0:l,t=t.clipPathTargets,t=!(null==t||!t.length),r=r&&!r.isNone,u=!1;return u=(u=n&&!n.isNone||t?gy(a.points,((null==i?void 0:i.value)||0)+((null==o?void 0:o.value)||0),e.x+s,e.y+l,!0):u)||!r&&!t?u:by(a.points,e.x+s,e.y+l)}function My(t,e){var t=t.parsedStyle,n=t.stroke,r=t.lineWidth,i=t.increasedLineWidthForHitTesting,o=t.points,a=t.defX,s=t.defY,t=t.clipPathTargets,t=!(null==t||!t.length);return!(!(n&&!n.isNone||t)||!r)&&gy(o.points,((null==r?void 0:r.value)||0)+((null==i?void 0:i.value)||0),e.x+(void 0===a?0:a),e.y+(void 0===s?0:s),!1)}function Oy(t,e,n){var r=t.parsedStyle,i=r.radius,o=r.fill,a=r.stroke,s=r.lineWidth,l=r.increasedLineWidthForHitTesting,u=r.width,c=r.height,r=r.clipPathTargets,r=!(null==r||!r.length),o=o&&!o.isNone,a=a&&!a.isNone,h=i&&i.some(function(t){return 0!==t.value}),d=u.unit,u=u.value,p=c.unit,c=c.value,f=0,y=0,d=(d!==P.kNumber&&d!==P.kPixels||(f=u),p!==P.kNumber&&p!==P.kPixels||(y=c),((null==s?void 0:s.value)||0)+((null==l?void 0:l.value)||0));if(h)return u=!1,(a||r)&&(c=p=0,s=f,l=y,h=i.map(function(t){return zs(t.value,0,Math.min(Math.abs(f)/2,Math.abs(y)/2))}),i=d,g=e.x,v=e.y,b=h[0],x=h[1],m=h[2],h=h[3],u=yy(p+b,c,p+s-x,c,i,g,v)||yy(p+s,c+x,p+s,c+l-m,i,g,v)||yy(p+s-m,c+l,p+h,c+l,i,g,v)||yy(p,c+l-h,p,c+b,i,g,v)||fy(p+s-x,c+x,x,1.5*Math.PI,2*Math.PI,i,g,v)||fy(p+s-m,c+l-m,m,0,.5*Math.PI,i,g,v)||fy(p+h,c+l-h,h,.5*Math.PI,Math.PI,i,g,v)||fy(p+b,c+b,b,Math.PI,1.5*Math.PI,i,g,v)),u||!o&&!r?u:n(t,e);var g,v,m,b,x=d/2;return o&&a||r?py(0-x,0-x,f+x,y+x,e.x,e.y):o?py(0,0,f,y,e.x,e.y):!!a&&(m=s=0,l=f,h=y,p=d,c=e.x,b=e.y,py(s-(i=p/2),m-i,l,p,c,b)||py(s+l-i,m-i,p,h,c,b)||py(s+i,m+h-i,l,p,c,b)||py(s-i,m+i,p,h,c,b))}var Py=Gr(function(t){t({token:ty,useFactory:function(t){return function(t){return t===O.CIRCLE?wy:t===O.ELLIPSE?_y:t===O.RECT?Oy:t===O.LINE?Sy:t===O.POLYLINE?My:t===O.POLYGON?Ty:t===O.PATH?Ey:t===O.IMAGE||t===O.TEXT?function(){return!0}:null}}}),t(ey)}),Cy=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-picker",t}t=i,(n=e).prototype=Object.create(t.prototype),Xf(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(Py,!0)},n.destroy=function(){this.container.unload(Py)},e}(up);function Ay(){Ay=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function Ny(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ly(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Ny(r,e,n,i,o,"next",t)}function o(t){Ny(r,e,n,i,o,"throw",t)}i(void 0)})}}function Iy(t,e){return(Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ry,jy=function(){function t(){this.imageCache={},this.gradientCache={},this.patternCache={},this.canvasConfig=void 0}var e=t.prototype;return e.getImageSync=function(t,e){return this.imageCache[t]||this.getOrCreateImage(t).then(function(){e&&e()}),this.imageCache[t]},e.getOrCreateImage=function(r){var i=this;if(this.imageCache[r])return Promise.resolve(this.imageCache[r]);var o=this.canvasConfig.createImage;return new Promise(function(t,e){var n;o?n=o(r):Cs&&(n=new window.Image),n&&(n.onload=function(){t(n)},n.onerror=function(t){e(t)},n.crossOrigin="Anonymous",n.src=r,i.imageCache[r]=n)})},e.getOrCreatePatternSync=function(t,e,n){var r=this.generatePatternKey(t);if(r&&this.patternCache[r])return this.patternCache[r];var i=t.image,t=t.repetition,n=Jl(i)?this.getImageSync(i,n):i,i=n&&e.createPattern(n,t);return r&&i&&(this.patternCache[r]=i),i},e.getOrCreateGradient=function(t,e){var r,n,i,o,a,s=this.generateGradientKey(t),l=t.type,u=t.steps,c=t.width,h=t.height,d=t.angle,p=t.cx,t=t.cy;return this.gradientCache[s]||(r=null,l===sc.LinearGradient?(n=c,i=h,d=(d=d)*Math.PI/180,o=0+n/2,a=0+i/2,n=Math.abs(n*Math.cos(d))+Math.abs(i*Math.sin(d)),i={x1:o-Math.cos(d)*n/2,y1:a-Math.sin(d)*n/2,x2:o+Math.cos(d)*n/2,y2:a+Math.sin(d)*n/2},r=e.createLinearGradient(i.x1,i.y1,i.x2,i.y2)):l===sc.RadialGradient&&(o={x:p*c,y:t*h,r:Math.sqrt(c*c+h*h)/2},r=e.createRadialGradient(a=o.x,d=o.y,0,a,d,o.r)),r&&(u.forEach(function(t){var e,n=t[0],t=t[1];null!=(e=r)&&e.addColorStop(n,t)}),this.gradientCache[s]=r)),this.gradientCache[s]},e.generateGradientKey=function(t){var e=t.type,n=t.width,r=t.height,i=t.steps;return"gradient-"+e+"-"+(t.angle||0)+"-"+(t.cx||0)+"-"+(t.cy||0)+"-"+n+"-"+r+"-"+i.map(function(t){return t.join("")}).join("-")},e.generatePatternKey=function(t){var e=t.image,t=t.repetition;if(Jl(e))return"pattern-"+e+"-"+t},t}(),Dy=(t([f(ou),e("design:type",Object)],jy.prototype,"canvasConfig",void 0),jy=t([p()],jy),(h=function(){function t(){this.imagePool=void 0,this.renderingContext=void 0}return t.prototype.apply=function(r){function e(t){var e=t.target,t=e.nodeName,n=e.attributes;t===O.IMAGE&&Jl(t=n.img)&&i.imagePool.getImageSync(t,function(){e.renderable.dirty=!0,r.dirtify()})}function n(t){var e=t.target,n=t.attrName,t=t.newValue;e.nodeName===O.IMAGE&&"img"===n&&Jl(t)&&i.imagePool.getOrCreateImage(t).then(function(){e.renderable.dirty=!0,r.dirtify()})}var i=this;r.hooks.init.tapPromise(Ry.tag,Ly(Ay().mark(function t(){return Ay().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.renderingContext.root.addEventListener(m.MOUNTED,e),i.renderingContext.root.addEventListener(m.ATTR_MODIFIED,n);case 2:case"end":return t.stop()}},t)}))),r.hooks.destroy.tap(Ry.tag,function(){i.renderingContext.root.removeEventListener(m.MOUNTED,e),i.renderingContext.root.removeEventListener(m.ATTR_MODIFIED,n)})},t}()).tag="LoadImage",Ry=h),By=(t([f(jy),e("design:type",jy)],Dy.prototype,"imagePool",void 0),t([f(Rd),e("design:type",Object)],Dy.prototype,"renderingContext",void 0),Dy=Ry=t([p({contrib:Vd})],Dy),Gr(function(t){t(jy),t(Dy)})),Fy=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="image-loader",t}t=i,(n=e).prototype=Object.create(t.prototype),Iy(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(By,!0)},n.destroy=function(){this.container.unload(By)},e}(up);function zy(){zy=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function Vy(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Gy(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){Vy(r,e,n,i,o,"next",t)}function o(t){Vy(r,e,n,i,o,"throw",t)}i(void 0)})}}function Hy(){return(Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Wy(t,e){t.prototype=Object.create(e.prototype),Uy(t.prototype.constructor=t,e)}function Uy(t,e){return(Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yy="undefined"!=typeof Float32Array?Float32Array:Array;function qy(){var t=new Yy(16);return Yy!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Xy(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}function Zy(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],y=e[12],g=e[13],v=e[14],e=e[15],m=n[0],b=n[1],x=n[2],w=n[3];t[0]=m*r+b*s+x*h+w*y,t[1]=m*i+b*l+x*d+w*g,t[2]=m*o+b*u+x*p+w*v,t[3]=m*a+b*c+x*f+w*e,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*r+b*s+x*h+w*y,t[5]=m*i+b*l+x*d+w*g,t[6]=m*o+b*u+x*p+w*v,t[7]=m*a+b*c+x*f+w*e,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*r+b*s+x*h+w*y,t[9]=m*i+b*l+x*d+w*g,t[10]=m*o+b*u+x*p+w*v,t[11]=m*a+b*c+x*f+w*e,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*r+b*s+x*h+w*y,t[13]=m*i+b*l+x*d+w*g,t[14]=m*o+b*u+x*p+w*v,t[15]=m*a+b*c+x*f+w*e}function Ky(t,e,n){var r,i,o,a,s,l,u,c,h,d,p,f,y=n[0],g=n[1],n=n[2];e===t?(t[12]=e[0]*y+e[4]*g+e[8]*n+e[12],t[13]=e[1]*y+e[5]*g+e[9]*n+e[13],t[14]=e[2]*y+e[6]*g+e[10]*n+e[14],t[15]=e[3]*y+e[7]*g+e[11]*n+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*y+s*g+h*n+e[12],t[13]=i*y+l*g+d*n+e[13],t[14]=o*y+u*g+p*n+e[14],t[15]=a*y+c*g+f*n+e[15])}function $y(){var t=new Yy(3);return Yy!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Jy(t,e,n){var r=new Yy(3);return r[0]=t,r[1]=e,r[2]=n,r}function Qy(t,e,n){var r=e[0],i=e[1],e=e[2],o=n[3]*r+n[7]*i+n[11]*e+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*e+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*e+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*e+n[14])/o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),$y();var t0,e0,n0=d.defineToken("StyleRendererFactory"),r0=d.defineToken("CircleRenderer",{multiple:!1}),i0=d.defineToken("EllipseRenderer",{multiple:!1}),o0=d.defineToken("RectRenderer",{multiple:!1}),a0=d.defineToken("LineRenderer",{multiple:!1}),s0=d.defineToken("PolylineRenderer",{multiple:!1}),l0=d.defineToken("PolygonRenderer",{multiple:!1}),u0=d.defineToken("PathRenderer",{multiple:!1}),c0=d.defineToken("TextRenderer",{multiple:!1}),h0=d.defineToken("ImageRenderer",{multiple:!1}),d0=function(){function t(){this.imagePool=void 0}return t.prototype.render=function(t,e){var n=e.width,r=e.height,e=e.img,n=n.value,r=r.value,e=Jl(e)?this.imagePool.getImageSync(e):(n=n||e.width,r=r||e.height,e);if(e)try{t.drawImage(e,0,0,n,r)}catch(t){}},t}(),p0=(t([f(jy),e("design:type",jy)],d0.prototype,"imagePool",void 0),d0=t([p({token:h0})],d0),function(){function t(){}var e=t.prototype;return e.render=function(t,e,n){var r=e.lineWidth,i=e.textAlign,o=e.textBaseline,a=e.lineJoin,s=e.miterLimit,l=e.letterSpacing,u=e.stroke,c=e.fill,h=e.fillOpacity,d=e.strokeOpacity,p=e.opacity,f=e.metrics,y=e.dx,e=e.dy,g=f.font,v=f.lines,m=f.height,b=f.lineHeight,x=f.lineMetrics,w=(t.font=g,t.lineWidth=r.value,t.textAlign=i.value,t.textBaseline=o.value,t.lineJoin=a.value,M(s)||(t.miterLimit=s.value),0),k=("middle"===o.value?w=-m/2-b/2:"bottom"===o.value||"alphabetic"===o.value||"ideographic"===o.value?w=-m:"top"!==o.value&&"hanging"!==o.value||(w=-b),0);y&&y.unit===P.kPixels&&(k+=y.value),e&&e.unit===P.kPixels&&(w+=e.value);for(var _=0;_<v.length;_++){var S=r.value/2+k;w+=b,!M(u)&&!u.isNone&&r&&r.value&&this.drawLetterSpacing(t,v[_],x[_],i.value,S,w,l.value,h.value,d.value,p.value,!0),M(c)||this.drawLetterSpacing(t,v[_],x[_],i.value,S,w,l.value,h.value,d.value,p.value)}},e.drawLetterSpacing=function(t,e,n,r,i,o,a,s,l,u,c){if(void 0===c&&(c=!1),0===a)c?this.strokeText(t,e,i,o,l):this.fillText(t,e,i,o,s,u);else{for(var h=t.textAlign,d=(t.textAlign="left",i),p=("center"===r?d=i-n.width/2:"right"!==r&&"end"!==r||(d=i-n.width),Array.from(e)),f=t.measureText(e).width,y=0;y<p.length;++y){var g=p[y];c?this.strokeText(t,g,d,o,l):this.fillText(t,g,d,o,s,u),d+=f-(g=t.measureText(e.substring(y+1)).width)+a,f=g}t.textAlign=h}},e.fillText=function(t,e,n,r,i,o){var a,s=!M(i)&&1!==i;s&&(a=t.globalAlpha,t.globalAlpha=i*o),t.fillText(e,n,r),s&&(t.globalAlpha=a)},e.strokeText=function(t,e,n,r,i){var o,a=!M(i)&&1!==i;a&&(o=t.globalAlpha,t.globalAlpha=i),t.strokeText(e,n,r),a&&(t.globalAlpha=o)},t}()),p0=t([p({token:c0})],p0),X=function(){function t(){this.imagePool=void 0}var e=t.prototype;return e.render=function(t,e,n,r){var i=e.fill,o=e.opacity,a=e.fillOpacity,s=e.stroke,l=e.strokeOpacity,u=e.lineWidth,c=e.lineCap,h=e.lineJoin,d=e.shadowType,p=e.shadowColor,f=e.shadowBlur,y=e.filter,e=e.miterLimit,g=!M(i)&&!i.isNone,v=!M(s)&&!s.isNone&&u&&0<u.value,m=0===i.alpha,y=!M(y),p=!M(p)&&0<(null==f?void 0:f.value),f=n.nodeName,d="inner"===(null==d?void 0:d.value),f=v&&p&&(f===O.PATH||f===O.LINE||f===O.POLYLINE||m||d);g&&(t.globalAlpha=o.value*a.value,f||this.setShadowAndFilter(n,t,p),this.fill(t,n,i,r),f||this.clearShadowAndFilter(t,y,p)),v&&(t.globalAlpha=o.value*l.value,t.lineWidth=u.value,M(e)||(t.miterLimit=e.value),M(c)||(t.lineCap=c.value),M(h)||(t.lineJoin=h.value),f&&(d&&(t.globalCompositeOperation="source-atop"),this.setShadowAndFilter(n,t,!0),d&&(this.stroke(t,n,s,r),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,y,!0))),this.stroke(t,n,s,r))},e.clearShadowAndFilter=function(t,e,n){n&&(t.shadowColor="transparent",t.shadowBlur=0),e&&!M(n=t.filter)&&-1<n.indexOf("drop-shadow")&&(t.filter=n.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")},e.setShadowAndFilter=function(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,r=r.shadowOffsetY;M(i)||(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=a&&a.value||0,e.shadowOffsetX=s&&s.value||0,e.shadowOffsetY=r&&r.value||0)},e.fill=function(e,n,t,r){var i=this;Array.isArray(t)?t.forEach(function(t){e.fillStyle=i.getColor(t,n,e),e.fill()}):(Sc(t)&&(e.fillStyle=this.getPattern(t,n,e,r)),e.fill())},e.stroke=function(e,n,t,r){var i=this;Array.isArray(t)?t.forEach(function(t){e.strokeStyle=i.getColor(t,n,e),e.stroke()}):(Sc(t)&&(e.strokeStyle=this.getPattern(t,n,e,r)),e.stroke())},e.getPattern=function(t,e,n,r){return this.imagePool.getOrCreatePatternSync(t,n,function(){e.renderable.dirty=!0,r.dirtify()})},e.getColor=function(t,e,n){var r;return t.type!==sc.LinearGradient&&t.type!==sc.RadialGradient||(r=(e=e.getGeometryBounds())&&2*e.halfExtents[0]||1,e=e&&2*e.halfExtents[1]||1,r=this.imagePool.getOrCreateGradient(Hy({type:t.type},t.value,{width:r,height:e}),n)),r},t}(),f0=(t([f(jy),e("design:type",jy)],X.prototype,"imagePool",void 0),function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X=t([p()],X))),f0=t([p({token:o0})],f0),y0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),y0=t([p({token:r0})],y0),g0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),g0=t([p({token:i0})],g0),v0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),v0=t([p({token:a0})],v0),m0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),m0=t([p({token:s0})],m0),b0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),b0=t([p({token:l0})],b0),x0=function(t){function e(){return t.apply(this,arguments)||this}return Wy(e,t),e}(X),x0=t([p({token:u0})],x0),w0=d.defineToken("CanvasRendererPluginOptions"),k0=((it=function(){function t(){this.canvasConfig=void 0,this.camera=void 0,this.contextService=void 0,this.renderingContext=void 0,this.pathGeneratorFactory=void 0,this.pathGeneratorFactoryCache={},this.styleRendererFactory=void 0,this.styleRendererFactoryCache={},this.displayObjectPool=void 0,this.canvasRendererPluginOptions=void 0,this.rBush=void 0,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=qy(),this.dprMatrix=qy(),this.tmpMat4=qy(),this.tmpVec3=$y()}var e=t.prototype;return e.apply=function(l){function s(t){(t=t.target.rBushNode).aabb&&h.removedRBushNodeAABBs.push(t.aabb)}function u(t){(t=t.target.rBushNode).aabb&&h.removedRBushNodeAABBs.push(t.aabb)}function c(t){t.isVisible()&&!t.isCulled()&&(h.renderDisplayObject(t,l),h.saveDirtyAABB(t)),t.sortable.sorted&&t.sortable.sorted.length&&t.sortable.sorted.forEach(function(t){c(t)})}var h=this,d=this.renderingContext.root.ownerDocument.defaultView;l.hooks.init.tapPromise(t0.tag,Gy(zy().mark(function t(){var r,i,o,a;return zy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h.renderingContext.root.addEventListener(m.UNMOUNTED,s),h.renderingContext.root.addEventListener(m.CULLED,u),r=h.contextService.getDPR(),o=h.canvasConfig,i=o.width,o=o.height,a=h.contextService.getContext(),h.clearRect(a,0,0,i*r,o*r),e=h.dprMatrix,n=Jy(r,r,1),e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1;case 7:case"end":return t.stop()}var e,n},t)}))),l.hooks.destroy.tap(t0.tag,function(){h.renderingContext.root.removeEventListener(m.UNMOUNTED,s),h.renderingContext.root.removeEventListener(m.CULLED,u)}),l.hooks.beginFrame.tap(t0.tag,function(){var t=h.contextService.getContext(),e=h.contextService.getDPR(),n=h.canvasConfig,r=n.width,n=n.height,i=h.canvasRendererPluginOptions,o=i.dirtyObjectNumThreshold,i=i.dirtyObjectRatioThreshold,a=l.getStats(),s=a.total,a=a.rendered,s=a/s;h.clearFullScreen=l.disableDirtyRectangleRendering()||o<a&&i<s,t&&(t.resetTransform(),h.clearFullScreen&&h.clearRect(t,0,0,r*e,n*e))});l.hooks.endFrame.tap(t0.tag,function(){var t=h.contextService.getContext();if(Zy(h.vpMatrix,h.dprMatrix,h.camera.getOrthoMatrix()),h.clearFullScreen)c(h.renderingContext.root);else{var e=h.safeMergeAABB.apply(h,[h.mergeDirtyAABBs(h.renderQueue)].concat(h.removedRBushNodeAABBs.map(function(t){var e=t.minX,n=t.minY,r=t.maxX,t=t.maxY,i=new Oc;return i.setMinMax(Jy(e,n,0),Jy(r,t,0)),i})));if(h.removedRBushNodeAABBs=[],Oc.isEmpty(e))return void(h.renderQueue=[]);var n=h.convertAABB2Rect(e),r=n.x,i=n.y,o=n.width,a=n.height,s=Qy(h.tmpVec3,Jy(r,i,0),h.vpMatrix),r=Qy($y(),Jy(r+o,i+a,0),h.vpMatrix),o=Math.floor(s[0]),i=Math.floor(s[1]),a=Math.ceil(r[0]-s[0]),r=Math.ceil(r[1]-s[1]);t.save(),h.clearRect(t,o,i,a,r),t.beginPath(),t.rect(o,i,a,r),t.clip(),t.setTransform(h.vpMatrix[0],h.vpMatrix[1],h.vpMatrix[4],h.vpMatrix[5],h.vpMatrix[12],h.vpMatrix[13]),h.canvasConfig.renderer.getConfig().enableDirtyRectangleRenderingDebug&&d.dispatchEvent(new Mh(fp.DIRTY_RECTANGLE,{dirtyRect:n})),h.searchDirtyObjects(e).sort(function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder}).forEach(function(t){t&&t.isVisible()&&!t.isCulled()&&h.renderDisplayObject(t,l)}),t.restore(),h.renderQueue.forEach(function(t){h.saveDirtyAABB(t)}),h.renderQueue=[]}h.restoreStack.forEach(function(){t.restore()}),h.restoreStack=[]}),l.hooks.render.tap(t0.tag,function(t){h.clearFullScreen||h.renderQueue.push(t)})},e.clearRect=function(t,e,n,r,i){t.clearRect(e,n,r,i);var o=this.canvasConfig.background;o&&(t.fillStyle=o,t.fillRect(e,n,r,i))},e.renderDisplayObject=function(t,e){for(var n=this.contextService.getContext(),r=this.restoreStack[this.restoreStack.length-1];r&&t.parentNode!==r;)n.restore(),this.restoreStack.pop(),r=this.restoreStack[this.restoreStack.length-1];var i,o=t.nodeName,a=(void 0===this.styleRendererFactoryCache[o]&&(this.styleRendererFactoryCache[o]=this.styleRendererFactory(o)),this.styleRendererFactoryCache[o]),o=(void 0===this.pathGeneratorFactoryCache[o]&&(this.pathGeneratorFactoryCache[o]=this.pathGeneratorFactory(o)),this.pathGeneratorFactoryCache[o]),s=t.parsedStyle.clipPath;s&&(this.applyWorldTransform(n,s,t.getWorldTransform()),void 0===this.pathGeneratorFactoryCache[s.nodeName]&&(this.pathGeneratorFactoryCache[s.nodeName]=this.pathGeneratorFactory(s.nodeName)),(i=this.pathGeneratorFactoryCache[s.nodeName])&&(n.save(),this.restoreStack.push(t),n.beginPath(),i(n,s.parsedStyle),n.closePath(),n.clip())),a&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),o&&(n.beginPath(),o(n,t.parsedStyle),t.nodeName!==O.LINE&&t.nodeName!==O.PATH&&t.nodeName!==O.POLYLINE&&n.closePath()),a&&(a.render(n,t.parsedStyle,t,e),n.restore()),t.renderable.dirty=!1},e.convertAABB2Rect=function(t){var e=t.getMin(),t=t.getMax(),n=Math.floor(e[0]),e=Math.floor(e[1]);return{x:n,y:e,width:Math.ceil(t[0])-n,height:Math.ceil(t[1])-e}},e.mergeDirtyAABBs=function(t){var n=new Oc;return t.forEach(function(t){var e=t.getRenderBounds(),e=(n.add(e),t.renderable.dirtyRenderBounds);e&&n.add(e)}),n},e.searchDirtyObjects=function(t){var e=this,n=t.getMin(),r=n[0],n=n[1],t=t.getMax(),i=t[0],t=t[1];return this.rBush.search({minX:r,minY:n,maxX:i,maxY:t}).map(function(t){t=t.id;return e.displayObjectPool.getByEntity(t)})},e.saveDirtyAABB=function(t){var e=t.renderable,t=(e.dirtyRenderBounds||(e.dirtyRenderBounds=new Oc),t.getRenderBounds());t&&e.dirtyRenderBounds.update(t.center,t.halfExtents)},e.applyAttributesToContext=function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,o=n.opacity,a=n.lineDash,n=n.lineDashOffset;a&&Array.isArray(a)&&t.setLineDash(a.map(function(t){return t.value})),M(n)||(t.lineDashOffset=n.value),M(o)||(t.globalAlpha*=o.value),M(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),M(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)},e.applyWorldTransform=function(t,e,n){var r=0,i=0,o=(e.parsedStyle||{}).anchor,a=o&&o[0].value||0,o=o&&o[1].value||0;0===a&&0===o||(r=-a*((a=e.getGeometryBounds())&&2*a.halfExtents[0]||0),i=-o*(a&&2*a.halfExtents[1]||0)),n?(Xy(this.tmpMat4,e.getLocalTransform()),this.tmpVec3[0]=r,this.tmpVec3[1]=i,this.tmpVec3[2]=0,Ky(this.tmpMat4,this.tmpMat4,this.tmpVec3),Zy(this.tmpMat4,n,this.tmpMat4)):(Xy(this.tmpMat4,e.getWorldTransform()),this.tmpVec3[0]=r,this.tmpVec3[1]=i,this.tmpVec3[2]=0,Ky(this.tmpMat4,this.tmpMat4,this.tmpVec3)),Zy(this.tmpMat4,this.vpMatrix,this.tmpMat4),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.safeMergeAABB=function(){for(var e=new Oc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e.add(t)}),e},t}()).tag="CanvasRenderer",t0=it),_0=(t([f(ou),e("design:type",Object)],k0.prototype,"canvasConfig",void 0),t([f(jd),e("design:type",zd)],k0.prototype,"camera",void 0),t([f(Id),e("design:type",Object)],k0.prototype,"contextService",void 0),t([f(Rd),e("design:type",Object)],k0.prototype,"renderingContext",void 0),t([f(Rf),e("design:type",Function)],k0.prototype,"pathGeneratorFactory",void 0),t([f(n0),e("design:type",Function)],k0.prototype,"styleRendererFactory",void 0),t([f(Ih),e("design:type",Ih)],k0.prototype,"displayObjectPool",void 0),t([f(w0),e("design:type",Object)],k0.prototype,"canvasRendererPluginOptions",void 0),t([f(Ch),e("design:type",Jr)],k0.prototype,"rBush",void 0),k0=t0=t([p({contrib:Vd})],k0),Gr(function(t){t(y0),t(g0),t(f0),t(d0),t(p0),t(v0),t(m0),t(b0),t(x0),(e={})[O.CIRCLE]=r0,e[O.ELLIPSE]=i0,e[O.RECT]=o0,e[O.IMAGE]=h0,e[O.TEXT]=c0,e[O.LINE]=a0,e[O.POLYLINE]=s0,e[O.POLYGON]=l0,e[O.PATH]=u0;var e,n=e;t({token:n0,useFactory:function(e){return function(t){t=n[t];return t&&e.container.isBound(t)?e.container.get(t):null}}}),t(k0)})),S0=function(n){function t(t){var e;return void 0===t&&(t={}),(e=n.call(this)||this).options=void 0,e.name="canvas-renderer",e.options=t,e}Wy(t,n);var e=t.prototype;return e.init=function(){this.container.register(w0,{useValue:Hy({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options)}),this.container.load(_0,!0)},e.destroy=function(){this.container.unload(_0),this.container.remove(w0)},t}(up);function E0(){E0=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function T0(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function M0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){T0(r,e,n,i,o,"next",t)}function o(t){T0(r,e,n,i,o,"throw",t)}i(void 0)})}}function O0(t,e){return(O0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(V=function(){function t(){this.contextService=void 0,this.renderingContext=void 0}return t.prototype.apply=function(e){function i(t){e.hooks.pointerWheel.call(t)}var o=this,a=this.renderingContext.root.ownerDocument.defaultView,s=function(t){e.hooks.pointerMove.call(t)},l=function(t){e.hooks.pointerUp.call(t)},u=function(t){e.hooks.pointerDown.call(t)},c=function(t){e.hooks.pointerOver.call(t)},h=function(t){e.hooks.pointerOut.call(t)},d=function(t){e.hooks.pointerCancel.call(t)};e.hooks.init.tapPromise(e0.tag,M0(E0().mark(function t(){var r;return E0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.contextService.getDomElement(),globalThis.navigator.msPointerEnabled?(r.style.msContentZooming="none",r.style.msTouchAction="none"):a.supportsPointerEvents&&(r.style.touchAction="none"),a.supportsPointerEvents?(n=r,globalThis.document.addEventListener("pointermove",s,!0),n.addEventListener("pointerdown",u,!0),n.addEventListener("pointerleave",h,!0),n.addEventListener("pointerover",c,!0),globalThis.addEventListener("pointerup",l,!0)):(n=r,globalThis.document.addEventListener("mousemove",s,!0),n.addEventListener("mousedown",u,!0),n.addEventListener("mouseout",h,!0),n.addEventListener("mouseover",c,!0),globalThis.addEventListener("mouseup",l,!0)),a.supportsTouchEvents&&((e=r).addEventListener("touchstart",u,!0),e.addEventListener("touchend",l,!0),e.addEventListener("touchmove",s,!0),e.addEventListener("touchcancel",d,!0)),r.addEventListener("wheel",i,{passive:!0,capture:!0});case 5:case"end":return t.stop()}var e,n},t)}))),e.hooks.destroy.tap(e0.tag,function(){var t,e,n=o.contextService.getDomElement();globalThis.navigator.msPointerEnabled?(n.style.msContentZooming="",n.style.msTouchAction=""):a.supportsPointerEvents&&(n.style.touchAction=""),a.supportsPointerEvents?(t=n,globalThis.document.removeEventListener("pointermove",s,!0),t.removeEventListener("pointerdown",u,!0),t.removeEventListener("pointerleave",h,!0),t.removeEventListener("pointerover",c,!0),globalThis.removeEventListener("pointerup",l,!0)):(t=n,globalThis.document.removeEventListener("mousemove",s,!0),t.removeEventListener("mousedown",u,!0),t.removeEventListener("mouseout",h,!0),t.removeEventListener("mouseover",c,!0),globalThis.removeEventListener("mouseup",l,!0)),a.supportsTouchEvents&&((e=n).removeEventListener("touchstart",u,!0),e.removeEventListener("touchend",l,!0),e.removeEventListener("touchmove",s,!0),e.removeEventListener("touchcancel",d,!0)),n.removeEventListener("wheel",i,!0)})},t}()).tag="DOMInteraction";var P0,C0=e0=V,A0=(t([f(Id),e("design:type",Object)],C0.prototype,"contextService",void 0),t([f(Rd),e("design:type",Object)],C0.prototype,"renderingContext",void 0),C0=e0=t([p({contrib:Vd})],C0),Gr(function(t){t(C0)})),N0=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="dom-interaction",t}t=i,(n=e).prototype=Object.create(t.prototype),O0(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(A0,!0)},n.destroy=function(){this.container.unload(A0)},e}(up);function L0(){L0=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function I0(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function R0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){I0(r,e,n,i,o,"next",t)}function o(t){I0(r,e,n,i,o,"throw",t)}i(void 0)})}}function j0(t,e){return(j0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(H=function(){function t(){this.contextService=void 0,this.renderingContext=void 0,this.canvasConfig=void 0,this.$camera=void 0}var e=t.prototype;return e.apply=function(t){function i(t,e){t=t.getWorldTransform(),e.style.transform="matrix("+[t[0],t[1],t[4],t[5],t[12],t[13]].join(",")+")"}function e(t){var e,n,r=t.target;r.nodeName===O.HTML&&(e=a.getOrCreateEl(r),n=r.ownerDocument.documentElement.attributes,Object.keys(n).forEach(function(t){e.style[t]=n[t]}),Object.keys(r.attributes).forEach(function(t){a.updateAttribute(t,r)}),i(r,e))}function n(t){var e;(t=t.target).nodeName===O.HTML&&(t=a.getId(t),(e=a.contextService.getDomElement().parentNode)&&(t=e.querySelector("#"+t))&&e.removeChild(t))}function r(t){var e=t.target;e.nodeName===O.HTML&&(t=t.attrName,a.updateAttribute(t,e))}function o(t){var e;(t=t.target).nodeName===O.HTML&&(e=a.getOrCreateEl(t),i(t,e))}var a=this;t.hooks.init.tapPromise(P0.tag,R0(L0().mark(function t(){return L0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.renderingContext.root.addEventListener(m.MOUNTED,e),a.renderingContext.root.addEventListener(m.UNMOUNTED,n),a.renderingContext.root.addEventListener(m.ATTR_MODIFIED,r),a.renderingContext.root.addEventListener(m.BOUNDS_CHANGED,o);case 4:case"end":return t.stop()}},t)}))),t.hooks.destroy.tap(P0.tag,function(){a.renderingContext.root.removeEventListener(m.MOUNTED,e),a.renderingContext.root.removeEventListener(m.UNMOUNTED,n),a.renderingContext.root.removeEventListener(m.ATTR_MODIFIED,r),a.renderingContext.root.removeEventListener(m.BOUNDS_CHANGED,o)})},e.getId=function(t){return t.id||"g-html-"+t.entity},e.getOrCreateEl=function(t){var e,n=this.canvasConfig.document,r=this.getId(t),i=this.contextService.getDomElement().parentNode;return i?((e=i.querySelector("#"+r))||(e=(n||document).createElement("div"),(t.parsedStyle.$el=e).id=r,t.name&&e.setAttribute("name",t.name),t.className&&(e.className=t.className),i.appendChild(e),e.style.position="absolute",e.style.left="0",e.style.top="0",e.style["will-change"]="transform",n=t.getWorldTransform(),e.style.transform="matrix("+[n[0],n[1],n[4],n[5],n[12],n[13]].join(",")+")"),e):null},e.updateAttribute=function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Jl(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"transformOrigin":r=e.parsedStyle.transformOrigin;n.style["transform-origin"]=r[0].value+" "+r[1].value;break;case"width":r=e.computedStyleMap().get("width");n.style.width=r.toString();break;case"height":r=e.computedStyleMap().get("height");n.style.height=r.toString();break;case"zIndex":r=e.parsedStyle.zIndex;n.style["z-index"]=""+r.value;break;case"visibility":r=e.parsedStyle.visibility;n.style.visibility=r.value;break;case"pointerEvents":r=e.parsedStyle.pointerEvents;n.style.pointerEvents=r.value;break;case"opacity":r=e.parsedStyle.opacity;n.style.opacity=""+r.value;break;case"fill":var r=e.parsedStyle.fill,i="";r instanceof fc?i=r.isNone?"transparent":e.getAttribute("fill"):Array.isArray(r)?i=e.getAttribute("fill"):Sc(r),n.style.background=i;break;case"stroke":r=e.parsedStyle.stroke,i="";r instanceof fc?i=r.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(r)?i=e.getAttribute("stroke"):Sc(r),n.style["border-color"]=i,n.style["border-style"]="solid";break;case"lineWidth":r=e.parsedStyle.lineWidth;n.style["border-width"]=(r.value||0)+"px";break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":i=e.parsedStyle.filter;n.style.filter=i}},t}()).tag="HTMLRendering";var D0=P0=H,B0=(t([f(Id),e("design:type",Object)],D0.prototype,"contextService",void 0),t([f(Rd),e("design:type",Object)],D0.prototype,"renderingContext",void 0),t([f(ou),e("design:type",Object)],D0.prototype,"canvasConfig",void 0),D0=P0=t([p({contrib:Vd})],D0),Gr(function(t){t(D0)})),F0=function(i){var t;function e(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="html-renderer",t}t=i,(n=e).prototype=Object.create(t.prototype),j0(n.prototype.constructor=n,t);var n=e.prototype;return n.init=function(){this.container.load(B0,!0)},n.destroy=function(){this.container.unload(B0)},e}(up);function z0(){z0=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function V0(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function G0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){V0(r,e,n,i,o,"next",t)}function o(t){V0(r,e,n,i,o,"throw",t)}i(void 0)})}}function H0(t,e){t.prototype=Object.create(e.prototype),W0(t.prototype.constructor=t,e)}function W0(t,e){return(W0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var U0=function(){function t(){this.$container=void 0,this.$canvas=void 0,this.dpr=void 0,this.context=void 0,this.canvasConfig=void 0}var e=t.prototype;return e.init=function(){var t=G0(z0().mark(function t(){var e,n,r;return z0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.canvasConfig,r=e.container,n=e.canvas,e=e.devicePixelRatio,n?(this.$canvas=n,r&&n.parentElement!==r&&r.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container):r&&(this.$container=Jl(r)?document.getElementById(r):r,this.$container&&(n=document.createElement("canvas"),this.$container.appendChild(n),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=n)),this.context=this.$canvas.getContext("2d"),r=1<=(r=e||Cs&&window.devicePixelRatio||1)?Math.ceil(r):1,this.dpr=r,this.resize(this.canvasConfig.width,this.canvasConfig.height);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.getContext=function(){return this.context},e.getDomElement=function(){return this.$canvas},e.getDPR=function(){return this.dpr},e.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.resize=function(t,e){var n;this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,n=this.$canvas,t=t,e=e,Cs&&n.style&&(n.style.width=t+"px",n.style.height=e+"px"))},e.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.toDataURL=function(){var e=G0(z0().mark(function t(e){var n,r;return z0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e=void 0===e?{}:e).type,r=r.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t}(),Y0=(t([f(ou),e("design:type",Object)],U0.prototype,"canvasConfig",void 0),U0=t([p({token:Id})],U0),Gr(function(t){t(U0)})),q0=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))||this).name="canvas-context-register",t}H0(t,i);var e=t.prototype;return e.init=function(){this.container.load(Y0,!0)},e.destroy=function(){this.container.unload(Y0)},t}(up),X0=function(e){function t(t){t=e.call(this,t)||this;return t.registerPlugin(new q0),t.registerPlugin(new Fy),t.registerPlugin(new Uf),t.registerPlugin(new S0),t.registerPlugin(new N0),t.registerPlugin(new Cy),t.registerPlugin(new F0),t}return H0(t,e),t}(G);function Z0(){Z0=function(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i,o,a,s,e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new x(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(i,o,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var c={};function h(){}function d(){}function p(){}var e={},f=(o(e,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(w([]))),y=(f&&f!==t&&l.call(f,r)&&(e=f),p.prototype=h.prototype=Object.create(e));function g(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function v(a,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,i){var o,t=u(a[t],a,n);if("throw"!==t.type)return(n=(o=t.arg).value)&&"object"==typeof n&&l.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):s.resolve(n).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)});i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(e){if(e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:k}}function k(){return{value:void 0,done:!0}}return o(y,"constructor",d.prototype=p),o(p,"constructor",d),d.displayName=o(p,i,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},a.awrap=function(t){return{__await:t}},g(v.prototype),o(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new v(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=w,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,b(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function K0(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function $0(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){K0(r,e,n,i,o,"next",t)}function o(t){K0(r,e,n,i,o,"throw",t)}i(void 0)})}}function J0(){return(J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Q0(t,e){return(Q0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tg,eg=d.defineToken("DragndropPluginOptions"),ng=((pt=function(){function t(){this.sceneGraphService=void 0,this.renderingContext=void 0,this.dragndropPluginOptions=void 0}var e=t.prototype;return e.findClosestDraggable=function(t){for(var e=t.composedPath(),n=0;n<e.length;n++){var r=e[n];if(Lh.isElement(r)&&r.getAttribute("draggable"))return r}return null},e.apply=function(t){function e(t){var e,a,s,l,u,c,n,h=t.target,d=h===f,p=d&&o?f:r.findClosestDraggable(t);p&&(e=function(){var e=$0(Z0().mark(function t(e){var n,r,i,o;return Z0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=8;break}if(r=e.timeStamp-s,i=fa([e.clientX,e.clientY],l),r<=m||i<=v)return t.abrupt("return");t.next=5;break;case 5:e.type="dragstart",p.dispatchEvent(e),a=!0;case 8:if(e.type="drag",e.dx=e.clientX-c[0],e.dy=e.clientY-c[1],p.dispatchEvent(e),c=[e.clientX,e.clientY],d){t.next=23;break}return n=h.style.pointerEvents,h.style.pointerEvents="none",r="pointer"===y?[e.canvasX,e.canvasY]:h.getBounds().center,t.next=19,f.elementFromPoint(r[0],r[1]);case 19:i=t.sent,h.style.pointerEvents=n,o=(null==i?void 0:i.closest("[droppable=true]"))||(g?f:null),u!==o&&(u&&(e.type="dragleave",(e.target=u).dispatchEvent(e)),o&&(e.type="dragenter",(e.target=o).dispatchEvent(e)),(u=o)&&(e.type="dragover",(e.target=u).dispatchEvent(e)));case 23:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),a=!1,s=t.timeStamp,l=[t.clientX,t.clientY],u=null,c=[t.clientX,t.clientY],i.addEventListener("pointermove",e),h.addEventListener("pointerup",n=function(){a&&(u&&(t.type="drop",(t.target=u).dispatchEvent(t)),t.type="dragend",t.detail={preventClick:!0},p.dispatchEvent(t),a=!1),i.removeEventListener("pointermove",e)},{once:!0}),h.addEventListener("pointerupoutside",n,{once:!0}))}var r=this,f=this.renderingContext.root.ownerDocument,i=f.defaultView,n=this.dragndropPluginOptions,y=n.overlap,o=n.isDocumentDraggable,g=n.isDocumentDroppable,v=n.dragstartDistanceThreshold,m=n.dragstartTimeThreshold;t.hooks.init.tapPromise(tg.tag,$0(Z0().mark(function t(){return Z0().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.addEventListener("pointerdown",e);case 1:case"end":return t.stop()}},t)}))),t.hooks.destroy.tap(tg.tag,function(){i.removeEventListener("pointerdown",e)})},t}()).tag="Dragndrop",tg=pt),rg=(t([f(Nd),e("design:type",Object)],ng.prototype,"sceneGraphService",void 0),t([f(Rd),e("design:type",Object)],ng.prototype,"renderingContext",void 0),t([f(eg),e("design:type",Object)],ng.prototype,"dragndropPluginOptions",void 0),ng=tg=t([p({contrib:Vd})],ng),Gr(function(t){t(ng)})),ig=function(n){var t;function e(t){var e;return void 0===t&&(t={}),(e=n.call(this)||this).options=void 0,e.name="dragndrop",e.options=t,e}t=n,(r=e).prototype=Object.create(t.prototype),Q0(r.prototype.constructor=r,t);var r=e.prototype;return r.init=function(){this.container.register(eg,{useValue:J0({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)}),this.container.load(rg,!0)},r.destroy=function(){this.container.remove(eg),this.container.unload(rg)},e}(up);const og=({width:t,height:e,container:n})=>{const r=new X0;return r.registerPlugin(new ig),new Vp({container:n,width:t,height:e,renderer:r})},ag=(og.props={},()=>[["cartesian"]]),sg=(ag.props={},({startAngle:t=-Math.PI/2,endAngle:e=3*Math.PI/2,innerRadius:n=0,outerRadius:r=1})=>[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,e,n,r]]),lg=(sg.props={},()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]]),ug=(lg.props={},()=>[["parallel",0,1,0,1]]),cg=(ug.props={},({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2})=>[["fisheye",t,e,n,r]]),hg=(cg.props={},({value:e})=>t=>t.map(()=>e)),dg=(hg.props={},({value:e})=>t=>t.map(e)),pg=(dg.props={},({value:e})=>t=>t.map(t=>t[e])),fg=(pg.props={},({value:t})=>()=>t);function yg(){return[{name:"color"},{name:"shape"},{name:"enterType"},{name:"enterDelay",scaleName:"enter"},{name:"enterDuration",scaleName:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function gg(){return[...yg(),{name:"title",scale:"identity"},{name:"tooltip",scale:"identity",independent:!0}]}function vg(){return[{type:"maybeArrayField"}]}function mg(){return[{type:"maybeKey"}]}fg.props={};const bg=()=>(t,e,n,l)=>{const{x:u,y:c,y1:h,series:d}=n,p=e.x,f=e.series;return[t,Array.from(t,t=>{var e=p.getBandWidth(p.invert(+u[t])),n=e*(f?f.getBandWidth(f.invert(+(null===d||void 0===d?void 0:d[t]))):1),e=(+(null===d||void 0===d?void 0:d[t])||0)*e,e=+u[t]+e,n=e+n,r=+c[t],t=+h[t];const i=[e,r],o=[n,r],a=[n,t],s=[e,t];return[i,o,a,s].map(t=>l.map(t))})]};function xg(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function wg(t,e){t=function(e,n){let r=0,i,o=0,a=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(i=t-o,o+=i/++r,a+=i*(t-o));else{let t=-1;for(var s of e)null!=(s=n(s,++t,e))&&(s=+s)>=s&&(i=s-o,o+=i/++r,a+=i*(s-o))}if(1<r)return a/(r-1)}(t,e);return t&&Math.sqrt(t)}function kg(e,n){let r,i;if(void 0===n)for(const t of e)null!=t&&(void 0===r?t>=t&&(r=i=t):(r>t&&(r=t),i<t&&(i=t)));else{let t=-1;for(var o of e)null!=(o=n(o,++t,e))&&(void 0===r?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}return[r,i]}bg.props={defaultShape:"rect",defaultLabelShape:"label",channels:[...gg(),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...vg(),{type:"maybeZeroY1"},{type:"maybeZeroX"},{type:"maybeStackY",series:!0}],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["rect","hollowRect","funnel","pyramid"]};class _g extends Map{constructor(t,e=function(t){return null!==t&&"object"==typeof t?t.valueOf():t}){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Sg(this,t))}has(t){return super.has(Sg(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):(t.set(e,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){e=e(n);t.has(e)&&(n=t.get(e),t.delete(e));return n}(this,t))}}function Sg({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):n}function Eg(t){return t}function Tg(t,...e){return h=c=Eg,d=e,function t(e,n){if(n>=d.length)return h(e);const r=new _g,i=d[n++];let o=-1;for(const s of e){var a=i(s,++o,e);const l=r.get(a);l?l.push(s):r.set(a,[s])}for(const[u,e]of r)r.set(u,t(e,n));return c(r)}(t,0);var c,h,d}function Mg(t,e){return(null==t||!(t<=t))-(null==e||!(e<=e))||(t<e?-1:e<t?1:0)}function Og(e,n){let r;if(void 0===n)for(const t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function Pg(t,e){let n,r=-1,i=-1;if(void 0===e)for(const a of t)++i,null!=a&&(n<a||void 0===n&&a>=a)&&(n=a,r=i);else for(var o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Cg(e,n){let r;if(void 0===n)for(const t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function Ag(n,r,i=0,o=n.length-1,a){for(a=void 0===a?Mg:function(r=xg){if(r===xg)return Mg;if("function"!=typeof r)throw new TypeError("compare is not a function");return(t,e)=>{var n=r(t,e);return n||0===n?n:(0===r(e,e))-(0===r(t,t))}}(a);i<o;){600<o-i&&(s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),Ag(n,r,Math.max(i,Math.floor(r-l*u/s+c)),Math.min(o,Math.floor(r+(s-l)*u/s+c)),a));var s,l,u,c,h=n[r];let t=i,e=o;for(Ng(n,i,r),0<a(n[o],h)&&Ng(n,i,o);t<e;){for(Ng(n,t,e),++t,--e;a(n[t],h)<0;)++t;for(;0<a(n[e],h);)--e}0===a(n[i],h)?Ng(n,i,e):Ng(n,++e,o),e<=r&&(i=e+1),r<=e&&(o=e-1)}return n}function Ng(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Lg(t,e,n){if(n=(t=Float64Array.from(function*(e,n){if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||n<2)return Cg(t);if(1<=e)return Og(t);var n=(n-1)*e,e=Math.floor(n),r=Og(Ag(t,e).subarray(0,e+1));return r+(Cg(t.subarray(e+1))-r)*(n-e)}}function Ig(e,n){let r=0,i=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(++r,i+=t);else{let t=-1;for(var o of e)null!=(o=n(o,++t,e))&&(o=+o)>=o&&(++r,i+=o)}if(r)return i/r}function Rg(t,e){return Lg(t,.5,e)}function jg(e,n=xg){let r,i=!1;if(1===n.length){let t;for(const a of e){var o=n(a);(i?xg(o,t)<0:0===xg(o,o))&&(r=a,t=o,i=!0)}}else for(const t of e)(i?n(t,r)<0:0===n(t,t))&&(r=t,i=!0);return r}function Dg(e,n){let r=0;if(void 0===n)for(var t of e)(t=+t)&&(r+=t);else{let t=-1;for(var i of e)(i=+n(i,++t,e))&&(r+=i)}return r}function Bg(t){const e=t.getOptions()["transformations"];return e.map(([t])=>t).filter(t=>"transpose"===t).length%2!=0}function Fg(t){const e=t.getOptions()["transformations"];return e.some(([t])=>"polar"===t)}function zg(t){const e=t.getOptions()["transformations"];return e.some(([t])=>"parallel"===t)}const Vg=(t,e,n,r)=>{const{series:i,x:o,y:a}=n;if(void 0===o||void 0===a)throw new Error("Missing encode for x or y channel.");const s=i?Array.from(Tg(t,t=>i[t]).values()):[t];return[s.map(t=>t[0]),Array.from(s,t=>t.map(t=>r.map([+o[t],+a[t]]))),s]},Gg=(t,e,n,i)=>{const o=Object.entries(n).filter(([t])=>t.startsWith("position")).map(([,t])=>t);if(0===o.length)throw new Error("Missing encode for position channel.");return[t,Array.from(t,e=>{var t=o.map(t=>+t[e]),n=i.map(t);const r=[];for(let t=0;t<n.length;t+=2)r.push([n[t],n[t+1]]);return r})]},Hg=()=>(t,e,n,r)=>{const i=zg(r)?Gg:Vg;return i(t,e,n,r)},Wg=(Hg.props={defaultShape:"line",defaultLabelShape:"label",channels:[...gg(),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"identity"}],preInference:[...vg(),{type:"maybeSeries"}],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"},{type:"maybeTooltipPosition"}],shapes:["line","smooth"]},()=>(t,e,n,o)=>{const{x:a,y:s,size:l,dx:u,dy:c}=n,[h,d]=o.getSize();return[t,Array.from(t,t=>{var e=+((null===u||void 0===u?void 0:u[t])||0),n=+((null===c||void 0===c?void 0:c[t])||0),e=+a[t]+e,n=+s[t]+n,t=+l[t],r=t/h,t=t/d,i=[e+r,n+t];return[o.map([e-r,n-t]),o.map(i)]})]}),Ug=(Wg.props={defaultShape:"point",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...vg(),{type:"maybeZeroY"},{type:"maybeZeroX"},{type:"maybeSize"}],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["bowtie","cross","diamond","hexagon","hollowBowtie","hollowDiamond","hollowHexagon","hollowPoint","hollowSquare","hollowTriangle","hollowTriangleDown","hyphen","linePoint","plus","point","square","tick","triangle","triangleDown"]},()=>(t,e,n,r)=>{const{x:i,y:o}=n,a=e["x"];return[t,Array.from(t,t=>{var e=+i[t],t=+o[t],n=(null==(n=null===a||void 0===a?void 0:a.getBandWidth)?void 0:n.call(a))||0;return[r.map([e+n/2,t])]})]}),Yg=(Ug.props={defaultShape:"text",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"text",required:!0,scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["text"]},()=>(t,e,n,l)=>{const{x:u,y:c}=n,h=e.x,d=e.y;return[t,Array.from(t,t=>{var e=h.getBandWidth(h.invert(+u[t])),n=d.getBandWidth(d.invert(+c[t])),r=+u[t],t=+c[t];const i=[r,t],o=[r+e,t],a=[r+e,t+n],s=[r,t+n];return[i,o,a,s].map(t=>l.map(t))})]}),qg=(Yg.props={defaultShape:"rect",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...vg(),{type:"maybeZeroX"},{type:"maybeZeroY"}],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["rect","hollowRect"]},()=>(t,e,n,o)=>{const{x:a,y:s,y1:l,series:r}=n,i=r?Array.from(Tg(t,t=>r[t]).values()):[t];return[i.map(t=>t[0]),Array.from(i,e=>{var n=e.length;const r=new Array(2*n);for(let t=0;t<e.length;t++){var i=e[t];r[t]=o.map([+a[i],+s[i]]),r[n+t]=o.map([+a[i],+l[i]])}return r}),i]}),Xg=(qg.props={defaultShape:"area",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"identity"}],preInference:[...vg(),{type:"maybeSeries"},{type:"maybeZeroY1"}],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["area","smooth"]},()=>(t,e,n,o)=>{const a=Object.entries(n).filter(([t])=>t.startsWith("x")).map(([,t])=>t),s=Object.entries(n).filter(([t])=>t.startsWith("y")).map(([,t])=>t);n=t.map(e=>{const n=[];for(let t=0;t<a.length;t++){var r=a[t][e];if(void 0===r)break;var i=s[t][e];n.push(o.map([+r,+i]))}return n});return[t,n]}),Zg=(Xg.props={defaultShape:"polygon",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["polygon"]},(...t)=>Xg(...t)),Kg=(Zg.props={defaultShape:"edge",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["edge","arc","vhv","smoothEdge","ribbon"]},(...t)=>Xg(...t)),$g=(Kg.props={defaultShape:"pointNode",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"size",required:!0}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["pointNode","polygonNode"]},()=>(t,e,n,r)=>{const{x:i,y:o,x1:a,y1:s}=n,l=(null==(e=null==(n=e.x)?void 0:n.getBandWidth)?void 0:e.call(n))||0;e=t.map(t=>[r.map([+i[t]+l/2,+o[t]]),r.map([+a[t]+l/2,+s[t]])]);return[t,e]}),Jg=($g.props={defaultShape:"link",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["link"]},()=>(t,e,n,r)=>{const{x:i,y:o}=n,a=e["x"];return[t,Array.from(t,t=>{var e=+i[t],t=+o[t],n=(null==(n=null===a||void 0===a?void 0:a.getBandWidth)?void 0:n.call(a))||0;return[r.map([e+n/2,t])]})]}),Qg=(Jg.props={defaultShape:"image",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"src",required:!0,scale:"identity"},{name:"size"}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["image"]},()=>(t,e,n,l)=>{const{x:u,y:c,y1:h,y2:d,y3:p,y4:f,series:y}=n,g=e.x,v=e.series;return[t,Array.from(t,t=>{var e=g.getBandWidth(g.invert(+u[t])),n=e*(v?v.getBandWidth(v.invert(+(null===y||void 0===y?void 0:y[t]))):1),e=(+(null===y||void 0===y?void 0:y[t])||0)*e,e=+u[t]+e+n/2,[t,r,i,o,a]=[+c[t],+h[t],+d[t],+p[t],+f[t]];const s=[[e-n/2,a],[e+n/2,a],[e,a],[e,o],[e-n/2,o],[e+n/2,o],[e+n/2,r],[e-n/2,r],[e-n/2,i],[e+n/2,i],[e,r],[e,t],[e-n/2,t],[e+n/2,t]];return s.map(t=>l.map(t))})]}),tv=(Qg.props={defaultShape:"box",defaultLabelShape:"label",channels:[...gg(),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["box"]},()=>(t,e,n,i)=>{const{x:o,y:a,size:s,rotate:l}=n,[u,c]=i.getSize();n=t.map(t=>{var e=+l[t]/180*Math.PI,n=+s[t],r=n/u,n=n/c,r=r*Math.cos(e),n=-n*Math.sin(e);return[i.map([+o[t]-r/2,+a[t]-n/2]),i.map([+o[t]+r/2,+a[t]+n/2])]});return[t,n]}),ev=(tv.props={defaultShape:"vector",defaultLabelShape:"label",channels:[...gg(),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...vg()],postInference:[...mg(),{type:"maybeTitleX"},{type:"maybeTooltipY"}],shapes:["vector"]},()=>Ug()),nv=(ev.props={defaultShape:"annotation.text",defaultLabelShape:"label",channels:[...yg(),{name:"x",required:!0},{name:"y",required:!0},{name:"text",required:!0,scale:"identity"},{name:"fontSize"},{name:"rotate"}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.text","annotation.badge"]},()=>(t,e,n,r)=>{const i=n["y"];return[t,Array.from(t,t=>{const e=[0,i[t]],n=[1,i[t]];return[e,n].map(t=>r.map(t))})]}),rv=(nv.props={defaultShape:"annotation.line",defaultLabelShape:"label",channels:[...yg(),{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.line"]},()=>(t,e,n,r)=>{const i=n["x"];return[t,Array.from(t,t=>{const e=[i[t],1],n=[i[t],0];return[e,n].map(t=>r.map(t))})]}),iv=(rv.props={defaultShape:"annotation.line",defaultLabelShape:"label",channels:[...yg(),{name:"x",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.line"]},(...t)=>$g(...t));function ov(t,e,n,r){if(e)return()=>[0,1];const{[t]:i,[t+"1"]:o}=n;return t=>{var e=(null==(e=r.getBandWidth)?void 0:e.call(r,r.invert(+o[t])))||0;return[i[t],o[t]+e]}}function av(t={}){const{extendX:r=!1,extendY:i=!1}=t;return(t,e,n,l)=>{const u=ov("x",r,n,e.x),c=ov("y",i,n,e.y);return[t,Array.from(t,t=>{var[e,n]=u(t),[t,r]=c(t);const i=[e,t],o=[n,t],a=[n,r],s=[e,r];return[i,o,a,s].map(t=>l.map(t))})]}}iv.props={defaultShape:"annotation.connector",defaultLabelShape:"label",channels:[...yg(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.connector"]};const sv=()=>av(),lv=(sv.props={defaultShape:"annotation.range",defaultLabelShape:"label",channels:[...yg(),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.range"]},()=>av({extendY:!0})),uv=(lv.props={defaultShape:"annotation.range",defaultLabelShape:"label",channels:[...yg(),{name:"x",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.range"]},()=>av({extendX:!0})),cv=(uv.props={defaultShape:"annotation.range",defaultLabelShape:"label",channels:[...yg(),{name:"y",required:!0}],preInference:[...vg()],postInference:[...mg()],shapes:["annotation.range"]},()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"]),hv=(cv.props={},()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"]);hv.props={};class dv{constructor(t){this.options=A({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=A({},this.options,t),this.rescale(t)}rescale(t){}}function pv(e,n,r){for(let t=0;t<n.length;t+=1)e.has(n[t])||e.set(r(n[t]),t)}function fv(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:o}=t;let a=i.get(e);if(void 0===a){if(o)return o;a=n.push(e)-1,i.set(e,a)}return r[a%r.length]}function yv(t){return t instanceof Date?t=>""+t:"object"==typeof t?t=>JSON.stringify(t):t=>t}class gv extends dv{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[]}}map(t){return 0===this.domainIndexMap.size&&pv(this.domainIndexMap,this.getDomain(),this.domainKey),fv({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&pv(this.rangeIndexMap,this.getRange(),this.rangeKey),fv({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){var[e]=this.options.domain,[n]=this.options.range;this.domainKey=yv(e),this.rangeKey=yv(n),this.rangeIndexMap?(t&&!t.range||this.rangeIndexMap.clear(),t&&!t.domain&&!t.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new gv(this.options)}getRange(){return this.options.range}getDomain(){var t,e;return this.sortedDomain||({domain:t,compare:e}=this.options,this.sortedDomain=e?[...t].sort(e):t),this.sortedDomain}}function vv(t){const e=t["domain"];var n=e.length;if(0===n)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};const{range:r,paddingOuter:i,paddingInner:o,flex:a=[],round:s,align:l}=t;t=a,c=e.length;var u=0<(u=c-t.length)?[...t,...new Array(u).fill(1)]:u<0?t.slice(0,c):t,[c,t]=r,t=t-c,h=t/(2/n*i+1-1/n*o);const d=h*o/n;h-=n*d;const p=function(t){const e=Math.min(...t);return t.map(t=>t/e)}(u),f=h/p.reduce((t,e)=>t+e);u=new Map(e.map((t,e)=>{e=p[e]*f;return[t,s?Math.floor(e):e]}));const y=new Map(e.map((t,e)=>{e=p[e]*f+d;return[t,s?Math.floor(e):e]}));h=Array.from(y.values()).reduce((t,e)=>t+e),c+=(t-(h-h/n*o))*l;let g=s?Math.round(c):c;const v=new Array(n);for(let t=0;t<n;t+=1){v[t]=(m=g,Math.round(1e12*m)/1e12);var m=e[t];g+=y.get(m)}return{valueBandWidth:u,valueStep:y,adjustedRange:v}}class mv extends gv{constructor(t){super(t)}getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:void 0,flex:[]}}clone(){return new mv(this.options)}getStep(t){return void 0===this.valueStep?1:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:t,paddingInner:e}=this.options;return 0<t?t:e}getPaddingOuter(){var{padding:t,paddingOuter:e}=this.options;return 0<t?t:e}rescale(){super.rescale();var{align:t,domain:e,range:n,round:r,flex:i}=this.options,{adjustedRange:t,valueBandWidth:n,valueStep:r}=vv({align:t,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=r,this.valueBandWidth=n,this.adjustedRange=t}}function bv(t,...e){return e.reduce((e,n)=>t=>e(n(t)),t)}function xv(e,n){return n-e?t=>(t-e)/(n-e):t=>.5}function wv(t,e,n,r,i){let o=n||0,a=r||t.length;const s=i||(t=>t);for(;o<a;){var l=Math.floor((o+a)/2);s(t[l])>e?a=l:o=l+1}return o}const kv=Math.sqrt(50),_v=Math.sqrt(10),Sv=Math.sqrt(2);function Ev(t,e,n){e=(e-t)/Math.max(0,n),t=Math.floor(Math.log(e)/Math.LN10),n=e/10**t;return 0<=t?(n>=kv?10:n>=_v?5:n>=Sv?2:1)*10**t:-(10**-t)/(n>=kv?10:n>=_v?5:n>=Sv?2:1)}function Tv(t,e,n){n=Math.abs(e-t)/Math.max(0,n);let r=10**Math.floor(Math.log(n)/Math.LN10);n/=r;return n>=kv?r*=10:n>=_v?r*=5:n>=Sv&&(r*=2),e<t?-r:r}const Mv=(t,e,n=5)=>{const r=[t,e];let i=0,o=r.length-1,a=r[i],s=r[o],l;return s<a&&([a,s]=[s,a],[i,o]=[o,i]),0<(l=Ev(a,s,n))?(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,l=Ev(a,s,n)):l<0&&(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,l=Ev(a,s,n)),0<l?(r[i]=Math.floor(a/l)*l,r[o]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(a*l)/l,r[o]=Math.floor(s*l)/l),r},Ov=36e5,Pv=864e5,Cv=7*Pv;Pv,Pv;function Av(t,n,s,r){const i=(t,e)=>{let n=e;for(;n&&r(t)%e!=0;)s(t,-1),--n;return t},l=(t,e)=>{e&&i(t,e),n(t)};const u=(t,e)=>{t=new Date(+t-1);return l(t,e),s(t,e),l(t),t};return{ceil:u,floor:(t,e)=>{t=new Date(+t);return l(t,e),t},range:(t,e,n,r)=>{const i=[];for(var o=Math.floor(n),a=r?u(t,n):u(t);+a<+e;s(a,o),l(a))i.push(new Date(+a));return i},duration:t}}J=Av(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),l=Av(1e3,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+1e3*e)},t=>t.getSeconds()),c=Av(6e4,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+6e4*e)},t=>t.getMinutes()),a=Av(Ov,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Ov*e)},t=>t.getHours()),st=Av(Pv,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Pv*e)},t=>t.getDate()-1);const Nv=Av(2592e6,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{var n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth());var r=Av(Cv,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Cv*e)},t=>{var e=Nv.floor(t),t=new Date(+t);return Math.floor((+t-+e)/Cv)}),b=Av(31536e6,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{var n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear());const Lv={millisecond:J,second:l,minute:c,hour:a,day:st,week:r,month:Nv,year:b};s=Av(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),u=Av(1e3,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+1e3*e)},t=>t.getUTCSeconds()),ht=Av(6e4,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+6e4*e)},t=>t.getUTCMinutes()),_t=Av(Ov,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Ov*e)},t=>t.getUTCHours()),dt=Av(Pv,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Pv*e)},t=>t.getUTCDate()-1);const Iv=Av(2592e6,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{var n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth());ye=Av(Cv,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Cv*e)},t=>{var e=Iv.floor(t),t=new Date(+t);return Math.floor((+t-+e)/Cv)}),o=Av(31536e6,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{var n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear());const Rv={millisecond:s,second:u,minute:ht,hour:_t,day:dt,week:ye,month:Iv,year:o};function jv(t,e,n,r,i){var t=+t,e=+e,{tickIntervals:i,year:o,millisecond:a}=function(t){var{year:t,month:e,week:n,day:r,hour:i,minute:o,second:a,millisecond:s}=t?Rv:Lv;return{tickIntervals:[[a,1],[a,5],[a,15],[a,30],[o,1],[o,5],[o,15],[o,30],[i,1],[i,3],[i,6],[i,12],[r,1],[r,2],[n,1],[e,1],[e,3],[t,1]],year:t,millisecond:s}}(i),s=([t,e])=>t.duration*e,n=r?(e-t)/r:n||5,l=r||(e-t)/n,u=i.length,c=wv(i,l,0,u,s);let h;return h=c===u?[o,Tv(t/o.duration,e/o.duration,n)]:c?([u,o]=l/s(i[c-1])<s(i[c])/l?i[c-1]:i[c],[u,r?Math.ceil(r/u.duration):o]):[a,Math.max(Tv(t,e,n),1)]}const Dv=(t,e,n,r,i)=>{var o=e<t,a=o?e:t,t=o?t:e;const[s,l]=jv(a,t,n,r,i),u=[s.floor(a,l),s.ceil(t,l)];return o?u.reverse():u};function Bv(t){return!ff(t)&&!pf(t)&&!Number.isNaN(t)}const Fv=e=>t=>-e(-t),zv=(t,e)=>{const n=Math.log(t);t=t===Math.E?Math.log:t=>Math.log(t)/n;return e?Fv(t):t},Vv=(e,t)=>{var n=e===Math.E?Math.exp:t=>e**t;return t?Fv(n):n},Gv=(t,e,n,r)=>{var i=t<0;const o=zv(r,i),a=Vv(r,i);r=e<t,i=r?t:e;const s=[a(Math.floor(o(r?e:t))),a(Math.ceil(o(i)))];return r?s.reverse():s};var Hv,n={exports:{}},$={exports:{}},Wv=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||0<=t.length&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))},Uv=Array.prototype.concat,Yv=Array.prototype.slice,qv=$.exports=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];Wv(i)?e=Uv.call(e,Yv.call(i)):e.push(i)}return e},Xv=(qv.wrap=function(t){return function(){return t(qv(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Zv=$.exports,Kv=Object.hasOwnProperty,$v=Object.create(null);for(Hv in Xv)Kv.call(Xv,Hv)&&($v[Xv[Hv]]=Hv);var Jv=n.exports={to:{},get:{}};function Qv(t,e,n){return Math.min(Math.max(e,t),n)}function tm(t){t=Math.round(t).toString(16).toUpperCase();return t.length<2?"0"+t:t}Jv.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=Jv.get.hsl(t),n="hsl";break;case"hwb":e=Jv.get.hwb(t),n="hwb";break;default:e=Jv.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},Jv.get.rgb=function(t){if(!t)return null;var e,n,r,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var o=2*n;i[n]=parseInt(e.slice(o,2+o),16)}r&&(i[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)i[n]=parseInt(e[n]+e[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else{if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(n=0;n<3;n++)i[n]=parseInt(e[n+1],0);else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:Kv.call(Xv,e[1])?((i=Xv[e[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(e[n+1]))}e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}for(n=0;n<3;n++)i[n]=Qv(i[n],0,255);return i[3]=Qv(i[3],0,1),i},Jv.get.hsl=function(t){if(!t)return null;var e,t=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);return t?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,Qv(parseFloat(t[2]),0,100),Qv(parseFloat(t[3]),0,100),Qv(isNaN(e)?1:e,0,1)]):null},Jv.get.hwb=function(t){if(!t)return null;var e,t=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);return t?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,Qv(parseFloat(t[2]),0,100),Qv(parseFloat(t[3]),0,100),Qv(isNaN(e)?1:e,0,1)]):null},Jv.to.hex=function(){var t=Zv(arguments);return"#"+tm(t[0])+tm(t[1])+tm(t[2])+(t[3]<1?tm(Math.round(255*t[3])):"")},Jv.to.rgb=function(){var t=Zv(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},Jv.to.rgb.percent=function(){var t=Zv(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},Jv.to.hsl=function(){var t=Zv(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},Jv.to.hwb=function(){var t=Zv(arguments),e="";return 4<=t.length&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},Jv.to.keyword=function(t){return $v[t.slice(0,3)]};var em=n.exports;function nm(t,e,n){let r=n;return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function rm(t){t=em.get(t);if(!t)return null;var e,n,{model:t,value:r}=t;return"rgb"===t?r:"hsl"===t?(r=(t=r)[0]/360,e=t[1]/100,n=t[2]/100,t=t[3],0==e?[255*n,255*n,255*n,t]:[255*nm(n=2*n-(e=n<.5?n*(1+e):n+e-n*e),e,r+1/3),255*nm(n,e,r),255*nm(n,e,r-1/3),t]):null}const im=(e,n)=>t=>e*(1-t)+n*t,om=(t,e)=>{{if("number"==typeof t&&"number"==typeof e)return im(t,e);if("string"!=typeof t||"string"!=typeof e)return()=>t;{var n=t,r=e;const l=rm(n),u=rm(r);return null===l||null===u?l?()=>n:()=>r:e=>{const n=new Array(4);for(let t=0;t<4;t+=1){var r=l[t],i=u[t];n[t]=r*(1-e)+i*e}var[t,o,a,s]=n;return`rgba(${Math.round(t)}, ${Math.round(o)}, ${Math.round(a)}, ${s})`}}}},am=(t,e)=>{const n=im(t,e);return t=>Math.round(n(t))};const sm=(t,e,n)=>{let r,i,o=t,a=e;if(o===a&&0<n)return[o];let s=Ev(o,a,n);if(0===s||!Number.isFinite(s))return[];if(0<s){o=Math.ceil(o/s),a=Math.floor(a/s),i=new Array(r=Math.ceil(a-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),i=new Array(r=Math.ceil(a-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)/s}return i};function lm(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}const um=[1,5,2,2.5,4,3],cm=100*Number.EPSILON;const hm=(n,r,t=5,i=!0,o=um,a=[.25,.2,.5,.05])=>{var s,l,u,c,h,d,p,f=t<0?0:Math.round(t);if(Number.isNaN(n)||Number.isNaN(r)||"number"!=typeof n||"number"!=typeof r||!f)return[];if(r-n<1e-15||1===f)return[n];const y={score:-2,lmin:0,lmax:0,lstep:0};let g=1;for(;g<1/0;){for(let t=0;t<o.length;t+=1){var v=o[t],m=(c=v,h=o,d=g,p=void 0,p=Nf(h),1-Pf(h,c)/(p-1)-d+1);if(a[0]*m+a[1]+a[2]+a[3]<y.score){g=1/0;break}let e=2;for(;e<1/0;){x=e;var b=(u=f)<=x?2-(x-1)/(u-1):1;if(a[0]*m+a[1]+a[2]*b+a[3]<y.score)break;var x=(r-n)/(e+1)/g/v;let t=Math.ceil(Math.log10(x));for(;t<1/0;){var w=g*v*10**t,k=(S=r,k=w*(e-1),(S-=n)<k?1-((k-S)/2)**2/(.1*S)**2:1);if(a[0]*m+a[1]*k+a[2]*b+a[3]<y.score)break;var _=Math.floor(r/w)*g-(e-1)*g,S=Math.ceil(n/w)*g;if(_<=S){var E=S-_;for(let t=0;t<=E;t+=1){var T=(_+t)*(w/g),M=T+w*(e-1),O=w,P=function(t,e,n,r,i,o){var a=Nf(e),e=Pf(e,t);let s=0;return t=(r%o+o)%o,1-e/(a-1)-n+(s=(t<cm||o-t<cm)&&r<=0&&0<=i?1:s)}(v,o,g,T,M,O),C=1-.5*((r-M)**2+(n-T)**2)/(.1*(r-n))**2,A=(s=e,A=n,s=(s-1)/(M-(N=T)),l=((l=f)-1)/(Math.max(M,r)-Math.min(A,N)),2-Math.max(s/l,l/s)),N=a[0]*P+a[1]*C+a[2]*A+ +a[3];N>y.score&&(!i||T<=n&&r<=M)&&(y.lmin=T,y.lmax=M,y.lstep=O,y.score=N)}}t+=1}e+=1}}g+=1}var t=lm(y.lmax),e=lm(y.lmin),L=lm(y.lstep),I=Math.floor((t=(t-e)/L,Math.round(1e12*t)/1e12))+1;const R=new Array(I);R[0]=lm(e);for(let t=1;t<I;t+=1)R[t]=lm(R[t-1]+L);return R};class dm extends dv{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:hm}}map(t){return Bv(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new dm(this.options)}getTicks(){const{domain:t,tickCount:e,tickMethod:n}=this.options;var[r,i]=t;return af(r)&&af(i)?n(r,i,e):[]}}const pm=(t,e,n)=>{var[t,r]=t,[e,i]=e;let o,a;return bv(a=t<r?(o=xv(t,r),n(e,i)):(o=xv(r,t),n(i,e)),o)},fm=(r,t,e)=>{const i=Math.min(r.length,t.length)-1,o=new Array(i),a=new Array(i);var n=r[0]>r[i],s=n?[...r].reverse():r,l=n?[...t].reverse():t;for(let t=0;t<i;t+=1)o[t]=xv(s[t],s[t+1]),a[t]=e(l[t],l[t+1]);return t=>{var e=wv(r,t,1,i)-1,n=o[e];return bv(a[e],n)(t)}},ym=(t,e,n,r)=>{const i=2<Math.min(t.length,e.length)?fm:pm;r=r?am:n;return i(t,e,r)};class gm extends dv{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:im,tickCount:5}}map(t){return Bv(t)?this.output(t):this.options.unknown}invert(t){return Bv(t)?this.input(t):this.options.unknown}nice(){var t,e,n,r;this.options.nice&&([t,e,n,...r]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(t,e,n,...r))}getTicks(){const t=this.options["tickMethod"];var[e,n,r,...i]=this.getTickMethodOptions();return t(e,n,r,...i)}getTickMethodOptions(){var{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}chooseNice(){return Mv}rescale(){this.nice();var[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){var{clamp:e,range:n}=this.options,t=this.options.domain.map(t),n=Math.min(t.length,n.length);if(e){e=t[0],t=t[n-1];const r=t<e?t:e,i=t<e?e:t;return t=>Math.min(Math.max(r,t),i)}return Mf}composeOutput(t,e){const{domain:n,range:r,round:i,interpolate:o}=this.options;var a=ym(n.map(t),r,o,i);this.output=bv(a,e,t)}composeInput(t,e,n){const{domain:r,range:i}=this.options;t=ym(i,r.map(t),im);this.input=bv(e,n,t)}}class vm extends gm{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:om,tickMethod:sm,tickCount:5}}chooseTransforms(){return[Mf,Mf]}clone(){return new vm(this.options)}}class mm extends mv{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:void 0,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new mm(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const bm=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class xm extends gm{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:om,tickMethod:sm,tickCount:5}}constructor(t){super(t)}chooseTransforms(){var t=this.options["exponent"];if(1===t)return[Mf,Mf];var e,n,r=.5===t?bm:(e=t,t=>t<0?-((-t)**e):t**e);return n=t,[r,t=>t<0?-((-t)**(1/n)):t**(1/n)]}clone(){return new xm(this.options)}}class wm extends dv{constructor(t){super(t)}getDefaultOptions(){return{domain:[.5],range:[0,1]}}map(t){if(!Bv(t))return this.options.unknown;t=wv(this.thresholds,t,0,this.n);return this.options.range[t]}invert(t){const e=this.options["range"];var t=e.indexOf(t),n=this.thresholds;return[n[t-1],n[t]]}clone(){return new wm(this.options)}rescale(){var{domain:t,range:e}=this.options;this.n=Math.min(t.length,e.length-1),this.thresholds=t}}const km=(t,e,n,r=10)=>{var i=t<0;const o=Vv(r,i),a=zv(r,i);var s=e<t,l=s?e:t,u=s?t:e;let c=a(l),h=a(u),d=[];if(!(r%1)&&h-c<n){if(c=Math.floor(c),h=Math.ceil(h),i)for(;c<=h;c+=1){var p=o(c);for(let t=r-1;1<=t;--t){var f=p*t;if(u<f)break;l<=f&&d.push(f)}}else for(;c<=h;c+=1){var y=o(c);for(let t=1;t<r;t+=1){var g=y*t;if(u<g)break;l<=g&&d.push(g)}}2*d.length<n&&(d=sm(l,u,n))}else d=sm(c,h,Math.min(h-c,n)).map(o);return s?d.reverse():d};class _m extends gm{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:om,tickMethod:km,tickCount:5}}chooseNice(){return Gv}getTickMethodOptions(){var{domain:t,tickCount:e,base:n}=this.options;return[t[0],t[t.length-1],e,n]}chooseTransforms(){var{base:t,domain:e}=this.options,e=e[0]<0;return[zv(t,e),Vv(t,e)]}clone(){return new _m(this.options)}}class Sm extends wm{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:hm}}constructor(t){super(t)}nice(){var t,e,n=this.options["nice"];n&&([n,t,e]=this.getTickMethodOptions(),this.options.domain=Mv(n,t,e))}getTicks(){const t=this.options["tickMethod"];var[e,n,r]=this.getTickMethodOptions();return t(e,n,r)}getTickMethodOptions(){var{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}rescale(){this.nice();var{range:t,domain:e}=this.options,[n,r]=e;this.n=t.length-1,this.thresholds=new Array(this.n);for(let t=0;t<this.n;t+=1)this.thresholds[t]=((t+1)*r-(t-this.n)*n)/(this.n+1)}invert(t){var[t,e]=super.invert(t),[n,r]=this.options.domain;return void 0===t&&void 0===e?[t,e]:[t||n,e||r]}getThresholds(){return this.thresholds}clone(){return new Sm(this.options)}}function Em(t,e,n=!1){const r=t,i=(n||r.sort((t,e)=>t-e),[]);for(let t=1;t<e;t+=1)i.push(function(t,e){if(n=t.length){if(n<2)return t[n-1];var n=(n-1)*e,e=Math.floor(n),r=t[e];return r+(t[e+1]-r)*(n-e)}}(r,t/e));return i}class Tm extends wm{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:hm}}constructor(t){super(t)}rescale(){var{domain:t,range:e}=this.options;this.n=e.length-1,this.thresholds=Em(t,this.n+1,!1)}invert(t){var[t,e]=super.invert(t),n=this.options["domain"],r=n[0],n=n[n.length-1];return void 0===t&&void 0===e?[t,e]:[t||r,e||n]}getThresholds(){return this.thresholds}clone(){return new Tm(this.options)}getTicks(){const{tickCount:t,domain:e,tickMethod:n}=this.options;var r=e.length-1,i=e[0],r=e[r];return n(i,r,t)}}var Mm=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Om=/\[([^]*?)\]/gm;function Pm(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function Cm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o,a=i[r];for(o in a)t[o]=a[o]}return t}function Am(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t}var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],X=["January","February","March","April","May","June","July","August","September","October","November","December"],it=Pm(X,3),Nm=Cm({},{dayNamesShort:Pm(h,3),dayNames:h,monthNamesShort:it,monthNames:X,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][3<t%10?0:(t-t%10!=10?1:0)*t%10]}}),Lm={D:function(t){return String(t.getDate())},DD:function(t){return Am(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Am(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Am(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Am(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Am(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Am(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Am(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Am(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Am(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Am(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Am(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return(t.getHours()<12?e.amPm[0]:e.amPm[1]).toUpperCase()},ZZ:function(t){t=t.getTimezoneOffset();return(0<t?"-":"+")+Am(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(t){t=t.getTimezoneOffset();return(0<t?"-":"+")+Am(Math.floor(Math.abs(t)/60),2)+":"+Am(Math.abs(t)%60,2)}},Im={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};const Rm=(t,e,n,r,i)=>{var o=e<t,a=o?e:t,t=o?t:e;const[s,l]=jv(a,t,n,r,i),u=s.range(a,new Date(+t+1),l,!0);return o?u.reverse():u};function jm(t){var e=t.getTimezoneOffset();const n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}class Dm extends gm{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:Rm,interpolate:im,mask:void 0,utc:!1}}chooseTransforms(){return[t=>+t,t=>new Date(t)]}chooseNice(){return Dv}getTickMethodOptions(){var{domain:t,tickCount:e,tickInterval:n,utc:r}=this.options;return[t[0],t[t.length-1],e,n,r]}getFormatter(){const{mask:o,utc:t}=this.options,a=t?Rv:Lv,s=t?jm:Mf;return t=>{var e=s(t),t=o||function(t,e){const{second:n,minute:r,hour:i,day:o,week:a,month:s,year:l}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":o.floor(t)<t?"hh A":s.floor(t)<t?a.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}(t,a),n=void 0;if(void 0===t&&(t=Im.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[],i=(t=(t=Im[t]||t).replace(Om,function(t,e){return r.push(e),"@@@"}),Cm(Cm({},Nm),n));return(t=t.replace(Mm,function(t){return Lm[t](e,i)})).replace(/@@@/g,function(){return r.shift()})}}clone(){return new Dm(this.options)}}const Bm=t=>new mv(t),Fm=(Bm.props={},t=>new vm(t)),zm=(Fm.props={},t=>new gv(t)),Vm=(zm.props={},t=>new dm(t)),Gm=(Vm.props={},t=>new mm(t)),Hm=(Gm.props={},t=>new Dm(t)),Wm=(Hm.props={},t=>new _m(t)),Um=(Wm.props={},t=>new xm(t)),Ym=(Um.props={},t=>new wm(t)),qm=(Ym.props={},t=>new Tm(t)),Xm=(qm.props={},t=>new Sm(t)),Zm=(Xm.props={},Math.PI),Km=2*Zm,$m=1e-6,Jm=Km-$m;function Qm(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t1(){return new Qm}function e1(t){return function(){return t}}Qm.prototype=t1.prototype={constructor:Qm,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){var o,a,s=this._x1,l=this._y1,u=(n=+n)-(t=+t),c=(r=+r)-(e=+e),h=s-t,d=l-e,p=h*h+d*d;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):p>$m&&(Math.abs(d*u-c*h)>$m&&i?(a=u*u+c*c,r=(n=n-s)*n+(s=r-l)*s,l=Math.sqrt(a),o=Math.sqrt(p),p=(a=i*Math.tan((Zm-Math.acos((a+p-r)/(2*l*o)))/2))/o,r=a/l,Math.abs(p-1)>$m&&(this._+="L"+(t+p*h)+","+(e+p*d)),this._+="A"+i+","+i+",0,0,"+ +(h*s<d*n)+","+(this._x1=t+r*u)+","+(this._y1=e+r*c)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,u=e+s,c=1^o,o=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>$m||Math.abs(this._y1-u)>$m)&&(this._+="L"+l+","+u),n&&((o=o<0?o%Km+Km:o)>Jm?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):o>$m&&(this._+="A"+n+","+n+",0,"+ +(o>=Zm)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const n1=Math.abs,r1=Math.atan2,i1=Math.cos,o1=Math.max,a1=Math.min,s1=Math.sin,l1=Math.sqrt,u1=1e-12,c1=Math.PI,h1=c1/2,d1=2*c1;function p1(t){return 1<=t?h1:t<=-1?-h1:Math.asin(t)}function f1(t){return t.innerRadius}function y1(t){return t.outerRadius}function g1(t){return t.startAngle}function v1(t){return t.endAngle}function m1(t){return t&&t.padAngle}function b1(t,e,n,r,i,o,a){var s=t-n,l=e-r,a=(a?o:-o)/l1(s*s+l*l),l=a*l,a=-a*s,s=t+l,t=e+a,e=n+l,n=r+a,r=(s+e)/2,u=(t+n)/2,c=e-s,h=n-t,d=c*c+h*h,o=i-o,s=s*n-e*t,n=(h<0?-1:1)*l1(o1(0,o*o*d-s*s)),e=(s*h-c*n)/d,t=(-s*c-h*n)/d,p=(s*h+c*n)/d,s=(-s*c+h*n)/d,c=e-r,h=t-u,n=p-r,d=s-u;return n*n+d*d<c*c+h*h&&(e=p,t=s),{cx:e,cy:t,x01:-l,y01:-a,x11:e*(i/o-1),y11:t*(i/o-1)}}function x1(){var O=f1,P=y1,C=e1(0),A=null,N=g1,L=v1,I=m1,R=null;function e(){var t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,y,g,v,m,b,x,w,k=+O.apply(this,arguments),_=+P.apply(this,arguments),S=N.apply(this,arguments)-h1,E=L.apply(this,arguments)-h1,T=n1(E-S),M=S<E;if(R=R||(t=t1()),_<k&&(e=_,_=k,k=e),_>u1?T>d1-u1?(R.moveTo(_*i1(S),_*s1(S)),R.arc(0,0,_,S,E,!M),k>u1&&(R.moveTo(k*i1(E),k*s1(E)),R.arc(0,0,k,E,S,M))):(r=e=S,i=n=E,a=o=T,d=(c=I.apply(this,arguments)/2)>u1&&(A?+A.apply(this,arguments):l1(k*k+_*_)),w=x=s=a1(n1(_-k)/2,+C.apply(this,arguments)),d>u1&&(h=p1(d/k*s1(c)),d=p1(d/_*s1(c)),(o-=2*h)>u1?(r+=h*=M?1:-1,i-=h):(o=0,r=i=(S+E)/2),(a-=2*d)>u1?(e+=d*=M?1:-1,n-=d):(a=0,e=n=(S+E)/2)),c=_*i1(e),h=_*s1(e),d=k*i1(i),S=k*s1(i),s>u1&&(p=_*i1(n),f=_*s1(n),y=k*i1(r),g=k*s1(r),T<c1&&(E=function(t,e,n,r,i,o,a,s){var l=(s=s-o)*(n=n-t)-(a=a-i)*(r=r-e);if(!(l*l<u1))return[t+(l=(a*(e-o)-s*(t-i))/l)*n,e+l*r]}(c,h,y,g,p,f,d,S))&&(T=c-E[0],m=h-E[1],b=p-E[0],v=f-E[1],m=1/s1((1<(T=(T*b+m*v)/(l1(T*T+m*m)*l1(b*b+v*v)))?0:T<-1?c1:Math.acos(T))/2),b=l1(E[0]*E[0]+E[1]*E[1]),x=a1(s,(k-b)/(m-1)),w=a1(s,(_-b)/(1+m)))),a>u1?w>u1?(l=b1(y,g,c,h,_,w,M),u=b1(p,f,d,S,_,w,M),R.moveTo(l.cx+l.x01,l.cy+l.y01),w<s?R.arc(l.cx,l.cy,w,r1(l.y01,l.x01),r1(u.y01,u.x01),!M):(R.arc(l.cx,l.cy,w,r1(l.y01,l.x01),r1(l.y11,l.x11),!M),R.arc(0,0,_,r1(l.cy+l.y11,l.cx+l.x11),r1(u.cy+u.y11,u.cx+u.x11),!M),R.arc(u.cx,u.cy,w,r1(u.y11,u.x11),r1(u.y01,u.x01),!M))):(R.moveTo(c,h),R.arc(0,0,_,e,n,!M)):R.moveTo(c,h),k>u1&&o>u1?x>u1?(l=b1(d,S,p,f,k,-x,M),u=b1(c,h,y,g,k,-x,M),R.lineTo(l.cx+l.x01,l.cy+l.y01),x<s?R.arc(l.cx,l.cy,x,r1(l.y01,l.x01),r1(u.y01,u.x01),!M):(R.arc(l.cx,l.cy,x,r1(l.y01,l.x01),r1(l.y11,l.x11),!M),R.arc(0,0,k,r1(l.cy+l.y11,l.cx+l.x11),r1(u.cy+u.y11,u.cx+u.x11),M),R.arc(u.cx,u.cy,x,r1(u.y11,u.x11),r1(u.y01,u.x01),!M))):R.arc(0,0,k,i,r,M):R.lineTo(d,S)):R.moveTo(0,0),R.closePath(),t)return R=null,t+""||null}return e.centroid=function(){var t=(+O.apply(this,arguments)+ +P.apply(this,arguments))/2,e=(+N.apply(this,arguments)+ +L.apply(this,arguments))/2-c1/2;return[i1(e)*t,s1(e)*t]},e.innerRadius=function(t){return arguments.length?(O="function"==typeof t?t:e1(+t),e):O},e.outerRadius=function(t){return arguments.length?(P="function"==typeof t?t:e1(+t),e):P},e.cornerRadius=function(t){return arguments.length?(C="function"==typeof t?t:e1(+t),e):C},e.padRadius=function(t){return arguments.length?(A=null==t?null:"function"==typeof t?t:e1(+t),e):A},e.startAngle=function(t){return arguments.length?(N="function"==typeof t?t:e1(+t),e):N},e.endAngle=function(t){return arguments.length?(L="function"==typeof t?t:e1(+t),e):L},e.padAngle=function(t){return arguments.length?(I="function"==typeof t?t:e1(+t),e):I},e.context=function(t){return arguments.length?(R=null==t?null:t,e):R},e}function w1(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function k1(t){this._context=t}function _1(t){return new k1(t)}function S1(t){return t[0]}function E1(t){return t[1]}function T1(a,s){var l=e1(!0),u=null,c=_1,h=null;function e(t){var e,n,r,i=(t=w1(t)).length,o=!1;for(null==u&&(h=c(r=t1())),e=0;e<=i;++e)!(e<i&&l(n=t[e],e,t))===o&&((o=!o)?h.lineStart():h.lineEnd()),o&&h.point(+a(n,e,t),+s(n,e,t));if(r)return h=null,r+""||null}return a="function"==typeof a?a:void 0===a?S1:e1(a),s="function"==typeof s?s:void 0===s?E1:e1(s),e.x=function(t){return arguments.length?(a="function"==typeof t?t:e1(+t),e):a},e.y=function(t){return arguments.length?(s="function"==typeof t?t:e1(+t),e):s},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:e1(!!t),e):l},e.curve=function(t){return arguments.length?(c=t,null!=u&&(h=c(u)),e):c},e.context=function(t){return arguments.length?(null==t?u=h=null:h=c(u=t),e):u},e}function M1(c,h,d){var p=null,f=e1(!0),y=null,g=_1,v=null;function e(t){var e,n,r,i,o,a=(t=w1(t)).length,s=!1,l=new Array(a),u=new Array(a);for(null==y&&(v=g(o=t1())),e=0;e<=a;++e){if(!(e<a&&f(i=t[e],e,t))===s)if(s=!s)n=e,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),r=e-1;n<=r;--r)v.point(l[r],u[r]);v.lineEnd(),v.areaEnd()}s&&(l[e]=+c(i,e,t),u[e]=+h(i,e,t),v.point(p?+p(i,e,t):l[e],d?+d(i,e,t):u[e]))}if(o)return v=null,o+""||null}function t(){return T1().defined(f).curve(g).context(y)}return c="function"==typeof c?c:void 0===c?S1:e1(+c),h="function"==typeof h?h:e1(void 0===h?0:+h),d="function"==typeof d?d:void 0===d?E1:e1(+d),e.x=function(t){return arguments.length?(c="function"==typeof t?t:e1(+t),p=null,e):c},e.x0=function(t){return arguments.length?(c="function"==typeof t?t:e1(+t),e):c},e.x1=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:e1(+t),e):p},e.y=function(t){return arguments.length?(h="function"==typeof t?t:e1(+t),d=null,e):h},e.y0=function(t){return arguments.length?(h="function"==typeof t?t:e1(+t),e):h},e.y1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:e1(+t),e):d},e.lineX0=e.lineY0=function(){return t().x(c).y(h)},e.lineY1=function(){return t().x(c).y(d)},e.lineX1=function(){return t().x(p).y(h)},e.defined=function(t){return arguments.length?(f="function"==typeof t?t:e1(!!t),e):f},e.curve=function(t){return arguments.length?(g=t,null!=y&&(v=g(y)),e):g},e.context=function(t){return arguments.length?(null==t?y=v=null:v=g(y=t),e):y},e}k1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var O1=C1(_1);function P1(t){this._curve=t}function C1(e){function t(t){return new P1(e(t))}return t._curve=e,t}function A1(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(C1(t)):e()._curve},t}function N1(){}function L1(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function I1(t,e){this._context=t,this._k=(1-e)/6}function R1(t,e){this._context=t,this._k=(1-e)/6}function j1(t,e,n){var r,i,o=t._x1,a=t._y1,s=t._x2,l=t._y2;t._l01_a>u1&&(r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),o=(o*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,a=(a*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>u1&&(r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,i=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*r+t._x1*t._l23_2a-e*t._l12_2a)/i,l=(l*r+t._y1*t._l23_2a-n*t._l12_2a)/i),t._context.bezierCurveTo(o,a,s,l,t._x2,t._y2)}function D1(t,e){this._context=t,this._alpha=e}P1.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}},I1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:L1(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:L1(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function e(n){function t(t){return new I1(t,n)}return t.tension=function(t){return e(+t)},t}(0),R1.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:L1(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function e(n){function t(t){return new R1(t,n)}return t.tension=function(t){return e(+t)},t}(0),D1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:j1(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var B1=function e(n){function t(t){return n?new D1(t,n):new I1(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function F1(t,e){this._context=t,this._alpha=e}F1.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:j1(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var z1=function e(n){function t(t){return n?new F1(t,n):new R1(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function V1(t){this._context=t}function G1(t){return new V1(t)}function H1(t,e){this._context=t,this._t=e}function W1(t){return new H1(t,.5)}function U1(t){return new H1(t,0)}function Y1(t){return new H1(t,1)}function q1([t,e],[n,r]){return[t-n,e-r]}function X1([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function Z1([t,e]){return Math.atan2(e,t)+Math.PI/2}function K1(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(var[o,a]of t)e=Math.min(o,e),n=Math.max(o,n),r=Math.min(a,r),i=Math.max(a,i);var t=n-e,s=i-r;return[e,r,t,s]}function $1(t){return t}function J1(t){return t.reduce((n,r)=>e=>F(this,void 0,void 0,function*(){var t=yield n(e);return r(t)}),$1)}function Q1(t=""){throw new Error(t)}function tb(t,e){var n,r,e=e["attributes"];const i=new Set(["id","className"]);for([n,r]of Object.entries(e))i.has(n)||t.attr(n,r)}function eb(t){return null!=t&&!Number.isNaN(t)}function nb(t,e){return t+(e-t)*Math.random()}function rb(t){return new ib([t],null,t,t.ownerDocument)}V1.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},H1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};class ib{constructor(t=null,e=null,n=null,r=null,i=[null,null,null,null,null],o=[],a=[]){this._elements=Array.from(t),this._data=e,this._parent=n,this._document=r,this._enter=i[0],this._update=i[1],this._exit=i[2],this._merge=i[3],this._split=i[4],this._transitions=o,this._facetElements=a}selectAll(t){t="string"==typeof t?this._parent.querySelectorAll(t):t;return new ib(t,null,this._elements[0],this._document)}selectFacetAll(t){t="string"==typeof t?this._parent.querySelectorAll(t):t;return new ib(this._elements,null,this._parent,this._document,void 0,void 0,t)}select(t){t="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new ib([t],null,t,this._document)}append(t){const e=t=>{if(this._document)return this._document.createElement(t,{});const e=ib.registry[t];return e?new e:Q1("Unknown node type: "+t)},n="function"==typeof t?t:()=>e(t),r=[];if(null!==this._data){for(let t=0;t<this._data.length;t++){var i=this._data[t],[i,o]=Array.isArray(i)?i:[i,null];const s=n(i,t);s.__data__=i,null!==o&&(s.__fromElements__=o),this._parent.appendChild(s),r.push(s)}return new ib(r,null,this._parent,this._document)}for(let t=0;t<this._elements.length;t++){const l=this._elements[t];var a=l.__data__,a=n(a,t);l.appendChild(a),r.push(a)}return new ib(r,null,r[0],this._document)}data(e,n=t=>t,r=()=>null){const i=[],o=[],a=new Set(this._elements),s=[],l=new Set,u=new Map(this._elements.map((t,e)=>[n(t.__data__,e),t])),c=new Map(this._facetElements.map((t,e)=>[n(t.__data__,e),t])),h=Tg(this._elements,t=>r(t.__data__));for(let t=0;t<e.length;t++){var d=e[t],p=n(d,t),f=r(d,t);if(u.has(p)){const y=u.get(p);y.__data__=d,y.__facet__=!1,o.push(y),a.delete(y),u.delete(p)}else if(c.has(p)){const g=c.get(p);g.__data__=d,g.__facet__=!0,o.push(g),c.delete(p)}else if(h.has(p)){const Tg=h.get(p);s.push([d,Tg]);for(const v of Tg)a.delete(v);h.delete(p)}else if(u.has(f)){const m=u.get(f);m.__toData__?m.__toData__.push(d):m.__toData__=[d],l.add(m),a.delete(m)}else i.push(d)}var t=[new ib([],i,this._parent,this._document),new ib(o,null,this._parent,this._document),new ib(a,null,this._parent,this._document),new ib([],s,this._parent,this._document),new ib(l,null,this._parent,this._document)];return new ib(this._elements,null,this._parent,this._document,t)}merge(t){var e=[...this._elements,...t._elements],t=[...this._transitions,...t._transitions];return new ib(e,null,this._parent,this._document,void 0,t)}join(t=t=>t,e=t=>t,n=t=>t.remove(),r=t=>t,i=t=>t.remove()){t=t(this._enter);const o=e(this._update);e=n(this._exit),n=r(this._merge),r=i(this._split);return o.merge(t).merge(e).merge(n).merge(r)}remove(){for(let t=0;t<this._elements.length;t++){const e=this._elements[t],n=this._transitions[t];n?n.then(()=>e.remove()):e.remove()}return new ib([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let t=0;t<this._elements.length;t++){var n=this._elements[t],r=n.__data__;e.call(n,r,t)}return this}attr(n,r){const i="function"!=typeof r?()=>r:r;return this.each(function(t,e){void 0!==r&&(this[n]=i.call(this,t,e))})}style(n,r){const i="function"!=typeof r?()=>r:r;return this.each(function(t,e){void 0!==r&&(this.style[n]=i.call(this,t,e))})}transition(t){const n="function"!=typeof t?()=>t:t,r=this["_transitions"];return this.each(function(t,e){r[e]=n.call(this,t,e)})}on(t,e){return this.each(function(){this.addEventListener(t,e)}),this}call(t,...e){return t.call(this._parent,this,...e),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}function ob(t,e){for(var[n,r]of Object.entries(e))t.style(n,r)}function ab(n,t){return t.forEach((t,e)=>0===e?n.moveTo(t[0],t[1]):n.lineTo(t[0],t[1])),n.closePath(),n}function sb(t,e,n){var n=Object.assign({size:8},n)["size"],n="string"==typeof n?+parseFloat(n)/100*X1(t,e):n,r=Math.PI/6,t=Math.atan2(e[1]-t[1],e[0]-t[0]),i=Math.PI/2-t-r,t=t-r;return[[e[0]-n*Math.sin(i),e[1]-n*Math.cos(i)],[e[0]-n*Math.cos(t),e[1]-n*Math.sin(t)]]}function lb(t,e,n,r,i){e=Z1(q1(r,e))+Math.PI/2,n=Z1(q1(r,n))+Math.PI/2;t.arc(r[0],r[1],i,e,n,n-e<0)}function ub(t,n){const r=new vm({domain:[n[0],n[n.length-1]],range:[0,100]});return`linear-gradient(${t.map((t,e)=>`${t} ${r.map(n[e])}%`).join(",")})`}ib.registry={g:Wh,rect:nd,circle:zh,path:Kh,text:id,ellipse:Gh,image:Yh,line:Xh,polygon:Jh,polyline:td,html:ad};const cb=t=>{const c=t["colorAttribute"],h=I(t,["colorAttribute"]),d="stroke"===c?1:0;return(t,e,n,r)=>{var{radius:i=0}=h,r=r["defaultColor"],{color:r=r}=e,[o,a,,s]=Bg(n)?function(t){var[t,e,n,r]=t;return[r,t,e,n]}(t):t;if(!Fg(n))return rb(new Kh).style("lineWidth",d).style("d",ab(t1(),t).toString()).style("stroke",r).style(c,r).call(ob,h).node();var{y:t,y1:e}=e,n=n.getCenter(),l=Z1(q1(o,n)),a=Z1(q1(a,n)),t=a===l&&t!==e?a+2*Math.PI:a,e={startAngle:l,endAngle:0<=t-l?t:2*Math.PI+t,innerRadius:X1(s,n),outerRadius:X1(o,n)};const u=x1().cornerRadius(i);return rb(new Kh({})).style("path",u(e)).style("transform",`translate(${n[0]}, ${n[1]})`).style("stroke",r).style(c,r).call(ob,h).node()}},hb=(cb.props={defaultEnterAnimation:"scaleInY"},t=>cb(Object.assign({colorAttribute:"fill"},t))),db=(hb.props=Object.assign({},cb.props),t=>cb(Object.assign({colorAttribute:"stroke"},t)));db.props=Object.assign({},cb.props);const pb=t=>{const{adjustPoints:s=function(t,e,n){var[t,r,i,o]=t;if(Bg(n)){const a=[(e?e[0]:r)[0],r[1]],s=[(e?e[3]:i)[0],i[1]];return[t,a,s,o]}const a=[r[0],(e?e[0]:r)[1]],s=[i[0],(e?e[3]:i)[1]];return[t,a,s,o]}}=t,l=I(t,["adjustPoints"]);return(t,e,n,r,i,...o)=>{var a=e["index"],a=i[a+1],t=s(t,a,n);return cb(Object.assign({colorAttribute:"fill"},l))(t,e,n,r,i,...o)}};function fb(t,e,n){var[t,r,i,o]=t;if(Bg(n)){const a=[e?e[0][0]:(r[0]+i[0])/2,r[1]],s=[e?e[3][0]:(r[0]+i[0])/2,i[1]];return[t,a,s,o]}const a=[r[0],e?e[0][1]:(r[1]+i[1])/2],s=[i[0],e?e[3][1]:(r[1]+i[1])/2];return[t,a,s,o]}pb.props={defaultEnterAnimation:"fadeIn"};const yb=t=>pb(Object.assign({adjustPoints:fb},t)),gb=(yb.props={defaultEnterAnimation:"fadeIn"},t=>{const{curve:l,gradient:u=!1}=t,c=I(t,["curve","gradient"]);return(t,e,n,r)=>{var{defaultColor:r,defaultSize:i}=r,{color:e=r,size:r=i,transform:i,seriesColor:o,seriesX:a}=e,n=Fg(n)?[...t,t[0]]:t;const s=T1().x(t=>t[0]).y(t=>t[1]).curve(l);t=u&&o?ub(o,a):e;return rb(new Kh({})).style("d",s(n)).style("stroke",t).style("lineWidth",r).style("transform",i).call(ob,c).node()}}),vb=(gb.props={defaultEnterAnimation:"fadeIn"},t=>gb(Object.assign({curve:_1},t))),mb=(vb.props=Object.assign({},gb.props),t=>{var{alpha:e=.5}=t,t=I(t,["alpha"]);return gb(Object.assign({curve:B1.alpha(e)},t))}),bb=(mb.props=Object.assign({},gb.props),t=>gb(Object.assign({curve:Y1},t))),xb=(bb.props=Object.assign({},gb.props),t=>gb(Object.assign({curve:U1},t))),wb=(xb.props=Object.assign({},gb.props),t=>gb(Object.assign({curve:W1},t)));function kb(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]}wb.props=Object.assign({},gb.props);var _b=Object.freeze({__proto__:null,point:kb,square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},line:function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}});function Sb(t,e,n,r){var i,n=n["size"];return"fixed"!==t&&("normal"===t||function(t){const e=t.getOptions()["transformations"];return e.some(([t])=>"fisheye"===t)}(r))?([[t,r],[e,i]]=e,e=Math.abs((e-t)/2),t=Math.abs((i-r)/2),Math.max(0,(e+t)/2)):n}const x=t=>{const{colorAttribute:s,symbol:e,mode:l="auto"}=t,u=I(t,["colorAttribute","symbol","mode"]),c="stroke"===s?1:0,h=_b[e]||kb;return(t,e,n,r)=>{var r=r["defaultColor"],{color:r=r,transform:i}=e,[o,a]=function(t){var[[t,e],[n,r]]=t;return[(t+n)/2,(e+r)/2]}(t),t=Sb(l,t,e,n);return rb(new Kh).style("d",h(o,a,t)).style("lineWidth",c).style("stroke",r).style("transform",i).style(s,r).call(ob,u).node()}},Eb=(x.props={defaultEnterAnimation:"fadeIn"},t=>x(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t))),Tb=(Eb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"cross"},t))),Mb=(Tb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"diamond"},t))),Ob=(Mb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t))),Pb=(Ob.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t))),Cb=(Pb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t))),Ab=(Cb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t))),Nb=(Ab.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"point"},t))),Lb=(Nb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"square"},t))),Ib=(Lb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t))),Rb=(Ib.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t))),jb=(Rb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t))),Db=(jb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"line"},t))),Bb=(Db.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"plus"},t))),Fb=(Bb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"point"},t))),zb=(Fb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"square"},t))),Vb=(zb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"stroke",symbol:"tick"},t))),Gb=(Vb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"triangle"},t))),Hb=(Gb.props=Object.assign({},x.props),t=>x(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t))),Wb=(Hb.props=Object.assign({},x.props),t=>{const l=t["arrow"],u=I(t,["arrow"]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e,[t,i]=t,[o,a]=sb(t,i,l);const s=t1();return s.moveTo(...t),s.lineTo(...i),s.moveTo(...i),s.lineTo(...o),s.moveTo(...i),s.lineTo(...a),rb(new Kh).style("d",s.toString()).style("stroke",e).style("fill",e).style("transform",r).call(ob,u).node()}}),Ub=(Wb.props={defaultEnterAnimation:"fadeIn"},t=>{const l=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,text:r="",fontSize:i=14,rotate:o=0,transform:a=""}=e,[[t,s]]=t;return rb(new id).style("x",t).style("y",s).style("text",String(r)).style("stroke",e).style("fill",e).style("fontSize",i).style("transform",a+`rotate(${+o}deg)`).style("lineWidth",0).call(ob,l).node()}});Ub.props={defaultEnterAnimation:"fadeIn"};function Yb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Xb(t,e[r]);return t}var qb,Xb=function(r,i,o,a){void 0===o&&(o=0),void 0===a&&(a=5),Object.entries(i).forEach(function(t){var t=D(t,2),e=t[0],t=t[1],n=r;Object.prototype.hasOwnProperty.call(i,e)&&(t?tf(t)?(tf(r[e])||(n[e]={}),o<a?Xb(r[e],t,o+1,a):n[e]=i[e]):Xp(t)?(n[e]=[],n[e]=n[e].concat(t)):n[e]=t:n[e]=t)})};function Zb(){return null!==qb&&qb.apply(this,arguments)||this}function Kb(e,n){return i(t,r=Bh),t.prototype.connectedCallback=function(){var t,e;null!=(t=(e=this.descriptor).render)&&t.call(e,this.attributes,this),null!=(e=(t=this.descriptor).bindEvents)&&e.call(t,this.attributes,this)},t.prototype.update=function(t){var e;this.attr(A({},this.attributes,t=void 0===t?{}:t)),null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)},t;function t(t){t=r.call(this,Yb({},{style:n},t))||this;return t.descriptor=e,t}var r}i(Zb,qb=Bh);i(Qb,$b=Bh),Qb.prototype.connectedCallback=function(){var t=this.style,e=t.x,t=t.y;this.setLocalPosition([e||0,t||0]),this.update(),this.bindEvents(this.attributes,this)},Qb.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),null!=(t=this.render)&&t.call(this,this.attributes,this)},Qb.prototype.clear=function(){this.removeChildren(!0)},Qb.prototype.destroy=function(){this.removeAllEventListeners(),this.removeChildren(!0),this.remove()},Qb.prototype.bindEvents=function(t,e){};var $b,Jb,V=Qb;function Qb(t){return $b.call(this,t)||this}function tx(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,tx)}function ex(){this.constructor=Jb}Jb=tx,H=Error,ex.prototype=H.prototype,Jb.prototype=new ex,tx.buildMessage=function(t,e){var o={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){for(var e="",n=0;n<t.parts.length;n++)e+=t.parts[n]instanceof Array?i(t.parts[n][0])+"-"+i(t.parts[n][1]):i(t.parts[n]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){for(var e,n,r=new Array(t.length),i=0;i<t.length;i++)r[i]=(n=t[i],o[n.type](n));if(r.sort(),0<r.length){for(e=i=1;i<r.length;i++)r[i-1]!==r[i]&&(r[e]=r[i],e++);r.length=e}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+((t=e)?'"'+r(t)+'"':"end of input")+" found."};var nx,G=function(s,t){function j(){return R("Z")}function D(t,e){return R(t,e.map(function(t){return{x:t}}))}function B(t,e){return R(t,e.map(function(t){return{y:t}}))}function F(t,e,n){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y,x:n.x,y:n.y}}function z(t,e){return{x2:t.x,y2:t.y,x:e.x,y:e.y}}function V(t,e){return{x1:t.x,y1:t.y,x:e.x,y:e.y}}function G(t,e,n,r,i,o){return{rx:t,ry:e,xAxisRotation:n,largeArc:r,sweep:i,x:o.x,y:o.y}}var l={},e={svg_path:Tt},n=Tt,H=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e=e.concat.apply(e,t[n]);var r=e[0];return r&&"m"==r.code&&(delete r.relative,r.code="M"),e},a=function(t,e){var n=e;if(!n)return[t];for(var r=[t],i=0,o=n.length;i<o;i++)r[i+1]=n[i][1];return r},W=/^[Mm]/,U=m(["M","m"],!1,!1),Y=function(t,e,n){e=R(t,[e]);return e=n?e.concat(R("M"==t?"L":"l",n[1])):e},q=/^[Zz]/,X=m(["Z","z"],!1,!1),Z=/^[Ll]/,K=m(["L","l"],!1,!1),i=R,$=/^[Hh]/,J=m(["H","h"],!1,!1),Q=/^[Vv]/,tt=m(["V","v"],!1,!1),et=/^[Cc]/,nt=m(["C","c"],!1,!1),rt=/^[Ss]/,it=m(["S","s"],!1,!1),ot=/^[Qq]/,at=m(["Q","q"],!1,!1),st=/^[Tt]/,lt=m(["T","t"],!1,!1),ut=/^[Aa]/,ct=m(["A","a"],!1,!1),ht=function(t,e){return{x:t,y:e}},dt=function(t){return+t},pt=function(t){return+t.join("")},ft=/^[01]/,yt=m(["0","1"],!1,!1),gt=function(t){return"1"==t},o=function(){return""},vt=",",mt=v(",",!1),u=function(t){return t.join("")},c=".",h=v(".",!1),bt=/^[eE]/,xt=m(["e","E"],!1,!1),wt=/^[+\-]/,kt=m(["+","-"],!1,!1),r=/^[0-9]/,d=m([["0","9"]],!1,!1),_t=function(t){return t.join("")},St=/^[ \t\n\r]/,Et=m([" ","\t","\n","\r"],!1,!1),p=0,f=[{line:1,column:1}],y=0,g=[];if("startRule"in(t=void 0!==t?t:{})){if(!(t.startRule in e))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=e[t.startRule]}function v(t,e){return{type:"literal",text:t,ignoreCase:e}}function m(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function b(t){var e,n=f[t];if(n)return n;for(e=t-1;!f[e];)e--;for(n={line:(n=f[e]).line,column:n.column};e<t;)10===s.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return f[t]=n}function x(t,e){var n=b(t),r=b(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function w(t){p<y||(y<p&&(y=p,g=[]),g.push(t))}function Tt(){for(var t,e,n=p,r=[],i=N();i!==l;)r.push(i),i=N();if(r!==l)if((i=(i=function(){var t,e,n,r,i,o;if(t=p,(e=k())!==l){for(n=[],r=p,i=[],o=N();o!==l;)i.push(o),o=N();for(r=i!==l?(o=k())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;){for(n.push(r),r=p,i=[],o=N();o!==l;)i.push(o),o=N();r=i!==l?(o=k())!==l?i=[i,o]:(p=r,l):(p=r,l)}t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())===l?null:i)!==l){for(t=[],e=N();e!==l;)t.push(e),e=N();n=t!==l?r=H(i):(p=n,l)}else p=n,n=l;else p=n,n=l;return n}function k(){var t,e,n,r,i=p,o=function(){var t,e,n,r,i,o,a;t=p,W.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(U));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=M())!==l?(i=p,o=P(),(i=(i=(o=o===l?null:o)!==l?(a=Ot())!==l?o=[o,a]:(p=i,l):(p=i,l))===l?null:i)!==l?e=Y(e,r,i):(p=t,l)):(p=t,l):(p=t,l)}else p=t,t=l;return t}();if(o!==l){for(t=[],e=p,n=[],r=N();r!==l;)n.push(r),r=N();for(e=n!==l&&(r=Mt())!==l?n=[n,r]:(p=e,l);e!==l;){for(t.push(e),e=p,n=[],r=N();r!==l;)n.push(r),r=N();e=n!==l&&(r=Mt())!==l?n=[n,r]:(p=e,l)}i=t!==l?a(o,t):(p=i,l)}else p=i,i=l;return i}function Mt(){var t=function(){var t;q.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(X));t!==l&&(t=j());return t}();return t=t===l&&(t=function(){var t,e,n,r;t=p,Z.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(K));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=Ot())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,$.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(J));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=Pt())!==l?e=D(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,Q.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(tt));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=Pt())!==l?e=B(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,et.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(nt));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=function(){var t,e,n,r,i,o;if(t=p,(e=_())!==l){for(n=[],r=p,i=P(),r=(i=i===l?null:i)!==l?(o=_())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;)n.push(r),r=p,i=P(),r=(i=i===l?null:i)!==l?(o=_())!==l?i=[i,o]:(p=r,l):(p=r,l);t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,rt.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(it));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=function(){var t,e,n,r,i,o;if(t=p,(e=S())!==l){for(n=[],r=p,i=P(),r=(i=i===l?null:i)!==l?(o=S())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;)n.push(r),r=p,i=P(),r=(i=i===l?null:i)!==l?(o=S())!==l?i=[i,o]:(p=r,l):(p=r,l);t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,ot.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(at));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=function(){var t,e,n,r,i,o;if(t=p,(e=E())!==l){for(n=[],r=p,i=P(),r=(i=i===l?null:i)!==l?(o=E())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;)n.push(r),r=p,i=P(),r=(i=i===l?null:i)!==l?(o=E())!==l?i=[i,o]:(p=r,l):(p=r,l);t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l&&(t=function(){var t,e,n,r;t=p,st.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(lt));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=function(){var t,e,n,r,i,o;if(t=p,(e=M())!==l){for(n=[],r=p,i=P(),r=(i=i===l?null:i)!==l?(o=M())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;)n.push(r),r=p,i=P(),r=(i=i===l?null:i)!==l?(o=M())!==l?i=[i,o]:(p=r,l):(p=r,l);t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}())===l?function(){var t,e,n,r;t=p,ut.test(s.charAt(p))?(e=s.charAt(p),p++):(e=l,w(ct));if(e!==l){for(n=[],r=N();r!==l;)n.push(r),r=N();t=n!==l?(r=function(){var t,e,n,r,i,o;if(t=p,(e=T())!==l){for(n=[],r=p,i=P(),r=(i=i===l?null:i)!==l?(o=T())!==l?i=[i,o]:(p=r,l):(p=r,l);r!==l;)n.push(r),r=p,i=P(),r=(i=i===l?null:i)!==l?(o=T())!==l?i=[i,o]:(p=r,l):(p=r,l);t=n!==l?e=a(e,n):(p=t,l)}else p=t,t=l;return t}())!==l?e=i(e,r):(p=t,l):(p=t,l)}else p=t,t=l;return t}():t}function Ot(){var t,e,n,r,i=p,o=M();if(o!==l){for(t=[],e=p,e=(n=(n=P())===l?null:n)!==l&&(r=M())!==l?n=[n,r]:(p=e,l);e!==l;)t.push(e),e=p,e=(n=(n=P())===l?null:n)!==l&&(r=M())!==l?n=[n,r]:(p=e,l);i=t!==l?a(o,t):(p=i,l)}else p=i,i=l;return i}function Pt(){var t,e,n,r,i=p,o=O();if(o!==l){for(t=[],e=p,e=(n=(n=P())===l?null:n)!==l&&(r=O())!==l?n=[n,r]:(p=e,l);e!==l;)t.push(e),e=p,e=(n=(n=P())===l?null:n)!==l&&(r=O())!==l?n=[n,r]:(p=e,l);i=t!==l?a(o,t):(p=i,l)}else p=i,i=l;return i}function _(){var t,e,n=p,r=M();return n=r!==l&&(t=(t=P())===l?null:t)!==l&&(t=M())!==l&&(e=(e=P())===l?null:e)!==l&&(e=M())!==l?F(r,t,e):(p=n,l)}function S(){var t,e=p,n=M();return e=n!==l&&(t=(t=P())===l?null:t)!==l&&(t=M())!==l?z(n,t):(p=e,l)}function E(){var t,e=p,n=M();return e=n!==l&&(t=(t=P())===l?null:t)!==l&&(t=M())!==l?V(n,t):(p=e,l)}function T(){var t,e,n,r,i,o=p,a=Ct();return o=a!==l&&(t=(t=P())===l?null:t)!==l&&(t=Ct())!==l&&(e=(e=P())===l?null:e)!==l&&(e=O())!==l&&P()!==l&&(n=At())!==l&&(r=(r=P())===l?null:r)!==l&&(r=At())!==l&&(i=(i=P())===l?null:i)!==l&&(i=M())!==l?G(a,t,e,n,r,i):(p=o,l)}function M(){var t,e=p,n=O();return e=n!==l&&(t=(t=P())===l?null:t)!==l&&(t=O())!==l?ht(n,t):(p=e,l)}function Ct(){var t=Lt();return t=(t=t===l?A():t)!==l?dt(t):t}function O(){var t,e=p,n=C();return(e=(n=n===l?null:n)!==l&&(t=Lt())!==l?n=[n,t]:(p=e,l))===l&&(e=p,e=(n=(n=C())===l?null:n)!==l&&(t=A())!==l?n=[n,t]:(p=e,l)),e=e!==l?pt(e):e}function At(){var t;return ft.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(yt)),t=t!==l?gt(t):t}function P(){var t,e,n=p,r=[],i=N();if(i!==l)for(;i!==l;)r.push(i),i=N();else r=l;if(r!==l)if((i=(i=Nt())===l?null:i)!==l){for(t=[],e=N();e!==l;)t.push(e),e=N();n=t!==l?r=[r,i,t]:(p=n,l)}else p=n,n=l;else p=n,n=l;if(n===l){if(r=n=p,(i=Nt())!==l){for(t=[],e=N();e!==l;)t.push(e),e=N();r=t!==l?i=[i,t]:(p=r,l)}else p=r,r=l;n=r=r!==l?o():r}return n}function Nt(){var t;return 44===s.charCodeAt(p)?(t=vt,p++):(t=l,w(mt)),t}function Lt(){var t,e=p,n=function(){var t,e,n,r;t=p,(e=A())===l&&(e=null);t=e!==l?(46===s.charCodeAt(p)?(n=c,p++):(n=l,w(h)),n!==l?(r=A())!==l?e=[e,n,r]:(p=t,l):(p=t,l)):(p=t,l);t===l&&(t=p,e=A(),t=e!==l?(46===s.charCodeAt(p)?(n=c,p++):(n=l,w(h)),n!==l?e=[e,n]:(p=t,l)):(p=t,l));t!==l&&(t=u(t));return t}();return(e=n!==l&&(t=(t=It())===l?null:t)!==l?n=[n,t]:(p=e,l))===l&&(e=p,e=(n=A())!==l&&(t=It())!==l?n=[n,t]:(p=e,l)),e=e!==l?u(e):e}function It(){var t,e,n,r=p;return bt.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(xt)),r=(r=t!==l&&(e=(e=C())===l?null:e)!==l&&(n=A())!==l?t=[t,e,n]:(p=r,l))!==l?u(r):r}function C(){var t;return wt.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(kt)),t}function A(){var t,e=[];if(r.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(d)),t!==l)for(;t!==l;)e.push(t),r.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(d));else e=l;return e=e!==l?_t(e):e}function N(){var t;return St.test(s.charAt(p))?(t=s.charAt(p),p++):(t=l,w(Et)),t=t!==l?o():t}var L,I={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(L in I)I[L.toUpperCase()]=I[L];function R(t,e){for(var n=(e=e||[{}]).length;n--;){var r,i={code:t,command:I[t]};for(r in t==t.toLowerCase()&&(i.relative=!0),e[n])i[r]=e[n][r];e[n]=i}return e}if((e=n())!==l&&p===s.length)return e;throw e!==l&&p<s.length&&w({type:"end"}),t=g,n=y<s.length?s.charAt(y):null,e=y<s.length?x(y,y+1):x(y,y),new tx(tx.buildMessage(t,n),t,n,e)};(G.parseSVG=G).makeAbsolute=function(t){var n,r={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach(function(t){for(var e in"moveto"===t.command&&(n=t),t.x0=r.x,t.y0=r.y,i)e in t&&(t[e]+=t.relative?t[i[e]]:0);"x"in t||(t.x=r.x),"y"in t||(t.y=r.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=n.x,t.y=n.y),r=t}),t};function rx(t,e,n,r){var i,o,a=ix(r=void 0===r?"...":r,n),s=ef(t)?t:df(t),l=e,u=[];if(ix(t,n)<=e)return t;for(;;){if(i=s.substr(0,16),l<(o=ix(i,n))+a)break;if(u.push(i),l-=o,!(s=s.substr(16)))return u.join("")}for(;;){if(i=s.substr(0,1),l<(o=ix(i,n))+a)break;if(u.push(i),l-=o,!(s=s.substr(1)))return u.join("")}return"".concat(u.join("")).concat(r)}var ix=bf(function(t,e){var n=(e=void 0===e?{}:e).fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,e=e.fontVariant;return(nx=nx||document.createElement("canvas").getContext("2d")).font=[o,e,i,"".concat(n,"px"),r].join(" "),nx.measureText(ef(t)?t:"").width},function(t,e){return T([t],D(hf(e=void 0===e?{}:e)),!1).join("")});function ox(t,e){return"string"==typeof t?ix(t,e):t}var ax=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,t=t.style.fontSize;return{fontSize:t="object"==typeof t?t.value:t,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function sx(t,e){return"capitalize"===e?t.toLowerCase().replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()}):"lowercase"===e?t.toLowerCase():"uppercase"===e?t.toUpperCase():t}function lx(t,e){e=Math.pow(10,e);return~~(t*e)/e}function ux(t){return t.toLocaleString()}function cx(t,e){return void 0===e&&(e=0),Math.abs(t)<1e3?String(t):"".concat(lx(t/1e3,e).toLocaleString(),"K")}var hx=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},dx=function(t,e,n){return 0<t&&Number.isFinite(t)?e:n},px=function(t,e){return t*e},fx=Math.PI/180;function yx(t){if(af(t))return[t,t,t,t];if(Xp(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}var gx=["default","active","selected","disabled","inactive"],vx={fontSize:"16px",fontFamily:"sans-serif",fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",textAlign:"start",textBaseline:"alphabetic"};function mx(t){if(t)return null==t?void 0:t.default;var e=xf(t)||{};return gx.forEach(function(t){t in e&&delete e[t]}),e}function bx(t,e,n){if(void 0===n&&(n=!1),!e)return mx(t)||{};e=kf(t,e);return n?A({},mx(t),e):e}function xx(t){var e=t.canvas,n=t.touches,r=t.offsetX,t=t.offsetY;return e?[e.x,e.y]:n?[(e=n[0]).clientX,e.clientY]:r&&t?[r,t]:[0,0]}kx.prototype.selectAll=function(t){return new kx("string"==typeof t?this.__parent__.querySelectorAll(t):t,null,this.__elements__[0],this.__document__)},kx.prototype.select=function(t){t="string"==typeof t?this.__parent__.querySelectorAll(t)[0]||null:t;return new kx([t],null,t,this.__document__)},kx.prototype.append=function(n){var r=this,t="function"==typeof n?n:function(){var t=n;if(r.__document__)return r.__document__.createElement(t,{});var e=kx.registry[t];return e?new e:new Error("Unknown node type: ".concat(t))},e=[];if(null!==this.__data__){for(var i=0;i<this.__data__.length;i++)(s=t(o=this.__data__[i],i)).__data__=o,this.__parent__.appendChild(s),e.push(s);return new kx(e,null,this.__parent__,this.__document__)}for(i=0;i<this.__elements__.length;i++){var o,a=this.__elements__[i],s=t(o=a.__data__,i);a.appendChild(s),e.push(s)}return new kx(e,null,e[0],this.__document__)},kx.prototype.data=function(t,n){void 0===n&&(n=function(t){return t});for(var e=[],r=[],i=new Map(this.__elements__.map(function(t,e){return[n(t.__data__,e),t]})),o=0;o<t.length;o++){var a,s=t[o],l=n(s,o);i.has(l)?((a=i.get(l)).__data__=s,r.push(a),i.delete(l)):e.push(s)}var u=Array.from(i.values()),u=[new kx([],e,this.__parent__,this.__document__),new kx(r,null,this.__parent__,this.__document__),new kx(u,null,this.__parent__,this.__document__)];return new kx(this.__elements__,null,this.__parent__,this.__document__,u)},kx.prototype.merge=function(t){return new kx(T(T([],D(this.__elements__),!1),D(t.__elements__),!1),null,this.__parent__,this.__document__)},kx.prototype.join=function(t,e,n){void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()});t=(t=void 0===t?function(t){return t}:t)(this.__enter__),e=e(this.__update__),n=n(this.__exit__);return e.merge(t).merge(n)},kx.prototype.remove=function(){var n=T([],D(this.__elements__),!1);return this.__elements__.forEach(function(t){var e;t.parentNode&&(t.parentNode.removeChild(t),e=n.indexOf(t),n.splice(e,1),null!=(e=t.parentNode)&&e.removeChild(t),t.remove())}),new kx(n,null,this.__parent__,this.__document__)},kx.prototype.each=function(t){for(var e=0;e<this.__elements__.length;e++){var n,r=this.__elements__[e];r&&(n=r.__data__,t.call(r,n,e))}return this},kx.prototype.attr=function(n,r){var i="function"!=typeof r?function(){return r}:r;return this.each(function(t,e){void 0!==r&&(this[n]=i.call(this,t,e))}),this},kx.prototype.style=function(n,r){var i="function"!=typeof r?function(){return r}:r;return this.each(function(t,e){void 0!==r&&(this.style[n]=i.call(this,t,e))}),this},kx.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)}),this},kx.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,T([this.__parent__,this],D(e),!1)),this},kx.prototype.node=function(){return this.__elements__[0]},kx.prototype.nodes=function(){return this.__elements__},kx.registry={g:Wh,rect:nd,circle:zh,path:Kh,text:id,ellipse:Gh,image:Yh,line:Xh,polygon:Jh,polyline:td,html:ad};var wx=kx;function kx(t,e,n,r,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=[null,null,null]),this.__elements__=t=void 0===t?null:t,this.__data__=e,this.__parent__=n,this.__document__=r,this.__enter__=i[0],this.__update__=i[1],this.__exit__=i[2]}function k(t){return new wx([t],null,t,t.ownerDocument)}function N(t,e){var n,r;if(e)try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=D(o.value,2),s=a[0],l=a[1];t.style(s,l)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function B(t,e,n){return t.querySelector(e)?k(t).select(e):k(t).append(n)}function _x(t){t=t&&t.getRenderBounds();if(!t)return{width:0,height:0};var e=t.getMax(),t=t.getMin();return{width:e[0]-t[0],height:e[1]-t[1]}}function Sx(t){var t=t.getLocalBounds(),t=D([t.min,t.max],2),e=D(t[0],2),n=e[0],e=e[1],t=D(t[1],2),r=t[0],t=t[1];return{x:n,y:e,width:r-n,height:t-e,left:n,bottom:t,top:e,right:r}}function Ex(t){return"string"==typeof t?(e=t,(n=document.createElement("div")).innerHTML=e,n.firstChild):t;var e,n}var Tx=["year","month","day","hour","minute","second"],Mx=["YYYY","MM","DD","hh","mm","ss"];function Ox(t){return t instanceof Date?t:new Date(t)}function Px(t){for(var e,t=D(t,2),n=t[0],t=t[1],n=Tx.indexOf(n),r=Tx.indexOf(t),i="",o=n;o<=r;o+=1)i+=Mx[o],o<r&&(e="-",2===o?e=" ":2<o&&(e=":"),i+=e);return i}function Cx(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach(function(t){var e=n[t];r=r.replace(t,"YYYY"===t?"".concat(e):"0".concat(e).slice(-2))}),r}function Ax(t,e){t=new Date(t);return{year:function(t){t.setMonth(0),t.setHours(0,0,0,0)},month:function(t){t.setDate(1),t.setHours(0,0,0,0)},day:function(t){return t.setHours(0,0,0,0)},hour:function(t){return t.setMinutes(0,0,0)},minute:function(t){return t.setSeconds(0,0)},second:function(t){return t.setMilliseconds(0)}}[e](t),Cx(t,Px(["year",e]))}function Nx(t,e,n,r,i,o){return(t===e||Math.min(t,e)<=i&&i<=Math.max(t,e))&&(n===r||Math.min(n,r)<=o&&o<=Math.max(n,r))}function Lx(t,e,n){var r=t;(!t.length||e<t[0]||e===t[0]&&n<t[1])&&(r[0]=e,r[1]=n)}function Ix(t,e){var t=D(t,2),n=t[0],t=t[1],e=D(e,2),r=e[0],e=e[1];return Math.pow(Math.pow(n-r,2)+Math.pow(t-e,2),.5)}function Rx(o){return void 0===o&&(o=0),function(t,e,n){var r,i=n.value;"function"==typeof i&&(n.value=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r||(t=this,r=window.setTimeout(function(){i.apply(t,e),r=null},o))})}}var jx=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)};function Dx(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]}pt=Dx;function Bx(t,e,n){return[["M",t,e+n],["L",t,e-n]]}function Fx(t,e,n){return[["M",t-n,e],["L",t+n,e]]}J=Fx;function zx(t){n="default",Zp(e=t)&&e instanceof Image?n="image":Yp(e)?n="symbol":ef(e)&&(r=new RegExp("data:(image|text)"),n=e.match(r)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?"url":"symbol");var e,n,r=n;return["base64","url","image"].includes(r)?"image":t&&"symbol"===r?"path":null}i(Gx,Vx=V),Gx.prototype.render=function(t,e){t.x,t.y;var r=t.symbol,n=t.size,i=void 0===n?16:n,o=I(t,["x","y","symbol","size"]),a=zx(r);a?B(e,".".concat(a,"-marker"),a).attr("className","marker ".concat(a,"-marker")).call(function(t){var e,n;"image"===a?(e=2*i,t.style("img",r).style("width",e).style("height",e).style("x",-i).style("y",-i)):(e=i/2,n=Yp(r)?r:Gx.getSymbol(r),t.style("path",null==n?void 0:n(0,0,e)).call(N,o))}):(null!=(n=this.querySelector(".marker"))&&n.remove(),this.removeChildren())},Gx.MARKER_SYMBOL_MAP=new Map,Gx.registerSymbol=function(t,e){Gx.MARKER_SYMBOL_MAP.set(t,e)},Gx.getSymbol=function(t){return Gx.MARKER_SYMBOL_MAP.get(t)};var Vx,L=Gx;function Gx(){return null!==Vx&&Vx.apply(this,arguments)||this}L.registerSymbol("cross",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]}),L.registerSymbol("hyphen",function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}),L.registerSymbol("line",Bx),L.registerSymbol("plus",function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]}),L.registerSymbol("tick",function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]}),L.registerSymbol("circle",Dx),L.registerSymbol("point",pt),L.registerSymbol("bowtie",function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]}),L.registerSymbol("hexagon",function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]}),L.registerSymbol("square",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]}),L.registerSymbol("diamond",function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]}),L.registerSymbol("triangle",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]}),L.registerSymbol("triangle-down",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}),L.registerSymbol("line",Bx),L.registerSymbol("dot",Fx),L.registerSymbol("dash",J),L.registerSymbol("smooth",function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]}),L.registerSymbol("hv",function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]}),L.registerSymbol("vh",function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]}),L.registerSymbol("hvh",function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]}),L.registerSymbol("vhv",function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]});i(Ux,Hx=V),Ux.prototype.render=function(t,e){var n,r,i=t.padding,o=t.marker,a=t.text,s=t.textStyle,l=t.radius,u=t.backgroundStyle,c=t.spacing,h=t.align,t=t.verticalAlign,i=D(yx(i),4),d=i[0],p=i[1],f=i[2],i=i[3],y=B(e,".tag-content","g").attr("className","tag-content").node(),g=B(y,".tag-marker",function(){return new L({})}).attr("className","tag-marker").call(function(t){t.node().clear(),t.node().update(o||{symbol:"triangle",size:0,x:0})}).node(),c=(c=c,{x:(v=(g=g).getLocalBounds()).halfExtents[0]?v.max[0]+(c||0):g.style.x,y:v.halfExtents[1]?(v.min[1]+v.max[1])/2:g.style.y}),v=c.x,g=c.y,g=(B(y,".tag-text","text").attr("className","tag-text").style("fontFamily","sans-serif").style("fontSize",12).style("x",v).style("y",g).style("text",M(a)?"":"".concat(a)).call(N,s).style("textBaseline","middle").call(function(t){a||t.remove()}),c=i,v=d,g=h||"start",s=t||"top",t=(h=y).getLocalBounds(),r=n=0,"start"===g&&(n=c),"center"===g&&(n=-t.halfExtents[0]),"end"===g&&(n=-c-2*t.halfExtents[0]),"top"===s&&(r=v+t.halfExtents[1]),"middle"===s&&(r=0),"bottom"===s&&(r=v-2*t.halfExtents[1]),h.setLocalPosition([n,r]),y.getLocalBounds());B(e,".tag-background","rect").attr("className","tag-background").style("zIndex",(y.style.zIndex||0)-1).style("x",g.min[0]-i).style("y",g.min[1]-d).style("width",null!==u?i+p+2*g.halfExtents[0]:0).style("height",null!==u?d+f+2*g.halfExtents[1]:0).style("radius",null!=l?l:2).style("fill","#fafafa").style("stroke","#d9d9d9").style("lineWidth",1).call(N,u)},Ux.defaultOptions={type:Ux.tag="tag",style:{padding:4,spacing:4}};var Hx,Wx=Ux;function Ux(t){return Hx.call(this,A({},Ux.defaultOptions,t))||this}i(qx,Yx=Bh),qx.prototype.connectedCallback=function(){},qx.prototype.disconnectedCallback=function(){},qx.prototype.init=function(){},qx.prototype.clear=function(){},qx.prototype.destroy=function(){this.removeChildren(!0),this.parentNode&&this.parentNode.removeChild(this)},qx.tag="gui";var Yx,l=qx;function qx(){return null!==Yx&&Yx.apply(this,arguments)||this}var Xx,Zx,Kx={small:{textStyle:{fontSize:10},buttonStyle:{width:40,height:20},markerStyle:{size:8}},middle:{textStyle:{fontSize:12},buttonStyle:{width:60,height:30},markerStyle:{size:12}},large:{textStyle:{fontSize:16},buttonStyle:{width:80,height:40},markerStyle:{size:16}}},$x={primary:{textStyle:{default:{fill:"#fff"},active:{}},buttonStyle:{default:{fill:"#1890ff",lineWidth:0},active:{fill:"#40a9ff"}},markerStyle:{default:{fill:"#1890ff"},active:{fill:"#40a9ff"}}},dashed:{textStyle:{default:{},active:{}},buttonStyle:{default:{stroke:"#bbb",lineDash:[5,5]},active:{}},markerStyle:{}},link:{textStyle:{default:{fill:"#1890ff"},active:{}},buttonStyle:{default:{lineWidth:0},active:{}},markerStyle:{default:{fill:"#1890ff"}}},text:{textStyle:{default:{fill:"#000"},active:{}},buttonStyle:{default:{lineWidth:0},active:{}},markerStyle:{default:{stroke:"#000"}}},default:{textStyle:{default:{fill:"#000"},active:{fill:"#1890ff"}},buttonStyle:{default:{stroke:"#bbb"},active:{stroke:"#1890ff"}},markerStyle:{default:{stroke:"#bbb",lineWidth:1},active:{stroke:"#1890ff"}}}},Jx={strict:{textStyle:{fill:"#b8b8b8"},buttonStyle:{},markerStyle:{}},textStyle:{},buttonStyle:{stroke:"#d9d9d9",fill:"#f5f5f5"},markerStyle:{stroke:"#d9d9d9"}},Qx=(i(tw,Xx=l),Object.defineProperty(tw.prototype,"disabled",{get:function(){return this.style.disabled},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"markerWidth",{get:function(){return this.markerShape.isVisible()?this.getStyle("markerStyle").size:0},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"text",{get:function(){var t=this.attributes.text;if(""===t)return t;var e=this.textAvailableWidth;return rx(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"textWidth",{get:function(){return""===this.textShape.attr("text")?0:ix(this.text,ax(this.textShape))},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"textAvailableWidth",{get:function(){var t=this.attributes,e=t.marker,n=t.padding,r=t.ellipsis,i=t.width,t=t.markerSpacing;if(!r)return 1/0;r=ff(i)?this.getStyle("buttonStyle").width:i;return e?r-2*n-t-this.markerWidth:r-2*n},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"buttonWidth",{get:function(){var t=this.attributes,e=t.marker,n=t.padding,r=t.width,i=t.ellipsis,t=t.markerSpacing;if(!ff(r))return r;if(i)return this.getStyle("buttonStyle").width;var r=this.textShape.attr("text"),i=this.markerWidth,o=this.textWidth,n=2*n;return e?n+=""!==r?i+o+t:i:""!==r&&(n+=o),n},enumerable:!1,configurable:!0}),Object.defineProperty(tw.prototype,"buttonHeight",{get:function(){var t=this.attributes.height;return t||this.getStyle("buttonStyle").height},enumerable:!1,configurable:!0}),tw.prototype.getStyle=function(e,t){void 0===t&&(t="default");var n=this.attributes,r=n.size,i=n.type,n=n.disabled,o=A({},kf(Kx,[r,e]),bx(kf($x,[i,e]),t),bx(kf(this.attributes,e),t,!0));return n&&(Object.keys(o).forEach(function(t){t in Jx[e]&&(o[t]=kf(Jx,[e,t]))}),Object.keys(Jx.strict[e]).forEach(function(t){o[t]=kf(Jx,["strict",e,t])}),A(o,bx(kf(this.attributes,e),"disabled"))),o},tw.prototype.init=function(){this.initShape(),this.updateMarker(),this.updateText(),this.updateButton(),this.adjustLayout(),this.bindEvents()},tw.prototype.update=function(t){this.attr(A({},this.attributes,t)),this.updateMarker(),this.updateText(),this.updateButton(),this.adjustLayout()},tw.prototype.setState=function(t){this.style.disabled="disabled"===t,this.attr("cursor",this.style.disabled?"not-allowed":"pointer"),this.markerShape.attr("cursor",this.style.disabled?"not-allowed":"pointer")},tw.prototype.clear=function(){},tw.prototype.destroy=function(){this.removeChildren(!0),Xx.prototype.destroy.call(this)},tw.prototype.hide=function(){this.markerShape.update({visibility:"hidden"}),this.textShape.style.visibility="hidden",this.backgroundShape.style.visibility="hidden"},tw.prototype.show=function(){this.markerShape.update({visibility:"visible"}),this.textShape.style.visibility="visible",this.backgroundShape.style.visibility="visible"},tw.prototype.initShape=function(){this.markerShape=new L({name:"marker",style:E({symbol:"circle"},this.getStyle("markerStyle"))}),this.textShape=new id({name:"text",style:{text:""}}),this.backgroundShape=new nd({name:"background",style:{width:0,height:0}}),this.backgroundShape.appendChild(this.markerShape),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape)},tw.prototype.updateMarker=function(){var t=this.attributes.marker;ff(t)?this.markerShape.hide():(this.markerShape.update(E({symbol:t},this.getStyle("markerStyle"))),this.markerShape.show())},tw.prototype.updateText=function(){var t=this.text;""===t?this.textShape.hide():(this.textShape.attr(E(E({},this.getStyle("textStyle")),{text:t})),this.textShape.show())},tw.prototype.updateButton=function(){var t=this.attributes.disabled,t=(this.attr("cursor",t?"not-allowed":"pointer"),this.buttonHeight),e=this.getStyle("buttonStyle");this.backgroundShape.attr(E(E({},e),{height:t}))},tw.prototype.bindEvents=function(){this.addEventListener("click",this.clickEvents),this.addEventListener("mouseenter",this.mouseenterEvent),this.addEventListener("mouseleave",this.mouseleaveEvent)},tw.prototype.adjustLayout=function(){var t,e=this.attributes,n=e.padding,r=e.marker,i=e.markerAlign,e=e.markerSpacing,o=this.buttonWidth,a=this.buttonHeight,o=o/2,s=this.textWidth/2,l=this.textShape.attr("text"),u=0,c=0,h=a/2;r?(t=(r=this.markerWidth)/2,""===l?c=o:u="left"===i?(c=t+n,n+r+e+s):(c=this.buttonWidth-n-t,n+s)):""!==l&&(u=o),this.markerShape.attr({x:c,y:a/2}),this.textShape.attr({x:u,y:h}),this.backgroundShape.attr({width:this.buttonWidth})},tw.defaultOptions={type:tw.tag="button",style:{disabled:!1,cursor:"pointer",padding:10,size:"middle",type:"default",text:"",markerAlign:"left",markerSpacing:5,textStyle:{default:E(E({},vx),{textAlign:"center",textBaseline:"middle"}),active:{}},buttonStyle:{default:{lineWidth:1,radius:5},active:{}},markerStyle:{default:{}}}},tw);function tw(t){var e=Xx.call(this,Yb({},tw.defaultOptions,t))||this;return e.clickEvents=function(){var t=e.attributes.onClick;e.disabled||null==t||t.call(e,e)},e.mouseenterEvent=function(){e.attributes.disabled||(e.markerShape.update(e.getStyle("markerStyle","active")),e.textShape.attr(e.getStyle("textStyle","active")),e.backgroundShape.attr(E(E({},e.getStyle("buttonStyle","active")),{width:e.buttonWidth,height:e.buttonHeight})))},e.mouseleaveEvent=function(){e.markerShape.update(e.getStyle("markerStyle")),e.textShape.attr(e.getStyle("textStyle")),e.backgroundShape.attr(E(E({},e.getStyle("buttonStyle")),{width:e.buttonWidth,height:e.buttonHeight}))},e.init(),e}function ew(t){t=Zx.call(this,A({},ew.defaultOptions,t))||this;return t.cursorX=0,t.cursorY=0,t.init(),t}i(ew,Zx=l),ew.prototype.init=function(){var o=this,t=(this.cursorX=0,this.cursorY=0,this.attributes),e=t.x,n=t.y,a=t.items,s=t.textStyle,t=D(yx(t.padding),3),r=t[0],t=t[2];this.container=new Wh({name:"".concat(ew.tag,"-container")}),this.appendChild(this.container),this.container.translate(e+t,n+r),a.forEach(function(t,e){var n=new Wx({name:"".concat(ew.tag,"-item"),id:t.id,style:E(E({x:o.cursorX,y:o.cursorY,text:qp(t.text)?t.id:t.text,textStyle:s},_f(t,["marker"])),{padding:0,backgroundStyle:null})}),r=n.getBounds(),i=r.getMax()[0]-r.getMin()[0],r=r.getMax()[1]-r.getMin()[1];o.autoWrap(n,i,r),o.container.appendChild(n),o.bindEvents(n,t),e!==a.length-1&&o.createSeparator(o.container,r,e)})},ew.prototype.update=function(t){this.attr(A({},this.attributes,t)),this.clear(),this.init()},ew.prototype.clear=function(){this.container.destroy()},ew.prototype.createSeparator=function(t,e,n){var r=this.attributes.separator,i=r.spacing,i=void 0===i?0:i,o=r.text,o=void 0===o?"/":o,r=r.style,n=new id({name:"".concat(ew.tag,"-separator"),id:"".concat(ew.tag,"-separator-").concat(n),style:E(E(E(E({},vx),{x:this.cursorX+i,y:this.cursorY}),r),{text:o,textBaseline:"bottom"})}),r=n.getBounds(),o=r.getMax()[0]-r.getMin()[0],r=r.getMax()[1]-r.getMin()[1];this.autoWrap(n,o+i,r)||(this.cursorX+=i),n.translate(0,e),t.appendChild(n)},ew.prototype.bindEvents=function(t,e){var n=this.attributes,r=n.items,i=n.onClick;i&&t.addEventListener("click",function(){i.call(t,e.id,e,r)})},ew.prototype.autoWrap=function(t,e,n){var r=this.attributes,i=r.width,r=r.padding;if(this.cursorX+=e,!qp(i)){r=D(yx(r),2)[1];if(this.cursorX>i-r)return t.attr({x:0,y:this.cursorY+n}),this.cursorX=e,this.cursorY+=n,!0}return!1},ew.defaultOptions={type:ew.tag="breadcrumb",style:{separator:{text:"/",style:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},spacing:8},textStyle:{default:E(E({},vx),{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"}),active:{fill:"#5468ff",cursor:"pointer"}},padding:[8,8,8,8]}};i(iw,nw=jh),iw.prototype.render=function(){var t=this.attributes,e=t.lines,t=t.areas;e&&this.createLines(e),t&&this.createAreas(t)},iw.prototype.clear=function(){this.linesGroup.removeChildren(!0),this.areasGroup.removeChildren(!0)},iw.prototype.update=function(t){var e=t.lines,t=t.areas;this.clear(),e&&this.setAttribute("lines",e),t&&this.setAttribute("areas",t),this.render()},iw.prototype.createLines=function(t){var e=this;t.forEach(function(t){e.linesGroup.appendChild(new Kh({name:"line",style:t}))})},iw.prototype.createAreas=function(t){var e=this;t.forEach(function(t){e.areasGroup.appendChild(new Kh({name:"area",style:t}))})};var nw,rw=iw;function iw(t){var e=this,n=t.style,t=I(t,["style"]);return(e=nw.call(this,A({},{type:"lines",style:{width:0,height:0}},E({style:n},t)))||this).linesGroup=new Wh({name:"lines"}),e.appendChild(e.linesGroup),e.areasGroup=new Wh({name:"areas"}),e.appendChild(e.areasGroup),e.render(),e}i(sw,ow=jh),sw.prototype.render=function(){var e=this;this.attributes.columns.forEach(function(t){t.forEach(function(t){e.columnsGroup.appendChild(new nd({name:"column",style:t}))})})},sw.prototype.update=function(t){this.attr(A({},this.attributes,t)),t.columns&&(this.clear(),this.render())},sw.prototype.clear=function(){this.removeChildren(!0)};var ow,aw=sw;function sw(t){var e=this,n=t.style,t=I(t,["style"]);return(e=ow.call(this,A({},{type:"column",style:{width:0,height:0}},E({style:n},t)))||this).columnsGroup=new Wh({name:"columns"}),e.appendChild(e.columnsGroup),e.render(),e}function lw(t){return 0===t.length?[0,0]:[Jp(cf(t,function(t){return Jp(t)||0})),$p(uf(t,function(t){return $p(t)||0}))]}function uw(t){for(var e=xf(t),n=e[0].length,t=D([Array(n).fill(0),Array(n).fill(0)],2),r=t[0],i=t[1],o=0;o<e.length;o+=1)for(var a=e[o],s=0;s<n;s+=1)0<=a[s]?(a[s]+=r[s],r[s]=a[s]):(a[s]+=i[s],i[s]=a[s]);return e}function cw(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);for(var e=!!(e=void 0===e?!1:e),r=[],i=0,o=t.length;i<o;i+=2)r.push([t[i],t[i+1]]);for(var a,s,l,u=function(t,e,n,r){var i,o=[],a=!!r;if(a){u=r[0],c=r[1];for(var s=0,l=t.length;s<l;s+=1)var u=fo([0,0],u,x=t[s]),c=yo([0,0],c,x)}for(var s=0,h=t.length;s<h;s+=1){var d,p,f,y,g,v,m,b,x=t[s];0!==s||n?s!==h-1||n?(d=t[[s?s-1:h-1,s-1][n?0:1]],p=t[n?(s+1)%h:s+1],v=go(v=wo([0,0],p,d),v,e),0!==(g=(f=vo(x,d))+(y=vo(x,p)))&&(f/=g,y/=g),g=go([0,0],v,-f),v=go([0,0],v,y),m=po([0,0],x,g),b=fo([0,0],b=po([0,0],x,v),yo([0,0],p,x)),b=yo([0,0],b,fo([0,0],p,x)),m=fo([0,0],m=po([0,0],x,g=go([0,0],g=wo([0,0],b,x),-f/y)),yo([0,0],d,x)),m=yo([0,0],m,fo([0,0],d,x)),b=po([0,0],x,v=go([0,0],v=wo([0,0],x,m),y/f)),a&&(m=fo([0,0],m=yo([0,0],m,u),c),b=fo([0,0],b=yo([0,0],b,u),c)),o.push(i),o.push(m),i=b):(m=x,o.push(i),o.push(m)):i=x}return n&&o.push(o.shift()),o}(r,.4,e,n),c=r.length,h=[],i=0;i<c-1;i+=1)a=u[2*i],s=u[2*i+1],l=r[i+1],h.push(["C",a[0],a[1],s[0],s[1],l[0],l[1]]);return e&&(a=u[c],s=u[c+1],l=r[0],h.push(["C",a[0],a[1],s[0],s[1],l[0],l[1]])),h}function hw(t,e,n){return e<=t&&t<=n}function dw(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function pw(t,e,n){var r=!1,i=t.length;if(!(i<=2)){for(var o,a,s,l=0;l<i;l++){var u=t[l],c=t[(l+1)%i];if(a=c,((s=[e,n])[0]-(o=u)[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&Math.min(o[0],a[0])<=s[0]&&s[0]<=Math.max(o[0],a[0])&&Math.min(o[1],a[1])<=s[1]&&s[1]<=Math.max(o[1],a[1]))return 1;0<dw(u[1]-n)!=0<dw(c[1]-n)&&dw(e-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(r=!r)}return r}}function fw(t){for(var e,n,r=[],i=t.length,o=0;o<i-1;o++){var a=t[o],s=t[o+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(e=t[0],n=t[i-1],r.push({from:{x:n[0],y:n[1]},to:{x:e[0],y:e[1]}})),r}function yw(t,u){var c=!1;return Kp(t,function(t){if(e=t.from,t=t.to,n=u.from,r=u.to,i=n.x-e.x,o=n.y-e.y,a=t.x-e.x,t=t.y-e.y,s=r.x-n.x,r=r.y-n.y,l=null,.001*(a*a+t*t)*(s*s+r*r)<(n=a*r-t*s)*n&&(hw(r=(i*r-o*s)/n,0,1)&&hw((i*t-o*a)/n,0,1)&&(l={x:e.x+r*a,y:e.y+r*t})),l)return!(c=!0);var e,n,r,i,o,a,s,l}),c}function gw(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function vw(t,e){var n=(e=void 0===e?!1:e)?t.length-1:0,t=t.map(function(t,e){return T([e===n?"M":"L"],D(t),!1)});return e?t.reverse():t}function mw(t,e){if(void 0===e&&(e=!1),t.length<=2)return vw(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var o=e?t[r-i-1]:t[i];Cf(o,n.slice(-2))||n.push.apply(n,T([],D(o),!1))}var a=cw(n,!1);return e?a.unshift(T(["M"],D(t[r-1]),!1)):a.unshift(T(["M"],D(t[0]),!1)),a}function bw(t,e,n){t=xf(t);return t.push(["L",e,n],["L",0,n],["Z"]),t}i(kw,xw=l),Object.defineProperty(kw.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];t=xf(t);return t=af(t[0])?[t]:t},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"data",{get:function(){return this.attributes.isStack?uw(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"baseline",{get:function(){var t=this.scales.y,e=D(t.getOptions().domain||[0,0],2),n=e[0],e=e[1];return e<0?t.map(e):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"containerCfg",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"linesCfg",{get:function(){var n=this,t=this.attributes,r=t.areaStyle,e=t.isStack,i=t.lineStyle,o=t.smooth,t=this.containerCfg.width,a=this.data;if(0===a[0].length)return{lines:[],areas:[]};var s,l,u,c,h,d,p,f=this.scales,y=f.x,f=f.y,f=(a=a,s=(y={type:"line",x:y,y:f}).x,l=y.y,u=(y=D(l.getOptions().range||[0,0],2))[0],c=y[1],u<c&&(y=D([u,c],2),c=y[0],u=y[1]),a.map(function(t){return t.map(function(t,e){return[s.map(e),of(l.map(t),c,u)]})})),y=[];return r&&(a=this.baseline,y=e?(o?function(t,e,n){for(var r=[],i=t.length-1;0<=i;--i){var o,a=t[i],s=mw(a),l=void 0,l=0===i?bw(s,e,n):(o=mw(t[i-1],!0),a=a[0],o[0][0]="L",T(T(T([],D(s),!1),D(o),!1),[T(["M"],D(a),!1),["Z"]],!1));r.push(l)}return r}:function(t,e,n){for(var r=[],i=t.length-1;0<=i;--i){var o,a=vw(t[i]),s=void 0,s=0===i?bw(a,e,n):((o=vw(t[i-1],!0))[0][0]="L",T(T(T([],D(a),!1),D(o),!1),[["Z"]],!1));r.push(s)}return r})(f,t,a):(h=o,d=t,p=a,f.map(function(t){return bw((h?mw:vw)(t),d,p)}))),{lines:f.map(function(t,e){return E({stroke:n.getColor(e),path:(o?mw:vw)(t)},i)}),areas:y.map(function(t,e){return E({path:t,fill:n.getColor(e)},r)})}},enumerable:!1,configurable:!0}),Object.defineProperty(kw.prototype,"columnsCfg",{get:function(){var i=this,t=this.attributes,o=t.isStack,a=t.columnStyle,t=this.containerCfg.height,s=this.rawData;if(!s)return{columns:[]};o&&(s=uw(s));var e=this.createScales(s),l=e.x,u=e.y,e=D(lw(s),2),n=e[0],e=e[1],c=new vm({domain:[0,e-(0<n?0:n)],range:[0,t]}),h=l.getBandWidth(),d=this.rawData;return{columns:s.map(function(t,r){return t.map(function(t,e){var n=h/s.length;return E(E({fill:i.getColor(r)},a),o?{x:l.map(e),y:u.map(t),width:h,height:c.map(d[r][e])}:{x:l.map(e)+n*r,y:0<=t?u.map(t):u.map(0),width:n,height:c.map(Math.abs(t))})})})}},enumerable:!1,configurable:!0}),kw.prototype.init=function(){this.sparkShape=this.createSparkline(),this.appendChild(this.sparkShape)},kw.prototype.update=function(t){var e=this.attributes.type,t=(this.attr(A({},this.attributes,t)),t.type);t&&t!==e&&(this.clear(),this.sparkShape=this.createSparkline(),this.appendChild(this.sparkShape)),this.sparkShape instanceof rw?this.sparkShape.update(this.linesCfg):this.sparkShape.update(this.columnsCfg)},kw.prototype.clear=function(){this.removeChild(this.sparkShape),this.sparkShape.clear(),this.sparkShape.destroy()},kw.prototype.createSparkline=function(){var t={name:"sparkline"};return"line"===this.attributes.type?new rw(E(E({},t),{style:this.linesCfg})):new aw(E(E({},t),{style:this.columnsCfg}))},kw.prototype.getColor=function(t){var e=this.attributes.color;return Xp(e)?e[t%e.length]:Yp(e)?e.call(null,t):e},kw.prototype.createScales=function(t){var e=this.attributes,n=e.type,r=e.isGroup,i=e.barPadding,o=e.nice,o=void 0===o||o,a=e.minValue,e=e.maxValue,s=this.containerCfg,l=s.width,s=s.height,u=D(lw(t),2),c=u[0],u=u[1];return{type:n,x:"line"===n?new vm({domain:[0,t[0].length-1],range:[0,l]}):new mv({domain:t[0].map(function(t,e){return e}),range:[0,l],paddingInner:r?i:0}),y:new vm({domain:[null!=a?a:c,null!=e?e:u],range:[s,0],nice:o})}},kw.tag="sparkline",kw.defaultOptions={style:{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineStyle:{lineWidth:1},isGroup:!1,columnStyle:{lineWidth:1,stroke:"#fff",padding:.1}}};var xw,ww=kw;function kw(t){t=xw.call(this,A({},kw.defaultOptions,t))||this;return t.containerShape=new nd({name:"container",style:t.containerCfg}),t.appendChild(t.containerShape),t.init(),t}var _w=Kb({render:function(t,e){function n(t,e,n,r,i){B(h,"line-".concat(t),"line").attr("className","line-".concat(t)).style("x1",e).style("y1",n).style("x2",r).style("y2",i).style("stroke",h.style.stroke).style("strokeOpacity",h.style.strokeOpacity).style("lineWidth",h.style.lineWidth)}var r=t.size,i=t.radius,o=t.stroke,a=t.fill,s=t.lineWidth,l=t.orient,u=t.fillOpacity,t=t.strokeOpacity,r=void 0===r?10:r,c=2.4*r,h=B(e,".rect","rect").attr("className","rect").style("x",-r/2).style("y",-c/2).style("width",r).style("height",c).style("fill",a||"#fff").style("fillOpacity",u||1).style("stroke",o||"#bfbfbf").style("lineWidth","number"!=typeof s?1:s).style("strokeOpacity",t).style("radius","number"!=typeof i?r/4:null!=i?i:2).node(),a=1/3*r,u=2/3*r,o=.25*c,s=.75*c;n(0,a,o,a,s),n(0,u,o,u,s),h.setOrigin(r/2,c/2),"vertical"===l?e.setLocalEulerAngles(90):e.setLocalEulerAngles(0)}});i(Ow,Sw=V),Ow.prototype.render=function(t,e){var n,r,i,o=t.iconCfg,t=t.textCfg;i=e,o=((n=o)||{}).type,r="handle-icon ".concat(o,"-handle"),k(i).selectAll(".handle-icon").data(o?[o]:[],function(t){return t}).join(function(t){return t.append(function(t){return"symbol"===t?new L({className:r,name:"icon",style:n}):new _w({name:"icon",className:r,style:n})})},function(t){return t.each(function(){this.update(n)})},function(t){return t.remove()}),void 0===(i=t)&&(i={}),B(e,".".concat(o="handle-text"),"text").attr("className",o).style("fontSize",12).style("fill","#000").style("fillOpacity",.45).style("textAlign","center").style("textBaseline","middle").call(N,i)};var Sw,Ew,Tw,Mw=Ow;function Ow(){return null!==Sw&&Sw.apply(this,arguments)||this}function Pw(t){var o=Ew.call(this,A({},Pw.defaultOptions,t))||this;return o.onSelectionMouseenter=function(){o.selectionShape.attr(o.getStyle("selectionStyle"))},o.onSelectionMouseleave=function(){o.selectionShape.attr(o.getStyle("selectionStyle"))},o.onDragStart=function(i){return function(t){t.stopPropagation(),o.target=i,o.prevPos=o.getOrientVal(xx(t));var t=o.availableSpace,e=t.x,t=t.y,n=o.attributes,r=n.x,n=n.y;o.selectionStartPos=o.getRatio(o.prevPos-o.getOrientVal([e,t])-o.getOrientVal([r,n])),o.selectionWidth=0,o.addEventListener("mousemove",o.onDragging),o.addEventListener("touchmove",o.onDragging),document.addEventListener("mouseup",o.onDragEnd),document.addEventListener("touchend",o.onDragEnd)}},o.onDragging=function(t){t.stopPropagation();var t=o.getOrientVal(xx(t)),e=t-o.prevPos;if(e){var n=o.getRatio(e);switch(o.target){case"start":o.setValuesOffset(n);break;case"end":o.setValuesOffset(0,n);break;case"selection":o.setValuesOffset(n,n);break;case"background":o.selectionWidth+=n,o.setValues([o.selectionStartPos,o.selectionStartPos+o.selectionWidth].sort())}o.prevPos=t}},o.onDragEnd=function(){o.removeEventListener("mousemove",o.onDragging),o.removeEventListener("mousemove",o.onDragging),document.removeEventListener("mouseup",o.onDragEnd),document.removeEventListener("touchend",o.onDragEnd)},o.onValueChanged=function(t){t=new Mh("valueChanged",{detail:{oldValue:t,value:o.getValues()}});o.dispatchEvent(t)},o.selectionStartPos=0,o.selectionWidth=0,o.prevPos=0,o.target="",o}function Cw(t){var a=Tw.call(this,A({},Cw.defaultOptions,t))||this;return a.onValueChanged=function(t){var e=a.style.value;t!==e&&(e=new Mh("scroll",t={detail:{oldValue:t,value:e}}),a.dispatchEvent(e),e=new Mh("valueChanged",t),a.dispatchEvent(e))},a.onTrackClick=function(t){var e=a.attributes.thumbLen,n=D(a.getLocalPosition(),2),r=n[0],n=n[1],i=D(a.padding,4),o=i[0],i=i[3],r=a.getOrientVal([r+i,n+o]),i=a.getOrientVal(xx(t))-e/2,n=a.valueOffset(i-r,!0);a.setValue(n)},a.onThumbMouseenter=function(){a.thumbShape.attr(a.getStyle("thumbStyle","active"))},a.onTrackMouseenter=function(){a.trackShape.attr(a.getStyle("trackStyle","active"))},a.onThumbMouseleave=function(){a.thumbShape.attr(a.getStyle("thumbStyle"))},a.onTrackMouseleave=function(){a.trackShape.attr(a.getStyle("trackStyle"))},a.onDragStart=function(t){t.stopPropagation(),a.prevPos=a.getOrientVal(xx(t)),document.addEventListener("mousemove",a.onDragging),document.addEventListener("mouseup",a.onDragEnd),document.addEventListener("touchmove",a.onDragging),document.addEventListener("touchcancel",a.onDragEnd)},a.onDragging=function(t){t.stopPropagation();var t=a.getOrientVal(xx(t)),e=t-a.prevPos;a.setOffset(e),a.prevPos=t},a.onDragEnd=function(t){t.preventDefault(),document.removeEventListener("mousemove",a.onDragging),document.removeEventListener("mouseup",a.onDragEnd),document.removeEventListener("touchmove",a.onDragging),document.removeEventListener("touchcancel",a.onDragEnd)},a}i(Pw,Ew=V),Object.defineProperty(Pw.prototype,"values",{get:function(){return this.getAttribute("values")},set:function(t){this.setAttribute("values",this.getSafetyValues(t))},enumerable:!1,configurable:!0}),Object.defineProperty(Pw.prototype,"names",{get:function(){return this.getAttribute("names")},set:function(t){this.setAttribute("names",t)},enumerable:!1,configurable:!0}),Object.defineProperty(Pw.prototype,"backgroundShapeCfg",{get:function(){return E(E({cursor:"crosshair",zIndex:0},this.availableSpace),this.getStyle("backgroundStyle"))},enumerable:!1,configurable:!0}),Object.defineProperty(Pw.prototype,"sparklineShapeCfg",{get:function(){var t=this.attributes,t=(t.orient,t.sparkline),e=t.padding,t=I(t,["padding"]),e=D(yx(e),4),n=e[0],r=e[1],i=e[2],e=e[3],o=this.availableSpace,a=o.width,o=o.height,s=this.getStyle("backgroundStyle").lineWidth,s=void 0===s?0:s;return E(E({x:s/2+e,y:s/2+n},t),{zIndex:0,width:a-s-e-r,height:o-s-n-i})},enumerable:!1,configurable:!0}),Object.defineProperty(Pw.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.padding,n=t.width,t=t.height,e=D(yx(e),4),r=e[0],i=e[1],o=e[2],e=e[3];return{x:e,y:r,width:n-(e+i),height:t-(r+o)}},enumerable:!1,configurable:!0}),Pw.prototype.getValues=function(){return this.values},Pw.prototype.setValues=function(t){this.values=t,this.update({values:t})},Pw.prototype.getNames=function(){return this.names},Pw.prototype.setNames=function(t){this.names=t},Pw.prototype.render=function(t,e){function n(e){var t="slider-".concat(e,"-handle");return B(o,".".concat(t),function(){return new Mw({className:t})}).call(function(t){t.node().update(r.getHandleShapeCfg(e))}).node()}var r=this,i=t.backgroundStyle,t=t.selectionStyle,e=B(e,".slider-background","rect").attr("className","slider-background").style("cursor","crosshair").style("fill","#416180").style("fillOpacity",.05).call(N,this.availableSpace).call(N,bx(i)).node(),o=(B(this.backgroundShape=e,".slider-sparkline",function(){return new ww({})}).attr("className","slider-sparkline").call(function(t){t.node().update(r.sparklineShapeCfg)}),B(e,".slider-foreground","g").attr("className","slider-foreground").node());this.selectionShape=B(o,".slider-selection","rect").attr("className","slider-selection").style("cursor","move").style("zIndex",2).style("fill","#5B8FF9").style("fillOpacity",.15).call(N,this.calcMask()).call(N,bx(t)||{}).node();this.startHandle=n("start"),this.endHandle=n("end")},Pw.prototype.getSafetyValues=function(t,e){void 0===t&&(t=this.getValues()),void 0===e&&(e=4);var n,r=this.attributes,i=r.min,r=r.max,o=D(this.getValues(),2),a=o[0],o=o[1],t=D(t||[a,o],2),s=t[0],t=t[1],l=t-s;return t<s&&(s=(n=D([t,s],2))[0],t=n[1]),r-i<l?[i,r]:s<i?a===i&&o===t?[i,t]:[i,l+i]:r<t?o===r&&a===s?[s,r]:[r-l,r]:[lx(s,e),lx(t,e)]},Pw.prototype.getStyle=function(t,e,n){return void 0===e&&(e="default"),n?this.getHandleCfg(n):bx(kf(this.attributes,t),e,!0)},Pw.prototype.calcMask=function(t){var t=D(this.getSafetyValues(t),2),e=t[0],t=t[1],n=this.availableSpace,r=n.width,n=n.height;return this.getOrientVal([{y:0,height:n,x:e*r,width:(t-e)*r},{x:0,width:r,y:e*n,height:(t-e)*n}])},Pw.prototype.calcHandlePosition=function(t){var e=this.availableSpace,n=e.width,e=e.height,r=D(this.getSafetyValues(),2),i=r[0],r=r[1],t=("start"===t?i:r)*this.getOrientVal([n,e]);return{x:this.getOrientVal([t,n/2]),y:this.getOrientVal([e/2,t])}},Pw.prototype.calcHandleText=function(t){var e,n,r=this.attributes,i=r.orient,r=r.names,o=this.getHandleCfg(t),a=o.spacing,s=o.formatter,o=o.textStyle,l=this.getHandleSize(t),u=this.getSafetyValues(),c=this.availableSpace,h=c.width,c=c.height,d=this.calcMask(),p=d.x,f=d.y,y=d.width,d=d.height,r=D("start"===t?[r[0],u[0]]:[r[1],u[1]],2),u=s(r[0],r[1]),s=new id({style:E(E({},o),{text:u})}),r=_x(s),o=r.width,r=r.height,s=(s.destroy(),0),g=0,l=l/2,v="center";return"horizontal"===i?(e=(i=a+l)+o/2,v="start"===t?(s=0<(n=p-i-o)?-e:e,0<n?"end":"start"):(s=(n=o<h-p-y-i)?e:-e,n?"start":"end")):(o=a+l,g="start"===t?r<f-l?-o:o:r<c-f-d-l?o:-o),{x:s,y:g,text:u,textAlign:v}},Pw.prototype.getHandleTextShapeCfg=function(t){var e=this.getHandleCfg(t).textStyle;return E(E({},e),this.calcHandleText(t))},Pw.prototype.getHandleIconShapeCfg=function(t){var e,n=this.attributes.orient,r=this.getHandleCfg(t),i=r.handleIcon,r=r.handleStyle,o=this.getOrientVal(["ew-resize","ns-resize"]),t=this.getHandleSize(t),i=i?(e="symbol",E(E({},r),{cursor:o,size:t,symbol:i})):(e="default",E(E({},r),{cursor:o,size:t}));return E({orient:n,type:e},i)},Pw.prototype.getHandleShapeCfg=function(t){var e=this.getHandleCfg(t),n=this.calcHandlePosition(t),r=n.x,n=n.y,i=this.calcHandleText(t);return{x:r,y:n,handleType:t,zIndex:3,visibility:null!=e&&e.show?"visible":"hidden",iconCfg:this.getHandleIconShapeCfg(t),textCfg:E(E({},this.getHandleTextShapeCfg(t)),i)}},Pw.prototype.getHandleCfg=function(t){var e=kf(this.attributes,"handle"),n=e.start,r=e.end,e=I(e,["start","end"]),i={};return"start"===t?i=n:"end"===t&&(i=r),A({},e,i)},Pw.prototype.getHandleSize=function(t){t=this.getHandleCfg(t).size;if(t)return t;var t=this.attributes,e=t.width,t=t.height;return Math.floor((this.getOrientVal([t,e])+4)/2.4)},Pw.prototype.getOrientVal=function(t){var t=D(t,2),e=t[0],t=t[1];return"horizontal"===this.attributes.orient?e:t},Pw.prototype.setValuesOffset=function(t,e){void 0===e&&(e=0);var n=D(this.getValues(),2),r=n[0],n=n[1],t=[r+t,n+e].sort();this.setValues(t),this.onValueChanged([r,n])},Pw.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,e=e.height;return t/this.getOrientVal([n,e])},Pw.prototype.bindEvents=function(){function r(t){return t&&".handle-text"!==t.className}var i=this,t=this.selectionShape;t.addEventListener("mousedown",this.onDragStart("selection")),t.addEventListener("touchstart",this.onDragStart("selection")),t.addEventListener("mouseenter",this.onSelectionMouseenter),t.addEventListener("mouseleave",this.onSelectionMouseleave);[this.startHandle,this.endHandle].forEach(function(t){var n=t.style.handleType;t.addEventListener("mousedown",function(t){var e=t.target;r(e)&&i.onDragStart(n)(t)}),t.addEventListener("touchstart",function(t){var e=t.target;r(e)&&i.onDragStart(n)(t)})}),this.backgroundShape.addEventListener("mousedown",this.onDragStart("background")),this.backgroundShape.addEventListener("touchstart",this.onDragStart("background"))},Pw.defaultOptions={type:Pw.tag="slider",style:{orient:"horizontal",values:[0,1],names:["",""],min:0,max:1,width:200,height:20,sparkline:{padding:[1,1,1,1]},padding:[0,0,0,0],selectionStyle:{active:{fill:"#ccdaf5"}},handle:{show:!0,formatter:function(t,e){return t},spacing:10}}},i(Cw,Tw=V),Object.defineProperty(Cw.prototype,"padding",{get:function(){return yx(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(Cw.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.width,t=t.height,n=D(this.padding,4),r=n[0],i=n[1],o=n[2],n=n[3];return{x:n,y:r,width:e-(n+i),height:t-(r+o)}},enumerable:!1,configurable:!0}),Object.defineProperty(Cw.prototype,"trackLen",{get:function(){var t=this.availableSpace,e=t.width,t=t.height;return this.getOrientVal([e,t])},enumerable:!1,configurable:!0}),Object.defineProperty(Cw.prototype,"thumbRadius",{get:function(){var t=this.attributes.isRound,e=this.availableSpace,n=e.width,e=e.height,r=kf(this.attributes,["thumbStyle","default","radius"]);return t?r||this.getOrientVal([e,n])/2:0},enumerable:!1,configurable:!0}),Cw.prototype.render=function(t,e){var n=t.width,r=t.height,i=t.trackStyle,o=t.thumbStyle,a=t.value,s=t.thumbLen,t=t.orient,e=B(e,".track","rect").attr("className","track").style("width",null!=n?n:10).style("height",null!=r?r:200).call(N,bx(i)).node(),n=this.valueOffset(a||0),r=this.availableSpace;this.thumbShape=B(e,".thumb","rect").attr("className","thumb").style("x","vertical"===t?r.x:r.x+n).style("y","vertical"===t?r.y+n:r.y).style("width","vertical"===t?r.width:s).style("height","vertical"===t?s:r.height).style("radius",this.thumbRadius).call(N,bx(o)).node(),this.trackShape=e},Cw.prototype.getValue=function(){return this.style.value},Cw.prototype.setValue=function(t){var e=this.style,n=e.value,r=e.min,e=e.max;this.update({value:of(t,r,e)}),this.onValueChanged(n)},Cw.prototype.setOffset=function(t){var e=this.getValue();this.setValue(this.valueOffset(t,!0)+e)},Cw.prototype.valueOffset=function(t,e){var n=this.attributes,r=n.thumbLen,i=n.min,n=n.max,r=this.trackLen-r;return(e=void 0!==e&&e)?t/r:r*of(t,i,n)},Cw.prototype.getStyle=function(t,e){return void 0===e&&(e="default"),bx(kf(this.attributes,t),e)},Cw.prototype.bindEvents=function(){this.trackShape.addEventListener("click",this.onTrackClick),this.thumbShape.addEventListener("mousedown",this.onDragStart),this.thumbShape.addEventListener("touchstart",this.onDragStart),this.onHover()},Cw.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orient?t[0]:t[1]},Cw.prototype.onHover=function(){this.thumbShape.addEventListener("mouseenter",this.onThumbMouseenter),this.trackShape.addEventListener("mouseenter",this.onTrackMouseenter),this.thumbShape.addEventListener("mouseleave",this.onThumbMouseleave),this.trackShape.addEventListener("mouseleave",this.onTrackMouseleave)},Cw.defaultOptions={type:Cw.tag="scrollbar",style:{orient:"vertical",min:0,max:1,isRound:!0,thumbLen:20,padding:[2,2,2,2],trackStyle:{default:{fill:"#fafafa",lineWidth:1,stroke:"#e8e8e8"},active:{}},thumbStyle:{default:{fill:"#c1c1c1"},active:{opacity:.8}}}};Object.defineProperty(Nw.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(Nw.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(Nw.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(Nw.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(Nw.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(Nw.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),Nw.prototype.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Nw.prototype.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Nw.prototype.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Nw.prototype.rotate=function(t,e,n){t=this.rotatedPoints(t,e,n);return this.clear().add(t[0],t[1]).add(t[2],t[3]).add(t[4],t[5]).add(t[6],t[7])},Nw.prototype.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,o=this.x2,a=this.y2,s=Math.cos(t),t=Math.sin(t),l=e-e*s+n*t,e=n-e*t-n*s;return[[s*r-t*i+l,t*r+s*i+e],[s*r-t*a+l,t*r+s*a+e],[s*o-t*a+l,t*o+s*a+e],[s*o-t*i+l,t*o+s*i+e]].flat(1)},Nw.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},Nw.prototype.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Nw.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE};var Aw=Nw;function Nw(t){var t=t||{},e=t.left,n=t.top,r=t.right,t=t.bottom;this.x1=null!=e?e:+Number.MAX_VALUE,this.x2=null!=r?r:-Number.MAX_VALUE,this.y1=null!=n?n:+Number.MAX_VALUE,this.y2=null!=t?t:-Number.MAX_VALUE}function Lw(t,c){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some(function(t){var e=(i=D(i=c,4))[0],n=i[1],r=i[2],i=i[3],o=(t=D(t,4))[0],a=t[1],r=r-e,i=i-n,s=t[2]-o,t=t[3]-a,l=r*t-s*i;if(0==l)return!1;var u=0<l,e=e-o;return(n=r*(o=n-a)-i*e)<0!=u&&((a=s*o-t*e)<0!=u&&(l<n!=u&&l<a!=u))})}function Iw(t,e,n){void 0===n&&(n=[0,0,0,0]);var r=e.getEulerAngles()||0,i=(e.setEulerAngles(0),e.getLocalBounds()),o=i.min,a=i.max,i=i.halfExtents,s=o[0],l=2*i[0],i=2*i[1],o=o[1],u=a[0],a=a[1],c=0,h=0,d=s,p=o,f=("text"===e.tagName&&(i-=1.5,f=e.style.textAlign,y=e.style.textBaseline,c=+e.style.dx,h=+e.style.dy,"center"===f?d=(s+u)/2:"right"!==f&&"end"!==f||(d=u),"middle"===y?p=(o+a)/2:"bottom"!==y&&"baseline"!==y||(p=a)),D(n,4)),u=f[0],y=void 0===u?0:u,a=f[1],n=void 0===a?0:a,u=f[2],a=f[3];return t.set((c+=s)-(void 0===a?n:a),(h+=o)-y,c+l+n,h+i+(void 0===u?y:u)),e.setEulerAngles(r),t.rotatedPoints(r*fx,d,p)}function Rw(t,e,n){var r,t=Iw(new Aw,t,n),e=Iw(new Aw,e,n),n=Lw(e,[t[0],t[1],t[2],t[3]])||Lw(e,[t[0],t[1],t[4],t[5]])||Lw(e,[t[4],t[5],t[6],t[7]])||Lw(e,[t[2],t[3],t[6],t[7]]);return localStorage.getItem("__debug__")&&window.canvas&&((r=function(t,e){return void 0===e&&(e="red"),window.canvas.appendChild(new Kh({style:{lineWidth:1,stroke:e,path:[["M",t[0],t[1]],["L",t[2],t[3]],["L",t[4],t[5]],["L",t[6],t[7]],["Z"]]}}))})(t),r(e,"blue")),n}function jw(t,e,n){return"top"===t||"bottom"===t?e:n}function Dw(t,e,n){return"left"===t||"right"===t?e:n}function Bw(t,e,n){return"outside"===t?e:n}var Fw=function(t,e,n){return"left"===t?e:n},zw=function(t,e,n){return"right"===t?e:n},Vw=function(t,e,n){return"left"===t||"top"===t||"inside"===t?e:n};function Gw(t,r){var i;return T([],D(t.reduce(function(t,e,n){return n&&i&&Rw(i,e,r)?(t.add(i),t.add(e)):i=e,t},new Set)),!1)}var c={style:{title:{content:"",rotate:void 0,maxLength:260},ticks:[],ticksThreshold:100,tickLine:{len:6},subTickLine:{len:4,count:0},label:{type:"text",alignTick:!0,tickPadding:2,margin:[0,0,0,0],overlapOrder:["autoRotate","autoEllipsis","autoHide"],autoRotate:!1,autoEllipsis:!1,autoHide:!1,autoHideTickLine:!0,showLast:!0,showFirst:!0,optionalAngles:[0,45,90],minLabel:0,minLength:14,maxLength:160,ellipsisStep:" "},verticalFactor:1}},Hw=(A({},c,{style:{type:"arc"}}),A({},c,{style:{}}),{year:[["year","second"],["year","day"],["month","day"],["day","day"]],month:[["month","day"],["day","day"]],day:[["month","day"],["day","day"]],hour:[["hour","second"],["hour","minute"],["hour","hour"]],minute:[["minute","second"],["second","second"]],second:[["second","second"]]});function Ww(t,r){for(var i,o=t.map(function(t,e){return[t.id,{text:t.style.text,value:t.style.tip||t.style.text,idx:e}]}),a=new Map(o),e=cf(o,function(t){t=D(t,2),t[0],t=t[1].value;return new Date(t).getTime()}).text,n=uf(o,function(t){t=D(t,2),t[0],t=t[1].value;return new Date(t).getTime()}).text,s=(n=n,e=D([Ox(e=e),Ox(n)],2),n=e[0],e=e[1],n.getFullYear()!==e.getFullYear()?"year":n.getMonth()!==e.getMonth()?"month":n.getDay()!==e.getDay()?"day":n.getHours()!==e.getHours()?"hour":n.getMinutes()!==e.getMinutes()?"minute":"second"),l=new Date("1970-01-01 00:00:00"),u=ax(t[0]),c=0;c<Hw[s].length;c+=1){var h=Hw[s][c];if(Lf(Cx(l,Px(h)),u)<r){i=h;break}i=h}return function(t,e){var e=a.get(e.id).idx;if(0===e)return t;var e=null==(e=o[e-1])?void 0:e[1].text,t=new Date(t),n=i;return Ax(new Date(e),s)!==Ax(t,s)&&(n=function(t,e,n,r){for(var i=[],o=D(t,2)[1],a=Tx.indexOf(o),s=0;s<=a;s+=1){var l=[Tx[s],o];if(Lf(Cx(e,Px(l)),r)<n){i=l;break}}return i}(i,t,r,u)),Cx(t,Px(n))}}function Uw(a,s,t){if(!(s.length<=1))for(var e=t.ellipsisStep,n=t.minLength,r=t.maxLength,i=t.margin,l=void 0===i?[]:i,u=t.labelType,c=ax(s[0]),o=ox(e,c)||1,h=ox(n,c)||1,i=ox(r,c),d=(!qp(i)&&i!==1/0||(i=Math.max.apply(null,s.map(function(t){return t.getBBox().width}))),Date.now()),p=s.slice(),t=D(l,4),e=(t[0],t[1]),f=void 0===e?0:e,n=(t[2],t[3]),y=void 0===n?f:n,g=function(e){if((p=Gw(s,l)).length<1)return{value:void 0};if(300<Date.now()-d)return{value:void 0};var t,n,r,i=function(t,e){return""},o=jw(a,e-y-f,e),i="time"===u?Ww(s,o):"number"===u?(o=o,n=(t=s).map(function(t,e){return{text:t.style.text,value:Number(t.style.tip||t.style.text)}}),n=Number(uf(n,function(t){t=t.text;return(null==t?void 0:t.length)||0}).value),t=ax(t[0]),r=ux(n),Lf(r,t)<=o?function(t,e){return ux(Number(t))}:(r=cx(n),Lf(r,t)<=o?function(t,e){return cx(Number(t),1)}:function(t,e){return Number(t).toExponential()})):function(t){return rx(t,e,c)};p.forEach(function(t,e){var n=t.style.tip||t.style.text,n=(t.style.tip=n,i.call(null,n,t));t.attr("text",n)})},v=i;h+o<v;v-=o){var m=g(v);if("object"==typeof m)return m.value}}var Yw=function(t,e){var e=e.seq,n=void 0===e?2:e;return t.filter(function(t,e){return!(e%n)||!(t.style.visibility="hidden")})};function qw(t,e,n){var r=e.length;if(!(r<=1||2===r&&null!=n&&n.showFirst&&null!=n&&n.showLast)){var i,o,a,s=Yw,l=2,u=e.slice(),c=e.slice(),h=Date.now(),d=Math.min.apply(null,e.map(function(t){return t.getBBox().width}))||1;for("top"!==t&&"bottom"!==t||(t=Sx(e[0]).left,e=Sx(e[r-1]).right,e=Math.abs(e-t)||1,l=Math.max(Math.floor(r*d/e),l)),null!=n&&n.showFirst&&(i=u.splice(0,1)[0]),null!=n&&n.showLast&&(o=u.splice(-1,1)[0],u.reverse());Gw((o?T(T([o],D(c),!1),[i],!1):T([i],D(c),!1)).filter(function(t){return jx(t)}),null==n?void 0:n.margin).length;)if(o&&!i&&l%2==0?u.splice(0,1).forEach(function(t){return t.style.visibility="hidden"}):o&&i&&u.splice(0,1).forEach(function(t){return t.style.visibility="hidden"}),c=s(((a=u).forEach(function(t){return t.style.visibility="visible"}),a),{seq:l}),l++,200<Date.now()-h)return}}function Xw(o,t,e){for(var n=e.optionalAngles,a=void 0===n?[0,45,90]:n,r=e.margin,i=function(i){if(t.forEach(function(t){return e=o,t=t,n=a[i],t.setEulerAngles(n),void(n&&(r=Vw(e,-1,1),e=Fw(e,"end",zw(e,"start",dx(px(r,n),"left",hx(px(r,n),"right")))),t.style.textAlign=e));var e,n,r}),Gw(t,r).length<1)return"break"},s=0;s<a.length&&"break"!==i(s);s++);}var Zw=new Map([["autoHide",{getDefault:function(){return qw},equidistance:qw,greedy:function(t,e,n){var r,i=e.length;i<=1||2===i&&null!=n&&n.showFirst&&null!=n&&n.showLast||e.slice().forEach(function(t,e){e&&r&&Rw(r,t,null==n?void 0:n.margin)?e===i-1&&null!=n&&n.showLast?r.style.visibility="hidden":t.style.visibility="hidden":r=t})}}],["autoRotate",{getDefault:function(){return Xw}}],["autoEllipsis",{getDefault:function(){return Uw},ellipsis:Uw}]]);function Kw(t,e,n){var r,t=Array.from(t||[]).map(function(t,e){return E({id:"".concat(e)},t)}),i=t.length,o=t;return"number"==typeof e&&e<i&&(r=Math.ceil(i/e),o=t.filter(function(t,e){return e%r==0||e===i-1})),n&&1!==o[o.length-1].value&&o.push({value:1,id:"append"}),o}function $w(a,s){return function(i){var t,o;a&&(t=void 0===(t=a.overlapOrder)?[]:t,o=E({labelType:a.type},_f(a,["optionalAngles","minLength","maxLength","ellipsisStep","showFirst","showLast","margin"])),t.forEach(function(t){var e,n=Zw.get(t),r=a[t];n&&r&&(t=t,(e=a)&&("autoRotate"!==t||qp(e.rotate)))&&(t=n.getDefault(),"function"==typeof r?t=r:"object"==typeof r?(t=n[r.type]||Tf,o=E(E({},o),r.cfg)):"string"==typeof r&&(t=n[r]||Tf),t(s,i,o))}))}}function Jw(t,n,e){e&&t.forEach(function(t,e){e=n[e];e&&(e.style.visibility=t.style.visibility)})}function Qw(t,e,n,r,i,o){B(t,".axis-title","text").attr("className","axis-title").style("text",(null==o?void 0:o.content)||"").style("x",e).style("y",n).style("fill","black").style("fontSize",12).style("fontWeight","lighter").style("textAlign",r).style("textBaseline",i).style("transform","rotate(".concat((null==o?void 0:o.rotate)||0,"deg)")).style("visibility",o?"visible":"hidden").call(N,(null==o?void 0:o.style)||{})}function t2(t,e,n,r){var i=n[e].data,n=n.map(function(t){return t.data}),i="function"==typeof r?r.call(null,i,e,n):r;t.attr(i||{})}function e2(t,n,r,e){void 0===e&&(e=""),k(t).selectAll(".axis-".concat(e,"tick")).data(r?n:[],function(t){return t.id}).join(function(t){return t.append(function(t){return new Xh({className:"axis-".concat(e,"tick"),style:t})}).style("stroke","#416180").style("lineWidth",.5).style("strokeOpacity","sub"===e?.45:.65).style("visibility","visible").each(function(t,e){this.attr(t),t2(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),t2(this,e,n,null==r?void 0:r.style)}).style("visibility","visible")},function(t){return t.remove()})}function n2(t,e,n,r){var i=n[e].data,n=n.map(function(t){return t.data}),i="function"==typeof r?r.call(null,i,e,n):r;t.attr(i||{})}function r2(t,e){var n=ax(t),e=ox(e,n);t.attr("tip",null),jx(e)&&e<2*t.getBounds().halfExtents[0]&&(e=rx(t.style.text||"",e,n,"..."),t.attr("tip",t.style.text),t.attr("text",e))}function i2(t,e,n,r,i){k(t).selectAll(".".concat(e)).data(n,function(t){return t.id}).join(function(t){return t.append("text").attr("className",e).style("fontFamily","sans-serif").style("fontSize",12).style("fontWeight","normal").call(N,i||{}).each(function(t,e){this.attr(t),r2(this,(null==r?void 0:r.maxLength)||Number.MAX_SAFE_INTEGER),n2(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),r2(this,(null==r?void 0:r.maxLength)||Number.MAX_SAFE_INTEGER),n2(this,e,n,null==r?void 0:r.style)})},function(t){return t.remove()})}function o2(t,e,n){i2(t,"axis-label",(n=void 0===n?{}:n)?e:[],n,{fill:"#000",fontWeight:"lighter"})}function a2(t,e,n,r,i,o){B(t,".axis-".concat(e,"-arrow"),function(){return new L({})}).attr("className","axis-arrow$$ axis-".concat(e,"-arrow")).style("visibility",o?"visible":"hidden").style("symbol","axis-arrow").style("x",n).style("y",r).style("size",8).style("lineWidth",.5).style("fill","grey").style("stroke","grey").style("fillOpacity",.85).style("strokeOpacity",.85).style("transformOrigin","left").style("transform","rotate(".concat(i,"deg)")).call(N,o||{})}function s2(t,e,n,r){var i,o,a,s;void 0===r&&(r={}),B(t,".axis-line","path").attr("className","axis-line").style("visibility",r?"visible":"hidden").style("stroke","grey").style("lineWidth",.5).style("strokeOpacity",.85).style("path",e).call(N,(null==r?void 0:r.style)||{}),n&&(r=(e=(null==r?void 0:r.arrow)||{}).start,e=e.end,n=D(n,2),i=(o=D(n[0],2))[0],o=o[1],a=(n=D(n[1],2))[0],n=n[1],s=Math.atan((n-o)/(a-i))/Math.PI*180/2,i===a?s=n<o?45:-45:o===n&&(s=a<i?0:90),a2(t,"start",i,o,s,r),a2(t,"end",a,n,s+90,e))}function l2(t,e,n,r){if(!e)return"";i=t[0],o=e,a=(i=D(i,2))[0],i=i[1],a=(o=D(o,2))[0]-a,o=o[1]-i;var i,o,a,s=Math.sqrt(a*a+o*o),l=r?0:1;return n?"M".concat(e[0],",").concat(e[1]-s," A").concat(s,",").concat(s,",0,0,").concat(l,",").concat(e[0],",").concat(e[1]+s," A").concat(s,",").concat(s,",0,0,").concat(l,",").concat(e[0],",").concat(e[1]-s," Z"):t.reduce(function(t,e,n){return(0===n?"M":"".concat(t,"A").concat(s,",").concat(s,",0,0,").concat(l,",")).concat(e[0],",").concat(e[1])},"")}function u2(t,e,n,r,i){if("circle"===e)return l2(t,n,r,i);e=t.reduce(function(t,e,n){return"".concat(t).concat(0===n?"M":" L").concat(e[0],",").concat(e[1])},"");return"".concat(e).concat(r?"Z":"")}i(d2,c2=V),d2.prototype.render=function(t,e){var n,r,i,o,a=t.items,s=void 0===a?[]:a,l=t.type,u=t.center,a=t.lineStyle,c=t.alternateColor,h=t.closed,t=s.map(function(t,e){return{id:t.id||"grid-line-".concat(e),path:u2(t.points,l,u,h)}}),d=(n=t,r={style:a},k(e).selectAll(".grid-line").data(n,function(t){return t.id}).join(function(t){return t.append("path").attr("className","grid-line").style("stroke","#D9D9D9").style("lineWidth",1).style("lineDash",[4,4]).each(function(t,e){this.attr(t),t2(this,e,n,null==r?void 0:r.style)})},function(t){return t.each(function(t,e){this.attr(t),t2(this,e,n,null==r?void 0:r.style)})},function(t){return t.remove()}),[]);if(c)for(var p=Array.isArray(c)?c:[c,"transparent"],f=0;f<s.length-1;f++){0===f&&2<s[0].points.length&&(y=u2(s[0].points,l,u),d.push({path:y,fill:p[d.length%2]}));var y=u2(s[f].points,l,u,h),g=u2(s[f+1].points.slice().reverse(),l,u,h,!0),v=void 0,v=h?"".concat(y," ").concat(g):"".concat(y," L").concat(g.slice(1)," Z");d.push({path:v,fill:p[d.length%2]})}i=d,k(e).selectAll(".grid-region").data(i,function(t,e){return e}).join(function(t){return t.append("path").attr("className","grid-region").each(function(t,e){this.attr(t),t2(this,e,i,null==o?void 0:o.style)})},function(t){return t.each(function(t,e){this.attr(t),t2(this,e,i,null==o?void 0:o.style)})},function(t){return t.remove()})};var c2,h2=d2;function d2(){return null!==c2&&c2.apply(this,arguments)||this}function p2(t,e){e?B(t,".axis-grid",function(){return new h2({})}).attr("className","axis-grid").call(function(t){return t.node().update(e)}):(t=t.querySelector(".axis-grid"))&&t.remove()}function f2(t,e,n,r){void 0===r&&(r=0);var t=D(t,2),i=D(t[0],2),o=i[0],i=i[1],t=D(t[1],2),a=t[0],t=t[1],e=D([e*(a-o)+o,e*(t-i)+i],2),s=e[0],e=e[1],a=mo([0,0],[Math.abs(a-o),-Math.abs(t-i)]),o=Vw(n,-1,1),n=D(go([0,0],(t=a,!(i=[])?(i[0]=t[1],i[1]=-1*t[0]):(i[0]=-1*t[1],i[1]=t[0]),i),r),2),a=n[0],t=n[1];return[[s,e],[s+px(o,a),e+px(o,t)]]}function y2(a,s,t,e,n){var l=(null==n?void 0:n.len)||0,u=t,n=e||{},c=n.formatter,t=n.tickPadding,h=void 0===t?0:t,e=n.offset,d=void 0===e?0:e,t=n.alignTick,p=void 0===t||t,e=n.rotate,f=void 0===e?0:e,y=Vw(u,-1,1);return Array.from(a).map(function(t,e){var n=t.value,r=(p||(n=((e===a.length-1?1:null==(r=a[e+1])?void 0:r.value)+n)/2+(i||0)/2),D(f2(s,n,u,l+h),2)),i=D(r[1],2),n=i[0],i=i[1],e=c?c(t,e):t.text,o=jw(u,"center",Fw(u,"end","start"));return f&&(o=Fw(u,"end",zw(u,"start",dx(px(y,f),"left",hx(px(y,f),"right"))))),{id:"label-".concat(t.id),data:t,x:n+jw(u,d,0),y:i+Dw(u,d,0),text:e,textAlign:o,textBaseline:Dw(u,"middle","top"===u?"bottom":"top"),transform:"rotate(".concat(f||0,"deg)")}})}L.registerSymbol("axis-arrow",function(t,e,n){var r=t+2*n;return[["M",t,e],["L",r,e],["L",r-n,e-n],["L",r+n,e],["L",r-n,e+n],["L",r,e]]});var g2=Kb({render:function(t,e){var n=t.startPos,r=t.endPos,i=t.verticalFactor,o=t.ticksThreshold,a=t.appendTick,s=t.axisLine,l=t.ticks,l=void 0===l?[]:l,u=t.label,u=void 0===u?{}:u,c=t.tickLine,h=t.subTickLine,d=t.title,t=t.grid,n=[n||[0,0],r||[0,0]],r=D(n,2),p=D(r[0],2),f=p[0],p=p[1],r=D(r[1],2),y=r[0],r=r[1],g=mo([0,0],[y-f,r-p]),g=(void 0===(g=g)&&(g=[0,0]),void 0===(i=i||1)&&(i=1),Math.abs(g[0])>Math.abs(g[1])?1===i?"bottom":"top":-1===i?"left":"right"),i=Kw(l,o,a);p2(e,t);s2(B(e,".axis-line-group","g").attr("className","axis-line-group").node(),"M".concat(f,",").concat(p," L").concat(y,",").concat(r),n,s);l=B(e,".axis-tick-group","g").attr("className","axis-tick-group").node();v=n,m=g,b=(null==c?void 0:c.len)||0;e2(l,Array.from(i).map(function(t){var e=D(f2(v,t.value,m,b),2),n=D(e[0],2),r=n[0],n=n[1],e=D(e[1],2);return{x1:r,y1:n,x2:e[0],y2:e[1],id:"tick-".concat(t.id),data:t}}),c);var v,m,b,o="axis-subtick-group",a=B(e,".".concat(o),"g").attr("className",o).node();x=i,w=n,k=g,_=null==h?void 0:h.count,S=null==h?void 0:h.len,void 0===_&&(_=0),void 0===S&&(S=0);e2(a,Array.from(x).map(function(a,s){return s===x.length-1?[]:Array(_).fill(null).map(function(t,e){var n=(((null==(n=x[s+1])?void 0:n.value)||1)-a.value)/(_+1),n=a.value+n*(e+1),n=D(f2(w,n,k,S),2),r=D(n[0],2),i=r[0],r=r[1],n=D(n[1],2),o=n[0],n=n[1];return{id:"sub-".concat(a.id,"-").concat(e),x1:i,y1:r,x2:o,y2:n}})}).flat(),h,"sub");var x,w,k,_,S,E,T,M,t="axis-label-group",f=B(e,".".concat(t),"g").attr("className",t).node(),p=(o2(f,y2(i,n,g,u,c),u),f.querySelectorAll(".axis-label")),y=f.querySelectorAll(".axis-tick"),r=($w(u,g)(p),Jw(p,y,null==u?void 0:u.autoHideTickLine),D(l.getBounds().halfExtents,2)),o=r[0],a=r[1],h=D(f.getBounds().halfExtents,2),t=h[0],i=h[1],p=+((null==(c=null==s?void 0:s.style)?void 0:c.lineWidth)||0),u=(y=g,u=2*(o+t)+p,l=2*(a+i)+p,r=d,h=(f=D(f=n,2))[0],f=f[1],s=(h=D(h,2))[0],h=h[1],c=(f=D(f,2))[0],f=f[1],g=Math.min(s,c),o=Math.max(s,c),t=Math.min(h,f),a=Math.max(h,f),i=g,p=t,E=n=0,T="bottom",M="start","left"===y||"right"===y?(n=u+((null==r?void 0:r.titlePadding)||0),"center"===(null==r?void 0:r.titleAnchor)&&(p=(h+f)/2),"end"===(null==r?void 0:r.titleAnchor)&&(p=a,T="top"),"left"===y&&(M="end",n*=-1)):(E=l+((null==r?void 0:r.titlePadding)||0),"center"===(null==r?void 0:r.titleAnchor)&&(i=(s+c)/2,M="center"),"end"===(null==r?void 0:r.titleAnchor)&&(i=o,M="end"),"top"===y&&(E*=-1),"bottom"===y&&(T="top")),void 0!==(null==r?void 0:r.positionX)&&(i=g+r.positionX,M="start"),void 0!==(null==r?void 0:r.positionY)&&(p=t+r.positionY,T="bottom"),{x:i+n,y:p+E,textAlign:M,textBaseline:T});Qw(e,u.x,u.y,u.textAlign,u.textBaseline,d)}},c.style),v2=Math.PI,m2=Math.abs,b2=Math.cos,x2=Math.sin,w2=D([2*v2],1)[0];function k2(t,e,n,r,i){void 0===i&&(i=0);var t=D(t,2),o=t[0],t=t[1],n=n*fx,a=e*b2(n),s=e*x2(n),r=Vw(r,-1,1);return[[o+a,t+s],[o+(e+px(r,i))*b2(n),t+(e+px(r,i))*x2(n)]]}function _2(t){var e;return lf(t[0],0)?e="center":0<t[0]?e="start":t[0]<0&&(e="end"),e}function S2(t,d,p,f,y,e,g,v){void 0===v&&(v=0);var m=e,b=Vw(m,-1,1),e=g.tickPadding,x=void 0===e?0:e,w=g.formatter,k=g.align,_=g.rotate;return Array.from(t).map(function(t,e){var n,r=(p-d)*t.value+d,i=v+x,o=270<=(o=r)?(o-360)%360:o,a=D(k2(y,f,r,m,i),2),a=D(a[1],2),s=a[0],a=a[1],l=w?w(t,e):t.text,u="center",c="baseline",h=[px(b,s-y[0]),px(b,a-y[1])];return"radial"===k?(c="middle",(90<=o||o<-90)&&(o+=180),u=_2(h),lf(o,-90)&&(u=Bw(m,"start","end")),lf(o,270)&&(u=Bw(m,"end","start"))):"tangential"===k?(u="center",c="bottom",0<=o&&o<180?(o+=270,e="function"==typeof(null==g?void 0:g.style)?g.style(t,e):null!=(e=null==(e=null==g?void 0:g.style)?void 0:e.fontSize)?e:14,r=D(k2(y,f,r,m,i+e),2),s=(i=D(r[1],2))[0],a=i[1]):o+=90):(o=null!=_?_:0,u=_2(h),lf((e=h)[1],0)?n="middle":0<e[1]?n="top":e[1]<0&&(n="bottom"),c=n),{id:"label-".concat(t.id),x:s,y:a,text:l,textAlign:u,textBaseline:c,transform:"rotate(".concat((o||0).toFixed(0),"deg)"),data:t}})}var E2,T2=Kb({render:function(t,e){var n=t.startAngle,n=void 0===n?0:n,r=t.endAngle,r=void 0===r?0:r,i=t.center,o=t.radius,a=t.axisLine,s=t.tickLine,l=t.subTickLine,u=t.label,u=void 0===u?{}:u,c=t.ticks,j=t.title,h=t.grid,d=t.ticksThreshold,p=t.appendTick,t=t.verticalFactor,c=Kw(void 0===c?[]:c,d,p),d=-1===t?"inside":"outside",p=(p2(e,h),B(e,".axis-line-group","g").attr("className","axis-line-group").node());t=i,h=o,g=n/180*Math.PI,R=r/180*Math.PI,void 0===h&&(h=0),void 0===g&&(g=0),void 0===R&&(R=0),f=(t=D(t=void 0===t?[0,0]:t,2))[0],t=t[1],L=(I=D([h,h],2))[0],I=I[1],_=(S=D([f+h*b2(g),t+h*x2(g)],2))[0],S=S[1],y=(h=D([f+h*b2(R),t+h*x2(R)],2))[0],h=h[1];s2(p,(p=m2(R-g))===w2?"M".concat(f,",").concat(t-I,", A").concat(L,",").concat(I,",0,1,1,").concat(f,",").concat(t+I,", A").concat(L,",").concat(I,",0,1,1,").concat(f,",").concat(t-I):(p=v2<p?1:0,R=R<g?0:1,"M".concat(f,",").concat(t,",L").concat(_,",").concat(S,",A").concat(L,",").concat(I,",0,").concat(p,",").concat(R,",").concat(y,",").concat(h,",L").concat(f,",").concat(t)),void 0,a);var f,y,g=B(e,".axis-tick-group","g").attr("className","axis-tick-group").node();v=n,m=r,b=o,x=i,w=d,void 0===(k=null==s?void 0:s.len)&&(k=0);e2(g,Array.from(c).map(function(t){var e=(m-v)*t.value+v,e=D(k2(x,b,e,w,k),2),n=D(e[0],2),r=n[0],n=n[1],e=D(e[1],2);return{x1:r,y1:n,x2:e[0],y2:e[1],id:"tick-".concat(t.id),data:t}}),s);var v,m,b,x,w,k,_="axis-subtick-group",S=B(e,".".concat(_),"g").attr("className",_).node();E=c,T=n,M=r,O=o,P=i,C=d,A=null==l?void 0:l.count,N=null==l?void 0:l.len,void 0===A&&(A=0),void 0===N&&(N=0);e2(S,Array.from(E).map(function(a,s){return Array(A).fill(null).map(function(t,e){var n=(((null==(n=E[s+1])?void 0:n.value)||1+E[0].value)-a.value)/(A+1),n=a.value+n*(e+1),n=D(k2(P,O,(M-T)*n+T,C,N),2),r=D(n[0],2),i=r[0],r=r[1],n=D(n[1],2),o=n[0],n=n[1];return{id:"sub-".concat(a.id,"-").concat(e),x1:i,y1:r,x2:o,y2:n}})}).flat(),l,"sub");var E,T,M,O,P,C,A,N,L="axis-label-group",I=B(e,".".concat(L),"g").attr("className",L).node(),p=(o2(I,S2(c,n,r,o,i,d,u,null==s?void 0:s.len),u),I.querySelectorAll(".axis-label")),R=I.querySelectorAll(".axis-tick");$w(u,d)(p),Jw(p,R,null==u?void 0:u.autoHideTickLine),Qw(e,i[0],i[1],"center","middle",j)}},Yb({startAngle:-90,endAngle:270,center:[0,0],label:{tickPadding:2,style:{},align:"normal"}},c.style||{})),M2=(i(O2,E2=Bh),O2.prototype.connectedCallback=function(){this.render(),this.bindEvents()},O2.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),t.disabled&&(this.active=!1,this.disabled=!0),this.render()},O2.prototype.setState=function(t){"disabled"===t?(this.active=!1,this.disabled=!0):this.disabled=!1,this.render()},O2.prototype.render=function(){var t=this.style,e=t.size,e=void 0===e?8:e,n=t.symbol,r=t.markerStyle,t=t.backgroundStyle,i=D(yx(this.style.margin),4),o=i[0],a=i[1],s=i[2],i=i[3],l=D(yx(this.style.padding),4),u=l[0],c=l[1],h=l[2],l=l[3],c=(e-c-l)/2,h=(e-u-h)/2,a=(B(this,".container","rect").attr("className","container").style("x",-(c+l+i)).style("y",-(h+u+o)).style("width",e+a+i).style("height",e+o+s).style("fill","transparent").style("cursor",this.disabled?"not-allowed":"pointer").style("zIndex",1),t||{}),i=a.active,o=a.disabled,s=I(a,["active","disabled"]),t=(B(this,".background","rect").attr("className","background").style("x",-(c+l)).style("y",-(h+u)).style("width",e).style("height",e).call(N,s).call(N,this.active?i:{}).call(N,this.disabled?o:{}),"function"==typeof n?n:O2.getSymbol(n||"")),a=r||{},l=a.active,u=a.disabled,e=I(a,["active","disabled"]);B(this,".marker","path").attr("className","marker").style("x",0).style("y",0).style("path",null==t?void 0:t(0,0,Math.min(c,h))).call(N,e).call(N,this.active?l:{}).call(N,this.disabled?u:{})},O2.prototype.bindEvents=function(){var e=this,n=k(this).select(".marker"),r=k(this).select(".background");k(this).on("pointerup",function(){e.disabled||(e.active=!0)}),k(this).on("pointermove",function(){var t;e.disabled||(e.active=!0,N(n,null==(t=e.style.markerStyle)?void 0:t.active),N(r,null==(t=e.style.backgroundStyle)?void 0:t.active))}),k(this).on("pointerout",function(){e.disabled||(e.active=!1,N(n,Sf(e.style.markerStyle||{},["active"])),N(r,Sf(e.style.backgroundStyle||{},["active"])))})},O2.MARKER_SYMBOL_MAP=new Map,O2.registerSymbol=function(t,e){O2.MARKER_SYMBOL_MAP.set(t,e)},O2.getSymbol=function(t){return O2.MARKER_SYMBOL_MAP.get(t)},O2);function O2(t){t=E2.call(this,t)||this;return t.active=!1,t.disabled=!1,t.disabled=t.style.disabled||!1,t}M2.registerSymbol("timeline-prev-button",function(t,e,n){return[["M",t+n,e+n],["L",t,e],["L",t+n,e-n],["M",t,e+n],["L",t-n,e],["L",t,e-n]]}),M2.registerSymbol("timeline-next-button",function(t,e,n){return[["M",t,e+n],["L",t+n,e],["L",t,e-n],["M",t-n,e+n],["L",t,e],["L",t-n,e-n]]}),M2.registerSymbol("timeline-play-button",function(t,e,n){return[["M",t+2,e+3],["L",t+2,e-3],["M",t-2,e+3],["L",t-2,e-3]]}),M2.registerSymbol("timeline-stop-button",function(t,e,n){return[["M",t+3,e],["L",t-1.5,e-1.5*Math.sqrt(3)],["L",t-1.5,e+1.5*Math.sqrt(3)],["Z"]]});var a={margin:[2,4],markerStyle:{stroke:"#bfbfbf",active:{stroke:"#3471F9"}},backgroundStyle:{fill:"transparent"}},P2={x:0,y:0,data:[],width:500,height:40,selection:[0,0],orient:"horizontal",singleModeControl:{width:56,size:12,labelStyle:{text:"",fontSize:10,dx:4}},speedControl:{width:32,markerSize:4,speeds:[1,2,3,4,5],labelStyle:{fontFamily:"sans-serif",fill:"rgba(0,0,0,0.45)",fontStyle:"normal",fontWeight:500,fontSize:10,textBaseline:"top"},formatter:function(t){return"".concat(t.toFixed(1),"x")}},controlPosition:"bottom",controlButton:{spacing:14,prevBtn:E(E({},a),{symbol:"timeline-prev-btn",padding:0,size:8}),nextBtn:E(E({},a),{symbol:"timeline-next-btn",padding:0,size:8}),playBtn:{margin:4,padding:0,size:20,symbol:"",markerStyle:{stroke:"#bfbfbf",fill:"#bfbfbf",active:{stroke:"#3471F9",fill:"#3471F9"}},backgroundStyle:{stroke:"#bfbfbf",lineWidth:1,fill:"#F7F7F7",active:{fill:"rgba(52, 113, 249, 0.1)",stroke:"#3471F9"}}}},padding:[0,8],playAxis:{appendPadding:[4,0],handleStyle:{r:3,lineWidth:1},label:{position:1,tickPadding:2,tickLine:{len:4,style:{stroke:"rgba(0,0,0,0.25)",lineWidth:1}},style:{fontSize:10,fillOpacity:1,fill:"rgba(0,0,0,0.45)"}},loop:!1},playInterval:2e3,autoPlay:!1},C2=A({},{x:0,y:0,data:[],length:120,orient:"horizontal",selection:0,selectionStyle:{fill:"#5B8FF9",fillOpacity:.15},loop:!1,playInterval:1e3},P2.playAxis),A2={axisLine:null,label:{autoRotate:!1,rotate:0,autoHide:!0,autoHideTickLine:!1,autoEllipsis:!0,minLength:50,alignTick:!0}};function N2(t,e){void 0===t&&(t=[]);var t=D(Array.of(t).flat(),2),n=t[0],n=void 0===n?0:n,t=t[1];return e?[n,n]:[n,void 0===t?n:t]}i(I2,L2=Bh),I2.prototype.update=function(t){var e=A({},this.attributes,t=void 0===t?{}:t),t=(t.selection&&(this.selection=N2(t.selection,e.singleMode)),t.singleMode&&(this.selection=N2(e.selection,t.singleMode)),this.playTimer);t&&this.stop(),this.attr(e),this.render(),t&&this.play()},I2.prototype.play=function(){var r=this,t=this.style,e=t.data,i=t.loop,o=t.singleMode,a=t.playMode,s=e.length,t=this.style.playInterval;qp(t)&&(t=C2.playInterval),this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(function(){var t,e,n;!i&&r.selection[1]>=s-1?r.stop(!0):o?(t=(r.selection[0]+1)%s,r.setSelection({start:t,end:t})):(t=r.selection[0],n=r.selection[1],e=r.selection[1]-r.selection[0],n=s-1<=n?"increase"===a?t:(t=0,e):("increase"!==a&&(t=(t+1)%s),(n+1)%s),r.setSelection({start:t,end:n}))},t)},I2.prototype.stop=function(t){clearInterval(this.playTimer),this.playTimer=void 0,t&&this.dispatchEvent(new Mh("timelineStopped",{selection:this.selection}))},I2.prototype.prev=function(){var t,e=D(this.selection,2),n=e[0],e=e[1],r=this.style.data.length,r=r&&this.style.singleMode?t=(n-1+r)%r:0===n?(t=r-(e-n)-1,r-1):(t=n-1,e-1);this.setSelection({start:null!=t?t:this.selection[0],end:null!=r?r:this.selection[1]})},I2.prototype.next=function(){var t,e=D(this.selection,2),n=e[0],e=e[1],r=this.style.data.length,r=r&&this.style.singleMode?t=(n+1)%r:e===r-1?(t=0,e-n):(t=n+1,e+1);this.setSelection({start:null!=t?t:this.selection[0],end:null!=r?r:this.selection[1]})},I2.prototype.getSelection=function(){return this.selection},Object.defineProperty(I2.prototype,"orient",{get:function(){return this.style.orient||"horizontal"},enumerable:!1,configurable:!0}),I2.prototype.ifH=function(t,e){return"horizontal"===this.orient?"function"==typeof t?t():t:"function"==typeof e?e():e},I2.prototype.destroy=function(){L2.prototype.destroy.call(this),this.playTimer&&clearInterval(this.playTimer),this.playTimer=void 0};var L2,st=I2;function I2(){var t=null!==L2&&L2.apply(this,arguments)||this;return t.selection=[0,0],t}function R2(t,e){return new mm({domain:t.map(function(t,e){return e}),range:e,padding:.1})}function j2(t,e,n){n=R2(n,[0,e]).getStep(),e=0<t?Math.ceil:Math.floor;return 0<n?e(t/n):0}function D2(t,e,n){return R2(n,[0,e]).map(t)}i(z2,B2=st),z2.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(z2.prototype,"styles",{get:function(){return A({},z2.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),z2.prototype.setSelection=function(t){var e,n,r=t.start,t=t.end,i=this.styles,o=i.data,o=void 0===o?[]:o,i={duration:i.playInterval/2,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",fill:"both"},a=this.ifH("cx","cy"),s=k(this).select(".slider-start-handle").node();void 0!==r&&(n=D2(r,this.style.length,o),this.startHandleAnimation=s.animate([((e={})[a]=s.style[a],e),((s={})[a]=n,s)],i)),void 0!==t&&(e=k(this).select(".slider-end-handle").node(),n=D2(t,this.style.length,o),this.endHandleAnimation=e.animate([((s={})[a]=e.style[a],s),((o={})[a]=n,o)],i)),this.selection=[null!=r?r:this.selection[0],null!=t?t:this.selection[1]],this.dispatchEvent(new Mh("selectionChanged",{detail:{selection:this.selection}}))},z2.prototype.render=function(){var e=this,n=this.styles,t=D(this.ifH([n.length,n.size],[n.size,n.length]),2),r=t[0],i=t[1],t=B(this,".slider-background","line").attr("className","slider-background").style("x1",0).style("y1",0).style("x2",this.ifH(r,0)).style("y2",this.ifH(0,i)).style("lineWidth",n.size).style("lineCap","round").style("stroke",null==(t=n.backgroundStyle)?void 0:t.fill).style("strokeOpacity",null==(t=n.backgroundStyle)?void 0:t.fillOpacity).node(),o=R2(n.data,[0,1]),a=D(this.selection.map(function(t){return o.map(t)}),2),s=a[0],s=void 0===s?0:s,a=a[1],a=void 0===a?s:a,l=this.ifH(s*r,0),u=this.ifH(a*r,0),s=this.ifH(0,s*i),a=this.ifH(0,a*i),c=(B(t,".slider-selection","line").attr("className","slider-selection").style("x1",l).style("y1",s).style("x2",u).style("y2",a).style("lineWidth",n.size).style("lineCap","round").style("stroke",null==(h=n.selectionStyle)?void 0:h.fill).style("strokeOpacity",null==(h=n.selectionStyle)?void 0:h.fillOpacity).style("visibility",n.singleMode?"hidden":"visible").call(N,n.selectionStyle),"running"===(null==(h=this.startHandleAnimation)?void 0:h.playState)&&this.startHandleAnimation.pause(),B(t,".slider-start-handle","circle").attr("className","slider-start-handle").style("cx",l).style("cy",s).call(N,n.handleStyle),"paused"===(null==(h=this.startHandleAnimation)?void 0:h.playState)&&this.startHandleAnimation.play(),"running"===(null==(l=this.endHandleAnimation)?void 0:l.playState)&&this.endHandleAnimation.pause(),B(t,".slider-end-handle","circle").attr("className","slider-end-handle").style("cx",u).style("cy",a).style("visibility",n.singleMode?"hidden":"visible").call(N,n.handleStyle),"paused"===(null==(s=this.endHandleAnimation)?void 0:s.playState)&&this.endHandleAnimation.play(),n.data.map(function(t,e){return{value:o.map(e),text:t.date}})),h=n.label||{},l=h.position,d=void 0===l?-1:l,p=h.tickLine,f=I(h,["position","tickLine"]);B(t,".slider-axis",function(){return new g2({className:"slider-axis"})}).call(function(t){return t.node().update(A({},A2,{startPos:[d*e.ifH(0,r+2),d*e.ifH(i+2,0)],endPos:[e.ifH(r,0)+d*e.ifH(0,r+2),e.ifH(0,i)+d*e.ifH(i+2,0)],ticks:c,verticalFactor:d,tickLine:null===n.label?null:p,label:null===n.label?null:f}))})},z2.prototype.bindEvents=function(){var t=k(this).select(".slider-background"),r=(this.dragHandle(t,"start"),this.dragHandle(t,"end"),this.dragSelection(t),t.select(".slider-selection").node()),e=t.select(".slider-start-handle").node(),t=t.select(".slider-end-handle").node();e.addEventListener(m.ATTR_MODIFIED,function(t){var e=t.attrName,n=t.newValue;t.prevValue,"cx"!==e&&"cy"!==e||(t=parseFloat(n)||0,r.style["cx"===e?"x1":"y1"]=t)}),t.addEventListener(m.ATTR_MODIFIED,function(t){var e=t.attrName,n=t.newValue;t.prevValue,"cx"!==e&&"cy"!==e||(t=parseFloat(n)||0,r.style["cx"===e?"x2":"y2"]=t)})},z2.prototype.dragHandle=function(n,o){function t(t){var e,n,r,i;u&&(u=!1,t=j2(s?l.ifH(t.x-s[0],t.y-s[1]):0,l.style.length,l.style.data),s=void 0,e=(n=D(l.selection,2))[0],n=n[1],r=l.style.data.length-1,"start"===o?e===n&&0<t?(i=of(0,e+t,r),l.setSelection({start:i,end:i})):l.setSelection({start:of(e+t,0,n)}):e===n&&t<0?(i=of(0,n+t,r),l.setSelection({start:i,end:i})):l.setSelection({end:of(n+t,e,r)}),l.playTimer&&l.play())}var a,s,l=this,u=!1;n.on("pointerdown",function(t){l.playTimer&&clearInterval(l.playTimer);var e=n.select(".slider-".concat(o,"-handle")).node();t.target===e&&(u=!0,s=[t.x,t.y],a=[t.x,t.y])}.bind(this)).on("pointerup",t).on("mouseupoutside",t).on("touchendoutside",t).on("pointermove",function(t){var e,n,r,i;u&&(e=l.styles.length,n=k(l).select(".slider-".concat(o,"-handle")).node(),r=l.ifH(t.x-a[0],t.y-a[1]),i=n.getLocalPosition(),"vertical"===l.orient?n.style.cy=of(i[1]+r,0,e):n.style.cx=of(i[0]+r,0,e),a=[t.x,t.y])})},z2.prototype.dragSelection=function(t){function e(t){l.playTimer&&clearInterval(l.playTimer),t.target===o&&(h=!0,i=[t.x,t.y],s=[t.x,t.y])}function n(t){var e;h&&(h=!1,t=j2(i?l.ifH(t.x-i[0],t.y-i[1]):0,l.style.length,l.style.data),i=void 0,e=l.selection[1]-l.selection[0],t=of(l.selection[1]+t,e,l.style.data.length-1),l.setSelection({start:t-e,end:t}),l.playTimer&&l.play())}function r(t){var e,n,r,i,o,a;h&&(e=l.styles.length,n=l.ifH(t.x-s[0],t.y-s[1]),r=(a=D(u.getLocalPosition(),2))[0],a=a[1],i=(o=D(c.getLocalPosition(),2))[0],o=o[1],"vertical"===l.orient?(u.style.cy=of(a+n,0,e-(o=o-a)),c.style.cy=u.style.cy+o):(a=i-r,u.style.cx=of(r+n,0,e),c.style.cx=u.style.cx+a),s=[t.x,t.y])}var s,i,l=this,o=t.select(".slider-selection").node(),u=t.select(".slider-start-handle").node(),c=t.select(".slider-end-handle").node(),h=!1;t.on("mousedown",e.bind(this)).on("touchstart",e.bind(this)).on("mouseup",n.bind(this)).on("mouseupoutside",n.bind(this)).on("touchend",n.bind(this)).on("touchendoutside",n.bind(this)).on("mousemove",r.bind(this)).on("touchmove",r.bind(this))},z2.defaultOptions={style:A({},C2,{tag:"slider-axis",size:3,handleStyle:{r:3,stroke:"#8AADF3",strokeOpacity:.75,lineWidth:1,fill:"#fff",fillOpacity:1},backgroundStyle:{fill:"#416180",fillOpacity:.1},selectionStyle:{cursor:"grabbing"}})};var B2,F2=z2;function z2(t){t=B2.call(this,A({},z2.defaultOptions,t))||this;return t.startHandleAnimation=null,t.endHandleAnimation=null,t.selection=N2(t.style.selection,t.style.singleMode),t}function V2(t,e){return new mv({domain:t.map(function(t,e){return e}),range:e,paddingOuter:0,paddingInner:0})}i(W2,G2=st),W2.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(W2.prototype,"styles",{get:function(){return A({},W2.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),W2.prototype.setSelection=function(t){var e,n=D(this.selection,2),r=n[0],n=n[1];this.selection=N2([null!=(e=t.start)?e:r,null!=(e=t.end)?e:n],this.style.singleMode),this.dispatchEvent(new Mh("selectionChanged",{detail:{selection:this.selection}})),this.render()},W2.prototype.render=function(){var i=this,r=this.styles,o=r.size,a=r.spacing,t=D(this.ifH(["x","y","width","height"],["y","x","height","width"]),4),s=t[0],l=t[1],u=t[2],c=t[3],t=B(this,".slider-background","rect").attr("className","slider-background").style("x",0).style("y",0).style(u,r.length).style(c,o+a).call(N,r.backgroundStyle).node(),h=this.getCellScale(),d=h.getBandWidth(),e=r.data.map(function(t,e){var n;return E(((n={})[s]=h.map(e),n[l]=a/2,n[u]=d-r.cellGap,n[c]=o,n),r.cellStyle)}),e=(k(t).selectAll(".cell").data(e).join(function(t){return t.append("rect").attr("className","cell").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()}),e.filter(function(t,e){var n=D(i.selection,2),r=n[0],n=n[1];return r<=e&&e<=n}).map(function(t){return E(E({},t),r.selectionStyle)})),n={duration:this.style.playInterval/2,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",fill:"both"},p=(k(t).selectAll(".selected-cell").data(e).join(function(t){return t.append("rect").attr("className","selected-cell").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.animate([t],n)})},function(t){return t.remove()}),r.length-2*r.spacing+r.cellGap),f=V2(r.data,[0,p]),y=r.data.map(function(t,e){return{value:(f.map(e)+(d-r.cellGap)/2)/p,text:t.date}}),e=r.label||{},g=e.position,v=void 0===g?-1:g,m=e.tickLine,b=I(e,["position","tickLine"]),g=-1===v?-2:r.spacing+o+2,x=[r.spacing,g],w=[a+p,g];"vertical"===this.orient&&(x=[x[1],x[0]],w=[w[1],w[0]]),B(t,".slider-axis",function(){return new g2({className:"slider-axis",style:A2})}).call(function(t){return t.node().update({startPos:x,endPos:w,ticks:y,verticalFactor:v,tickLine:null===r.label?null:m,label:null===r.label?null:b})})},W2.prototype.bindEvents=function(){this.dragSelection()},W2.prototype.getCellScale=function(){var t=this.styles.cellGap,e=this.styles.length,n=this.styles.spacing;return V2(this.style.data,[n,e-n+t])},W2.prototype.dragSelection=function(){function t(){r=!1,i.playTimer&&i.play()}var n,i=this,o=k(this).select(".slider-background"),r=!1,a=this.styles.spacing,s=function(t){var e=D(o.node().getPosition(),2),n=e[0],e=e[1],n=i.ifH(n+4,e+a),e=i.styles.cellGap,r=i.getCellScale().getStep();return Math.floor((t-n+e)/r)};o.on("pointerdown",function(t){i.playTimer&&clearInterval(i.playTimer),r=!0,n=i.ifH(t.x,t.y);t=s(n);i.setSelection({start:t,end:t})}).on("pointerup",t).on("mouseupoutside",t).on("touchendoutside",t).on("pointermove",function(t){var e;r&&(t=s(i.ifH(t.x,t.y)),e=(t=D((e=n?s(n):t)<t?[e,t]:[t,e],2))[0],t=t[1],i.setSelection({start:e,end:t}))})},W2.defaultOptions={style:A({},C2,{tag:"cell-axis",backgroundStyle:{fill:"#416180",fillOpacity:.05},size:16,spacing:4,cellGap:2,cellStyle:{fill:"#416180",fillOpacity:.1},selectionStyle:{fillOpacity:.45},label:{autoHideTickLine:!0}})};var G2,H2=W2;function W2(t){t=G2.call(this,A({},W2.defaultOptions,t))||this;return t.selection=N2(t.style.selection,t.style.singleMode),t}function U2(t,e){return[1.43,2.79,4.89,7.57,11.66][t]/11.66*e}var Y2,r=A({},P2.speedControl,{markerFill:"#8c8c8c",spacing:1,lineStyle:{stroke:"#bfbfbf",lineWidth:1}}),q2=(i(X2,Y2=Bh),X2.prototype.connectedCallback=function(){this.render(),this.bindEvents()},X2.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),this.render()},Object.defineProperty(X2.prototype,"styles",{get:function(){return A({},X2.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),X2.prototype.render=function(){var t=this.styles,e=t.initialSpeed,n=t.markerSize,r=t.markerFill,i=t.lineStyle,o=t.speeds,a=t.labelStyle,s=t.spacing,t=t.formatter,t=void 0===t?function(t){return"".concat(t)}:t,e=o.indexOf(e),l=2*n,u=U2(e=-1===e?0:e,2*l),c=n*Math.tan(Math.PI/6)*2,r=(B(this,".speed-marker","path").attr("className","speed-marker").style("fill",r).style("path",[["M",0,u-c/2],["L",n,u],["L",0,u+c/2],["Z"]]),n-.5),u=B(this,".line-group","rect").attr("className","line-group").style("x",r).style("y",0).style("width",l).style("height",2*l).style("cursor","pointer").style("fill","transparent").node(),c=o.reduce(function(t,e,n){n=U2(n,2*l);return t.push(["M",0,n],["L",l,n]),t},[]);B(u,".speed-path","path").attr("className","speed-path").style("path",c).call(N,i),B(this,".speed-label","text").attr("className","speed-label").style("x",r+l+s).style("y",2).style("text",t(o[e])).call(N,a)},X2.prototype.bindEvents=function(){var e=this,t=this.querySelector(".line-group");t.addEventListener("pointerdown",function(t){return e.onClick(t)}),t.addEventListener("touchmove",function(t){return e.onClick(t)})},X2.prototype.onClick=function(t){var o,e=this.styles,a=e.speeds,n=e.markerSize,e=e.formatter,e=void 0===e?function(t){return"".concat(t)}:e,s=2*n*2,n=this.querySelector(".line-group"),r=k(this).select(".speed-label").node(),i=k(this).select(".speed-marker").node();t.currentTarget===n&&(o=t.y-n.getBBox().y,-1!==(t=a.findIndex(function(t,e){var n=U2(e,s),r=U2(e-1,s),i=U2(e+1,s);if(0===e)return o<n+(U2(1,s)-n)/2;if(e===a.length-1)return n-(n-r)/2<o;e=[n-(n-r)/2,n+(i-n)/2];return e[0]<=o&&o<e[1]}))&&(r.setAttribute("text",e(a[t])),i.setLocalPosition(0,U2(t,s)-s/8),this.dispatchEvent(new Mh("speedChanged",{detail:{speed:a[t]}}))))},X2.defaultOptions={type:X2.tag="speed-control",style:r},X2);function X2(t){return Y2.call(this,A({},X2.defaultOptions,t))||this}i(J2,Z2=Bh),J2.prototype.connectedCallback=function(){this.render(),this.bindEvents()},Object.defineProperty(J2.prototype,"styles",{get:function(){return A({},J2.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),J2.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),qp(t.active)||(this.active=t.active),this.render()},J2.prototype.render=function(){var t,e=this.styles,n=e.size,r=e.buttonStyle,i=e.labelStyle,e=e.symbol,o=r.active,r=I(r,["active"]),r=B(this,".button","rect").attr("className","button").style("x",0).style("y",0).style("width",n).style("height",n).call(N,r).call(N,this.active?o:{}).node();B(r,".symbol","path").attr("className","symbol").style("x",n/2).style("y",n/2).style("path",[["M",(o=n/2)-(t=r=n/2)/7*4,r-t/14],["L",o-t/7,r+t/7*3],["L",o+t/7*4,r-t/7*3]]).style("lineWidth",1).style("lineCap","round").style("stroke","transparent").style("cursor","pointer").call(N,this.active?null==e?void 0:e.active:{}),B(this,".label","text").attr("className","label").style("x",n).style("y",n/2).call(N,i)},J2.prototype.bindEvents=function(){var t=this;k(this).select(".button").on("pointerdown",function(){t.dispatchEvent(new Mh("singleModeChanged",{detail:{active:!t.active}}))})},J2.defaultOptions={style:{size:12,buttonStyle:{fill:"transparent",stroke:"#000",strokeOpacity:.15,cursor:"pointer",lineWidth:1,radius:2,active:{stroke:"#3471F9",fill:"#3471F9",strokeOpacity:1}},symbol:{active:{stroke:"#fff"}},labelStyle:{text:"",textAlign:"left",textBaseline:"middle",fill:"#000",fillOpacity:.65},cursor:"pointer"}};var Z2,K2,$2=J2;function J2(t){t=Z2.call(this,A({},J2.defaultOptions,t))||this;return t.active=!1,t.active=t.style.active||!1,t}function Q2(t,e,n){var n=A({},P2,n),r=n.type,i=n.playAxis,o=n.controlButton,a=n.speedControl,s=n.singleModeControl,l=(null==(l=null==i?void 0:i.label)?void 0:l.position)||-1,u=null!=(u=null==i?void 0:i.spacing)?u:(null==(u=null==(u=H2.defaultOptions)?void 0:u.style)?void 0:u.spacing)||0,c=(null==i?void 0:i.size)||("cell"===r?null==(c=null==(c=H2.defaultOptions)?void 0:c.style)?void 0:c.size:null==(c=null==(c=F2.defaultOptions)?void 0:c.style)?void 0:c.size)||4,u=(c+="cell"===r?u:0,D(yx(null==i?void 0:i.appendPadding),4)),h=u[0],d=u[1],p=u[2],u=u[3],f=(null==o?void 0:o.spacing)||0,y=pf(o)||pf(null==o?void 0:o.playBtn)?0:null==(y=null==o?void 0:o.playBtn)?void 0:y.size,g=pf(o)||pf(null==o?void 0:o.prevBtn)?0:null==(g=null==o?void 0:o.prevBtn)?void 0:g.size,o=pf(o)||pf(null==o?void 0:o.nextBtn)?0:null==(o=null==o?void 0:o.nextBtn)?void 0:o.size,v=y/2+g/2+f,m=y/2+o/2+f,b=null===a?0:null==a?void 0:a.markerSize,x=2*b,a=null===a?0:null==a?void 0:a.width,w=2*x+b/2,k=null===s?0:null==s?void 0:s.width,s=null===s?0:(null==s?void 0:s.size)+2;if("vertical"===n.orient)return{axis:{x:(n=u+(-1===l?30:0))+("cell"===r?0:c/2),y:E=(S=g+f+y/2)+y/2+f+h,length:(_=(T=(M=e-s)-4-w)-f-o/2)-f-o/2-p-E},prevBtn:{x:E=n+c/2,y:g/2,size:g},playBtn:{x:E,y:S,size:y},nextBtn:{x:E,y:_,size:o},speedControl:{x:n-a/2,y:T,size:a},singleModeControl:{x:0,y:M}};var _,S=e-k,E=S-8-a,T=(_=i,(_=A({},P2.playAxis,_).label)?((null==(n=_.tickLine)?void 0:n.len)||0)+(_.tickPadding||0)+(Number(_.style.fontSize)||0)+2:0),M=(-1===l?T:0)+("cell"===r?0:c/2)+h;if("bottom"===t)return{axis:{x:u,y:M,length:e-(u+d)},playBtn:{x:k=e/2,y:i=M+(1===l?T:0)+c+y/2+p,size:y},prevBtn:{x:k-v,y:i,size:g},nextBtn:{x:k+m,y:i,size:o},speedControl:{x:E,y:n=M+(1===l?T:0)+c+p,size:a},singleModeControl:{x:S,y:n+x-s/2}};h="cell"===r?M+c/2:M,e="cell"===r&&-1===l?T+c-w:1===l?M+b/2:M-w;if("left"===t)return{axis:{x:n=(p=(i=(k=g/2)+v)+m)+o/2+u,y:M,length:E-d-n},prevBtn:{x:k,y:h,size:g},playBtn:{x:i,y:h,size:y},nextBtn:{x:p,y:h,size:o},speedControl:{x:E,y:e,size:a},singleModeControl:{x:S,y:e+x-s/2}};r=E-(o/2+f),T=r-m,c=T-v;return{axis:{x:u,y:M,length:c-g/2-d-u},playBtn:{x:T,y:h,size:y},prevBtn:{x:c,y:h,size:g},nextBtn:{x:r,y:h,size:o},speedControl:{x:E,y:e,size:a},singleModeControl:{x:S,y:e+x-s/2}}}function tk(t){t=K2.call(this,A({},{style:P2},t))||this;return t.speed=1,t.singleMode=!1,t.playing=!1,t.selection=[0,0],t.singleMode=t.style.singleMode||!1,t.selection=N2(t.style.selection,t.singleMode),t}function ek(t){var e,n={left:0,top:0,width:0,height:0};return"html"===(null==t?void 0:t.tagName)?n={left:0,top:0,width:(e=t.style).width,height:e.height}:t&&(t=(e=t.getLocalBounds()).min,e=e.halfExtents,n={left:t[0],top:t[1],width:2*e[0],height:2*e[1]}),{left:0,top:0,right:n.width,bottom:n.height}}function nk(t,n){var e;if(!n)return(e=t.querySelector(".legend-title"))&&e.remove(),null;var r=n.useHTML,i=n.style,o="legend-title ".concat(r?"html":"text","-title"),a="<span>".concat((null==n?void 0:n.content)||"","</span>");return B(t,".".concat(o),function(){return r?new ad({className:o,style:{innerHTML:a}}):new id({className:o,style:i})}).call(function(t){var e;r?t.style("width",null!=(e=n.width)?e:80).style("height",null!=(e=n.height)?e:20).style("innerHTML",a):t.style("fontSize",12).style("textBaseline","top").style("text",n.content||"")}).call(N,i).node()}function rk(t,e,n,r){return B(t,".".concat(e),"g").attr("className",e).style("x",n).style("y",r).node()}function ik(t,e,n,r,i){B(t,".".concat(e),"rect").attr("className",e).style("zIndex",-1).style("width",n).style("height",r).call(N,i||{}).node()}i(tk,K2=Bh),tk.prototype.connectedCallback=function(){this.render(),this.bindEvents()},tk.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),void 0!==t.singleMode&&(this.singleMode=t.singleMode),t.selection&&(this.selection=N2(t.selection,this.singleMode)),this.render()},Object.defineProperty(tk.prototype,"styles",{get:function(){return A({},P2,this.attributes)},enumerable:!1,configurable:!0}),tk.prototype.render=function(){var e=this,t=this.styles,n=t.width,r=t.height,i=t.controlPosition,o=t.speedControl,a=t.singleModeControl,t=D(yx(this.styles.padding),4),s=t[0],s=void 0===s?0:s,l=t[1],l=void 0===l?0:l,u=t[2],t=t[3],t=void 0===t?l:t,c=B(this,".container","g").attr("className","container").style("x",t).style("y",s).node(),h=Q2(i,"vertical"===this.style.orient?r-(s+u):n-(t+l),this.styles);this.renderAxis(c,h),this.renderControlButton(c,h),B(c,".timeline-speed-control",function(){return new q2({})}).attr("className","timeline-speed-control").call(function(t){null===o?t.remove():t.node().update(E(E({x:h.speedControl.x,y:h.speedControl.y},o),{initialSpeed:e.speed}))}),B(c,".timeline-single-control",function(){return new $2({})}).attr("className","timeline-single-control").call(function(t){null===a?t.remove():t.node().update(E(E({x:h.singleModeControl.x,y:h.singleModeControl.y},a),{active:e.singleMode}))})},tk.prototype.renderAxis=function(t,e){var n=this,r=this.styles.data,i=this.styles.type||"slider",o=k(t).select(".timeline-axis").node(),a="cell"===i?H2:F2;o&&o.style.tag!=="".concat(i,"-axis")&&(o.remove(),this.removeChild(o)),B(t,".timeline-axis",function(){return new a({})}).attr("className","timeline-axis").call(function(t){t.node().update(E({x:e.axis.x,y:e.axis.y,length:e.axis.length,data:r,selection:n.selection,orient:n.style.orient,playInterval:n.style.playInterval/n.speed,singleMode:n.singleMode},n.style.playAxis||{})),t.node().update({handleStyle:{cursor:"vertical"===n.style.orient?"ns-resize":"ew-resize"}})}).node()},tk.prototype.renderControlButton=function(t,n){var e,r=this,i=n.playBtn.size||0,o=n.prevBtn.size||0,a=(null==(e=n.nextBtn)?void 0:e.size)||0;B(t,".timeline-prev-btn",function(){return new M2({})}).attr("className","timeline-prev-btn").call(function(t){var e;o?(t.node().update(E(E({},(null==(e=r.style.controlButton)?void 0:e.prevBtn)||{}),{x:n.prevBtn.x,y:n.prevBtn.y,size:o,symbol:"timeline-prev-button"})),t.node().update({markerStyle:{transformOrigin:"center",transform:"vertical"===r.style.orient?"rotate(90deg)":""}})):t.remove()}),B(t,".timeline-play-btn",function(){return new M2({})}).attr("className","timeline-play-btn").call(function(t){var e;i?(t.node().update({backgroundStyle:{radius:(n.playBtn.size||0)/2}}),t.node().update(E(E({},(null==(e=r.style.controlButton)?void 0:e.playBtn)||{}),{x:n.playBtn.x,y:n.playBtn.y,size:i,symbol:r.playing?"timeline-play-button":"timeline-stop-button"}))):t.remove()}),B(t,".timeline-next-btn",function(){return new M2({})}).attr("className","timeline-next-btn").call(function(t){var e;a?(t.node().update(E(E({},(null==(e=r.style.controlButton)?void 0:e.nextBtn)||{}),{x:n.nextBtn.x,y:n.nextBtn.y,size:a,symbol:"timeline-next-button"})),t.node().update({markerStyle:{transformOrigin:"center",transform:"vertical"===r.style.orient?"rotate(90deg)":""}})):t.remove()}),this.style.autoPlay&&!this.playing&&(this.playing=!0,k(this).select(".timeline-axis").call(function(t){return null==(t=t.node())?void 0:t.play()}),k(this).select(".timeline-play-btn").call(function(t){return null==(t=t.node())?void 0:t.update({symbol:"timeline-play-button"})})),!this.style.autoPlay&&this.playing&&(this.playing=!1,k(this).select(".timeline-axis").call(function(t){return null==(t=t.node())?void 0:t.stop()}),k(this).select(".timeline-play-btn").call(function(t){return null==(t=t.node())?void 0:t.update({symbol:"timeline-stop-button"})}))};var b={style:{x:0,y:0,padding:0,orient:"horizontal",backgroundStyle:{fill:"transparent",lineWidth:0},title:{content:"",spacing:4,align:"left",style:{fontWeight:"bold",fontFamily:"sans-serif",fontSize:12,textAlign:"top",textBaseline:"top",fill:"#2C3542"}},label:{style:{fill:"#2C3542",fillOpacity:.65,fontSize:12}}}},ok={symbol:"circle",size:8},ak={style:{inactive:{fill:"#d3d2d3",opacity:.5}}},sk={style:{inactive:{fill:"#d3d2d3",opacity:.5}}},lk=A({},b,{style:{type:"category",items:[],maxWidth:void 0,maxHeight:void 0,maxCols:void 0,maxRows:void 0,spacing:[8,2],itemBackground:{padding:0,style:{fill:"transparent",active:{cursor:"pointer"}}},reverse:!(tk.prototype.bindEvents=function(){var e=this,n=k(this).select(".timeline-axis").node(),r=k(this).select(".timeline-play-btn").node();r&&k(r).on("pointerdown",function(t){e.playing?(e.playing=!1,n.stop(),r.update({symbol:"timeline-stop-button"})):(e.playing=!0,n.play(),r.update({symbol:"timeline-play-button"}))}),k(this).on("timelineStopped",function(){e.playing=!1,null!=r&&r.update({symbol:"timeline-stop-button"})}),k(this).on("speedChanged",function(t){e.speed=t.detail.speed,n.update({playInterval:e.style.playInterval/e.speed})}),k(this).select(".timeline-prev-btn").on("pointerdown",function(){return n.prev()}),k(this).select(".timeline-next-btn").on("pointerdown",function(){return n.next()}),k(this).on("singleModeChanged",function(t){e.singleMode=t.detail.active,e.selection=N2(e.selection,e.singleMode),e.render()}),k(this).on("selectionChanged",function(t){e.selection=t.detail.selection})}),pageNavigator:{loop:!1}}}),uk={width:100,height:20,type:"color",chunked:!1,ticks:[],isGradient:"auto",backgroundColor:"#c5c5c5"},ck={spacing:4,formatter:function(t){return String(t)},align:"rail",flush:!0,maxLength:30},hk={size:25,stroke:"#c5c5c5",fill:"#fff",lineWidth:1},dk=A({},b,{style:{type:"continuous",color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],label:ck,rail:uk,slidable:!0,indicator:{size:8,spacing:10,padding:5,backgroundStyle:{fill:"#262626","background-color":"#262626","border-radius":"5px"},text:{style:{color:"white","font-size":"12px"}}}}}),pk="legend-item-";function fk(t,e){t&&(t.setAttribute("tip",t.style.text),null!=t&&t.attr("text",e||""))}function yk(n,t){return void 0===n&&(n={}),(t=void 0===t?"":t).split("-").reduce(function(t,e){return E(E({},t),kf(n,e,{}))},{})}i(mk,gk=V),mk.prototype.setState=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=new Set((this.state||"").split("-"));e?n.add(t):n.delete(t),this.state=T([],D(n),!1).join("-"),this.update()},mk.prototype.getState=function(){return this.state},mk.prototype.update=function(t){gk.prototype.update.call(this,t=void 0===t?{}:t),t.state&&(this.state=t.state)},Object.defineProperty(mk.prototype,"styles",{get:function(){return A({},mk.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),mk.prototype.render=function(t,e){var n,r,i,o,a,s,l=this,u=this.styles,c=u.backgroundStyle,h=u.itemMarker,d=u.padding,p=u.itemName,f=u.itemValue,u=u.maxItemWidth,y=this.styles.itemHeight,d=D(yx(d),4),g=d[0],v=d[1],m=d[2],d=d[3],b=Number((null==h?void 0:h.size)||0),x=(qp(y)&&(y=Math.max.call(null,b,Number((null==(x=null==p?void 0:p.style)?void 0:x.fontSize)||0),Number((null==(x=null==f?void 0:f.style)?void 0:x.fontSize)||0))+(g+m)),B(this,".".concat(pk,"container"),"g").attr("className","".concat(pk,"container")).style("x",d).style("y",y/2).node()),w=(B(x,".".concat(pk,"marker"),function(){return new L({})}).attr("className","".concat(pk,"marker")).call(function(t){h?t.node().update(E(E({x:b/2,y:0,size:b,symbol:h.symbol},h.style||{}),yk(h.style,l.state))):t.remove()}),b?b+((null==p?void 0:p.spacing)||0):0),g=B(x,".".concat(pk,"name"),"text").attr("className","".concat(pk,"name")).call(function(t){p?t.node().attr(E(E({x:w,y:0,tip:"",text:(null==p?void 0:p.content)||"",textBaseline:"middle",textAlign:"left"},p.style||{}),yk(p.style,l.state))):t.remove()}).node(),k=w,m=(g&&!g.destroyed&&(k=g.getLocalBounds().max[0]),B(x,".".concat(pk,"value"),"text").attr("className","".concat(pk,"value")).call(function(t){f?t.node().attr(E(E(E({x:k+(f.spacing||0),y:0,tip:"",text:(null==f?void 0:f.content)||"",textAlign:"left"},f.style||{}),yk(f.style,l.state)),{textBaseline:"middle"})):t.remove()}).node()),_=(qp(u)||(g=null!=g&&g.destroyed?null:g,m=null!=m&&m.destroyed?null:m,n=u-w-(d+v),(g||m)&&"number"==typeof n&&(Number(n)<=0?(fk(g,""),fk(m,"")):g&&m?(a=g.getLocalBounds(),i=m.getLocalBounds(),n<(r=2*a.halfExtents[0])+(_=2*i.halfExtents[0])+(i=r&&_?i.min[0]-a.max[0]:0)&&(o=(a=D([.5*n,.5*n],2))[0],a=a[1],s=S=!0,r<=o?(a=n-(r+i),S=!1):_<=a&&(o=n-(_+i),s=!1),S&&(fk(g,rx(g.style.text,o,ax(g))),m.attr("x",Number(g.style.x)+o+i)),s&&fk(m,rx(m.style.text,a,ax(m))))):n<2*(r=g||m).getLocalBounds().halfExtents[0]&&fk(r,rx(r.style.text,n,ax(r))))),x.getLocalBounds()),S=Math.max(2*_.halfExtents[0]+v+d,this.styles.itemWidth||0);qp(u)||(S=Math.min(u,S)),B(this,".".concat(pk,"background"),"rect").attr("className","".concat(pk,"background")).style("x",_.min[0]-d).style("y",0).style("width",S).style("height",y).style("zIndex",-1).call(N,c).call(N,yk(c,this.state))},mk.defaultOptions={style:{id:"",value:{},itemMarker:{size:8,symbol:"circle",style:{fill:"#d3d2d3",fillOpacity:1,lineWidth:0,active:{cursor:"pointer"}}},itemName:{spacing:4,style:{fontFamily:"sans-serif",fill:"#646464",fontSize:12,opacity:1,active:{cursor:"pointer"}}},itemValue:{spacing:4,style:{fontFamily:"sans-serif",fill:"#646464",opacity:1,fontSize:12,active:{cursor:"pointer"}}}}};var gk,vk=mk;function mk(t){t=gk.call(this,A({},mk.defaultOptions,t))||this;return t.state="default",t.state=t.style.state||"selected",t}function bk(t,o,a){void 0===a&&(a=0);var s=0,l=0,u=0;return t.reduce(function(t,e){var n=D(e.getLocalBounds().halfExtents,2),r=n[0],n=n[1],i="horizontal"===o?[t,0]:[0,t];return e.setLocalPosition(i[0],i[1]),l=Math.max(l,2*n),u=Math.max(u,2*r),(s="horizontal"===o?t+2*r:t+2*n)+a},0),{totalSize:s,maxItemWidth:u,maxItemHeight:l}}M2.registerSymbol("left",function(t,e,n){return[["M",t-n*Math.sin(Math.PI/3),e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]}),M2.registerSymbol("right",function(t,e,n){return[["M",t-n,e-n],["L",t+n*Math.sin(Math.PI/3),e],["L",t-n,e+n],["Z"]]}),M2.registerSymbol("up",function(t,e,n){return[["M",t-n,e+n],["L",t,e-n*Math.sin(Math.PI/3)],["L",t+n,e+n],["Z"]]}),M2.registerSymbol("down",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t,e+n*Math.sin(Math.PI/3)],["Z"]]});i(kk,xk=Bh),kk.prototype.connectedCallback=function(){this.container=this.appendChild(new Wh),this.clipView=new Kh({style:{path:[]}}),this.render(),this.bindEvents()},kk.prototype.update=function(t){this.attr(A({},this.attributes,t=void 0===t?{}:t)),this.render()},Object.defineProperty(kk.prototype,"styles",{get:function(){return A({},kk.defaultOptions.style,this.attributes)},enumerable:!1,configurable:!0}),kk.prototype.render=function(){this.renderButtonGroup();var t=this.style.items,t=void 0===t?[]:t;this.items=k(this.container).selectAll(".legend-item").data(t||[],function(t,e){return t.id||e}).join(function(t){return t.append(function(t){return new vk({id:t.id,className:"legend-item",style:t})})},function(t){return t.each(function(t){this.update(t)})},function(t){return t.remove()}).nodes(),this.adjustLayout()},kk.prototype.bindEvents=function(){this.prevButton.addEventListener("pointerdown",this.prev.bind(this)),this.nextButton.addEventListener("pointerdown",this.next.bind(this))},kk.prototype.ifHorizontal=function(t,e){return"vertical"===this.style.orient?"function"==typeof e?e():e:"function"==typeof t?t():t},kk.prototype.renderButtonGroup=function(){var t=this.styles,e=t.pageButtonStyle,n=void 0===e?{}:e,e=t.pageTextStyle,t=B(this,".page-button-group",function(){return new Wh({className:"page-button-group"})}).node(),r="page-prev-button",i="page-next-button";this.prevButton=B(t,"#".concat(r),function(){return new M2({})}).attr("id",r).attr("className","page-button").attr("zIndex",2).call(function(t){t.node().update(n)}).node(),B(t,".page-info","text").attr("className","page-info").call(N,e),this.nextButton=B(t,"#".concat(i),function(){return new M2({})}).attr("id",i).attr("className","page-button").attr("zIndex",2).call(function(t){t.node().update(n)}).node(),this.updatePageButtonSymbol()},Object.defineProperty(kk.prototype,"pageInfoBounds",{get:function(){var t=this.querySelector(".page-info");if(!t)return{width:0,height:0};var e=this.styles,n=e.pageFormatter,e=e.pageInfoSpacing,r=t.style.visibility,n=(t.style.visibility="hidden",t.style.text=n(1,this.styles.items.length),D(t.getLocalBounds().halfExtents,2)),i=n[0],n=n[1];return t.style.visibility=r,{width:2*(i+e),height:2*(n+e)}},enumerable:!1,configurable:!0}),kk.prototype.layoutButton=function(t){var e,n=this.style.pageInfoSpacing,r=this.pageInfoBounds.height,n=this.pageInfoBounds.width+2*(void 0===n?0:n),i=D(this.querySelector(".page-button-group").childNodes,3),o=i[0],a=i[1],i=i[2];"horizontal"===t?(t=2*o.getLocalBounds().halfExtents[0],e=2*i.getLocalBounds().halfExtents[0],o.style.x=t/2,i.style.x=t+n+e/2,a.style.x=(Number(o.style.x)+Number(i.style.x))/2,o.style.y=0,i.style.y=0,a.style.y=0):(t=2*o.getLocalBounds().halfExtents[1],n=2*i.getLocalBounds().halfExtents[1],o.style.y=-(r+t)/2,i.style.y=(r+n)/2,a.style.y=0,e=this.pageInfoBounds.width/2,o.style.x=e,i.style.x=e,a.style.x=e)},kk.prototype.showButtonGroup=function(){this.querySelector(".page-button-group").style.visibility="visible"},kk.prototype.resetPageCfg=function(){this.querySelector(".page-button-group").style.visibility="hidden",this.container.style.clipPath=null,this.currPage=void 0,this.maxPages=void 0,this.pageOffsets=[],this.container.style.transform="translate(0,0)",this.clipView&&(this.clipView.style.transform="translate(0,0)")},kk.prototype.adjustLayout=function(){var t,e,n,r;this.resetPageCfg(),this.items.length<=1||(t=(n=D(yx(this.style.spacing),2))[0],n=n[1],t=this.ifHorizontal(t,n),t=(n=bk(this.items,this.style.orient||"horizontal",t)).totalSize,e=n.maxItemWidth,n=n.maxItemHeight,r=this.ifHorizontal(this.style.maxWidth,this.style.maxHeight),!qp(r)&&r!==1/0&&r<t&&(this.style.autoWrap&&"vertical"!==this.style.orient?(this.layoutButton("vertical"),this.adjustHorizontalWrap(e,n,r)):(this.layoutButton("horizontal"),this.adjustFlip(e,n,r))))},kk.prototype.adjustFlip=function(t,e,n){this.showButtonGroup();var r=this.querySelector(".page-button-group"),i=this.style.pageSpacing,o=this.prevButton.style.size||kk.defaultOptions.style.pageButtonSize,a=r.getLocalBounds(),s=2*a.halfExtents[0],a=2*a.halfExtents[1],e=D(this.ifHorizontal([n-(s+i),e],[t,n-(a+i)]),2),l=e[0],u=e[1];this.clipView.style.path="M-1,0 L".concat(l,",0 L").concat(l,",").concat(u," L-1,").concat(u," Z"),this.container.style.clipPath=this.clipView,r.style.x=this.ifHorizontal(n-s,0),r.style.y=this.ifHorizontal(u/2-1,u+o+i);for(var c="x"===this.ifHorizontal("x","y")?0:1,h=[0],d=1,p=0;p<this.items.length;p++){var f=this.items[p].getLocalBounds(),y=f.min;f.max[c]-rf(h)>this.ifHorizontal(l,u)+4&&(0!==y[c]&&h.push(y[c]),d+=1)}this.maxPages=d,this.currPage=1,this.pageOffsets=h,this.updatePageNavigatorState()},kk.prototype.adjustHorizontalWrap=function(t,u,e){this.showButtonGroup();var n,r=this.querySelector(".page-button-group"),i=this.style,o=i.pageSpacing,o=void 0===o?0:o,a=i.cols,i=this.pageInfoBounds.width,c=this.style.maxRows||2,s=r.getLocalBounds(),s=Math.max(2*s.halfExtents[0],i),i=e-(s+o),l=u*c;function h(t,e){for(var n=1,r=0,i=[0],o=0;o<e.length;o++){var a=e[o],s=a.getLocalBounds(),l=s.min;s.max[0]-r>t&&(n+=1,r=l[0],n%c==1&&i.push((n-1)*u)),a.setLocalPosition(l[0]-r,(n-1)*u)}return i}a&&c&&(a*c<=this.items.length&&(i=e),n=e/a),this.clipView.style.path="M-1,0 L".concat(i,",0 L").concat(i,",").concat(l," L-1,").concat(l," Z"),this.container.style.clipPath=this.clipView;var d=[];if(a&&n)for(var p=D(yx(this.style.spacing),1)[0],f=0,y=0,g=0;g<this.items.length;g+=a){y=0,(f+=1)%c==1&&d.push(Math.floor(f/c)*l);for(var v=0;v<a&&g+v<this.items.length;v++)this.items[g+v].update({x:y,y:(f-1)*u,maxItemWidth:n-p}),y+=n}else 1===(d=h(i,this.items)).length&&(p=(o=D(yx(this.style.spacing),2))[0],i=o[1],y=this.ifHorizontal(p,i),bk(this.items,this.style.orient||"horizontal",y),h(e,this.items));this.maxPages=d.length,this.currPage=1,this.pageOffsets=d,this.maxPages<=1?this.resetPageCfg():(r.style.x=e-s,r.style.y=l/2-2,this.updatePageNavigatorState())},kk.prototype.updatePageNavigatorState=function(){this.updatePageInfo(),this.currPage===this.maxPages?this.nextButton.setState("disabled"):this.nextButton.setState("default"),1===this.currPage?this.prevButton.setState("disabled"):this.prevButton.setState("default")},kk.prototype.updatePageButtonSymbol=function(){var t=this.style.autoWrap,t=this.ifHorizontal(t?1:0,1);this.prevButton.update({symbol:["left","up"][t]}),this.nextButton.update({symbol:["right","down"][t]})},kk.prototype.updatePageInfo=function(){var t=this.styles.pageFormatter;k(this).select(".page-info").style("text",this.currPage&&this.maxPages?t(this.currPage,this.maxPages):"")},kk.prototype.finished=function(){var e=this;return this.finishedPromise||(this.finishedPromise=new Promise(function(t){e.resolveFinishedPromise=function(){e.finishedPromise=null,t(e.currPage)}})),"idle"===this.playState&&this.resolveFinishedPromise(),this.finishedPromise},kk.prototype.prev=function(){var t,e;this.maxPages&&this.currPage&&(t=this.style.loop,(e=this.currPage-1)<1&&(e=t?this.maxPages:1),this.goTo(e))},kk.prototype.next=function(){var t,e,n;this.maxPages&&this.currPage&&(t=this.style.loop,e=this.maxPages,n=this.currPage+1,this.goTo(n=e<n?t?1:e:n))},kk.prototype.goTo=function(t){var e,n,r,i,o=this;t!==this.currPage&&"idle"===this.playState&&(e=(i=this.style).effect,n=i.duration,i=i.autoWrap,r=(i=D(this.ifHorizontal(i?[0,-this.pageOffsets[t-1]]:[-this.pageOffsets[t-1],0],[0,-this.pageOffsets[t-1]]),2))[0],i=i[1],this.playState="running",this.clipView.animate([{transform:this.clipView.style.transform},{transform:"translate(".concat(-r,"px,").concat(-i,"px)")}],{duration:n,easing:e,fill:"both"}),this.container.animate([{transform:this.container.style.transform},{transform:"translate(".concat(r,"px,").concat(i,"px)")}],{duration:n,easing:e,fill:"both"}),Promise.all(this.clipView.getAnimations().map(function(t){return t.finished})).then(function(){o.currPage=t,o.updatePageNavigatorState(),o.resolveFinishedPromise(),o.playState="idle"}),this.finished())},kk.defaultOptions={style:{spacing:[4,0],effect:"easeQuadInOut",duration:320,maxRows:2,maxCols:2,pageButtonSize:10,pageInfoSpacing:2,pageFormatter:function(t,e){return"".concat(t,"/").concat(e)},pageButtonStyle:{size:10,margin:0,padding:0,markerStyle:{fill:"black",cursor:"pointer",disabled:{fill:"#d9d9d9",cursor:"not-allowed"}},backgroundStyle:{cursor:"pointer",fill:"transparent",disabled:{cursor:"not-allowed"}}},pageTextStyle:{fontSize:12,textBaseline:"middle",textAlign:"center"}}};var xk,wk=kk;function kk(t){t=xk.call(this,A({},kk.defaultOptions,t))||this;return t.items=[],t.maxPages=void 0,t.currPage=void 0,t.pageOffsets=[],t.playState="idle",t}function _k(t){var e=t.items,i=t.maxWidth,o=t.maxItemWidth,a=t.itemMarker,s=t.itemName,l=t.itemValue,n=t.reverse,u=t.itemWidth,c=t.itemHeight,h=t.itemPadding,d=t.itemBackgroundStyle,p=e.slice();return n&&p.reverse(),p.map(function(t,e){return{id:t.id||"legend-item-".concat(e),state:t.state||"default",value:t,maxItemWidth:Jp([null!=o?o:Number.MAX_VALUE,null!=i?i:Number.MAX_VALUE]),itemMarker:(r=Yp(a)?a(t,e,p):a,A({},ok,{symbol:t.marker,style:{fill:t.color,stroke:t.color}},r)),itemName:(r=A({},{formatter:function(){return t.name}},s),n=r.formatter,r=I(r,["formatter"]),A({},ak,{content:n(t,e,p)},r)),itemValue:(n=A({},{formatter:function(){return t.value}},l),r=n.formatter,n=I(n,["formatter"]),A({},sk,{content:r(t,e,p)},n)),itemWidth:u,itemHeight:c,padding:h,backgroundStyle:d};var n,r})}i(Tk,Sk=V),Tk.prototype.render=function(e,t){var n=e.padding,r=e.title,i=e.inset,o=e.orient,a=void 0===o?"horizontal":o,s=e.spacing,l=e.autoWrap,u=e.maxRows,c=e.maxWidth,h=e.maxHeight,d=e.cols,p=e.pageNavigator,o=e.backgroundStyle,o=void 0===o?{}:o,n=D(yx(n),4),f=n[0],y=n[1],g=n[2],n=n[3],v=rk(t,"legend-container",n,f),m=nk(v,r),r=(null==r?void 0:r.spacing)||0,i=D(yx(i),4),b=i[0],i=i[3],m=ek(m),i=(B(rk(v,"legend-inner-group",m.left+i,m.bottom+b+r),".category-items",function(){return new wk({})}).attr("className","category-items").call(function(t){t.node().update(E({orient:a,items:_k(e),spacing:s,autoWrap:l,maxRows:u,maxWidth:c,maxHeight:h,cols:d},p||{}))}).node(),v.getLocalBounds()),m=i.min,b=i.max,r=b[0]-m[0],v=b[1]-m[1];ik(t,"legend-background",Math.min(r+y+n,c||Number.MAX_VALUE),Math.min(v+f+g,h||Number.MAX_VALUE),o)},Tk.prototype.getItem=function(t){return this.querySelector("[id=".concat(t,"]"))},Tk.prototype.setItemState=function(t,e,n){void 0===n&&(n=!0),null!=(t=this.getItem(t))&&t.setState(e,n)},Tk.prototype.getItemsStates=function(){return this.querySelectorAll(".legend-item").map(function(t){return{id:t.id,state:t.getState()}})};var Sk,Ek=Tk;function Tk(t){return Sk.call(this,A({},lk,t))||this}function Mk(t,e,n){return"horizontal"===(t=void 0===t?"horizontal":t)?e:n}L.registerSymbol("hiddenHandle",function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]}),L.registerSymbol("verticalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=t+.4*r;return[["M",t,e],["L",o,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",o,e-i],["Z"],["M",o,e+(n=n/6)],["L",t+r-2,e+n],["M",o,e-n],["L",t+r-2,e-n]]}),L.registerSymbol("horizontalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=e+.4*r;return[["M",t,e],["L",t-i,o],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,o],["Z"],["M",t-(n=n/6),o],["L",t-n,e+r-2],["M",t+n,o],["L",t+n,e+r-2]]});i(Ck,Ok=Bh),Ck.prototype.connectedCallback=function(){this.draw()},Ck.prototype.attributeChangedCallback=function(){this.draw()},Ck.prototype.draw=function(){this.updateBackground(),this.updateTrack()},Ck.prototype.updateBackground=function(){var t=this.style.backgroundColor;this.path.style.path=this.getRailPath(),this.path.attr({fill:t,fillOpacity:.45})},Ck.prototype.updateTrack=function(){var t=this.style.fill;this.track.style.path=this.getRailPath(),this.track.style.clipPath=this.getClipPath(),this.track.style.fill=t},Object.defineProperty(Ck.prototype,"box",{get:function(){var t=this.style,e=t.orient,n=t.size,t=t.length;return Mk(e,[t,n],[n,t])},enumerable:!1,configurable:!0}),Ck.prototype.getRailPath=function(){var t=this.style.type,e=D(this.box,2),n=e[0],e=e[1];return"size"===t?[["M",0,e],["L",0+n,0],["L",0+n,e]]:[["M",0,e],["L",0,0],["L",0+n,0],["L",0+n,e]]},Ck.prototype.getClipPath=function(){var t=this.style,e=t.orient,t=t.selection;if(!t)return null;var n=D(this.box,2),r=n[0],n=n[1],t=D(t,2),i=t[0],t=t[1],o=Mk(e,i*r,0),i=Mk(e,0,i*n),r=Mk(e,t*r,r),e=Mk(e,n,t*n);return new Kh({style:{path:[["M",o,i],["L",o,e],["L",r,e],["L",r,i]]}})};var Ok,Pk=Ck;function Ck(t){t=Ok.call(this,Yb({},{style:uk},t=void 0===t?{}:t))||this;return t.path=t.appendChild(new Kh({className:"rail-path"})),t.track=t.appendChild(new Kh({className:"rail-path"})),t}i(Lk,Ak=V),Lk.prototype.render=function(t,e){var n=t.textStyle,r=t.visibility,i=t.symbol,o=t.size,a=t.fill,s=t.stroke,l=t.lineWidth;i&&"hidden"!==r?(B(e,".handle",function(){return new L({})}).attr("className","handle").call(function(t){t.node().update({symbol:i,size:o,fill:a,stroke:s,lineWidth:l})}),B(e,".handle-text","text").attr("className","handle-text").call(N,n)):(null!=(t=e.querySelector(".handle"))&&t.remove(),null!=(r=e.querySelector(".handle-text"))&&r.remove())};var Ak,Nk=Lk;function Lk(){return null!==Ak&&Ak.apply(this,arguments)||this}i(jk,Ik=Bh),jk.prototype.connectedCallback=function(){this.init(),this.bindEvents()},jk.prototype.attributeChangedCallback=function(t,e,n){"textStyle"!==t&&"padding"!==t&&"position"!==t||this.init()},jk.prototype.hide=function(){this.style.visibility="hidden"},jk.prototype.show=function(){this.style.visibility="visible"},jk.prototype.init=function(){var t=this.style,e=t.textStyle;"top"===t.position?this.text.attr(E({textAlign:"center"},e)):this.text.attr(E({textAlign:"left"},e))},jk.prototype.updateBackground=function(){var t=this.text.getLocalBounds(),e=t.min,t=t.max,n=Math.min(t[0]-e[0],40),e=[e[0]-4,e[1]-2,e[0]+n+4,t[1]+2],n=function(t,e){var n=(e=D(e,4))[0],r=e[1],i=e[2],e=e[3];if("top"===t)return[["M",n,e],["L",n,r],["L",i,r],["L",i,e],["L",n+(t=i-n)/2+(o=of(10,t/3,t/2))/2,e],["L",n+t/2,e+4],["L",n+t/2-o/2,e],["L",n,e]];var o=of(6,(t=e-r)/3,t/2);return[["M",n,r],["L",i,r],["L",i,e],["L",n,e],["L",n,r+t/2+o/2],["L",n-4,r+t/2],["L",n,r+t/2-o/2],["L",n,r]]}(this.style.position,e);this.background.style.path=n},jk.prototype.bindEvents=function(){var t=this;this.text.addEventListener(m.BOUNDS_CHANGED,function(){t.updateBackground()})};var Ik,Rk=jk;function jk(t){t=Ik.call(this,Yb({},{style:{visibility:"hidden"}},t=void 0===t?{}:t))||this;return t.background=t.appendChild(new Kh({style:{lineCap:"round",fill:"#262626",lineWidth:1,stroke:"#333"}})),t.text=t.appendChild(new id({style:{text:"",fill:"#fff",fontSize:10,textBaseline:"middle"}})),t}function Dk(t,e){var t=D(function(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(r<=e&&e<=i)return[r,i]}return[e,e]}(t,e),2),n=t[0],t=t[1];return{tick:(n+t)/2<e?t:n,range:[n,t]}}function Bk(t,e,n,r,i){var o=D(Mk(t,["dx","dy"],["dy","dx"]),2),a=o[0],o=o[1],s={};return s[a]=e,s[o]="start"===n?-i:r+i,s.textAlign=Mk(t,"center","start"===n?"right":"left"),s.textBaseline=Mk(t,"start"===n?"bottom":"top","middle"),s}function Fk(t,e){var n,s=t.min,l=t.max,r=t.handle,i=t.orient,u=void 0===i?"horizontal":i;if(null===t.label||r)return[];var o,a,c,h=Yb({size:24,length:200},uk,t.rail||{}),i=Yb({},ck,t.label||{}),d=i.align,p=i.spacing;return"rail"===d?(t=(r=D(Mk(u,["dx","dy"],["dy","dx"]),2))[0],i=r[1],o=(r=D(Mk(u,["right","left"],["center","center"]),2))[0],r=r[1],a=(c=D(Mk(u,["middle","middle"],["bottom","top"]),2))[0],c=c[1],[((n={id:"legend-label-0",text:"".concat(s)})[t]=-p,n[i]=h.size/2,n.textAlign=o,n.textBaseline=a,n),((o={id:"legend-label-1",text:"".concat(l)})[t]=h.length+p,o[i]=h.size/2,o.textAlign=r,o.textBaseline=c,o)]):e.map(function(t,e){a=t,n=s,r=l,i=h;var n,r,i,o=(o=void 0!==o&&o)?a*(r-n)/i.length:lx((a-n)*(n<r?i.length/(r-n):0),2),a=Bk(u,o,d,h.size,p);return E({id:"legend-label-".concat(e),text:"".concat(t)},a)})}var zk=bf(function(t){return t.sort(function(t,e){return t-e})},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)});i(Hk,Vk=V),Hk.prototype.render=function(t,e){var n=t.padding,r=t.title,i=t.inset,o=(t.orient,t.backgroundStyle),o=void 0===o?{}:o,a=t.maxWidth,s=t.maxHeight,l=t.label,n=D(yx(n),4),u=n[0],c=n[1],h=n[2],n=n[3],d=rk(e,"legend-container",n,u),p=nk(d,r),r=(null==r?void 0:r.spacing)||0,i=D(yx(i),4),f=i[0],i=i[3],p=ek(p),i=rk(d,"legend-inner-group",p.left+i,p.bottom+f+r),p=Fk(t,this.ticks),f=(i2(i,"legend-label",p,l,{fill:"#2C3542",fillOpacity:.65,fontWeight:"normal"}),this.drawInner(),d.getLocalBounds()),r=f.min,t=f.max,i=t[0]-r[0],p=t[1]-r[1];ik(e,"legend-background",Math.min(i+c+n,a||Number.MAX_VALUE),Math.min(p+u+h,s||Number.MAX_VALUE),o)},Hk.prototype.drawInner=function(){this.drawRail(),this.drawHandles(),this.createIndicator()},Object.defineProperty(Hk.prototype,"orient",{get:function(){return this.style.orient||"horizontal"},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"selection",{get:function(){var t=this.style,e=t.min,n=t.max;return[t.start||e,t.end||n]},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"labelsCfg",{get:function(){var t=this.style.label;return Yb({},ck,t||{})},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"railCfg",{get:function(){var t=this.style.rail;return Yb({size:24,length:200},uk,t||{})},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"handleCfg",{get:function(){var t=this.style,e=t.handle,t=t.label;return Yb({},hk,e||{},{textStyle:this.labelsCfg.style,spacing:this.labelsCfg.spacing,visibility:e&&null!==t?"visible":"hidden"})},enumerable:!1,configurable:!0}),Hk.prototype.ifHorizontal=function(t,e){return Mk(this.orient,"function"==typeof t?t():t,"function"==typeof e?e():e)},Object.defineProperty(Hk.prototype,"color",{get:function(){var t,e,i,o,a,n=this.style.color,n=Array.from(void 0===n?[]:n),r=n.length;return r?this.railCfg.chunked?(t=this.ticks,e=this.orient,i=Array.from(n),o=i.length,a=t.length,t.reduce(function(t,e,n){var r=i[n%o];return t+" ".concat(n/(a-1),":").concat(r).concat(n<a-1?" ".concat((n+1)/(a-1),":").concat(r):"")},"l(".concat("horizontal"===e?"0":"270",")"))):n.reduce(function(t,e,n){return t+" ".concat(n/(r-1),":").concat(e)},"l(".concat(this.ifHorizontal("0","270"),")")):""},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"slidable",{get:function(){return!!this.style.handle},enumerable:!1,configurable:!0}),Object.defineProperty(Hk.prototype,"ticks",{get:function(){var t=this.style,e=t.min,t=t.max;return zk(T(T([e],D(this.railCfg.ticks||[]),!1),[t],!1))},enumerable:!1,configurable:!0}),Hk.prototype.drawRail=function(){var t=this.style,e=t.orient,n=t.min,t=t.max,r=D(this.selection,2),i=r[0],r=r[1],o=this.querySelector(".legend-inner-group");this.rail=k(this.rail||o.appendChild(new Pk)).attr("className","legend-rail").call(N,E(E({},this.railCfg),{fill:this.color,orient:e})).style("selection",this.slidable?[(i-n)/(t-n),(r-n)/(t-n)]:void 0).node()},Hk.prototype.drawHandles=function(){var t=D(this.selection,2),e=t[0],t=t[1];this.startHandle=this.drawHandle("start",e),this.endHandle=this.drawHandle("end",t)},Hk.prototype.drawHandle=function(t,e){var n=this,r=this.labelsCfg,i=r.align,r=r.spacing,o=this.railCfg.size,a=this.handleCfg.size,s=this.getOffset(e),l=Bk(this.orient,s,i,o,-a/3),u=l.dx,c=l.dy,h=Bk(this.orient,s,i,o,"start"===i?r:a/3+r),l="start"===t?this.startHandle:this.endHandle,s=this.querySelector(".legend-inner-group");return k(l||s.appendChild(new Nk({}))).attr("className","legend-handle-".concat(t)).call(function(t){return t.node().update(E(E({},n.handleCfg),{x:u,y:c,symbol:n.ifHorizontal("horizontalHandle","verticalHandle"),textStyle:E({text:"".concat(null!=e?e:""),x:+h.dx-+u,y:+h.dy-+c,textAlign:h.textAlign,textBaseline:h.textBaseline},n.handleCfg.textStyle)}))}).node()},Hk.prototype.createIndicator=function(){this.indicator=this.appendChild(new Rk({zIndex:2,className:"legend-indicator",style:{position:this.ifHorizontal("top","right")}}))},Hk.prototype.bindEvents=function(){var n=this,t=new Map;t.set("rail",this.rail),t.set("start",this.startHandle),t.set("end",this.endHandle),t.forEach(function(t,e){t.addEventListener("mousedown",n.onDragStart(e)),t.addEventListener("touchstart",n.onDragStart(e))}),this.startHandle.addEventListener("mouseover",function(){return n.updateMouse()}),this.endHandle.addEventListener("mouseover",function(){return n.updateMouse()}),this.rail.addEventListener("mousemove",this.onHovering),this.addEventListener("mouseout",this.hideIndicator)},Hk.prototype.showIndicator=function(t,e){var n,r,i,o,a,s,l;void 0===e&&(e="".concat(t)),"number"!=typeof t?this.hideIndicator():(this.indicator.show(),l=this.querySelector(".legend-container"),t=zs(t,(t=this.style).min,t.max),n=this.ifHorizontal(this.getOffset(t),this.railCfg.size+12),t=this.ifHorizontal(-14,this.getOffset(t)),r=(i=this.rail.getBBox()).x,i=i.y,o=(a=l.getBBox()).x,a=a.y,s=(l=D(l.getLocalPosition(),2))[0],l=l[1],this.indicator.style.x=r-o+s+n,this.indicator.style.y=i-a+l+t,this.indicator.style.textStyle={text:e})},Hk.prototype.hideIndicator=function(){var t;null!=(t=this.indicator)&&t.hide()},Hk.prototype.onDragEnd=function(){this.style.cursor="default",this.removeEventListener("mousemove",this.onDragging),this.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd)},Hk.prototype.updateMouse=function(){this.style.slidable&&(this.style.cursor="grabbing")},Hk.prototype.setSelection=function(t,e){this.updateSelection(t,e)},Hk.prototype.updateSelection=function(t,e,n){void 0===n&&(n=!1);var r,i,o,a,s,l=D(this.selection,2),u=l[0],l=l[1],t=D([t,e],2),e=t[0],t=t[1],n=(n&&(e+=u,t+=l),this.style),u=n.min,l=n.max,c=D((n=[u,l],u=[e,t],l=this.selection,void 0===r&&(r=4),i=(n=D(n,2))[0],n=n[1],o=(u=D(u,2))[0],u=u[1],a=(l=D(l,2))[0],l=l[1],u=(o=D([o,u],2))[0],s=(o=o[1])-u,o<u&&(u=(c=D([o,u],2))[0],o=c[1]),n-i<s?[i,n]:u<i?a===i&&l===o?[i,o]:[i,s+i]:n<o?l===n&&a===u?[u,n]:[n-s,n]:[lx(u,r),lx(o,r)]),2),e=c[0],t=c[1];this.update({start:e,end:t}),this.dispatchSelection()},Object.defineProperty(Hk.prototype,"step",{get:function(){var t=this.attributes,e=t.step,n=t.min,t=t.max;return ff(e)?lx(.01*(t-n),0):e},enumerable:!1,configurable:!0}),Hk.prototype.getTickValue=function(t){return this.railCfg.chunked?Dk(this.ticks,t).tick:(e=this.step,(n=this.style.min)+Math.round((t-n)/e)*e);var e,n},Hk.prototype.getValueByCanvasPoint=function(t,e){var n=this.style,r=n.min,n=n.max,i=D(this.rail.getPosition(),2),o=i[0],i=i[1],o=this.ifHorizontal(o,i),i=this.ifHorizontal.apply(this,T([],D(xx(t)),!1));return zs(this.getOffset(i-o,!0)+r,r,n)},Hk.prototype.getOffset=function(t,e){var n=this.style,r=n.min,n=n.max;return(e=void 0!==e&&e)?t*(n-r)/this.railCfg.length:lx((t-r)*(r<n?this.railCfg.length/(n-r):0),2)},Hk.prototype.dispatchSelection=function(){var t=new Mh("valueChanged",{detail:{value:this.selection}});this.dispatchEvent(t)},Hk.prototype.dispatchIndicated=function(t,e){t=new Mh("onIndicated",{detail:{value:t,range:e}});this.dispatchEvent(t)},t([Rx(20)],Hk.prototype,"dispatchSelection",null),t([Rx(20)],Hk.prototype,"dispatchIndicated",null);var Vk,Gk=Hk;function Hk(t){var o=Vk.call(this,Yb({type:"continuous-legend"},dk,t))||this;return o.onHovering=function(t){t.stopPropagation();var e,t=o.getValueByCanvasPoint(t);kf(o.attributes,["rail","chunked"])?(e=Dk(o.ticks,t).range,o.showIndicator((e[0]+e[1])/2,"".concat(e[0],"-").concat(e[1])),o.dispatchIndicated(t,e)):(e=o.getTickValue(t),o.showIndicator(e),o.dispatchIndicated(e))},o.onDragStart=function(e){return function(t){t.stopPropagation(),o.slidable&&(o.target=e,o.prevValue=o.getTickValue(o.getValueByCanvasPoint(t)),o.addEventListener("mousemove",o.onDragging),o.addEventListener("touchmove",o.onDragging),o.addEventListener("mouseleave",o.onDragEnd),o.addEventListener("mouseup",o.onDragEnd),document.addEventListener("mouseup",o.onDragEnd),document.addEventListener("touchend",o.onDragEnd))}},o.onDragging=function(t){var e=o.target,n=(o.updateMouse(),D(o.selection,2)),r=n[0],n=n[1],t=o.getTickValue(o.getValueByCanvasPoint(t)),i=t-o.prevValue;"start"===e?r!==t&&o.updateSelection(t,n):"end"===e?n!==t&&o.updateSelection(r,t):"rail"===e&&0!=i&&(o.prevValue=t,o.updateSelection(i,i,!0))},o}i(Uk,Wk=l),Uk.prototype.init=function(){this.initShape(),this.update({})},Uk.prototype.update=function(t){this.attr(A({},this.attributes,t)),this.backgroundShape.attr(this.getBackgroundShapeCfg()),this.titleShape.update(this.getTitleShapeCfg()),this.valueShape.update(this.getValueShapeCfg())},Uk.prototype.initShape=function(){this.titleShape=new Wx({name:"title",style:this.getTitleShapeCfg()}),this.valueShape=new Wx({name:"value",style:this.getValueShapeCfg()}),this.backgroundShape=new nd({name:"background"}),this.backgroundShape.appendChild(this.titleShape),this.backgroundShape.appendChild(this.valueShape),this.appendChild(this.backgroundShape),this.backgroundShape.toBack()},Uk.prototype.getBackgroundShapeCfg=function(){return bx(this.attributes.backgroundStyle)},Uk.prototype.getTitleShapeCfg=function(){var t=this.attributes.title;return E(E({text:""},t),{textStyle:null==t?void 0:t.textStyle,backgroundStyle:{fill:"transparent",lineWidth:0},padding:0,x:0,y:0})},Uk.prototype.getValueShapeCfg=function(){var t=this.attributes,e=t.value,n=0,t=t.spacing+(n=this.titleShape?(t=this.titleShape.getBounds()).getMax()[1]-t.getMin()[1]:n);return E(E({text:""},e),{textStyle:null==e?void 0:e.textStyle,backgroundStyle:{fill:"transparent",lineWidth:0},padding:0,x:0,y:t})},Uk.prototype.clear=function(){this.valueShape.destroy(),this.titleShape.destroy(),this.backgroundShape.destroy()},Uk.defaultOptions={type:Uk.tag="statistic",style:{x:0,y:0,title:{text:"",textStyle:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"}},value:{text:"",textStyle:{fontSize:24,fill:"rgba(0, 0, 0, 0.85)"}},spacing:5}};var Wk,s=Uk;function Uk(t){t=Wk.call(this,A({},Uk.defaultOptions,t))||this;return t.init(),t}var Yk=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];var qk,Xk,Zk,Kk;function $k(t){t=qk.call(this,A({},$k.defaultOptions,t))||this;return t.init(),t}function Jk(t){Xk||(Xk=document.createElement("table"),Kk=document.createElement("tr"),Zk=/^\s*<(\w+|!)[^>]*>/,Kk={tr:document.createElement("tbody"),tbody:Xk,thead:Xk,tfoot:Xk,td:Kk,th:Kk,"*":document.createElement("div")});var e=Zk.test(t)&&RegExp.$1,e=(e&&e in Kk||(e="*"),Kk[e]),t=(t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,e.innerHTML=""+t,e.childNodes[0]);return t&&e.contains(t)&&e.removeChild(t),t}i($k,qk=s),$k.prototype.init=function(){qk.prototype.init.call(this),this.timestamp=this.attributes.value.timestamp,this.startTimer()},$k.prototype.update=function(t){qk.prototype.update.call(this,t)},$k.prototype.formatCountdown=function(t){var i,e,n,r=null==(r=this.attributes.value)?void 0:r.format,o=(null!=(o=null==t?void 0:t.value)&&o.format&&(r=t.value.format),new Date(this.timestamp).getTime()),t=Date.now(),o=Math.max(o-t,0),t=qp(o)?"":"".concat(o);return r&&(i=o=o,o=/\[[^\]]*]/g,e=((r=r).match(o)||[]).map(function(t){return t.slice(1,-1)}),r=r.replace(o,"[]"),r=Yk.reduce(function(t,e){var n,e=D(e,2),r=e[0],e=e[1];return-1!==t.indexOf(r)?(n=Math.floor(i/e),i-=n*e,t.replace(new RegExp("".concat(r,"+"),"g"),function(t){var e=n.toString();return e.length<2?"0".concat(e):e})):t},r),n=0,t=r.replace(o,function(){var t=e[n];return n+=1,t})),t},$k.prototype.startTimer=function(){var e=this;this.countdownId||(this.countdownId=window.setInterval(function(){var t=e.formatCountdown();e.valueShape.update({text:t}),e.timestamp<=Date.now()&&e.stopTimer()},1e3/30))},$k.prototype.stopTimer=function(){var t;this.countdownId&&(clearInterval(this.countdownId),this.countdownId=void 0,(t=this.attributes.onFinish)&&t())},$k.tag="countdown",$k.defaultOptions=A({},s.defaultOptions,{style:{value:{timestamp:Date.now()+3e4}}});var Qk,u="tooltip",t_="tooltip-title",e_="tooltip-list",ht="tooltip-list-item",_t="tooltip-list-item-name",dt="tooltip-list-item-marker",ye="tooltip-list-item-name-label",o="tooltip-list-item-value",$="tooltip-crosshair-x",n="tooltip-crosshair-y",h={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},X=((it={})[".".concat(u)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},it[".".concat(t_)]={color:"rgba(0, 0, 0, 0.45)"},it[".".concat(e_)]={margin:"0px","list-style-type":"none",padding:"0px"},it[".".concat(ht)]={"list-style-type":"none","margin-top":"12px",display:"flex","line-height":"1em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},it[".".concat(dt)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},it[".".concat(_t)]={display:"flex","align-items":"center","max-width":"216px"},it[".".concat(ye)]=E({flex:1},h),it[".".concat(o)]=E({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},h),it[".".concat($)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},it[".".concat(n)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},it),n_=(i(r_,Qk=l),Object.defineProperty(r_.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),Object.defineProperty(r_.prototype,"position",{set:function(t){var t=D(t,2),e=t[0],t=t[1];this.attr({x:e,y:t}),this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(r_.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(r_.prototype,"items",{get:function(){var t=this.attributes.items;return this.sort(this.filter(t.map(function(t,e){var n=t.name,n=void 0===n?"":n,r=t.value,i=t.color,i=void 0===i?"black":i,o=t.index,t=I(t,["name","value","color","index"]);return E({name:n,value:r,color:i,index:void 0===o?e:o},t)})))},enumerable:!1,configurable:!0}),Object.defineProperty(r_.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes.template.item,r=[];return this.items.forEach(function(t){var n;r.push(Jk((n=t,(t=e)&&n?t.replace(/\\?\{([^{}]+)\}/g,function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===n[e]?"":n[e]}):t)))}),r},enumerable:!1,configurable:!0}),Object.defineProperty(r_.prototype,"customContent",{get:function(){var t=this.attributes.customContent;return ef(t)?Ex(t):yf(t)?t:Yp(t)?Ex(t(this.attributes.items)):void 0},enumerable:!1,configurable:!0}),r_.prototype.init=function(){this.updateHTMLTooltipElement(),this.updatePosition()},r_.prototype.update=function(t){this.attr(A({},this.attributes,t)),this.updateHTMLTooltipElement(),this.updatePosition()},r_.prototype.clear=function(){this.element.innerHTML=""},r_.prototype.destroy=function(){var t;null!=(t=this.element)&&t.remove(),null!=(t=this.customContent)&&t.remove()},r_.prototype.show=function(){this.visibility="visible",this.element.style.visibility="visible"},r_.prototype.hide=function(){this.visibility="hidden",this.element.style.visibility="hidden"},r_.prototype.initShape=function(){var t=this.attributes.template.container;this.element=Jk(t),!this.id&&""===this.id||this.element.setAttribute("id",this.id)},r_.prototype.updateHTMLTooltipElement=function(){var e,r,t=this.attributes.title,n=this.element,i=this.customContent,t=(this.clear(),i?n.appendChild(i):(i=this.attributes.template.title,n.innerHTML=i,n.getElementsByClassName(t_)[0].innerHTML=t,i=this.HTMLTooltipItemsElements,(e=document.createElement("ul")).className=e_,i.forEach(function(t){e.appendChild(t)}),this.element.appendChild(e)),this.attributes.style);r=n,Object.entries(t).forEach(function(t){var t=D(t,2),e=t[0],n=t[1];T([r],D(r.querySelectorAll(e)),!1).filter(function(t){return t.matches(e)}).forEach(function(t){t&&(t.style.cssText+=Object.entries(n).reduce(function(t,e){return"".concat(t).concat(e.join(":"),";")},""))})}),this.element.style.visibility=this.visibility},r_.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,e=D(e.offset,2),i=e[0],o=e[1],e=(t||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},t=this.elementSize,s=t.width,l=t.height,u=[-s/2,-l/2];return e.forEach(function(t){var e=D(u,2),n=e[0],e=e[1],t=D(a[t],2),r=t[0],t=t[1];u=[n+(s/2+i)*r,e+(l/2+o)*t]}),u},r_.prototype.setOffsetPosition=function(t){var t=D(t,2),e=t[0],t=t[1],n=this.attributes,r=n.x,i=n.y,n=n.container,o=n.x,n=n.y;this.element.style.left="".concat(r+o+e,"px"),this.element.style.top="".concat(i+n+t,"px")},r_.prototype.updatePosition=function(){this.throttleUpdatePosition()},r_.prototype.autoPosition=function(t){var t=D(t,2),e=t[0],t=t[1],n=this.attributes,r=n.x,i=n.y,o=n.autoPosition,n=n.bounding;if(!o)return[e,t];var o=this.element,a=o.offsetWidth,o=o.offsetHeight,r=D([r+e,i+t],2),e=r[0],i=r[1],t=this.attributes.position,s={left:"right",right:"left",top:"bottom",bottom:"top"},r=n.x,l=n.y,u={left:e<r,right:r+n.width<e+a,top:i<l,bottom:l+n.height<i+o},c=[],r=(t.split("-").forEach(function(t){u[t]?c.push(s[t]):c.push(t)}),c.join("-"));return this.getRelativeOffsetFromCursor(r)},r_.prototype.filter=function(t){var e=this.attributes.filterBy;return e?t.filter(e):t},r_.prototype.sort=function(t){var e=this.attributes.sortBy;return e?t.sort(e):t},r_.tag="tooltip",r_.defaultOptions={style:{x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],follow:!0,enterable:!1,autoPosition:!0,items:[],throttleFrequency:50,container:{x:0,y:0},bounding:{x:0,y:0,width:0,height:0},template:{container:'<div class="'.concat(u,'"></div>'),title:'<div class="'.concat(t_,'"></div>'),item:'<li class="'.concat(ht,'" data-index={index}>\n        <span class="').concat(_t,'">\n          <span class="').concat(dt,'" style="background:{color}"></span>\n          <span class="').concat(ye,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o,'" title="{value}">{value}</span>\n      </li>')},style:X}},r_);function r_(t){var e=Qk.call(this,A({},r_.defaultOptions,t))||this;return e.visibility="visible",e.throttleUpdatePosition=Ef(function(){e.setOffsetPosition(e.autoPosition(e.getRelativeOffsetFromCursor()))},e.attributes.throttleFrequency,{}),e.visibility=e.attributes.visibility,e.initShape(),e.init(),e}var i_,o_={default:{sizeStyle:{width:44,height:22,radius:11},tagStyle:{textStyle:{fontSize:12,lineHeight:16,fill:"#fff"},padding:0},markerStyle:{size:11}},small:{sizeStyle:{width:28,height:16,radius:8},tagStyle:{textStyle:{fontSize:10,lineHeight:14,fill:"#fff"},padding:0},markerStyle:{size:8}},mini:{sizeStyle:{width:20,height:14,radius:7},tagStyle:{textStyle:{fontSize:7,lineHeight:10,fill:"#fff"},padding:0},markerStyle:{size:7}}};function a_(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!0);var r=Number(t.style.height)-2*e;return{x:n?Number(t.style.width)+Number(t.style.x)-e-r:Number(t.style.x)+e,y:Number(t.style.y)+e,width:r,height:r,radius:r/2}}function s_(t){return i_.call(this,A({},s_.defaultOptions,t))||this}i(s_,i_=V),s_.prototype.render=function(t,e){var i=this,n=t.size,n=void 0===n?"default":n,o=t.spacing,r=t.disabled,a=t.checked,s=t.unCheckedChildren,t=t.checkedChildren,e=B(e,".switch-content","g").attr("className","switch-content").node(),l=e.getLocalBounds(),n=kf(o_,n,o_.default),u=n.sizeStyle,c=n.tagStyle,h=r?"no-drop":"pointer",n=a?"#1890FF":"#00000040",d=u,p=a?t:s,f=((t||s)&&B(e,".switch-tag",function(){return new Wx({})}).attr("className","switch-tag").call(function(t){var e,t=t.node(),n=(t.update(A({cursor:h,backgroundStyle:null,text:!1,marker:!1},c,p)),null==t?void 0:t.getLocalBounds()),r=n.max,n=n.min,i=r[0]-n[0]+u.radius,r=r[1]-n[1],n=Math.max(i+u.height+2,u.width);d=E(E({},u),{width:n}),t.update((t={x:l.min[0],y:l.min[1],width:n,height:d.height},n={width:i,height:r},i=d.radius,r=a,e=n.width,n=n.height,void 0===i&&(i=0),{x:(r=void 0===a?!0:r)?Number(t.x)+i:Number(t.width)+Number(t.x)-e,y:Number(t.y)+(Number(t.height)-n)/2}))}),B(e,".switch-background","rect").attr("className","switch-background").style("zIndex",(e.style.zIndex||0)-1).style("x",l.min[0]).style("y",l.min[1]).style("fill",n).style("cursor",h).style("fillOpacity",r?.4:1).call(N,d).node()),y=B(e,".switch-background-stroke","rect").attr("className","switch-background-stroke").style("zIndex",(e.style.zIndex||0)-2).style("x",l.min[0]).style("y",l.min[1]).style("stroke",n).style("lineWidth",0).call(N,d).node();B(e,".switch-handle","rect").attr("className","switch-handle").style("fill","#fff").style("cursor",h).call(function(t){var e,t=t.node(),n=a_(f,o,a),r=a_(f,o,!a);t.attr("x")&&!Cf(n,r)&&i.checked!==a?(t.attr(r),null!=(e=t.getAnimations()[0])&&e.cancel(),null!=(e=y.getAnimations()[0])&&e.cancel(),t.animate([{x:r.x},{x:n.x}],{duration:120,fill:"both"}),y.animate([{lineWidth:0,strokeOpacity:.5},{lineWidth:14,strokeOpacity:0}],{duration:400,easing:"ease-on"})):t.attr(n)}),this.checked=!!a},s_.defaultOptions={type:s_.tag="switch",style:{x:0,y:0,spacing:2,checked:!0,disabled:!1}};var l_,H={text:"",type:"primary",height:20,width:20,buttonStyle:{default:{lineWidth:0,fill:"#fff"},active:{fill:"#fff"},disabled:{fill:"#fff"}},markerStyle:{default:{fill:"black",size:10},disabled:{fill:"#8c8c8c"}}};function u_(t){var t=l_.call(this,A({},u_.defaultOptions,t))||this,e=(t.playState="idle",t.attributes),n=e.view,e=e.initPageNum;return t.currPage=e,t.view=n,t.init(),t}i(u_,l_=l),Object.defineProperty(u_.prototype,"finished",{get:function(){var e=this;return this.finishedPromise||(this.finishedPromise=new Promise(function(t){e.resolveFinishedPromise=function(){e.finishedPromise=null,t(e.currPage)}})),"idle"===this.playState&&this.resolveFinishedPromise(),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"maxPages",{get:function(){var t=this.attributes,e=t.pageWidth,n=t.pageHeight,r=t.orient,i=t.pageLimit;if(t.pageCallback||i!==1/0)return i;return"horizontal"===r?Math.ceil(this.width/e):Math.ceil(this.height/n)},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"view",{get:function(){return this.fullView},set:function(t){var e=this.attributes,n=e.width,e=e.height;t.setLocalPosition(0,0),this.fullView=t,n&&e||(e=(n=_x(t)).width,t=n.height,this.width=e,this.height=t)},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"width",{get:function(){var t=this.attributes.width;return t||this.viewWidth},set:function(t){this.viewWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"height",{get:function(){var t=this.attributes.height;return t||this.viewHeight},set:function(t){this.viewHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"btnPosition",{get:function(){var t;return null!=(t=this.style.button)&&t.position?this.style.button.position:"horizontal"===this.style.orient?"right":"bottom"},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"defaultShape",{get:function(){return["left","right","left-right"].includes(this.btnPosition)?["left","right"]:["up","down"]},enumerable:!1,configurable:!0}),Object.defineProperty(u_.prototype,"buttonCfg",{get:function(){var t=D(this.defaultShape,2),e=t[0],t=t[1],n=this.attributes.button,r=n.prev,n=n.next;return{prev:E({marker:e},r),next:E({marker:t},n)}},enumerable:!1,configurable:!0}),u_.prototype.init=function(){this.initShape(),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},u_.prototype.update=function(t){var e=t.view;e&&(this.view&&(this.view.style.clipPath=null,this.removeChild(this.view,!1)),this.currPage=this.attributes.initPageNum,this.view=e,this.view.style.clipPath=this.clipView,this.appendChild(this.view),this.view.toBack()),this.attr(A({},this.attributes,t)),this.updateView(),this.updateButton(),this.updateButtonState(),this.adjustLayout()},u_.prototype.clear=function(){this.view&&(this.view.style.clipPath=null,this.removeChild(this.view,!1)),this.fullView=void 0,this.removeChildren(!0)},u_.prototype.destroy=function(){this.removeChildren(!0),l_.prototype.destroy.call(this)},u_.prototype.goTo=function(t){var e,n,r,i,o,a,s,l,u,c,h=this;return"idle"===this.playState&&(e=(n=this.attributes).effect,n=n.duration,r=(u=this.calcRelativePagingOffset(t)).viewFromX,i=u.viewFromY,o=u.viewToX,a=u.viewToY,c=u.clipFromX,s=u.clipFromY,l=u.clipToX,u=u.clipToY,this.playState="running",this.clipView.animate([{transform:"translate(".concat(c,"px, ").concat(s,"px)")},{transform:"translate(".concat(l,"px, ").concat(u,"px)")}],{duration:n,easing:e,fill:"both"}),null!=(c=this.view.animate([{transform:"translate(".concat(r,"px, ").concat(i,"px)")},{transform:"translate(".concat(o,"px, ").concat(a,"px)")}],{duration:n,easing:e,fill:"both"}))&&c.finished.then(function(){h.currPage=t,h.updateButtonState(),h.resolveFinishedPromise(),h.playState="idle"})),this.finished},u_.prototype.prev=function(){var t=this.attributes.loop,e=this.currPage-1;return e<1&&(e=t?this.maxPages:1),this.goTo(e)},u_.prototype.next=function(){var t=this.attributes.loop,e=this.maxPages,n=this.currPage+1;return this.goTo(n=e<n?t?1:e:n)},u_.prototype.initShape=function(){this.clipView=new nd({name:"clipView",style:{x:0,y:0,width:0,height:0}}),this.view.style.clipPath=this.clipView,this.appendChild(this.view),this.view.toBack();var t=D(this.defaultShape,2),e=t[0],t=t[1];this.prevButton=new Qx({name:"prevButton",style:E(E({},u_.defaultOptions.style.button.prev),{marker:e,onClick:this.prev.bind(this)})}),this.appendChild(this.prevButton),this.nextButton=new Qx({name:"nextButton",style:E(E({},u_.defaultOptions.style.button.next),{marker:t,onClick:this.next.bind(this)})}),this.appendChild(this.nextButton),this.paginationGroup=new Wh({name:"paginationGroup"}),this.appendChild(this.paginationGroup)},u_.prototype.updateView=function(){var t=this.getClipViewSpace(this.currPage),e=t.width,t=t.height;this.clipView.attr({width:e,height:t}),this.view.setLocalPosition(0,0),this.clipView.setLocalPosition(0,0)},u_.prototype.updateButton=function(){var t=this.buttonCfg,e=t.prev,t=t.next;e&&this.prevButton.update(e),t&&this.nextButton.update(t)},u_.prototype.updateButtonState=function(){this.attributes.loop?(this.nextButton.setState("enabled"),this.prevButton.setState("enabled")):(this.nextButton.setState(this.currPage===this.maxPages?"disabled":"enabled"),this.prevButton.setState(1===this.currPage?"disabled":"enabled"))},u_.prototype.getClipViewSpace=function(t){var e=this.attributes,n=e.orient,r=e.pageWidth,i=e.pageHeight,e=e.pageCallback,o={x:0,y:0,width:r,height:i},a=this.maxPages;return e?E(E({},o),e(t)):(a<t||t<1||("vertical"===n?o.y=(t-1)*i:"horizontal"===n&&(o.x=(t-1)*r)),o)},u_.prototype.absolute2Relative=function(t,e){var n=this.currPage,n=this.getClipViewSpace(n);return[t+n.x,e+n.y]},u_.prototype.getViewPosition=function(t){var e=this.getClipViewSpace(1),n=e.x,e=e.y,t=this.getClipViewSpace(t),n=D([-t.x+n,-t.y+e],2);return{x:n[0],y:n[1]}},u_.prototype.getRelativeViewPosition=function(t){var t=this.getViewPosition(t),e=t.x,t=t.y,e=D(this.absolute2Relative(e,t),2);return{x:e[0],y:e[1]}},u_.prototype.calcRelativePagingOffset=function(t){var e=D(this.absolute2Relative.apply(this,T([],D(this.view.getLocalPosition().slice(0,2)),!1)),2),n=e[0],e=e[1],t=this.getRelativeViewPosition(t),r=t.x,t=t.y,i=D([-n,-e],2),o=i[0],i=i[1],a=D([-r,-t],2);return{viewFromX:n,viewFromY:e,viewToX:r,viewToY:t,clipFromX:o,clipFromY:i,clipToX:a[0],clipToY:a[1]}},u_.prototype.adjustLayout=function(){this.adjustButton()},u_.prototype.adjustButton=function(){var t,e=this.attributes,n=e.button,r=e.pageWidth,e=e.pageHeight,i=this.btnPosition,n=(null==n?void 0:n.spacing)||0,o=_x(this.prevButton),a=o.width,o=o.height,s=_x(this.nextButton),l=s.width,s=s.height,u=0,c=0,h=0,d=0;"left-right"===i?(u=-(n+a),c=(e-o)/2,h=n+r,d=(e-s)/2):"top-bottom"===i?(u=(r-a)/2,c=-(n+o),h=(r-l)/2,d=n+e):"top"===i?(u=(r-n)/2-a,c=-(n+(t=$p([o,s]))),h=(r+n)/2,d=-(n+t)):"bottom"===i?(u=(r-n)/2-a,h=(r+n)/2,d=c=n+e):"left"===i?(u=(h=-(n+l))-(n+a),d=c=(e-(t=$p([o,s])))/2):"right"===i&&(h=(u=n+r)+a,d=c=(e-(t=$p([o,s])))/2),this.prevButton.setLocalPosition(u,c),this.nextButton.setLocalPosition(h,d)},u_.defaultOptions={type:u_.tag="page-navigator",style:{x:0,y:0,effect:"linear",duration:200,orient:"horizontal",initPageNum:1,pageLimit:1/0,loop:!1,button:{prev:E({spacing:0},H),next:E({spacing:0},H),style:{default:{},active:{},disabled:{}},spacing:5},pagination:{type:"currTotal",style:{default:{},active:{}},separator:"/",spacing:5}}},L.registerSymbol("left",function(t,e,n){return[["M",t-n,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]}),L.registerSymbol("right",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]}),L.registerSymbol("up",function(t,e,n){return[["M",t-n,e+n],["L",t,e-n],["L",t+n,e+n],["Z"]]}),L.registerSymbol("down",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t,e+n],["Z"]]});var c_,G={text:{text:""},lineStyle:{stroke:"#416180",strokeOpacity:.45,lineWidth:1,lineDash:[5,5]}},pt=Yb({},G,{type:"line",text:{position:"start",align:"center",verticalAlign:"bottom"}}),J=Yb({},G,{type:"circle",defaultRadius:0}),c=Yb({},G,{type:"polygon",defaultRadius:0,startAngle:0}),a=(i(h_,c_=l),Object.defineProperty(h_.prototype,"localPointer",{get:function(){var t=D(this.getPosition(),2),e=t[0],t=t[1],n=D(this.pointer,2);return[n[0]-e,n[1]-t]},enumerable:!1,configurable:!0}),Object.defineProperty(h_.prototype,"tagCfg",{get:function(){var t=this.attributes.text;return t.position,I(t,["position"])},enumerable:!1,configurable:!0}),Object.defineProperty(h_.prototype,"crosshairCfg",{get:function(){var t=this.attributes.lineStyle;return E(E({},t),{path:this.crosshairPath})},enumerable:!1,configurable:!0}),h_.prototype.init=function(){this.initShape(),this.adjustLayout()},h_.prototype.update=function(t){this.attr(A({},this.attributes,t)),this.tagShape.update(this.tagCfg),this.crosshairShape.attr(this.crosshairCfg),this.adjustLayout()},h_.prototype.clear=function(){},h_.prototype.destroy=function(){},h_.prototype.setPointer=function(t){this.pointer=t},h_.prototype.initShape=function(){this.shapesGroup=new Wh({name:"crosshairGroup"}),this.appendChild(this.shapesGroup),this.tagShape=new Wx({name:"tag",style:this.tagCfg}),this.shapesGroup.appendChild(this.tagShape),this.crosshairShape=new Kh({name:"crosshair",style:this.crosshairCfg}),this.shapesGroup.appendChild(this.crosshairShape)},h_.defaultOptions={type:h_.tag="crosshair-base",style:G},h_);function h_(t){t=c_.call(this,A({},h_.defaultOptions,t))||this;return t.init(),t}i(f_,d_=a),Object.defineProperty(f_.prototype,"crosshairPath",{get:function(){var t=this.attributes,e=D(t.startPos,2),n=e[0],e=e[1],t=D(t.endPos,2);return[["M",0,0],["L",t[0]-n,t[1]-e],["Z"]]},enumerable:!1,configurable:!0}),Object.defineProperty(f_.prototype,"localPointer",{get:function(){if(!this.pointer)return this.attributes.startPos;var t=D(this.getPosition(),2),e=t[0],t=t[1],n=D(this.pointer,2);return[n[0]-e,n[1]-t]},enumerable:!1,configurable:!0}),Object.defineProperty(f_.prototype,"isVertical",{get:function(){var t=this.attributes,e=D(t.startPos,2),n=e[0],e=e[1],t=D(t.endPos,2),r=t[0],t=t[1];return n===r&&e!==t},enumerable:!1,configurable:!0}),Object.defineProperty(f_.prototype,"tagShapeSpace",{get:function(){var t=_x(this.tagShape);return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),f_.prototype.update=function(t){d_.prototype.update.call(this,t)},f_.prototype.setPointer=function(t){d_.prototype.setPointer.call(this,t),this.adjustPosition()},f_.prototype.setText=function(t){this.tagShape.update({text:t}),this.adjustTag()},f_.prototype.adjustLayout=function(){this.adjustPosition(),this.adjustTag()},f_.prototype.adjustPosition=function(){var t=D(this.localPointer,2),e=t[0],t=t[1],n=D(this.attributes.startPos,2),r=n[0],n=n[1],r=this.getOrientVal([r,t],[e,n]);this.shapesGroup.setLocalPosition(r)},f_.prototype.adjustTag=function(){var t,e,n=this.attributes,r=n.text,i=D(n.startPos,2),o=i[0],i=i[1],n=D(n.endPos,2),a=n[0],n=n[1];r&&""!==r?(this.tagShape.show(),r=r.position,t=(e=this.tagShapeSpace).width,e=e.height,o=(a=D(this.getOrientVal({start:[-t,-e/2],end:[a-o,-e/2]},{start:[-t/2,-e],end:[-t/2,n-i]})[r],2))[0],e=a[1],this.tagShape.setLocalPosition(o,e)):this.tagShape.hide()},f_.prototype.getOrientVal=function(t,e){return this.isVertical?e:t},f_.defaultOptions={type:f_.tag="line-crosshair",style:pt},t([Rx(20)],f_.prototype,"setPointer",null);var d_,p_=f_;function f_(t){return d_.call(this,Yb({},f_.defaultOptions,t))||this}i(m_,y_=a),Object.defineProperty(m_.prototype,"crosshairPath",{get:function(){return this.createCirclePath()},enumerable:!1,configurable:!0}),m_.prototype.update=function(t){y_.prototype.update.call(this,t)},m_.prototype.setPointer=function(t){var t=D(t,2),e=t[0],t=t[1],e=(y_.prototype.setPointer.call(this,[e,t]),D(this.localPointer,2)),t=e[0],e=e[1],n=D(this.attributes.center,2),r=n[0],n=n[1],t=this.createCirclePath(Math.pow(Math.pow(t-r,2)+Math.pow(e-n,2),.5));this.crosshairShape.attr({path:t})},m_.prototype.adjustLayout=function(){this.tagShape.hide()},m_.prototype.createCirclePath=function(t){var e=this.attributes,n=D(e.center,2),r=n[0],n=n[1],e=e.defaultRadius;return Dx(r,n,t||e)},m_.defaultOptions={type:m_.tag="circle-crosshair",style:J},t([Rx(20)],m_.prototype,"setPointer",null);var y_,g_,v_=m_;function m_(t){return y_.call(this,Yb({},m_.defaultOptions,t))||this}function b_(t){return g_.call(this,Yb({},b_.defaultOptions,t))||this}i(b_,g_=a),Object.defineProperty(b_.prototype,"crosshairPath",{get:function(){return this.createPolygonPath()},enumerable:!1,configurable:!0}),b_.prototype.update=function(t){g_.prototype.update.call(this,t)},Object.defineProperty(b_.prototype,"points",{get:function(){for(var t,e,n,r,i,o,a=this.attributes,s=a.startAngle,l=a.sides,u=2*Math.PI/l,c=[1,0],h=[],d=0;d<l;d+=1)h.push((t=[0,0],e=c,n=[0,0],r=s/180*Math.PI+u*d,o=i=void 0,i=e[0]-n[0],e=e[1]-n[1],o=Math.sin(r),r=Math.cos(r),t[0]=i*r-e*o+n[0],t[1]=i*o+e*r+n[1],t));return h},enumerable:!1,configurable:!0}),b_.prototype.setPointer=function(t){var t=D(t,2),e=t[0],t=t[1],e=(g_.prototype.setPointer.call(this,[e,t]),D(this.localPointer,2)),t=e[0],e=e[1],n=this.attributes.center,r=D(this.intersection([t,e]),2),i=r[0],r=r[1];i&&r&&(t=Ix(n,[t,e])/Ix(n,[i,r]),e=this.createPolygonPath(t),this.crosshairShape.attr({path:e}))},b_.prototype.adjustLayout=function(){this.tagShape.hide()},b_.prototype.createPolygonPath=function(r){var t=this.attributes,i=t.defaultRadius,t=D(t.center,2),o=t[0],a=t[1],t=this.points.map(function(t,e){var t=D(t,2),t=D(go([0,0],[t[0],t[1]],r||i),2),n=t[0],t=t[1];return[0===e?"M":"L",o+n,a+t]});return t.push(["Z"]),t},b_.prototype.intersection=function(t){for(var e,n,r,i,o,a,s,l,t=D(t,2),u=t[0],c=t[1],h=this.points,t=D(this.attributes.center,2),d=t[0],p=t[1],f=1;f<=h.length;f+=1){var y=D(h[f-1],2),g=y[0],y=y[1],v=D(h[f%h.length],2),m=v[0],v=v[1],g=(i=[d,p],g=[g+d,y+p],y=[m+d,v+p],l=s=a=o=v=m=void 0,v=(r=D(r=[u,c],2))[0],r=r[1],o=(i=D(i,2))[0],i=i[1],a=(g=D(g,2))[0],g=g[1],s=(y=D(y,2))[0],y=y[1],l=[],(y-g)*(o-v)==(i-r)*(s-a)?(i-r)*(a-v)==(g-r)*(o-v)&&(Nx(v,o,r,i,a,g)&&Lx(l,a,g),Nx(v,o,r,i,s,y)&&Lx(l,s,y),Nx(a,s,g,y,v,r)&&Lx(l,v,r),Nx(a,s,g,y,o,i)&&Lx(l,o,i)):(m=(v*(i-r)+g*(o-v)-r*(o-v)-a*(i-r))/((s-a)*(i-r)-(o-v)*(y-g)),0<=(y=(a*(y-g)+r*(s-a)-g*(s-a)-v*(y-g))/((o-v)*(y-g)-(s-a)*(i-r)))&&y<=1&&0<=m&&m<=1&&(l[0]=v+y*(o-v),l[1]=r+y*(i-r))),l);0!==g.length&&(e=(s=D(g,2))[0],n=s[1])}return[e,n]},b_.defaultOptions={type:b_.tag="polygon-crosshair",style:c},t([Rx(20)],b_.prototype,"setPointer",null);i(__,x_=jh),Object.defineProperty(__.prototype,"decorationType",{get:function(){var t=this.attributes.type;return t&&"none"!==t&&Xp(t)?t.map(function(t){return Xp(t)?t:[t,"solid"]}):"none"},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"doubleSpacing",{get:function(){return 2*this.attributes.style.lineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"hangingRate",{get:function(){return this.attributes.hangingRate},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"dashedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[2*t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"dottedCfg",{get:function(){var t=this.attributes.style.lineWidth;return{lineDash:[t,t]}},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"solidCfg",{get:function(){return{lineDash:[0,0]}},enumerable:!1,configurable:!0}),Object.defineProperty(__.prototype,"decorationCfg",{get:function(){var r=this,i=this.attributes.style,t=this.decorationType;return"none"===t?[]:t.map(function(t){var t=D(t,2),e=t[0],t=t[1];if("wavy"===t)return E({path:r.getWavyPath(e)},i);if("double"===t)return E({path:r.getDoubleLinePath(e)},i);var n={solid:r.solidCfg,dashed:r.dashedCfg,dotted:r.dottedCfg};return E(E({path:r.getLinePath(e)},i),n[t])})},enumerable:!1,configurable:!0}),__.prototype.update=function(t){var e=this;this.attr(Yb({},this.attributes,t)),this.clear(),this.decorationCfg.forEach(function(t){e.appendChild(new Kh({style:t}))})},__.prototype.clear=function(){this.removeChildren(!0)},__.prototype.getLinePos=function(t){var e=D(this.hangingRate,3),n=e[0],r=e[1],e=e[2],i=this.attributes,o=i.height,i=i.fontSize,a=D([0,0],2),s=a[0],a=a[1],a="overline"===t?(s=(n=D([0,o*n-i/2],2))[0],n[1]):"line-through"===t?(s=(n=D([0,o*r],2))[0],n[1]):(s=(t=D([0,o*e+i/2],2))[0],t[1]);return[s,a]},__.prototype.getLinePath=function(t){var e=this.attributes.width,t=D(this.getLinePos(t),2),n=t[0],t=t[1];return[["M",n,t],["L",n+e,t]]},__.prototype.getDoubleLinePath=function(t){var e,n=this.doubleSpacing,r=this.attributes.width,i=D(this.getLinePos(t),2),o=i[0],i=i[1],a=D([0,0],2),s=a[0],a=a[1];return"line-through"===t&&(s=(e=D([-.5,.5],2))[0],a=e[1]),"underline"===t?(s=(e=D([0,1],2))[0],a=e[1]):"overline"===t&&(s=(e=D([1,0],2))[0],a=e[1]),[["M",o,i+n*s],["L",o+r,i+n*s],["M",o,i+n*a],["L",o+r,i+n*a]]},__.prototype.getWavyPath=function(t){return[]},__.tag="decoration",__.defaultOptions={style:{width:0,height:0,type:"none",hangingRate:[.5,.55,.5],style:{lineWidth:1,stroke:"#000"}}};var x_,w_,k_=__;function __(t){t=x_.call(this,Yb({},__.defaultOptions,t))||this;return t.update({}),t}function S_(t){t=w_.call(this,Yb({},S_.defaultOptions,t))||this;return t.init(),t}i(S_,w_=l),Object.defineProperty(S_.prototype,"textWidth",{get:function(){var e=this;return $p(this.renderText.split("\n").map(function(t){return ix(t,e.font)}))||0},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"textHeight",{get:function(){return _x(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"width",{get:function(){var t=this.attributes.width;return"auto"===t||void 0===t||0===t?this.textWidth:t},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"height",{get:function(){var t=this.attributes.height;return af(t)&&0!==t?t:_x(this.textShape).height},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"lineHeight",{get:function(){var t=this.attributes,e=t.lineHeight,t=t.fontSize;return e&&0!==e?e:t},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"capitalizeWord",{get:function(){return this.attributes.text.split("\n").map(function(t){return t.split(" ").map(function(t){return sx(t,"capitalize")}).join(" ")}).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"text",{get:function(){var t=this.attributes,e=t.transform,t=t.text;return"capitalize"===e?this.capitalizeWord:sx(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"ellipsisText",{get:function(){var e=this,t=this.text,n=this.attributes,r=n.width,n=n.overflow,i="ellipsis"===n?"...":n;return t.split("\n").map(function(t){return rx(t,af(r)?r:1/0,e.font,i)}).join("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"renderText",{get:function(){var t=this.attributes.width,e=this.attributes.overflow;return e&&!["none","clip","wrap"].includes(e)&&af(t)?this.ellipsisText:this.text},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"verticalAlign",{get:function(){return this.attributes.verticalAlign},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"font",{get:function(){return _f(this.attributes,["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","letterSpacing","leading"])},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"fontColor",{get:function(){return this.attributes.fontColor},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"wordWrap",{get:function(){return"wrap"===this.attributes.overflow},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"wordWrapWidth",{get:function(){var t=this.width;return this.wordWrap?t:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"textCfg",{get:function(){var t=this.renderText,e=this.lineHeight,n=this.wordWrap,r=this.wordWrapWidth,i=this.fontColor;return E(E(E({},vx),this.font),{fill:i,wordWrap:n,lineHeight:e,wordWrapWidth:r,text:t,textAlign:"start",textBaseline:"middle"})},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"backgroundCfg",{get:function(){var t=this.width,e=this.height,n=this.attributes.backgroundStyle;return E({x:0,y:0,width:t,height:e},n)},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"decorationLineWidth",{get:function(){var t=this.attributes.fontSize;return Math.floor(2*Math.log10(t))},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"decorationCfg",{get:function(){var t=this.attributes,e=t.decoration,n=t.fontSize,r=this.decorationLineWidth,i=this.fontColor;return this.textShape.getLineBoundingRects().map(function(t){return Yb({},{fontSize:n,style:{stroke:i,lineWidth:r}},e,t)})},enumerable:!1,configurable:!0}),Object.defineProperty(S_.prototype,"clipRectCfg",{get:function(){var t=this.height;return{width:this.attributes.width,height:t}},enumerable:!1,configurable:!0}),S_.prototype.init=function(){this.initShape(),this.update({})},S_.prototype.update=function(t){var e=this;this.attr(Yb({},this.attributes,t)),this.clear(),this.backgroundShape.attr(this.backgroundCfg),this.textShape.attr(this.textCfg),this.layout(),this.decorationGroup.removeChildren(!0),this.decorationCfg.forEach(function(t){e.decorationGroup.appendChild(new k_({style:t}))})},S_.prototype.clear=function(){var t;(this.backgroundShape.style.clipPath=null)!=(t=this.clipRect)&&t.destroy()},S_.prototype.initShape=function(){this.backgroundShape=new nd({name:"background",style:{width:0,height:0}}),this.decorationGroup=new Wh({name:"decoration-group"}),this.textShape=new id({name:"text",style:this.textCfg}),this.textShape.appendChild(this.decorationGroup),this.backgroundShape.appendChild(this.textShape),this.appendChild(this.backgroundShape)},S_.prototype.overflow=function(){var t=this.wordWrap,e=this.attributes,n=e.width,e=e.overflow;e&&"none"!==e&&!t&&af(n)&&"clip"===e&&(this.clipRect=new nd({name:"clip-rect",style:this.clipRectCfg}),this.backgroundShape.style.clipPath=this.clipRect)},S_.prototype.adjustTextAlign=function(){var t=this.textWidth,e=this.attributes,n=e.width,e=e.textAlign;af(n)&&(n=0,n="start"===e?0:"center"===e?(this.width-t)/2:this.width-t,this.textShape.attr({x:n}))},S_.prototype.adjustVerticalAlign=function(){var t=this.verticalAlign,e=this.textHeight,n=0,n="top"===t?e/2:"middle"===t?this.height/2:this.height-e/2;this.textShape.attr({y:n})},S_.prototype.layout=function(){this.adjustTextAlign(),this.adjustVerticalAlign(),this.overflow()},S_.defaultOptions={type:S_.tag="paragraph",style:{text:"",fontColor:"#000",fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fontVariant:"normal",letterSpacing:0,leading:0,fontStyle:"normal",decoration:{type:"none",style:{}},overflow:"none",backgroundStyle:{},transform:"none",tooltip:!1,tooltipWait:300}};var E_,st=E(E({},vx),{fill:"rgba(0,0,0,0.45)",fontSize:10,textAlign:"start",textBaseline:"middle",overflow:"clip"}),T_={default:{width:12,height:12,radius:2,stroke:"#dadada",lineWidth:1,fill:"#ffffff",cursor:"pointer"},selected:{width:12,height:12,radius:2,stroke:"#3471F9",lineWidth:1,fill:"#3471F9",cursor:"pointer"}},M_={path:[["M",3,6],["L","5","8.5"],["L","8.5","4"]],lineWidth:1,cursor:"pointer"};function O_(t){return E_.call(this,A({},O_.defaultOptions,t))||this}i(O_,E_=V),O_.prototype.render=function(t,e){var n=t.label,r=t.boxStyle,i=t.checkedStyle,o=t.checked,t=t.spacing,o=(this.checked=!!o,B(e,".checkbox-content","g").attr("className","checkbox-content").node()),e=mf({},this.checked?T_.selected:T_.default,r),r=mf({},M_,i),t=(this.checkboxBoxShape=B(o,".checkbox-box","rect").attr("className","checkbox-box").style("zIndex",(o.style.zIndex||0)-1).call(N,e).node(),B(this.checkboxBoxShape,".checkbox-checked","path").attr("className","checkbox-box-checked").style("stroke","#ffffff").call(N,r),i=this.checkboxBoxShape,e=Number(t),{x:(r=i.getLocalBounds()).halfExtents[0]?r.max[0]+(e||0):i.style.x,y:r.halfExtents[1]?(r.min[1]+r.max[1])/2:i.style.y}),e=t.x,r=t.y;B(o,".checkbox-label","text").attr("className","checkbox-label").style("x",e).style("y",r).call(N,n)},O_.defaultOptions={type:O_.tag="checkbox",style:{x:0,y:0,label:E({text:""},st),spacing:4,checked:!1}};var P_="gui-poptip",C_="gui-poptip-arrow",A_="gui-poptip-text",N_=((r={})[".".concat(P_)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},r[".".concat(A_)]={"text-align":"center"},r[".".concat(P_,"[data-position='top']")]={transform:"translate(-50%, -100%)"},r[".".concat(P_,"[data-position='left']")]={transform:"translate(-100%, -50%)"},r[".".concat(P_,"[data-position='right']")]={transform:"translate(0, -50%)"},r[".".concat(P_,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},r[".".concat(P_,"[data-position='top-left']")]={transform:"translate(0,-100%)"},r[".".concat(P_,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},r[".".concat(P_,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},r[".".concat(P_,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},r[".".concat(P_,"[data-position='right-top']")]={transform:"translate(0, 0)"},r[".".concat(P_,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},r[".".concat(P_,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},r[".".concat(P_,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},r[".".concat(C_)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},r[".".concat(P_,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},r["[data-position='top'] .".concat(C_)]={bottom:"-2px"},r[".".concat(P_,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},r["[data-position='left'] .".concat(C_)]={right:"-2px"},r[".".concat(P_,"[data-position='right']")]={transform:"translate(5px, -50%)"},r["[data-position='right'] .".concat(C_)]={left:"-2px"},r[".".concat(P_,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},r["[data-position='bottom'] .".concat(C_)]={top:"-2px"},r[".".concat(P_,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},r["[data-position='top-left'] .".concat(C_)]={left:"10px",bottom:"-2px"},r[".".concat(P_,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},r["[data-position='top-right'] .".concat(C_)]={right:"10px",bottom:"-2px"},r[".".concat(P_,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},r["[data-position='left-top'] .".concat(C_)]={right:"-2px",top:"8px"},r[".".concat(P_,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},r["[data-position='left-bottom'] .".concat(C_)]={right:"-2px",bottom:"8px"},r[".".concat(P_,"[data-position='right-top']")]={transform:"translate(5px, 0)"},r["[data-position='right-top'] .".concat(C_)]={left:"-2px",top:"8px"},r[".".concat(P_,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},r["[data-position='right-bottom'] .".concat(C_)]={left:"-2px",bottom:"8px"},r[".".concat(P_,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},r["[data-position='bottom-left'] .".concat(C_)]={top:"-2px",left:"8px"},r[".".concat(P_,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},r["[data-position='bottom-right'] .".concat(C_)]={top:"-2px",right:"8px"},r),L_=void 0;var I_;function R_(t){var e=t&&document.getElementById(t);return e||((e=document.createElement("div")).setAttribute("id",t),document.body.appendChild(e)),e}function j_(t){var n,r;return n=R_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r=r||n.apply(L_,t)}(t)}function D_(t){t=I_.call(this,A({style:{id:"gui-poptip"}},D_.defaultOptions,t))||this;return t.visibility="visible",t.map=new Map,t.domStyles="",t.init(),t}i(D_,I_=l),Object.defineProperty(D_.prototype,"visible",{get:function(){return"visible"===this.visibility},enumerable:!1,configurable:!0}),D_.prototype.init=function(){this.initShape(),this.update()},D_.prototype.update=function(t){this.attr(A({},this.style,t)),this.visibility=this.style.visibility,this.updatePoptipElement()},D_.prototype.bind=function(s,l){var u,t,e,c=this;s&&(u=this.style.text,e=function(){c.hideTip()},s.addEventListener("mousemove",t=function(t){var e=s,n=c.style,r=u,i=(l&&(a=(i="function"==typeof l?l.call(null,t):l).html,o=i.target,i=I(i,["html","target"]),n=mf({},c.style,i),!o&&!1!==o||(e=o),"string"==typeof a&&(r=a)),n.position),o=n.arrowPointAtCenter,a=n.follow,n=n.offset;e?(e=(t=D(function(t,e,n,r,i,o){if(void 0===i&&(i=!1),o=void 0===o?!1:o)return[t,e];var a=(o=n.getBoundingClientRect()).x,s=o.y,l=o.width,u=o.height;switch(r){case"top":return i?[a+l/2,s]:[t,s];case"left":return i?[a,s+u/2]:[a,e];case"bottom":return i?[a+l/2,s+u]:[t,s+u];case"right":return i?[a+l,s+u/2]:[a+l,e];case"top-right":case"right-top":return[a+l,s];case"left-bottom":case"bottom-left":return[a,s+u];case"right-bottom":case"bottom-right":return[a+l,s+u];default:return[a,s]}}(t.clientX,t.clientY,e,i,o,a),2))[0],o=t[1],c.showTip(e,o,{text:r,position:i,offset:n})):c.hideTip()}),s.addEventListener("mouseleave",e),this.map.set(s,[t,e]))},D_.prototype.unbind=function(t){var e,n;this.map.has(t)&&(e=(n=D(this.map.get(t)||[],2))[0],n=n[1],e&&t.removeEventListener("mousemove",e),n&&t.removeEventListener("mouseleave",n),this.map.delete(t))},D_.prototype.clear=function(){this.container.innerHTML=""},D_.prototype.destroy=function(){var t,e=this;T([],D(this.map.keys()),!1).forEach(function(t){return e.unbind(t)}),null!=(t=this.container)&&t.remove()},D_.prototype.showTip=function(t,e,n){var r,i=kf(n,"text");i&&"string"!=typeof i||(this.applyStyles(),t&&e&&n&&(r=n.offset,(n=n.position)&&this.container.setAttribute("data-position",n),this.setOffsetPosition(t,e,r),"string"==typeof i&&(n=this.container.querySelector(".".concat(A_)))&&(n.innerHTML=i),this.visibility="visible",this.container.style.visibility="visible"))},D_.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},D_.prototype.getContainer=function(){return this.container},D_.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(P_).concat(t?" ".concat(t):"")},D_.prototype.initShape=function(){var t=this,e=this.style.id;this.container=j_(e),this.container.setAttribute("class",this.getClassName()),this.container.addEventListener("mousemove",function(){return t.showTip()}),this.container.addEventListener("mouseleave",function(){return t.hideTip()})},D_.prototype.updatePoptipElement=function(){var t=this.container,e=(this.clear(),this.style),n=e.id,r=e.template,e=e.text,n=(this.container.setAttribute("id",n),this.container.setAttribute("class",this.getClassName()),'<span class="'.concat(C_,'"></span>'));t.innerHTML=n,ef(r)?t.innerHTML+=r:r&&yf(r)&&t.appendChild(r),e&&(t.getElementsByClassName(A_)[0].textContent=e),this.applyStyles(),this.container.style.visibility=this.visibility},D_.prototype.applyStyles=function(){var t,e=Yb({},N_,this.style.domStyles),e=Object.entries(e).reduce(function(t,e){var e=D(e,2),n=e[0],e=e[1],e=Object.entries(e).reduce(function(t,e){var e=D(e,2),n=e[0],e=e[1];return"".concat(t).concat(n,": ").concat(e,";")},"");return"".concat(t).concat(n,"{").concat(e,"}")},"");this.domStyles!==e&&(this.domStyles=e,(t=this.container.querySelector("style"))&&this.container.removeChild(t),(t=document.createElement("style")).innerHTML=e,this.container.appendChild(t))},D_.prototype.setOffsetPosition=function(t,e,n){var n=D(n=void 0===n?this.style.offset:n,2),r=n[0],n=n[1],n=void 0===n?0:n;this.container.style.left="".concat(t+(void 0===r?0:r),"px"),this.container.style.top="".concat(e+n,"px")},D_.tag="poptip",D_.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:N_,template:'<div class="'.concat(A_,'"></div>')}};class B_ extends Bh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawText(),this.drawBackground(),this.drawConnector(),this.drawPoints()}get endPoint(){const t=this.style["connector"];var e,n;return Array.isArray(null===t||void 0===t?void 0:t.path)&&t.path.length?([[,e,n]]=t.path.slice(-1),{x:e,y:n}):{x:0,y:0}}drawText(){var t=this.attributes,e=t["textAlign"],t=I(t,["connector","startMarker","endMarker","background","transform","textAlign"]),{x:n,y:r}=this.endPoint;this.textShape=rb(this.textShape||this.appendChild(new id({}))).call(ob,t).style("x",+n).style("y",+r).style("textAlign",e||(n<0?"right":0<n?"left":"center")).node()}drawBackground(){var t,e,n,r,i,o,a,s,l,u=this.style["background"];u?(t=u.padding,u=I(u,["padding"]),[t=0,e=0,n=t,r=e]=t||[],i=this.getEulerAngles(),{min:[o,a],halfExtents:[s,l]}=(this.setEulerAngles(0),this.textShape.getLocalBounds()),this.setEulerAngles(i),this.background=rb(this.background||this.appendChild(new nd({}))).style("zIndex",-1).style("x",o-r).style("y",a-t).style("width",2*s+r+e).style("height",2*l+t+n).call(ob,u).node()):(this.background&&this.removeChild(this.background,!0),this.background=void 0)}drawConnector(){var t,e=this.style["connector"];e?(t=e.path||function(t){var{min:[t,e],max:[n,r]}=t.getLocalBounds();let i=0,o=0;return 0<t&&(i=t),n<0&&(i=n),0<e&&(o=e),r<0&&(o=r),[["M",0,0],["L",i,o]]}(this.background||this.textShape),this.connector=rb(this.connector||this.appendChild(new Kh({}))).style("zIndex",-1).style("stroke","black").style("lineWidth",1).call(ob,e).style("path",t).node()):(this.connector&&this.removeChild(this.connector,!0),this.connector=void 0)}drawPoints(){var{startMarker:t,endMarker:e}=this.style;this.drawStartMarker(t),this.drawEndMarker(e&&Object.assign(Object.assign({},e),this.endPoint))}drawStartMarker(t){var e=this.startMarkerPoint;t?(e||(this.startMarkerPoint=this.appendChild(new L({style:{symbol:"circle",size:4}}))),this.startMarkerPoint.update(t)):(e&&this.removeChild(e,!0),this.startMarkerPoint=void 0)}drawEndMarker(t){var e=this.endMarkerPoint;t?(e||(this.endMarkerPoint=this.appendChild(new L({style:{symbol:"circle",size:4}}))),this.endMarkerPoint.update(t)):(e&&this.removeChild(e,!0),this.endMarkerPoint=void 0)}}const F_=t=>{const l=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,text:r="",fontSize:i=12,rotate:o=0,transform:a=""}=e,[[t,s]]=t;return rb(new B_({})).style("x",t).style("y",s).style("text",String(r)).style("stroke",e).style("fill",e).style("fontSize",i).style("transform",a+`rotate(${+o}deg)`).call(ob,l).node()}};F_.props={defaultEnterAnimation:"fadeIn"};class z_ extends Bh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawMarker(),this.drawText()}drawMarker(){const t=this.attributes,{size:s=24}=t,e=I(t,["size"]);this.badgeMarker=this.badgeMarker||this.appendChild(new L({})),this.badgeMarker.className="badge-marker",this.badgeMarker.update(Object.assign(Object.assign({symbol:()=>{var t=s/2,e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,i]=[-e,e-n],[o,a]=[0,0],[e,n]=[e,e-n];return[["M",r,i],["A",t,t,0,1,1,e,n],["L",o,a],["Z"]]},size:s},e),{x:0,y:0}))}drawText(){var t=function(t){var{min:t,max:e}=t.getLocalBounds();return{x:(t[0]+e[0])/2,y:(t[1]+e[1])/2}}(this.badgeMarker),{content:e="",textStyle:n}=this.style,{fontSize:n=10,fill:r="#333"}=n||{};this.badgeText=this.badgeText||this.appendChild(new id({})),rb(this.badgeText).attr("className","badge-text").style("x",t.x).style("y",t.y).style("textAlign","center").style("textBaseline","middle").call(ob,{fill:r,fontSize:n,text:e}).node()}}const V_=t=>{const o=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,text:r=""}=e,[[t,i]]=t;return rb(new z_({})).style("x",t).style("y",i).style("text",String(r)).style("stroke",e).style("fill",e).call(ob,o).node()}};function G_(t,e,n,r){const i=t.slice(0,t.length/2),o=t.slice(t.length/2);var a,s,l,u,c;if(Fg(r)){const h=r.getCenter();t=e["transform"];return r=M1().curve(O1),a=r.curve,s=r.lineX0,l=r.lineX1,u=r.lineY0,c=r.lineY1,r.angle=r.x,delete r.x,r.startAngle=r.x0,delete r.x0,r.endAngle=r.x1,delete r.x1,r.radius=r.y,delete r.y,r.innerRadius=r.y0,delete r.y0,r.outerRadius=r.y1,delete r.y1,r.lineStartAngle=function(){return A1(s())},delete r.lineX0,r.lineEndAngle=function(){return A1(l())},delete r.lineX1,r.lineInnerRadius=function(){return A1(u())},delete r.lineY0,r.lineOuterRadius=function(){return A1(c())},delete r.lineY1,r.curve=function(t){return arguments.length?a(C1(t)):a()._curve},[r.angle((t,e)=>Z1(q1(i[e],h))).outerRadius((t,e)=>X1(i[e],h)).innerRadius((t,e)=>X1(o[e],h)).curve(n)(o),`translate(${h[0]}, ${h[1]}) `+(t||"")]}return[M1().x((t,e)=>i[e][0]).y1((t,e)=>i[e][1]).y0((t,e)=>o[e][1]).curve(n)(i),""]}V_.props={defaultEnterAnimation:"fadeIn"};const H_=t=>{const{curve:a,gradient:s=!1}=t,l=I(t,["curve","gradient"]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:r=r,seriesColor:i,seriesX:o}=e,[t,e]=G_(t,e,a,n),n=s&&i?ub(i,o):r;return rb(new Kh({})).style("d",t).style("fill",n).style("stroke",n).style("transform",e).call(ob,l).node()}},W_=(H_.props={defaultEnterAnimation:"fadeIn"},o=>(t,e,n,r)=>{var i=Fg(n)?G1:_1;return H_(Object.assign({curve:i},o))(t,e,n,r)}),U_=(W_.props=Object.assign({},H_.props),t=>{const{alpha:o=.5}=t,a=I(t,["alpha"]);return(t,e,n,r)=>{const i=Fg(n)?z1:B1;return H_(Object.assign({curve:i.alpha(o)},a))(t,e,n,r)}}),Y_=(U_.props=Object.assign({},H_.props),t=>{const s=t["arrow"],l=I(t,["arrow"]);return(t,e,n,r)=>{var i,r=r["defaultColor"],{color:e=r,transform:r}=e,[t,o]=t;const a=t1();return a.moveTo(...t),a.lineTo(...o),s&&([t,i]=sb(t,o,s),a.moveTo(...o),a.lineTo(...t),a.moveTo(...o),a.lineTo(...i)),rb(new Kh).style("d",a.toString()).style("stroke",e).style("transform",r).call(ob,l).node()}}),q_=(Y_.props={defaultEnterAnimation:"fadeIn"},t=>{const s=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,src:r="",size:i=32,transform:o=""}=e,[[t,a]]=t,t=t-Number(i)/2,a=a-Number(i)/2;return rb(new Yh).style("x",t).style("y",a).style("width",i).style("height",i).style("img",r).style("stroke",e).style("transform",o).call(ob,s).node()}});q_.props={defaultEnterAnimation:"fadeIn"};const X_=t=>{const o=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e;const i=function(i,t){const o=t1();if(Fg(t)){const a=t.getCenter(),e=[...i,i[0]],s=e.map(t=>X1(t,a));return e.forEach((t,e)=>{var n,r;0===e?o.moveTo(t[0],t[1]):(n=s[e],r=i[e-1],void 0!==(e=s[e-1])&&Math.abs(n-e)<1e-10?lb(o,r,t,a,n):o.lineTo(t[0],t[1]))}),o.closePath(),o}return ab(o,i)}(t,n);return rb(new Kh).style("d",i.toString()).style("stroke",e).style("fill",e).style("transform",r).call(ob,o).node()}};X_.props={defaultEnterAnimation:"fadeIn"};const Z_=t=>{const o=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e;const i=function(t,e){const n=t1();var r,i,o,a,s,l,u,c;return Fg(e)?([r,i]=e=e.getCenter(),o=Z1(q1(t[0],e)),a=Z1(q1(t[1],e)),s=X1(e,t[2]),l=X1(e,t[3]),u=X1(e,t[8]),c=X1(e,t[10]),e=X1(e,t[11]),n.moveTo(...t[0]),n.arc(r,i,s,o,a),n.arc(r,i,s,a,o,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(r,i,l,o,a),n.lineTo(...t[6]),n.arc(r,i,c,a,o,!0),n.closePath(),n.moveTo(...t[8]),n.arc(r,i,u,o,a),n.arc(r,i,u,a,o,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(r,i,e,o,a),n.arc(r,i,e,a,o,!0)):(n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13])),n}(t,n);return rb(new Kh).style("d",i.toString()).style("stroke",e).style("fill",e).style("transform",r).call(ob,o).node()}},K_=(Z_.props={defaultEnterAnimation:"fadeIn"},a=>(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r,size:i}=e,[t,o]=t[0];return rb(new Kh).style("d",kb(t,o,+i)).style("lineWidth",0).style("stroke",e).style("transform",r).style("fill",e).call(ob,a).node()}),$_=(K_.props={defaultEnterAnimation:"fadeIn"},(...t)=>X_(...t)),J_=($_.props={defaultEnterAnimation:"fadeIn"},(...t)=>Y_(...t)),Q_=(J_.props={defaultEnterAnimation:"fadeIn"},t=>{const a=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e,[t,i]=t;const o=t1();return o.moveTo(t[0],t[1]),o.bezierCurveTo(t[0]/2+i[0]/2,t[1],t[0]/2+i[0]/2,i[1],i[0],i[1]),rb(new Kh).style("d",o.toString()).style("stroke",e).style("transform",r).call(ob,a).node()}});Q_.props={defaultEnterAnimation:"fadeIn"};const tS=t=>{const{cornerRatio:a=1/3}=t,s=I(t,["cornerRatio"]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e,[t,i]=t;const o=function(t,e,n,r){const i=t1();var o,a;return Fg(n)?(a=X1(t,o=n.getCenter()),a=(X1(e,o)-a)*r+a,i.moveTo(t[0],t[1]),lb(i,t,e,o,a),i.lineTo(e[0],e[1])):(Bg(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1])):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r)),i.lineTo(e[0],e[1])),i}(t,i,n,a);return rb(new Kh).style("d",o.toString()).style("stroke",e).style("transform",r).call(ob,s).node()}},eS=(tS.props={defaultEnterAnimation:"fadeIn"},t=>{const u=I(t,[]);return(t,e,n,r)=>{var i,o,a,r=r["defaultColor"],{color:e=r,transform:r}=e,[t,s]=t;const l=t1();return l.moveTo(t[0],t[1]),Fg(n)?(n=n.getCenter(),l.quadraticCurveTo(n[0],n[1],s[0],s[1])):([[n,i],[o,a]]=[t,s],n=[(n+o)/2,(i+a)/2],o=X1(t,s)/2,lb(l,t,s,n,o)),rb(new Kh).style("d",l.toString()).style("stroke",e).style("transform",r).call(ob,u).node()}});eS.props={defaultEnterAnimation:"fadeIn"};const nS=t=>{const o=I(t,[]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e;const i=function(t,e){var n,[t,r,i,o]=t;const a=t1();return Fg(e)?(n=X1(e=e.getCenter(),t),a.moveTo(t[0],t[1]),a.quadraticCurveTo(e[0],e[1],i[0],i[1]),lb(a,i,o,e,n),a.quadraticCurveTo(e[0],e[1],r[0],r[1]),lb(a,r,t,e,n),a.closePath()):(a.moveTo(t[0],t[1]),a.bezierCurveTo(t[0]/2+i[0]/2,t[1],t[0]/2+i[0]/2,i[1],i[0],i[1]),a.lineTo(o[0],o[1]),a.bezierCurveTo(o[0]/2+r[0]/2,o[1],o[0]/2+r[0]/2,r[1],r[0],r[1]),a.lineTo(t[0],t[1]),a.closePath()),a}(t,n);return rb(new Kh).style("d",i.toString()).style("fill",e).style("stroke",e).style("transform",r).call(ob,o).node()}};nS.props={defaultEnterAnimation:"fadeIn"};const rS=t=>{const a=I(t,[]);return(t,e,n,r)=>{var{defaultColor:r,defaultSize:i}=r,{color:r=r,size:i=i}=e,o=(t=t,Fg(o=n)?(o=o.getCenter(),x1()({startAngle:0,endAngle:2*Math.PI,outerRadius:X1(t[0],o),innerRadius:X1(t[1],o)})):T1().x(t=>t[0]).y(t=>t[1])(t)),t=function(t,e){if(!Fg(t))return e;var[t,n]=t.getCenter();return`translate(${t}, ${n}) `+(e||"")}(n,e.transform);return rb(new Kh({})).style("d",o).style("stroke",r).style("lineWidth",i).style("transform",t).call(ob,a).node()}};rS.props={defaultEnterAnimation:"fadeIn"};class iS extends Bh{constructor(t){super(t)}connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){this.drawPath(),this.drawEndMarker()}drawPath(){var t=this.attributes,e=t["connectorPath"],t=I(t,["connectorPath","class"]);this.connector=rb(this.connector||this.appendChild(new Kh({}))).style("path",e).call(ob,t).node()}drawEndMarker(){var{stroke:t,endMarker:e}=this.style;this.endMarker=this.endMarker||this.appendChild(new L({})),this.endMarker.update(Object.assign({size:8,fill:t},e))}}function oS(t,e,n){return[["M",t-n,e+2*n],["L",t,e],["L",t+n,e+2*n],["Z"]]}function aS(t,e,n){return[["M",t,e],["L",t-n,e-2*n],["L",t+n,e-2*n],["Z"]]}function sS(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}const lS=t=>{const{direction:o="upward",offset:a=12,endMarker:s}=t,l=I(t,["direction","offset","endMarker"]);return(t,e,n,r)=>{var r=r["defaultColor"],{color:e=r,transform:r}=e,n=function(t,e,n,r){var[e,i]=e;return Bg(t)?[e,[t="downward"===n?Math.min(e[0],i[0])-r:Math.max(e[0],i[0])+r,e[1]],[t,i[1]],i]:(t="downward"===n?Math.max(e[1],i[1])+r:Math.min(e[1],i[1])-r,[e,[e[0],t],[i[0],t],i])}(n,t,o,a),t=(t=n,T1().x(t=>t[0]).y(t=>t[1])(t)),[,,,i]=n;return rb(new iS({})).style("connectorPath",t).style("stroke",e).style("transform",r).style("endMarker",Object.assign({x:i[0],y:i[1],symbol:function(t){var[,,t,e]=t;return e[0]<t[0]?sS:t[1]>e[1]?oS:aS}(n)},s)).call(ob,l).node()}},uS=(lS.props={defaultEnterAnimation:"fadeIn"},t=>{const{label:s={}}=t;return(t,e,n,r)=>{const i=e.element;var{min:o,max:a}=i.getRenderBounds(),[o]=o,[a]=a,a=a-o,o=e["label"];return rb(new id).style("x",a/2).style("y",0).style("text",""+o).style("fontSize",12).style("dy","-2px").style("textAlign","center").call(ob,s).node()}}),cS=(uS.props={},t=>{return Object.assign({},{defaultColor:"#5B8FF9",defaultCategory10:"category10",defaultCategory20:"category20",defaultSize:1,elementActiveStroke:"black",enter:{duration:300,fill:"both",delay:0},title:{fill:"rgba(0,0,0,0.85)",fontSize:14,fontWeight:"bold"},subtitle:{fill:"rgba(0,0,0,0.65)",fontSize:10}},t)});function hS(r,t,e,i,o){var n;const a=(null==(n=r.getTicks)?void 0:n.call(r))||t,s=(null==(n=r.getFormatter)?void 0:n.call(r))||e;return Fg(o)||Bg(o)?a.map(t=>{var e,n=(null==(n=r.getBandWidth)?void 0:n.call(r,t))/2||0,n=r.map(t)+n;return{value:Bg(o)&&null!=(e=r.getTicks)&&e.call(r)?1-n:n,text:s(t)}}):a.map(t=>{var e=(null==(e=r.getBandWidth)?void 0:e.call(r,t))/2||0,e=r.map(t)+e;n=e;var n=function(t,e,n){var{width:n,height:r}=n.getOptions();if("bottom"===e){const i=t[0],o=new vm({domain:[0,n],range:[0,1]});return o.map(i)}const i=t[1],o=new vm({domain:[0,r],range:[0,1]});return o.map(i)}(o.map("bottom"===i?[n,1]:[0,n]),i,o);return{value:zg(o)?e:n,text:s(t)}})}function dS(t,e,n,r,i){return Fg(n)||zg(n)?[]:t.map(t=>{return{points:function(t,e,n,r,i){var[r,o]=r,[i,a]=i,[n,s]=n.getSize();let l,u,c,h;return"bottom"===e||"top"===e?(l=u=r+(i-r)*t,c=o,h="bottom"===e?o-s:o+s):(c=h=o+(a-o)*t,l=r,u="left"===e?r+n:r-n),[[l,c],[u,h]]}(t.value,e,n,r,i)}})}cS.props={};const pS=t=>{const{position:s,formatter:l=t=>""+t}=t;return(t,e,n,r)=>{var[i,o]=n.getCenter(),{domain:e,bbox:a}=e,i=[i+a.x,o+a.y],o=hS(t,e,l,s,n),e=Math.min(a.width,a.height)/2,n=t.getOptions().guide||{},a=n["grid"],t=a?function(t,e,n,r,i){const[o,a]=e;return t.map(({value:t})=>{t=(r-n)*t+n;return{points:[[o,a],[o+i*Math.cos(t*Math.PI/180),a+i*Math.sin(t*Math.PI/180)]]}})}(o,i,-90,270,e):[];return new T2({style:A({},{center:i,radius:e,startAngle:-90,endAngle:270,ticks:o,axisLine:{style:{lineWidth:0,strokeOpacity:0}},grid:{items:t,lineStyle:{stroke:"#1b1e23",strokeOpacity:.1,lineDash:[0,0]}},tickLine:{len:4,style:{lineWidth:1,stroke:"#BFBFBF"}},label:{align:"tangential",tickPadding:2}},n)})}},fS=t=>{const{position:m,title:b=!0,formatter:x=t=>""+t}=t;return(t,e,n,r)=>{var{domain:e,field:i,bbox:o}=e,{startPos:o,endPos:a,labelOffset:s,titlePosition:l,titlePadding:u,titleRotate:c,verticalFactor:h,titleOffsetY:d,label:p=!0,axisLine:f,tickLine:y=!0}=function(t,e,n){var r,{x:i,y:o,width:a,height:s}=e;return"bottom"===t?{startPos:[i,o],endPos:[i+a,o],labelOffset:8,titlePosition:"end",titlePadding:2,titleRotate:0,verticalFactor:1}:"left"===t||"centerHorizontal"===t?{startPos:[i+a,o],endPos:[i+a,o+s],titlePosition:"center",titlePadding:6,titleRotate:-90,labelAlign:"end",labelOffset:4,verticalFactor:-1}:"right"===t?{startPos:[i,o],endPos:[i,o+s],titlePosition:"center",titlePadding:16,titleRotate:-90,labelAlign:"start",labelOffset:4,verticalFactor:1}:"arcY"===t?([t,n]=n.getCenter(),r=Math.min(e.width,e.height)/2,{startPos:[t+e.x,n+e.y-r],endPos:[t+e.x,n+e.y],titlePosition:"start",titlePadding:4,titleOffsetY:0,titleRotate:-90,labelOffset:4,verticalFactor:-1,axisLine:!1}):{startPos:[i,o+s],endPos:[i+a,o+s],titlePosition:"end",titlePadding:2,titleRotate:0,labelOffset:4,verticalFactor:-1}}(m,o,n),e=hS(t,e,x,m,n),g=t.getOptions().guide||{},{grid:v=!!t.getTicks}=g,v=v?dS(e,m,n,o,a):[];return new g2({style:A(Object.assign({startPos:o,endPos:a,verticalFactor:h,ticks:e,label:p?{tickPadding:s,autoHide:!1,style:{}}:null,axisLine:f?{stroke:"#BFBFBF"}:null,grid:{items:v,lineStyle:{stroke:"#1b1e23",strokeOpacity:.05,lineDash:[0,0]}},tickLine:y?{len:4,style:{lineWidth:1,stroke:"#BFBFBF"}}:null},i&&b&&{title:{content:Array.isArray(i)?i[0]:i,titleAnchor:t.getTicks?l:"center",style:{fontWeight:"bold",fillOpacity:1,dy:d},titlePadding:u,rotate:c}}),g)})}},yS=i=>{const o=i["position"];return(t,e,n,r)=>("arc"===o?pS:fS)(i)(t,e,n,r)},gS=(yS.props={defaultPosition:"left",defaultSize:45,defaultOrder:0},t=>yS(t)),vS=(gS.props=Object.assign(Object.assign({},yS.props),{defaultPosition:"bottom"}),t=>yS(t)),mS=(vS.props=Object.assign(Object.assign({},yS.props),{defaultPosition:"left"}),t=>{const{position:f,formatter:y=t=>""+t}=t;return(e,t,n,r)=>{const{domain:i,field:o,bbox:a}=t;var{x:t,y:s,width:l,height:u}=a,c=i.map(t=>({id:t,name:y(t),color:e.map(t)})),h=e.getOptions().guide||{},{cols:d,autoWrap:p}=h,h=I(h,["cols","autoWrap"]),d=p&&d?l/d:void 0,c=A({},Object.assign(Object.assign({items:c,x:t,y:s,orient:["right","left"].includes(f)?"vertical":"horizontal",maxWidth:l,maxHeight:u,autoWrap:p,maxItemWidth:d,itemWidth:d,spacing:[8,0],itemName:{style:{fontSize:12,fillOpacity:1,fill:"#000",fontWeight:"lighter",active:{fillOpacity:.8},inactive:{fill:"#d8d8d8"},unchecked:{fill:"#d8d8d8"}}}},o&&{title:{content:Array.isArray(o)?o[0]:o,style:{fontSize:12,fontWeight:"bold",fillOpacity:1}}}),{itemMarker:{size:8,symbol:"circle",style:{fillOpacity:1,inactive:{fillOpacity:.2},unchecked:{fill:"#d8d8d8",stroke:"#d8d8d8"}}},itemBackgroundStyle:{fill:"transparent"}}),h);return new Ek({className:"category-legend",style:c})}}),bS=(mS.props={defaultPosition:"top",defaultOrder:1,defaultSize:40},t=>(e,t,n,r)=>{const{field:i,domain:o,bbox:a}=t;var{x:t,y:s}=a,l=(null==(l=e.getTicks)?void 0:l.call(e))||[],[u,c]=o;return new Gk({style:Object.assign(Object.assign({x:t,y:s,rail:{length:120,size:12,ticks:l},min:u,max:c,indicator:null,handle:null},i&&{title:{content:Array.isArray(i)?i[0]:i,style:{fontSize:12}}}),{color:o.map(t=>e.map(t))})})});function xS(e){return class extends Bh{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,e;null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)}update(t={}){var e;this.attr(A({},this.attributes,t)),null!=(e=(t=this.descriptor).render)&&e.call(t,this.attributes,this)}}}function wS(t,e,n){return t.querySelector(e)?rb(t).select(e):rb(t).append(n)}bS.props={defaultPosition:"top",defaultOrder:1,defaultSize:40};const kS=xS({render(t,e){const{text:n,style:r,subtitle:i,subtitleStyle:o}=t,a=wS(e,".title","text").attr("className","title").style("fontSize",14).style("textBaseline","top").style("text",n).call(ob,r||{}).node();t=a.getLocalBounds();wS(e,".sub-title","text").attr("className","sub-title").style("y",t.max[1]+((null===o||void 0===o?void 0:o.spacing)||0)).style("fontSize",12).style("textBaseline","top").call(t=>{if(!i)return t.node().remove();t.node().attr(Object.assign({text:i},o))})}}),_S=t=>{const{text:o,style:a,subtitle:s,subtitleStyle:l}=t;return(t,e,n,r)=>{var{x:e,y:i}=e.bbox;return new kS({style:A({},{style:r.title,subtitleStyle:r.subtitle},{x:e,y:i,style:a,text:o,subtitle:s,subtitleStyle:l})})}};_S.props={defaultPosition:"top",defaultOrder:2,defaultSize:30};class SS{constructor(t){this.$value=t}static of(t){return new SS(t)}call(t,...e){return this.$value=t(this.$value,...e),this}value(){return this.$value}}function ES(t,e,n){return SS.of({}).call(TS,t).call(TS,e).call(TS,n).value()}function TS(t,e){for(var[n,r]of Object.entries(e))void 0!==r&&(t[n]=e[n]);return t}const MS=h=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],a=o.style["transform"],{fillOpacity:s,strokeOpacity:l,opacity:u}=o.parsedStyle,[r,t]=Bg(r)?[[0,t],"scale(1, 0.0001)"]:[[0,0],"scale(0.0001, 1)"],t=[{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0},{transform:(a+" "+t).trimStart(),fillOpacity:s.value,strokeOpacity:l.value,opacity:u.value,offset:.01},{transform:(a+" scale(1, 1)").trimStart()}];o.setOrigin(r);const c=o.animate(t,ES(i,n,h));return c.finished.then(()=>o.setOrigin(0,0)),c}},OS=h=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],a=o.style["transform"],{fillOpacity:s,strokeOpacity:l,opacity:u}=o.parsedStyle,[r,t]=Bg(r)?[[0,t],"scale(1, 0.0001)"]:[[0,0],"scale(0.0001, 1)"],s=[{transform:(a+" scale(1, 1)").trimStart()},{transform:(a+" "+t).trimStart(),fillOpacity:s.value,strokeOpacity:l.value,opacity:u.value,offset:.99},{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0}];o.setOrigin(r);const c=o.animate(s,ES(i,n,h));return c.finished.then(()=>o.setOrigin(0,0)),c}},PS=h=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],a=o.style["transform"],{fillOpacity:s,strokeOpacity:l,opacity:u}=o.parsedStyle,[r,t]=Bg(r)?[[0,0],"scale(0.0001, 1)"]:[[0,t],"scale(1, 0.0001)"],t=[{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0},{transform:(a+" "+t).trimStart(),fillOpacity:s.value,strokeOpacity:l.value,opacity:u.value,offset:.01},{transform:(a+" scale(1, 1)").trimStart()}];o.setOrigin(r);const c=o.animate(t,ES(i,n,h));return c.finished.then(()=>o.setOrigin(0,0)),c}},CS=h=>{return(t,e,n,r,i)=>{const[o]=t;var t=o.getBoundingClientRect()["height"],a=o.style["transform"],{fillOpacity:s,strokeOpacity:l,opacity:u}=o.parsedStyle,[r,t]=Bg(r)?[[0,0],"scale(0.0001, 1)"]:[[0,t],"scale(1, 0.0001)"],s=[{transform:(a+" scale(1, 1)").trimStart()},{transform:(a+" "+t).trimStart(),fillOpacity:s.value,strokeOpacity:l.value,opacity:u.value,offset:.99},{transform:(a+" "+t).trimStart(),fillOpacity:0,strokeOpacity:0,opacity:0}];o.setOrigin(r);const c=o.animate(s,ES(i,n,h));return c.finished.then(()=>o.setOrigin(0,0)),c}},AS=l=>(t,e,n,r,i)=>{const[o]=t;var{fillOpacity:t,strokeOpacity:a,opacity:s}=o.parsedStyle,t=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:t.value,strokeOpacity:a.value,opacity:s.value}];return o.animate(t,ES(i,n,l))},NS=(AS.props={},l=>(t,e,n,r,i)=>{const[o]=t;var{fillOpacity:t,strokeOpacity:a,opacity:s}=o.parsedStyle,t=[{fillOpacity:t.value,strokeOpacity:a.value,opacity:s.value},{fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(t,ES(i,n,l))});function LS(t,e){const n={};for(const i of e){var r=t.style[i];r&&(n[i]=r)}return n}function IS(t,e){var[n,r,i,t]=function(t){var{min:t,max:e}=t.getLocalBounds(),[t,n]=t,[e,r]=e;return[t,n,e-t,r-n]}(t),o=Math.ceil(Math.sqrt(e/(t/i)));const a=[];var s=t/Math.ceil(e/o);let l=0,u=e;for(;0<u;){var c=Math.min(u,o),h=i/c;for(let t=0;t<c;t++){var d=n+t*h,p=r+l*s;a.push(function(t){var[t,e,n,r]=t;return`
    M ${t} ${e}
    L ${t+n} ${e}
    L ${t+n} ${e+r}
    L ${t} ${e+r}
    Z
  `}([d,p,h,s]))}u-=c,l+=1}return a}function RS(t,e,n,r){var i=su(e),o=su(n);if(void 0===i||void 0===o)return null;var a=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"],i=[Object.assign({path:i},LS(e,a)),Object.assign({path:o},LS(n,a))],e=t.animate(i,r);return t.style.transform="scale(1, 1)",t.style.transform="none",e}NS.props={};const jS=y=>(t,e,n,r,i)=>{[o="pack"]=[y.split];var o="function"==typeof o?o:IS,i=ES(i,n,y),n=t["length"],a=e["length"];if(1===n&&1===a||1<n&&1<a)return[s]=t,[u]=e,RS(s,s,u,i);if(1===n&&1<a){var[s]=t;{var l=s,u=e,c=i,s=o;l.style.visibility="hidden";const p=s(l,u.length);return u.map((t,e)=>{return RS(t,new Kh({style:{path:p[e],fill:l.style.fill}}),t,c)})}}if(1<n&&1===a){var[n]=e;{var a=t,h=n,d=i;const f=(e=o)(h,a.length);var{fillOpacity:e,strokeOpacity:t,opacity:n}=h.parsedStyle,e=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:e.value,strokeOpacity:t.value,opacity:n.value}],t=h.animate(e,d);return[...a.map((t,e)=>{return RS(t,t,new Kh({style:{path:f[e],fill:h.style.fill}}),d)}),t]}}return null},DS=(jS.props={},()=>t=>{const{event:e,shared:n}=t;var{target:r,offsetX:i,offsetY:o}=e;const a=(r||{})["className"];return n.mouseX=i,n.mouseY=o,a&&a.includes("element")?n.selectedElements=[r]:n.selectedElements=[],t}),BS=(DS.props={},t=>{const a=t["multiple"];return t=>{const{event:e,shared:n}=t,r=e.composedPath();var i=r.find(t=>"legend-item"===t.className);const o=a&&n.triggerInfo||[];return i&&o.push({id:i.id,scaleType:"color"}),n.triggerInfo=o,t}});function FS(t){return t.selectAll(".element").nodes().map(n=>{const r=n["__data__"],{seriesX:i=[],seriesY:o=[],seriesTooltip:a=[],seriesTitle:s=[]}=r;return i.length?i.map((t,e)=>Object.assign(Object.assign({},n),{__data__:Object.assign(Object.assign({},r),{x:i[e],y:o[e],title:s[e],tooltip:a[e]})})):n}).flat()}function zS(t,e,n,r="x"){let i=n;if(e.getRange){var o=e.getRange();for(let t=0;t<o.length;t++){var a=o[t],s=e.invert(a),l=e.getBandWidth(s),s=(e.getStep(s)-l)/2;if(a-s<=n&&n<a+l+s){i=a;break}}}return i?jg(t,({__data__:t})=>Math.pow(t[r]-i,2)):null}BS.props={};const VS=t=>{const{trigger:_,filterBy:S,multiple:E,toggle:T}=t;return t=>{const{event:e,shared:n,selection:r,scale:i,transientLayer:o,coordinate:a}=t,s=FS(r),{selectedElements:l=[]}=n;n.selectedElements=[];let u=[];if("axis"===_){const m=r.select(".plot").node();var[c,h]=m.getBounds().min,{offsetX:d,offsetY:p}=e,[d]=a.invert([d-c,p-h]);const b=zS(s,i.x,d);u=b?s.filter(({__data__:{x:t}})=>t===b.__data__.x):[]}else if("triggerInfo"===_){var{triggerInfo:c=[]}=n;u=(p=s,f=i,y=c,p.filter(t=>{var e=t["__data__"];for(const n of y){const r=f[n.scaleType];if(r&&r.invert(e[n.scaleType])===n.id)return!0}}))}else if("rect-mask"===_){const x=o.selectAll(".mask").nodes();u=s.filter(n=>x.some(t=>{var e=n.getRenderBounds(),t=t.getRenderBounds();return!(t.min[0]>e.max[0]||t.max[0]<e.min[0]||t.min[1]>e.max[1]||t.max[1]<e.min[1])}))}else if("polygon-mask"===_){const w=o.selectAll(".mask").nodes();u=s.filter(l=>w.some(({__data__:{points:t}})=>{var{min:e,max:n}=l.getLocalBounds(),n=[e,[e[0],n[1]],n,[n[0],e[1]]],r=t,i=n;if(r.length<2||i.length<2)return!1;e=gw(r),t=gw(i);if(e=e,(t=t).minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)return!1;var o=!1;if(Kp(i,function(t){if(pw(r,t[0],t[1]))return!(o=!0)}),o)return!0;if(Kp(r,function(t){if(pw(i,t[0],t[1]))return!(o=!0)}),o)return!0;var a=fw(r),t=fw(i),s=!1;return Kp(t,function(t){if(yw(a,t))return!(s=!0)}),s}))}else{h=e["target"];const k=(h||{})["className"];k&&k.includes("element")&&(d=rb(h).node()["__data__"],u=S?((e,n)=>{const t=r.selectAll(".element").nodes();return t.filter(({__data__:t})=>t[e]===n)})(S,d[S]):[h])}var f,y,g;[g,c=[]]=[u,l];const v=c.filter(e=>g.find(({__data__:{key:t}})=>t===e.__data__.key)).map(t=>t.__data__.key);return n.selectedElements=u,E&&l.forEach(t=>{v.includes(t.__data__.key)||n.selectedElements.push(t)}),T&&(n.selectedElements=n.selectedElements.filter(t=>!v.includes(t.__data__.key))),t}},GS=(VS.props={},t=>{const a=t["from"];return t=>{const{shared:e,selection:n,scale:r}=t,i=n.select(".category-legend").node();if("triggerInfo"===a)e.selectedLegendItems=e.triggerInfo.map(({id:t})=>i.getItem(t));else if("selectedElements"===a){const o=e.selectedElements.map(({__data__:{color:t}})=>r.color.invert(t));e.selectedLegendItems=o.map(t=>i.getItem(t))}return t}}),HS=(GS.props={},t=>{const n=t["state"];return t=>{const e=t["shared"];return e.currentState=n,t}}),WS=(HS.props={},t=>{const{clear:d,start:p}=t;return t=>{const{shared:e,selection:n,event:r}=t,i=n.select(".plot").node();var[o,a]=i.getBounds().min,{offsetX:s,offsetY:l}=r;if(d)e.points=[];else{var{points:u=[]}=e;const c=[...u];u=[s-o,l-a];if(p)e.points=[...c,[u]];else{const h=c.splice(-1,1)[0]||[];h.push(u),e.points=[...c,h]}}return t}}),US=(WS.props={},t=>{const o=t["clear"];return t=>{const{shared:e,event:n}=t;var{offsetX:r,offsetY:i}=n;return o?e.currentPoint=null:e.currentPoint=[r,i],t}});US.props={};const YS=t=>{const u=t["dim"];return t=>{const{shared:e,coordinate:l}=t,{points:n=[]}=e;return e.regions=n.map(i=>{{var o=l,a=u,o=o.getOptions(),s=nf(i),i=rf(i);let t=Math.min(s[0],i[0]),e=Math.min(s[1],i[1]),n=Math.abs(i[0]-s[0]),r=Math.abs(i[1]-s[1]);return"x"===a?(e=o.y,r=o.height):"y"===a&&(t=o.x,n=o.width),{x1:t,y1:e,x2:t+n,y2:e+r}}}),t}},qS=(YS.props={},l=>t=>{const{shared:e,theme:n,selectionLayer:r}=t,{selectedElements:i=[]}=e;var o=n["elementActiveStroke"];const{color:a=o,border:s}=l;o=i.map(t=>t.__data__);return r.selectAll(".highlight-element").remove(),r.selectAll(".highlight-element").data(o,t=>t.key).join(t=>t.append((t,e)=>i[e].cloneNode()).style("lineWidth",function(){return void 0!==s?s:+this.style.lineWidth||1}).style("stroke",a).attr("className","highlight-element")),t});function XS(t,e,n,r){n.includes(e)?(t.style.fillOpacity=1,t.style.lineWidth=+t.style.lineWidth||1,t.style.stroke=r):(t.style.fillOpacity=.45,t.style.stroke="transparent")}qS.props={};const ZS=c=>{const h=c["clear"];return t=>{const{shared:e,selection:n,theme:r,selectionLayer:i}=t,{selectedElements:o=[]}=e;var a=r["elementActiveStroke"];const{color:s=a}=c,l=o.map(t=>t.__data__),u=n.selectAll(".element").each(function(){this.style.originVisibility||(this.style.originVisibility=this.style.visibility||"visible"),this.style.visibility=l.length?"hidden":this.style.originVisibility}).nodes();a=l.length?u.map(t=>t.__data__):[];return i.selectAll(".highlight-element").data(h?[]:a,(t,e)=>e).join(t=>t.append((t,e)=>u[e].cloneNode(!0)).attr("className","highlight-element").style("visibility","visible").each(function(t){XS(this,t,l,s)}),t=>t.each(function(t){XS(this,t,l,s)}),t=>t.remove()),t}};function KS(t){t.selectAll(".tooltip-crosshairs").each(function(){this.hide()})}function $S(t){t.selectAll(".tooltip-markers").each(function(){this.hide()})}function JS(t){t.selectAll(".tooltip").each(function(){this.hide()}),KS(t),$S(t)}function QS(t,e,n={}){const{transientLayer:r,coordinate:i}=t;var o,a;e?(t=n.follow,n=I(n,["follow"]),{x:e,y:o,items:a}=e,t=function(t,e,n){let r,i;var o,a,s,{type:n="y",line:l={lineDash:[4,4],lineWidth:1},text:u=!1}=n;return Fg(t)?(o=X1(a=t.getCenter(),e),i={id:"circle-y",center:a,defaultRadius:o,type:"circle",text:u,lineStyle:l},r={id:"line-x",startPos:[a[0],a[1]],endPos:e,text:u,lineStyle:l}):({x:o,y:a,width:t,height:s}=t.getOptions(),r={id:"line-x",startPos:[o,e[1]],endPos:[o+t,e[1]],text:u,lineStyle:l},i={id:"line-y",startPos:[e[0],a],endPos:[e[0],a+s],text:u,lineStyle:l}),"x"===n?[r]:"xy"===n?[r,i]:[i]}(i,t?[e,o]:[a[0].x,a[0].y],n),r.selectAll(".tooltip-crosshairs").data(t,(t,e)=>e).join(t=>t.append(t=>{var e=t["type"],t=I(t,["type"]);const n="circle"===e?v_:p_;return new n({className:"tooltip-crosshairs",style:t})}),t=>t.each(function(t){this.update(t),this.show()}),t=>t.remove())):KS(r)}function tE(t,e){return Object.entries(t).filter(([t])=>t.startsWith(e)).map(([,t])=>t)}function eE(t,e,n,r){const{shared:i,scale:u,coordinate:c}=t;var{mouseX:t,mouseY:o,selectedElements:a}=i;const s=r["defaultColor"],l=u["x"],h=a,d=h.map(t=>{const i=t["__data__"],{seriesX:o=[],seriesY:a=[],seriesTooltip:s=[],seriesTitle:l=[]}=i;var e;return o.length?o.map((t,e)=>{var[n,r]=c.map([o[e],a[e]]);return{x:n,y:r,datum:Object.assign(Object.assign({},i),{x:o[e],title:l[e],tooltip:s[e]})}}):([t,e]=function(t,e,n){const r=tE(t,"x"),i=(t=tE(t,"y"),e["x"]);return e=r.reduce((t,e)=>{return t+e+((null==(t=i.getBandWidth)?void 0:t.call(i,i.invert(e)))||0)/2},0),n.map([e/r.length,Math.min.apply(null,t)])}(i,u,c),{x:t,y:e,datum:i})}).flat(),p=c.invert([e,n])[0],f=jg(d,({datum:{x:t}})=>{var e;return Math.pow(t+((null==(e=l.getBandWidth)?void 0:e.call(l,l.invert(t)))||0)/2-p,2)});if(!f)return null;r=d.filter(({datum:{x:t}})=>t===f.datum.x).map(t=>{const{datum:e,x:r,y:i}=t,{color:o=s,title:a}=e;return Object.entries(e).filter(([t])=>t.startsWith("tooltip")).map(([t,e])=>{var{field:t,title:t=t}=u[t].getOptions(),n="object"==typeof e&&!(e instanceof Date);return{x:r,y:i,title:a,color:o,name:t,value:n?e.value:void 0===e?e:""+e}}).filter(({value:t})=>void 0!==t)}).flat();return r.length?{x:t,y:o,title:r[0].title,items:r}:null}ZS.props={};const nE=t=>{const{showCrosshairs:w,showMarkers:k}=t,_=I(t,["showCrosshairs","showMarkers"]);return t=>{const{scale:e,coordinate:n,theme:r,selection:i,shared:o,transientLayer:a}=t;var s=e["tooltip"];if(void 0===s)JS(a);else{var{mouseX:s,mouseY:l}=o;const v=i.select(".plot").node();var u=v.getRootNode().defaultView.getConfig().container,{x:c,y:h,width:d,height:p}=n.getOptions(),[f,y]=v.getBounds().min;const m=function(t,e,n){let r=t.select(".tooltip").node();return r||(r=new n_({className:"tooltip",style:{container:{x:0,y:0},items:[],bounding:n,position:"bottom-right",offset:[10,10]}}),t.append(()=>r),e.appendChild(r.HTMLTooltipElement)),r}(a,u,{x:f+c,y:y+h,width:d,height:p});u=eE(t,s-f,l-y,r);u?({title:c,items:h}=u,m.update({x:s,y:l,title:c,position:"bottom-right",offset:[10,10],items:h}),m.show()):JS(a);{var[d,p,g={}]=[t,k?u:null,_.markers];const b=d["transientLayer"];if(p){const x=p["items"];d=x.map(t=>{var{x:t,y:e,color:n}=t;return Object.assign({cx:t,cy:e,fill:n,r:3,stroke:"#fff",lineWidth:1.5,zIndex:1},g)});b.selectAll(".tooltip-markers").data(d,(t,e)=>e).join(t=>t.append(t=>new zh({className:"tooltip-markers",style:t})),t=>t.each(function(t){this.attr(t),this.show()}),t=>t.remove())}else $S(b)}QS(t,w?u:null,_.crosshairs)}return t}},rE=(nE.props={},()=>t=>{const{shared:e,update:n}=t;var r=e["updatedOptions"];return n(r),t}),iE=(rE.props={},t=>{const c=t["reset"];return t=>{const{shared:n,scale:e,options:r}=t,i=n["selectedElements"],o=(n.originTransform||(n.originTransform=r.marks[0].transform||[]),e)["x"],a=!!o.getBandWidth,s=i.map(t=>t.__data__.title),l=Math.min.apply(null,s),u=Math.max.apply(null,s);return n.updatedOptions=(()=>{if(c)r.marks[0].transform=n.originTransform;else if(0<s.length){const e=[...n.originTransform];var t=o.getOptions()["field"];e.push({type:"filterBy",fields:[t],callback:t=>a?s.includes(t):t>=l&&t<=u}),r.marks[0].transform=e}return r})(),t}});function oE(t,e,n){n.includes(e)?t.style.visibility=t.style.originVisibility:t.style.visibility="hidden"}iE.props={};const aE=()=>t=>{const{shared:e,selection:n,selectionLayer:r}=t,{selectedElements:i=[]}=e,o=i.map(t=>t.__data__),a=n.selectAll(".element").each(function(){this.style.originVisibility||(this.style.originVisibility=this.style.visibility||"visible"),this.style.visibility=o.length?"hidden":this.style.originVisibility}).nodes();var s=o.length?a.map(t=>t.__data__):[];return r.selectAll(".filtered-element").data(s,(t,e)=>e).join(t=>t.append((t,e)=>a[e].cloneNode(!0)).attr("className","filtered-element").each(function(t){oE(this,t,o)}),t=>t.each(function(t){oE(this,t,o)}),t=>t.remove()),t};aE.props={};const sE=t=>{const{items:u,state:c="active"}=t;return t=>{const{shared:e,selection:n}=t;if(u.includes("legendItem")){const{selectedLegendItems:o=[]}=e,a=n.select(".category-legend").node();if("highlight"===c){var r=a;var i=o;const s=(null==r?void 0:r.getItemsStates())||[];i.length?(s.forEach(({id:t})=>r.setItemState(t,"inactive",!0)),i.forEach(t=>t.setState("inactive",!1))):s.forEach(({id:t})=>r.setItemState(t,"inactive",!1))}else{const l=(null===a||void 0===a?void 0:a.getItemsStates())||[];l.forEach(({id:t})=>a.setItemState(t,c,!1)),o.forEach(t=>t.setState(c,!0))}}return t}},lE=(sE.props={},y=>t=>{const{event:e,selection:n,shared:r,options:i}=t;var{updatedOptions:o={}}=r,{offsetX:a,offsetY:s}=e;const l=n.select(".main").node();var{min:[u,c],max:[h,d]}=l.getBounds();if(a<u||h<a||(s<c||d<s))r.updatedOptions=A({},i);else{const p=a-u,f=s-c;r.updatedOptions=A(o,(()=>{const{coordinate:t=[]}=i;var e=t.findIndex(t=>"fisheye"===t.type);if(-1===e)return Object.assign(Object.assign({},i),{coordinate:[...t,{type:"cartesian"},Object.assign(Object.assign({type:"fisheye"},y),{focusX:p,focusY:f})]});{var n=t[e],n=Object.assign(Object.assign(Object.assign({},n),y),{focusX:p,focusY:f});const r=[...t];return r.splice(e,1,n),Object.assign(Object.assign({},i),{coordinate:r})}})())}return t}),uE=(lE.props={},t=>{const a=t["cursor"];return t=>{const{selection:e,event:n}=t;var r=n["target"];const i=e.node().getRootNode().defaultView,o=i.getContextService().getDomElement();return o.style.cursor=a||(null==(r=r.style)?void 0:r.cursor),t}});uE.props={};const cE={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",se:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize"};const hE=t=>{const{maskType:l,fill:u="#C5D4EB",fillOpacity:c=.3}=t;return t=>{const{shared:e,transientLayer:n}=t,{regions:r=[],points:i=[]}=e,o="polygon"===l?i:r.map(t=>{var{x1:t,y1:e,x2:n,y2:r}=t;return[[t,e],[n,e],[n,r],[t,r]]});var a=o.map((t,e)=>({draggable:!0,d:ab(t1(),t).toString(),fill:u,fillOpacity:c,stroke:u,lineWidth:.5,points:t,cursor:"move",index:e}));n.selectAll(".mask").data(a,(t,e)=>e).join(t=>t.append(t=>new Kh({className:"mask",style:t})),t=>t.each(function(t){this.attr(t),this.dispatchEvent(new Mh("maskChange"))}),t=>t.remove());const s="polygon"===(a=l)?[]:"rectX"===a?["w","e"]:"rectY"===a?["n","s"]:["n","e","s","w","ne","se","sw","nw"];a=r.map((t,e)=>{const{x1:n,y1:r,x2:i,y2:o}=t;return s.map(t=>({draggable:!0,x:t.includes("e")?i-3:n-3,y:t.includes("s")?o-3:r-3,width:"n"===t||"s"===t?i-n+6:6,height:"e"===t||"w"===t?o-r+6:6,className:"handle handle-"+t,fill:"transparent",type:t,cursor:cE[t],index:e}))}).flat();return n.selectAll(".handle").data(a,(t,e)=>e).join(t=>t.append(t=>{var e=t["className"],t=I(t,["className"]);return new nd({className:e,style:t})}),t=>t.each(function(t){this.attr(t)}),t=>t.remove()),t}},dE=(hE.props={},xS({render(t,e){var{text:t,textStyle:n,fill:r,stroke:i,padding:o=[],radius:a}=t,[o,s=o,l=o,u=s]=o;const c=wS(e,".button-text","text").attr("className","button-text").style("x",u).style("y",o+(n.fontSize||12)/2).style("fontSize",12).style("textAlign","end").style("textBaseline","middle").style("fill","#3080d0").style("text",t).style("z-index",1).call(ob,n).node();var{min:t,halfExtents:n}=c.getLocalBounds(),h=2*n[0],n=2*n[1];wS(e,".button-rect","rect").attr("className","button-rect").style("x",t[0]-u).style("y",t[1]-o).style("width",h+u+s).style("height",n+o+l).style("radius",a).style("fill",r).style("stroke",i).style("z-index",0)}}));const pE=t=>{const{hide:o,fill:a="#f7f7f7",stroke:s="#ccc",padding:l=[4,5,4,5],text:u="Reset",radius:c=4,textStyle:h={},position:d}=t;return t=>{const{transientLayer:e,coordinate:n}=t;var r={text:u,fill:a,stroke:s,textStyle:h,padding:l,radius:c},i=function(t,e,n){var{x:e,y:r,width:i}=e.getOptions(),[n,n=n]=n,o=[8,4];return"top-left"===t?{x:e+o[0],y:r+o[1],textStyle:{textAlign:"start"}}:{x:e+i-o[0]-n,y:r+o[1],textStyle:{textAlign:"end"}}}(d,n,l),r=A({},r,i);return e.selectAll(".button").data(o?[]:[r],(t,e)=>e).join(t=>t.append(t=>new dE({className:"button",style:t})),t=>t.each(function(t){this.update(t)}),t=>t.remove()),t}},fE=(pE.props={},{selection:1,n:0,e:1,s:0,w:-1,nw:-1,ne:1,se:1,sw:-1}),yE={selection:1,n:-1,e:0,s:1,w:0,nw:-1,ne:-1,se:1,sw:1},gE=()=>t=>{const{shared:i,event:e}=t,{target:o,offsetX:n,offsetY:r}=e;var[a=n,s=r]=i.currentPoint||[];if(o){const u=n-a,c=r-s;a=o.style["index"];if(2<=(null==(s=i.points[a])?void 0:s.length)&&0<=a){const h=i.points[a];if(o.className.includes("handle")){var s=o.style["type"],l=fE[s],s=yE[s];let[t,e]=nf(h),[n,r]=rf(h);l<0&&(n=Math.max(t+=u,n)),0<l&&(t=Math.min(t,n+=u)),s<0&&(r=Math.max(e+=c,r)),0<s&&(e=Math.min(e,r+=c)),i.points[a]=[[t,e],[n,r]]}else i.points[a]=h.map(([t,e])=>[t+u,e+c])}}return t},vE=(gE.props={},t=>{const{clear:p,fill:f="#CCD6EC",fillOpacity:y=.3}=t;return t=>{const{coordinate:n,event:e,scale:r,selection:i,transientLayer:o}=t;if(!Fg(n)){const c=r.x,h=i.select(".plot").node();var[a,s]=h.getBounds().min,{offsetX:l,offsetY:u}=e,[l]=n.invert([l-a,u-s]);const d=[];a=zS(FS(i),c,l);if(!p&&a){u=a.__data__["x"],s=c.invert(u);let t=.01,e=.01;c.getBandWidth&&(l=c.getBandWidth(s),a=(c.getStep(s)-l)/2,t=a,e=l+a);var[s,l]=n.map([u-t,0]),[a,u]=n.map([u+e,1]);d.push({x:s,y:l,width:a-s,height:u-l})}return o.style("zIndex",-1).selectAll(".active-region").data(d,(t,e)=>e).join(t=>t.append("rect").attr("className","active-region").style("fill",f).style("fillOpacity",y).each(function(t){this.attr(t)}),t=>t.each(function(t){this.attr(t)}),t=>t.remove()),t}}}),mE=(vE.props={},t=>{const i=t["tip"];return t=>{const{shared:e,event:n}=t;var r=n["target"];return e.tip=null!==i&&void 0!==i?i:r.style.tip,t}}),bE=(mE.props={},(t="",e="")=>`<div style="
background-color:rgba(0,0,0,0.75);color:#fff;width:max-content;padding:4px;font-size:12px;border-radius:2.5px;
box-shadow:0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05);${e||""}
">${t||""}</div>`),xE=(f={})=>{const y=f["htmlStyle"];return t=>{const{transientLayer:e,selection:n,shared:r}=t;var{mouseX:i,mouseY:o,tip:a}=r;const s=n.select(".plot").node();var[l,u]=s.getBounds().min,[c,h]=[8,8];let d=i-l+c,p=o-u+h;return void 0!==f.x&&(d=f.x-l),void 0!==f.y&&(p=f.y-u),wS(e.node(),".tip-popover",()=>new ad({className:"tip-popover",style:{innerHTML:bE("",y),visibility:"hidden"}})).style("x",d).style("y",p).style("innerHTML",bE(a,y)).style("visibility",a?"visible":"hidden"),t}},wE=(xE.props={},()=>({actions:[{action:"enter",events:["plot:mouseenter"]},{action:"hover",events:["plot:mousemove"]},{action:"leave",events:["plot:mouseleave"]}]})),kE=()=>({actions:[{action:"enter",events:["plot:touchstart"]},{action:"hover",events:["plot:touchmove"]},{action:"leave",events:["plot:touchend"]}]});function _E(o,t={"action.surfacePointSelection":DS,"action.elementSelection":VS,"action.recordState":HS,"action.recordPoint":WS,"action.recordCurrentPoint":US,"action.recordRegion":YS,"action.activeElement":qS,"action.highlightElement":ZS,"action.filterElement":aE,"action.legendItemSelection":GS,"action.triggerInfoSelection":BS,"action.setItemState":sE,"action.tooltip":nE,"action.fisheyeFocus":lE,"action.plot":rE,"action.filter":iE,"action.cursor":uE,"action.mask":hE,"action.button":pE,"action.move":gE,"action.activeRegion":vE,"action.recordTip":mE,"action.poptip":xE,"interactor.mousePosition":wE,"interactor.touchPosition":kE}){const[a]=SE("interactor",t),[g]=SE("action",t);return t=>{const{start:e=[],end:n=[],interactors:r=[]}=o(t),f=[...e,...n],i=r.map(a),y=Tg(i.flatMap(({actions:t})=>t.flatMap(({action:e,events:t})=>t.map(t=>[t,e]))),t=>t[1]);return(t,e)=>{const n=function(t,e){const{view:n,update:r,container:i,options:o}=t,a=rb(i),s=a.select(".plot").append("g").attr("className","selection").style("fill","transparent"),l=a.select(".plot").append("g").attr("className","transient").style("fill","transparent");return Object.assign(Object.assign({},n),{update:r,options:o,selection:a,selectionLayer:s,transientLayer:l,viewInstances:e,shared:{}})}(t,e),r=n["selection"];for(const{trigger:l,isEnable:u=()=>!0,action:c,throttle:h}of f){var i,o=[c].flat(1).map(t=>"object"==typeof t?t:{type:t}).map(g);const d=h?t=>Ef(t,h.wait,h):t=>t,p=d(J1(o));for([i]of y.get(l)||[[l]]){var[a,s]=i.includes(":")?i.split(":"):[null,i];(a?r.selectAll("."+a):r).on(s,t=>{t=Object.assign({event:t},n);u(t)&&p(t)})}}}}}function SE(e,n){const r=t=>{if("string"!=typeof t)return t;t=e+"."+t;return n[t]||Q1("Unknown Component: "+t)};return[t=>{var e=t["type"],t=I(t,["type"]);return r(e)(Object.assign({},t))},r]}const EE=_E(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",action:[{type:"elementSelection"},Object.assign({type:"activeElement"},t)]}],end:[{trigger:"leave",action:[{type:"elementSelection"},Object.assign({type:"activeElement"},t)]}]}));EE.props={};const TE=_E((t={})=>{var{singleMode:e=!1}=t;return{start:[{trigger:"plot:pointerdown",action:[{type:"elementSelection",multiple:!e,toggle:!0},Object.assign({type:"activeElement",border:2},t)]}]}});TE.props={};const ME=_E(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",action:[{type:"surfacePointSelection"},{type:"elementSelection",trigger:null!=t&&t.shared?"axis":"item"},Object.assign({type:"tooltip"},t)],throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"leave",action:[{type:"elementSelection",clear:!0},Object.assign({type:"tooltip",hide:!0},t)]}]}));ME.props={};const OE=_E(t=>({interactors:[{type:"mousePosition"},{type:"touchPosition"}],start:[{trigger:"hover",throttle:{wait:50,leading:!0,trailing:!1},action:[Object.assign({type:"fisheyeFocus"},t),{type:"plot"}]}],end:[{trigger:"leave",action:[Object.assign({type:"fisheyeFocus"},t),{type:"plot"}]}]}));OE.props={};const PE=_E(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));PE.props={};const CE=_E(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t),{type:"legendItemSelection",from:"selectedElements"},{type:"setItemState",items:["legendItem"],state:"highlight"}]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t),{type:"legendItemSelection",from:"selectedElements"},{type:"setItemState",items:["legendItem"],state:"highlight"}]}]}));CE.props={};const AE=_E(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection",filterBy:"x"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));AE.props={};const NE=_E(t=>({start:[{trigger:"plot:pointermove",action:[{type:"elementSelection",filterBy:"color"},Object.assign({type:"highlightElement"},t)]}],end:[{trigger:"plot:pointerleave",action:[{type:"elementSelection"},Object.assign({type:"highlightElement"},t)]}]}));NE.props={};const LE=_E(t=>({start:[{trigger:"legend-item:pointermove",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"active"},{type:"elementSelection",trigger:"triggerInfo"},{type:"activeElement"}]}],end:[{trigger:"legend-item:pointerleave",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"active"},{type:"elementSelection",trigger:"triggerInfo"},{type:"activeElement"}]}]}));LE.props={};const IE=_E(t=>({start:[{trigger:"legend-item:pointermove",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"highlight"},{type:"elementSelection",trigger:"triggerInfo"},{type:"highlightElement"}]}],end:[{trigger:"legend-item:pointerleave",action:[{type:"triggerInfoSelection"},{type:"legendItemSelection",trigger:"triggerInfo"},{type:"setItemState",items:"legendItem",state:"highlight"},{type:"elementSelection",trigger:"triggerInfo"},{type:"highlightElement"}]}]}));function RE(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("button"))}IE.props={};const jE=_E(t=>{var t=t["brushType"],e="polygon"===t?"polygon":"rect",n="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointermove",isEnable:t=>!RE(t),action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointermove",isEnable:t=>RE(t),action:[{type:"cursor",cursor:"pointer"},{type:"button"}]},{trigger:"plot:pointermove",isEnable:t=>"filtered"===t.shared.currentState&&!RE(t),action:[{type:"button",fill:"#f7f7f7"}]},{trigger:"plot:pointerdown",isEnable:t=>!RE(t),action:[{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:n},{type:"recordState",state:"brushing"}]},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordPoint"},{type:"recordRegion",dim:n},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",isEnable:t=>!RE(t),action:[{type:"recordState",state:null},{type:"elementSelection",trigger:e+"-mask"},{type:"filter"},{type:"plot"},{type:"recordState",state:"filtered"},{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"},{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"},{type:"button"}]},{trigger:"plot:click",isEnable:t=>RE(t),action:[{type:"button",hide:!0},{type:"filter",reset:!0},{type:"plot"},{type:"recordState",state:null}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]}]}});function DE(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("mask"))}function BE(t){var t=t["event"],t=t["target"];return t&&(null==(t=t.className)?void 0:t.includes("handle"))}function FE(t){return!DE(t)&&!BE(t)}function zE(t){return DE(t)||BE(t)}jE.props={};const VE=_E(t=>{var{brushType:t,multiple:e}=t,n="polygon"===t?"polygon":"rect";const r="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointermove",isEnable:t=>FE(t),action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointermove",isEnable:t=>!FE(t),action:[{type:"cursor"}]},{trigger:"plot:pointerdown",isEnable:t=>FE(t),action:[e?null:{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:r},{type:"recordState",state:"brushing"}].filter(t=>!!t)},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState&&!DE(t),action:[{type:"recordPoint"},{type:"recordRegion",dim:r},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:n+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordState",state:null}]},{trigger:"plot:dragstart",isEnable:t=>zE(t),action:[{type:"recordCurrentPoint"}]},{trigger:"plot:drag",isEnable:t=>zE(t)&&t.shared.currentPoint,action:[{type:"move"},{type:"recordRegion",dim:r},{type:"mask",maskType:t},{type:"recordCurrentPoint"}]},{trigger:"plot:dragend",isEnable:t=>zE(t),action:[{type:"recordCurrentPoint",clear:!0}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]},{trigger:"plot:click",isEnable:t=>2===t.event.detail&&!DE(t),action:[{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"},{type:"elementSelection",trigger:n+"-mask"},{type:"highlightElement"}]}]}});VE.props={};const GE=_E(t=>{var t=t["brushType"],e="polygon"===t?"polygon":"rect",n="rectX"===t?"x":"rectY"===t?"y":"";return{start:[{trigger:"plot:pointerenter",action:[{type:"cursor",cursor:"crosshair"}]},{trigger:"plot:pointerdown",action:[{type:"recordPoint",clear:!0},{type:"recordPoint",start:!0},{type:"recordRegion",dim:n},{type:"recordState",state:"brushing"}]},{trigger:"plot:pointermove",isEnable:t=>"brushing"===t.shared.currentState,action:[{type:"recordPoint"},{type:"recordRegion",dim:n},{type:"mask",maskType:t}]},{trigger:"plot:maskChange",action:[{type:"elementSelection",trigger:e+"-mask"},{type:"highlightElement"}]},{trigger:"plot:pointerup",action:[{type:"recordState",state:null},{type:"elementSelection",trigger:e+"-mask"},{type:"filterElement"},{type:"highlightElement",clear:!0},{type:"recordPoint",clear:!0},{type:"recordRegion"},{type:"mask"}]}],end:[{trigger:"plot:pointerleave",action:[{type:"cursor",cursor:"default"}]}]}});GE.props={};const HE=_E((t={})=>({start:[{trigger:"plot:mousemove",action:[Object.assign({type:"activeRegion"},t)]},{trigger:"plot:mouseleave",action:[{type:"activeRegion",clear:!0}]}]}));HE.props={};const WE=_E(t=>({start:[{trigger:"mousemove",throttle:{wait:50,leading:!0,trailing:!1},action:[{type:"surfacePointSelection"},{type:"recordTip"},Object.assign({type:"poptip"},t)]}]})),UE=(WE.props={},()=>t=>{const e=t["children"];if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:i,height:o,data:a}=t;return e.map(t=>{var{data:e=a}=t,t=I(t,["data"]);return Object.assign(Object.assign({},t),{data:e,x:n,y:r,width:i,height:o})})}),YE=(UE.props={},()=>e=>{const n=e["children"];if(!Array.isArray(n))return[];const{direction:t="row",ratio:r=n.map(()=>1),padding:i=0,data:o}=e;var[a,s,l,u]="col"===t?["y","height","width","x"]:["x","width","height","y"];const c=r.reduce((t,e)=>t+e),h=e[s]-i*(n.length-1);var d=r.map(t=>h*(t/c));const p=[];let f=e[a]||0;for(let t=0;t<d.length;t+=1){var y=n[t],{data:g=o}=y,y=I(y,["data"]);p.push(Object.assign({[a]:f,[s]:d[t],[u]:e[u]||0,[l]:e[l],data:g},y)),f+=d[t]+i}return p}),qE=(YE.props={},()=>t=>{const e=t["children"],n=I(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:i={}}=n,o=I(n,["data","scale"]);t=e.map(t=>{var{data:e=r,scale:n}=t,t=I(t,["data","scale"]);return Object.assign({data:e,scale:A({},i,n)},t)});return[Object.assign(Object.assign({},o),{marks:t,type:"standardView"})]}),XE=(qE.props={},()=>t=>{var{width:e,height:n,paddingLeft:r,paddingRight:i,paddingTop:o,paddingBottom:a,data:s,coordinate:l,theme:u,component:c,interaction:h,x:d,y:p,key:f,frame:y,title:g}=t,t=I(t,["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","data","coordinate","theme","component","interaction","x","y","key","frame","title"]);return[{type:"standardView",x:d,y:p,key:f,width:e,height:n,paddingLeft:r,paddingRight:i,paddingTop:o,paddingBottom:a,theme:u,coordinate:l,component:c,interaction:h,frame:y,title:g,marks:[Object.assign(Object.assign({},t),{key:f+"-0",data:s})]}]});function ZE(t){return t.map((t,e)=>e)}function KE(n){return(t,...e)=>A({},n(t,...e),t)}function $E(n){return(t,...e)=>A({},t,n(t,...e))}XE.props={};const JE=KE(t=>{const{encode:e,data:i,scale:o,shareSize:a=!1}=t;var{x:t,y:n}=e,r=(e,t)=>{if(void 0===e||!a)return{};const n=Tg(i,t=>t[e]),r=(null==(t=null===o||void 0===o?void 0:o[t])?void 0:t.domain)||Array.from(n.keys());t=r.map(t=>n.has(t)?n.get(t).length:1);return{domain:r,flex:t}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,guide:void 0===t?null:{position:"top"}},void 0===t&&{paddingInner:0}),r(t,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,guide:void 0===n?null:{position:"right"}},void 0===n&&{paddingInner:0}),r(n,"y"))}}}),QE=KE(t=>{const{data:e,scale:n}=t,r=[t];let i,o;for(;r.length;){const{children:l,encode:u={},scale:n={}}=r.shift();var a=u["color"],s=n["color"];void 0!==a&&(i=a),void 0!==s&&(o=s),Array.isArray(l)&&r.push(...l)}var t=Object.assign({},o);o&&(o.guide=null);return{encode:{color:i},scale:{color:A({},t,{domain:void 0!==(t=null==(t=null===n||void 0===n?void 0:n.color)?void 0:t.domain)?t:void 0!==i?Array.from(new Set(e.map(t=>t[i]))):void 0,field:i,type:"ordinal"})}}}),tT=KE(()=>({animate:{enter:{type:"fadeIn"}}})),eT=$E(()=>({frame:!1,encode:{shape:"hollowRect"},style:{lineWidth:0}})),nT=$E(()=>({type:"grid"})),rT=$E(u=>{var{transform:t=[]}=u;return{transform:[...t,{type:"connector",callback:()=>{const{data:t,encode:e}=u,{x:n,y:r}=e,i=n?Array.from(new Set(t.map(t=>t[n]))):[],o=r?Array.from(new Set(t.map(t=>t[r]))):[];if(i.length&&o.length){const a=[];for(const s of i)for(const l of o)a.push({[n]:s,[r]:l});return a}return i.length?i.map(t=>({[n]:t})):o.length?o.map(t=>({[r]:t})):void 0}}]}}),iT=$E((t,d=function(t){t=t.points;return K1(t)},w=function(o){return(t,e)=>{var{rowIndex:t,rowValuesLength:n,columnIndex:r,columnValuesLength:i}=t;if(t!==n-1)return oT(o,e);t=e.length?void 0:null;return A({title:r===i-1&&void 0,grid:t},o)}},k=function(r){return(t,e)=>{var{rowIndex:t,columnIndex:n}=t;if(0!==n)return oT(r,e);n=e.length?void 0:null;return A({title:0===t&&void 0,grid:n},r)}},_={})=>{const{data:S,encode:e,children:p,scale:n,x:E=0,y:T=0,shareData:M=!1}=t,{x:O,y:P}=e;t=n.color;const C=t["domain"];return{children:(t,e,n)=>{const{x:r,y:i}=e,{paddingLeft:f,paddingTop:y}=n,{domain:o,field:a}=r.getOptions(),{domain:s,field:l}=i.getOptions(),u=ZE(t),g=t.map(d),c=t.map(({x:t,y:e})=>[r.invert(t),i.invert(e)]),h=c.map(([n,r])=>t=>{var{[a]:t,[l]:e}=t,t=void 0===O||t===n,e=void 0===P||e===r;return t&&e}),v=h.map(t=>S.filter(t)),m=M?Og(v,t=>t.length):void 0,b=c.map(([t,e])=>({columnField:a,columnIndex:o.indexOf(t),columnValue:t,columnValuesLength:o.length,rowField:l,rowIndex:s.indexOf(e),rowValue:e,rowValuesLength:s.length})),x=b.map(t=>Array.isArray(p)?p:[p(t)].flat(1));return u.flatMap(s=>{const[l,u,c,h]=g[s],d=b[s],p=v[s],t=x[s];return t.map(t=>{var{scale:e,key:n,facet:r=!0}=t,t=I(t,["scale","key","facet"]),i=null==(i=null==e?void 0:e.y)?void 0:i.guide,o=null==(o=null==e?void 0:e.x)?void 0:o.guide,a={x:{tickCount:O?5:void 0},y:{tickCount:P?5:void 0}},r=r?p:S,o={x:{guide:aT(o,w)(d,r)},y:{guide:aT(i,k)(d,r)},color:{guide:null,domain:C}};return Object.assign(Object.assign({key:n+"-"+s,data:r,x:l+f+E,y:u+y+T,width:c,height:h,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!r.length,dataDomain:m,scale:A(a,e,o)},t),_)})})}}});function oT(t,e){return e.length?A({title:!1,tickLine:null,label:null,subTickLine:null},t):null}function aT(t,e){return"function"==typeof t?t:null===t?()=>null:e(t)}const sT=()=>t=>{return[SS.of(t).call(nT).call(QE).call(tT).call(JE).call(eT).call(rT).call(iT).value()]},lT=(sT.props={},KE(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}))),uT=$E(t=>{const{data:k,children:c,x:_=0,y:S=0}=t;return{children:(t,e,n)=>{const{x:r,y:i}=e,{paddingLeft:g,paddingTop:v}=n,{domain:o,field:a}=r.getOptions(),{domain:s,field:l}=i.getOptions(),u=ZE(t),m=t.map(({points:t})=>K1(t)),b=t.map(({x:t,y:e})=>[r.invert(t),i.invert(e)]),x=b.map(([t,e])=>({columnField:a,columnIndex:o.indexOf(t),columnValue:t,columnValuesLength:o.length,rowField:l,rowIndex:s.indexOf(e),rowValue:e,rowValuesLength:s.length})),w=x.map(t=>Array.isArray(c)?c:[c(t)].flat(1));return u.flatMap(l=>{const[u,c,h,d]=m[l],[p,f]=b[l],y=x[l],t=w[l];return t.map(t=>{var n,r,{scale:e,key:i,encode:o}=t,t=I(t,["scale","key","encode"]),a=null==(a=null==e?void 0:e.y)?void 0:a.guide,s=null==(s=null==e?void 0:e.x)?void 0:s.guide,s={x:{guide:("function"==typeof(r=s)?r:null===r?()=>null:(t,e)=>{var{rowIndex:t,rowValuesLength:n}=t;if(t!==n-1)return oT(r,e)})(y,k)},y:{guide:("function"==typeof(n=a)?n:null===n?()=>null:(t,e)=>{t=t.columnIndex;if(0!==t)return oT(n,e)})(y,k)}};return Object.assign({data:k,key:i+"-"+l,x:u+g+_,y:c+v+S,width:h,height:d,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:A({color:{guide:null},x:{guide:{title:{titleAnchor:"center"}},tickCount:5,facet:!1},y:{guide:{title:{titleAnchor:"center"}},tickCount:5,facet:!1}},e,s),encode:A({},o,{x:p,y:f})},t)})})}}}),cT=t=>{var e=t["encode"],t=I(t,["encode"]);const{position:n=[],x:r=n,y:i=[...n].reverse()}=e,o=I(e,["position","x","y"]),a=[];for(const s of[r].flat(1))for(const l of[i].flat(1))a.push({$x:s,$y:l});return Object.assign(Object.assign({},t),{data:a,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"})})};const hT=()=>t=>{return[SS.of(t).call(nT).call(QE).call(uT).call(cT).call(tT).call(eT).call(lT).value()]},dT=KE(t=>({scale:{x:{guide:{type:"axisX"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),pT=KE(t=>({coordinate:[{type:"polar"}]})),fT=t=>{var e=t["encode"],t=I(t,["encode"]),e=e["position"];return Object.assign(Object.assign({},t),{encode:{x:e}})};function yT(t){return t=>null}function gT(t){var t=t["points"],[t,e,n,r]=t,i=X1(t,r),t=q1(t,r),r=q1(e,n),r=(e=r,r=Z1(r=t),e=Z1(e),r<e?e-r:2*Math.PI-(r-e)),e=1/Math.sin(r/2),i=i/(1+e),o=i*Math.sqrt(2),[n,a]=n,t=Z1(t)+r/2,r=i*e;return[n+r*Math.sin(t)-o/2,a+r*Math.cos(t)-o/2,o,o]}const vT=()=>t=>{return[SS.of(t).call(nT).call(fT).call(QE).call(pT).call(iT,gT,yT,yT,{frame:!1}).call(rT).call(tT).call(eT).call(dT).value()]};const mT=()=>t=>{const{children:e=[],duration:a=1e3,iterationCount:l=1,direction:u="normal",easing:s="ease-in-out-sine"}=t,c=e.length;if(!Array.isArray(e)||0===c)return[];const n=e[0]["key"],h=e.map(t=>Object.assign(Object.assign({},t),{key:n})).map(t=>{{var e=a,n=s;const i=[t];for(;i.length;){const o=i.pop();o.animate=A({enter:{duration:e},update:{duration:e,type:"morphing",easing:n,fill:"both"},exit:{duration:e}},o.animate||{});var r=o["children"];Array.isArray(r)&&i.push(...r)}return t}});return function*(){let t=0,e;for(;"infinite"===l||t<l;){n=u,o=t,a=c,s=void 0,s=[0,a],a=[1-a,1];var[n,r]="normal"===n?s:"reverse"===n?a:"alternate"===n?o%2==0?s:a:"reverse-alternate"===n?o%2==0?a:s:void 0;for(let t=n;t<r;t+=1){var i=Math.abs(t);e!==i&&(yield h[i]),e=i}t++}var o,a,s}},bT=(mT.props={},()=>(t,e,n)=>{var r=t.length;if(0===r)return[];var{innerWidth:i,innerHeight:o}=n;let l=Math.ceil(Math.sqrt(e/(o/i))),u=i/l,c=Math.ceil(e/l),a=c*u;for(;a>o;)l+=1,u=i/l,c=Math.ceil(e/l),a=c*u;const h=o-c*u,d=c<=1?0:h/(c-1),[p,f]=c<=1?[(i-r*u)/(r-1),(o-u)/2]:[0,0];return t.map((t,e)=>{var[t,n,r,i]=K1(t),o=e%l,e=Math.floor(e/l),a=o*u,s=(c-e-1)*u+h,r=u/r,i=u/i;return`translate(${a-t+p*o}, ${s-n-d*e-f}) scale(${r}, ${i})`})});function xT(t,e){var n,r,i;const o=Object.assign({},t);for([r,i]of Object.entries(e))o[r]=null!=(n=o[r])?n:i;return o}function wT(i){return r=>F(this,void 0,void 0,function*(){var t=yield i(r),e=t["encode"],n=r["encode"];return Object.assign(Object.assign(Object.assign({},r),t),e&&{encode:Object.assign(Object.assign({},n),e)})})}function kT(t){if(null!==t)return{type:"column",value:t}}function _T(t){return{type:"constant",value:t}}function ST(t,e,n){return e&&(t.field=n?n(e.field):e.field),t}bT.props={};const ET=()=>wT(({encode:t})=>({encode:xT(t,{y1:_T(0)})}));function TT(t,e){const{columnOf:n,encode:r,data:i,I:o}=e,a=(e=t,(Array.isArray(e)?e:[e]).map(t=>[t,n(i,r[t])]).filter(([,t])=>null!==t));return Array.from(Tg(o,e=>a.map(([,t])=>t[e]).join("-")).values())}function MT(t){return Array.isArray(t)?(o=t,(i,t,e)=>(n,r)=>o.reduce((t,e)=>0!==t?t:xg(i[n][e],i[r][e]),0)):"function"==typeof t?(r=t,(e,t,n)=>IT(t=>r(e[t]))):"series"===t?CT:"value"===t?AT:"sum"===t?NT:"maxIndex"===t?LT:()=>null;var o,r}function OT(t,e){for(const n of t)n.sort(e)}function PT(t,e){return(null==e?void 0:e.domain)||Array.from(new Set(t))}function CT(t,e,n){return IT(t=>n[t])}function AT(t,e,n){return IT(t=>e[t])}function NT(t,n,e){t=ZE(t);const r=Array.from(Tg(t,t=>e[+t]).entries()),i=new Map(r.map(([t,e])=>[t,e.reduce((t,e)=>t+ +n[e])]));return IT(t=>i.get(e[t]))}function LT(t,n,e){t=ZE(t);const r=Array.from(Tg(t,t=>e[+t]).entries()),i=new Map(r.map(([t,e])=>[t,Pg(e,t=>n[t])]));return IT(t=>i.get(e[t]))}function IT(n){return(t,e)=>xg(n(t),n(e))}ET.props={category:"inference"};const RT=(t={})=>{const{groupBy:m="x",orderBy:b,reverse:x=!1,y:w="y"}=t;return wT(t=>{const{data:e,I:n,columnOf:r,encode:i}=t,{y:o,y1:a,series:s,color:l}=i;var u=r(e,o),c=r(e,a),h=r(e,s||l),t=TT(m,t);const d=MT(b);h=d(e,u,h);h&&OT(t,h);const p=new Array(n.length),f=new Array(n.length);for(const g of t){x&&g.reverse();var y=c?+c[g[0]]:0;let t=y,e=y;for(const v of g){const o=+u[v]-y;o<0?e=p[v]=(f[v]=e)+o:0<o?t=p[v]=(f[v]=t)+o:p[v]=f[v]=t}}return{encode:{y:kT(ST("y"===w?p:f,u)),y1:kT(ST(f,c))}}})};function jT(t){t=t.type;return"string"==typeof t&&["stackY","dodgeX","groupX"].includes(t)}RT.props={category:"statistic"};const DT=o=>wT(t=>{const{encode:e,transform:n}=t;var{x:r,y:i}=e;if(n.some(jT))return{};if(void 0===r||void 0===i)return{};r=o.series,i=r?["x","series"]:"x";return RT({groupBy:i})(t)}),BT=(DT.props={category:"inference"},()=>wT(({encode:t,columnOf:e,data:n})=>{var{x:t,title:r}=t;if(void 0!==r)return{};r=e(n,t);return{encode:{x:kT(r),title:kT(r)}}})),FT=(BT.props={category:"inference"},t=>{const a=t["channel"];return wT(({encode:t,data:i,columnOf:o})=>{var e=t["tooltip"];if(void 0!==e)return{};e=Object.entries(t).filter(([t])=>t.startsWith(a)).flatMap(([t,e])=>{var n=new RegExp(a+"(\\d*)").exec(t)[1],e=o(i,e);const r=[[t,kT(e)]];return e&&null!==e.field&&r.push(["tooltip"+n,kT(e)]),r});return{encode:Object.fromEntries(e)}})}),zT=(FT.props={category:"inference"},()=>FT({channel:"position"})),VT=(zT.props={category:"inference"},()=>FT({channel:"y"})),GT=(VT.props={category:"inference"},()=>wT(({encode:t})=>({encode:xT(t,{x:_T(0)})}))),HT=(GT.props={category:"inference"},()=>wT(({encode:t})=>({encode:xT(t,{y:_T(0)})}))),WT=(HT.props={category:"inference"},()=>wT(({encode:t})=>({encode:xT(t,{size:_T(3)})}))),UT=(WT.props={category:"inference"},()=>wT(({encode:t,columnOf:n,data:r,I:a})=>{const e=Object.entries(t).filter(([t])=>t.startsWith("x")||t.startsWith("y")||t.startsWith("position")).map(([t,e])=>[t,kT(n(r,e))]);t=e.filter(([,t])=>{t=t.value;return Array.isArray(t[0])}).flatMap(([n,t])=>{const r=[[n,new Array(a.length).fill(void 0)]],i=t["value"];for(let e=0;e<i.length;e++){var o=i[e];if(Array.isArray(o))for(let t=0;t<o.length;t++){const kT=r[t]||[""+n+t,new Array(a).fill(void 0)];kT[1][e]=o[t],r[t]=kT}}return r.map(([t,e])=>[t,kT(ST(e,i))])});return{encode:Object.fromEntries([...e,...t])}})),YT=(UT.props={category:"inference"},()=>wT(({encode:t,data:e,I:n,columnOf:r})=>{var i=t["key"],t=I(t,["key"]);if(void 0!==i)return{};const o=Object.values(t).map(t=>r(e,t));return{encode:{key:kT(n.map(e=>o.filter(t=>null!==t).map(t=>t[e]).join("-")))}}})),qT=(YT.props={category:"inference"},()=>wT(({encode:t,data:e,columnOf:n})=>{var{series:t,color:r}=t;if(void 0!==t)return{};t=n(e,r);return{encode:{color:kT(t),series:kT(t)}}})),XT=(qT.props={category:"inference"},(t={})=>{const{groupBy:f="x",reverse:y=!1,orderBy:g}=t,v=I(t,["groupBy","reverse","orderBy"]);return wT(t=>{const{data:e,encode:n,columnOf:r,I:i,scale:o}=t;var{series:a,color:s,y:l}=n,u=o["series"],l=r(e,l),a=r(e,a||s),c=PT(a,u),s=TT(f,t);const h=MT(g);u=h(e,l,a);u&&OT(s,u);const d=new Array(i.length);for(const p of s){y&&p.reverse();for(let t=0;t<p.length;t++)d[p[t]]=c[t]}return{scale:A({},o,{series:Object.assign({domain:c},v)}),encode:{series:kT(d)}}})}),ZT=(XT.props={category:"statistic"},t=>{const{by:g=["x"]}=t;return wT(({encode:e,I:n,data:r,columnOf:i})=>{var{enterDuration:t,enterDelay:o}=e;if(void 0===t)return{};var a=g.map(t=>[t,i(r,e[t])]);if(0===a.length)return{};let s=[n];for(const[,p]of a){const f=[];for(const n of s){var l=Array.from(Tg(n,t=>p[t]).values());f.push(...l)}s=f}const u=i(r,t);var c=i(r,o)||new Array(n.length).fill(0);const h=new Array(n.length);for(let t=0,e=0;t<s.length;t++){const n=s[t];var d=Og(n,t=>+u[t]);for(const y of n)h[y]=c[y]+e;e+=d}return{encode:{enterDuration:kT(u),enterDelay:kT(h)}}})});ZT.props={category:"statistic"};const KT=(t={})=>{const{groupBy:f="x",basis:y="max"}=t;return wT(t=>{const{data:n,encode:e,columnOf:r,I:i}=t;var o=I(e,["x"]);const a=Object.entries(o).filter(([t])=>t.startsWith("y")).map(([t,e])=>[t,r(n,e)]),s=a.map(([t,e])=>{return[t,ST(new Array(i.length),e)]});o=TT(f,t);const l={min:Cg,max:Og,first:t=>t[0],last:t=>t[t.length-1],mean:Ig,extent:kg,median:Rg,sum:Dg,deviation:wg}[y]||Og;for(const i of o){var u=i.flatMap(e=>a.map(([,t])=>+t[e])),c=l(u);for(const d of i)for(let t=0;t<a.length;t++){var[,h]=a[t];const[,p]=s[t];p[d]=+h[d]/c}}return{encode:Object.fromEntries(s.map(([t,e])=>[t,kT(e)]))}})};function $T(t,e,n){if(null===t)return[-.5,.5];t=PT(t,e);const r=new mv({domain:t,range:[0,1],padding:n});e=r.getBandWidth();return[-e/2,e/2]}KT.props={category:"statistic"};const JT=(t={})=>{const{paddingX:h=0,paddingY:d=0}=t;return wT(t=>{const{data:e,I:n,columnOf:r,encode:i,scale:o}=t;var{x:t,y:a}=i,{x:s,y:l}=o,t=r(e,t),a=r(e,a);const u=$T(t,s,h),c=$T(a,l,d);t=n.map(()=>nb(...c)),s=n.map(()=>nb(...u));return{encode:{dy:kT(t),dx:kT(s)}}})},QT=(JT.props={category:"statistic"},(t={})=>{const{padding:l=0}=t;return wT(t=>{const{data:e,I:n,columnOf:r,encode:i,scale:o}=t;var t=i["y"],a=o["y"];const s=$T(r(e,t),a,l);return{encode:{dy:kT(n.map(()=>nb(...s)))}}})}),tM=(QT.props={category:"statistic"},(t={})=>{const{groupBy:v="x"}=t;return wT(t=>{const{I:n,data:r,encode:e,columnOf:i}=t;var o=I(e,["x"]);const a=Object.entries(o).filter(([t])=>t.startsWith("y")).map(([t,e])=>[t,i(r,e)]),s=a.map(([t,e])=>{return[t,ST(new Array(n.length),e)]});var l=TT(v,t);const u=new Array(l.length);for(let t=0;t<l.length;t++){const n=l[t];var[c,h]=kg(n.flatMap(e=>a.map(([,t])=>+t[e])));u[t]=(c+h)/2}var d=Math.max(...u);for(let t=0;t<l.length;t++){var p=d-u[t];const n=l[t];for(const y of n)for(let t=0;t<a.length;t++){var[,f]=a[t];const[,g]=s[t];g[y]=+f[y]+p}}return{encode:Object.fromEntries(s.map(([t,e])=>[t,kT(e)]))}})});function eM(t,e){return[0]}function nM(t,e){return[t[t.length-1]]}function rM(t,e){return[t[Pg(t,t=>e[t])]]}function iM(t,e){return[t[function(t,e){let n,r=-1,i=-1;if(void 0===e)for(const a of t)++i,null!=a&&(n>a||void 0===n&&a>=a)&&(n=a,r=i);else for(var o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}(t,t=>e[t])]]}tM.props={category:"statistic"};const oM=(t={})=>{const{groupBy:l="series"}=t,u=I(t,["groupBy"]);return wT(t=>{const{data:e,columnOf:n,encode:r}=t,i=TT(l,t);var[t,o]=Object.entries(u)[0],{[t]:t}=r;const a=n(e,t),s="function"==typeof(t=o)?t:{first:eM,last:nM,max:rM,min:iM}[t]||eM;return{I:i.flatMap(t=>s(t,a))}})},aM=(oM.props={category:"statistic"},(t={})=>{var e=t["selector"],t=I(t,["selector"]);return oM(Object.assign({x:e},t))}),sM=(aM.props={category:"statistic"},(t={})=>{var e=t["selector"],t=I(t,["selector"]);return oM(Object.assign({y:e},t))});function lM(){return[(t,e)=>Ig(t,t=>+e[t]),t=>"mean of "+t]}function uM(){return[(t,e)=>Og(t,t=>+e[t]),t=>"max of "+t]}function cM(){return[(t,e)=>t.length,t=>"count of "+t]}function hM(){return[(t,e)=>Dg(t,t=>+e[t]),t=>"sum of "+t]}function dM(){return[(t,e)=>e[0],t=>"first of "+t]}function pM(){return[(t,e)=>e[t[t.length-1]],t=>"last of "+t]}sM.props={category:"statistic"};const fM=(t={})=>{const o=I(t,["orderBy","reverse"]);return wT(t=>{const{data:a,encode:s,columnOf:l,I:e}=t;t=s.x;const n=l(a,t),u=n?Array.from(Tg(e,t=>n[t]).values()):[e];var t=Object.entries(o).map(([t,e])=>{var{[t]:n}=s;const r=l(a,n),[i,o]=function(t){if("function"==typeof t)return[t,null];const e={mean:lM,max:uM,count:cM,first:dM,last:pM,sum:hM}[t];if(e)return e();throw new Error(`Unknown reducer: ${t}.`)}(e);return[t,kT(ST(u.map(t=>i(t,null!==r&&void 0!==r?r:a)),r,o))]}),r=u.map(t=>a[t[0]]),i=u.map(t=>n[t[0]]);return{I:ZE(u),data:r,encode:Object.assign({x:kT(ST(i,n))},Object.fromEntries(t))}})};fM.props={category:"statistic"};var yM={},gM={},vM=34,mM=10,bM=13;function xM(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function wM(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function kM(t,e){var t=t+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function _M(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+kM(-e,6):9999<e?"+"+kM(e,6):kM(e,4))+"-"+kM(t.getUTCMonth()+1,2)+"-"+kM(t.getUTCDate(),2)+(o?"T"+kM(n,2)+":"+kM(r,2)+":"+kM(i,2)+"."+kM(o,3)+"Z":i?"T"+kM(n,2)+":"+kM(r,2)+":"+kM(i,2)+"Z":r||n?"T"+kM(n,2)+":"+kM(r,2)+"Z":"")}function SM(r){var e=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function n(r,t){var e,n=[],i=r.length,o=0,a=0,s=i<=0,l=!1;function u(){if(s)return gM;if(l)return l=!1,yM;var t,e,n=o;if(r.charCodeAt(n)===vM){for(;o++<i&&r.charCodeAt(o)!==vM||r.charCodeAt(++o)===vM;);return(t=o)>=i?s=!0:(e=r.charCodeAt(o++))===mM?l=!0:e===bM&&(l=!0,r.charCodeAt(o)===mM&&++o),r.slice(n+1,t-1).replace(/""/g,'"')}for(;o<i;){if((e=r.charCodeAt(t=o++))===mM)l=!0;else if(e===bM)l=!0,r.charCodeAt(o)===mM&&++o;else if(e!==h)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(r.charCodeAt(i-1)===mM&&--i,r.charCodeAt(i-1)===bM&&--i;(e=u())!==gM;){for(var c=[];e!==yM&&e!==gM;)c.push(e),e=u();t&&null==(c=t(c,a++))||n.push(c)}return n}function i(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(r)})}function o(t){return t.map(a).join(r)}function a(t){return null==t?"":t instanceof Date?_M(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,o){var a,s;return(t=n(t,function(t,e){if(a)return a(t,e-1);var n,r,i;s=t,a=o?(r=o,i=xM(n=t),function(t,e){return r(i(t),e,n)}):xM(t)})).columns=s||[],t},parseRows:n,format:function(t,e){return[(e=null==e?wM(t):e).map(a).join(r)].concat(i(t,e)).join("\n")},formatBody:function(t,e){return i(t,e=null==e?wM(t):e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}const EM=t=>{const{url:r,callback:i=$1,format:o,delimiter:a=","}=t;return wT(()=>F(void 0,void 0,void 0,function*(){const t=yield fetch(r);var e;if("csv"===o)return e=yield t.text(),{data:SM(a).parse(e,i)};const n=yield t.json();return{data:Array.isArray(n)?n.map(i):n}}))},TM=(EM.props={category:"preprocessor"},Math.PI/180),MM=64,OM=2048;function PM(t){return t.text}function CM(){return"serif"}function AM(){return"normal"}function NM(t){return t.value}function LM(){return 90*~~(2*Math.random())}function IM(){return 1}function RM(){}function jM(t,a,r,s){if(!a.sprite){const g=t.context,v=t.ratio;g.clearRect(0,0,(MM<<5)/v,OM/v);let i=0,o=0,n=0;var l,u,c,h,e=r.length;for(--s;++s<e;){a=r[s],g.save(),g.font=a.style+" "+a.weight+" "+~~((a.size+1)/v)+"px "+a.font;let t=g.measureText(a.text+"m").width*v,e=a.size<<1;if(a.rotate?(h=Math.sin(a.rotate*TM),c=Math.cos(a.rotate*TM),l=t*c,u=t*h,c=e*c,h=e*h,t=Math.max(Math.abs(l+h),Math.abs(l-h))+31>>5<<5,e=~~Math.max(Math.abs(u+c),Math.abs(u-c))):t=t+31>>5<<5,e>n&&(n=e),i+t>=MM<<5&&(i=0,o+=n,n=0),o+e>=OM)break;g.translate((i+(t>>1))/v,(o+(e>>1))/v),a.rotate&&g.rotate(a.rotate*TM),g.fillText(a.text,0,0),a.padding&&(g.lineWidth=2*a.padding,g.strokeText(a.text,0,0)),g.restore(),a.width=t,a.height=e,a.xoff=i,a.yoff=o,a.x1=t>>1,a.y1=e>>1,a.x0=-a.x1,a.y0=-a.y1,a.hasText=!0,i+=t}const m=g.getImageData(0,0,(MM<<5)/v,OM/v).data,b=[];for(;0<=--s;)if((a=r[s]).hasText){var d=a.width,p=d>>5;let n=a.y1-a.y0;for(let t=0;t<n*p;t++)b[t]=0;if(null==(i=a.xoff))return;o=a.yoff;let r=0,t=-1;for(let e=0;e<n;e++){for(let t=0;t<d;t++){var f=p*e+(t>>5),y=m[(o+e)*(MM<<5)+(i+t)<<2]?1<<31-t%32:0;b[f]|=y,r|=y}r?t=e:(a.y0++,n--,e--,o++)}a.y1=a.y0+t,a.sprite=b.slice(0,(a.y1-a.y0)*p)}}}function DM(t){const e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function BM(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function FM(){return document.createElement("canvas")}function zM(t){return"function"==typeof t?t:function(){return t}}const VM={archimedean:DM,rectangular:function(t){const n=4*t[0]/t[1];let r=0,i=0;return function(t){var e=t<0?-1:1;switch(Math.sqrt(1+4*e*t)-e&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4}return[r,i]}}};function GM(){let b=[256,256],r=PM,i=CM,o=NM,y=AM,g=LM,v=IM,x=DM,w=Math.random,m=RM,e=[],n=null,k=1/0;const _=AM,S=FM,E={};return E.start=function(){const[a,s]=b,l=function(t){t.width=t.height=1;const e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2),n=(t.width=(MM<<5)/e,t.height=OM/e,t.getContext("2d"));return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(S()),u=E.board||BM((b[0]>>5)*b[1]),c=e.length,h=[],d=e.map(function(t,e,n){return t.text=r.call(this,t,e,n),t.font=i.call(this,t,e,n),t.style=_.call(this,t,e,n),t.weight=y.call(this,t,e,n),t.rotate=g.call(this,t,e,n),t.size=~~o.call(this,t,e,n),t.padding=v.call(this,t,e,n),t}).sort(function(t,e){return e.size-t.size});let p=-1,f=E.board?[{x:0,y:0},{x:a,y:s}]:void 0;function t(){for(var t=Date.now();Date.now()-t<k&&++p<c;){const r=d[p];if(r.x=a*(w()+.5)>>1,r.y=s*(w()+.5)>>1,jM(l,r,d,p),r.hasText&&function(i,t,e){const n=t.x,r=t.y,o=Math.sqrt(b[0]*b[0]+b[1]*b[1]),a=x(b),s=w()<.5?1:-1;let l,u=-s,c,h;for(;(l=a(u+=s))&&(c=~~l[0],h=~~l[1],!(Math.min(Math.abs(c),Math.abs(h))>=o));)if(t.x=n+c,t.y=r+h,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>b[0]||t.y+t.y1>b[1])&&(!e||!function(t,n,r){var i=t.sprite,o=t.width>>5,e=t.x-(o<<4),a=127&e,s=32-a,l=t.y1-t.y0;let u=(t.y+t.y0)*(r>>=5)+(e>>5),c;for(let e=0;e<l;e++){for(let t=c=0;t<=o;t++)if((c<<s|(t<o?(c=i[e*o+t])>>>a:0))&n[u+t])return 1;u+=r}}(t,i,b[0]))&&(!e||function(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}(t,e))){var d=t.sprite,p=t.width>>5,f=b[0]>>5,y=t.x-(p<<4),g=127&y,v=32-g,m=t.y1-t.y0;let n,r=(t.y+t.y0)*f+(y>>5);for(let e=0;e<m;e++){for(let t=n=0;t<=p;t++)i[r+t]|=n<<v|(t<p?(n=d[e*p+t])>>>g:0);r+=f}return delete t.sprite,1}return}(u,r,f)){if(m.call(null,"word",{cloud:E,word:r}),h.push(r),f){if(!E.hasImage){e=void 0;n=void 0;var e=f;var n=r;const i=e[0],o=e[1];n.x+n.x0<i.x&&(i.x=n.x+n.x0),n.y+n.y0<i.y&&(i.y=n.y+n.y0),n.x+n.x1>o.x&&(o.x=n.x+n.x1),n.y+n.y1>o.y&&(o.y=n.y+n.y1)}}else f=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}];r.x-=b[0]>>1,r.y-=b[1]>>1}}E._tags=h,E._bounds=f,p>=c&&(E.stop(),m.call(null,"end",{cloud:E,words:h,bounds:f}))}return n&&clearInterval(n),n=setInterval(t,0),t(),E},E.stop=function(){return n&&(clearInterval(n),n=null),E},E.createMask=t=>{const e=document.createElement("canvas");var[n,r]=b;if(n&&r){var i=n>>5;const l=BM((n>>5)*r),u=(e.width=n,e.height=r,e.getContext("2d"));u.drawImage(t,0,0,t.width,t.height,0,0,n,r);var o=u.getImageData(0,0,n,r).data;for(let e=0;e<r;e++)for(let t=0;t<n;t++){var a=i*e+(t>>5),s=e*n+t<<2,s=250<=o[s]&&250<=o[1+s]&&250<=o[2+s]?1<<31-t%32:0;l[a]|=s}E.board=l,E.hasImage=!0}},E.timeInterval=function(t){k=null==t?1/0:t},E.words=function(t){e=t},E.size=function(t=[]){b=[+t[0],+t[1]]},E.text=function(t){r=zM(t)},E.font=function(t){i=zM(t)},E.fontWeight=function(t){y=zM(t)},E.rotate=function(t){g=zM(t)},E.spiral=function(t){x=VM[t]||t},E.fontSize=function(t){o=zM(t)},E.padding=function(t){v=zM(t)},E.random=function(t){w=zM(t)},E.on=function(t){m=zM(t)},E}const HM={size:[500,500],fontSize:[14,28]};function WM(r){return new Promise((t,e)=>{if(r instanceof HTMLImageElement)t(r);else if("string"==typeof r){const n=new Image;n.crossOrigin="anonymous",n.src=r,n.onload=()=>t(n),void(n.onerror=()=>{console.error(`'image ${r} load failed !!!'`),e()})}else e()})}const UM=y=>wT(({data:f})=>F(void 0,void 0,void 0,function*(){var i,o,t=Object.assign({},HM,y);const e=GM();i=e,o=t,yield{set(t,e,n){return void 0!==o[t]&&(e=e?e.call(null,o[t]):o[t],n?n.call(null,e):"function"==typeof i[t]?i[t](e):i[t]=e),this},setAsync(e,n,r){return F(this,void 0,void 0,function*(){var t;return void 0!==o[e]&&(t=n?yield n.call(null,o[e]):o[e],r?r.call(null,t):"function"==typeof i[e]?i[e](t):i[e]=t),this})}}.set("fontSize",t=>{var e=f.map(t=>t.value),n=t,t=[Cg(e),Og(e)];if("function"==typeof n)return n;if(Array.isArray(n)){const[r,i]=n;if(!t)return()=>(i+r)/2;const[o,a]=t;return a===o?()=>(i+r)/2:({value:t})=>(i-r)/(a-o)*(t-o)+r}return()=>n}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",WM,e.createMask),e.words([...f]);var n=e.start();const[r,a]=t.size;t=[{x:0,y:0},{x:r,y:a}];const{_bounds:s=t,_tags:l,hasImage:u}=n,c=l.map(t=>{var{x:e,y:n}=t,t=I(t,["x","y"]);return Object.assign(Object.assign({},t),{x:e+r/2,y:n+a/2})});var[{x:n,y:t},{x:h,y:d}]=s,p={text:"",value:0,opacity:0,fontSize:0};return c.push(Object.assign(Object.assign({},p),{x:u?0:n,y:u?0:t}),Object.assign(Object.assign({},p),{x:u?r:h,y:u?a:d})),{data:c}}));UM.props={category:"preprocessor"};const YM=t=>{const{fields:o,as:n=[]}=t;return wT(({data:t})=>{if(!o||(e=o,0===Object.keys(e).length))return{data:t};var e;const[r="key",i="value"]=n;return{data:t.reduce((e,n)=>{for(let t=0;t<o.length;t++)e.push(Object.assign(Object.assign({},n),{[r]:o[t],[i]:n[o[t]]}));return e},[])}})};YM.props={category:"preprocessor"};const qM=t=>{const{fields:n=[],callback:r=function(t){return null!=t&&!Number.isNaN(t)}}=t;return wT(({data:t})=>({data:t.filter(e=>n.every(t=>r(e[t])))}))};function XM(t,e,n){return Math.min(n,Math.max(e,t))}qM.props={category:"preprocessor"};const ZM=i=>wT(({data:t})=>{const{fields:e=[]}=i;let{start:n=0,end:r=t.length}=i;n=XM(n,0,t.length-1),r=XM(r,1,t.length),n>r&&([n,r]=[r,n]);return{data:t.filter((t,e)=>e>=n&&e<r).map(n=>e.reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{}))}}),KM=(ZM.props={category:"preprocessor"},t=>{t=t.fields;return ZM({fields:t})});KM.props={category:"preprocessor"};const $M=t=>{const r=t["map"];return wT(({data:t})=>{if(!r||(e=r,0===Object.keys(e).length))return t;var e;return{data:t.map(t=>Object.entries(t).reduce((t,[e,n])=>(t[r[e]||e]=n,t),{}))}})},JM=($M.props={category:"preprocessor"},t=>{const{fields:i=[],order:r="ASC"}=t;return wT(({data:t})=>{const n=(n,r)=>i.reduce((t,e)=>0!==t?t:n[e]<r[e]?-1:+(n[e]!==r[e]),0);var e="ASC"===r?n:(t,e)=>n(e,t);return{data:[...t].sort(e)}})});function QM(t){return function(){return t}}function tO(t){return t[0]}function eO(t){return t[1]}function nO(){this._=null}function rO(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function iO(t,e){var n=e,e=e.R,r=n.U;r?r.L===n?r.L=e:r.R=e:t._=e,e.U=r,n.U=e,n.R=e.L,n.R&&(n.R.U=n),e.L=n}function oO(t,e){var n=e,e=e.L,r=n.U;r?r.L===n?r.L=e:r.R=e:t._=e,e.U=r,n.U=e,n.L=e.R,n.L&&(n.L.U=n),e.R=n}function aO(t){for(;t.L;)t=t.L;return t}function sO(t,e,n,r){var i=[null,null],o=MO.push(i)-1;return i.left=t,i.right=e,n&&uO(i,t,e,n),r&&uO(i,e,t,r),EO[t.index].halfedges.push(o),EO[e.index].halfedges.push(o),i}function lO(t,e,n){e=[e,n];return e.left=t,e}function uO(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function cO(t,e,n,r){for(var i,o=MO.length;o--;)(function(t,e,n,r,i){var o=t[1];if(!o){var a,s=t[0],l=t.left,u=t.right,c=l[0],l=l[1],h=u[0],u=u[1],d=(c+h)/2;if(u===l){if(d<e||r<=d)return;if(h<c){if(s){if(s[1]>=i)return}else s=[d,n];o=[d,i]}else{if(s){if(s[1]<n)return}else s=[d,i];o=[d,n]}}else if(d=(l+u)/2-(a=(c-h)/(u-l))*d,a<-1||1<a)if(h<c){if(s){if(s[1]>=i)return}else s=[(n-d)/a,n];o=[(i-d)/a,i]}else{if(s){if(s[1]<n)return}else s=[(i-d)/a,i];o=[(n-d)/a,n]}else if(l<u){if(s){if(s[0]>=r)return}else s=[e,a*e+d];o=[r,a*r+d]}else{if(s){if(s[0]<e)return}else s=[r,a*r+d];o=[e,a*e+d]}t[0]=s,t[1]=o}return 1})(i=MO[o],t,e,n,r)&&function(t,e,n,r,i){var o=t[0],a=t[1],s=o[0],o=o[1],l=0,u=1,c=a[0]-s,a=a[1]-o,e=e-s;if(c||!(0<e)){if(e/=c,c<0){if(e<l)return;e<u&&(u=e)}else if(0<c){if(u<e)return;l<e&&(l=e)}if(e=r-s,c||!(e<0)){if(e/=c,c<0){if(u<e)return;l<e&&(l=e)}else if(0<c){if(e<l)return;e<u&&(u=e)}if(e=n-o,a||!(0<e)){if(e/=a,a<0){if(e<l)return;e<u&&(u=e)}else if(0<a){if(u<e)return;l<e&&(l=e)}if(e=i-o,a||!(e<0)){if(e/=a,a<0){if(u<e)return;l<e&&(l=e)}else if(0<a){if(e<l)return;e<u&&(u=e)}return(0<l||u<1)&&(0<l&&(t[0]=[s+l*c,o+l*a]),u<1&&(t[1]=[s+u*c,o+u*a])),1}}}}}(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>OO||Math.abs(i[0][1]-i[1][1])>OO)||delete MO[o]}function hO(t,e){return e[+(e.left!==t.site)]}function dO(){for(var t,e,n,r,i,o,a,s=0,l=EO.length;s<l;++s)if((t=EO[s])&&(n=(e=t.halfedges).length)){for(var u=new Array(n),c=new Array(n),h=0;h<n;++h)u[h]=h,c[h]=(r=t,i=MO[e[h]],a=o=void 0,r=r.site,o=i.left,a=i.right,r===a&&(a=o,o=r),a?Math.atan2(a[1]-o[1],a[0]-o[0]):(a=r===o?(o=i[1],i[0]):(o=i[0],i[1]),Math.atan2(o[0]-a[0],a[1]-o[1])));for(u.sort(function(t,e){return c[e]-c[t]}),h=0;h<n;++h)c[h]=e[u[h]];for(h=0;h<n;++h)e[h]=c[h]}}JM.props={category:"preprocessor"},nO.prototype={constructor:nO,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=aO(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(iO(this,n),n=(t=n).U),n.C=!1,r.C=!0,oO(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(oO(this,n),n=(t=n).U),n.C=!1,r.C=!0,iO(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r=t.U,i=t.L,o=t.R,a=i?o?aO(o):i:o;if(r?r.L===t?r.L=a:r.R=a:this._=a,i&&o?(n=a.C,a.C=t.C,((a.L=i).U=a)!==o?(r=a.U,a.U=t.U,t=a.R,r.L=t,(a.R=o).U=a):(a.U=r,t=(r=a).R)):(n=t.C,t=a),t&&(t.U=r),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,iO(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,oO(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,iO(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,oO(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,iO(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,oO(this,r),t=this._;break}}while(e.C=!0,r=(t=r).U,!t.C);t&&(t.C=!1)}}};var pO,fO=[];function yO(){rO(this),this.x=this.y=this.arc=this.site=this.cy=null}function gO(t){var e=t.P,n=t.N;if(e&&n){var e=e.site,r=t.site,n=n.site;if(e!==n){var i=r[0],o=r[1],a=e[0]-i,e=e[1]-o,s=n[0]-i,n=n[1]-o,l=2*(a*n-e*s);if(!(-PO<=l)){for(var u=a*a+e*e,c=s*s+n*n,n=(n*u-e*c)/l,e=(a*c-s*u)/l,h=fO.pop()||new yO,d=(h.arc=t,h.site=r,h.x=n+i,h.y=(h.cy=e+o)+Math.sqrt(n*n+e*e),t.circle=h,null),p=TO._;p;)if(h.y<p.y||h.y===p.y&&h.x<=p.x){if(!p.L){d=p.P;break}p=p.L}else{if(!p.R){d=p;break}p=p.R}TO.insert(d,h),d||(pO=h)}}}}function vO(t){var e=t.circle;e&&(e.P||(pO=e.N),TO.remove(e),fO.push(e),rO(e),t.circle=null)}var mO=[];function bO(){rO(this),this.edge=this.site=this.circle=null}function xO(t){var e=mO.pop()||new bO;return e.site=t,e}function wO(t){vO(t),SO.remove(t),mO.push(t),rO(t)}function kO(t){for(var e,n,r,i,o=t[0],a=t[1],s=SO._;s;)if(r=_O(s,a)-o,OO<r)s=s.L;else{if(i=o-function(t,e){var n=t.N;if(n)return _O(n,e);n=t.site;return n[1]===e?n[0]:1/0}(s,a),!(OO<i)){-OO<r?(e=s.P,n=s):-OO<i?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}EO[t.index]={site:t,halfedges:[]};var l,u,c,h,d,p,f,y,g,v,m=xO(t);SO.insert(e,m),(e||n)&&(e===n?(vO(e),n=xO(e.site),SO.insert(m,n),m.edge=n.edge=sO(e.site,m.site),gO(e),gO(n)):n?(vO(e),vO(n),u=(l=e.site)[0],c=l[1],h=t[0]-u,v=t[1]-c,p=(d=n.site)[0]-u,f=d[1]-c,uO(n.edge,l,d,v=[(f*(y=h*h+v*v)-v*(g=p*p+f*f))/(f=2*(h*f-v*p))+u,(h*g-p*y)/f+c]),m.edge=sO(l,t,null,v),n.edge=sO(t,d,null,v),gO(e),gO(n)):m.edge=sO(e.site,m.site))}function _O(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;t=t.P;if(!t)return-1/0;t=(n=t.site)[0],n=n[1],e=n-e;if(!e)return t;var a=t-r,s=1/o-1/e,l=a/e;return s?(-l+Math.sqrt(l*l-2*s*(a*a/(-2*e)-n+e/2+i-o/2)))/s+r:(r+t)/2}var SO,EO,TO,MO,OO=1e-6,PO=1e-12;function CO(t,e){return e[1]-t[1]||e[0]-t[0]}function AO(t,e){var j,D,n,r=t.sort(CO).pop();for(MO=[],EO=new Array(t.length),SO=new nO,TO=new nO;;)if(n=pO,r&&(!n||r[1]<n.y||r[1]===n.y&&r[0]<n.x))r[0]===j&&r[1]===D||(kO(r),j=r[0],D=r[1]),r=t.pop();else{if(!n)break;y=f=p=d=h=c=u=l=s=a=o=i=void 0;for(var i=n.arc,o=i.circle,a=o.x,s=o.cy,l=[a,s],u=i.P,c=i.N,h=[i],d=(wO(i),u);d.circle&&Math.abs(a-d.circle.x)<OO&&Math.abs(s-d.circle.cy)<OO;)u=d.P,h.unshift(d),wO(d),d=u;h.unshift(d),vO(d);for(var p=c;p.circle&&Math.abs(a-p.circle.x)<OO&&Math.abs(s-p.circle.cy)<OO;)c=p.N,h.push(p),wO(p),p=c;h.push(p),vO(p);for(var f=h.length,y=1;y<f;++y)p=h[y],d=h[y-1],uO(p.edge,d.site,p.site,l);d=h[0],(p=h[f-1]).edge=sO(d.site,p.site,null,l),gO(d),gO(p)}if(dO(),e){var g,v,m,b,x,w,k,_,S,E,T=+e[0][0],M=+e[0][1],O=+e[1][0],e=+e[1][1],P=(cO(T,M,O,e),T),C=M,A=O,N=e,B=EO.length,L=!0;for(R=0;R<B;++R)if(g=EO[R]){for(v=g.site,m=(b=g.halfedges).length;m--;)MO[b[m]]||b.splice(m,1);for(m=0,x=b.length;m<x;)S=g,S=(E=(E=MO[b[m]])[+(E.left===S.site)])[0],_=E[1],w=(k=hO(g,MO[b[++m%x]]))[0],k=k[1],(Math.abs(S-w)>OO||Math.abs(_-k)>OO)&&(b.splice(m,0,MO.push(lO(v,E,Math.abs(S-P)<OO&&OO<N-_?[P,Math.abs(w-P)<OO?k:N]:Math.abs(_-N)<OO&&OO<A-S?[Math.abs(k-N)<OO?w:A,N]:Math.abs(S-A)<OO&&OO<_-C?[A,Math.abs(w-A)<OO?k:C]:Math.abs(_-C)<OO&&OO<S-P?[Math.abs(k-C)<OO?w:P,C]:null))-1),++x);x&&(L=!1)}if(L){for(var I,F=1/0,R=0,L=null;R<B;++R)(g=EO[R])&&(I=(I=(v=g.site)[0]-P)*I+(I=v[1]-C)*I)<F&&(F=I,L=g);L&&(T=[A,N],M=[A,C],L.halfedges.push(MO.push(lO(v=L.site,O=[P,C],e=[P,N]))-1,MO.push(lO(v,e,T))-1,MO.push(lO(v,T,M))-1,MO.push(lO(v,M,O))-1))}for(R=0;R<B;++R)!(g=EO[R])||g.halfedges.length||delete EO[R]}this.edges=MO,this.cells=EO,SO=TO=MO=EO=null}AO.prototype={constructor:AO,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return hO(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var c=[],h=this.edges;return this.cells.forEach(function(t,e){if(r=(n=t.halfedges).length)for(var n,r,i,o,a=t.site,s=-1,l=h[n[r-1]],u=l.left===a?l.right:l.left;++s<r;)i=u,u=(l=h[n[s]]).left===a?l.right:l.left,i&&u&&e<i.index&&e<u.index&&(o=u,(a[0]-o[0])*(i[1]-a[1])-(a[0]-i[0])*(o[1]-a[1])<0)&&c.push([a.data,i.data,u.data])}),c},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(n,r,t){for(var e,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;for(var l=n-i.site[0],u=r-i.site[1],c=l*l+u*u;i=o.cells[e=a],a=null,i.halfedges.forEach(function(t){var t=o.edges[t],e=t.left;!(e!==i.site&&e||(e=t.right))||(t=(t=n-e[0])*t+(t=r-e[1])*t)<c&&(c=t,a=e.index)}),null!==a;);return o._found=e,null==t||c<=t*t?i.site:null}};const NO=t=>{const{fields:e,as:n,extend:r}=t,[a,s]=e,[l,u]=n;return wT(({data:t})=>{var i,o,e;function n(r){return new AO(r.map(function(t,e){var n=[Math.round(i(t,e,r)/OO)*OO,Math.round(o(t,e,r)/OO)*OO];return n.index=e,n.data=t,n}),e)}return i=tO,o=eO,e=null,n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(i="function"==typeof t?t:QM(+t),n):i},n.y=function(t){return arguments.length?(o="function"==typeof t?t:QM(+t),n):o},n.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},n.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],n):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},{data:n.x(t=>t[a]).y(t=>t[s]).extent(r).polygons(t).map(t=>Object.assign(Object.assign({},t.data),{[l]:t.map(t=>t[0]),[u]:t.map(t=>t[1])}))}})};function LO(t){return t.target.depth}function IO(t,e){return t.sourceLinks.length?t.depth:e-1}function RO(t){return function(){return t}}function jO(t,e){return BO(t.source,e.source)||t.index-e.index}function DO(t,e){return BO(t.target,e.target)||t.index-e.index}function BO(t,e){return t.y0-e.y0}function FO(t){return t.value}function zO(t){return t.index}function VO(t){return t.nodes}function GO(t){return t.links}function HO(t,e){t=t.get(e);if(t)return t;throw new Error("missing: "+e)}function WO({nodes:t}){for(const n of t){let t=n.y0,e=t;for(const r of n.sourceLinks)r.y0=t+r.width/2,t+=r.width;for(const i of n.targetLinks)i.y1=e+i.width/2,e+=i.width}}function UO(){let b=0,x=0,w=1,k=1,_=24,S=8,E,T=zO,M=IO,O,P,C,A=VO,N=GO,L=6;function e(e){e={nodes:A(e),links:N(e)};{var{nodes:i,links:t}=e;i.forEach((t,e)=>{t.index=e,t.sourceLinks=[],t.targetLinks=[]});const p=new Map(i.map(t=>[T(t),t]));if(t.forEach((t,e)=>{t.index=e;let{source:n,target:r}=t;"object"!=typeof n&&(n=t.source=HO(p,n)),"object"!=typeof r&&(r=t.target=HO(p,r)),n.sourceLinks.push(t),r.targetLinks.push(t)}),null!=C)for(var{sourceLinks:n,targetLinks:r}of i)n.sort(C),r.sort(C)}t=e.nodes;for(const f of t)f.value=void 0===f.fixedValue?Math.max(Dg(f.sourceLinks,FO),Dg(f.targetLinks,FO)):f.fixedValue;{var o=e.nodes,a=o.length;let t=new Set(o),n=new Set,r=0;for(;t.size;){if(t.forEach(t=>{t.depth=r;for(var{target:e}of t.sourceLinks)n.add(e)}),++r>a)throw new Error("circular link");t=n,n=new Set}if(O){var s=Math.max(Og(o,t=>t.depth)+1,0);let e;for(let t=0;t<o.length;t++)(e=o[t]).depth=O.call(null,e,s)}}{var l=(i=e.nodes).length;let t=new Set(i),n=new Set,r=0;for(;t.size;){if(t.forEach(t=>{t.height=r;for(var{source:e}of t.targetLinks)n.add(e)}),++r>l)throw new Error("circular link");t=n,n=new Set}}var u=function({nodes:t}){const e=Math.max(Og(t,t=>t.depth)+1,0),n=(w-b-_)/(e-1),r=new Array(e).fill(0).map(()=>[]);for(const o of t){var i=Math.max(0,Math.min(e-1,Math.floor(M.call(null,o,e))));o.layer=i,o.x0=b+i*n,o.x1=o.x0+_,r[i]?r[i].push(o):r[i]=[o]}if(P)for(const a of r)a.sort(P);return r}(e),t=(E=Math.min(S,(k-x)/(Og(u,t=>t.length)-1)),u),c=Cg(t,t=>(k-x-(t.length-1)*E)/Dg(t,FO));for(const y of t){let e=x;for(const g of y){g.y0=e,g.y1=e+g.value*c,e=g.y1+E;for(const v of g.sourceLinks)v.width=v.value*c}e=(k-e+E)/(y.length+1);for(let t=0;t<y.length;++t){const m=y[t];m.y0+=e*(t+1),m.y1+=e*(t+1)}!function(t){if(void 0===C)for(var{sourceLinks:e,targetLinks:n}of t)e.sort(DO),n.sort(jO)}(y)}for(let t=0;t<L;++t){var h=Math.pow(.99,t),d=Math.max(1-h,(t+1)/L);!function(n,r,i){for(let t=n.length,e=t-2;0<=e;--e){const l=n[e];for(const u of l){let t=0,e=0;for(var{target:o,value:a}of u.sourceLinks){a=a*(o.layer-u.layer);t+=function(t,e){let n=e.y0-(e.targetLinks.length-1)*E/2;for(var{source:r,width:i}of e.targetLinks){if(r===t)break;n+=i+E}for(var{target:o,width:a}of t.sourceLinks){if(o===e)break;n-=a}return n}(u,o)*a,e+=a}var s;0<e&&(s=(t/e-u.y0)*r,u.y0+=s,u.y1+=s,R(u))}void 0===P&&l.sort(BO),l.length&&I(l,i)}}(u,h,d),!function(n,r,i){for(let t=1,e=n.length;t<e;++t){const l=n[t];for(const u of l){let t=0,e=0;for(var{source:o,value:a}of u.targetLinks){a=a*(u.layer-o.layer);t+=function(t,e){let n=t.y0-(t.sourceLinks.length-1)*E/2;for(var{target:r,width:i}of t.sourceLinks){if(r===e)break;n+=i+E}for(var{source:o,width:a}of e.targetLinks){if(o===t)break;n-=a}return n}(o,u)*a,e+=a}var s;0<e&&(s=(t/e-u.y0)*r,u.y0+=s,u.y1+=s,R(u))}void 0===P&&l.sort(BO),l.length&&I(l,i)}}(u,h,d)}return WO(e),e}function I(t,e){var n=t.length>>1,r=t[n];o(t,r.y0-E,n-1,e),i(t,r.y1+E,1+n,e),o(t,k,t.length-1,e),i(t,x,0,e)}function i(t,e,n,r){for(;n<t.length;++n){const o=t[n];var i=(e-o.y0)*r;1e-6<i&&(o.y0+=i,o.y1+=i),e=o.y1+E}}function o(t,e,n,r){for(;0<=n;--n){const o=t[n];var i=(o.y1-e)*r;1e-6<i&&(o.y0-=i,o.y1-=i),e=o.y0-E}}function R({sourceLinks:t,targetLinks:e}){if(void 0===C){for(const{source:{sourceLinks:t}}of e)t.sort(DO);for(const{target:{targetLinks:e}}of t)e.sort(jO)}}return e.update=function(t){return WO(t),t},e.nodeId=function(t){return arguments.length?(T="function"==typeof t?t:RO(t),e):T},e.nodeAlign=function(t){return arguments.length?(M="function"==typeof t?t:RO(t),e):M},e.nodeDepth=function(t){return arguments.length?(O=t,e):O},e.nodeSort=function(t){return arguments.length?(P=t,e):P},e.nodeWidth=function(t){return arguments.length?(_=+t,e):_},e.nodePadding=function(t){return arguments.length?(S=E=+t,e):S},e.nodes=function(t){return arguments.length?(A="function"==typeof t?t:RO(t),e):A},e.links=function(t){return arguments.length?(N="function"==typeof t?t:RO(t),e):N},e.linkSort=function(t){return arguments.length?(C=t,e):C},e.size=function(t){return arguments.length?(b=x=0,w=+t[0],k=+t[1],e):[w-b,k-x]},e.extent=function(t){return arguments.length?(b=+t[0][0],w=+t[1][0],x=+t[0][1],k=+t[1][1],e):[[b,x],[w,k]]},e.iterations=function(t){return arguments.length?(L=+t,e):L},e}NO.props={category:"preprocessor"};const YO={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},qO={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Cg(t.sourceLinks,LO)-1:0},justify:IO};const XO=f=>wT(({data:t})=>{var{nodeId:e,nodeSort:n,nodeAlign:r,nodeWidth:i,nodePadding:o,nodeDepth:a,nodes:s,links:l,linkSort:u,iterations:c}=Object.assign({},YO,f);const h=UO().nodeSort(n).linkSort(u).links(l).nodes(s).nodeWidth(i).nodePadding(o).nodeDepth(a).nodeAlign("string"==(u=typeof(n=r))?qO[n]||IO:"function"==u?n:IO).iterations(c).extent([[0,0],[1,1]]),{nodes:d,links:p}=("function"==typeof e&&h.nodeId(e),h(t));return{data:{nodes:d.map(t=>{var{x0:e,x1:n,y0:r,y1:i}=t;return Object.assign(Object.assign({},t),{x:[e,n,n,e],y:[r,r,i,i]})}),links:p.map(t=>{var{source:e,target:n}=t,e=e.x1,n=n.x0,r=t.width/2;return Object.assign(Object.assign({},t),{x:[e,e,n,n],y:[t.y0+r,t.y0-r,t.y1+r,t.y1-r]})})}}});XO.props={category:"preprocessor"};var ZO=Object.freeze({__proto__:null,weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,e){return(""+t.id).localeCompare(""+e.id)},name:function(t,e){return(""+t.name).localeCompare(""+e.name)}});const KO={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function $O(t){const{y:u,thickness:c,weight:h,marginRatio:d,id:p,source:f,target:y,sourceWeight:g,targetWeight:v,sortBy:m}=Object.assign(Object.assign({},KO),t);return function(t){var e=t.nodes.map(t=>Object.assign({},t)),t=t.edges.map(t=>Object.assign({},t));{var n=e,r=t;r.forEach(t=>{t.source=f(t),t.target=y(t),t.sourceWeight=g(t),t.targetWeight=v(t)});const i=Tg(r,t=>t.source),o=Tg(r,t=>t.target);n.forEach(t=>{t.id=p(t);var e=i.has(t.id)?i.get(t.id):[],n=o.has(t.id)?o.get(t.id):[];t.frequency=e.length+n.length,t.value=Dg(e,t=>t.sourceWeight)+Dg(n,t=>t.targetWeight)})}if(r=e,(n="function"==typeof m?m:ZO[m])&&r.sort(n),!(n=(r=e).length))throw Q1("Invalid nodes: it's empty!");if(h){const a=d/(2*n),s=r.reduce((t,e)=>t+=e.value,0);r.reduce((t,e)=>{e.weight=e.value/s,e.width=e.weight*(1-d),e.height=c;var n=a+t,r=n+e.width,i=u-c/2,o=i+c;return e.x=[n,r,r,n],e.y=[i,i,o,o],t+e.width+2*a},0)}else{const l=1/n;r.forEach((t,e)=>{t.x=(e+.5)*l,t.y=u})}return function(t,e){const r=new Map(t.map(t=>[t.id,t]));if(!h)return e.forEach(t=>{var e=f(t),n=y(t),e=r.get(e),n=r.get(n);e&&n&&(t.x=[e.x,n.x],t.y=[e.y,n.y])});e.forEach(t=>{t.x=[0,0,0,0],t.y=[u,u,u,u]});const s=Tg(e,t=>t.source),l=Tg(e,t=>t.target);t.forEach(n=>{const{width:r,value:i,id:t}=n,e=s.get(t)||[],o=l.get(t)||[];let a=0;e.map(t=>{var e=t.sourceWeight/i*r;t.x[0]=n.x[0]+a,t.x[1]=n.x[0]+a+e,a+=e}),o.forEach(t=>{var e=t.targetWeight/i*r;t.x[3]=n.x[0]+a,t.x[2]=n.x[0]+a+e,a+=e})})}(e,t),{nodes:e,edges:t}}}const JO=e=>wT(({data:t})=>({data:$O(e)(t)}));function QO(t,e){return t.parent===e.parent?1:2}function tP(t,e){return t+e.x}function eP(t,e){return Math.max(t,e.y)}function nP(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;0<=--r;)e+=n[r].value;else e=1;t.value=e}function rP(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=oP)):void 0===e&&(e=iP);for(var n,r,i,o,a,t=new lP(t),s=[t];n=s.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;0<=o;--o)s.push(r=i[o]=new lP(i[o])),r.parent=n,r.depth=n.depth+1;return t.eachBefore(sP)}function iP(t){return t.children}function oP(t){return Array.isArray(t)?t[1]:null}function aP(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function sP(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function lP(t){this.data=t,this.depth=this.height=0,this.parent=null}function uP(t,e){return t.parent===e.parent?1:2}function cP(t){var e=t.children;return e?e[0]:t.t}function hP(t){var e=t.children;return e?e[e.length-1]:t.t}function dP(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}JO.props={category:"preprocessor"},lP.prototype=rP.prototype={constructor:lP,count:function(){return this.eachAfter(nP)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i,o=[this],a=-1;n=o.pop();)if(t.call(e,n,++a,this),r=n.children)for(i=r.length-1;0<=i;--i)o.push(r[i]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(i){return this.eachAfter(function(t){for(var e=+i(t.data)||0,n=t.children,r=n&&n.length;0<=--r;)e+=n[r].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return rP(this).eachBefore(aP)},[Symbol.iterator]:function*(){var t,e,n,r,i,o=[this];do{for(e=o.reverse(),o=[];t=e.pop();)if(yield t,n=t.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length)}},dP.prototype=Object.create(lP.prototype);b=p=>d=>wT(({data:t})=>{const{field:e="value",nodeSize:n,separation:r,sortBy:i,as:o=["x","y"]}=d,[a,s]=o,l=rP(t,t=>t.children).sum(t=>t[e]).sort(i),u=p(),c=(u.size([1,1]),n&&u.nodeSize(n),r&&u.separation(r),u(l),[]),h=(l.each(t=>{t[a]=t.x,t[s]=t.y,t.name=t.data.name,c.push(t)}),l.links());return h.forEach(t=>{t[a]=[t.source[a],t.target[a]],t[s]=[t.source[s],t.target[s]]}),{data:{nodes:c,edges:h}}});const pP=b(function(){var s=QO,l=1,u=1,c=!1;function e(e){var r,i=0,t=(e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(tP,0)/e.length,t.y=1+n.reduce(eP,0)):(t.x=r?i+=s(t,r):0,t.y=0,r=t)}),function(t){for(var e;e=t.children;)t=e[0];return t}(e)),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),o=t.x-s(t,n)/2,a=n.x+s(n,t)/2;return e.eachAfter(c?function(t){t.x=(t.x-e.x)*l,t.y=(e.y-t.y)*u}:function(t){t.x=(t.x-o)/(a-o)*l,t.y=(1-(e.y?t.y/e.y:1))*u})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(c=!1,l=+t[0],u=+t[1],e):c?null:[l,u]},e.nodeSize=function(t){return arguments.length?(c=!0,l=+t[0],u=+t[1],e):c?[l,u]:null},e}),fP=(pP.props={category:"preprocessor"},b(function(){var d=uP,l=1,u=1,c=null;function e(t){var e,n,r,i,o,a,s=function(t){for(var e,n,r,i,o,a=[t=new dP(t,0)];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;0<=i;--i)a.push(n=e.children[i]=new dP(r[i],i)),n.parent=e;return(t.parent=new dP(null,0)).children=[t],t}(t);return s.eachAfter(h),s.parent.m=-s.z,s.eachBefore(p),c?t.eachBefore(f):((r=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>r.depth&&(r=t)}),s=e===n?1:d(e,n)/2,i=s-e.x,o=l/(n.x+s+i),a=u/(r.depth||1),t.eachBefore(function(t){t.x=(t.x+i)*o,t.y=t.depth*a})),t}function h(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e){for(var i,o=0,a=0,s=t.children,l=s.length;0<=--l;)(i=s[l]).z+=o,i.m+=o,o+=i.s+(a+=i.c);e=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+d(t._,r._),t.m=t.z-e):t.z=e}else r&&(t.z=r.z+d(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,o=t,a=e,s=i.parent.children[0],l=i.m,u=o.m,c=a.m,h=s.m;a=hP(a),i=cP(i),a&&i;)s=cP(s),(o=hP(o)).a=t,0<(r=a.z+c-i.z-l+d(a._,i._))&&(function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(a,t,n),t,r),l+=r,u+=r),c+=a.m,l+=i.m,h+=s.m,u+=o.m;a&&!hP(o)&&(o.t=a,o.m+=c-u),i&&!cP(s)&&(s.t=i,s.m+=l-h,n=t)}return n}(t,r,t.parent.A||n[0])}function p(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=l,t.y=t.depth*u}return e.separation=function(t){return arguments.length?(d=t,e):d},e.size=function(t){return arguments.length?(c=!1,l=+t[0],u=+t[1],e):c?null:[l,u]},e.nodeSize=function(t){return arguments.length?(c=!0,l=+t[0],u=+t[1],e):c?[l,u]:null},e})),yP=(fP.props={category:"preprocessor"},n=>wT(({data:t})=>{const e=n["callback"];return{data:e?e(t):t}}));function gP(){return{"transform.fetch":EM,"transform.sortBy":JM,"transform.filterBy":qM,"transform.pick":KM,"transform.rename":$M,"transform.subset":ZM,"transform.fold":YM,"transform.wordCloud":UM,"transform.voronoi":NO,"transform.sankey":XO,"transform.arc":JO,"transform.cluster":pP,"transform.tree":fP,"transform.connector":yP,"transform.maybeZeroY1":ET,"transform.maybeZeroX":GT,"transform.maybeStackY":DT,"transform.maybeTitleX":BT,"transform.maybeTooltipY":VT,"transform.maybeTooltipPosition":zT,"transform.maybeArrayField":UT,"transform.maybeSeries":qT,"transform.stackY":RT,"transform.dodgeX":XT,"transform.jitter":JT,"transform.jitterY":QT,"transform.symmetryY":tM,"transform.stackEnter":ZT,"transform.normalizeY":KT,"transform.select":oM,"transform.selectX":aM,"transform.selectY":sM,"transform.groupX":fM,"transform.maybeSize":WT,"transform.maybeZeroY":HT,"transform.maybeKey":YT,"renderer.canvas":og,"coordinate.cartesian":ag,"coordinate.polar":sg,"coordinate.transpose":lg,"coordinate.parallel":ug,"coordinate.fisheye":cg,"encode.constant":hg,"encode.field":pg,"encode.transform":dg,"encode.column":fg,"mark.interval":bg,"mark.line":Hg,"mark.point":Wg,"mark.text":Ug,"mark.grid":Yg,"mark.area":qg,"mark.link":$g,"mark.node":Kg,"mark.edge":Zg,"mark.image":Jg,"mark.polygon":Xg,"mark.schema":Qg,"mark.vector":tv,"mark.annotation.text":ev,"mark.annotation.lineX":rv,"mark.annotation.lineY":nv,"mark.annotation.connector":iv,"mark.annotation.range":sv,"mark.annotation.rangeX":lv,"mark.annotation.rangeY":uv,"palette.category10":cv,"palette.category20":hv,"scale.linear":Fm,"scale.ordinal":zm,"scale.band":Bm,"scale.identity":Vm,"scale.point":Gm,"scale.time":Hm,"scale.log":Wm,"scale.pow":Um,"scale.threshold":Ym,"scale.quantile":qm,"scale.quantize":Xm,"shape.rect":hb,"shape.hollowRect":db,"shape.funnel":pb,"shape.pyramid":yb,"shape.line":vb,"shape.hv":bb,"shape.vh":xb,"shape.hvh":wb,"shape.smooth":mb,"shape.bowtie":Eb,"shape.cross":Tb,"shape.diamond":Mb,"shape.hexagon":Ob,"shape.hollowBowtie":Pb,"shape.hollowDiamond":Cb,"shape.hollowHexagon":Ab,"shape.hollowPoint":Nb,"shape.hollowSquare":Lb,"shape.hollowTriangle":Ib,"shape.hollowTriangleDown":Rb,"shape.hyphen":jb,"shape.linePoint":Db,"shape.plus":Bb,"shape.point":Fb,"shape.square":zb,"shape.tick":Vb,"shape.triangle":Gb,"shape.triangleDown":Hb,"shape.text":Ub,"shape.area":W_,"shape.smoothArea":U_,"shape.edge":J_,"shape.smoothEdge":Q_,"shape.vhvEdge":tS,"shape.arc":eS,"shape.link":Y_,"shape.pointNode":K_,"shape.polygonNode":$_,"shape.image":q_,"shape.polygon":X_,"shape.ribbon":nS,"shape.box":Z_,"shape.vector":Wb,"shape.label":uS,"shape.annotation.text":F_,"shape.annotation.badge":V_,"shape.annotation.line":rS,"shape.annotation.connector":lS,"shape.annotation.range":hb,"theme.light":cS,"component.axisX":gS,"component.axisY":vS,"component.legendCategory":mS,"component.legendContinuous":bS,"component.title":_S,"animation.scaleInX":MS,"animation.scaleOutX":OS,"animation.scaleInY":PS,"animation.scaleOutY":CS,"animation.fadeIn":AS,"animation.fadeOut":NS,"animation.morphing":jS,"interaction.elementActive":EE,"interaction.elementSelected":TE,"interaction.elementHighlight":PE,"interaction.elementHighlightByX":AE,"interaction.elementHighlightByColor":NE,"interaction.elementListHighlight":CE,"interaction.legendActive":LE,"interaction.legendHighlight":IE,"interaction.tooltip":ME,"interaction.fisheye":OE,"interaction.brush":jE,"interaction.brushHighlight":VE,"interaction.brushVisible":GE,"interaction.activeRegion":HE,"interaction.ellipsisText":WE,"composition.layer":UE,"composition.flex":YE,"composition.mark":XE,"composition.view":qE,"composition.rect":sT,"composition.matrix":hT,"composition.circle":vT,"composition.keyframe":mT,"adjust.pack":bT}}function vP(e,n){const r=t=>{if("string"!=typeof t)return t;t=e+"."+t;return n[t]||Q1("Unknown Component: "+t)};return[t=>{var e=t["type"],t=I(t,["type"]);return r(e)(Object.assign({},t))},r]}function mP(t,e,n){for(;t<e;)t+=2*Math.PI;for(;n<t;)t-=2*Math.PI;return t}yP.props={category:"preprocessor"};function bP(t,e,n,r,i){var o=t[0],t=t[1],a=di();return o=[o,t],(t=a)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=o[0],t[7]=o[1],t[8]=1,t}function xP(t,e,n,r,i){var o=new vm({range:[e,e+r]}),a=new vm({range:[n,n+i]});return{transform:function(t){var e=t[0],t=t[1];return[o.map(e),a.map(t)]},untransform:function(t){var e=t[0],t=t[1];return[o.invert(e),a.invert(t)]}}}function wP(t,e,n,r,i){return(0,t[0])(e,n,r,i)}function kP(t,e,n,r,i){return t[0]}function _P(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],t=t[3],l=new vm({range:[s,t]}),u=new vm({range:[o,a]}),c=1<(s=i/r)?1:s,h=1<s?1/s:1;return{transform:function(t){var e=t[0],t=t[1],e=u.map(e),t=l.map(t);return[.5*(t*Math.cos(e)*c)+.5,.5*(t*Math.sin(e)*h)+.5]},untransform:function(t){var e=t[0],t=t[1],e=2*(e-.5)/c,t=2*(t-.5)/h,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),t=mP(Math.atan2(t,e),o,a);return[u.invert(t),l.invert(n)]}}}function SP(t,e,n,r,i){return{transform:function(t){var e=t[0];return[t[1],e]},untransform:function(t){var e=t[0];return[t[1],e]}}}function EP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return AP.apply(void 0,NP([[-1,-1]],e,!1))}function TP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return AP.apply(void 0,NP([[-1,1]],e,!1))}function MP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return AP.apply(void 0,NP([[1,-1]],e,!1))}function OP(t,e,n,r,i){var o,t=t[0],a=di();return a=a,t=t,o=Math.sin(t),t=Math.cos(t),a[0]=t,a[1]=o,a[2]=0,a[3]=-o,a[4]=t,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function PP(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],l=(t[3]-s)/(+a/(2*Math.PI)+1),u=l/(2*Math.PI),c=new vm({range:[s,s+.99*l]}),h=new vm({range:[o,a]}),d=1<(t=i/r)?1:t,p=1<t?1/t:1;return{transform:function(t){var e=t[0],t=t[1],e=h.map(e),t=c.map(t);return[.5*(Math.cos(e)*(u*e+t)*d)+.5,.5*(Math.sin(e)*(u*e+t)*p)+.5]},untransform:function(t){var e=t[0],t=t[1],e=2*(e-.5)/d,t=2*(t-.5)/p,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),t=mP(Math.atan2(t,e)+Math.floor(n/l)*Math.PI*2,o,a),e=n-u*t;return[h.invert(t),c.invert(e)]}}}function CP(t,e,n,r,i){var s=t[0],l=t[1],o=t[2],t=t[3],u=new vm({range:[o,t]});return{transform:function(t){for(var e=[],n=t.length,r=new mm({domain:new Array(n).fill(0).map(function(t,e){return e}),range:[s,l]}),i=0;i<n;i++){var o=t[i],a=r.map(i),o=u.map(o);e.push(a,o)}return e},untransform:function(t){for(var e=[],n=0;n<t.length;n+=2){var r=t[n+1];e.push(u.invert(r))}return e}}}var AP=function(t,e,n,r,i){var o=t[0],t=t[1],a=di();return o=[o,t],(t=a)[0]=o[0],t[1]=0,t[2]=0,t[3]=0,t[4]=o[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},NP=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function LP(t){return 1/Math.tan(t)}function IP(t,e,n,r,i){var o=LP(t[0]);return{transform:function(t){var e=t[0],t=t[1];return[e+t*o,t]},untransform:function(t){var e=t[0],t=t[1];return[e-t*o,t]}}}function RP(t,e,n,r,i){var o=LP(t[0]);return{transform:function(t){var e=t[0];return[e,t[1]+e*o]},untransform:function(t){var e=t[0];return[e,t[1]-e*o]}}}function jP(t,e,n,r,i){var o=t<e,i=(o?e-r:i-e)||i-r,r=o?-1:1;return r*i*(n+1)/(n+i/((t-e)*r))+e}function DP(t,e,n,r,i){var o=t<e,i=(o?e-r:i-e)||i-r;return i/(i*(n+1)/(t-e)-n*(o?-1:1))+e}function BP(t,n,e,r,i){var o=t[0],a=t[1];return{transform:function(t){var e=t[0],t=t[1];return[jP(e,o,a,n,n+r),t]},untransform:function(t){var e=t[0],t=t[1];return[DP(e,o,a,n,n+r),t]}}}function FP(t,e,n,r,i){var o=t[0],a=t[1];return{transform:function(t){return[t[0],jP(t[1],o,a,n,n+i)]},untransform:function(t){return[t[0],DP(t[1],o,a,n,n+i)]}}}function zP(t,n,r,i,o){var a=t[0],s=t[1],l=t[2],u=t[3];return{transform:function(t){var e=t[0],t=t[1];return[jP(e,a,l,n,n+i),jP(t,s,u,r,r+o)]},untransform:function(t){var e=t[0],t=t[1];return[DP(e,a,l,n,n+i),DP(t,s,u,r,r+o)]}}}function VP(t,e,n,r,i){var o=t[0],a=t[1],s=t[2],l=t[3];return{transform:function(t){var e=t[0],t=t[1],n=e-o,r=t-a,i=Math.sqrt(n*n+r*r);if(s<i)return[e,t];e=jP(i,0,l,0,s),t=Math.atan2(r,n);return[o+e*Math.cos(t),a+e*Math.sin(t)]},untransform:function(t){var e=t[0],t=t[1],n=e-o,r=t-a,i=Math.sqrt(n*n+r*r);if(s<i)return[e,t];e=DP(i,0,l,0,s),t=Math.atan2(r,n);return[o+e*Math.cos(t),a+e*Math.sin(t)]}}}var GP=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},HP=(WP.prototype.update=function(t){this.options=A({},this.options,t),this.recoordinate()},WP.prototype.clone=function(){return new WP(this.options)},WP.prototype.getOptions=function(){return this.options},WP.prototype.clear=function(){this.update({transformations:[]})},WP.prototype.getSize=function(){var t=this.options;return[t.width,t.height]},WP.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y;return[(2*e+t.width)/2,(2*n+t.height)/2]},WP.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:GP(GP([],n,!0),[GP([],t,!0)],!1)}),this},WP.prototype.map=function(t){return this.output(t)},WP.prototype.invert=function(t){return this.input(t)},WP.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},WP.prototype.compose=function(t){for(var e=(t=void 0===t?!1:t)?GP([],this.options.transformations,!0).reverse():this.options.transformations,n=t?function(t){return t.untransform}:function(t){return t.transform},r=[],o=[],i=function(t,e){return o.push((e=void 0===e?!0:e)?(i=t,function(t){for(var e=[],n=0;n<t.length-1;n+=2){var r=[t[n],t[n+1]],r=i(r);e.push.apply(e,r)}return e}):t);var i},a=0,s=e;a<s.length;a++){var l,u,c,h,d=s[a],p=d[0],d=d.slice(1),f=this.transformers[p];f&&(l=(h=this.options).x,u=h.y,c=h.width,h=h.height,f=f(GP([],d,!0),l,u,c,h),(d=f)instanceof Float32Array||d instanceof Array?r.push(f):(r.length&&(i(this.createMatrixTransform(r,t)),r.splice(0,r.length)),i(n(f)||Mf,"parallel"!==p)))}return r.length&&i(this.createMatrixTransform(r,t)),function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce(function(e,n){return function(t){return n(e(t))}},t):Mf}.apply(void 0,o)},WP.prototype.createMatrixTransform=function(t,e){var n,r,i,o,a,s,l,u,c,h,d,p,f=di();return e&&t.reverse(),t.forEach(function(t){return pi(f,f,t)}),e&&(e=t=f,(p=new hi(9))[0]=e[0],p[1]=e[1],p[2]=e[2],p[3]=e[3],p[4]=e[4],p[5]=e[5],p[6]=e[6],p[7]=e[7],p[8]=e[8],p=(e=p)[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=(e=e[8])*o-a*l,(d=p*u+n*(c=-e*i+a*s)+r*(h=l*i-o*s))&&(t[0]=u*(d=1/d),t[1]=(-e*n+r*l)*d,t[2]=(a*n-r*o)*d,t[3]=c*d,t[4]=(e*p-r*s)*d,t[5]=(-a*p+r*i)*d,t[6]=h*d,t[7]=(-l*p+n*s)*d,t[8]=(o*p-n*i)*d)),function(t){t=[t[0],t[1],1];return Zi(t,t,f),[t[0],t[1]]}},WP);function WP(t){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:xP,translate:bP,custom:wP,matrix:kP,polar:_P,transpose:SP,scale:AP,"shear.x":IP,"shear.y":RP,reflect:EP,"reflect.x":TP,"reflect.y":MP,rotate:OP,helix:PP,parallel:CP,fisheye:zP,"fisheye.x":BP,"fisheye.y":FP,"fisheye.circular":VP},this.update(t)}function UP(t){return void 0!==t.find(t=>"polar"===t.type)}function YP(t){return t.filter(({type:t})=>"transpose"===t).length%2==1}function qP(t,e,n,r,i,o,a){var s=t["scaleName"],t=function(t,e,n,r,i,o){var{name:a,field:s}=t,{field:s=s,guide:l={}}=e,u=function(t,e){var{scale:t,name:n,value:r,type:i}=t,{type:e,domain:o,range:a}=e;return void 0!==t?t:void 0!==e?e:"constant"===i&&!tC(n)||function(t){return t.some(t=>"object"==typeof t&&!(t instanceof Date)&&null!==t)}(r)?"identity":2<(o||a||[]).length?$P(n):void 0===o?QP(r)?$P(n):function(t){return t.some(t=>t instanceof Date)}(r)?"time":"linear":QP(o)?$P(n):"linear"}(t,e);return"string"!=typeof u?e:Object.assign(Object.assign(Object.assign({},e),function(t,e,n,r){var i=e["name"];switch(t){case"linear":case"time":case"log":case"pow":return function(t){var{interpolate:e=om,nice:n=!1,tickCount:r=10}=t;return Object.assign(Object.assign({},t),{interpolate:e,nice:n,tickCount:r})}(n);case"band":case"point":return function(t,e,n,r){if(void 0!==r.padding)return r;var t=function(t,e,n){return"enterDelay"===e||"enterDuration"===e?0:"band"===t?UP(n)?0:.1:"point"===t&&UP(n)?.5:0}(t,e,n),{paddingInner:e=t,paddingOuter:n=t}=r;return Object.assign(Object.assign({},r),{paddingInner:e,paddingOuter:n})}(t,i,r,n);default:return n}}(u,t,e,n)),{domain:function(t,e,n){var r=e["value"],e=n["domain"];if(void 0!==e)return e;switch(t){case"linear":case"time":case"log":case"pow":case"threshold":return function(t,e){var{zero:e=!1}=e;if(0===t.length)return[];let n=1/0,r=-1/0;for(const i of t)eb(i)&&(n=Math.min(n,+i),r=Math.max(r,+i));return e?[Math.min(0,n),r]:[n,r]}(r,n);case"band":case"ordinal":case"point":return JP(r);case"quantile":return function(t){return JP(t).sort()}(r);default:return[]}}(u,t,e),range:function(t,e,n,r,i,o){var a=n["range"];if(void 0!==a)return a;const[s]=vP("palette",o),{name:l,value:u}=e,{defaultCategory10:c,defaultCategory20:h}=i,d={type:function(t){return Array.from(new Set(t))}(u).length<=10?c:h},{palette:p=d}=n,f=s(p);switch(t){case"linear":case"band":case"point":case"time":case"log":return function(t,e){return"enterDelay"===t?[0,1e3]:"enterDuration"==t?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:"color"===t?[e[0],function(t){return t[t.length-1]}(e)]:"size"===t?[1,10]:[0,1]}(l,f);case"ordinal":return"color"===l?f:r;default:return[]}}(u,t,e,r,i,o),guide:l,name:a,field:s,type:u})}(t,e,n,r,i,a),e=t["independent"];if(e)return t;if(!o.has(s))return o.set(s,t),t;var n=o.get(s),r=s,i=n,a=t,{type:e,domain:o,range:s}=i,{type:a,domain:t,range:l}=a;return"string"==typeof e&&"string"==typeof a&&(i.type=function(t,e,n){{if(eC(t,e,"linear","identity"))return"identity";if(eC(t,e,"band","point"))return"band";if(t!==e)throw new Error(`Incompatible scale type: ${t} !== ${e} for channel: `+n);return t}}(e,a,r),i.domain=function(t,e,n){switch(t){case"linear":case"pow":case"log":return nC(e,n);case"band":case"ordinal":return rC(e,n);default:return e}}(e,o,t),i.range=function(t,e,n){switch(t){case"linear":case"band":case"pow":case"log":return nC(e,n);case"ordinal":return rC(e,n);default:return e}}(e,s,l)),n}function XP(t,e){const n=t.map(t=>t[e]).filter(({facet:t=!0})=>t);var t=n.flatMap(t=>t.domain),r=n.every(ZP)?kg(t):n.every(KP)?Array.from(new Set(t)):null;if(null!==r)for(const i of n)i.domain=r}function ZP(t){t=t.type;if("string"!=typeof t)return!1;return["linear","log","pow","time"].includes(t)}function KP(t){t=t.type;if("string"!=typeof t)return!1;return["band","point","ordinal"].includes(t)}function $P(t){return(t=t).startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")?"point":"ordinal"}function JP(t){return Array.from(new Set(t))}function QP(t){return t.some(t=>{t=typeof t;return"string"==t||"boolean"==t})}function tC(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")}function eC(t,e,n,r){return t===n&&e===r||t===r&&e===n}function nC(t,e){var[t,n]=t,[e,r]=e;return[Math.min(+t,+e),Math.max(+n,+r)]}function rC(t,e){return Array.from(new Set([...t,...e]))}function iC(y,g,v,m,b,x){return F(this,void 0,void 0,function*(){const{data:c,encode:t,I:e,columnOf:h,scale:n={}}=yield function(d,p,f){return F(this,void 0,void 0,function*(){const[t,e]=vP("transform",f);d.encode=function(t){const e={};for(var[n,r]of Object.entries(t))if(Array.isArray(r))for(let t=0;t<r.length;t++){var i=""+n+(0===t?"":t);e[i]=r[t]}else e[n]=r;return e}(d.encode);var n=oC(d,f),{transform:r=[]}=d,{preInference:i=[],postInference:o=[]}=p;const a=[],s=[];for(const h of r){var l=h["type"],{category:l="preprocessor"}=e(l).props||{};("preprocessor"===l?a:s).push(h)}var r=yield J1(a.map(t))(n),u=r["data"],u=u?ZE(u):[];const c=[...i,...s,...o];return J1(c.map(t))(Object.assign(Object.assign(Object.assign({},n),r),{I:u}))})}(y,g,x);if(!1===Array.isArray(c))return null;const r=g["channels"],i=Tg(Object.entries(t).filter(([,t])=>eb(t)),([t])=>{return/([^\d]+)\d*$/.exec(t)[1]}),o=r.filter(t=>{var{name:t,required:e}=t;if(i.has(t))return!0;if(e)throw new Error(`Missing encoding for channel: ${t}.`);return!1}).flatMap(u=>{var t=u["name"];const e=i.get(t);return e.map(t=>{var e=u,n=c,r=h,{independent:i=!1,name:o,scaleName:a}=e,e=I(e,["independent","name","scaleName"]),[t,s]=t,l=(s=aC(n,s)).type;return Object.assign(Object.assign({},e),{type:l,name:t,scaleName:null!=a?a:i?t:o,value:r(n,s),field:sC(s)})})}),a={};var{coordinate:s=[]}=b;const l=Tg(o,t=>t.scaleName);for(const[f,o]of l.entries()){var u=g["shapes"],d=function(t){const e={};for(const a of t){var{value:n=[],field:r}=e,{value:i=[],field:o}=a;Object.assign(e,a),e.value=[...n,...i],e.field=null==o?r:o}return e}(o),{[f]:p={}}=n;a[f]=qP(d,p,s,u,m,v,x)}return[Object.assign(Object.assign({},y),{encode:t,scale:a,data:c}),Object.assign(Object.assign({},g),{channels:o,index:e})]})}function oC(t,e){var{data:t,encode:n={},transform:r=[],scale:i={}}=t;return{data:t,encode:n,columnOf:function(t){const[r]=vP("encode",t);return(t,e)=>{if(void 0===e)return null;if(void 0===t)return null;e=aC(t,e);const n=r(e)(t);t=sC(e);return n.field=t,n}}(e),transform:r,I:Array.isArray(t)?ZE(t):[],scale:i}}function aC(t,e){return"object"!=typeof e||e instanceof Date?(t=t,{type:"function"==typeof(n=e)?"transform":"string"==typeof n&&void 0!==(null==(t=null==t?void 0:t[0])?void 0:t[n])?"field":"constant",value:e}):e;var n}function sC(t){var{type:t,value:e}=t;return"field"===t&&"string"==typeof e?e:e&&e.field?e.field:null}function lC(t,n,e){var{component:r=[],coordinate:i=[],title:o,theme:a}=n;const[,s]=vP("component",e);var l,e=t.filter(({guide:t,name:e})=>null!==t&&(!function(t){const{marks:e=[]}=t;return e.some(t=>"object"==typeof t.adjust)}(n)||!tC(e)));const u=[...r];o&&(t=s("title")["props"],{defaultPosition:r,defaultOrder:t,defaultSize:l}=t,a=function(t){var{size:t,text:e,subtitle:n,style:r,subtitleStyle:i}=t;if(t)return t;r=null!=(t=null==r?void 0:r.fontSize)?t:14,t=null!=(t=null==i?void 0:i.fontSize)?t:12,i=(null==i?void 0:i.spacing)||0;return(e?r+4:0)+(n?t+i:0)}(A({size:l},a,l="string"==typeof o?{text:o}:o)),u.push(Object.assign({type:"title",position:r,order:t,size:a},l)));for(const g of e){var c,h,d,p,f,y=function(t,e){const{name:n,guide:r,type:i}=t,o=r["type"];if(void 0!==o)return o;if("color"===n)switch(i){case"ordinal":return"legendCategory";case"linear":return"legendContinuous";default:return null}return YP(e)&&UP(e)?null:n.startsWith("x")?YP(e)?"axisY":"axisX":n.startsWith("y")?YP(e)?"axisX":"axisY":n.startsWith("position")&&!UP(e)?"axisY":null}(g,i);null!==y&&(p=s(y)["props"],{defaultPosition:p,defaultSize:f,defaultOrder:c}=p,{guide:h,name:d}=g,{position:d=function(t,e,n,r,i){r=["left","right","top","bottom","centerHorizontal"].includes(r.position)?r.position:n;{if("axisY"===e&&function(t){return void 0!==t.find(t=>"parallel"===t.type)}(i))return null===(n=/position(\d*)/g.exec(t))||0==+n[1]?r:"centerHorizontal";if("axisX"===e&&UP(i)&&!YP(i)||"axisY"===e&&UP(i)&&YP(i))return"arc";if(UP(i)&&("axisX"===e||"axisY"===e))return"arcY"}return r}(d,y,p,h,i),size:p=f,order:f=c}=h,u.push(Object.assign(Object.assign({},h),{position:d,order:f,size:p,type:y,scale:g})))}return u}function uC(t,e,n,r){const[i]=vP("scale",r),[o]=vP("component",r);var{scale:r,bbox:a}=t,t=I(t,["scale","bbox"]),s=r?i(r):null,{field:r,domain:l}=r||{},r={field:r,domain:l,bbox:a};const u=o(t);return u(s,r,e,n)}function cC(t,e){var t=function(t,e){const n=Tg(t,t=>t.position),{paddingLeft:r,paddingRight:i,paddingBottom:o,paddingTop:a}=e,s={paddingBottom:o,paddingLeft:r,paddingTop:a,paddingRight:i};for(const c of["left","right","top","bottom"]){var l="padding"+function(t){return t.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}(c);if(void 0===s[l])if(n.has(c)){const t=n.get(c);var u=t.reduce((t,{size:e})=>t+e,0);s[l]=u}else s[l]=30}return s}(t,e),{paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:o}=t,{width:e,height:a,x:s=0,y:l=0}=e;return Object.assign(Object.assign({},t),{width:e,height:a,innerWidth:e-n-r,innerHeight:a-i-o,x:s,y:l})}function hC(t,e,n){const r=Tg(t,t=>t.position);var{paddingLeft:t,paddingRight:i,paddingTop:o,paddingBottom:a,innerHeight:s,innerWidth:l,height:u,width:c}=n,h={top:[t,0,l,o,0,!0,xg],right:[c-i,o,i,s,1,!1,xg],bottom:[t,u-a,l,a,0,!1,xg],left:[0,o,t,s,1,!0,xg],centerHorizontal:[t,o,l,s,-1,null,null],arc:[t,o,c-t-i,u-o-a,-1,null,null],arcY:[t,o,c-t-i,u-o-a,-1,null,null]};for(const[b,t]of r.entries()){var d=h[b];if("centerHorizontal"===b)!function(e,t,n,r){const[,i,,o]=r,a=t["paddingLeft"],s=new Array(e.length+1).fill(0),l=n.map(s),u=l.filter((t,e)=>e%2==0).map(t=>t+a);for(let t=0;t<e.length;t++){const d=e[t];var c=u[t],h=u[t+1]-c;d.bbox={x:c,y:i,width:h,height:o}}}(t,n,e,d);else if("arc"===b||"arcY"===b){m=v=g=y=f=p=void 0;var p=t,f=d,[y,g,v,m]=f;for(let t=0;t<p.length;t++){const x=p[t];x.bbox={x:y,y:g,width:v,height:m}}}else!function(n,t){const[e,r,i,o,a,s,l]=t,[u,c,h,d,p,f,y,g]=0===a?["y",r,"x",e,"height",o,"width",i]:["x",e,"y",r,"width",i,"height",o],v=(n.sort((t,e)=>l(t.order,e.order)),s?c+f:c);for(let t=0,e=v;t<n.length;t++){const b=n[t];var m=b["size"];b.bbox={[u]:s?e-m:e,[h]:d,[p]:m,[y]:g},e+=m*(s?-1:1)}}(t,d)}}function dC(A,N,L){return F(this,void 0,void 0,function*(){const[r]=vP("composition",L),[t]=vP("interaction",L),e=new Set(Object.keys(L).filter(t=>t.startsWith("mark")).map(t=>t.split(".").pop())),i=t=>{t=t.type;return"string"==typeof t&&e.has(t)?"mark":t};const o=t=>"standardView"===i(t);var n=t=>{if(o(t))return[t];var e=i(t);const n=r({type:e});return n(t)};const a=[],s=new Map,l=new Map,u=[A],c=[];for(;u.length;){var h=u.shift();if(o(h)){var d=l.get(h);const[_,S]=d?gC(d,h,L):yield fC(h,L),E=(s.set(_,h),a.push(_),S.flatMap(n));if(u.push(...E),E.every(o)){var p=yield Promise.all(E.map(t=>yC(t,L)));XP(d=(d=p).flatMap(t=>Array.from(t.keys())).map(t=>t.scale),"x"),XP(d,"y");for(let t=0;t<E.length;t++){var f=E[t],y=p[t];l.set(f,y)}}}else{d="mark"===i(h)?h:yield function(o,a){return F(this,void 0,void 0,function*(){var[t]=vP("transform",a);const{transform:e=[]}=o,n=I(o,["transform","data"]);var r=oC(o,a),{data:t,encode:r,scale:i}=yield J1(e.map(t))(r);return Object.assign(Object.assign({},n),{data:t,encode:r,scale:i})})}(h,L);const T=n(d);Array.isArray(T)?u.push(...T):"function"==typeof T&&c.push(T())}}const g=new Map,v=[];N.selectAll(".view").data(a,t=>t.key).join(t=>t.append("g").attr("className","view").attr("id",t=>t.key).call(pC).each(function(t){vC(t,rb(this),v,L),g.set(t,this)}),t=>t.call(pC).each(function(t){vC(t,rb(this),v,L)}),t=>t.remove()),N.selectAll(".view").each(function(t){{var e=t,n=rb(this),r=(v,L),i,o;const s=e["markState"];for([i,o]of s.entries()){var a=i["key"];const l=n.select("#"+a),u=function(t,e,n,r){return mC("labelShape",t,e,n,r)}(i,o,e,r);l.selectAll(".element").each(function(t,e){if(void 0!==(null==t?void 0:t.label)){const n=u(t,e,this);t=this.getElementById(".label");t?tb(t,n):(n.id="label",this.appendChild(n))}})}}});var m=Array.from(g.entries()).map(([t,e])=>({view:t,container:e,options:s.get(t),update:function(i,o){return r=>F(this,void 0,void 0,function*(){var[t,e]=yield fC(r,o);vC(t,i,[],o);for(const n of e)dC(n,i,o)})}(rb(e),L)}));for(const M of m){const A=M["options"];var b=A["interaction"];for(const O of function(t=[]){const n=[...t];return["tooltip","ellipsisText"].forEach(e=>{t.find(t=>t.type===e)||n.push({type:e})}),n}(b)){const P=t(O);P(M,m)}}const{width:x,height:w}=A;for(const C of c){var k=new Promise(e=>F(this,void 0,void 0,function*(){for(const t of C)yield dC(Object.assign({width:x,height:w},t),N,L);e()}));v.push(k)}return Promise.all(v)})}function pC(t){t.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function fC(t,e){return F(this,void 0,void 0,function*(){return gC(yield yC(t,e),t,e)})}function yC(c,h){return F(this,void 0,void 0,function*(){const[t]=vP("theme",h),[,e]=vP("mark",h);var{theme:n,marks:r}=c,i=t(wC(n));const o=new Map;var a=new Map;for(const u of r){var s,{type:l=Q1("G2Mark type is required.")}=u,l=e(l)["props"],l=yield iC(u,l,a,i,c,h);l&&([l,s]=l,o.set(l,s))}return o})}function gC(t,e,n){const[r]=vP("mark",n);var[i]=vP("scale",n);const[o]=vP("adjust",n),[a]=vP("theme",n);var{key:s,frame:l,theme:u}=e,u=a(wC(u));const c=Array.from(t.keys());var h,d,p=new Set(c.flatMap(t=>Object.values(t.scale))),p=lC(Array.from(p),e,n),f=cC(p,e),y=function(t,e,n){var[n]=vP("coordinate",n),{innerHeight:t,innerWidth:r}=t,{coordinate:e=[]}=e;const i=(e=e).find(t=>"cartesian"===t.type)?e:[...e,{type:"cartesian"}];return new HP({x:0,y:0,width:r,height:t,transformations:i.map(n).flat()})}(f,e,n),g=(hC(p,y,f),{});const v=[];for([h,d]of t.entries()){const{scale:k,children:_,dataDomain:S,adjust:E}=h;var{index:m,channels:b}=d,x=function(r,i){return Object.entries(r).reduce((t,[e,n])=>(t[e]=i(n,e,r),t),{})}(k,i);Object.assign(g,x);const T=function(t,e){const n={};for(var{scaleName:r,value:i,name:o}of t){const a=e[r];n[o]=i.map(t=>a.map(t))}return n}(b,x),M=r(h),[O,P,C]=M(m,x,T,y),A=[],N=[];for(let t=0;t<O.length;t++){var w=O[t];const I=P[t];I.every(([t,e])=>eb(t)&&eb(e))&&(A.push(w),N.push(I))}b=S||A.length;const L=E?o(E)(P,b,f):[];m=A.map((t,e)=>{const n={points:N[e],transform:L[e]};for(const[r,i]of Object.entries(T))n[r]=i[t],C&&(n["series"+gf(r)]=C[e].map(t=>i[t]));return n}),b=(d.data=m,d.index=A,null===_||void 0===_?void 0:_(m,x,f));v.push(...b||[])}return[{layout:f,theme:u,coordinate:y,components:p,markState:t,key:s,frame:l,scale:g},v]}function vC(v,m,b,x){F(this,void 0,void 0,function*(){const{components:t,theme:n,layout:e,markState:r,coordinate:i,key:o,frame:a=!1}=v;m.selectAll(".component").data(t,(t,e)=>t.type+"-"+e).join(t=>t.append("g").style("zIndex",({zIndex:t})=>t||-1).attr("className","component").append(t=>uC(t,i,n,x)),t=>t.each(function(t){t=uC(t,i,n,x).attributes;const[e]=this.childNodes;e.update(Object.assign({},t))})),m.selectAll(".plot").data([e],()=>o).join(t=>t.append("rect").attr("className","plot").style("fill","transparent").call(_C,a).call(kC).call(SC,Array.from(r.keys())),t=>t.call(kC).call(SC,Array.from(r.keys())));for(var[s,l]of r.entries()){var u=l["data"];const{key:o,class:d}=s,p=(c=s,h=l,mC("shape",c,h,v,x)),f=(c=s,h=l,bC("enter",c,h,v,x)),y=(c=s,h=l,bC("update",c,h,v,x)),g=(c=s,h=l,bC("exit",c,h,v,x));s=function(t,e,n){const r=t.node().parentElement;return r.findAll(t=>t.style.facet===e).flatMap(t=>t.getElementsByClassName(n))}(m,d,"element"),l=m.select("#"+o).selectAll(".element").selectFacetAll(s).data(u,t=>t.key,t=>t.groupKey).join(t=>t.append(p).attr("className","element").transition(function(t){return f(t,[this])}),e=>e.call(t=>{const l=t.parent(),u=function(n){const r=new Map;return t=>{if(r.has(t))return r.get(t);var e=n(t);return r.set(t,e),e}}(t=>{var[t,e]=t.getBounds().min;return[t,e]});e.transition(function(t,e){n=this,r=l,i=u,n.__facet__&&(o=n.parentNode.parentNode,s=r.parentNode,[o,a]=i(o),[i,s]=i(s),o=`translate(${o-i}, ${a-s})`,i=n.style.transform,n.style.transform=(("none"===i?"":i)+" "+o).trimStart(),r.append(n));var n,r,i,o,a=p(t,e),s=y(t,[this],[a]);return null===s&&tb(this,a),s})}),t=>t.transition(function(t){return g(t,[this])}).remove(),t=>t.append(p).attr("className","element").transition(function(t){var e=this["__fromElements__"],t=y(t,e,[this]);const n=new ib(e,null,this.parentNode);return n.transition(t).remove(),t}),t=>t.transition(function(t){const e=new ib([],this.__toData__,this.parentNode);var n=e.append(p).attr("className","element").nodes();return y(t,[this],n)}).remove()).transitions();b.push(...l)}var c,h})}function mC(a,t,e,n,r){const[s]=vP("shape",r);r="default"+gf(a);const{[r]:l,data:i}=e,u=i.map(t=>t.points),{theme:c,coordinate:h}=n,d=t["style"];return(t,e,n)=>{var r=t[a],i=t["points"],t=I(t,["symbol"==typeof a?a:a+"","points"]),t=Object.assign(Object.assign({},t),{index:e,element:n}),n="object"==typeof(e=r||l)?e:{type:e};const o=s(Object.assign(Object.assign({},n),d));return o(i,t,h,c,u)}}function bC(l,t,e,n,r){const[,i]=vP("shape",r),[u]=vP("animation",r);r=e.defaultShape;const{theme:o,coordinate:c}=n;e=`default${gf(l)}Animation`;const{[e]:h}=i(r).props,{[l]:d={}}=t.animate||{},{[l]:p={}}=o;return(t,e,n)=>{var{[l+"Type"]:t,[l+"Delay"]:r,[l+"Duration"]:i,[l+"Easing"]:o}=t,t=Object.assign({type:t||h},d);if(!t.type)return null;const a=u(t),s=a(e,n,{delay:r,duration:i,easing:o},c,p);return Array.isArray(s)?Promise.all(s.map(xC)):xC(s)}}function xC(t){return t.finished.then(()=>{t.cancel()})}function wC(t={type:"light"}){var{type:e="light"}=t;return Object.assign(Object.assign({},t),{type:e})}function kC(t){t.style("x",t=>t.paddingLeft).style("y",t=>t.paddingTop).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function _C(t,e){e&&t.style("lineWidth",1).style("stroke","black")}function SC(t,e){const n=t=>void 0!==t.class?""+t.class:"";t.each(function(){rb(this).selectAll(".main").data(e,t=>t.key).join(t=>t.append("g").attr("className","main").attr("id",t=>t.key).style("facet",n).style("fill","transparent"),t=>t.style("facet",n),t=>t.remove())})}function EC(t,e={},n){const{width:r=640,height:i=480}=t,o=function(t){t=A({},t);const e=new Map([[t,null]]),n=new Map([[null,-1]]),r=[t];for(;r.length;){const l=r.shift();void 0===l.key&&(o=e.get(l),i=n.get(l),o=null===o?"0":o.key+"-"+i,l.key=o);var i,o,{children:a=[]}=l;if(Array.isArray(a))for(let t=0;t<a.length;t++){var s=a[t];e.set(s,l),n.set(s,t),r.push(s)}}return t}(t),{canvas:a=og({width:r,height:i,container:document.createElement("div")}),library:s=gP()}=e,l=(e.canvas=a,e.library=s,rb(a.document.documentElement));return a.addEventListener(fp.READY,()=>F(this,void 0,void 0,function*(){yield dC(Object.assign(Object.assign({},o),{width:r,height:i}),l,s),null!=n&&n()})),"string"==typeof(t=a.getConfig().container)?document.getElementById(t):t}class TC{constructor(t={},e){this.parentNode=null,this.children=[],this.index=0,this.type=e,this.value=t}map(t=t=>t){t=t(xf(this.value));return this.value=t,this}attr(e,n){return void 0===n?this.value[e]:this.map(t=>(t[e]=n,t))}append(t){const e=new t({});return e.children=[],e.parentNode=this,e.index=this.children.length,this.children.push(e),e}call(t,...e){return t(this.map(),...e),this}}function MC(r){return t=>{for(const n of r){var e=n["type"];"value"===e?function(t,{name:e}){t.prototype[e]=function(t){return this.attr(e,t)}}(t,n):"array"===e?function(t,{name:r}){t.prototype[r]=function(t){if(Array.isArray(t)||void 0===t)return this.attr(r,t);var e=this.attr(r);const n=[...Array.isArray(e)?e:[]];return n.push(t),this.attr(r,n)}}(t,n):"object"===e?function(t,{name:r}){t.prototype[r]=function(t,e){if(Zp(t)||void 0===t)return this.attr(r,t);const n=xf(this.attr(r)||{});return n[t]=e,this.attr(r,n)}}(t,n):"node"===e?function(t,{name:e,ctor:n}){t.prototype[e]=function(){return this.append(n)}}(t,n):"container"===e&&function(t,{name:e,ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}(t,n)}return t}}function OC(t){return Object.entries(t).map(([t,e])=>({type:"node",name:t,ctor:e}))}s=[{name:"encode",type:"object"},{name:"scale",type:"object"},{name:"data",type:"value"},{name:"key",type:"value"},{name:"class",type:"value"},{name:"transform",type:"array"},{name:"style",type:"object"},{name:"animate",type:"object"},{name:"frame",type:"value"},{name:"facet",type:"value"},{name:"adjust",type:"value"},{name:"coordinate",type:"array"},{name:"interaction",type:"array"},{name:"paddingLeft",type:"value"},{name:"paddingRight",type:"value"},{name:"paddingBottom",type:"value"},{name:"paddingTop",type:"value"}];let PC=class extends TC{constructor(){super({},"interval")}},CC=(PC=t([MC(s)],PC),class extends TC{constructor(){super({},"point")}}),AC=(CC=t([MC(s)],CC),class extends TC{constructor(){super({},"area")}}),NC=(AC=t([MC(s)],AC),class extends TC{constructor(){super({},"line")}}),LC=(NC=t([MC(s)],NC),class extends TC{constructor(){super({},"grid")}}),IC=(LC=t([MC(s)],LC),class extends TC{constructor(){super({},"vector")}}),RC=(IC=t([MC(s)],IC),class extends TC{constructor(){super({},"link")}}),jC=(RC=t([MC(s)],RC),class extends TC{constructor(){super({},"polygon")}});jC=t([MC(s)],jC);h=t([MC(s)],class extends TC{constructor(){super({},"image")}});let DC=class extends TC{constructor(){super({},"text")}},BC=(DC=t([MC(s)],DC),class extends TC{constructor(){super({},"schema")}}),FC=(BC=t([MC(s)],BC),class extends TC{constructor(){super({},"annotation.text")}}),zC=(FC=t([MC(s)],FC),class extends TC{constructor(){super({},"annotation.lineX")}}),VC=(zC=t([MC(s)],zC),class extends TC{constructor(){super({},"annotation.lineY")}}),GC=(VC=t([MC(s)],VC),class extends TC{constructor(){super({},"annotation.range")}}),HC=(GC=t([MC(s)],GC),class extends TC{constructor(){super({},"annotation.rangeX")}}),WC=(HC=t([MC(s)],HC),class extends TC{constructor(){super({},"annotation.rangeY")}}),UC=(WC=t([MC(s)],WC),class extends TC{constructor(){super({},"annotation.connector")}});UC=t([MC(s)],UC);$={interval:PC,point:CC,area:AC,line:NC,grid:LC,vector:IC,link:RC,polygon:jC,image:h,text:DC,schema:BC,annotationText:FC,annotationLineX:zC,annotationLineY:VC,annotationRange:GC,annotationRangeX:HC,annotationRangeY:WC,annotationConnector:UC};let YC=class extends TC{constructor(){super({},"view")}},qC=(YC=t([MC([{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"coordinate"},{type:"array",name:"interaction"},{type:"object",name:"theme"},...OC($)])],YC),class extends TC{constructor(){super({},"layer")}}),XC=(qC=t([MC([{type:"value",name:"data"},{type:"value",name:"key"},...OC($)])],qC),class extends TC{constructor(){super({},"flex")}}),ZC=(XC=t([MC([{type:"value",name:"data"},{type:"value",name:"key"},{type:"value",name:"padding"},{type:"value",name:"ratio"},{type:"value",name:"direction"},...OC($)])],XC),class extends TC{constructor(){super({},"rect")}}),KC=(ZC=t([MC([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},{type:"value",name:"shareData"},{type:"value",name:"shareSize"},...OC($)])],ZC),class extends TC{constructor(){super({},"circle")}}),$C=(KC=t([MC([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},...OC($)])],KC),class extends TC{constructor(){super({},"matrix")}}),JC=($C=t([MC([{type:"value",name:"data"},{type:"value",name:"key"},{type:"array",name:"transform"},{type:"object",name:"scale"},{type:"object",name:"encode"},{type:"value",name:"paddingLeft"},{type:"value",name:"paddingRight"},{type:"value",name:"paddingBottom"},{type:"value",name:"paddingTop"},...OC($)])],$C),class extends TC{constructor(){super({},"keyframe")}});JC=t([MC([{type:"value",name:"key"},{type:"value",name:"direction"},{type:"value",name:"easing"},{type:"value",name:"iterationCount"},{type:"value",name:"duration"},...OC($)])],JC);var QC={view:YC,layer:qC,flex:XC,rect:ZC,circle:KC,matrix:$C,keyframe:JC};for(const nA of Object.values(QC))MC(OC(QC))(nA);function tA(t){var e=xf(t.value);return Object.assign(Object.assign({},e),{type:t.type})}function eA(t){t=function(t){if(null!==t.type)return t;const e=t.children[t.children.length-1];return e.attr("width",t.attr("width")),e.attr("height",t.attr("height")),e.attr("paddingLeft",t.attr("paddingLeft")),e.attr("paddingTop",t.attr("paddingTop")),e.attr("paddingBottom",t.attr("paddingBottom")),e.attr("paddingRight",t.attr("paddingRight")),e}(t);const e=[t],n=new Map;for(n.set(t,tA(t));e.length;){const t=e.pop(),i=n.get(t);for(const o of t.children){var r=tA(o);const{children:a=[]}=i;a.push(r),e.push(o),n.set(o,r),i.children=a}}return n.get(t)}n=[{name:"data",type:"value"},{name:"coordinate",type:"array"},{name:"interaction",type:"array"},{name:"theme",type:"object"},{name:"title",type:"object"},{name:"key",type:"value"},{name:"transform",type:"array"},{name:"theme",type:"object"},...OC($),...Object.entries(QC).map(([t,e])=>({type:"container",name:t,ctor:e}))];w.Chart=class extends TC{constructor(t={}){var e=t["container"];super(I(t,["container"]),"view"),this.container=void 0===(t=e)?document.createElement("div"):"string"==typeof t?document.getElementById(t):t}render(){var t=EC(eA(this));return this.container.append(t),this}options(){return eA(this)}node(){return this.container}},w.Chart=t([MC(n)],w.Chart),w.createLibrary=gP,w.render=EC,Object.defineProperty(w,"__esModule",{value:!0})});
