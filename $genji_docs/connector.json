{"markdown":"# Transform\n\n## Fetch\n\n```js | dom\nG2.render({\n  type: 'interval',\n  // fetch\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/bmw-prod/ce45e3d7-ba78-4a08-b411-28df40ef9b7f.json',\n    },\n  ],\n  encode: {\n    x: 'genre',\n    y: 'sold',\n  },\n});\n```\n\n## SortBy\n\n```js | dom\nG2.render({\n  type: 'interval',\n  // sortBy\n  transform: [{ type: 'sortBy', fields: ['sold'] }],\n  data: [\n    { genre: 'Sports', sold: 275 },\n    { genre: 'Strategy', sold: 115 },\n    { genre: 'Action', sold: 120 },\n    { genre: 'Shooter', sold: 350 },\n    { genre: 'Other', sold: 150 },\n  ],\n  encode: {\n    x: 'genre',\n    y: 'sold',\n  },\n});\n```\n\n## FilterBy\n\n```js | dom\nG2.render({\n  type: 'line',\n  width: 720,\n  paddingLeft: 60,\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/bmw-prod/96cd81b5-54a4-4fe8-b778-502b2114df58.json',\n      callback: ({ Year, ...rest }) => ({\n        Year: new Date(Year),\n        ...rest,\n      }),\n    },\n    {\n      type: 'filterBy',\n      // Filter data with defined Horsepower and Miles_per_Gallon.\n      fields: ['Horsepower', 'Miles_per_Gallon'],\n    },\n  ],\n  coordinate: [{ type: 'parallel' }],\n  scale: {\n    // zIndex of mark is default to 0.\n    // zIndex of component is default to -1.\n    // Set zIndex to 1 for component to draw above marks.\n    position: { nice: true, guide: { zIndex: 1 } },\n    position1: { nice: true, guide: { zIndex: 1 } },\n    position2: { nice: true, guide: { zIndex: 1 } },\n    position3: { nice: true, guide: { zIndex: 1 } },\n    position4: { nice: true, guide: { zIndex: 1 } },\n    position5: { nice: true, guide: { zIndex: 1 } },\n  },\n  encode: {\n    position: [\n      'Cylinders',\n      'Displacement',\n      'Weight_in_lbs',\n      'Horsepower',\n      'Acceleration',\n      'Miles_per_Gallon',\n      'Year',\n    ],\n    color: 'Origin',\n    size: 1.01,\n  },\n  style: {\n    strokeOpacity: 0.3,\n  },\n});\n```\n\n## WordCloud\n\n**Basic WordCloud.**\n\n```js | dom\n(() => {\n  const Flat =\n    () =>\n    ({ data }) => ({\n      data: data.flatMap((d) =>\n        d.words.map(({ weight, word }) => ({\n          value: weight,\n          text: word,\n          name: d.name,\n        })),\n      ),\n    });\n\n  Flat.props = { category: 'connector' };\n\n  return G2.render({\n    type: 'text',\n    paddingLeft: 0,\n    paddingRight: 0,\n    paddingTop: 0,\n    paddingBottom: 0,\n    transform: [\n      {\n        type: 'fetch',\n        url: 'https://gw.alipayobjects.com/os/bmw-prod/d345d2d7-a35d-4d27-af92-4982b3e6b213.json',\n      },\n      {\n        type: Flat,\n      },\n      {\n        type: 'wordCloud',\n        size: [640, 480],\n        timeInterval: 5000,\n        padding: 0,\n        rotate: () => ~~(Math.random() * 2) * 90,\n        fontSize: (d) => d.value * 2,\n      },\n    ],\n    scale: {\n      x: { guide: null },\n      y: { guide: null, range: [0, 1] },\n      color: { guide: null },\n      fontSize: { type: 'identity' },\n      rotate: { type: 'identity' },\n    },\n    encode: {\n      x: 'x',\n      y: 'y',\n      text: 'text',\n      color: 'black',\n      rotate: 'rotate',\n      fontSize: 'size',\n      tooltip: 'name',\n    },\n    style: {\n      textAlign: 'center',\n      textBaseline: 'alphabetic',\n      fontFamily: 'Verdana',\n      fontWeight: 'normal',\n    },\n  });\n})();\n```\n\n**WordCloud with imageMask.**\n\n```js | dom\nG2.render({\n  type: 'text',\n  paddingLeft: 0,\n  paddingRight: 0,\n  paddingTop: 0,\n  paddingBottom: 0,\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/antvdemo/assets/data/antv-keywords.json',\n    },\n    {\n      type: 'wordCloud',\n      size: [640, 480],\n      timeInterval: 5000,\n      padding: 0,\n      text: (d) => d.name,\n      fontSize: [8, 32],\n      spiral: 'rectangular',\n      font: 'Verdana',\n      imageMask:\n        'https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*07tdTIOmvlYAAAAAAAAAAABkARQnAQ',\n    },\n  ],\n  scale: {\n    x: { guide: null },\n    y: { guide: null, range: [0, 1] },\n    color: { guide: null },\n    fontSize: { type: 'identity' },\n    rotate: { type: 'identity' },\n  },\n  encode: {\n    x: 'x',\n    y: 'y',\n    text: 'text',\n    color: 'name',\n    rotate: 'rotate',\n    fontSize: 'size',\n    tooltip: 'name',\n  },\n  style: {\n    textAlign: 'center',\n    textBaseline: 'alphabetic',\n    fontFamily: 'Verdana',\n    fontWeight: 'normal',\n  },\n});\n```\n"}