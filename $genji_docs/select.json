{"markdown":"# Select\n\nThe select transform groups marks with specified channels, and filter index by specified selector for each series, say to pull a single or multiple values out of each series. The default channel for grouping is _series_, and the built-in selector is as followed:\n\n- _min_\n- _max_\n- _last_\n- _first_\n- a _function_\n\n## Select\n\n```js\nG2.render({\n  type: 'view',\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/antvdemo/assets/data/bubble.json',\n    },\n  ],\n  children: [\n    {\n      type: 'point',\n      scale: {\n        size: { type: 'log', range: [4, 20] },\n        y: { field: 'Life' },\n      },\n      encode: {\n        x: 'GDP',\n        y: 'LifeExpectancy',\n        size: 'Population',\n        color: 'continent',\n      },\n      style: {\n        fillOpacity: 0.3,\n        lineWidth: 1,\n      },\n    },\n    {\n      type: 'text',\n      transform: [{ type: 'select', size: 'max' }],\n      encode: {\n        x: 'GDP',\n        y: 'LifeExpectancy',\n        text: 'Country',\n        size: 'Population',\n      },\n      style: {\n        fill: 'black',\n        stroke: 'none',\n        textAlign: 'center',\n        textBaseline: 'middle',\n      },\n    },\n  ],\n});\n```\n\n## SelectX\n\n```js\nG2.render({\n  type: 'view',\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/bmw-prod/6a9b4091-2fe1-4649-89f3-f9a211827811.json',\n    },\n  ],\n  paddingLeft: 60,\n  paddingRight: 60,\n  children: [\n    {\n      type: 'line',\n      scale: { x: { field: 'Date' } },\n      encode: {\n        x: (d) => new Date(d.Date),\n        y: 'Close',\n        color: 'Symbol',\n      },\n    },\n    {\n      type: 'text',\n      transform: [{ type: 'selectX', selector: 'last' }],\n      encode: {\n        x: (d) => new Date(d.Date),\n        y: 'Close',\n        series: 'Symbol',\n        text: 'Symbol',\n      },\n      style: {\n        fontSize: 10,\n        fontWeight: 'normal',\n        fill: 'black',\n        stroke: 'none',\n      },\n    },\n  ],\n});\n```\n\n## SelectY\n\n```js\nG2.render({\n  type: 'view',\n  transform: [\n    {\n      type: 'fetch',\n      url: 'https://gw.alipayobjects.com/os/bmw-prod/ab55d10f-24da-465a-9eba-87ac4b7a83ec.json',\n    },\n  ],\n  children: [\n    {\n      type: 'line',\n      encode: {\n        x: (d) => new Date(d.Date),\n        y: 'Close',\n      },\n    },\n    {\n      type: 'annotation.lineY',\n      transform: [\n        {\n          type: 'selectY',\n          selector: (I, V) => {\n            const sum = V.reduce((s, v) => s + v);\n            const mean = sum / V.length;\n            let mi;\n            let mv = Infinity;\n            for (const i of I) {\n              const d = Math.abs(V[i] - mean);\n              if (d < mv) [mv, mi] = [d, i];\n            }\n            return [mi];\n          },\n        },\n      ],\n      encode: {\n        y: 'Close',\n      },\n      style: {\n        stroke: 'black',\n      },\n    },\n  ],\n});\n```\n"}